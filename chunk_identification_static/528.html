<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>528</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    528
                    <a href="527.html">prev</a>
                    <a href="529.html">next</a>
                    <a href="528_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_69925bb1923f86f4b590962cdcd4299b98b9f30d_src/com/android/launcher3/LauncherModel.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;69925bb1923f86f4b590962cdcd4299b98b9f30d:src/com/android/launcher3/LauncherModel.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;69925bb1923f86f4b590962cdcd4299b98b9f30d^1:src/com/android/launcher3/LauncherModel.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;69925bb1923f86f4b590962cdcd4299b98b9f30d^2:src/com/android/launcher3/LauncherModel.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;298a9c61853b7460d5dbe14429f05f8f2deed6bc:src/com/android/launcher3/LauncherModel.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b]], subset: [[b], [b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  22 import android.content.BroadcastReceiver;                                                                </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  23 import android.content.ComponentName;                                                                    </span>
<span class="5843991090186771909" onmouseenter="enter('5843991090186771909');" onmouseout="out('5843991090186771909');" style="">  24 import android.content.ContentProviderClient;                                                            </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  25 import android.content.ContentProviderOperation;                                                         </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  26 import android.content.ContentResolver;                                                                  </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  27 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  29 import android.content.Intent;                                                                           </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  30 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  31 import android.content.IntentFilter;                                                                     </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  32 import android.content.SharedPreferences;                                                                </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  33 import android.content.pm.PackageManager;                                                                </span>
<span class="-7427681121873781918" onmouseenter="enter('-7427681121873781918');" onmouseout="out('-7427681121873781918');" style="">  34 import android.content.pm.ProviderInfo;                                                                  </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  35 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  36 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  37 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  38 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  39 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  40 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  41 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  42 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  43 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  44 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  45 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  46 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  47 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  48 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  49 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  50 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  51 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  52 import android.util.Pair;                                                                                </span>
<span  style="">  53                                                                                                          </span>
<span class="-2301578055393860706" onmouseenter="enter('-2301578055393860706');" onmouseout="out('-2301578055393860706');" style="">  54 import com.android.launcher3.compat.AppWidgetManagerCompat;                                              </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  55 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  56 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="-6378403157506113444" onmouseenter="enter('-6378403157506113444');" onmouseout="out('-6378403157506113444');" style="">  57 import com.android.launcher3.compat.PackageInstallerCompat;                                              </span>
<span class="-9185808437279523438" onmouseenter="enter('-9185808437279523438');" onmouseout="out('-9185808437279523438');" style="">  58 import com.android.launcher3.compat.PackageInstallerCompat.PackageInstallInfo;                           </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  59 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  60 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span  style="">  61                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  62 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  63 import java.net.URISyntaxException;                                                                      </span>
<span class="4163694070296964880" onmouseenter="enter('4163694070296964880');" onmouseout="out('4163694070296964880');" style="">  64 import java.security.InvalidParameterException;                                                          </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  65 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  66 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  67 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  68 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  69 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  70 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  71 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  72 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  73 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  74 import java.util.List;                                                                                   </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  75 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  76 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  77 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  78 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  79                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  80 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  81  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  82  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  83  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  84  */                                                                                                      </span>
<span class="-2442101869408899034" onmouseenter="enter('-2442101869408899034');" onmouseout="out('-2442101869408899034');" style="">  85 public class LauncherModel extends BroadcastReceiver                                                     </span>
<span class="-6161550071310903350" onmouseenter="enter('-6161550071310903350');" onmouseout="out('-6161550071310903350');" style="">  86         implements LauncherAppsCompat.OnAppsChangedCallbackCompat {                                      </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  87     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span class="-5037112122408598239" onmouseenter="enter('-5037112122408598239');" onmouseout="out('-5037112122408598239');" style="">  88     private static final boolean DEBUG_RECEIVER = false;                                                 </span>
<span class="-4012347986936200510" onmouseenter="enter('-4012347986936200510');" onmouseout="out('-4012347986936200510');" style="">  89     private static final boolean REMOVE_UNRESTORED_ICONS = true;                                         </span>
<span  style="">  90                                                                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  91     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  92                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  93     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  94     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  95     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  96     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  97     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  98     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style="">  99                                                                                                          </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style=""> 100     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style=""> 101     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style=""> 102                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style=""> 103     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style=""> 104     private final boolean mOldContentProviderExists;                                                     </span>
<span  style=""> 105                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style=""> 106     private final LauncherAppState mApp;                                                                 </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style=""> 107     private final Object mLock = new Object();                                                           </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style=""> 108     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 109     private LoaderTask mLoaderTask;                                                                      </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 110     private boolean mIsLoaderTaskRunning;                                                                </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 111     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style=""> 112                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 113     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 114     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 115     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 116     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style=""> 117                                                                                                          </span>
<span class="5026118005036723308" onmouseenter="enter('5026118005036723308');" onmouseout="out('5026118005036723308');" style=""> 118     private static final String MIGRATE_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 120     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 121     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 122         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 124     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 125                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 126     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 127     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 128     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 129     private boolean mWorkspaceLoaded;                                                                    </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 130     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 131                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 132     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 133     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 134     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 135     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 136     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 137                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 138     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 139                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 140     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 141     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 142                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 143     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 144     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 145     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 146     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 147     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 148                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 149     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 150     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 151     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 152                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 153     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 154     //       created by LauncherModel that are directly on the home screen (however, no widgets or       </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 155     //       shortcuts within folders).                                                                  </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 156     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 157                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 158     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 159     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                        </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 160         new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                          </span>
<span  style=""> 161                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 162     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 163     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 164                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 165     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 166     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 167                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 168     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 169     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 170                                                                                                          </span>
<span class="8587182513202290942" onmouseenter="enter('8587182513202290942');" onmouseout="out('8587182513202290942');" style=""> 171     // sPendingPackages is a set of packages which could be on sdcard and are not available yet          </span>
<span class="7668483630172593446" onmouseenter="enter('7668483630172593446');" onmouseout="out('7668483630172593446');" style=""> 172     static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages =                           </span>
<span class="3743105789756038321" onmouseenter="enter('3743105789756038321');" onmouseout="out('3743105789756038321');" style=""> 173             new HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt;();                                            </span>
<span  style=""> 174                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 175     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 176                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 177     private IconCache mIconCache;                                                                        </span>
<span  style=""> 178                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 179     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="-1392466613073934971" onmouseenter="enter('-1392466613073934971');" onmouseout="out('-1392466613073934971');" style=""> 181     private final LauncherAppsCompat mLauncherApps;                                                      </span>
<span class="-6177668713869523688" onmouseenter="enter('-6177668713869523688');" onmouseout="out('-6177668713869523688');" style=""> 182     private final UserManagerCompat mUserManager;                                                        </span>
<span  style=""> 183                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 184     public interface Callbacks {                                                                         </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 185         public boolean setLoadOnResume();                                                                </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 186         public int getCurrentWorkspaceScreen();                                                          </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 187         public void startBinding();                                                                      </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 188         public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                         </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 189                               boolean forceAnimateIcons);                                                </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 190         public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                       </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 191         public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                    </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 192         public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                       </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 193         public void finishBindingItems(boolean upgradePath);                                             </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 194         public void bindAppWidget(LauncherAppWidgetInfo info);                                           </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 195         public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                        </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 196         public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                            </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 197                                   ArrayList&lt;ItemInfo&gt; addNotAnimated,                                    </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 198                                   ArrayList&lt;ItemInfo&gt; addAnimated,                                       </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 199                                   ArrayList&lt;AppInfo&gt; addedApps);                                         </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 200         public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                            </span>
<span class="-6991207189725786229" onmouseenter="enter('-6991207189725786229');" onmouseout="out('-6991207189725786229');" style=""> 201         public void bindAppsRestored(ArrayList&lt;AppInfo&gt; apps);                                           </span>
<span class="1552205679904733456" onmouseenter="enter('1552205679904733456');" onmouseout="out('1552205679904733456');" style=""> 202         public void updatePackageState(ArrayList&lt;PackageInstallInfo&gt; installInfo);                       </span>
<span class="3764474087617128758" onmouseenter="enter('3764474087617128758');" onmouseout="out('3764474087617128758');" style=""> 203         public void updatePackageBadge(String packageName);                                              </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 204         public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                </span>
<span class="-1539895317750647539" onmouseenter="enter('-1539895317750647539');" onmouseout="out('-1539895317750647539');" style=""> 205                         ArrayList&lt;AppInfo&gt; appInfos, UserHandleCompat user);                             </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 206         public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                          </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 207         public void bindSearchablesChanged();                                                            </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 208         public boolean isAllAppsButtonRank(int rank);                                                    </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 209         public void onPageBoundSynchronously(int page);                                                  </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 210         public void dumpLogsToLocalData();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 213     public interface ItemInfoFilter {                                                                    </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 214         public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215     }                                                                                                    </span>
<span  style=""> 216                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 217     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 218         Context context = app.getContext();                                                              </span>
<span  style=""> 219                                                                                                          </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 220         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="6456618698786728431" onmouseenter="enter('6456618698786728431');" onmouseout="out('6456618698786728431');" style=""> 221         String oldProvider = context.getString(R.string.old_launcher_provider_uri);                      </span>
<span class="-4473607088242738177" onmouseenter="enter('-4473607088242738177');" onmouseout="out('-4473607088242738177');" style=""> 222         // This may be the same as MIGRATE_AUTHORITY, or it may be replaced by a different               </span>
<span class="-5811264300229071057" onmouseenter="enter('-5811264300229071057');" onmouseout="out('-5811264300229071057');" style=""> 223         // resource string.                                                                              </span>
<span class="7826951633422431656" onmouseenter="enter('7826951633422431656');" onmouseout="out('7826951633422431656');" style=""> 224         String redirectAuthority = Uri.parse(oldProvider).getAuthority();                                </span>
<span class="6066736278849717257" onmouseenter="enter('6066736278849717257');" onmouseout="out('6066736278849717257');" style=""> 225         ProviderInfo providerInfo =                                                                      </span>
<span class="-9141516768909079071" onmouseenter="enter('-9141516768909079071');" onmouseout="out('-9141516768909079071');" style=""> 226                 context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY, 0);                </span>
<span class="765698750338601416" onmouseenter="enter('765698750338601416');" onmouseout="out('765698750338601416');" style=""> 227         ProviderInfo redirectProvider =                                                                  </span>
<span class="-45874905823641339" onmouseenter="enter('-45874905823641339');" onmouseout="out('-45874905823641339');" style=""> 228                 context.getPackageManager().resolveContentProvider(redirectAuthority, 0);                </span>
<span  style=""> 229                                                                                                          </span>
<span class="314259485526307626" onmouseenter="enter('314259485526307626');" onmouseout="out('314259485526307626');" style=""> 230         Log.d(TAG, &quot;Old launcher provider: &quot; + oldProvider);                                             </span>
<span class="-8592116164695986182" onmouseenter="enter('-8592116164695986182');" onmouseout="out('-8592116164695986182');" style=""> 231         mOldContentProviderExists = (providerInfo != null) &amp;&amp; (redirectProvider != null);                </span>
<span  style=""> 232                                                                                                          </span>
<span class="6861009572404401042" onmouseenter="enter('6861009572404401042');" onmouseout="out('6861009572404401042');" style=""> 233         if (mOldContentProviderExists) {                                                                 </span>
<span class="-1855952710226164095" onmouseenter="enter('-1855952710226164095');" onmouseout="out('-1855952710226164095');" style=""> 234             Log.d(TAG, &quot;Old launcher provider exists.&quot;);                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 235         } else {                                                                                         </span>
<span class="-884548298796331780" onmouseenter="enter('-884548298796331780');" onmouseout="out('-884548298796331780');" style=""> 236             Log.d(TAG, &quot;Old launcher provider does not exist.&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 239         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 240         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 241         mIconCache = iconCache;                                                                          </span>
<span  style=""> 242                                                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 243         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 244         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 245         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1186313261969242146" onmouseenter="enter('-1186313261969242146');" onmouseout="out('-1186313261969242146');" style=""> 246         mLauncherApps = LauncherAppsCompat.getInstance(context);                                         </span>
<span class="5028106411018262806" onmouseenter="enter('5028106411018262806');" onmouseout="out('5028106411018262806');" style=""> 247         mUserManager = UserManagerCompat.getInstance(context);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248     }                                                                                                    </span>
<span  style=""> 249                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 250     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 251      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 252     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 253         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254     }                                                                                                    </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 255     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 256         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 257             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 258             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 259         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 260             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262     }                                                                                                    </span>
<span  style=""> 263                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 264     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 265      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 266     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 267         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 268             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 269         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 270             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 271             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 275     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 276         return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277     }                                                                                                    </span>
<span  style=""> 278                                                                                                          </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 279     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,               </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 280                                  long screen) {                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 281         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 282         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 283         final int xCount = (int) grid.numColumns;                                                        </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 284         final int yCount = (int) grid.numRows;                                                           </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 285         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span  style=""> 286                                                                                                          </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 287         int cellX, cellY, spanX, spanY;                                                                  </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 288         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 289             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 290             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 291                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 292                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 293                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 294                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 295                     spanY = item.spanY;                                                                  </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 296                     for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 297                         for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {            </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 298                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303         }                                                                                                </span>
<span  style=""> 304                                                                                                          </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 305         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 307     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                    </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 308                                                         Intent launchIntent,                             </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 309                                                         int firstScreenIndex,                            </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 310                                                         ArrayList&lt;Long&gt; workspaceScreens) {              </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 311         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 312         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 313         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 314         boolean found = false;                                                                           </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 315         synchronized (app) {                                                                             </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 316             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 317                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 318                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 319                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 320                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 322             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span  style=""> 323                                                                                                          </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 324             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 325             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 326             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 327             int count = workspaceScreens.size();                                                         </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 328             for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                    </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 329                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 330                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                            </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 331                         workspaceScreens.get(screen))) {                                                 </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 332                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 333                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 337         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338     }                                                                                                    </span>
<span  style=""> 339                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 340 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-7586986915858549354" onmouseenter="enter('-7586986915858549354');" onmouseout="out('-7586986915858549354');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 341     public void setPackageState(final ArrayList&lt;PackageInstallInfo&gt; installInfo) {                       </span>
<span class="-7600698850277173095" onmouseenter="enter('-7600698850277173095');" onmouseout="out('-7600698850277173095');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 342         // Process the updated package state                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 343         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 344             public void run() {                                                                          </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 345                 Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 346                 if (callbacks != null) {                                                                 </span>
<span class="-2122958624687225435" onmouseenter="enter('-2122958624687225435');" onmouseout="out('-2122958624687225435');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 347                     callbacks.updatePackageState(installInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 348                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 349             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 350         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 351         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 352     }                                                                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 353                                                                                                          </span>
<span class="-4348975915921845586" onmouseenter="enter('-4348975915921845586');" onmouseout="out('-4348975915921845586');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 354     public void updatePackageBadge(final String packageName) {                                           </span>
<span class="7729714843616329773" onmouseenter="enter('7729714843616329773');" onmouseout="out('7729714843616329773');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 355         // Process the updated package badge                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 356         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 357             public void run() {                                                                          </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 358                 Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 359                 if (callbacks != null) {                                                                 </span>
<span class="-175082648182985609" onmouseenter="enter('-175082648182985609');" onmouseout="out('-175082648182985609');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 360                     callbacks.updatePackageBadge(packageName);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 361                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 362             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 363         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 364         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 365     }                                                                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 366                                                                                                          </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 367     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 368         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 369                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 370         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 371             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 372         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 373         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 374             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 375         }                                                                                                </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 376                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 377         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 378         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 379         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 380             ItemInfo a = iter.next();                                                                    </span>
<span class="788818030959001981" onmouseenter="enter('788818030959001981');" onmouseout="out('788818030959001981');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 381             if (LauncherModel.appWasPromise(ctx, a.getIntent(), a.user)) {                               </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 382                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 383             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 384         }                                                                                                </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 385                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 386         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 387         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 388             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 389                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 390                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 391                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 392                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 393                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 394                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 395                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 396                                     if (intent != null) {                                                </span>
<span class="7948974687398618411" onmouseenter="enter('7948974687398618411');" onmouseout="out('7948974687398618411');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 397                                         mIconCache.deletePreloadedIcon(intent.getComponent(),            </span>
<span class="1609339875512298297" onmouseenter="enter('1609339875512298297');" onmouseout="out('1609339875512298297');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 398                                                 info.user);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 399                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 400                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 401                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 402                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 403                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 404                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 405                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 406                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 407             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 408         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 409         runOnWorkerThread(r);                                                                            </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 410 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 411     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 412         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 413                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 414         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 415             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 416         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 417         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 418             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 419         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 420                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 421         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 422         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 423             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 424                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 425                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 426                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 427                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 428                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 429                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 430                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 431                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 432             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 433         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 434         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 435     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 436                                                                                                          </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 437     public void addAndBindAddedWorkspaceApps(final Context context,                                      </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 438             final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                   </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 439         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 440                                                                                                          </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 441         if (workspaceApps == null) {                                                                     </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 442             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 443         }                                                                                                </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 444         if (workspaceApps.isEmpty()) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 445             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 446         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 447         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 448         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 449             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 450                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 451                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 452                                                                                                          </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 453                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 454                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 455                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 456                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 457                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 458                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 459                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 460                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 461                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 462                                                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 463                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 464                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 465                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 466                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 467                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 468                         final Intent launchIntent = a.getIntent();                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 469                                                                                                          </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 470                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 471                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 472                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 473                         }                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 474                                                                                                          </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 475                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 476                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 477                         // Otherwise, we add them to the next pages.                                     </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 478                         int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                   </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 479                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,     </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 480                                 name, launchIntent, startSearchPageIndex, workspaceScreens);             </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 481                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 482                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 483                                                                                                          </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 484                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 485                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 486                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 487                             // the startSearchPageIndex.                                                 </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 488                             int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                   </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 489                                     workspaceScreens.size());                                            </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 490                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 491                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 492                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 493                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 494                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 495                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 496                             }                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 497                                                                                                          </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 498                             // Find the coordinate again                                                 </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 499                             coords = LauncherModel.findNextAvailableIconSpace(context,                   </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 500                                     name, launchIntent, startSearchPageIndex, workspaceScreens);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 501                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 502                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 503                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 504                         }                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 505                                                                                                          </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 506                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 507                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 508                             shortcutInfo = (ShortcutInfo) a;                                             </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 509                         } else if (a instanceof AppInfo) {                                               </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 510                             shortcutInfo = ((AppInfo) a).makeShortcut();                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 511                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 512                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 513                         }                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 514                                                                                                          </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 515                         // Add the shortcut to the db                                                    </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 516                         addItemToDatabase(context, shortcutInfo,                                         </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 517                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 518                                 coords.first, coords.second[0], coords.second[1], false);                </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 519                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 520                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 521                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 522                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 523                                                                                                          </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 524                 // Update the workspace screens                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 525 =======                                                                                                  </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 526     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="9200705866279837671" onmouseenter="enter('9200705866279837671');" onmouseout="out('9200705866279837671');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 527                                     final ArrayList&lt;AppInfo&gt; allAppsApps) {                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 528         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                     </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 529         addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                    </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 530 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531     }                                                                                                    </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style=""> 532     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="-6487660545798143403" onmouseenter="enter('-6487660545798143403');" onmouseout="out('-6487660545798143403');" style=""> 533                                 final Callbacks callbacks, final ArrayList&lt;AppInfo&gt; allAppsApps) {       </span>
<span class="-1944739770126231100" onmouseenter="enter('-1944739770126231100');" onmouseout="out('-1944739770126231100');" style=""> 534         if (workspaceApps == null || allAppsApps == null) {                                              </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 535             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536         }                                                                                                </span>
<span class="6140956863670038829" onmouseenter="enter('6140956863670038829');" onmouseout="out('6140956863670038829');" style=""> 537         if (workspaceApps.isEmpty() &amp;&amp; allAppsApps.isEmpty()) {                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 538             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 540         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 541         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 542             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 543                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 544                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 545                 final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                   </span>
<span  style=""> 546                                                                                                          </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 547                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 548                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 549                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 550                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 551                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 552                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 553                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 554                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555                 }                                                                                        </span>
<span  style=""> 556                                                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 557                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 558                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 559                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 560                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 561                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 562                         final Intent launchIntent = a.getIntent();                                       </span>
<span  style=""> 563                                                                                                          </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 564                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 565                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style=""> 566                             // Only InstallShortcutReceiver sends us shortcutInfos, ignore them          </span>
<span class="-8314395278706468200" onmouseenter="enter('-8314395278706468200');" onmouseout="out('-8314395278706468200');" style=""> 567                             if (a instanceof AppInfo &amp;&amp;                                                  </span>
<span class="-4816286524033800367" onmouseenter="enter('-4816286524033800367');" onmouseout="out('-4816286524033800367');" style=""> 568                                     LauncherModel.appWasPromise(context, launchIntent, a.user)) {        </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style=""> 569                                 restoredAppsFinal.add((AppInfo) a);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570                             }                                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 571                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572                         }                                                                                </span>
<span  style=""> 573                                                                                                          </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 574                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 575                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 576                         // Otherwise, we add them to the next pages.                                     </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 577                         int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                   </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 578                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,     </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 579                                 name, launchIntent, startSearchPageIndex, workspaceScreens);             </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 580                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 581                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span  style=""> 582                                                                                                          </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 583                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 584                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 585                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 586                             // the startSearchPageIndex.                                                 </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 587                             int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                   </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 588                                     workspaceScreens.size());                                            </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 589                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 590                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 591                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 592                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 593                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 594                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595                             }                                                                            </span>
<span  style=""> 596                                                                                                          </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 597                             // Find the coordinate again                                                 </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 598                             coords = LauncherModel.findNextAvailableIconSpace(context,                   </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 599                                     name, launchIntent, startSearchPageIndex, workspaceScreens);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 601                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 602                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603                         }                                                                                </span>
<span  style=""> 604                                                                                                          </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 605                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 606                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 607                             shortcutInfo = (ShortcutInfo) a;                                             </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 608                         } else if (a instanceof AppInfo) {                                               </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 609                             shortcutInfo = ((AppInfo) a).makeShortcut();                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 610                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 611                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612                         }                                                                                </span>
<span  style=""> 613                                                                                                          </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 614                         // Add the shortcut to the db                                                    </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 615                         addItemToDatabase(context, shortcutInfo,                                         </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 616                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 617                                 coords.first, coords.second[0], coords.second[1], false);                </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 618                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 619                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621                 }                                                                                        </span>
<span  style=""> 622                                                                                                          </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 623                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 624                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span  style=""> 625                                                                                                          </span>
<span class="6328421283494006334" onmouseenter="enter('6328421283494006334');" onmouseout="out('6328421283494006334');" style=""> 626                 if (!addedShortcutsFinal.isEmpty() || !allAppsApps.isEmpty()) {                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 627                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 628                         public void run() {                                                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 629                             Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                 </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 630                             if (callbacks == cb &amp;&amp; cb != null) {                                         </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 631                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 632                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 633                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 634                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 634                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 635                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 636                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 637                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 638                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 639                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 640                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643                                 }                                                                        </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 644                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                      </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 645 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 646                                         addNotAnimated, addAnimated, null);                              </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 647                                 if (!restoredAppsFinal.isEmpty()) {                                      </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 648                                     callbacks.bindAppsUpdated(restoredAppsFinal);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 649                                 }                                                                        </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 650 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 651                                                                                                          </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 652                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 653                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 654                                                                                                          </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 655                 if (!addedShortcutsFinal.isEmpty()) {                                                    </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 656                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 657                         public void run() {                                                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 658                             Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                 </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 659                             if (callbacks == cb &amp;&amp; cb != null) {                                         </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 660                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 661                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 662                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 663                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 663                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 664                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 665                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 666                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 667                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 668                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 669                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 670                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 671                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 672                                 }                                                                        </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 673                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                      </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 674                                         addNotAnimated, addAnimated, null);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 675                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 676                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 677                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 678                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 679             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 680         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 681         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 682     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 683                                                                                                          </span>
<span class="6011793905538310529" onmouseenter="enter('6011793905538310529');" onmouseout="out('6011793905538310529');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 684     public Bitmap getFallbackIcon() {                                                                    </span>
<span class="-671044890656554786" onmouseenter="enter('-671044890656554786');" onmouseout="out('-671044890656554786');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 685         if (mDefaultIcon == null) {                                                                      </span>
<span class="6379788101570603758" onmouseenter="enter('6379788101570603758');" onmouseout="out('6379788101570603758');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 686             final Context context = LauncherAppState.getInstance().getContext();                         </span>
<span class="-6730081374242205673" onmouseenter="enter('-6730081374242205673');" onmouseout="out('-6730081374242205673');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 687             mDefaultIcon = Utilities.createIconBitmap(                                                   </span>
<span class="-5707305257020956234" onmouseenter="enter('-5707305257020956234');" onmouseout="out('-5707305257020956234');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 688                     mIconCache.getFullResDefaultActivityIcon(), context);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 689         }                                                                                                </span>
<span class="1334413422936499318" onmouseenter="enter('1334413422936499318');" onmouseout="out('1334413422936499318');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 690         return Bitmap.createBitmap(mDefaultIcon);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 691     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 692                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 693     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 694         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 695             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +     </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 696                     &quot;main thread&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 697         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 698                                                                                                          </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 699         // Clear any deferred bind runnables                                                             </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 700         mDeferredBindRunnables.clear();                                                                  </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 701         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 702         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 703         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 704         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 705     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 706                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 707     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 708     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 709         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 710         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 711         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 712         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 713         synchronized (sBgLock) {                                                                         </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 714             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 715             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 716         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 717         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 718                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 719                 public void run() {                                                                      </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 720                    for (ItemInfo item : tmpWorkspaceItems) {                                             </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 721                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 722                    }                                                                                     </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 723                    for (ItemInfo item : tmpAppWidgets) {                                                 </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 724                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 725                    }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 726                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 727             };                                                                                           </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 728         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 729     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 730                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 731     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 732      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 733      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 734      */                                                                                                  </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 735     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                  </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 736             long screenId, int cellX, int cellY) {                                                       </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 737         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 738             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 739             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 740         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 741             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 742             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 743         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 744     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 745                                                                                                          </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 746     static void checkItemInfoLocked(                                                                     </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 747             final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                    </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 748         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 749         if (modelItem != null &amp;&amp; item != modelItem) {                                                    </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 750             // check all the data is consistent                                                          </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 751             if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                     </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 752                 ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                   </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 753                 ShortcutInfo shortcut = (ShortcutInfo) item;                                             </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 754                 if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                  </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 755                         modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                            </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 756                         modelShortcut.id == shortcut.id &amp;&amp;                                               </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 757                         modelShortcut.itemType == shortcut.itemType &amp;&amp;                                   </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 758                         modelShortcut.container == shortcut.container &amp;&amp;                                 </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 759                         modelShortcut.screenId == shortcut.screenId &amp;&amp;                                   </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 760                         modelShortcut.cellX == shortcut.cellX &amp;&amp;                                         </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 761                         modelShortcut.cellY == shortcut.cellY &amp;&amp;                                         </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 762                         modelShortcut.spanX == shortcut.spanX &amp;&amp;                                         </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 763                         modelShortcut.spanY == shortcut.spanY &amp;&amp;                                         </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 764                         ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                  </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 765                         (modelShortcut.dropPos != null &amp;&amp;                                                </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 766                                 shortcut.dropPos != null &amp;&amp;                                              </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 767                                 modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                       </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 768                         modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                             </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 769                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 770                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 771                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 772             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 773                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 774 =======                                                                                                  </span>
<span class="-748486497380548647" onmouseenter="enter('-748486497380548647');" onmouseout="out('-748486497380548647');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 775                                         addNotAnimated, addAnimated, allAppsApps);                       </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 776 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 779                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 782         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 783         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784     }                                                                                                    </span>
<span  style=""> 785                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 786     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 787         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 788             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +     </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 789                     &quot;main thread&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790         }                                                                                                </span>
<span  style=""> 791                                                                                                          </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 792         // Clear any deferred bind runnables                                                             </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style=""> 793         synchronized (mDeferredBindRunnables) {                                                          </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 794             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795         }                                                                                                </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 796         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 797         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 798         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 799         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800     }                                                                                                    </span>
<span  style=""> 801                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 802     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 803     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 804         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 805         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 806         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 807         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 808         synchronized (sBgLock) {                                                                         </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 809             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 810             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 812         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 813                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 814                 public void run() {                                                                      </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 815                    for (ItemInfo item : tmpWorkspaceItems) {                                             </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 816                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817                    }                                                                                     </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 818                    for (ItemInfo item : tmpAppWidgets) {                                                 </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 819                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820                    }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 822             };                                                                                           </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 823         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824     }                                                                                                    </span>
<span  style=""> 825                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 826     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 827      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 828      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 829      */                                                                                                  </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 830     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                  </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 831             long screenId, int cellX, int cellY) {                                                       </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 832         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 833             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 834             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 835         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 836             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 837             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839     }                                                                                                    </span>
<span  style=""> 840                                                                                                          </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 841     static void checkItemInfoLocked(                                                                     </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 842             final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                    </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 843         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 844         if (modelItem != null &amp;&amp; item != modelItem) {                                                    </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 845             // check all the data is consistent                                                          </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 846             if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                     </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 847                 ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                   </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 848                 ShortcutInfo shortcut = (ShortcutInfo) item;                                             </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 849                 if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                  </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 850                         modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                            </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 851                         modelShortcut.id == shortcut.id &amp;&amp;                                               </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 852                         modelShortcut.itemType == shortcut.itemType &amp;&amp;                                   </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 853                         modelShortcut.container == shortcut.container &amp;&amp;                                 </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 854                         modelShortcut.screenId == shortcut.screenId &amp;&amp;                                   </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 855                         modelShortcut.cellX == shortcut.cellX &amp;&amp;                                         </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 856                         modelShortcut.cellY == shortcut.cellY &amp;&amp;                                         </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 857                         modelShortcut.spanX == shortcut.spanX &amp;&amp;                                         </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 858                         modelShortcut.spanY == shortcut.spanY &amp;&amp;                                         </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 859                         ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                  </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 860                         (modelShortcut.dropPos != null &amp;&amp;                                                </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 861                                 shortcut.dropPos != null &amp;&amp;                                              </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 862                                 modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                       </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 863                         modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                             </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 864                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 865                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867             }                                                                                            </span>
<span  style=""> 868                                                                                                          </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 869             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 870             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 871             // modelItem == item or the equality check above                                             </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 872             String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                        </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 873                     &quot;modelItem: &quot; +                                                                      </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 874                     ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                              </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 875                     &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                    </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 876             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 877             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 878                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 880             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 882     }                                                                                                    </span>
<span  style=""> 883                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 884     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 885         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 886         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 887         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 888             public void run() {                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 889                 synchronized (sBgLock) {                                                                 </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 890                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 893         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 894         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895     }                                                                                                    </span>
<span  style=""> 896                                                                                                          </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 897     static void updateItemInDatabaseHelper(Context context, final ContentValues values,                  </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 898             final ItemInfo item, final String callingFunction) {                                         </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 899         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 900         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 901         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 902                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 903         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 904         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 905             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 906                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 907                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 909         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 910         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911     }                                                                                                    </span>
<span  style=""> 912                                                                                                          </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 913     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,  </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 914             final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                             </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 915         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 916                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 917         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 918         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 919             public void run() {                                                                          </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 920                 ArrayList&lt;ContentProviderOperation&gt; ops =                                                </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 921                         new ArrayList&lt;ContentProviderOperation&gt;();                                       </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 922                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 923                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 924                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 925                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 926                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 927                     ContentValues values = valuesList.get(i);                                            </span>
<span  style=""> 928                                                                                                          </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 929                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 930                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span  style=""> 931                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 933                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 934                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 935                 } catch (Exception e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 936                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 938             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 939         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 940         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941     }                                                                                                    </span>
<span  style=""> 942                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 943     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 944         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 945         synchronized (sBgLock) {                                                                         </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 946             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span  style=""> 947                                                                                                          </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 948             if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 949                     item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                    </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 950                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 951                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 952                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 953                     // the list of Folders.                                                              </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 954                     String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                         </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 955                             item.container + &quot;, not in the list of folders&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 956                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958             }                                                                                            </span>
<span  style=""> 959                                                                                                          </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 960             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 961             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 962             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 963             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 964             if (modelItem != null &amp;&amp;                                                                     </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 965                     (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||              </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 966                      modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {             </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 967                 switch (modelItem.itemType) {                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 968                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                               </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 969                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 970                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 971                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 972                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 974                         break;                                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 975                     default:                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 976                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 978             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 979                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982     }                                                                                                    </span>
<span  style=""> 983                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 984     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 985         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 986         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 987                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 988                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 989                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 990                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 993             };                                                                                           </span>
<span  style=""> 994                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 995         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 996             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 997             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 998                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 999                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1001             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style="">1002             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style="">1003             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1004                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style="">1005                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style="">1006                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style="">1007                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1008                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011     }                                                                                                    </span>
<span  style="">1012                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1013     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style="">1014      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1015      */                                                                                                  </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style="">1016     static void moveItemInDatabase(Context context, final ItemInfo item, final long container,           </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style="">1017             final long screenId, final int cellX, final int cellY) {                                     </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1018         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style="">1019         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style="">1020         item.cellY = cellY;                                                                              </span>
<span  style="">1021                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1022         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1023         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style="">1024         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1025                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style="">1026             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1027         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style="">1028             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029         }                                                                                                </span>
<span  style="">1030                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1031         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style="">1032         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style="">1033         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style="">1034         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style="">1035         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style="">1036                                                                                                          </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style="">1037         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038     }                                                                                                    </span>
<span  style="">1039                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1040     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style="">1041      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style="">1042      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1043      */                                                                                                  </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style="">1044     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                    </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style="">1045             final long container, final int screen) {                                                    </span>
<span  style="">1046                                                                                                          </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style="">1047         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style="">1048         int count = items.size();                                                                        </span>
<span  style="">1049                                                                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1050         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style="">1051             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1052             item.container = container;                                                                  </span>
<span  style="">1053                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1054             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1055             // in the hotseat                                                                            </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style="">1056             if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                             </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1057                     container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                         </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style="">1058                 item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,          </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style="">1059                         item.cellY);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1060             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style="">1061                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062             }                                                                                            </span>
<span  style="">1063                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1064             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style="">1065             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style="">1066             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style="">1067             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style="">1068             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span  style="">1069                                                                                                          </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style="">1070             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1071         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style="">1072         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073     }                                                                                                    </span>
<span  style="">1074                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1075     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style="">1076      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1077      */                                                                                                  </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style="">1078     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,         </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style="">1079             final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {   </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1080         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style="">1081         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style="">1082         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style="">1083         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style="">1084         item.spanY = spanY;                                                                              </span>
<span  style="">1085                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1086         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1087         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style="">1088         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1089                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style="">1090             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1091         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style="">1092             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093         }                                                                                                </span>
<span  style="">1094                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1095         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style="">1096         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style="">1097         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style="">1098         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style="">1099         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style="">1100         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style="">1101         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style="">1102                                                                                                          </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style="">1103         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104     }                                                                                                    </span>
<span  style="">1105                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1106     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style="">1107      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1108      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style="">1109     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1110         final ContentValues values = new ContentValues();                                                </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="">1111         item.onAddToDatabase(context, values);                                                           </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style="">1112         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style="">1113         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114     }                                                                                                    </span>
<span  style="">1115                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1116     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style="">1117      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style="">1118      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1119      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style="">1120     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1121         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4175900686448469518" onmouseenter="enter('-4175900686448469518');" onmouseout="out('-4175900686448469518');" style="">1122         final Intent intentWithPkg, intentWithoutPkg;                                                    </span>
<span  style="">1123                                                                                                          </span>
<span class="-1192314096420314309" onmouseenter="enter('-1192314096420314309');" onmouseout="out('-1192314096420314309');" style="">1124         if (intent.getComponent() != null) {                                                             </span>
<span class="5013412415263932655" onmouseenter="enter('5013412415263932655');" onmouseout="out('5013412415263932655');" style="">1125             // If component is not null, an intent with null package will produce                        </span>
<span class="-2056261929714512728" onmouseenter="enter('-2056261929714512728');" onmouseout="out('-2056261929714512728');" style="">1126             // the same result and should also be a match.                                               </span>
<span class="8293829844581049791" onmouseenter="enter('8293829844581049791');" onmouseout="out('8293829844581049791');" style="">1127             if (intent.getPackage() != null) {                                                           </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style="">1128                 intentWithPkg = intent;                                                                  </span>
<span class="302721143002808724" onmouseenter="enter('302721143002808724');" onmouseout="out('302721143002808724');" style="">1129                 intentWithoutPkg = new Intent(intent).setPackage(null);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1130             } else {                                                                                     </span>
<span class="411509146924686636" onmouseenter="enter('411509146924686636');" onmouseout="out('411509146924686636');" style="">1131                 intentWithPkg = new Intent(intent).setPackage(                                           </span>
<span class="-8194702512537292868" onmouseenter="enter('-8194702512537292868');" onmouseout="out('-8194702512537292868');" style="">1132                         intent.getComponent().getPackageName());                                         </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style="">1133                 intentWithoutPkg = intent;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1135         } else {                                                                                         </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style="">1136             intentWithPkg = intent;                                                                      </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style="">1137             intentWithoutPkg = intent;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138         }                                                                                                </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style="">1139         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                      </span>
<span class="-6373969991306358457" onmouseenter="enter('-6373969991306358457');" onmouseout="out('-6373969991306358457');" style="">1140             new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and (intent=? or intent=?)&quot;,                    </span>
<span class="-338282616399686930" onmouseenter="enter('-338282616399686930');" onmouseout="out('-338282616399686930');" style="">1141             new String[] { title, intentWithPkg.toUri(0), intentWithoutPkg.toUri(0) }, null);            </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style="">1142         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1143         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style="">1144             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1145         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1146             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">1148         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149     }                                                                                                    </span>
<span  style="">1150                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1151     /**                                                                                                  </span>
<span class="2522962036775885267" onmouseenter="enter('2522962036775885267');" onmouseout="out('2522962036775885267');" style="">1152      * Returns true if the promise shortcuts with the same package name exists on the workspace.         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1153      */                                                                                                  </span>
<span class="-6588164927851751704" onmouseenter="enter('-6588164927851751704');" onmouseout="out('-6588164927851751704');" style="">1154     static boolean appWasPromise(Context context, Intent intent, UserHandleCompat user) {                </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style="">1155         final ComponentName component = intent.getComponent();                                           </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style="">1156         if (component == null) {                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1157             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158         }                                                                                                </span>
<span class="-5254167698548486612" onmouseenter="enter('-5254167698548486612');" onmouseout="out('-5254167698548486612');" style="">1159         return !getItemsByPackageName(component.getPackageName(), user).isEmpty();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160     }                                                                                                    </span>
<span  style="">1161                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1162     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style="">1163      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style="">1164      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1165      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style="">1166     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="">1167         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1168         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style="">1169         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                       </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style="">1170                 LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,              </span>
<span class="-5597662442381403391" onmouseenter="enter('-5597662442381403391');" onmouseout="out('-5597662442381403391');" style="">1171                 LauncherSettings.Favorites.SCREEN,                                                       </span>
<span class="-2919624041508816442" onmouseenter="enter('-2919624041508816442');" onmouseout="out('-2919624041508816442');" style="">1172                 LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,                      </span>
<span class="-6977762317278061139" onmouseenter="enter('-6977762317278061139');" onmouseout="out('-6977762317278061139');" style="">1173                 LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY,                      </span>
<span class="-7245839497619612656" onmouseenter="enter('-7245839497619612656');" onmouseout="out('-7245839497619612656');" style="">1174                 LauncherSettings.Favorites.PROFILE_ID }, null, null, null);                              </span>
<span  style="">1175                                                                                                          </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style="">1176         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style="">1177         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1178         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1179         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1180         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style="">1181         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style="">1182         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style="">1183         final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);       </span>
<span class="4378196374401845990" onmouseenter="enter('4378196374401845990');" onmouseout="out('4378196374401845990');" style="">1184         UserManagerCompat userManager = UserManagerCompat.getInstance(context);                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1185         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">1186             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style="">1187                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style="">1188                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style="">1189                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style="">1190                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style="">1191                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style="">1192                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style="">1193                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style="">1194                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="">1195                 long serialNumber = c.getInt(profileIdIndex);                                            </span>
<span class="8590899978146640866" onmouseenter="enter('8590899978146640866');" onmouseout="out('8590899978146640866');" style="">1196                 item.user = userManager.getUserForSerialNumber(serialNumber);                            </span>
<span class="-2267817568611630151" onmouseenter="enter('-2267817568611630151');" onmouseout="out('-2267817568611630151');" style="">1197                 // Skip if user has been deleted.                                                        </span>
<span class="-8057177251913525905" onmouseenter="enter('-8057177251913525905');" onmouseout="out('-8057177251913525905');" style="">1198                 if (item.user != null) {                                                                 </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="">1199                     items.add(item);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1200                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1202         } catch (Exception e) {                                                                          </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style="">1203             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1204         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1205             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206         }                                                                                                </span>
<span  style="">1207                                                                                                          </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style="">1208         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209     }                                                                                                    </span>
<span  style="">1210                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1211     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style="">1212      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1213      */                                                                                                  </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style="">1214     FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {            </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1215         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style="">1216         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style="">1217                 &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                  </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style="">1218                 new String[] { String.valueOf(id),                                                       </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style="">1219                         String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);             </span>
<span  style="">1220                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1221         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style="">1222             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style="">1223                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style="">1224                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style="">1225                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1226                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1227                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1228                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span  style="">1229                                                                                                          </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style="">1230                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style="">1231                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1232                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style="">1233                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1234                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235                 }                                                                                        </span>
<span  style="">1236                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1237                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1238                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style="">1239                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1240                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1241                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1242                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span  style="">1243                                                                                                          </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">1244                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1246         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1247             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1248         }                                                                                                </span>
<span  style="">1249                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1250         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1251     }                                                                                                    </span>
<span  style="">1252                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1253     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style="">1254      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style="">1255      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1256      */                                                                                                  </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style="">1257     static void addItemToDatabase(Context context, final ItemInfo item, final long container,            </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style="">1258             final long screenId, final int cellX, final int cellY, final boolean notify) {               </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1259         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style="">1260         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style="">1261         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1262         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1263         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style="">1264         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1265                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style="">1266             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1267         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style="">1268             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1269         }                                                                                                </span>
<span  style="">1270                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1271         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1272         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="">1273         item.onAddToDatabase(context, values);                                                           </span>
<span  style="">1274                                                                                                          </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style="">1275         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style="">1276         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style="">1277         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span  style="">1278                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style="">1279         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1280         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1281             public void run() {                                                                          </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style="">1282                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                              </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style="">1283                         LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                 </span>
<span  style="">1284                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1285                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1286                 synchronized (sBgLock) {                                                                 </span>
<span class="-4593486021211754382" onmouseenter="enter('-4593486021211754382');" onmouseout="out('-4593486021211754382');" style="">1287                     checkItemInfoLocked(item.id, item, stackTrace);                                      </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style="">1288                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1289                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1290                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style="">1291                             sBgFolders.put(item.id, (FolderInfo) item);                                  </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">1292                             // Fall through                                                              </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1293                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1294                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style="">1295                             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||        </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style="">1296                                     item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {    </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style="">1297                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1298                             } else {                                                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style="">1299                                 if (!sBgFolders.containsKey(item.container)) {                           </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style="">1300                                     // Adding an item to a folder that doesn&#x27;t exist.                    </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style="">1301                                     String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +         </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style="">1302                                             &quot; doesn&#x27;t exist&quot;;                                            </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1303                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1306                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1307                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style="">1308                             sBgAppWidgets.add((LauncherAppWidgetInfo) item);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1309                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1310                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1313         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1314         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315     }                                                                                                    </span>
<span  style="">1316                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1317     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style="">1318      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1319      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1320     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1321             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1322         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1323                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324     }                                                                                                    </span>
<span  style="">1325                                                                                                          </span>
<span class="-2977858468662335030" onmouseenter="enter('-2977858468662335030');" onmouseout="out('-2977858468662335030');" style="">1326     private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(                                            </span>
<span class="-4648411385517347510" onmouseenter="enter('-4648411385517347510');" onmouseout="out('-4648411385517347510');" style="">1327             final String pn, final UserHandleCompat user) {                                              </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">1328         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1329             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">1330             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="-3698999064980760147" onmouseenter="enter('-3698999064980760147');" onmouseout="out('-3698999064980760147');" style="">1331                 return cn.getPackageName().equals(pn) &amp;&amp; info.user.equals(user);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1333         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">1334         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335     }                                                                                                    </span>
<span  style="">1336                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1337     /**                                                                                                  </span>
<span class="2342361889363691922" onmouseenter="enter('2342361889363691922');" onmouseout="out('2342361889363691922');" style="">1338      * Removes all the items from the database corresponding to the specified package.                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1339      */                                                                                                  </span>
<span class="-4223841609537991203" onmouseenter="enter('-4223841609537991203');" onmouseout="out('-4223841609537991203');" style="">1340     static void deletePackageFromDatabase(Context context, final String pn,                              </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">1341             final UserHandleCompat user) {                                                               </span>
<span class="-3124051924336649718" onmouseenter="enter('-3124051924336649718');" onmouseout="out('-3124051924336649718');" style="">1342         deleteItemsFromDatabase(context, getItemsByPackageName(pn, user));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343     }                                                                                                    </span>
<span  style="">1344                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1345     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1346      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1347      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1348      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1349      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1350     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="">1351         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="">1352         items.add(item);                                                                                 </span>
<span class="-1343420386438024026" onmouseenter="enter('-1343420386438024026');" onmouseout="out('-1343420386438024026');" style="">1353         deleteItemsFromDatabase(context, items);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354     }                                                                                                    </span>
<span  style="">1355                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1356     /**                                                                                                  </span>
<span class="6785840277050217586" onmouseenter="enter('6785840277050217586');" onmouseout="out('6785840277050217586');" style="">1357      * Removes the specified items from the database                                                     </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1358      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1359      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1360      */                                                                                                  </span>
<span class="8840034600723804424" onmouseenter="enter('8840034600723804424');" onmouseout="out('8840034600723804424');" style="">1361     static void deleteItemsFromDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items) {              </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1362         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1363                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1364         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1365             public void run() {                                                                          </span>
<span class="6119320427209693879" onmouseenter="enter('6119320427209693879');" onmouseout="out('6119320427209693879');" style="">1366                 for (ItemInfo item : items) {                                                            </span>
<span class="-8969008621964178653" onmouseenter="enter('-8969008621964178653');" onmouseout="out('-8969008621964178653');" style="">1367                     final Uri uri = LauncherSettings.Favorites.getContentUri(item.id, false);            </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="">1368                     cr.delete(uri, null, null);                                                          </span>
<span  style="">1369                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1370                     // Lock on mBgLock *after* the db operation                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1371                     synchronized (sBgLock) {                                                             </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1372                         switch (item.itemType) {                                                         </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1373                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1374                                 sBgFolders.remove(item.id);                                              </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="">1375                                 for (ItemInfo info: sBgItemsIdMap.values()) {                            </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1376                                     if (info.container == item.id) {                                     </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1377                                         // We are deleting a folder which still contains items that      </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1378                                         // think they are contained by that folder.                      </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="">1379                                         String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +   </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="">1380                                                 &quot;contains items (&quot; + info + &quot;)&quot;;                         </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1381                                         Log.e(TAG, msg);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383                                 }                                                                        </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1384                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1385                                 break;                                                                   </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1386                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1387                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1388                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1389                                 break;                                                                   </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1390                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="">1391                                 sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1392                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1393                         }                                                                                </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1394                         sBgItemsIdMap.remove(item.id);                                                   </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1395                         sBgDbIconCache.remove(item);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1399         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1400         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401     }                                                                                                    </span>
<span  style="">1402                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1403     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1404      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1405      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1406      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1407     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1408         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1409         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1410         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span  style="">1411                                                                                                          </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1412         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1413         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1414         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span  style="">1415                                                                                                          </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1416         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1417         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1418         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1419             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1420             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1421                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423         }                                                                                                </span>
<span  style="">1424                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1425         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1426             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1427             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1428                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1429                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1430                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1431                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1432                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1433                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1434                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1435                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1436                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1437                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438                 }                                                                                        </span>
<span  style="">1439                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1440                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1441                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1442                 } catch (Exception ex) {                                                                 </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1443                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444                 }                                                                                        </span>
<span  style="">1445                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1446                 synchronized (sBgLock) {                                                                 </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1447                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1448                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1451         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1452         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453     }                                                                                                    </span>
<span  style="">1454                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1455     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1456      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1457      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1458     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1459         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1460                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1461         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1462             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1463                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1464                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1465                 synchronized (sBgLock) {                                                                 </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1466                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1467                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1468                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1469                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                 }                                                                                        </span>
<span  style="">1471                                                                                                          </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1472                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                        </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1473                         LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                     </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1474                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1475                 synchronized (sBgLock) {                                                                 </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1476                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1477                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1478                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1481             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1482         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1483         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484     }                                                                                                    </span>
<span  style="">1485                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1486     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1487      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1488      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1489     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1490         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1491             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493     }                                                                                                    </span>
<span  style="">1494                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1495     @Override                                                                                            </span>
<span class="-2337875492294712218" onmouseenter="enter('-2337875492294712218');" onmouseout="out('-2337875492294712218');" style="">1496     public void onPackageChanged(String packageName, UserHandleCompat user) {                            </span>
<span class="4778571821882595512" onmouseenter="enter('4778571821882595512');" onmouseout="out('4778571821882595512');" style="">1497         int op = PackageUpdatedTask.OP_UPDATE;                                                           </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1498         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1499                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500     }                                                                                                    </span>
<span  style="">1501                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1502     @Override                                                                                            </span>
<span class="-927554855118637848" onmouseenter="enter('-927554855118637848');" onmouseout="out('-927554855118637848');" style="">1503     public void onPackageRemoved(String packageName, UserHandleCompat user) {                            </span>
<span class="-8281859875413044704" onmouseenter="enter('-8281859875413044704');" onmouseout="out('-8281859875413044704');" style="">1504         int op = PackageUpdatedTask.OP_REMOVE;                                                           </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1505         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1506                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507     }                                                                                                    </span>
<span  style="">1508                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1509     @Override                                                                                            </span>
<span class="105632639707841197" onmouseenter="enter('105632639707841197');" onmouseout="out('105632639707841197');" style="">1510     public void onPackageAdded(String packageName, UserHandleCompat user) {                              </span>
<span class="4828685442078193889" onmouseenter="enter('4828685442078193889');" onmouseout="out('4828685442078193889');" style="">1511         int op = PackageUpdatedTask.OP_ADD;                                                              </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1512         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1513                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1514     }                                                                                                    </span>
<span  style="">1515                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1516     @Override                                                                                            </span>
<span class="-5272203289606218807" onmouseenter="enter('-5272203289606218807');" onmouseout="out('-5272203289606218807');" style="">1517     public void onPackagesAvailable(String[] packageNames, UserHandleCompat user,                        </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="">1518             boolean replacing) {                                                                         </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1519         if (!replacing) {                                                                                </span>
<span class="5127769788151278220" onmouseenter="enter('5127769788151278220');" onmouseout="out('5127769788151278220');" style="">1520             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packageNames,        </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1521                     user));                                                                              </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1522             if (mAppsCanBeOnRemoveableStorage) {                                                         </span>
<span class="-2089495423111974436" onmouseenter="enter('-2089495423111974436');" onmouseout="out('-2089495423111974436');" style="">1523                 // Only rebind if we support removable storage. It catches the                           </span>
<span class="3966636659656955596" onmouseenter="enter('3966636659656955596');" onmouseout="out('3966636659656955596');" style="">1524                 // case where                                                                            </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1525                 // apps on the external sd card need to be reloaded                                      </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1526                 startLoaderFromBackground();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1528         } else {                                                                                         </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1529             // If we are replacing then just update the packages in the list                             </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1530             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                   </span>
<span class="-8173810846920498048" onmouseenter="enter('-8173810846920498048');" onmouseout="out('-8173810846920498048');" style="">1531                     packageNames, user));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533     }                                                                                                    </span>
<span  style="">1534                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1535     @Override                                                                                            </span>
<span class="-3988876954819926239" onmouseenter="enter('-3988876954819926239');" onmouseout="out('-3988876954819926239');" style="">1536     public void onPackagesUnavailable(String[] packageNames, UserHandleCompat user,                      </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="">1537             boolean replacing) {                                                                         </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1538         if (!replacing) {                                                                                </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1539             enqueuePackageUpdated(new PackageUpdatedTask(                                                </span>
<span class="8606082806154374174" onmouseenter="enter('8606082806154374174');" onmouseout="out('8606082806154374174');" style="">1540                     PackageUpdatedTask.OP_UNAVAILABLE, packageNames,                                     </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1541                     user));                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542         }                                                                                                </span>
<span  style="">1543                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544     }                                                                                                    </span>
<span  style="">1545                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1546     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1547      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1548      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1549      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1550     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1551     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-5855592430187821970" onmouseenter="enter('-5855592430187821970');" onmouseout="out('-5855592430187821970');" style="">1552         if (DEBUG_RECEIVER) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                    </span>
<span  style="">1553                                                                                                          </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1554         final String action = intent.getAction();                                                        </span>
<span class="2827193781436621695" onmouseenter="enter('2827193781436621695');" onmouseout="out('2827193781436621695');" style="">1555         if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                               </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1556             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1557             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1558         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1559              // Check if configuration change was an mcc/mnc change which would affect app resources     </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1560              // and we would need to clear out the labels in all apps/workspace. Same handling as        </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1561              // above for ACTION_LOCALE_CHANGED                                                          </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1562              Configuration currentConfig = context.getResources().getConfiguration();                    </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1563              if (mPreviousConfigMcc != currentConfig.mcc) {                                              </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1564                    Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                  </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1565                        + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1566                    forceReload();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567              }                                                                                           </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1568              // Update previousConfig                                                                    </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1569              mPreviousConfigMcc = currentConfig.mcc;                                                     </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1570         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                 </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1571                    SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                     </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1572             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1573                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1574                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1575                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579     }                                                                                                    </span>
<span  style="">1580                                                                                                          </span>
<span class="-17594942140375151" onmouseenter="enter('-17594942140375151');" onmouseout="out('-17594942140375151');" style="">1581     void forceReload() {                                                                                 </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1582         resetLoadedState(true, true);                                                                    </span>
<span  style="">1583                                                                                                          </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1584         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1585         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1586         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1587         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588     }                                                                                                    </span>
<span  style="">1589                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1590     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1591         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1592             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1593             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1594             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1595             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1596             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598     }                                                                                                    </span>
<span  style="">1599                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1600     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1601      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1602      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1603      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1604      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1605      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1606     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1607         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1608         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1609             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1610             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1611                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1612                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1613                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1614                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1617         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1618             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620     }                                                                                                    </span>
<span  style="">1621                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1622     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1623     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1624     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1625         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1626         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1627         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1628             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1629                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1630             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1631             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1632         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1633         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1634     }                                                                                                    </span>
<span  style="">1635                                                                                                          </span>
<span class="-650602055294598310" onmouseenter="enter('-650602055294598310');" onmouseout="out('-650602055294598310');" style="">1636     public boolean isCurrentCallbacks(Callbacks callbacks) {                                             </span>
<span class="-2678194210930296625" onmouseenter="enter('-2678194210930296625');" onmouseout="out('-2678194210930296625');" style="">1637         return (mCallbacks != null &amp;&amp; mCallbacks.get() == callbacks);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1638     }                                                                                                    </span>
<span  style="">1639                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1640     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1641         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1642     }                                                                                                    </span>
<span  style="">1643                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1644     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1645         synchronized (mLock) {                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1646             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1647                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1648             }                                                                                            </span>
<span  style="">1649                                                                                                          </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1650             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1651             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">1652             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1653                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1654             }                                                                                            </span>
<span  style="">1655                                                                                                          </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1656             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1657             if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                        </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1658                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1659                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1660                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1661                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1662                 if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1663                         &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                         </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1664                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1665                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1666                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1667                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1670         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671     }                                                                                                    </span>
<span  style="">1672                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1673     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1674         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1675         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="3864855355327062414" onmouseenter="enter('3864855355327062414');" onmouseout="out('3864855355327062414');" style="">1676             Runnable[] deferredBindRunnables = null;                                                     </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">1677             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="-7323371485266753329" onmouseenter="enter('-7323371485266753329');" onmouseout="out('-7323371485266753329');" style="">1678                 deferredBindRunnables = mDeferredBindRunnables.toArray(                                  </span>
<span class="-5228620787203084012" onmouseenter="enter('-5228620787203084012');" onmouseout="out('-5228620787203084012');" style="">1679                         new Runnable[mDeferredBindRunnables.size()]);                                    </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1680                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1681             }                                                                                            </span>
<span class="-4818994596267375040" onmouseenter="enter('-4818994596267375040');" onmouseout="out('-4818994596267375040');" style="">1682             for (final Runnable r : deferredBindRunnables) {                                             </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1683                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1684             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1685         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686     }                                                                                                    </span>
<span  style="">1687                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1688     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1689         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1690             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1691                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1694     }                                                                                                    </span>
<span  style="">1695                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1696     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1697     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1698         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1699         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1700         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1701         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span  style="">1702                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1703         try {                                                                                            </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1704             final int idIndex = sc.getColumnIndexOrThrow(                                                </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1705                     LauncherSettings.WorkspaceScreens._ID);                                              </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1706             final int rankIndex = sc.getColumnIndexOrThrow(                                              </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1707                     LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                      </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1708             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1709                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1710                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1711                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1712                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1713                 } catch (Exception e) {                                                                  </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1714                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1714                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1716             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1717         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1718             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1719         }                                                                                                </span>
<span  style="">1720                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1721         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1722         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1723         ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                  </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1724         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1725             orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1726         }                                                                                                </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1727         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                              </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1728                 TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                        </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1729         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1730     }                                                                                                    </span>
<span  style="">1731                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1732     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1733         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1734     }                                                                                                    </span>
<span  style="">1735                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1736     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1737         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1738             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1739                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1740             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1741         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1742         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1743     }                                                                                                    </span>
<span  style="">1744                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1745     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1746      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1747      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1748      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1749      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1750      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1751     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1752         private Context mContext;                                                                        </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1753         private boolean mIsLaunching;                                                                    </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1754         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1755         private boolean mStopped;                                                                        </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1756         private boolean mLoadAndBindStepFinished;                                                        </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1757         private int mFlags;                                                                              </span>
<span  style="">1758                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1759         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1760                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1761         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1762             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1763             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1764             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1765             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1766         }                                                                                                </span>
<span  style="">1767                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1768         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1769             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1770         }                                                                                                </span>
<span  style="">1771                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1772         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1773             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1774         }                                                                                                </span>
<span  style="">1775                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1776         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1777         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1778             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1779                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1780             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1781             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1782                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783             }                                                                                            </span>
<span  style="">1784                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1785             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1786             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1787                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1788                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1789                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1790                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1791                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1792                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1793                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1794             }                                                                                            </span>
<span  style="">1795                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1796             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1797             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1798             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1799         }                                                                                                </span>
<span  style="">1800                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1801         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1802             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1803             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1804             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1805             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1806                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1807                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1808                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1809                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1810                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1811                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1812                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1813                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1814                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1815                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1816                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1817                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1818                     });                                                                                  </span>
<span  style="">1819                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1820                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1821                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1822                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1823                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1824                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1825                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1826                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1827                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1828                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1829                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1830                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1831                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1832                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1833                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1834             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1835         }                                                                                                </span>
<span  style="">1836                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1837         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1838             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1839                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1840                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1841                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1842             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1843             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1844                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1845                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1846                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1847             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1848             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1849                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1850                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1851                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1852                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1853                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1854             }                                                                                            </span>
<span  style="">1855                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1856             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1857             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1858             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1859                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1860             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1861             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1862             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1863             mHandler.flush();                                                                            </span>
<span  style="">1864                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1865             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1866             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1867             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1868             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1869             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1870             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1871         }                                                                                                </span>
<span  style="">1872                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1873         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1874             boolean isUpgrade = false;                                                                   </span>
<span  style="">1875                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1876             synchronized (mLock) {                                                                       </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1877                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1878             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1879             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1880             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1881             // workspace first (default).                                                                </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1882             keep_running: {                                                                              </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1883                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1884                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1885                 synchronized (mLock) {                                                                   </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1886                     if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                        </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1887                             (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                  </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1888                     android.os.Process.setThreadPriority(mIsLaunching                                    </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1889                             ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1890                 }                                                                                        </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1891                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                              </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1892                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span  style="">1893                                                                                                          </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1894                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1895                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1896                 }                                                                                        </span>
<span  style="">1897                                                                                                          </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1898                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1899                 // settled down.                                                                         </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1900                 synchronized (mLock) {                                                                   </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1901                     if (mIsLaunching) {                                                                  </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1902                         if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);          </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1903                         android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1904                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1905                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1906                 waitForIdle();                                                                           </span>
<span  style="">1907                                                                                                          </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1908                 // second step                                                                           </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1909                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                               </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1910                 loadAndBindAllApps();                                                                    </span>
<span  style="">1911                                                                                                          </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1912                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1913                 synchronized (mLock) {                                                                   </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1914                     android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1915                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1916             }                                                                                            </span>
<span  style="">1917                                                                                                          </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1918             // Update the saved icons if necessary                                                       </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1919             if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1920             synchronized (sBgLock) {                                                                     </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1921                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1922                     updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1923                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1924                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1925             }                                                                                            </span>
<span  style="">1926                                                                                                          </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1927             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1928                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1929                 // represented on the home screen.                                                       </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1930                 if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                       </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1931                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1932                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1933             }                                                                                            </span>
<span  style="">1934                                                                                                          </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1935             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1936             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1937             mContext = null;                                                                             </span>
<span  style="">1938                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1939             synchronized (mLock) {                                                                       </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1940                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1941                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1942                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1943                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1944                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1945             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1946         }                                                                                                </span>
<span  style="">1947                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1948         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1949             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1950                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1951                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1952             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1953         }                                                                                                </span>
<span  style="">1954                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1955         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1956          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1957          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1958          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1959          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1960          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1961          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1962         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1963             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1964                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1965                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1966                 }                                                                                        </span>
<span  style="">1967                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1968                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1969                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1970                 }                                                                                        </span>
<span  style="">1971                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1972                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1973                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1974                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1975                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1976                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1977                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1978                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1979                 }                                                                                        </span>
<span  style="">1980                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1981                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1982             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1983         }                                                                                                </span>
<span  style="">1984                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1985         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1986             final Context context = mApp.getContext();                                                   </span>
<span  style="">1987                                                                                                          </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1988             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1989             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1990             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1991             synchronized (sBgLock) {                                                                     </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1992                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="3468492706943039059" onmouseenter="enter('3468492706943039059');" onmouseout="out('3468492706943039059');" style="">1993                     tmpInfos = getItemInfoForComponentName(app.componentName, app.user);                 </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1994                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1995                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1996                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1997                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1998                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1999                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2000                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2001             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">2002             if (!added.isEmpty()) {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2003                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="-7750968314744672785" onmouseenter="enter('-7750968314744672785');" onmouseout="out('-7750968314744672785');" style="">2004                 addAndBindAddedApps(context, added, cb, new ArrayList&lt;AppInfo&gt;());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2005             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2006         }                                                                                                </span>
<span  style="">2007                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">2008         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">2009         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,          </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">2010                                            AtomicBoolean deleteOnInvalidPlacement) {                     </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">2011             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">2012             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">2013             final int countX = (int) grid.numColumns;                                                    </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">2014             final int countY = (int) grid.numRows;                                                       </span>
<span  style="">2015                                                                                                          </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">2016             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">2017             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">2018                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">2019                 if (mCallbacks == null ||                                                                </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">2020                         mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                     </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">2021                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">2022                     Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                             </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">2023                             + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">2024                             + item.cellY + &quot;) occupied by all apps&quot;);                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2025                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2026                 }                                                                                        </span>
<span  style="">2027                                                                                                          </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">2028                 final ItemInfo[][] hotseatItems =                                                        </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">2029                         occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);               </span>
<span  style="">2030                                                                                                          </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">2031                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">2032                     Log.e(TAG, &quot;Error loading shortcut &quot; + item                                          </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">2033                             + &quot; into hotseat position &quot; + item.screenId                                  </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">2034                             + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)            </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">2035                             + &quot;)&quot;);                                                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2036                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2037                 }                                                                                        </span>
<span  style="">2038                                                                                                          </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">2039                 if (hotseatItems != null) {                                                              </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">2040                     if (hotseatItems[(int) item.screenId][0] != null) {                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">2041                         Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                         </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">2042                                 + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;            </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">2043                                 + item.cellY + &quot;) occupied by &quot;                                          </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">2044                                 + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)             </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">2045                                 [(int) item.screenId][0]);                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2046                             return false;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2047                     } else {                                                                             </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">2048                         hotseatItems[(int) item.screenId][0] = item;                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2049                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2050                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2051                 } else {                                                                                 </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">2052                     final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];              </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">2053                     items[(int) item.screenId][0] = item;                                                </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">2054                     occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2055                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2056                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">2057             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">2058                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2059                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2060             }                                                                                            </span>
<span  style="">2061                                                                                                          </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">2062             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">2063                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">2064                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2065             }                                                                                            </span>
<span  style="">2066                                                                                                          </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">2067             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2068             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">2069                     item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                  </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">2070                     item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {              </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">2071                 Log.e(TAG, &quot;Error loading shortcut &quot; + item                                              </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">2072                         + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                    </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">2073                         + item.cellX + &quot;,&quot; + item.cellY                                                  </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">2074                         + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2075                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2076             }                                                                                            </span>
<span  style="">2077                                                                                                          </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">2078             // Check if any workspace icons overlap with each other                                      </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">2079             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">2080                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">2081                     if (screens[x][y] != null) {                                                         </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">2082                         Log.e(TAG, &quot;Error loading shortcut &quot; + item                                      </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">2083                             + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">2084                             + x + &quot;,&quot; + y                                                                </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">2085                             + &quot;) occupied by &quot;                                                           </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">2086                             + screens[x][y]);                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2087                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2088                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2089                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2090             }                                                                                            </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">2091             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">2092                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">2093                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2094                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2095             }                                                                                            </span>
<span  style="">2096                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2097             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2098         }                                                                                                </span>
<span  style="">2099                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">2100         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">2101         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2102             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">2103                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">2104                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">2105                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">2106                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">2107                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">2108                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2109             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2110         }                                                                                                </span>
<span  style="">2111                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">2112         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">2113         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2114             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">2115             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span  style="">2116                                                                                                          </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">2117             final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                               </span>
<span  style="">2118                                                                                                          </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">2119             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">2120             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">2121             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">2122             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">2123             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">2124             final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);             </span>
<span class="-1126483394746043247" onmouseenter="enter('-1126483394746043247');" onmouseout="out('-1126483394746043247');" style="">2125             final boolean isSdCardReady = context.registerReceiver(null,                                 </span>
<span class="235951794025782625" onmouseenter="enter('235951794025782625');" onmouseout="out('235951794025782625');" style="">2126                     new IntentFilter(StartupReceiver.SYSTEM_READY)) != null;                             </span>
<span  style="">2127                                                                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">2128             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">2129             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">2130             int countX = (int) grid.numColumns;                                                          </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">2131             int countY = (int) grid.numRows;                                                             </span>
<span  style="">2132                                                                                                          </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">2133             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">2134                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">2135                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2136             }                                                                                            </span>
<span  style="">2137                                                                                                          </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">2138             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">2139                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">2140                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">2141                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2142             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">2143                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">2144                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="4180233289947251537" onmouseenter="enter('4180233289947251537');" onmouseout="out('4180233289947251537');" style="">2145                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2146             }                                                                                            </span>
<span  style="">2147                                                                                                          </span>
<span class="6918238907049954147" onmouseenter="enter('6918238907049954147');" onmouseout="out('6918238907049954147');" style="">2148             // This code path is for our old migration code and should no longer be exercised            </span>
<span class="-6111060399811000023" onmouseenter="enter('-6111060399811000023');" onmouseout="out('-6111060399811000023');" style="">2149             boolean loadedOldDb = false;                                                                 </span>
<span  style="">2150                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2151             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">2152             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span  style="">2153                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2154             synchronized (sBgLock) {                                                                     </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2155                 clearSBgDataStructures();                                                                </span>
<span class="8252648371202855385" onmouseenter="enter('8252648371202855385');" onmouseout="out('8252648371202855385');" style="">2156                 final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat                            </span>
<span class="-5267108265550912858" onmouseenter="enter('-5267108265550912858');" onmouseout="out('-5267108265550912858');" style="">2157                         .getInstance(mContext).updateAndGetActiveSessionCache();                         </span>
<span  style="">2158                                                                                                          </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">2159                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">2160                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="2252334430881119805" onmouseenter="enter('2252334430881119805');" onmouseout="out('2252334430881119805');" style="">2161                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION;           </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">2162                 if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                       </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">2163                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span  style="">2164                                                                                                          </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">2165                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">2166                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">2167                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">2168                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span  style="">2169                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2170                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">2171                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">2172                     final int intentIndex = c.getColumnIndexOrThrow                                      </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">2173                             (LauncherSettings.Favorites.INTENT);                                         </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">2174                     final int titleIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">2175                             (LauncherSettings.Favorites.TITLE);                                          </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">2176                     final int iconTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">2177                             LauncherSettings.Favorites.ICON_TYPE);                                       </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">2178                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">2179                     final int iconPackageIndex = c.getColumnIndexOrThrow(                                </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">2180                             LauncherSettings.Favorites.ICON_PACKAGE);                                    </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">2181                     final int iconResourceIndex = c.getColumnIndexOrThrow(                               </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">2182                             LauncherSettings.Favorites.ICON_RESOURCE);                                   </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">2183                     final int containerIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">2184                             LauncherSettings.Favorites.CONTAINER);                                       </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">2185                     final int itemTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">2186                             LauncherSettings.Favorites.ITEM_TYPE);                                       </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">2187                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">2188                             LauncherSettings.Favorites.APPWIDGET_ID);                                    </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">2189                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                          </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">2190                             LauncherSettings.Favorites.APPWIDGET_PROVIDER);                              </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">2191                     final int screenIndex = c.getColumnIndexOrThrow(                                     </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">2192                             LauncherSettings.Favorites.SCREEN);                                          </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">2193                     final int cellXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">2194                             (LauncherSettings.Favorites.CELLX);                                          </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">2195                     final int cellYIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">2196                             (LauncherSettings.Favorites.CELLY);                                          </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">2197                     final int spanXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">2198                             (LauncherSettings.Favorites.SPANX);                                          </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">2199                     final int spanYIndex = c.getColumnIndexOrThrow(                                      </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">2200                             LauncherSettings.Favorites.SPANY);                                           </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">2201                     final int restoredIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">2202                             LauncherSettings.Favorites.RESTORED);                                        </span>
<span class="3162637821619353517" onmouseenter="enter('3162637821619353517');" onmouseout="out('3162637821619353517');" style="">2203                     final int profileIdIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="-1125432391574533143" onmouseenter="enter('-1125432391574533143');" onmouseout="out('-1125432391574533143');" style="">2204                             LauncherSettings.Favorites.PROFILE_ID);                                      </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">2205                     //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);      </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">2206                     //final int displayModeIndex = c.getColumnIndexOrThrow(                              </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">2207                     //        LauncherSettings.Favorites.DISPLAY_MODE);                                  </span>
<span  style="">2208                                                                                                          </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">2209                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">2210                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">2211                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">2212                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">2213                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">2214                     Intent intent;                                                                       </span>
<span class="8928715163618104503" onmouseenter="enter('8928715163618104503');" onmouseout="out('8928715163618104503');" style="">2215                     UserHandleCompat user;                                                               </span>
<span  style="">2216                                                                                                          </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">2217                     while (!mStopped &amp;&amp; c.moveToNext()) {                                                </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">2218                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2219                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">2220                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">2221                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span class="4933910026947534491" onmouseenter="enter('4933910026947534491');" onmouseout="out('4933910026947534491');" style="">2222                             boolean allowMissingTarget = false;                                          </span>
<span  style="">2223                                                                                                          </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">2224                             switch (itemType) {                                                          </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">2225                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">2226                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2227                                 id = c.getLong(idIndex);                                                 </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">2228                                 intentDescription = c.getString(intentIndex);                            </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="">2229                                 long serialNumber = c.getInt(profileIdIndex);                            </span>
<span class="-4273089527731895214" onmouseenter="enter('-4273089527731895214');" onmouseout="out('-4273089527731895214');" style="">2230                                 user = mUserManager.getUserForSerialNumber(serialNumber);                </span>
<span class="-3834292976309282984" onmouseenter="enter('-3834292976309282984');" onmouseout="out('-3834292976309282984');" style="">2231                                 int promiseType = c.getInt(restoredIndex);                               </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">2232                                 if (user == null) {                                                      </span>
<span class="-496594084298695862" onmouseenter="enter('-496594084298695862');" onmouseout="out('-496594084298695862');" style="">2233                                     // User has been deleted remove the item.                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2234                                     itemsToRemove.add(id);                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2235                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2236                                 }                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2237                                 try {                                                                    </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">2238                                     intent = Intent.parseUri(intentDescription, 0);                      </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">2239                                     ComponentName cn = intent.getComponent();                            </span>
<span class="3739674956299895084" onmouseenter="enter('3739674956299895084');" onmouseout="out('3739674956299895084');" style="">2240                                     if (cn != null &amp;&amp; cn.getPackageName() != null) {                     </span>
<span class="-7017860263960771696" onmouseenter="enter('-7017860263960771696');" onmouseout="out('-7017860263960771696');" style="">2241                                         boolean validPkg = launcherApps.isPackageEnabledForProfile(      </span>
<span class="-8206530135326160205" onmouseenter="enter('-8206530135326160205');" onmouseout="out('-8206530135326160205');" style="">2242                                                 cn.getPackageName(), user);                              </span>
<span class="2397899750057092636" onmouseenter="enter('2397899750057092636');" onmouseout="out('2397899750057092636');" style="">2243                                         boolean validComponent = validPkg &amp;&amp;                             </span>
<span class="8762069982139369869" onmouseenter="enter('8762069982139369869');" onmouseout="out('8762069982139369869');" style="">2244                                                 launcherApps.isActivityEnabledForProfile(cn, user);      </span>
<span  style="">2245                                                                                                          </span>
<span class="-99499348404964068" onmouseenter="enter('-99499348404964068');" onmouseout="out('-99499348404964068');" style="">2246                                         if (validComponent) {                                            </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2247                                             if (restored) {                                              </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">2248                                                 // no special handling necessary for this item           </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2249                                                 restoredRows.add(id);                                    </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2250                                                 restored = false;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2251                                             }                                                            </span>
<span class="6348728592662235672" onmouseenter="enter('6348728592662235672');" onmouseout="out('6348728592662235672');" style="">2252                                         } else if (validPkg) {                                           </span>
<span class="-6379280176207841217" onmouseenter="enter('-6379280176207841217');" onmouseout="out('-6379280176207841217');" style="">2253                                             intent = null;                                               </span>
<span class="-5338271721329837400" onmouseenter="enter('-5338271721329837400');" onmouseout="out('-5338271721329837400');" style="">2254                                             if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {</span>
<span class="5709472974278481468" onmouseenter="enter('5709472974278481468');" onmouseout="out('5709472974278481468');" style="">2255                                                 // We allow auto install apps to have their intent       </span>
<span class="-2650685759805982432" onmouseenter="enter('-2650685759805982432');" onmouseout="out('-2650685759805982432');" style="">2256                                                 // updated after an install.                             </span>
<span class="-9107195642058231815" onmouseenter="enter('-9107195642058231815');" onmouseout="out('-9107195642058231815');" style="">2257                                                 intent = manager.getLaunchIntentForPackage(              </span>
<span class="2095835690487424293" onmouseenter="enter('2095835690487424293');" onmouseout="out('2095835690487424293');" style="">2258                                                         cn.getPackageName());                            </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="">2259                                                 if (intent != null) {                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2260                                                     ContentValues values = new ContentValues();          </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="">2261                                                     values.put(LauncherSettings.Favorites.INTENT,        </span>
<span class="-6799954997008316510" onmouseenter="enter('-6799954997008316510');" onmouseout="out('-6799954997008316510');" style="">2262                                                             intent.toUri(0));                            </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2263                                                     String where = BaseColumns._ID + &quot;= ?&quot;;              </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2264                                                     String[] args = {Long.toString(id)};                 </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style=""><abbr title="2265                                                     contentResolver.update(contentUri, values, where, args);">2265                                                     contentResolver.update(contentUri, values, where, arg</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2266                                                 }                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2267                                             }                                                            </span>
<span  style="">2268                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">2269                                             if (intent == null) {                                        </span>
<span class="8006468267706457929" onmouseenter="enter('8006468267706457929');" onmouseout="out('8006468267706457929');" style="">2270                                                 // The app is installed but the component is no          </span>
<span class="7757985899517234268" onmouseenter="enter('7757985899517234268');" onmouseout="out('7757985899517234268');" style="">2271                                                 // longer available.                                     </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2272                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="-4265604912045441952" onmouseenter="enter('-4265604912045441952');" onmouseout="out('-4265604912045441952');" style="">2273                                                         &quot;Invalid component removed: &quot; + cn, true);       </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2274                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2275                                                 continue;                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2276                                             } else {                                                     </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">2277                                                 // no special handling necessary for this item           </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2278                                                 restoredRows.add(id);                                    </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2279                                                 restored = false;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2280                                             }                                                            </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">2281                                         } else if (restored) {                                           </span>
<span class="6723757088957997679" onmouseenter="enter('6723757088957997679');" onmouseout="out('6723757088957997679');" style="">2282                                             // Package is not yet available but might be                 </span>
<span class="9210943103787239320" onmouseenter="enter('9210943103787239320');" onmouseout="out('9210943103787239320');" style="">2283                                             // installed later.                                          </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2284                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">2285                                                     &quot;package not yet restored: &quot; + cn, true);            </span>
<span  style="">2286                                                                                                          </span>
<span class="-3623786309000722140" onmouseenter="enter('-3623786309000722140');" onmouseout="out('-3623786309000722140');" style="">2287                                             if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != 0) {</span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2288                                                 // Restore has started once.                             </span>
<span class="-3201378748433506719" onmouseenter="enter('-3201378748433506719');" onmouseout="out('-3201378748433506719');" style="">2289                                             } else if (installingPkgs.contains(cn.getPackageName())) {   </span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2290                                                 // App restore has started. Update the flag              </span>
<span class="-8644667183049601729" onmouseenter="enter('-8644667183049601729');" onmouseout="out('-8644667183049601729');" style="">2291                                                 promiseType |= ShortcutInfo.FLAG_RESTORE_STARTED;        </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2292                                                 ContentValues values = new ContentValues();              </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="">2293                                                 values.put(LauncherSettings.Favorites.RESTORED,          </span>
<span class="-6746125005705027516" onmouseenter="enter('-6746125005705027516');" onmouseout="out('-6746125005705027516');" style="">2294                                                         promiseType);                                    </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2295                                                 String where = BaseColumns._ID + &quot;= ?&quot;;                  </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2296                                                 String[] args = {Long.toString(id)};                     </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2297                                                 contentResolver.update(contentUri, values, where, args); </span>
<span  style="">2298                                                                                                          </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2299                                             } else if (REMOVE_UNRESTORED_ICONS) {                        </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2300                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="-4630254631341932691" onmouseenter="enter('-4630254631341932691');" onmouseout="out('-4630254631341932691');" style="">2301                                                         &quot;Unrestored package removed: &quot; + cn, true);      </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2302                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2303                                                 continue;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2304                                             }                                                            </span>
<span class="-1386874848571608329" onmouseenter="enter('-1386874848571608329');" onmouseout="out('-1386874848571608329');" style="">2305                                         } else if (isSdCardReady) {                                      </span>
<span class="3796946079469102110" onmouseenter="enter('3796946079469102110');" onmouseout="out('3796946079469102110');" style="">2306                                             // Do not wait for external media load anymore.              </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">2307                                             // Log the invalid package, and remove it                    </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2308                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="">2309                                                     &quot;Invalid package removed: &quot; + cn, true);             </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2310                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2311                                             continue;                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2312                                         } else {                                                         </span>
<span class="1407932970386463384" onmouseenter="enter('1407932970386463384');" onmouseout="out('1407932970386463384');" style="">2313                                             // SdCard is not ready yet. Package might get available,     </span>
<span class="8490114520358161793" onmouseenter="enter('8490114520358161793');" onmouseout="out('8490114520358161793');" style="">2314                                             // once it is ready.                                         </span>
<span class="-6360577143290119906" onmouseenter="enter('-6360577143290119906');" onmouseout="out('-6360577143290119906');" style="">2315                                             Launcher.addDumpLog(TAG, &quot;Invalid package: &quot; + cn            </span>
<span class="-4780001113233310924" onmouseenter="enter('-4780001113233310924');" onmouseout="out('-4780001113233310924');" style="">2316                                                     + &quot; (check again later)&quot;, true);                     </span>
<span class="-8366417370187832083" onmouseenter="enter('-8366417370187832083');" onmouseout="out('-8366417370187832083');" style="">2317                                             HashSet&lt;String&gt; pkgs = sPendingPackages.get(user);           </span>
<span class="3542388323197199472" onmouseenter="enter('3542388323197199472');" onmouseout="out('3542388323197199472');" style="">2318                                             if (pkgs == null) {                                          </span>
<span class="2501092745877296895" onmouseenter="enter('2501092745877296895');" onmouseout="out('2501092745877296895');" style="">2319                                                 pkgs = new HashSet&lt;String&gt;();                            </span>
<span class="-7473793273553333759" onmouseenter="enter('-7473793273553333759');" onmouseout="out('-7473793273553333759');" style="">2320                                                 sPendingPackages.put(user, pkgs);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2321                                             }                                                            </span>
<span class="-4896386049384421066" onmouseenter="enter('-4896386049384421066');" onmouseout="out('-4896386049384421066');" style="">2322                                             pkgs.add(cn.getPackageName());                               </span>
<span class="-7690684901319719205" onmouseenter="enter('-7690684901319719205');" onmouseout="out('-7690684901319719205');" style="">2323                                             allowMissingTarget = true;                                   </span>
<span class="7315818939061071709" onmouseenter="enter('7315818939061071709');" onmouseout="out('7315818939061071709');" style="">2324                                             // Add the icon on the workspace anyway.                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2325                                         }                                                                </span>
<span class="-237996807879267337" onmouseenter="enter('-237996807879267337');" onmouseout="out('-237996807879267337');" style="">2326                                     } else if (cn == null) {                                             </span>
<span class="8972274794412921183" onmouseenter="enter('8972274794412921183');" onmouseout="out('8972274794412921183');" style="">2327                                         // For shortcuts with no component, keep them as they are        </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2328                                         restoredRows.add(id);                                            </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2329                                         restored = false;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2330                                     }                                                                    </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2331                                 } catch (URISyntaxException e) {                                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2332                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">2333                                             &quot;Invalid uri: &quot; + intentDescription, true);                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2334                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2335                                 }                                                                        </span>
<span  style="">2336                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2337                                 if (restored) {                                                          </span>
<span class="-3932834939055806292" onmouseenter="enter('-3932834939055806292');" onmouseout="out('-3932834939055806292');" style="">2338                                     if (user.equals(UserHandleCompat.myUserHandle())) {                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2339                                         Launcher.addDumpLog(TAG,                                         </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="">2340                                                 &quot;constructing info for partially restored package&quot;,      </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="">2341                                                 true);                                                   </span>
<span class="9114514411241404985" onmouseenter="enter('9114514411241404985');" onmouseout="out('9114514411241404985');" style="">2342                                         info = getRestoredItemInfo(c, titleIndex, intent, promiseType);  </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">2343                                         intent = getRestoredItemIntent(c, context, intent);              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2344                                     } else {                                                             </span>
<span class="5174235078557753913" onmouseenter="enter('5174235078557753913');" onmouseout="out('5174235078557753913');" style="">2345                                         // Don&#x27;t restore items for other profiles.                       </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2346                                         itemsToRemove.add(id);                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2347                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2348                                     }                                                                    </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">2349                                 } else if (itemType ==                                                   </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">2350                                         LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {              </span>
<span class="-7549941140075833136" onmouseenter="enter('-7549941140075833136');" onmouseout="out('-7549941140075833136');" style="">2351                                     info = getShortcutInfo(manager, intent, user, context, c,            </span>
<span class="-4574059466099335125" onmouseenter="enter('-4574059466099335125');" onmouseout="out('-4574059466099335125');" style="">2352                                             iconIndex, titleIndex, mLabelCache, allowMissingTarget);     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2353                                 } else {                                                                 </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">2354                                     info = getShortcutInfo(c, context, iconTypeIndex,                    </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">2355                                             iconPackageIndex, iconResourceIndex, iconIndex,              </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">2356                                             titleIndex);                                                 </span>
<span  style="">2357                                                                                                          </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">2358                                     // App shortcuts that used to be automatically added to Launcher     </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">2359                                     // didn&#x27;t always have the correct intent flags set, so do that       </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">2360                                     // here                                                              </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">2361                                     if (intent.getAction() != null &amp;&amp;                                    </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">2362                                         intent.getCategories() != null &amp;&amp;                                </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">2363                                         intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                 </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">2364                                         intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {     </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">2365                                         intent.addFlags(                                                 </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">2366                                             Intent.FLAG_ACTIVITY_NEW_TASK |                              </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">2367                                             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2368                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2369                                 }                                                                        </span>
<span  style="">2370                                                                                                          </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">2371                                 if (info != null) {                                                      </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">2372                                     info.id = id;                                                        </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">2373                                     info.intent = intent;                                                </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2374                                     container = c.getInt(containerIndex);                                </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">2375                                     info.container = container;                                          </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">2376                                     info.screenId = c.getInt(screenIndex);                               </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">2377                                     info.cellX = c.getInt(cellXIndex);                                   </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">2378                                     info.cellY = c.getInt(cellYIndex);                                   </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">2379                                     info.spanX = 1;                                                      </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">2380                                     info.spanY = 1;                                                      </span>
<span class="3045271753555441709" onmouseenter="enter('3045271753555441709');" onmouseout="out('3045271753555441709');" style="">2381                                     info.intent.putExtra(ItemInfo.EXTRA_PROFILE, serialNumber);          </span>
<span class="-4153270497324690681" onmouseenter="enter('-4153270497324690681');" onmouseout="out('-4153270497324690681');" style="">2382                                     info.isDisabled = isSafeMode                                         </span>
<span class="7337397009343704544" onmouseenter="enter('7337397009343704544');" onmouseout="out('7337397009343704544');" style="">2383                                             &amp;&amp; !Utilities.isSystemApp(context, intent);                  </span>
<span  style="">2384                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2385                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2386                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">2387                                     if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) { </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2388                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2389                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2390                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2391                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2392                                     }                                                                    </span>
<span  style="">2393                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2394                                     switch (container) {                                                 </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2395                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2396                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">2397                                         sBgWorkspaceItems.add(info);                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2398                                         break;                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">2399                                     default:                                                             </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">2400                                         // Item is in a user folder                                      </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">2401                                         FolderInfo folderInfo =                                          </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">2402                                                 findOrMakeFolder(sBgFolders, container);                 </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">2403                                         folderInfo.add(info);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2404                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2405                                     }                                                                    </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">2406                                     sBgItemsIdMap.put(info.id, info);                                    </span>
<span  style="">2407                                                                                                          </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">2408                                     // now that we&#x27;ve loaded everthing re-save it with the               </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">2409                                     // icon in case it disappears somehow.                               </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">2410                                     queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2411                                 } else {                                                                 </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">2412                                     throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2413                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2414                                 break;                                                                   </span>
<span  style="">2415                                                                                                          </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">2416                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2417                                 id = c.getLong(idIndex);                                                 </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">2418                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                </span>
<span  style="">2419                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">2420                                 folderInfo.title = c.getString(titleIndex);                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">2421                                 folderInfo.id = id;                                                      </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2422                                 container = c.getInt(containerIndex);                                    </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">2423                                 folderInfo.container = container;                                        </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">2424                                 folderInfo.screenId = c.getInt(screenIndex);                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">2425                                 folderInfo.cellX = c.getInt(cellXIndex);                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">2426                                 folderInfo.cellY = c.getInt(cellYIndex);                                 </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">2427                                 folderInfo.spanX = 1;                                                    </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">2428                                 folderInfo.spanY = 1;                                                    </span>
<span  style="">2429                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2430                                 // check &amp; update map of what&#x27;s occupied                                 </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2431                                 deleteOnInvalidPlacement.set(false);                                     </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">2432                                 if (!checkItemPlacement(occupied, folderInfo,                            </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2433                                         deleteOnInvalidPlacement)) {                                     </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2434                                     if (deleteOnInvalidPlacement.get()) {                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2435                                         itemsToRemove.add(id);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2436                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2437                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2438                                 }                                                                        </span>
<span  style="">2439                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2440                                 switch (container) {                                                     </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2441                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2442                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">2443                                         sBgWorkspaceItems.add(folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2444                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2445                                 }                                                                        </span>
<span  style="">2446                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2447                                 if (restored) {                                                          </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2448                                     // no special handling required for restored folders                 </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2449                                     restoredRows.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2450                                 }                                                                        </span>
<span  style="">2451                                                                                                          </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2452                                 sBgItemsIdMap.put(folderInfo.id, folderInfo);                            </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2453                                 sBgFolders.put(folderInfo.id, folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2454                                 break;                                                                   </span>
<span  style="">2455                                                                                                          </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2456                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2457                                 // Read all Launcher-specific widget details                             </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2458                                 int appWidgetId = c.getInt(appWidgetIdIndex);                            </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2459                                 String savedProvider = c.getString(appWidgetProviderIndex);              </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2460                                 id = c.getLong(idIndex);                                                 </span>
<span class="-6617867489767824559" onmouseenter="enter('-6617867489767824559');" onmouseout="out('-6617867489767824559');" style="">2461                                 final ComponentName component =                                          </span>
<span class="2036133433071881641" onmouseenter="enter('2036133433071881641');" onmouseout="out('2036133433071881641');" style="">2462                                         ComponentName.unflattenFromString(savedProvider);                </span>
<span  style="">2463                                                                                                          </span>
<span class="-1033311611191387821" onmouseenter="enter('-1033311611191387821');" onmouseout="out('-1033311611191387821');" style="">2464                                 final int restoreStatus = c.getInt(restoredIndex);                       </span>
<span class="-4190680795845516969" onmouseenter="enter('-4190680795845516969');" onmouseout="out('-4190680795845516969');" style="">2465                                 final boolean isIdValid = (restoreStatus &amp;                               </span>
<span class="-1481780029747642556" onmouseenter="enter('-1481780029747642556');" onmouseout="out('-1481780029747642556');" style="">2466                                         LauncherAppWidgetInfo.FLAG_ID_NOT_VALID) == 0;                   </span>
<span  style="">2467                                                                                                          </span>
<span class="5101880033416706570" onmouseenter="enter('5101880033416706570');" onmouseout="out('5101880033416706570');" style="">2468                                 final boolean wasProviderReady = (restoreStatus &amp;                        </span>
<span class="1207335416094145871" onmouseenter="enter('1207335416094145871');" onmouseout="out('1207335416094145871');" style="">2469                                         LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) == 0;             </span>
<span  style="">2470                                                                                                          </span>
<span class="-565532021680206913" onmouseenter="enter('-565532021680206913');" onmouseout="out('-565532021680206913');" style="">2471                                 final AppWidgetProviderInfo provider = isIdValid                         </span>
<span class="-1314040982621159070" onmouseenter="enter('-1314040982621159070');" onmouseout="out('-1314040982621159070');" style="">2472                                         ? widgets.getAppWidgetInfo(appWidgetId)                          </span>
<span class="-5208038715710523064" onmouseenter="enter('-5208038715710523064');" onmouseout="out('-5208038715710523064');" style="">2473                                         : findAppWidgetProviderInfoWithComponent(context, component);    </span>
<span  style="">2474                                                                                                          </span>
<span class="-3732530231777271434" onmouseenter="enter('-3732530231777271434');" onmouseout="out('-3732530231777271434');" style="">2475                                 final boolean isProviderReady = isValidProvider(provider);               </span>
<span class="-4031276934674956730" onmouseenter="enter('-4031276934674956730');" onmouseout="out('-4031276934674956730');" style="">2476                                 if (!isSafeMode &amp;&amp; wasProviderReady &amp;&amp; !isProviderReady) {               </span>
<span class="-7439259826635164411" onmouseenter="enter('-7439259826635164411');" onmouseout="out('-7439259826635164411');" style="">2477                                     String log = &quot;Deleting widget that isn&#x27;t installed anymore: &quot;        </span>
<span class="7602710093107620029" onmouseenter="enter('7602710093107620029');" onmouseout="out('7602710093107620029');" style="">2478                                             + &quot;id=&quot; + id + &quot; appWidgetId=&quot; + appWidgetId;                </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2479                                     Log.e(TAG, log);                                                     </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2480                                     Launcher.addDumpLog(TAG, log, false);                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2481                                     itemsToRemove.add(id);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2482                                 } else {                                                                 </span>
<span class="-6990378869891346567" onmouseenter="enter('-6990378869891346567');" onmouseout="out('-6990378869891346567');" style="">2483                                     if (isProviderReady) {                                               </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2484                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,           </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="">2485                                                 provider.provider);                                      </span>
<span class="-8791440271290591158" onmouseenter="enter('-8791440271290591158');" onmouseout="out('-8791440271290591158');" style="">2486                                         int[] minSpan =                                                  </span>
<span class="-461068380011135868" onmouseenter="enter('-461068380011135868');" onmouseout="out('-461068380011135868');" style="">2487                                                 Launcher.getMinSpanForWidget(context, provider);         </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2488                                         appWidgetInfo.minSpanX = minSpan[0];                             </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2489                                         appWidgetInfo.minSpanY = minSpan[1];                             </span>
<span  style="">2490                                                                                                          </span>
<span class="-4125236257298908421" onmouseenter="enter('-4125236257298908421');" onmouseout="out('-4125236257298908421');" style="">2491                                         int status = restoreStatus;                                      </span>
<span class="7579397535150427943" onmouseenter="enter('7579397535150427943');" onmouseout="out('7579397535150427943');" style="">2492                                         if (!wasProviderReady) {                                         </span>
<span class="1257696726614810242" onmouseenter="enter('1257696726614810242');" onmouseout="out('1257696726614810242');" style="">2493                                             // If provider was not previously ready, update the          </span>
<span class="2493747474831820434" onmouseenter="enter('2493747474831820434');" onmouseout="out('2493747474831820434');" style="">2494                                             // status and UI flag.                                       </span>
<span  style="">2495                                                                                                          </span>
<span class="-551194396664004778" onmouseenter="enter('-551194396664004778');" onmouseout="out('-551194396664004778');" style=""><abbr title="2496                                             // Id would be valid only if the widget restore broadcast was received.">2496                                             // Id would be valid only if the widget restore broadcast was</abbr></span>
<span class="877884548755909685" onmouseenter="enter('877884548755909685');" onmouseout="out('877884548755909685');" style="">2497                                             if (isIdValid) {                                             </span>
<span class="7708410681175562751" onmouseenter="enter('7708410681175562751');" onmouseout="out('7708410681175562751');" style="">2498                                                 status = LauncherAppWidgetInfo.RESTORE_COMPLETED;        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2499                                             } else {                                                     </span>
<span class="-2615385138309932511" onmouseenter="enter('-2615385138309932511');" onmouseout="out('-2615385138309932511');" style="">2500                                                 status &amp;= ~LauncherAppWidgetInfo                         </span>
<span class="-1081946781001842885" onmouseenter="enter('-1081946781001842885');" onmouseout="out('-1081946781001842885');" style="">2501                                                         .FLAG_PROVIDER_NOT_READY;                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2502                                             }                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2503                                         }                                                                </span>
<span class="-5649718664209503492" onmouseenter="enter('-5649718664209503492');" onmouseout="out('-5649718664209503492');" style="">2504                                         appWidgetInfo.restoreStatus = status;                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2505                                     } else {                                                             </span>
<span class="1960922256572910963" onmouseenter="enter('1960922256572910963');" onmouseout="out('1960922256572910963');" style="">2506                                         Log.v(TAG, &quot;Widget restore pending id=&quot; + id                     </span>
<span class="-310807007133679357" onmouseenter="enter('-310807007133679357');" onmouseout="out('-310807007133679357');" style="">2507                                                 + &quot; appWidgetId=&quot; + appWidgetId                          </span>
<span class="-3553458184285370274" onmouseenter="enter('-3553458184285370274');" onmouseout="out('-3553458184285370274');" style="">2508                                                 + &quot; status =&quot; + restoreStatus);                          </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2509                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,           </span>
<span class="-876368090679524620" onmouseenter="enter('-876368090679524620');" onmouseout="out('-876368090679524620');" style="">2510                                                 component);                                              </span>
<span class="5437344546404607904" onmouseenter="enter('5437344546404607904');" onmouseout="out('5437344546404607904');" style="">2511                                         appWidgetInfo.restoreStatus = restoreStatus;                     </span>
<span  style="">2512                                                                                                          </span>
<span class="3064749011557231100" onmouseenter="enter('3064749011557231100');" onmouseout="out('3064749011557231100');" style=""><abbr title="2513                                         if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) != 0) {">2513                                         if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) </abbr></span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2514                                             // Restore has started once.                                 </span>
<span class="1863960885189711466" onmouseenter="enter('1863960885189711466');" onmouseout="out('1863960885189711466');" style="">2515                                         } else if (installingPkgs.contains(component.getPackageName())) {</span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2516                                             // App restore has started. Update the flag                  </span>
<span class="-2352323974911641075" onmouseenter="enter('-2352323974911641075');" onmouseout="out('-2352323974911641075');" style="">2517                                             appWidgetInfo.restoreStatus |=                               </span>
<span class="8590583015720742314" onmouseenter="enter('8590583015720742314');" onmouseout="out('8590583015720742314');" style="">2518                                                     LauncherAppWidgetInfo.FLAG_RESTORE_STARTED;          </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2519                                         } else if (REMOVE_UNRESTORED_ICONS) {                            </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2520                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="-6243477493514584052" onmouseenter="enter('-6243477493514584052');" onmouseout="out('-6243477493514584052');" style="">2521                                                     &quot;Unrestored widget removed: &quot; + component, true);    </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2522                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2523                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2524                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2525                                     }                                                                    </span>
<span  style="">2526                                                                                                          </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2527                                     appWidgetInfo.id = id;                                               </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2528                                     appWidgetInfo.screenId = c.getInt(screenIndex);                      </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2529                                     appWidgetInfo.cellX = c.getInt(cellXIndex);                          </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2530                                     appWidgetInfo.cellY = c.getInt(cellYIndex);                          </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2531                                     appWidgetInfo.spanX = c.getInt(spanXIndex);                          </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2532                                     appWidgetInfo.spanY = c.getInt(spanYIndex);                          </span>
<span  style="">2533                                                                                                          </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2534                                     container = c.getInt(containerIndex);                                </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2535                                     if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;     </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2536                                         container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {     </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2537                                         Log.e(TAG, &quot;Widget found where container != &quot; +                  </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2538                                             &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2539                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2540                                     }                                                                    </span>
<span  style="">2541                                                                                                          </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2542                                     appWidgetInfo.container = c.getInt(containerIndex);                  </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2543                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2544                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2545                                     if (!checkItemPlacement(occupied, appWidgetInfo,                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2546                                             deleteOnInvalidPlacement)) {                                 </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2547                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2548                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2549                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2550                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2551                                     }                                                                    </span>
<span  style="">2552                                                                                                          </span>
<span class="-8698298148744232980" onmouseenter="enter('-8698298148744232980');" onmouseout="out('-8698298148744232980');" style="">2553                                     String providerName = appWidgetInfo.providerName.flattenToString();  </span>
<span class="2853568002576356463" onmouseenter="enter('2853568002576356463');" onmouseout="out('2853568002576356463');" style="">2554                                     if (!providerName.equals(savedProvider) ||                           </span>
<span class="4338446659263892125" onmouseenter="enter('4338446659263892125');" onmouseout="out('4338446659263892125');" style="">2555                                             (appWidgetInfo.restoreStatus != restoreStatus)) {            </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2556                                         ContentValues values = new ContentValues();                      </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2557                                         values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,        </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2558                                                 providerName);                                           </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="">2559                                         values.put(LauncherSettings.Favorites.RESTORED,                  </span>
<span class="6174833257706459781" onmouseenter="enter('6174833257706459781');" onmouseout="out('6174833257706459781');" style="">2560                                                 appWidgetInfo.restoreStatus);                            </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2561                                         String where = BaseColumns._ID + &quot;= ?&quot;;                          </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2562                                         String[] args = {Long.toString(id)};                             </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2563                                         contentResolver.update(contentUri, values, where, args);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2564                                     }                                                                    </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2565                                     sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                  </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2566                                     sBgAppWidgets.add(appWidgetInfo);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2567                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2568                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2569                             }                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2570                         } catch (Exception e) {                                                          </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2571                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2572                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2573                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2574                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2575                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2576                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2577                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2578                 }                                                                                        </span>
<span  style="">2579                                                                                                          </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2580                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2581                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2582                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2583                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2584                 }                                                                                        </span>
<span  style="">2585                                                                                                          </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2586                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2587                     ContentProviderClient client = contentResolver.acquireContentProviderClient(         </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="">2588                             contentUri);                                                                 </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2589                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2590                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2591                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2592                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2593                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2594                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2595                         try {                                                                            </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2596                             client.delete(LauncherSettings.Favorites.getContentUri(id, false),           </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2597                                     null, null);                                                         </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2598                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2599                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2600                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2601                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2602                 }                                                                                        </span>
<span  style="">2603                                                                                                          </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2604                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2605                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(        </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="">2606                             contentUri);                                                                 </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2607                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2608                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2609                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2610                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2611                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2612                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2613                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2614                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2615                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="5986100348417061644" onmouseenter="enter('5986100348417061644');" onmouseout="out('5986100348417061644');" style="">2616                         updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,           </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2617                                 values, selectionBuilder.toString(), null);                              </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2618                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2619                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2620                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2621                 }                                                                                        </span>
<span  style="">2622                                                                                                          </span>
<span class="-5457196494236388113" onmouseenter="enter('-5457196494236388113');" onmouseout="out('-5457196494236388113');" style="">2623                 if (!isSdCardReady &amp;&amp; !sPendingPackages.isEmpty()) {                                     </span>
<span class="371670048052179208" onmouseenter="enter('371670048052179208');" onmouseout="out('371670048052179208');" style="">2624                     context.registerReceiver(new AppsAvailabilityCheck(),                                </span>
<span class="-2250957496563467306" onmouseenter="enter('-2250957496563467306');" onmouseout="out('-2250957496563467306');" style="">2625                             new IntentFilter(StartupReceiver.SYSTEM_READY),                              </span>
<span class="-5536809824571506033" onmouseenter="enter('-5536809824571506033');" onmouseout="out('-5536809824571506033');" style="">2626                             null, sWorker);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2627                 }                                                                                        </span>
<span  style="">2628                                                                                                          </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2629                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2630                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2631                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2632                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2633                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2634                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2635                                 !sBgWorkspaceScreens.contains(screenId)) {                               </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2636                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2637                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2638                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2639                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2640                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2641                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2642                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2643                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2644                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2645                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2646                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2647                                                                                                          </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2648                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2649                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span  style="">2650                                                                                                          </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2651                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2652                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2653                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2654                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2655                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2656                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2657                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2658                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2659                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2660                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2661                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2662                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2663                     // Log to disk                                                                       </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2664                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2665                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2666                                                                                                          </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2667                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2668                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2669                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2670                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2671                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2672                                 unusedScreens.contains(screenId)) {                                      </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2673                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2674                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2675                     }                                                                                    </span>
<span  style="">2676                                                                                                          </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2677                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2678                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2679                         // Log to disk                                                                   </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2680                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +        </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2681                                 TextUtils.join(&quot;, &quot;, unusedScreens), true);                              </span>
<span  style="">2682                                                                                                          </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2683                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2684                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2685                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2686                 }                                                                                        </span>
<span  style="">2687                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2688                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2689                     Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);          </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2690                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2691                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2692                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2693                         String line = &quot;&quot;;                                                                </span>
<span  style="">2694                                                                                                          </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2695                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2696                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2697                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2698                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2699                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2700                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2701                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="-6212011147390486077" onmouseenter="enter('-6212011147390486077');" onmouseout="out('-6212011147390486077');" style="">2702                                 ItemInfo[][] screen = occupied.get(screenId);                            </span>
<span class="-8528390042415740475" onmouseenter="enter('-8528390042415740475');" onmouseout="out('-8528390042415740475');" style="">2703                                 if (x &lt; screen.length &amp;&amp; y &lt; screen[x].length) {                         </span>
<span class="2138628812736326092" onmouseenter="enter('2138628812736326092');" onmouseout="out('2138628812736326092');" style="">2704                                     line += (screen[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2705                                 } else {                                                                 </span>
<span class="3801202768225819208" onmouseenter="enter('3801202768225819208');" onmouseout="out('3801202768225819208');" style="">2706                                     line += &quot;!&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2707                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2708                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2709                         }                                                                                </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2710                         Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2711                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2712                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2713             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2714             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2715         }                                                                                                </span>
<span  style="">2716                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2717         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2718          * specified screen. */                                                                          </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2719         private void filterCurrentWorkspaceItems(long currentScreenId,                                   </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2720                 ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                   </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2721                 ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                  </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2722                 ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                  </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2723             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2724             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2725             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2726                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2727                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2728                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2729                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2730             }                                                                                            </span>
<span  style="">2731                                                                                                          </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2732             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2733             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2734             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2735             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2736             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2737                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2738                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2739                     return (int) (lhs.container - rhs.container);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2740                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2741             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2742             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2743                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2744                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2745                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2746                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2747                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2748                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2749                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2750                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2751                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2752                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2753                 } else {                                                                                 </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2754                     if (itemsOnScreen.contains(info.container)) {                                        </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2755                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2756                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2757                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2758                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2759                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2760                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2761             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2762         }                                                                                                </span>
<span  style="">2763                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2764         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2765         private void filterCurrentAppWidgets(long currentScreenId,                                       </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2766                 ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                             </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2767                 ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                   </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2768                 ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                   </span>
<span  style="">2769                                                                                                          </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2770             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2771                 if (widget == null) continue;                                                            </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2772                 if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                  </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2773                         widget.screenId == currentScreenId) {                                            </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2774                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2775                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2776                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2777                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2778             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2779         }                                                                                                </span>
<span  style="">2780                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2781         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2782         private void filterCurrentFolders(long currentScreenId,                                          </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2783                 HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                      </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2784                 HashMap&lt;Long, FolderInfo&gt; folders,                                                       </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2785                 HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                          </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2786                 HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                          </span>
<span  style="">2787                                                                                                          </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2788             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2789                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2790                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2791                 if (info == null || folder == null) continue;                                            </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2792                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                    </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2793                         info.screenId == currentScreenId) {                                              </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2794                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2795                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2796                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2797                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2798             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2799         }                                                                                                </span>
<span  style="">2800                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2801         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2802          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2803         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2804             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2805             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2806             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2807             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2808                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2809                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2810                     int cellCountX = (int) grid.numColumns;                                              </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2811                     int cellCountY = (int) grid.numRows;                                                 </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2812                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2813                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat      </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2814                     long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +           </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2815                             lhs.cellY * cellCountX + lhs.cellX);                                         </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2816                     long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +           </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2817                             rhs.cellY * cellCountX + rhs.cellX);                                         </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2818                     return (int) (lr - rr);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2819                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2820             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2821         }                                                                                                </span>
<span  style="">2822                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2823         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2824                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2825             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2826                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2827                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2828                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2829                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2830                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2831                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2832                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2833             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2834             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2835         }                                                                                                </span>
<span  style="">2836                                                                                                          </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2837         private void bindWorkspaceItems(final Callbacks oldCallbacks,                                    </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2838                 final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2839                 final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                       </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2840                 final HashMap&lt;Long, FolderInfo&gt; folders,                                                 </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2841                 ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                             </span>
<span  style="">2842                                                                                                          </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2843             final boolean postOnMainThread = (deferredBindRunnables != null);                            </span>
<span  style="">2844                                                                                                          </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2845             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2846             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2847             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2848                 final int start = i;                                                                     </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2849                 final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                        </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2850                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2851                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2852                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2853                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2854                         if (callbacks != null) {                                                         </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2855                             callbacks.bindItems(workspaceItems, start, start+chunkSize,                  </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2856                                     false);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2857                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2858                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2859                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2860                 if (postOnMainThread) {                                                                  </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="">2861                     synchronized (deferredBindRunnables) {                                               </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2862                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2863                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2864                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2865                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2866                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2867             }                                                                                            </span>
<span  style="">2868                                                                                                          </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2869             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2870             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2871                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2872                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2873                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2874                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2875                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2876                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2877                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2878                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2879                 if (postOnMainThread) {                                                                  </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="">2880                     synchronized (deferredBindRunnables) {                                               </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2881                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2882                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2883                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2884                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2885                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2886             }                                                                                            </span>
<span  style="">2887                                                                                                          </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2888             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2889             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2890             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2891                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2892                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2893                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2894                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2895                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2896                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2897                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2898                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2899                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2900                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2901                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2902                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2903                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2904                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2905             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2906         }                                                                                                </span>
<span  style="">2907                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2908         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2909          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2910          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2911         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2912             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2913             Runnable r;                                                                                  </span>
<span  style="">2914                                                                                                          </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2915             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2916             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2917             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2918             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2919                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2920                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2921                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2922             }                                                                                            </span>
<span  style="">2923                                                                                                          </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2924             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2925             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2926             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2927                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2928             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2929             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2930             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2931             synchronized (sBgLock) {                                                                     </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2932                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2933                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2934                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2935                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2936                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2937             }                                                                                            </span>
<span  style="">2938                                                                                                          </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2939             final boolean isLoadingSynchronously =                                                       </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2940                     synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                               </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2941             int currScreen = isLoadingSynchronously ? synchronizeBindPage :                              </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2942                 oldCallbacks.getCurrentWorkspaceScreen();                                                </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2943             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2944                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2945                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2946             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2947             final int currentScreen = currScreen;                                                        </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2948             final long currentScreenId = currentScreen &lt; 0                                               </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2949                     ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                           </span>
<span  style="">2950                                                                                                          </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2951             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2952             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2953             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span  style="">2954                                                                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2955             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2956             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2957             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2958             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2959                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2960             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                           </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2961                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2962             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2963             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span  style="">2964                                                                                                          </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2965             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,          </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2966                     otherWorkspaceItems);                                                                </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2967             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                      </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2968                     otherAppWidgets);                                                                    </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2969             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                   </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2970                     otherFolders);                                                                       </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2971             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2972             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span  style="">2973                                                                                                          </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2974             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2975             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2976                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2977                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2978                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2979                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2980                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2981                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2982             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2983             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span  style="">2984                                                                                                          </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2985             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span  style="">2986                                                                                                          </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2987             // Load items on the current page                                                            </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2988             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                   </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2989                     currentFolders, null);                                                               </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2990             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2991                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2992                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2993                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2994                         if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {      </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2995                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2996                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2997                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2998                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2999                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3000             }                                                                                            </span>
<span  style="">3001                                                                                                          </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">3002             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">3003             // work until after the first render)                                                        </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">3004             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">3005                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3006             }                                                                                            </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">3007             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,         </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">3008                     (isLoadingSynchronously ? mDeferredBindRunnables : null));                           </span>
<span  style="">3009                                                                                                          </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">3010             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">3011             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3012                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">3013                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">3014                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">3015                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3016                     }                                                                                    </span>
<span  style="">3017                                                                                                          </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">3018                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3019                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">3020                         Log.d(TAG, &quot;bound workspace in &quot;                                                 </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">3021                             + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3022                     }                                                                                    </span>
<span  style="">3023                                                                                                          </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">3024                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3025                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3026             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">3027             if (isLoadingSynchronously) {                                                                </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">3028                 synchronized (mDeferredBindRunnables) {                                                  </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">3029                     mDeferredBindRunnables.add(r);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3030                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3031             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">3032                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3033             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3034         }                                                                                                </span>
<span  style="">3035                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">3036         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3037             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">3038                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3039             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">3040             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">3041                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">3042                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">3043                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3044                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3045                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">3046                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3047                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3048             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">3049                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3050             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3051         }                                                                                                </span>
<span  style="">3052                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">3053         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">3054             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">3055             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">3056                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">3057                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3058                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3059             }                                                                                            </span>
<span  style="">3060                                                                                                          </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">3061             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">3062             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">3063             final ArrayList&lt;AppInfo&gt; list                                                                </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">3064                     = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                  </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">3065             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3066                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">3067                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">3068                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">3069                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">3070                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3071                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3072                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">3073                         Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                   </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">3074                                 + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3075                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3076                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3077             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">3078             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">3079             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">3080                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3081             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">3082                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3083             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3084         }                                                                                                </span>
<span  style="">3085                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">3086         private void loadAllApps() {                                                                     </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">3087             final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span  style="">3088                                                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">3089             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">3090             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">3091                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">3092                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3093                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3094             }                                                                                            </span>
<span  style="">3095                                                                                                          </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">3096             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">3097             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span  style="">3098                                                                                                          </span>
<span class="-3689765283860688946" onmouseenter="enter('-3689765283860688946');" onmouseout="out('-3689765283860688946');" style="">3099             final List&lt;UserHandleCompat&gt; profiles = mUserManager.getUserProfiles();                      </span>
<span  style="">3100                                                                                                          </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">3101             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">3102             mBgAllAppsList.clear();                                                                      </span>
<span class="-2262518428251923925" onmouseenter="enter('-2262518428251923925');" onmouseout="out('-2262518428251923925');" style="">3103             for (UserHandleCompat user : profiles) {                                                     </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">3104                 // Query for the set of apps                                                             </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">3105                 final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                     </span>
<span class="2012422809707549193" onmouseenter="enter('2012422809707549193');" onmouseout="out('2012422809707549193');" style="">3106                 List&lt;LauncherActivityInfoCompat&gt; apps = mLauncherApps.getActivityList(null, user);       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3107                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="2295985568720272905" onmouseenter="enter('2295985568720272905');" onmouseout="out('2295985568720272905');" style="">3108                     Log.d(TAG, &quot;getActivityList took &quot;                                                   </span>
<span class="-4615420342619003975" onmouseenter="enter('-4615420342619003975');" onmouseout="out('-4615420342619003975');" style="">3109                             + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms for user &quot; + user);             </span>
<span class="-305887566992077245" onmouseenter="enter('-305887566992077245');" onmouseout="out('-305887566992077245');" style="">3110                     Log.d(TAG, &quot;getActivityList got &quot; + apps.size() + &quot; apps for user &quot; + user);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3111                 }                                                                                        </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">3112                 // Fail if we don&#x27;t have any apps                                                        </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">3113                 if (apps == null || apps.isEmpty()) {                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3114                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3115                 }                                                                                        </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">3116                 // Sort the applications by name                                                         </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">3117                 final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                    </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">3118                 Collections.sort(apps,                                                                   </span>
<span class="-5419021632247745878" onmouseenter="enter('-5419021632247745878');" onmouseout="out('-5419021632247745878');" style="">3119                         new LauncherModel.ShortcutNameComparator(mLabelCache));                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3120                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">3121                     Log.d(TAG, &quot;sort took &quot;                                                              </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">3122                             + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3123                 }                                                                                        </span>
<span  style="">3124                                                                                                          </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">3125                 // Create the ApplicationInfos                                                           </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">3126                 for (int i = 0; i &lt; apps.size(); i++) {                                                  </span>
<span class="236419152399396874" onmouseenter="enter('236419152399396874');" onmouseout="out('236419152399396874');" style="">3127                     LauncherActivityInfoCompat app = apps.get(i);                                        </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">3128                     // This builds the icon bitmaps.                                                     </span>
<span class="-5742259461869454243" onmouseenter="enter('-5742259461869454243');" onmouseout="out('-5742259461869454243');" style="">3129                     mBgAllAppsList.add(new AppInfo(mContext, app, user, mIconCache, mLabelCache));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3130                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3131             }                                                                                            </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">3132             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">3133             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">3134             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span  style="">3135                                                                                                          </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">3136             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3137             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3138                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">3139                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">3140                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">3141                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">3142                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3143                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">3144                             Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                             </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">3145                                 + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3146                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3147                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">3148                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3149                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3150                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3151             });                                                                                          </span>
<span  style="">3152                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3153             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">3154                 Log.d(TAG, &quot;Icons processed in &quot;                                                         </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">3155                         + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3156             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3157         }                                                                                                </span>
<span  style="">3158                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3159         public void dumpState() {                                                                        </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">3160             synchronized (sBgLock) {                                                                     </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">3161                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">3162                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">3163                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">3164                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">3165                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3166             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3167         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3168     }                                                                                                    </span>
<span  style="">3169                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">3170     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">3171         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3172     }                                                                                                    </span>
<span  style="">3173                                                                                                          </span>
<span class="-2155382700972431684" onmouseenter="enter('-2155382700972431684');" onmouseout="out('-2155382700972431684');" style="">3174     private class AppsAvailabilityCheck extends BroadcastReceiver {                                      </span>
<span  style="">3175                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3176         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">3177         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">3178             synchronized (sBgLock) {                                                                     </span>
<span class="4353137230087495395" onmouseenter="enter('4353137230087495395');" onmouseout="out('4353137230087495395');" style="">3179                 final LauncherAppsCompat launcherApps = LauncherAppsCompat                               </span>
<span class="7982344973763927300" onmouseenter="enter('7982344973763927300');" onmouseout="out('7982344973763927300');" style="">3180                         .getInstance(mApp.getContext());                                                 </span>
<span class="-4787354412045768116" onmouseenter="enter('-4787354412045768116');" onmouseout="out('-4787354412045768116');" style="">3181                 ArrayList&lt;String&gt; packagesRemoved;                                                       </span>
<span class="4244873154676657454" onmouseenter="enter('4244873154676657454');" onmouseout="out('4244873154676657454');" style="">3182                 for (Entry&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; entry : sPendingPackages.entrySet()) {     </span>
<span class="5975107845149456463" onmouseenter="enter('5975107845149456463');" onmouseout="out('5975107845149456463');" style="">3183                     UserHandleCompat user = entry.getKey();                                              </span>
<span class="-667022728008343360" onmouseenter="enter('-667022728008343360');" onmouseout="out('-667022728008343360');" style="">3184                     packagesRemoved = new ArrayList&lt;String&gt;();                                           </span>
<span class="1474457728386669675" onmouseenter="enter('1474457728386669675');" onmouseout="out('1474457728386669675');" style="">3185                     for (String pkg : entry.getValue()) {                                                </span>
<span class="-3589045475490406733" onmouseenter="enter('-3589045475490406733');" onmouseout="out('-3589045475490406733');" style="">3186                         if (!launcherApps.isPackageEnabledForProfile(pkg, user)) {                       </span>
<span class="-1955449888814909626" onmouseenter="enter('-1955449888814909626');" onmouseout="out('-1955449888814909626');" style="">3187                             Launcher.addDumpLog(TAG, &quot;Package not found: &quot; + pkg, true);                 </span>
<span class="-7762323097919758551" onmouseenter="enter('-7762323097919758551');" onmouseout="out('-7762323097919758551');" style="">3188                             packagesRemoved.add(pkg);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3189                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3190                     }                                                                                    </span>
<span class="-1545108570433514025" onmouseenter="enter('-1545108570433514025');" onmouseout="out('-1545108570433514025');" style="">3191                     if (!packagesRemoved.isEmpty()) {                                                    </span>
<span class="7608410434352572746" onmouseenter="enter('7608410434352572746');" onmouseout="out('7608410434352572746');" style="">3192                         enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE,       </span>
<span class="-7140992629790434736" onmouseenter="enter('-7140992629790434736');" onmouseout="out('-7140992629790434736');" style="">3193                                 packagesRemoved.toArray(new String[packagesRemoved.size()]), user));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3194                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3195                 }                                                                                        </span>
<span class="483878637633217436" onmouseenter="enter('483878637633217436');" onmouseout="out('483878637633217436');" style="">3196                 sPendingPackages.clear();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3197             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3198         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3199     }                                                                                                    </span>
<span  style="">3200                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3201     /**                                                                                                  </span>
<span class="-4757889214551148663" onmouseenter="enter('-4757889214551148663');" onmouseout="out('-4757889214551148663');" style="">3202      * Workaround to re-check unrestored items, in-case they were installed but the Package-ADD          </span>
<span class="-7981308590935764825" onmouseenter="enter('-7981308590935764825');" onmouseout="out('-7981308590935764825');" style="">3203      * runnable was missed by the launcher.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3204      */                                                                                                  </span>
<span class="-1837604298505960192" onmouseenter="enter('-1837604298505960192');" onmouseout="out('-1837604298505960192');" style="">3205     public void recheckRestoredItems(final Context context) {                                            </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">3206         Runnable r = new Runnable() {                                                                    </span>
<span  style="">3207                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3208             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3209             public void run() {                                                                          </span>
<span class="4897732594040868406" onmouseenter="enter('4897732594040868406');" onmouseout="out('4897732594040868406');" style="">3210                 LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);               </span>
<span class="2615938583470046073" onmouseenter="enter('2615938583470046073');" onmouseout="out('2615938583470046073');" style="">3211                 HashSet&lt;String&gt; installedPackages = new HashSet&lt;String&gt;();                               </span>
<span class="-7713836903288582020" onmouseenter="enter('-7713836903288582020');" onmouseout="out('-7713836903288582020');" style="">3212                 UserHandleCompat user = UserHandleCompat.myUserHandle();                                 </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">3213                 synchronized(sBgLock) {                                                                  </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="">3214                     for (ItemInfo info : sBgItemsIdMap.values()) {                                       </span>
<span class="3613572740963864398" onmouseenter="enter('3613572740963864398');" onmouseout="out('3613572740963864398');" style="">3215                         if (info instanceof ShortcutInfo) {                                              </span>
<span class="-639177275705060315" onmouseenter="enter('-639177275705060315');" onmouseout="out('-639177275705060315');" style="">3216                             ShortcutInfo si = (ShortcutInfo) info;                                       </span>
<span class="7536634611316201502" onmouseenter="enter('7536634611316201502');" onmouseout="out('7536634611316201502');" style="">3217                             if (si.isPromise() &amp;&amp; si.getTargetComponent() != null                        </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="">3218                                     &amp;&amp; launcherApps.isPackageEnabledForProfile(                          </span>
<span class="8387940407390797707" onmouseenter="enter('8387940407390797707');" onmouseout="out('8387940407390797707');" style="">3219                                             si.getTargetComponent().getPackageName(), user)) {           </span>
<span class="8027032983651882823" onmouseenter="enter('8027032983651882823');" onmouseout="out('8027032983651882823');" style="">3220                                 installedPackages.add(si.getTargetComponent().getPackageName());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3221                             }                                                                            </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style="">3222                         } else if (info instanceof LauncherAppWidgetInfo) {                              </span>
<span class="-3531080121586908110" onmouseenter="enter('-3531080121586908110');" onmouseout="out('-3531080121586908110');" style="">3223                             LauncherAppWidgetInfo widget = (LauncherAppWidgetInfo) info;                 </span>
<span class="-6148029265216954679" onmouseenter="enter('-6148029265216954679');" onmouseout="out('-6148029265216954679');" style="">3224                             if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY)     </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="">3225                                     &amp;&amp; launcherApps.isPackageEnabledForProfile(                          </span>
<span class="4286562368203116307" onmouseenter="enter('4286562368203116307');" onmouseout="out('4286562368203116307');" style="">3226                                             widget.providerName.getPackageName(), user)) {               </span>
<span class="-5968826008275428630" onmouseenter="enter('-5968826008275428630');" onmouseout="out('-5968826008275428630');" style="">3227                                 installedPackages.add(widget.providerName.getPackageName());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3228                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3229                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3230                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3231                 }                                                                                        </span>
<span  style="">3232                                                                                                          </span>
<span class="-8755538775344321333" onmouseenter="enter('-8755538775344321333');" onmouseout="out('-8755538775344321333');" style="">3233                 if (!installedPackages.isEmpty()) {                                                      </span>
<span class="1551205659826155261" onmouseenter="enter('1551205659826155261');" onmouseout="out('1551205659826155261');" style="">3234                     final ArrayList&lt;AppInfo&gt; restoredApps = new ArrayList&lt;AppInfo&gt;();                    </span>
<span class="-3020018355032355950" onmouseenter="enter('-3020018355032355950');" onmouseout="out('-3020018355032355950');" style="">3235                     for (String pkg : installedPackages) {                                               </span>
<span class="-1472387192310078173" onmouseenter="enter('-1472387192310078173');" onmouseout="out('-1472387192310078173');" style="">3236                         for (LauncherActivityInfoCompat info : launcherApps.getActivityList(pkg, user)) {</span>
<span class="-4626697810297530275" onmouseenter="enter('-4626697810297530275');" onmouseout="out('-4626697810297530275');" style="">3237                             restoredApps.add(new AppInfo(context, info, user, mIconCache, null));        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3238                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3239                     }                                                                                    </span>
<span  style="">3240                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">3241                     final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;            </span>
<span class="838327603557009686" onmouseenter="enter('838327603557009686');" onmouseout="out('838327603557009686');" style="">3242                     if (!restoredApps.isEmpty()) {                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3243                         mHandler.post(new Runnable() {                                                   </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3244                             public void run() {                                                          </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3245                                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;             </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3246                                 if (callbacks == cb &amp;&amp; cb != null) {                                     </span>
<span class="-7685400884791180573" onmouseenter="enter('-7685400884791180573');" onmouseout="out('-7685400884791180573');" style="">3247                                     callbacks.bindAppsRestored(restoredApps);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3248                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3249                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3250                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3251                     }                                                                                    </span>
<span  style="">3252                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3253                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3254             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3255         };                                                                                               </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style="">3256         sWorker.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3257     }                                                                                                    </span>
<span  style="">3258                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">3259     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">3260         int mOp;                                                                                         </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">3261         String[] mPackages;                                                                              </span>
<span class="2923888301096709084" onmouseenter="enter('2923888301096709084');" onmouseout="out('2923888301096709084');" style="">3262         UserHandleCompat mUser;                                                                          </span>
<span  style="">3263                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">3264         public static final int OP_NONE = 0;                                                             </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">3265         public static final int OP_ADD = 1;                                                              </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">3266         public static final int OP_UPDATE = 2;                                                           </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">3267         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">3268         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">3269                                                                                                          </span>
<span  style="">3270                                                                                                          </span>
<span class="3202497835561249087" onmouseenter="enter('3202497835561249087');" onmouseout="out('3202497835561249087');" style="">3271         public PackageUpdatedTask(int op, String[] packages, UserHandleCompat user) {                    </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">3272             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">3273             mPackages = packages;                                                                        </span>
<span class="2953270128049103408" onmouseenter="enter('2953270128049103408');" onmouseout="out('2953270128049103408');" style="">3274             mUser = user;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3275         }                                                                                                </span>
<span  style="">3276                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3277         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">3278             final Context context = mApp.getContext();                                                   </span>
<span  style="">3279                                                                                                          </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">3280             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">3281             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">3282             switch (mOp) {                                                                               </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">3283                 case OP_ADD:                                                                             </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3284                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">3285                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);         </span>
<span class="6575289823687229863" onmouseenter="enter('6575289823687229863');" onmouseout="out('6575289823687229863');" style="">3286                         mIconCache.remove(packages[i], mUser);                                           </span>
<span class="-4330949928576769866" onmouseenter="enter('-4330949928576769866');" onmouseout="out('-4330949928576769866');" style="">3287                         mBgAllAppsList.addPackage(context, packages[i], mUser);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3288                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3289                     break;                                                                               </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">3290                 case OP_UPDATE:                                                                          </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3291                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">3292                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);      </span>
<span class="4552988343352109939" onmouseenter="enter('4552988343352109939');" onmouseout="out('4552988343352109939');" style="">3293                         mBgAllAppsList.updatePackage(context, packages[i], mUser);                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3294                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3295                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3296                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3297                     break;                                                                               </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">3298                 case OP_REMOVE:                                                                          </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">3299                 case OP_UNAVAILABLE:                                                                     </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3300                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">3301                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);      </span>
<span class="-4221302437709808804" onmouseenter="enter('-4221302437709808804');" onmouseout="out('-4221302437709808804');" style="">3302                         mBgAllAppsList.removePackage(packages[i], mUser);                                </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3303                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3304                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3305                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3306                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3307             }                                                                                            </span>
<span  style="">3308                                                                                                          </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">3309             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">3310             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">3311             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span  style="">3312                                                                                                          </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">3313             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">3314                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">3315                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3316             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">3317             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">3318                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">3319                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3320             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">3321             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">3322                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">3323                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3324             }                                                                                            </span>
<span  style="">3325                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">3326             final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                    </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">3327             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">3328                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3329                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3330             }                                                                                            </span>
<span  style="">3331                                                                                                          </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">3332             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">3333                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3334                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="-6277587630605553211" onmouseenter="enter('-6277587630605553211');" onmouseout="out('-6277587630605553211');" style="">3335                 if (!LauncherAppState.isDisableAllApps()) {                                              </span>
<span class="4785144545835380546" onmouseenter="enter('4785144545835380546');" onmouseout="out('4785144545835380546');" style="">3336                     addAndBindAddedApps(context, new ArrayList&lt;ItemInfo&gt;(), cb, added);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3337                 } else {                                                                                 </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">3338                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="620263930069644182" onmouseenter="enter('620263930069644182');" onmouseout="out('620263930069644182');" style="">3339                     addAndBindAddedApps(context, addedInfos, cb, added);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3340                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3341             }                                                                                            </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">3342             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">3343                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span  style="">3344                                                                                                          </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">3345                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">3346                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">3347                     ArrayList&lt;ItemInfo&gt; infos =                                                          </span>
<span class="4076745085710284833" onmouseenter="enter('4076745085710284833');" onmouseout="out('4076745085710284833');" style="">3348                             getItemInfoForComponentName(a.componentName, mUser);                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3349                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">3350                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3351                             ShortcutInfo info = (ShortcutInfo) i;                                        </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">3352                             info.title = a.title.toString();                                             </span>
<span class="911685269403024085" onmouseenter="enter('911685269403024085');" onmouseout="out('911685269403024085');" style="">3353                             info.contentDescription = a.contentDescription;                              </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3354                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3355                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3356                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3357                 }                                                                                        </span>
<span  style="">3358                                                                                                          </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3359                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3360                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3361                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3362                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">3363                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3364                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3365                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3366                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3367             }                                                                                            </span>
<span  style="">3368                                                                                                          </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">3369             final ArrayList&lt;String&gt; removedPackageNames =                                                </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">3370                     new ArrayList&lt;String&gt;();                                                             </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">3371             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">3372                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">3373                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">3374             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">3375                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">3376                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3377                 for (int i=0; i&lt;N; i++) {                                                                </span>
<span class="1189279971614907536" onmouseenter="enter('1189279971614907536');" onmouseout="out('1189279971614907536');" style="">3378                     if (isPackageDisabled(context, packages[i], mUser)) {                                </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">3379                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3380                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3381                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3382             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">3383             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">3384             for (String pn : removedPackageNames) {                                                      </span>
<span class="6482411304432401961" onmouseenter="enter('6482411304432401961');" onmouseout="out('6482411304432401961');" style="">3385                 deletePackageFromDatabase(context, pn, mUser);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3386             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">3387             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">3388             for (AppInfo a : removedApps) {                                                              </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="">3389                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);         </span>
<span class="7293231507608058112" onmouseenter="enter('7293231507608058112');" onmouseout="out('7293231507608058112');" style="">3390                 deleteItemsFromDatabase(context, infos);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3391             }                                                                                            </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">3392             if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                              </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">3393                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">3394                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">3395                 SharedPreferences sp =                                                                   </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">3396                         context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                       </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">3397                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">3398                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3399                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3400                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3401                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3402                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-4641714223338514236" onmouseenter="enter('-4641714223338514236');" onmouseout="out('-4641714223338514236');" style="">3403                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps, mUser);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3404                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3405                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3406                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3407             }                                                                                            </span>
<span  style="">3408                                                                                                          </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">3409             final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="">3410                     getSortedWidgetsAndShortcuts(context);                                               </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3411             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3412                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3413                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3414                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3415                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">3416                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3417                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3418                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3419             });                                                                                          </span>
<span  style="">3420                                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">3421             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3422             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3423                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3424                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3425                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">3426                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3427                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3428                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3429             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3430         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3431     }                                                                                                    </span>
<span  style="">3432                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">3433     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">3434     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3435         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">3436         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="3637822346102420347" onmouseenter="enter('3637822346102420347');" onmouseout="out('3637822346102420347');" style="">3437         widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());       </span>
<span  style="">3438                                                                                                          </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">3439         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">3440         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="3220762690300374865" onmouseenter="enter('3220762690300374865');" onmouseout="out('3220762690300374865');" style="">3441         Collections.sort(widgetsAndShortcuts, new WidgetAndShortcutNameComparator(context));             </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">3442         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3443     }                                                                                                    </span>
<span  style="">3444                                                                                                          </span>
<span class="-7287747070935657411" onmouseenter="enter('-7287747070935657411');" onmouseout="out('-7287747070935657411');" style="">3445     private static boolean isPackageDisabled(Context context, String packageName,                        </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3446             UserHandleCompat user) {                                                                     </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3447         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="2722752944691677150" onmouseenter="enter('2722752944691677150');" onmouseout="out('2722752944691677150');" style="">3448         return !launcherApps.isPackageEnabledForProfile(packageName, user);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3449     }                                                                                                    </span>
<span  style="">3450                                                                                                          </span>
<span class="5738691957451055953" onmouseenter="enter('5738691957451055953');" onmouseout="out('5738691957451055953');" style="">3451     public static boolean isValidPackageActivity(Context context, ComponentName cn,                      </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3452             UserHandleCompat user) {                                                                     </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">3453         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3454             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3455         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3456         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="-6788056339565196353" onmouseenter="enter('-6788056339565196353');" onmouseout="out('-6788056339565196353');" style="">3457         if (!launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user)) {                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3458             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3459         }                                                                                                </span>
<span class="6138596583040601663" onmouseenter="enter('6138596583040601663');" onmouseout="out('6138596583040601663');" style="">3460         return launcherApps.isActivityEnabledForProfile(cn, user);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3461     }                                                                                                    </span>
<span  style="">3462                                                                                                          </span>
<span class="5839979877555451943" onmouseenter="enter('5839979877555451943');" onmouseout="out('5839979877555451943');" style="">3463     public static boolean isValidPackage(Context context, String packageName,                            </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3464             UserHandleCompat user) {                                                                     </span>
<span class="2797777100746091358" onmouseenter="enter('2797777100746091358');" onmouseout="out('2797777100746091358');" style="">3465         if (packageName == null) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3466             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3467         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3468         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="7814688882071205012" onmouseenter="enter('7814688882071205012');" onmouseout="out('7814688882071205012');" style="">3469         return launcherApps.isPackageEnabledForProfile(packageName, user);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3470     }                                                                                                    </span>
<span  style="">3471                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3472     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">3473      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">3474      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3475      */                                                                                                  </span>
<span class="6864587742410665601" onmouseenter="enter('6864587742410665601');" onmouseout="out('6864587742410665601');" style="">3476     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent,                </span>
<span class="-9038086405553223291" onmouseenter="enter('-9038086405553223291');" onmouseout="out('-9038086405553223291');" style="">3477             int promiseType) {                                                                           </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3478         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3479         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="4581768130100169027" onmouseenter="enter('4581768130100169027');" onmouseout="out('4581768130100169027');" style="">3480         mIconCache.getTitleAndIcon(info, intent, info.user, true);                                       </span>
<span  style="">3481                                                                                                          </span>
<span class="-7011074266974647989" onmouseenter="enter('-7011074266974647989');" onmouseout="out('-7011074266974647989');" style="">3482         if ((promiseType &amp; ShortcutInfo.FLAG_RESTORED_ICON) != 0) {                                      </span>
<span class="-8984449213491193878" onmouseenter="enter('-8984449213491193878');" onmouseout="out('-8984449213491193878');" style="">3483             String title = (cursor != null) ? cursor.getString(titleIndex) : null;                       </span>
<span class="-5841612334834081385" onmouseenter="enter('-5841612334834081385');" onmouseout="out('-5841612334834081385');" style="">3484             if (!TextUtils.isEmpty(title)) {                                                             </span>
<span class="-2613617994889375298" onmouseenter="enter('-2613617994889375298');" onmouseout="out('-2613617994889375298');" style="">3485                 info.title = title;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3486             }                                                                                            </span>
<span class="-5174755841373748942" onmouseenter="enter('-5174755841373748942');" onmouseout="out('-5174755841373748942');" style="">3487             info.status = ShortcutInfo.FLAG_RESTORED_ICON;                                               </span>
<span class="2528235782114549087" onmouseenter="enter('2528235782114549087');" onmouseout="out('2528235782114549087');" style="">3488         } else if  ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {                            </span>
<span class="-7717414875603328452" onmouseenter="enter('-7717414875603328452');" onmouseout="out('-7717414875603328452');" style="">3489             if (TextUtils.isEmpty(info.title)) {                                                         </span>
<span class="-5806908871812941257" onmouseenter="enter('-5806908871812941257');" onmouseout="out('-5806908871812941257');" style="">3490                 info.title = (cursor != null) ? cursor.getString(titleIndex) : &quot;&quot;;                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3491             }                                                                                            </span>
<span class="-4388547064813731487" onmouseenter="enter('-4388547064813731487');" onmouseout="out('-4388547064813731487');" style="">3492             info.status = ShortcutInfo.FLAG_AUTOINTALL_ICON;                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3493         } else {                                                                                         </span>
<span class="5717376002108262372" onmouseenter="enter('5717376002108262372');" onmouseout="out('5717376002108262372');" style="">3494             throw new InvalidParameterException(&quot;Invalid restoreType &quot; + promiseType);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3495         }                                                                                                </span>
<span  style="">3496                                                                                                          </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3497         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3498                 info.title.toString(), info.user);                                                       </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3499         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3783926904025262102" onmouseenter="enter('-3783926904025262102');" onmouseout="out('-3783926904025262102');" style="">3500         info.promisedIntent = intent;                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3501         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3502     }                                                                                                    </span>
<span  style="">3503                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3504     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">3505      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">3506      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3507      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">3508     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3509         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-3881801991978262069" onmouseenter="enter('-3881801991978262069');" onmouseout="out('-3881801991978262069');" style="">3510         return getMarketIntent(componentName.getPackageName());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3511     }                                                                                                    </span>
<span  style="">3512                                                                                                          </span>
<span class="-3260913833937220020" onmouseenter="enter('-3260913833937220020');" onmouseout="out('-3260913833937220020');" style="">3513     static Intent getMarketIntent(String packageName) {                                                  </span>
<span class="-9094317775268459694" onmouseenter="enter('-9094317775268459694');" onmouseout="out('-9094317775268459694');" style="">3514         return new Intent(Intent.ACTION_VIEW)                                                            </span>
<span class="273234347361851615" onmouseenter="enter('273234347361851615');" onmouseout="out('273234347361851615');" style="">3515             .setData(new Uri.Builder()                                                                   </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">3516                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">3517                 .authority(&quot;details&quot;)                                                                    </span>
<span class="6782694763028009203" onmouseenter="enter('6782694763028009203');" onmouseout="out('6782694763028009203');" style="">3518                 .appendQueryParameter(&quot;id&quot;, packageName)                                                 </span>
<span class="-5732724158529108102" onmouseenter="enter('-5732724158529108102');" onmouseout="out('-5732724158529108102');" style="">3519                 .build());                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3520     }                                                                                                    </span>
<span  style="">3521                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3522     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">3523      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">3524      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3525      */                                                                                                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="">3526     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                           </span>
<span class="6504255554925479471" onmouseenter="enter('6504255554925479471');" onmouseout="out('6504255554925479471');" style="">3527             UserHandleCompat user, Context context) {                                                    </span>
<span class="-7378868523772977866" onmouseenter="enter('-7378868523772977866');" onmouseout="out('-7378868523772977866');" style="">3528         return getShortcutInfo(manager, intent, user, context, null, -1, -1, null, false);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3529     }                                                                                                    </span>
<span  style="">3530                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3531     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">3532      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">3533      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">3534      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3535      */                                                                                                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="">3536     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                           </span>
<span class="-8761535452245299531" onmouseenter="enter('-8761535452245299531');" onmouseout="out('-8761535452245299531');" style="">3537             UserHandleCompat user, Context context, Cursor c, int iconIndex, int titleIndex,             </span>
<span class="3517019325264382616" onmouseenter="enter('3517019325264382616');" onmouseout="out('3517019325264382616');" style="">3538             HashMap&lt;Object, CharSequence&gt; labelCache, boolean allowMissingTarget) {                      </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">3539         if (user == null) {                                                                              </span>
<span class="6545168092911351889" onmouseenter="enter('6545168092911351889');" onmouseout="out('6545168092911351889');" style="">3540             Log.d(TAG, &quot;Null user found in getShortcutInfo&quot;);                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3541             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3542         }                                                                                                </span>
<span  style="">3543                                                                                                          </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3544         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-5224470428335408787" onmouseenter="enter('-5224470428335408787');" onmouseout="out('-5224470428335408787');" style="">3545         if (componentName == null) {                                                                     </span>
<span class="4371782537001302642" onmouseenter="enter('4371782537001302642');" onmouseout="out('4371782537001302642');" style="">3546             Log.d(TAG, &quot;Missing component found in getShortcutInfo: &quot; + componentName);                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3547             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3548         }                                                                                                </span>
<span  style="">3549                                                                                                          </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">3550         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">3551         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="6894377559056826774" onmouseenter="enter('6894377559056826774');" onmouseout="out('6894377559056826774');" style="">3552         newIntent.setComponent(componentName);                                                           </span>
<span class="-966571371435372555" onmouseenter="enter('-966571371435372555');" onmouseout="out('-966571371435372555');" style="">3553         LauncherActivityInfoCompat lai = mLauncherApps.resolveActivity(newIntent, user);                 </span>
<span class="6800790308293325816" onmouseenter="enter('6800790308293325816');" onmouseout="out('6800790308293325816');" style="">3554         if ((lai == null) &amp;&amp; !allowMissingTarget) {                                                      </span>
<span class="-2395110402435537171" onmouseenter="enter('-2395110402435537171');" onmouseout="out('-2395110402435537171');" style="">3555             Log.d(TAG, &quot;Missing activity found in getShortcutInfo: &quot; + componentName);                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3556             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3557         }                                                                                                </span>
<span  style="">3558                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3559         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3560                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">3561         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">3562         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">3563         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">3564         // have icons anyway.                                                                            </span>
<span class="-6777959075043703494" onmouseenter="enter('-6777959075043703494');" onmouseout="out('-6777959075043703494');" style="">3565         Bitmap icon = mIconCache.getIcon(componentName, lai, labelCache);                                </span>
<span  style="">3566                                                                                                          </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3567         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3568         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3569             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3570                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3571             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3572         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3573         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3574         if (icon == null) {                                                                              </span>
<span class="-1443979577510132687" onmouseenter="enter('-1443979577510132687');" onmouseout="out('-1443979577510132687');" style="">3575             icon = mIconCache.getDefaultIcon(user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3576             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3577         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3578         info.setIcon(icon);                                                                              </span>
<span  style="">3579                                                                                                          </span>
<span class="-7595242445841823644" onmouseenter="enter('-7595242445841823644');" onmouseout="out('-7595242445841823644');" style="">3580         // From the cache.                                                                               </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">3581         if (labelCache != null) {                                                                        </span>
<span class="3073733017601521903" onmouseenter="enter('3073733017601521903');" onmouseout="out('3073733017601521903');" style="">3582             info.title = labelCache.get(componentName);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3583         }                                                                                                </span>
<span  style="">3584                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">3585         // from the resource                                                                             </span>
<span class="6778614741206473497" onmouseenter="enter('6778614741206473497');" onmouseout="out('6778614741206473497');" style="">3586         if (info.title == null &amp;&amp; lai != null) {                                                         </span>
<span class="-4488945615052684527" onmouseenter="enter('-4488945615052684527');" onmouseout="out('-4488945615052684527');" style="">3587             info.title = lai.getLabel();                                                                 </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">3588             if (labelCache != null) {                                                                    </span>
<span class="-3170508962365680295" onmouseenter="enter('-3170508962365680295');" onmouseout="out('-3170508962365680295');" style="">3589                 labelCache.put(componentName, info.title);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3590             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3591         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">3592         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3593         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3594             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">3595                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3596             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3597         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">3598         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3599         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">3600             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3601         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3602         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-7567614667172676383" onmouseenter="enter('-7567614667172676383');" onmouseout="out('-7567614667172676383');" style="">3603         info.user = user;                                                                                </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3604         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3605                 info.title.toString(), info.user);                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3606         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3607     }                                                                                                    </span>
<span  style="">3608                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3609     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3610             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3611         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3612         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3613             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3614                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="-8411217647144645125" onmouseenter="enter('-8411217647144645125');" onmouseout="out('-8411217647144645125');" style="">3615                 ComponentName cn = info.getTargetComponent();                                            </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3616                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3617                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3618                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3619             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3620                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3621                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="-5499244430299718871" onmouseenter="enter('-5499244430299718871');" onmouseout="out('-5499244430299718871');" style="">3622                     ComponentName cn = s.getTargetComponent();                                           </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3623                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3624                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3625                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3626                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3627             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3628                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3629                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3630                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3631                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3632                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3633             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3634         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3635         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3636     }                                                                                                    </span>
<span  style="">3637                                                                                                          </span>
<span class="-6017059906416334391" onmouseenter="enter('-6017059906416334391');" onmouseout="out('-6017059906416334391');" style="">3638     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname,                   </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">3639             final UserHandleCompat user) {                                                               </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3640         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3641             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3642             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="5970365724964589884" onmouseenter="enter('5970365724964589884');" onmouseout="out('5970365724964589884');" style="">3643                 if (info.user == null) {                                                                 </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3644                     return cn.equals(cname);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3645                 } else {                                                                                 </span>
<span class="9080235702604787251" onmouseenter="enter('9080235702604787251');" onmouseout="out('9080235702604787251');" style="">3646                     return cn.equals(cname) &amp;&amp; info.user.equals(user);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3647                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3648             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3649         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3650         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3651     }                                                                                                    </span>
<span  style="">3652                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3653     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3654         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3655             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3656             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3657             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3658             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3659             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3660             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3661             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3662                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3663                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3664             }                                                                                            </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="">3665             // placeholder shortcuts get special treatment, let them through too.                        </span>
<span class="-8737155453802783041" onmouseenter="enter('-8737155453802783041');" onmouseout="out('-8737155453802783041');" style="">3666             if (info.isPromise()) {                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3667                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3668             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3669         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3670         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3671     }                                                                                                    </span>
<span  style="">3672                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3673     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3674      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3675      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3676     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3677             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3678             int titleIndex) {                                                                            </span>
<span  style="">3679                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3680         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3681         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="5882358276056228538" onmouseenter="enter('5882358276056228538');" onmouseout="out('5882358276056228538');" style="">3682         // Non-app shortcuts are only supported for current user.                                        </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3683         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3684         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="">3685                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3686         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="">3687                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3688         info.title = c.getString(titleIndex);                                                            </span>
<span  style="">3689                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3690         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3691         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3692         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3693             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3694             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3695             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3696             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3697             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3698             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3699                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3700                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3701                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3702                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3703                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3704                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3705             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3706                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3707             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3708             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3709             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3710                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3711             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3712             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3713             if (icon == null) {                                                                          </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3714                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3715                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3716             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3717             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3718         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3719             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3720             if (icon == null) {                                                                          </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3721                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3722                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3723                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3724             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3725                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3726             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3727             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3728         default:                                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3729             icon = mIconCache.getDefaultIcon(info.user);                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3730             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3731             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3732             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3733         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3734         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3735         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3736     }                                                                                                    </span>
<span  style="">3737                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3738     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3739         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3740         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3741         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3742             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3743                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3744         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3745         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3746         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3747             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3748                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3749         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3750             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3751         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3752     }                                                                                                    </span>
<span  style="">3753                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3754     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3755             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3756         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3757         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3758             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3759         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3760         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="">3761                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3762         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3763     }                                                                                                    </span>
<span  style="">3764                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3765     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3766      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3767      */                                                                                                  </span>
<span class="-8933877649522571458" onmouseenter="enter('-8933877649522571458');" onmouseout="out('-8933877649522571458');" style="">3768     static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                 </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3769             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3770         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3771             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3772         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3773             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3774                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3775             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3776         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3777         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3778     }                                                                                                    </span>
<span  style="">3779                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3780     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3781         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3782         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3783         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="">3784                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3785         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3786             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3787             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3788             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3789         }                                                                                                </span>
<span  style="">3790                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3791         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3792         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3793         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="">3794                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3795         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3796             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3797             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3798         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3799             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3800             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3801                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3802                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3803                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3804                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3805                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3806                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3807                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="2974405441716858047" onmouseenter="enter('2974405441716858047');" onmouseout="out('2974405441716858047');" style="">3808                             mIconCache.getFullResIcon(resources, id),                                    </span>
<span class="-7033093369240644837" onmouseenter="enter('-7033093369240644837');" onmouseout="out('-7033093369240644837');" style="">3809                             context);                                                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3810                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3811                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3812                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3813             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3814         }                                                                                                </span>
<span  style="">3815                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3816         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3817                                                                                                          </span>
<span class="2102380556199177801" onmouseenter="enter('2102380556199177801');" onmouseout="out('2102380556199177801');" style="">3818         // Only support intents for current user for now. Intents sent from other                        </span>
<span class="2194655253408912185" onmouseenter="enter('2194655253408912185');" onmouseout="out('2194655253408912185');" style="">3819         // users wouldn&#x27;t get here without intent forwarding anyway.                                     </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3820         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3821         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3822             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3823                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3824             } else {                                                                                     </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3825                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3826                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3827             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3828         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3829         info.setIcon(icon);                                                                              </span>
<span  style="">3830                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3831         info.title = name;                                                                               </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3832         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3833                 info.title.toString(), info.user);                                                       </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3834         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3835         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3836         info.iconResource = iconResource;                                                                </span>
<span  style="">3837                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3838         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3839     }                                                                                                    </span>
<span  style="">3840                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3841     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3842             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3843         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3844         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3845             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3846         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3847         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3848         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3849         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3850         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3851         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3852         // the app is on SD) then we can use that instead.                                               </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3853         if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                               </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3854             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3855             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3856         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3857         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3858     }                                                                                                    </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3859     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3860         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3861         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3862             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3863                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3864                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3865                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3866             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3867                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3868             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3869         } catch (Exception e) {                                                                          </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3870             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3871         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3872         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3873             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3874             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3875             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3876             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3877         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3878     }                                                                                                    </span>
<span  style="">3879                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3880     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3881      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3882      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3883      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3884     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3885         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3886         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3887         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3888             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3889             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3890             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3891         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3892         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3893     }                                                                                                    </span>
<span  style="">3894                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3895     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3896         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3897         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3898             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="3541515045662468306" onmouseenter="enter('3541515045662468306');" onmouseout="out('3541515045662468306');" style="">3899                 if (a.user.equals(b.user)) {                                                             </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">3900                     int result = collator.compare(a.title.toString().trim(),                             </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">3901                             b.title.toString().trim());                                                  </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3902                     if (result == 0) {                                                                   </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3903                         result = a.componentName.compareTo(b.componentName);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3904                     }                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3905                     return result;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3906                 } else {                                                                                 </span>
<span class="-4940624116090922199" onmouseenter="enter('-4940624116090922199');" onmouseout="out('-4940624116090922199');" style="">3907                     // TODO Need to figure out rules for sorting                                         </span>
<span class="-7580798058375972430" onmouseenter="enter('-7580798058375972430');" onmouseout="out('-7580798058375972430');" style="">3908                     // profiles, this puts work second.                                                  </span>
<span class="-437659129845370257" onmouseenter="enter('-437659129845370257');" onmouseout="out('-437659129845370257');" style="">3909                     return a.user.toString().compareTo(b.user.toString());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3910                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3911             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3912         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3913     }                                                                                                    </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">3914     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                  </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">3915             = new Comparator&lt;AppInfo&gt;() {                                                                </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3916         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">3917             if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                       </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">3918             if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                      </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3919             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3920         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3921     };                                                                                                   </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3922     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3923         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3924             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3925         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3926             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3927         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3928     }                                                                                                    </span>
<span class="-5604165961236567660" onmouseenter="enter('-5604165961236567660');" onmouseout="out('-5604165961236567660');" style="">3929     public static class ShortcutNameComparator implements Comparator&lt;LauncherActivityInfoCompat&gt; {       </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3930         private Collator mCollator;                                                                      </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3931         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3932         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3933             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3934             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3935         }                                                                                                </span>
<span class="3595266679393364065" onmouseenter="enter('3595266679393364065');" onmouseout="out('3595266679393364065');" style="">3936         ShortcutNameComparator(HashMap&lt;Object, CharSequence&gt; labelCache) {                               </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3937             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3938             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3939         }                                                                                                </span>
<span class="5300656659592950018" onmouseenter="enter('5300656659592950018');" onmouseout="out('5300656659592950018');" style="">3940         public final int compare(LauncherActivityInfoCompat a, LauncherActivityInfoCompat b) {           </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3941             String labelA, labelB;                                                                       </span>
<span class="3539590309650150575" onmouseenter="enter('3539590309650150575');" onmouseout="out('3539590309650150575');" style="">3942             ComponentName keyA = a.getComponentName();                                                   </span>
<span class="-674250356247748253" onmouseenter="enter('-674250356247748253');" onmouseout="out('-674250356247748253');" style="">3943             ComponentName keyB = b.getComponentName();                                                   </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3944             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-1058154863590772027" onmouseenter="enter('-1058154863590772027');" onmouseout="out('-1058154863590772027');" style="">3945                 labelA = mLabelCache.get(keyA).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3946             } else {                                                                                     </span>
<span class="8953753374571564594" onmouseenter="enter('8953753374571564594');" onmouseout="out('8953753374571564594');" style="">3947                 labelA = a.getLabel().toString().trim();                                                 </span>
<span  style="">3948                                                                                                          </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3949                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3950             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3951             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="267036364262288198" onmouseenter="enter('267036364262288198');" onmouseout="out('267036364262288198');" style="">3952                 labelB = mLabelCache.get(keyB).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3953             } else {                                                                                     </span>
<span class="-6332222509536632454" onmouseenter="enter('-6332222509536632454');" onmouseout="out('-6332222509536632454');" style="">3954                 labelB = b.getLabel().toString().trim();                                                 </span>
<span  style="">3955                                                                                                          </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3956                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3957             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3958             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3959         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3960     };                                                                                                   </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3961     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="9150498506085829362" onmouseenter="enter('9150498506085829362');" onmouseout="out('9150498506085829362');" style="">3962         private final AppWidgetManagerCompat mManager;                                                   </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="">3963         private final PackageManager mPackageManager;                                                    </span>
<span class="3147273048289991484" onmouseenter="enter('3147273048289991484');" onmouseout="out('3147273048289991484');" style="">3964         private final HashMap&lt;Object, String&gt; mLabelCache;                                               </span>
<span class="7734513056437222570" onmouseenter="enter('7734513056437222570');" onmouseout="out('7734513056437222570');" style="">3965         private final Collator mCollator;                                                                </span>
<span  style="">3966                                                                                                          </span>
<span class="-4227954493245511846" onmouseenter="enter('-4227954493245511846');" onmouseout="out('-4227954493245511846');" style="">3967         WidgetAndShortcutNameComparator(Context context) {                                               </span>
<span class="3481132346717467494" onmouseenter="enter('3481132346717467494');" onmouseout="out('3481132346717467494');" style="">3968             mManager = AppWidgetManagerCompat.getInstance(context);                                      </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="">3969             mPackageManager = context.getPackageManager();                                               </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3970             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3971             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3972         }                                                                                                </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3973         public final int compare(Object a, Object b) {                                                   </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3974             String labelA, labelB;                                                                       </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3975             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3976                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3977             } else {                                                                                     </span>
<span class="-9066745869396444524" onmouseenter="enter('-9066745869396444524');" onmouseout="out('-9066745869396444524');" style="">3978                 labelA = (a instanceof AppWidgetProviderInfo)                                            </span>
<span class="6558251807363396504" onmouseenter="enter('6558251807363396504');" onmouseout="out('6558251807363396504');" style="">3979                         ? mManager.loadLabel((AppWidgetProviderInfo) a)                                  </span>
<span class="-3214224842100508644" onmouseenter="enter('-3214224842100508644');" onmouseout="out('-3214224842100508644');" style="">3980                         : ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3981                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3982             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3983             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3984                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3985             } else {                                                                                     </span>
<span class="-1855040857913004459" onmouseenter="enter('-1855040857913004459');" onmouseout="out('-1855040857913004459');" style="">3986                 labelB = (b instanceof AppWidgetProviderInfo)                                            </span>
<span class="-6152525661787763086" onmouseenter="enter('-6152525661787763086');" onmouseout="out('-6152525661787763086');" style="">3987                         ? mManager.loadLabel((AppWidgetProviderInfo) b)                                  </span>
<span class="-7836999270960417422" onmouseenter="enter('-7836999270960417422');" onmouseout="out('-7836999270960417422');" style="">3988                         : ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3989                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3990             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3991             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3992         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3993     };                                                                                                   </span>
<span  style="">3994                                                                                                          </span>
<span class="9138636756014527253" onmouseenter="enter('9138636756014527253');" onmouseout="out('9138636756014527253');" style="">3995     static boolean isValidProvider(AppWidgetProviderInfo provider) {                                     </span>
<span class="2022925387876031232" onmouseenter="enter('2022925387876031232');" onmouseout="out('2022925387876031232');" style="">3996         return (provider != null) &amp;&amp; (provider.provider != null)                                         </span>
<span class="-279029610180406352" onmouseenter="enter('-279029610180406352');" onmouseout="out('-279029610180406352');" style="">3997                 &amp;&amp; (provider.provider.getPackageName() != null);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3998     }                                                                                                    </span>
<span  style="">3999                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">4000     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">4001         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">4002         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">4003         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">4004         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">4005         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">4006         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">4007             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4008         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">4009             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4010         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4011     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4012 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  22 import android.content.BroadcastReceiver;                                                                </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  23 import android.content.ComponentName;                                                                    </span>
<span class="5843991090186771909" onmouseenter="enter('5843991090186771909');" onmouseout="out('5843991090186771909');" style="">  24 import android.content.ContentProviderClient;                                                            </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  25 import android.content.ContentProviderOperation;                                                         </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  26 import android.content.ContentResolver;                                                                  </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  27 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  29 import android.content.Intent;                                                                           </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  30 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  31 import android.content.IntentFilter;                                                                     </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  32 import android.content.SharedPreferences;                                                                </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  33 import android.content.pm.PackageManager;                                                                </span>
<span class="-7427681121873781918" onmouseenter="enter('-7427681121873781918');" onmouseout="out('-7427681121873781918');" style="">  34 import android.content.pm.ProviderInfo;                                                                  </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  35 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  36 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  37 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  38 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  39 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  40 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  41 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  42 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  43 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  44 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  45 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  46 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  47 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  48 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  49 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  50 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  51 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  52 import android.util.Pair;                                                                                </span>
<span  style="">  53                                                                                                          </span>
<span class="-2301578055393860706" onmouseenter="enter('-2301578055393860706');" onmouseout="out('-2301578055393860706');" style="">  54 import com.android.launcher3.compat.AppWidgetManagerCompat;                                              </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  55 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  56 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="-6378403157506113444" onmouseenter="enter('-6378403157506113444');" onmouseout="out('-6378403157506113444');" style="">  57 import com.android.launcher3.compat.PackageInstallerCompat;                                              </span>
<span class="-9185808437279523438" onmouseenter="enter('-9185808437279523438');" onmouseout="out('-9185808437279523438');" style="">  58 import com.android.launcher3.compat.PackageInstallerCompat.PackageInstallInfo;                           </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  59 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  60 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span  style="">  61                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  62 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  63 import java.net.URISyntaxException;                                                                      </span>
<span class="4163694070296964880" onmouseenter="enter('4163694070296964880');" onmouseout="out('4163694070296964880');" style="">  64 import java.security.InvalidParameterException;                                                          </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  65 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  66 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  67 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  68 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  69 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  70 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  71 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  72 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  73 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  74 import java.util.List;                                                                                   </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  75 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  76 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  77 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  78 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  79                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  80 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  81  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  82  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  83  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  84  */                                                                                                      </span>
<span class="-2442101869408899034" onmouseenter="enter('-2442101869408899034');" onmouseout="out('-2442101869408899034');" style="">  85 public class LauncherModel extends BroadcastReceiver                                                     </span>
<span class="-6161550071310903350" onmouseenter="enter('-6161550071310903350');" onmouseout="out('-6161550071310903350');" style="">  86         implements LauncherAppsCompat.OnAppsChangedCallbackCompat {                                      </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  87     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span class="-5037112122408598239" onmouseenter="enter('-5037112122408598239');" onmouseout="out('-5037112122408598239');" style="">  88     private static final boolean DEBUG_RECEIVER = false;                                                 </span>
<span class="-4012347986936200510" onmouseenter="enter('-4012347986936200510');" onmouseout="out('-4012347986936200510');" style="">  89     private static final boolean REMOVE_UNRESTORED_ICONS = true;                                         </span>
<span  style="">  90                                                                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  91     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  92                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  93     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  94     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  95     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  96     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  97     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  98     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style="">  99                                                                                                          </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style=""> 100     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style=""> 101     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style=""> 102                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style=""> 103     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style=""> 104     private final boolean mOldContentProviderExists;                                                     </span>
<span  style=""> 105                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style=""> 106     private final LauncherAppState mApp;                                                                 </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style=""> 107     private final Object mLock = new Object();                                                           </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style=""> 108     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 109     private LoaderTask mLoaderTask;                                                                      </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 110     private boolean mIsLoaderTaskRunning;                                                                </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 111     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style=""> 112                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 113     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 114     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 115     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 116     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style=""> 117                                                                                                          </span>
<span class="5026118005036723308" onmouseenter="enter('5026118005036723308');" onmouseout="out('5026118005036723308');" style=""> 118     private static final String MIGRATE_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 120     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 121     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 122         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 124     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 125                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 126     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 127     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 128     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 129     private boolean mWorkspaceLoaded;                                                                    </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 130     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 131                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 132     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 133     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 134     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 135     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 136     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 137                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 138     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 139                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 140     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 141     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 142                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 143     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 144     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 145     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 146     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 147     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 148                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 149     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 150     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 151     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 152                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 153     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 154     //       created by LauncherModel that are directly on the home screen (however, no widgets or       </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 155     //       shortcuts within folders).                                                                  </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 156     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 157                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 158     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 159     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                        </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 160         new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                          </span>
<span  style=""> 161                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 162     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 163     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 164                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 165     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 166     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 167                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 168     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 169     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 170                                                                                                          </span>
<span class="8587182513202290942" onmouseenter="enter('8587182513202290942');" onmouseout="out('8587182513202290942');" style=""> 171     // sPendingPackages is a set of packages which could be on sdcard and are not available yet          </span>
<span class="7668483630172593446" onmouseenter="enter('7668483630172593446');" onmouseout="out('7668483630172593446');" style=""> 172     static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages =                           </span>
<span class="3743105789756038321" onmouseenter="enter('3743105789756038321');" onmouseout="out('3743105789756038321');" style=""> 173             new HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt;();                                            </span>
<span  style=""> 174                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 175     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 176                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 177     private IconCache mIconCache;                                                                        </span>
<span  style=""> 178                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 179     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="-1392466613073934971" onmouseenter="enter('-1392466613073934971');" onmouseout="out('-1392466613073934971');" style=""> 181     private final LauncherAppsCompat mLauncherApps;                                                      </span>
<span class="-6177668713869523688" onmouseenter="enter('-6177668713869523688');" onmouseout="out('-6177668713869523688');" style=""> 182     private final UserManagerCompat mUserManager;                                                        </span>
<span  style=""> 183                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 184     public interface Callbacks {                                                                         </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 185         public boolean setLoadOnResume();                                                                </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 186         public int getCurrentWorkspaceScreen();                                                          </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 187         public void startBinding();                                                                      </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 188         public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                         </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 189                               boolean forceAnimateIcons);                                                </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 190         public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                       </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 191         public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                    </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 192         public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                       </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 193         public void finishBindingItems(boolean upgradePath);                                             </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 194         public void bindAppWidget(LauncherAppWidgetInfo info);                                           </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 195         public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                        </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 196         public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                            </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 197                                   ArrayList&lt;ItemInfo&gt; addNotAnimated,                                    </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 198                                   ArrayList&lt;ItemInfo&gt; addAnimated,                                       </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 199                                   ArrayList&lt;AppInfo&gt; addedApps);                                         </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 200         public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                            </span>
<span class="-6991207189725786229" onmouseenter="enter('-6991207189725786229');" onmouseout="out('-6991207189725786229');" style=""> 201         public void bindAppsRestored(ArrayList&lt;AppInfo&gt; apps);                                           </span>
<span class="1552205679904733456" onmouseenter="enter('1552205679904733456');" onmouseout="out('1552205679904733456');" style=""> 202         public void updatePackageState(ArrayList&lt;PackageInstallInfo&gt; installInfo);                       </span>
<span class="3764474087617128758" onmouseenter="enter('3764474087617128758');" onmouseout="out('3764474087617128758');" style=""> 203         public void updatePackageBadge(String packageName);                                              </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 204         public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                </span>
<span class="-1539895317750647539" onmouseenter="enter('-1539895317750647539');" onmouseout="out('-1539895317750647539');" style=""> 205                         ArrayList&lt;AppInfo&gt; appInfos, UserHandleCompat user);                             </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 206         public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                          </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 207         public void bindSearchablesChanged();                                                            </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 208         public boolean isAllAppsButtonRank(int rank);                                                    </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 209         public void onPageBoundSynchronously(int page);                                                  </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 210         public void dumpLogsToLocalData();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 213     public interface ItemInfoFilter {                                                                    </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 214         public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215     }                                                                                                    </span>
<span  style=""> 216                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 217     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 218         Context context = app.getContext();                                                              </span>
<span  style=""> 219                                                                                                          </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 220         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="6456618698786728431" onmouseenter="enter('6456618698786728431');" onmouseout="out('6456618698786728431');" style=""> 221         String oldProvider = context.getString(R.string.old_launcher_provider_uri);                      </span>
<span class="-4473607088242738177" onmouseenter="enter('-4473607088242738177');" onmouseout="out('-4473607088242738177');" style=""> 222         // This may be the same as MIGRATE_AUTHORITY, or it may be replaced by a different               </span>
<span class="-5811264300229071057" onmouseenter="enter('-5811264300229071057');" onmouseout="out('-5811264300229071057');" style=""> 223         // resource string.                                                                              </span>
<span class="7826951633422431656" onmouseenter="enter('7826951633422431656');" onmouseout="out('7826951633422431656');" style=""> 224         String redirectAuthority = Uri.parse(oldProvider).getAuthority();                                </span>
<span class="6066736278849717257" onmouseenter="enter('6066736278849717257');" onmouseout="out('6066736278849717257');" style=""> 225         ProviderInfo providerInfo =                                                                      </span>
<span class="-9141516768909079071" onmouseenter="enter('-9141516768909079071');" onmouseout="out('-9141516768909079071');" style=""> 226                 context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY, 0);                </span>
<span class="765698750338601416" onmouseenter="enter('765698750338601416');" onmouseout="out('765698750338601416');" style=""> 227         ProviderInfo redirectProvider =                                                                  </span>
<span class="-45874905823641339" onmouseenter="enter('-45874905823641339');" onmouseout="out('-45874905823641339');" style=""> 228                 context.getPackageManager().resolveContentProvider(redirectAuthority, 0);                </span>
<span  style=""> 229                                                                                                          </span>
<span class="314259485526307626" onmouseenter="enter('314259485526307626');" onmouseout="out('314259485526307626');" style=""> 230         Log.d(TAG, &quot;Old launcher provider: &quot; + oldProvider);                                             </span>
<span class="-8592116164695986182" onmouseenter="enter('-8592116164695986182');" onmouseout="out('-8592116164695986182');" style=""> 231         mOldContentProviderExists = (providerInfo != null) &amp;&amp; (redirectProvider != null);                </span>
<span  style=""> 232                                                                                                          </span>
<span class="6861009572404401042" onmouseenter="enter('6861009572404401042');" onmouseout="out('6861009572404401042');" style=""> 233         if (mOldContentProviderExists) {                                                                 </span>
<span class="-1855952710226164095" onmouseenter="enter('-1855952710226164095');" onmouseout="out('-1855952710226164095');" style=""> 234             Log.d(TAG, &quot;Old launcher provider exists.&quot;);                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 235         } else {                                                                                         </span>
<span class="-884548298796331780" onmouseenter="enter('-884548298796331780');" onmouseout="out('-884548298796331780');" style=""> 236             Log.d(TAG, &quot;Old launcher provider does not exist.&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 239         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 240         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 241         mIconCache = iconCache;                                                                          </span>
<span  style=""> 242                                                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 243         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 244         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 245         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1186313261969242146" onmouseenter="enter('-1186313261969242146');" onmouseout="out('-1186313261969242146');" style=""> 246         mLauncherApps = LauncherAppsCompat.getInstance(context);                                         </span>
<span class="5028106411018262806" onmouseenter="enter('5028106411018262806');" onmouseout="out('5028106411018262806');" style=""> 247         mUserManager = UserManagerCompat.getInstance(context);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248     }                                                                                                    </span>
<span  style=""> 249                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 250     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 251      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 252     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 253         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254     }                                                                                                    </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 255     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 256         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 257             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 258             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 259         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 260             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262     }                                                                                                    </span>
<span  style=""> 263                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 264     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 265      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 266     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 267         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 268             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 269         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 270             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 271             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 275     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 276         return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277     }                                                                                                    </span>
<span  style=""> 278                                                                                                          </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 279     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,               </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 280                                  long screen) {                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 281         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 282         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 283         final int xCount = (int) grid.numColumns;                                                        </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 284         final int yCount = (int) grid.numRows;                                                           </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 285         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span  style=""> 286                                                                                                          </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 287         int cellX, cellY, spanX, spanY;                                                                  </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 288         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 289             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 290             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 291                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 292                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 293                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 294                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 295                     spanY = item.spanY;                                                                  </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 296                     for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 297                         for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {            </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 298                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303         }                                                                                                </span>
<span  style=""> 304                                                                                                          </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 305         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 307     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                    </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 308                                                         Intent launchIntent,                             </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 309                                                         int firstScreenIndex,                            </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 310                                                         ArrayList&lt;Long&gt; workspaceScreens) {              </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 311         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 312         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 313         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 314         boolean found = false;                                                                           </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 315         synchronized (app) {                                                                             </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 316             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 317                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 318                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 319                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 320                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 322             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span  style=""> 323                                                                                                          </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 324             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 325             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 326             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 327             int count = workspaceScreens.size();                                                         </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 328             for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                    </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 329                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 330                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                            </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 331                         workspaceScreens.get(screen))) {                                                 </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 332                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 333                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 337         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338     }                                                                                                    </span>
<span  style=""> 339                                                                                                          </span>
<span class="-7586986915858549354" onmouseenter="enter('-7586986915858549354');" onmouseout="out('-7586986915858549354');" style=""> 340     public void setPackageState(final ArrayList&lt;PackageInstallInfo&gt; installInfo) {                       </span>
<span class="-7600698850277173095" onmouseenter="enter('-7600698850277173095');" onmouseout="out('-7600698850277173095');" style=""> 341         // Process the updated package state                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 342         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 343             public void run() {                                                                          </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style=""> 344                 Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style=""> 345                 if (callbacks != null) {                                                                 </span>
<span class="-2122958624687225435" onmouseenter="enter('-2122958624687225435');" onmouseout="out('-2122958624687225435');" style=""> 346                     callbacks.updatePackageState(installInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 349         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 350         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351     }                                                                                                    </span>
<span  style=""> 352                                                                                                          </span>
<span class="-4348975915921845586" onmouseenter="enter('-4348975915921845586');" onmouseout="out('-4348975915921845586');" style=""> 353     public void updatePackageBadge(final String packageName) {                                           </span>
<span class="7729714843616329773" onmouseenter="enter('7729714843616329773');" onmouseout="out('7729714843616329773');" style=""> 354         // Process the updated package badge                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 355         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 356             public void run() {                                                                          </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style=""> 357                 Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style=""> 358                 if (callbacks != null) {                                                                 </span>
<span class="-175082648182985609" onmouseenter="enter('-175082648182985609');" onmouseout="out('-175082648182985609');" style=""> 359                     callbacks.updatePackageBadge(packageName);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 362         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 363         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364     }                                                                                                    </span>
<span  style=""> 365                                                                                                          </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style=""> 366     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style=""> 367         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style=""> 368                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style=""> 369         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style=""> 370             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style=""> 372         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 373             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374         }                                                                                                </span>
<span  style=""> 375                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 376         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style=""> 377         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 378         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 379             ItemInfo a = iter.next();                                                                    </span>
<span class="788818030959001981" onmouseenter="enter('788818030959001981');" onmouseout="out('788818030959001981');" style=""> 380             if (LauncherModel.appWasPromise(ctx, a.getIntent(), a.user)) {                               </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style=""> 381                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383         }                                                                                                </span>
<span  style=""> 384                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 385         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 386         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 387             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 388                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 389                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 390                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 391                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 392                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style=""> 393                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style=""> 394                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style=""> 395                                     if (intent != null) {                                                </span>
<span class="7948974687398618411" onmouseenter="enter('7948974687398618411');" onmouseout="out('7948974687398618411');" style=""> 396                                         mIconCache.deletePreloadedIcon(intent.getComponent(),            </span>
<span class="1609339875512298297" onmouseenter="enter('1609339875512298297');" onmouseout="out('1609339875512298297');" style=""> 397                                                 info.user);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 400                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style=""> 402                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 405                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 407         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 408         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409     }                                                                                                    </span>
<span  style=""> 410                                                                                                          </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style=""> 411     public void addAndBindAddedWorkspaceApps(final Context context,                                      </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style=""> 412             final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                   </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style=""> 413         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style=""> 414                                                                                                          </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style=""> 415         if (workspaceApps == null) {                                                                     </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 416             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417         }                                                                                                </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style=""> 418         if (workspaceApps.isEmpty()) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 419             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 421         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 422         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 423             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 424                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 425                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 426                 final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                   </span>
<span  style=""> 427                                                                                                          </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 428                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 429                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 430                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 431                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 432                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 433                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 434                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 435                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436                 }                                                                                        </span>
<span  style=""> 437                                                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 438                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 439                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 440                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 441                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 442                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 443                         final Intent launchIntent = a.getIntent();                                       </span>
<span  style=""> 444                                                                                                          </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 445                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 446                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style=""> 447                             // Only InstallShortcutReceiver sends us shortcutInfos, ignore them          </span>
<span class="-8314395278706468200" onmouseenter="enter('-8314395278706468200');" onmouseout="out('-8314395278706468200');" style=""> 448                             if (a instanceof AppInfo &amp;&amp;                                                  </span>
<span class="-4816286524033800367" onmouseenter="enter('-4816286524033800367');" onmouseout="out('-4816286524033800367');" style=""> 449                                     LauncherModel.appWasPromise(context, launchIntent, a.user)) {        </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style=""> 450                                 restoredAppsFinal.add((AppInfo) a);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                             }                                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 452                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453                         }                                                                                </span>
<span  style=""> 454                                                                                                          </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 455                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 456                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 457                         // Otherwise, we add them to the next pages.                                     </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 458                         int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                   </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 459                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,     </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 460                                 name, launchIntent, startSearchPageIndex, workspaceScreens);             </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 461                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 462                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span  style=""> 463                                                                                                          </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 464                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 465                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 466                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 467                             // the startSearchPageIndex.                                                 </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 468                             int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                   </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 469                                     workspaceScreens.size());                                            </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 470                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 471                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 472                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 473                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 474                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 475                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476                             }                                                                            </span>
<span  style=""> 477                                                                                                          </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 478                             // Find the coordinate again                                                 </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 479                             coords = LauncherModel.findNextAvailableIconSpace(context,                   </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 480                                     name, launchIntent, startSearchPageIndex, workspaceScreens);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 482                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 483                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484                         }                                                                                </span>
<span  style=""> 485                                                                                                          </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 486                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 487                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 488                             shortcutInfo = (ShortcutInfo) a;                                             </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 489                         } else if (a instanceof AppInfo) {                                               </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 490                             shortcutInfo = ((AppInfo) a).makeShortcut();                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 491                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 492                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493                         }                                                                                </span>
<span  style=""> 494                                                                                                          </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 495                         // Add the shortcut to the db                                                    </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 496                         addItemToDatabase(context, shortcutInfo,                                         </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 497                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 498                                 coords.first, coords.second[0], coords.second[1], false);                </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 499                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 500                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502                 }                                                                                        </span>
<span  style=""> 503                                                                                                          </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 504                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 505                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span  style=""> 506                                                                                                          </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 507                 if (!addedShortcutsFinal.isEmpty()) {                                                    </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 508                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 509                         public void run() {                                                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 510                             Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                 </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 511                             if (callbacks == cb &amp;&amp; cb != null) {                                         </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 512                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 513                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 514                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 515                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 515                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 516                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 517                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 518                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 519                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 520                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 521                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524                                 }                                                                        </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 525                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                      </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style=""> 526                                         addNotAnimated, addAnimated, null);                              </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 527                                 if (!restoredAppsFinal.isEmpty()) {                                      </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 528                                     callbacks.bindAppsUpdated(restoredAppsFinal);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 532                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 535         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 536         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537     }                                                                                                    </span>
<span  style=""> 538                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 539     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 540         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 541             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +     </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 542                     &quot;main thread&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543         }                                                                                                </span>
<span  style=""> 544                                                                                                          </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 545         // Clear any deferred bind runnables                                                             </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style=""> 546         synchronized (mDeferredBindRunnables) {                                                          </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 547             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548         }                                                                                                </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 549         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 550         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 551         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 552         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553     }                                                                                                    </span>
<span  style=""> 554                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 555     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 556     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 557         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 558         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 559         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 560         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 561         synchronized (sBgLock) {                                                                         </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 562             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 563             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 565         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 566                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 567                 public void run() {                                                                      </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 568                    for (ItemInfo item : tmpWorkspaceItems) {                                             </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 569                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570                    }                                                                                     </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 571                    for (ItemInfo item : tmpAppWidgets) {                                                 </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 572                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573                    }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 575             };                                                                                           </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 576         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577     }                                                                                                    </span>
<span  style=""> 578                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 579     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 580      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 581      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 582      */                                                                                                  </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 583     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                  </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 584             long screenId, int cellX, int cellY) {                                                       </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 585         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 586             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 587             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 588         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 589             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 590             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592     }                                                                                                    </span>
<span  style=""> 593                                                                                                          </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 594     static void checkItemInfoLocked(                                                                     </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 595             final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                    </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 596         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 597         if (modelItem != null &amp;&amp; item != modelItem) {                                                    </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 598             // check all the data is consistent                                                          </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 599             if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                     </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 600                 ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                   </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 601                 ShortcutInfo shortcut = (ShortcutInfo) item;                                             </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 602                 if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                  </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 603                         modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                            </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 604                         modelShortcut.id == shortcut.id &amp;&amp;                                               </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 605                         modelShortcut.itemType == shortcut.itemType &amp;&amp;                                   </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 606                         modelShortcut.container == shortcut.container &amp;&amp;                                 </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 607                         modelShortcut.screenId == shortcut.screenId &amp;&amp;                                   </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 608                         modelShortcut.cellX == shortcut.cellX &amp;&amp;                                         </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 609                         modelShortcut.cellY == shortcut.cellY &amp;&amp;                                         </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 610                         modelShortcut.spanX == shortcut.spanX &amp;&amp;                                         </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 611                         modelShortcut.spanY == shortcut.spanY &amp;&amp;                                         </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 612                         ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                  </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 613                         (modelShortcut.dropPos != null &amp;&amp;                                                </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 614                                 shortcut.dropPos != null &amp;&amp;                                              </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 615                                 modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                       </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 616                         modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                             </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 617                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 618                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620             }                                                                                            </span>
<span  style=""> 621                                                                                                          </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 622             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 623             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 624             // modelItem == item or the equality check above                                             </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 625             String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                        </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 626                     &quot;modelItem: &quot; +                                                                      </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 627                     ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                              </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 628                     &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                    </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 629             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 630             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 631                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 633             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635     }                                                                                                    </span>
<span  style=""> 636                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 637     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 638         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 639         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 640         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 641             public void run() {                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 642                 synchronized (sBgLock) {                                                                 </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 643                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 646         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 647         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648     }                                                                                                    </span>
<span  style=""> 649                                                                                                          </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 650     static void updateItemInDatabaseHelper(Context context, final ContentValues values,                  </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 651             final ItemInfo item, final String callingFunction) {                                         </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 652         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 653         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 654         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 655                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 656         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 657         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 658             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 659                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 660                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 662         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 663         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664     }                                                                                                    </span>
<span  style=""> 665                                                                                                          </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 666     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,  </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 667             final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                             </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 668         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 669                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 670         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 671         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 672             public void run() {                                                                          </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 673                 ArrayList&lt;ContentProviderOperation&gt; ops =                                                </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 674                         new ArrayList&lt;ContentProviderOperation&gt;();                                       </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 675                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 676                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 677                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 678                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 679                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 680                     ContentValues values = valuesList.get(i);                                            </span>
<span  style=""> 681                                                                                                          </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 682                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 683                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span  style=""> 684                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 686                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 687                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 688                 } catch (Exception e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 689                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 692         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 693         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694     }                                                                                                    </span>
<span  style=""> 695                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 696     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 697         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 698         synchronized (sBgLock) {                                                                         </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 699             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span  style=""> 700                                                                                                          </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 701             if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 702                     item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                    </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 703                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 704                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 705                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 706                     // the list of Folders.                                                              </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 707                     String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                         </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 708                             item.container + &quot;, not in the list of folders&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 709                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711             }                                                                                            </span>
<span  style=""> 712                                                                                                          </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 713             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 714             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 715             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 716             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 717             if (modelItem != null &amp;&amp;                                                                     </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 718                     (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||              </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 719                      modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {             </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 720                 switch (modelItem.itemType) {                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 721                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                               </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 722                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 723                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 724                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 725                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 727                         break;                                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 728                     default:                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 729                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 731             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 732                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735     }                                                                                                    </span>
<span  style=""> 736                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 737     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 738         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 739         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 740                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 741                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 742                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 743                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 746             };                                                                                           </span>
<span  style=""> 747                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 748         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 749             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 750             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 751                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 752                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 755             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 756             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 757                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 758                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 759                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 760                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764     }                                                                                                    </span>
<span  style=""> 765                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 766     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 767      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 768      */                                                                                                  </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 769     static void moveItemInDatabase(Context context, final ItemInfo item, final long container,           </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 770             final long screenId, final int cellX, final int cellY) {                                     </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 771         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 772         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 773         item.cellY = cellY;                                                                              </span>
<span  style=""> 774                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 775         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 776         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 777         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 778                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 779             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 780         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 781             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782         }                                                                                                </span>
<span  style=""> 783                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 784         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 785         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 786         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 787         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 788         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 789                                                                                                          </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 790         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791     }                                                                                                    </span>
<span  style=""> 792                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 793     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 794      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 795      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 796      */                                                                                                  </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 797     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                    </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 798             final long container, final int screen) {                                                    </span>
<span  style=""> 799                                                                                                          </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 800         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 801         int count = items.size();                                                                        </span>
<span  style=""> 802                                                                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 803         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 804             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 805             item.container = container;                                                                  </span>
<span  style=""> 806                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 807             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 808             // in the hotseat                                                                            </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 809             if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                             </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 810                     container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                         </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 811                 item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,          </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 812                         item.cellY);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 813             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 814                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815             }                                                                                            </span>
<span  style=""> 816                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 817             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 818             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 819             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 820             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 821             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span  style=""> 822                                                                                                          </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 823             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 825         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826     }                                                                                                    </span>
<span  style=""> 827                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 828     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 829      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 830      */                                                                                                  </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 831     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,         </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 832             final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {   </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 833         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 834         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 835         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 836         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 837         item.spanY = spanY;                                                                              </span>
<span  style=""> 838                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 839         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 840         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 841         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 842                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 843             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 844         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 845             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846         }                                                                                                </span>
<span  style=""> 847                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 848         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 849         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 850         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 851         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 852         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 853         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 854         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 855                                                                                                          </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 856         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857     }                                                                                                    </span>
<span  style=""> 858                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 859     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 860      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 861      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 862     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 863         final ContentValues values = new ContentValues();                                                </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style=""> 864         item.onAddToDatabase(context, values);                                                           </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 865         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 866         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867     }                                                                                                    </span>
<span  style=""> 868                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 869     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 870      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 871      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 872      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 873     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 874         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4175900686448469518" onmouseenter="enter('-4175900686448469518');" onmouseout="out('-4175900686448469518');" style=""> 875         final Intent intentWithPkg, intentWithoutPkg;                                                    </span>
<span  style=""> 876                                                                                                          </span>
<span class="-1192314096420314309" onmouseenter="enter('-1192314096420314309');" onmouseout="out('-1192314096420314309');" style=""> 877         if (intent.getComponent() != null) {                                                             </span>
<span class="5013412415263932655" onmouseenter="enter('5013412415263932655');" onmouseout="out('5013412415263932655');" style=""> 878             // If component is not null, an intent with null package will produce                        </span>
<span class="-2056261929714512728" onmouseenter="enter('-2056261929714512728');" onmouseout="out('-2056261929714512728');" style=""> 879             // the same result and should also be a match.                                               </span>
<span class="8293829844581049791" onmouseenter="enter('8293829844581049791');" onmouseout="out('8293829844581049791');" style=""> 880             if (intent.getPackage() != null) {                                                           </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style=""> 881                 intentWithPkg = intent;                                                                  </span>
<span class="302721143002808724" onmouseenter="enter('302721143002808724');" onmouseout="out('302721143002808724');" style=""> 882                 intentWithoutPkg = new Intent(intent).setPackage(null);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 883             } else {                                                                                     </span>
<span class="411509146924686636" onmouseenter="enter('411509146924686636');" onmouseout="out('411509146924686636');" style=""> 884                 intentWithPkg = new Intent(intent).setPackage(                                           </span>
<span class="-8194702512537292868" onmouseenter="enter('-8194702512537292868');" onmouseout="out('-8194702512537292868');" style=""> 885                         intent.getComponent().getPackageName());                                         </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style=""> 886                 intentWithoutPkg = intent;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 888         } else {                                                                                         </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style=""> 889             intentWithPkg = intent;                                                                      </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style=""> 890             intentWithoutPkg = intent;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891         }                                                                                                </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 892         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                      </span>
<span class="-6373969991306358457" onmouseenter="enter('-6373969991306358457');" onmouseout="out('-6373969991306358457');" style=""> 893             new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and (intent=? or intent=?)&quot;,                    </span>
<span class="-338282616399686930" onmouseenter="enter('-338282616399686930');" onmouseout="out('-338282616399686930');" style=""> 894             new String[] { title, intentWithPkg.toUri(0), intentWithoutPkg.toUri(0) }, null);            </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 895         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 896         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 897             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 898         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 899             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 901         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902     }                                                                                                    </span>
<span  style=""> 903                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 904     /**                                                                                                  </span>
<span class="2522962036775885267" onmouseenter="enter('2522962036775885267');" onmouseout="out('2522962036775885267');" style=""> 905      * Returns true if the promise shortcuts with the same package name exists on the workspace.         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 906      */                                                                                                  </span>
<span class="-6588164927851751704" onmouseenter="enter('-6588164927851751704');" onmouseout="out('-6588164927851751704');" style=""> 907     static boolean appWasPromise(Context context, Intent intent, UserHandleCompat user) {                </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style=""> 908         final ComponentName component = intent.getComponent();                                           </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style=""> 909         if (component == null) {                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 910             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911         }                                                                                                </span>
<span class="-5254167698548486612" onmouseenter="enter('-5254167698548486612');" onmouseout="out('-5254167698548486612');" style=""> 912         return !getItemsByPackageName(component.getPackageName(), user).isEmpty();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913     }                                                                                                    </span>
<span  style=""> 914                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 915     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 916      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 917      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 918      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 919     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 920         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 921         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 922         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                       </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 923                 LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,              </span>
<span class="-5597662442381403391" onmouseenter="enter('-5597662442381403391');" onmouseout="out('-5597662442381403391');" style=""> 924                 LauncherSettings.Favorites.SCREEN,                                                       </span>
<span class="-2919624041508816442" onmouseenter="enter('-2919624041508816442');" onmouseout="out('-2919624041508816442');" style=""> 925                 LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,                      </span>
<span class="-6977762317278061139" onmouseenter="enter('-6977762317278061139');" onmouseout="out('-6977762317278061139');" style=""> 926                 LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY,                      </span>
<span class="-7245839497619612656" onmouseenter="enter('-7245839497619612656');" onmouseout="out('-7245839497619612656');" style=""> 927                 LauncherSettings.Favorites.PROFILE_ID }, null, null, null);                              </span>
<span  style=""> 928                                                                                                          </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 929         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 930         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 931         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 932         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 933         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 934         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 935         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style=""> 936         final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);       </span>
<span class="4378196374401845990" onmouseenter="enter('4378196374401845990');" onmouseout="out('4378196374401845990');" style=""> 937         UserManagerCompat userManager = UserManagerCompat.getInstance(context);                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 938         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 939             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 940                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 941                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 942                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 943                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 944                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 945                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 946                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 947                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style=""> 948                 long serialNumber = c.getInt(profileIdIndex);                                            </span>
<span class="8590899978146640866" onmouseenter="enter('8590899978146640866');" onmouseout="out('8590899978146640866');" style=""> 949                 item.user = userManager.getUserForSerialNumber(serialNumber);                            </span>
<span class="-2267817568611630151" onmouseenter="enter('-2267817568611630151');" onmouseout="out('-2267817568611630151');" style=""> 950                 // Skip if user has been deleted.                                                        </span>
<span class="-8057177251913525905" onmouseenter="enter('-8057177251913525905');" onmouseout="out('-8057177251913525905');" style=""> 951                 if (item.user != null) {                                                                 </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 952                     items.add(item);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 955         } catch (Exception e) {                                                                          </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 956             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 957         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 958             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959         }                                                                                                </span>
<span  style=""> 960                                                                                                          </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 961         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962     }                                                                                                    </span>
<span  style=""> 963                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 964     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 965      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 966      */                                                                                                  </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style=""> 967     FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {            </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 968         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style=""> 969         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style=""> 970                 &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                  </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style=""> 971                 new String[] { String.valueOf(id),                                                       </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style=""> 972                         String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);             </span>
<span  style=""> 973                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 974         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 975             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 976                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 977                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 978                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 979                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 980                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 981                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span  style=""> 982                                                                                                          </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 983                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 984                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 985                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 986                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 987                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988                 }                                                                                        </span>
<span  style=""> 989                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 990                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 991                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 992                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 993                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 994                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 995                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span  style=""> 996                                                                                                          </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 997                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 999         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1000             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1001         }                                                                                                </span>
<span  style="">1002                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1003         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004     }                                                                                                    </span>
<span  style="">1005                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1006     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style="">1007      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style="">1008      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1009      */                                                                                                  </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style="">1010     static void addItemToDatabase(Context context, final ItemInfo item, final long container,            </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style="">1011             final long screenId, final int cellX, final int cellY, final boolean notify) {               </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1012         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style="">1013         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style="">1014         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1015         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1016         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style="">1017         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1018                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style="">1019             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1020         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style="">1021             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022         }                                                                                                </span>
<span  style="">1023                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1024         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1025         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="">1026         item.onAddToDatabase(context, values);                                                           </span>
<span  style="">1027                                                                                                          </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style="">1028         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style="">1029         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style="">1030         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span  style="">1031                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style="">1032         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1033         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1034             public void run() {                                                                          </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style="">1035                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                              </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style="">1036                         LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                 </span>
<span  style="">1037                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1038                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1039                 synchronized (sBgLock) {                                                                 </span>
<span class="-4593486021211754382" onmouseenter="enter('-4593486021211754382');" onmouseout="out('-4593486021211754382');" style="">1040                     checkItemInfoLocked(item.id, item, stackTrace);                                      </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style="">1041                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1042                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1043                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style="">1044                             sBgFolders.put(item.id, (FolderInfo) item);                                  </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">1045                             // Fall through                                                              </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1046                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1047                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style="">1048                             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||        </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style="">1049                                     item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {    </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style="">1050                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1051                             } else {                                                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style="">1052                                 if (!sBgFolders.containsKey(item.container)) {                           </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style="">1053                                     // Adding an item to a folder that doesn&#x27;t exist.                    </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style="">1054                                     String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +         </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style="">1055                                             &quot; doesn&#x27;t exist&quot;;                                            </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1056                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1059                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1060                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style="">1061                             sBgAppWidgets.add((LauncherAppWidgetInfo) item);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1062                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1066         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1067         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068     }                                                                                                    </span>
<span  style="">1069                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1070     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style="">1071      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1072      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1073     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1074             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1075         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1076                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077     }                                                                                                    </span>
<span  style="">1078                                                                                                          </span>
<span class="-2977858468662335030" onmouseenter="enter('-2977858468662335030');" onmouseout="out('-2977858468662335030');" style="">1079     private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(                                            </span>
<span class="-4648411385517347510" onmouseenter="enter('-4648411385517347510');" onmouseout="out('-4648411385517347510');" style="">1080             final String pn, final UserHandleCompat user) {                                              </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">1081         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1082             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">1083             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="-3698999064980760147" onmouseenter="enter('-3698999064980760147');" onmouseout="out('-3698999064980760147');" style="">1084                 return cn.getPackageName().equals(pn) &amp;&amp; info.user.equals(user);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1086         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">1087         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088     }                                                                                                    </span>
<span  style="">1089                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1090     /**                                                                                                  </span>
<span class="2342361889363691922" onmouseenter="enter('2342361889363691922');" onmouseout="out('2342361889363691922');" style="">1091      * Removes all the items from the database corresponding to the specified package.                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1092      */                                                                                                  </span>
<span class="-4223841609537991203" onmouseenter="enter('-4223841609537991203');" onmouseout="out('-4223841609537991203');" style="">1093     static void deletePackageFromDatabase(Context context, final String pn,                              </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">1094             final UserHandleCompat user) {                                                               </span>
<span class="-3124051924336649718" onmouseenter="enter('-3124051924336649718');" onmouseout="out('-3124051924336649718');" style="">1095         deleteItemsFromDatabase(context, getItemsByPackageName(pn, user));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096     }                                                                                                    </span>
<span  style="">1097                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1098     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1099      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1100      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1101      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1102      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1103     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="">1104         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="">1105         items.add(item);                                                                                 </span>
<span class="-1343420386438024026" onmouseenter="enter('-1343420386438024026');" onmouseout="out('-1343420386438024026');" style="">1106         deleteItemsFromDatabase(context, items);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107     }                                                                                                    </span>
<span  style="">1108                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1109     /**                                                                                                  </span>
<span class="6785840277050217586" onmouseenter="enter('6785840277050217586');" onmouseout="out('6785840277050217586');" style="">1110      * Removes the specified items from the database                                                     </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1111      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1112      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1113      */                                                                                                  </span>
<span class="8840034600723804424" onmouseenter="enter('8840034600723804424');" onmouseout="out('8840034600723804424');" style="">1114     static void deleteItemsFromDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items) {              </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1115         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1116                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1117         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1118             public void run() {                                                                          </span>
<span class="6119320427209693879" onmouseenter="enter('6119320427209693879');" onmouseout="out('6119320427209693879');" style="">1119                 for (ItemInfo item : items) {                                                            </span>
<span class="-8969008621964178653" onmouseenter="enter('-8969008621964178653');" onmouseout="out('-8969008621964178653');" style="">1120                     final Uri uri = LauncherSettings.Favorites.getContentUri(item.id, false);            </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="">1121                     cr.delete(uri, null, null);                                                          </span>
<span  style="">1122                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1123                     // Lock on mBgLock *after* the db operation                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1124                     synchronized (sBgLock) {                                                             </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1125                         switch (item.itemType) {                                                         </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1126                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1127                                 sBgFolders.remove(item.id);                                              </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="">1128                                 for (ItemInfo info: sBgItemsIdMap.values()) {                            </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1129                                     if (info.container == item.id) {                                     </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1130                                         // We are deleting a folder which still contains items that      </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1131                                         // think they are contained by that folder.                      </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="">1132                                         String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +   </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="">1133                                                 &quot;contains items (&quot; + info + &quot;)&quot;;                         </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1134                                         Log.e(TAG, msg);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136                                 }                                                                        </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1137                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1138                                 break;                                                                   </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1139                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1140                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1141                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1142                                 break;                                                                   </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1143                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="">1144                                 sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1145                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146                         }                                                                                </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1147                         sBgItemsIdMap.remove(item.id);                                                   </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1148                         sBgDbIconCache.remove(item);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1152         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1153         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154     }                                                                                                    </span>
<span  style="">1155                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1156     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1157      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1158      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1159      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1160     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1161         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1162         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1163         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span  style="">1164                                                                                                          </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1165         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1166         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1167         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span  style="">1168                                                                                                          </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1169         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1170         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1171         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1172             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1173             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1174                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176         }                                                                                                </span>
<span  style="">1177                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1178         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1179             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1180             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1181                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1182                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1183                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1184                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1185                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1186                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1187                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1188                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1189                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1190                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191                 }                                                                                        </span>
<span  style="">1192                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1193                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1194                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1195                 } catch (Exception ex) {                                                                 </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1196                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197                 }                                                                                        </span>
<span  style="">1198                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1199                 synchronized (sBgLock) {                                                                 </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1200                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1201                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1204         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1205         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206     }                                                                                                    </span>
<span  style="">1207                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1208     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1209      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1210      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1211     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1212         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1213                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1214         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1215             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1216                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1217                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1218                 synchronized (sBgLock) {                                                                 </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1219                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1220                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1221                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1222                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1223                 }                                                                                        </span>
<span  style="">1224                                                                                                          </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1225                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                        </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1226                         LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                     </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1227                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1228                 synchronized (sBgLock) {                                                                 </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1229                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1230                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1231                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1235         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1236         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237     }                                                                                                    </span>
<span  style="">1238                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1239     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1240      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1241      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1242     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1243         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1244             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246     }                                                                                                    </span>
<span  style="">1247                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1248     @Override                                                                                            </span>
<span class="-2337875492294712218" onmouseenter="enter('-2337875492294712218');" onmouseout="out('-2337875492294712218');" style="">1249     public void onPackageChanged(String packageName, UserHandleCompat user) {                            </span>
<span class="4778571821882595512" onmouseenter="enter('4778571821882595512');" onmouseout="out('4778571821882595512');" style="">1250         int op = PackageUpdatedTask.OP_UPDATE;                                                           </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1251         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1252                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253     }                                                                                                    </span>
<span  style="">1254                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1255     @Override                                                                                            </span>
<span class="-927554855118637848" onmouseenter="enter('-927554855118637848');" onmouseout="out('-927554855118637848');" style="">1256     public void onPackageRemoved(String packageName, UserHandleCompat user) {                            </span>
<span class="-8281859875413044704" onmouseenter="enter('-8281859875413044704');" onmouseout="out('-8281859875413044704');" style="">1257         int op = PackageUpdatedTask.OP_REMOVE;                                                           </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1258         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1259                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260     }                                                                                                    </span>
<span  style="">1261                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1262     @Override                                                                                            </span>
<span class="105632639707841197" onmouseenter="enter('105632639707841197');" onmouseout="out('105632639707841197');" style="">1263     public void onPackageAdded(String packageName, UserHandleCompat user) {                              </span>
<span class="4828685442078193889" onmouseenter="enter('4828685442078193889');" onmouseout="out('4828685442078193889');" style="">1264         int op = PackageUpdatedTask.OP_ADD;                                                              </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1265         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1266                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267     }                                                                                                    </span>
<span  style="">1268                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1269     @Override                                                                                            </span>
<span class="-5272203289606218807" onmouseenter="enter('-5272203289606218807');" onmouseout="out('-5272203289606218807');" style="">1270     public void onPackagesAvailable(String[] packageNames, UserHandleCompat user,                        </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="">1271             boolean replacing) {                                                                         </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1272         if (!replacing) {                                                                                </span>
<span class="5127769788151278220" onmouseenter="enter('5127769788151278220');" onmouseout="out('5127769788151278220');" style="">1273             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packageNames,        </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1274                     user));                                                                              </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1275             if (mAppsCanBeOnRemoveableStorage) {                                                         </span>
<span class="-2089495423111974436" onmouseenter="enter('-2089495423111974436');" onmouseout="out('-2089495423111974436');" style="">1276                 // Only rebind if we support removable storage. It catches the                           </span>
<span class="3966636659656955596" onmouseenter="enter('3966636659656955596');" onmouseout="out('3966636659656955596');" style="">1277                 // case where                                                                            </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1278                 // apps on the external sd card need to be reloaded                                      </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1279                 startLoaderFromBackground();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1280             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1281         } else {                                                                                         </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1282             // If we are replacing then just update the packages in the list                             </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1283             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                   </span>
<span class="-8173810846920498048" onmouseenter="enter('-8173810846920498048');" onmouseout="out('-8173810846920498048');" style="">1284                     packageNames, user));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286     }                                                                                                    </span>
<span  style="">1287                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1288     @Override                                                                                            </span>
<span class="-3988876954819926239" onmouseenter="enter('-3988876954819926239');" onmouseout="out('-3988876954819926239');" style="">1289     public void onPackagesUnavailable(String[] packageNames, UserHandleCompat user,                      </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="">1290             boolean replacing) {                                                                         </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1291         if (!replacing) {                                                                                </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1292             enqueuePackageUpdated(new PackageUpdatedTask(                                                </span>
<span class="8606082806154374174" onmouseenter="enter('8606082806154374174');" onmouseout="out('8606082806154374174');" style="">1293                     PackageUpdatedTask.OP_UNAVAILABLE, packageNames,                                     </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1294                     user));                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295         }                                                                                                </span>
<span  style="">1296                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297     }                                                                                                    </span>
<span  style="">1298                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1299     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1300      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1301      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1302      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1303     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1304     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-5855592430187821970" onmouseenter="enter('-5855592430187821970');" onmouseout="out('-5855592430187821970');" style="">1305         if (DEBUG_RECEIVER) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                    </span>
<span  style="">1306                                                                                                          </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1307         final String action = intent.getAction();                                                        </span>
<span class="2827193781436621695" onmouseenter="enter('2827193781436621695');" onmouseout="out('2827193781436621695');" style="">1308         if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                               </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1309             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1310             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1311         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1312              // Check if configuration change was an mcc/mnc change which would affect app resources     </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1313              // and we would need to clear out the labels in all apps/workspace. Same handling as        </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1314              // above for ACTION_LOCALE_CHANGED                                                          </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1315              Configuration currentConfig = context.getResources().getConfiguration();                    </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1316              if (mPreviousConfigMcc != currentConfig.mcc) {                                              </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1317                    Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                  </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1318                        + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1319                    forceReload();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320              }                                                                                           </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1321              // Update previousConfig                                                                    </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1322              mPreviousConfigMcc = currentConfig.mcc;                                                     </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1323         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                 </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1324                    SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                     </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1325             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1326                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1327                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1328                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1331         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332     }                                                                                                    </span>
<span  style="">1333                                                                                                          </span>
<span class="-17594942140375151" onmouseenter="enter('-17594942140375151');" onmouseout="out('-17594942140375151');" style="">1334     void forceReload() {                                                                                 </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1335         resetLoadedState(true, true);                                                                    </span>
<span  style="">1336                                                                                                          </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1337         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1338         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1339         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1340         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1341     }                                                                                                    </span>
<span  style="">1342                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1343     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1344         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1345             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1346             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1347             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1348             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1349             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1350         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351     }                                                                                                    </span>
<span  style="">1352                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1353     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1354      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1355      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1356      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1357      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1358      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1359     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1360         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1361         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1362             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1363             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1364                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1365                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1366                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1370         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1371             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373     }                                                                                                    </span>
<span  style="">1374                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1375     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1376     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1377     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1378         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1379         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1380         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1381             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1382                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1384             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1386         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1387     }                                                                                                    </span>
<span  style="">1388                                                                                                          </span>
<span class="-650602055294598310" onmouseenter="enter('-650602055294598310');" onmouseout="out('-650602055294598310');" style="">1389     public boolean isCurrentCallbacks(Callbacks callbacks) {                                             </span>
<span class="-2678194210930296625" onmouseenter="enter('-2678194210930296625');" onmouseout="out('-2678194210930296625');" style="">1390         return (mCallbacks != null &amp;&amp; mCallbacks.get() == callbacks);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391     }                                                                                                    </span>
<span  style="">1392                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1393     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1394         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395     }                                                                                                    </span>
<span  style="">1396                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1397     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1398         synchronized (mLock) {                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1399             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1400                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401             }                                                                                            </span>
<span  style="">1402                                                                                                          </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1403             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1404             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">1405             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1406                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407             }                                                                                            </span>
<span  style="">1408                                                                                                          </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1409             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1410             if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                        </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1411                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1412                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1413                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1414                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1415                 if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1416                         &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                         </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1417                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1418                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1419                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1420                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424     }                                                                                                    </span>
<span  style="">1425                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1426     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1427         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1428         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="3864855355327062414" onmouseenter="enter('3864855355327062414');" onmouseout="out('3864855355327062414');" style="">1429             Runnable[] deferredBindRunnables = null;                                                     </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">1430             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="-7323371485266753329" onmouseenter="enter('-7323371485266753329');" onmouseout="out('-7323371485266753329');" style="">1431                 deferredBindRunnables = mDeferredBindRunnables.toArray(                                  </span>
<span class="-5228620787203084012" onmouseenter="enter('-5228620787203084012');" onmouseout="out('-5228620787203084012');" style="">1432                         new Runnable[mDeferredBindRunnables.size()]);                                    </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1433                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434             }                                                                                            </span>
<span class="-4818994596267375040" onmouseenter="enter('-4818994596267375040');" onmouseout="out('-4818994596267375040');" style="">1435             for (final Runnable r : deferredBindRunnables) {                                             </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1436                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439     }                                                                                                    </span>
<span  style="">1440                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1441     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1442         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1443             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1444                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1446         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447     }                                                                                                    </span>
<span  style="">1448                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1449     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1450     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1451         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1452         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1453         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1454         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span  style="">1455                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1456         try {                                                                                            </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1457             final int idIndex = sc.getColumnIndexOrThrow(                                                </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1458                     LauncherSettings.WorkspaceScreens._ID);                                              </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1459             final int rankIndex = sc.getColumnIndexOrThrow(                                              </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1460                     LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                      </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1461             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1462                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1463                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1464                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1465                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1466                 } catch (Exception e) {                                                                  </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1467                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1467                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1468                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1470         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1471             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472         }                                                                                                </span>
<span  style="">1473                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1474         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1475         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1476         ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                  </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1477         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1478             orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479         }                                                                                                </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1480         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                              </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1481                 TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                        </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1482         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483     }                                                                                                    </span>
<span  style="">1484                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1485     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1486         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487     }                                                                                                    </span>
<span  style="">1488                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1489     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1490         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1491             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1492                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1495         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496     }                                                                                                    </span>
<span  style="">1497                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1498     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1499      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1500      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1501      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1502      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1503      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1504     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1505         private Context mContext;                                                                        </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1506         private boolean mIsLaunching;                                                                    </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1507         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1508         private boolean mStopped;                                                                        </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1509         private boolean mLoadAndBindStepFinished;                                                        </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1510         private int mFlags;                                                                              </span>
<span  style="">1511                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1512         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1513                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1514         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1515             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1516             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1517             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1518             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519         }                                                                                                </span>
<span  style="">1520                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1521         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1522             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523         }                                                                                                </span>
<span  style="">1524                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1525         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1526             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527         }                                                                                                </span>
<span  style="">1528                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1529         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1530         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1531             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1532                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1533             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1534             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1535                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536             }                                                                                            </span>
<span  style="">1537                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1538             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1539             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1540                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1541                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1542                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1543                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1545                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547             }                                                                                            </span>
<span  style="">1548                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1549             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1550             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1551             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552         }                                                                                                </span>
<span  style="">1553                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1554         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1555             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1556             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1557             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1558             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1559                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1560                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1561                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1562                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1563                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1564                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1565                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1566                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1568                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1571                     });                                                                                  </span>
<span  style="">1572                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1573                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1574                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1575                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1576                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1577                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1578                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1579                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1581                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1582                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1583                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1584                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1585                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588         }                                                                                                </span>
<span  style="">1589                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1590         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1591             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1592                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1593                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1594                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1595             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1596             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1597                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1598                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1599                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1601             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1602                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1603                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1604                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1605                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1606                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607             }                                                                                            </span>
<span  style="">1608                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1609             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1610             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1611             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1612                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1613             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1614             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1615             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1616             mHandler.flush();                                                                            </span>
<span  style="">1617                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1618             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1619             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1620             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1621             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1622             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1623             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624         }                                                                                                </span>
<span  style="">1625                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1626         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1627             boolean isUpgrade = false;                                                                   </span>
<span  style="">1628                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1629             synchronized (mLock) {                                                                       </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1630                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1632             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1633             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1634             // workspace first (default).                                                                </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1635             keep_running: {                                                                              </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1636                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1637                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1638                 synchronized (mLock) {                                                                   </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1639                     if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                        </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1640                             (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                  </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1641                     android.os.Process.setThreadPriority(mIsLaunching                                    </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1642                             ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1643                 }                                                                                        </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1644                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                              </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1645                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span  style="">1646                                                                                                          </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1647                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1648                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1649                 }                                                                                        </span>
<span  style="">1650                                                                                                          </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1651                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1652                 // settled down.                                                                         </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1653                 synchronized (mLock) {                                                                   </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1654                     if (mIsLaunching) {                                                                  </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1655                         if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);          </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1656                         android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1659                 waitForIdle();                                                                           </span>
<span  style="">1660                                                                                                          </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1661                 // second step                                                                           </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1662                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                               </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1663                 loadAndBindAllApps();                                                                    </span>
<span  style="">1664                                                                                                          </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1665                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1666                 synchronized (mLock) {                                                                   </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1667                     android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669             }                                                                                            </span>
<span  style="">1670                                                                                                          </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1671             // Update the saved icons if necessary                                                       </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1672             if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1673             synchronized (sBgLock) {                                                                     </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1674                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1675                     updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1676                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1677                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678             }                                                                                            </span>
<span  style="">1679                                                                                                          </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1680             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1681                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1682                 // represented on the home screen.                                                       </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1683                 if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                       </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1684                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1685                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686             }                                                                                            </span>
<span  style="">1687                                                                                                          </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1688             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1689             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1690             mContext = null;                                                                             </span>
<span  style="">1691                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1692             synchronized (mLock) {                                                                       </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1693                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1694                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1695                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1697                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699         }                                                                                                </span>
<span  style="">1700                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1701         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1702             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1703                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1704                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1706         }                                                                                                </span>
<span  style="">1707                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1708         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1709          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1710          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1711          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1712          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1713          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1714          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1715         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1716             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1717                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1718                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1719                 }                                                                                        </span>
<span  style="">1720                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1721                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1722                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1723                 }                                                                                        </span>
<span  style="">1724                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1725                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1726                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1727                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1728                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1729                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1730                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1731                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732                 }                                                                                        </span>
<span  style="">1733                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1734                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1736         }                                                                                                </span>
<span  style="">1737                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1738         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1739             final Context context = mApp.getContext();                                                   </span>
<span  style="">1740                                                                                                          </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1741             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1742             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1743             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1744             synchronized (sBgLock) {                                                                     </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1745                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="3468492706943039059" onmouseenter="enter('3468492706943039059');" onmouseout="out('3468492706943039059');" style="">1746                     tmpInfos = getItemInfoForComponentName(app.componentName, app.user);                 </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1747                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1748                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1749                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1750                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1751                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1752                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1753                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1754             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1755             if (!added.isEmpty()) {                                                                      </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="">1756                 addAndBindAddedWorkspaceApps(context, added);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1758         }                                                                                                </span>
<span  style="">1759                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1760         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1761         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,          </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1762                                            AtomicBoolean deleteOnInvalidPlacement) {                     </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1763             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1764             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1765             final int countX = (int) grid.numColumns;                                                    </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1766             final int countY = (int) grid.numRows;                                                       </span>
<span  style="">1767                                                                                                          </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1768             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1769             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1770                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1771                 if (mCallbacks == null ||                                                                </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1772                         mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                     </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1773                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1774                     Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                             </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1775                             + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1776                             + item.cellY + &quot;) occupied by all apps&quot;);                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1777                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778                 }                                                                                        </span>
<span  style="">1779                                                                                                          </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1780                 final ItemInfo[][] hotseatItems =                                                        </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1781                         occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);               </span>
<span  style="">1782                                                                                                          </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1783                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1784                     Log.e(TAG, &quot;Error loading shortcut &quot; + item                                          </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1785                             + &quot; into hotseat position &quot; + item.screenId                                  </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1786                             + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)            </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1787                             + &quot;)&quot;);                                                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1788                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1789                 }                                                                                        </span>
<span  style="">1790                                                                                                          </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1791                 if (hotseatItems != null) {                                                              </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1792                     if (hotseatItems[(int) item.screenId][0] != null) {                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1793                         Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                         </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1794                                 + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;            </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1795                                 + item.cellY + &quot;) occupied by &quot;                                          </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1796                                 + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)             </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1797                                 [(int) item.screenId][0]);                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1798                             return false;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1799                     } else {                                                                             </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1800                         hotseatItems[(int) item.screenId][0] = item;                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1801                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1802                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1803                 } else {                                                                                 </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1804                     final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];              </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1805                     items[(int) item.screenId][0] = item;                                                </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1806                     occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1807                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1808                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1809             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1810                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1811                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1812             }                                                                                            </span>
<span  style="">1813                                                                                                          </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1814             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1815                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1816                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1817             }                                                                                            </span>
<span  style="">1818                                                                                                          </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1819             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1820             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1821                     item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                  </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1822                     item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {              </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1823                 Log.e(TAG, &quot;Error loading shortcut &quot; + item                                              </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1824                         + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                    </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1825                         + item.cellX + &quot;,&quot; + item.cellY                                                  </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1826                         + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1827                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1828             }                                                                                            </span>
<span  style="">1829                                                                                                          </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1830             // Check if any workspace icons overlap with each other                                      </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1831             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1832                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1833                     if (screens[x][y] != null) {                                                         </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1834                         Log.e(TAG, &quot;Error loading shortcut &quot; + item                                      </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1835                             + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1836                             + x + &quot;,&quot; + y                                                                </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1837                             + &quot;) occupied by &quot;                                                           </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1838                             + screens[x][y]);                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1839                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1840                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1842             }                                                                                            </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1843             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1844                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1845                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1846                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1847             }                                                                                            </span>
<span  style="">1848                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1849             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1850         }                                                                                                </span>
<span  style="">1851                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1852         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1853         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1854             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1855                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1856                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1857                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1858                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1859                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1860                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1861             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1862         }                                                                                                </span>
<span  style="">1863                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1864         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1865         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1866             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1867             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span  style="">1868                                                                                                          </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">1869             final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                               </span>
<span  style="">1870                                                                                                          </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1871             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1872             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1873             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1874             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1875             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">1876             final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);             </span>
<span class="-1126483394746043247" onmouseenter="enter('-1126483394746043247');" onmouseout="out('-1126483394746043247');" style="">1877             final boolean isSdCardReady = context.registerReceiver(null,                                 </span>
<span class="235951794025782625" onmouseenter="enter('235951794025782625');" onmouseout="out('235951794025782625');" style="">1878                     new IntentFilter(StartupReceiver.SYSTEM_READY)) != null;                             </span>
<span  style="">1879                                                                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1880             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1881             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">1882             int countX = (int) grid.numColumns;                                                          </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">1883             int countY = (int) grid.numRows;                                                             </span>
<span  style="">1884                                                                                                          </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1885             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1886                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1887                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1888             }                                                                                            </span>
<span  style="">1889                                                                                                          </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1890             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1891                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1892                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1893                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1894             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1895                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1896                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="4180233289947251537" onmouseenter="enter('4180233289947251537');" onmouseout="out('4180233289947251537');" style="">1897                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1898             }                                                                                            </span>
<span  style="">1899                                                                                                          </span>
<span class="6918238907049954147" onmouseenter="enter('6918238907049954147');" onmouseout="out('6918238907049954147');" style="">1900             // This code path is for our old migration code and should no longer be exercised            </span>
<span class="-6111060399811000023" onmouseenter="enter('-6111060399811000023');" onmouseout="out('-6111060399811000023');" style="">1901             boolean loadedOldDb = false;                                                                 </span>
<span  style="">1902                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1903             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1904             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span  style="">1905                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1906             synchronized (sBgLock) {                                                                     </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1907                 clearSBgDataStructures();                                                                </span>
<span class="8252648371202855385" onmouseenter="enter('8252648371202855385');" onmouseout="out('8252648371202855385');" style="">1908                 final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat                            </span>
<span class="-5267108265550912858" onmouseenter="enter('-5267108265550912858');" onmouseout="out('-5267108265550912858');" style="">1909                         .getInstance(mContext).updateAndGetActiveSessionCache();                         </span>
<span  style="">1910                                                                                                          </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1911                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1912                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="2252334430881119805" onmouseenter="enter('2252334430881119805');" onmouseout="out('2252334430881119805');" style="">1913                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION;           </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">1914                 if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                       </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1915                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span  style="">1916                                                                                                          </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1917                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1918                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1919                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1920                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span  style="">1921                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1922                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1923                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">1924                     final int intentIndex = c.getColumnIndexOrThrow                                      </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">1925                             (LauncherSettings.Favorites.INTENT);                                         </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">1926                     final int titleIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">1927                             (LauncherSettings.Favorites.TITLE);                                          </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">1928                     final int iconTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">1929                             LauncherSettings.Favorites.ICON_TYPE);                                       </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1930                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">1931                     final int iconPackageIndex = c.getColumnIndexOrThrow(                                </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">1932                             LauncherSettings.Favorites.ICON_PACKAGE);                                    </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">1933                     final int iconResourceIndex = c.getColumnIndexOrThrow(                               </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">1934                             LauncherSettings.Favorites.ICON_RESOURCE);                                   </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">1935                     final int containerIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">1936                             LauncherSettings.Favorites.CONTAINER);                                       </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">1937                     final int itemTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">1938                             LauncherSettings.Favorites.ITEM_TYPE);                                       </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">1939                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">1940                             LauncherSettings.Favorites.APPWIDGET_ID);                                    </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">1941                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                          </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">1942                             LauncherSettings.Favorites.APPWIDGET_PROVIDER);                              </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">1943                     final int screenIndex = c.getColumnIndexOrThrow(                                     </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">1944                             LauncherSettings.Favorites.SCREEN);                                          </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">1945                     final int cellXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">1946                             (LauncherSettings.Favorites.CELLX);                                          </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">1947                     final int cellYIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">1948                             (LauncherSettings.Favorites.CELLY);                                          </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">1949                     final int spanXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">1950                             (LauncherSettings.Favorites.SPANX);                                          </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">1951                     final int spanYIndex = c.getColumnIndexOrThrow(                                      </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">1952                             LauncherSettings.Favorites.SPANY);                                           </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">1953                     final int restoredIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">1954                             LauncherSettings.Favorites.RESTORED);                                        </span>
<span class="3162637821619353517" onmouseenter="enter('3162637821619353517');" onmouseout="out('3162637821619353517');" style="">1955                     final int profileIdIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="-1125432391574533143" onmouseenter="enter('-1125432391574533143');" onmouseout="out('-1125432391574533143');" style="">1956                             LauncherSettings.Favorites.PROFILE_ID);                                      </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">1957                     //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);      </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">1958                     //final int displayModeIndex = c.getColumnIndexOrThrow(                              </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">1959                     //        LauncherSettings.Favorites.DISPLAY_MODE);                                  </span>
<span  style="">1960                                                                                                          </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1961                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1962                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1963                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1964                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1965                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1966                     Intent intent;                                                                       </span>
<span class="8928715163618104503" onmouseenter="enter('8928715163618104503');" onmouseout="out('8928715163618104503');" style="">1967                     UserHandleCompat user;                                                               </span>
<span  style="">1968                                                                                                          </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">1969                     while (!mStopped &amp;&amp; c.moveToNext()) {                                                </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1970                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1971                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1972                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1973                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span class="4933910026947534491" onmouseenter="enter('4933910026947534491');" onmouseout="out('4933910026947534491');" style="">1974                             boolean allowMissingTarget = false;                                          </span>
<span  style="">1975                                                                                                          </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1976                             switch (itemType) {                                                          </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1977                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1978                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1979                                 id = c.getLong(idIndex);                                                 </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1980                                 intentDescription = c.getString(intentIndex);                            </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="">1981                                 long serialNumber = c.getInt(profileIdIndex);                            </span>
<span class="-4273089527731895214" onmouseenter="enter('-4273089527731895214');" onmouseout="out('-4273089527731895214');" style="">1982                                 user = mUserManager.getUserForSerialNumber(serialNumber);                </span>
<span class="-3834292976309282984" onmouseenter="enter('-3834292976309282984');" onmouseout="out('-3834292976309282984');" style="">1983                                 int promiseType = c.getInt(restoredIndex);                               </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">1984                                 if (user == null) {                                                      </span>
<span class="-496594084298695862" onmouseenter="enter('-496594084298695862');" onmouseout="out('-496594084298695862');" style="">1985                                     // User has been deleted remove the item.                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1986                                     itemsToRemove.add(id);                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1987                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1988                                 }                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1989                                 try {                                                                    </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1990                                     intent = Intent.parseUri(intentDescription, 0);                      </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1991                                     ComponentName cn = intent.getComponent();                            </span>
<span class="3739674956299895084" onmouseenter="enter('3739674956299895084');" onmouseout="out('3739674956299895084');" style="">1992                                     if (cn != null &amp;&amp; cn.getPackageName() != null) {                     </span>
<span class="-7017860263960771696" onmouseenter="enter('-7017860263960771696');" onmouseout="out('-7017860263960771696');" style="">1993                                         boolean validPkg = launcherApps.isPackageEnabledForProfile(      </span>
<span class="-8206530135326160205" onmouseenter="enter('-8206530135326160205');" onmouseout="out('-8206530135326160205');" style="">1994                                                 cn.getPackageName(), user);                              </span>
<span class="2397899750057092636" onmouseenter="enter('2397899750057092636');" onmouseout="out('2397899750057092636');" style="">1995                                         boolean validComponent = validPkg &amp;&amp;                             </span>
<span class="8762069982139369869" onmouseenter="enter('8762069982139369869');" onmouseout="out('8762069982139369869');" style="">1996                                                 launcherApps.isActivityEnabledForProfile(cn, user);      </span>
<span  style="">1997                                                                                                          </span>
<span class="-99499348404964068" onmouseenter="enter('-99499348404964068');" onmouseout="out('-99499348404964068');" style="">1998                                         if (validComponent) {                                            </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1999                                             if (restored) {                                              </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">2000                                                 // no special handling necessary for this item           </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2001                                                 restoredRows.add(id);                                    </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2002                                                 restored = false;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2003                                             }                                                            </span>
<span class="6348728592662235672" onmouseenter="enter('6348728592662235672');" onmouseout="out('6348728592662235672');" style="">2004                                         } else if (validPkg) {                                           </span>
<span class="-6379280176207841217" onmouseenter="enter('-6379280176207841217');" onmouseout="out('-6379280176207841217');" style="">2005                                             intent = null;                                               </span>
<span class="-5338271721329837400" onmouseenter="enter('-5338271721329837400');" onmouseout="out('-5338271721329837400');" style="">2006                                             if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {</span>
<span class="5709472974278481468" onmouseenter="enter('5709472974278481468');" onmouseout="out('5709472974278481468');" style="">2007                                                 // We allow auto install apps to have their intent       </span>
<span class="-2650685759805982432" onmouseenter="enter('-2650685759805982432');" onmouseout="out('-2650685759805982432');" style="">2008                                                 // updated after an install.                             </span>
<span class="-9107195642058231815" onmouseenter="enter('-9107195642058231815');" onmouseout="out('-9107195642058231815');" style="">2009                                                 intent = manager.getLaunchIntentForPackage(              </span>
<span class="2095835690487424293" onmouseenter="enter('2095835690487424293');" onmouseout="out('2095835690487424293');" style="">2010                                                         cn.getPackageName());                            </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="">2011                                                 if (intent != null) {                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2012                                                     ContentValues values = new ContentValues();          </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="">2013                                                     values.put(LauncherSettings.Favorites.INTENT,        </span>
<span class="-6799954997008316510" onmouseenter="enter('-6799954997008316510');" onmouseout="out('-6799954997008316510');" style="">2014                                                             intent.toUri(0));                            </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2015                                                     String where = BaseColumns._ID + &quot;= ?&quot;;              </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2016                                                     String[] args = {Long.toString(id)};                 </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style=""><abbr title="2017                                                     contentResolver.update(contentUri, values, where, args);">2017                                                     contentResolver.update(contentUri, values, where, arg</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2018                                                 }                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2019                                             }                                                            </span>
<span  style="">2020                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">2021                                             if (intent == null) {                                        </span>
<span class="8006468267706457929" onmouseenter="enter('8006468267706457929');" onmouseout="out('8006468267706457929');" style="">2022                                                 // The app is installed but the component is no          </span>
<span class="7757985899517234268" onmouseenter="enter('7757985899517234268');" onmouseout="out('7757985899517234268');" style="">2023                                                 // longer available.                                     </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2024                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="-4265604912045441952" onmouseenter="enter('-4265604912045441952');" onmouseout="out('-4265604912045441952');" style="">2025                                                         &quot;Invalid component removed: &quot; + cn, true);       </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2026                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2027                                                 continue;                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2028                                             } else {                                                     </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">2029                                                 // no special handling necessary for this item           </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2030                                                 restoredRows.add(id);                                    </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2031                                                 restored = false;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2032                                             }                                                            </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">2033                                         } else if (restored) {                                           </span>
<span class="6723757088957997679" onmouseenter="enter('6723757088957997679');" onmouseout="out('6723757088957997679');" style="">2034                                             // Package is not yet available but might be                 </span>
<span class="9210943103787239320" onmouseenter="enter('9210943103787239320');" onmouseout="out('9210943103787239320');" style="">2035                                             // installed later.                                          </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2036                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">2037                                                     &quot;package not yet restored: &quot; + cn, true);            </span>
<span  style="">2038                                                                                                          </span>
<span class="-3623786309000722140" onmouseenter="enter('-3623786309000722140');" onmouseout="out('-3623786309000722140');" style="">2039                                             if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != 0) {</span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2040                                                 // Restore has started once.                             </span>
<span class="-3201378748433506719" onmouseenter="enter('-3201378748433506719');" onmouseout="out('-3201378748433506719');" style="">2041                                             } else if (installingPkgs.contains(cn.getPackageName())) {   </span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2042                                                 // App restore has started. Update the flag              </span>
<span class="-8644667183049601729" onmouseenter="enter('-8644667183049601729');" onmouseout="out('-8644667183049601729');" style="">2043                                                 promiseType |= ShortcutInfo.FLAG_RESTORE_STARTED;        </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2044                                                 ContentValues values = new ContentValues();              </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="">2045                                                 values.put(LauncherSettings.Favorites.RESTORED,          </span>
<span class="-6746125005705027516" onmouseenter="enter('-6746125005705027516');" onmouseout="out('-6746125005705027516');" style="">2046                                                         promiseType);                                    </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2047                                                 String where = BaseColumns._ID + &quot;= ?&quot;;                  </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2048                                                 String[] args = {Long.toString(id)};                     </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2049                                                 contentResolver.update(contentUri, values, where, args); </span>
<span  style="">2050                                                                                                          </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2051                                             } else if (REMOVE_UNRESTORED_ICONS) {                        </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2052                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="-4630254631341932691" onmouseenter="enter('-4630254631341932691');" onmouseout="out('-4630254631341932691');" style="">2053                                                         &quot;Unrestored package removed: &quot; + cn, true);      </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2054                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2055                                                 continue;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2056                                             }                                                            </span>
<span class="-1386874848571608329" onmouseenter="enter('-1386874848571608329');" onmouseout="out('-1386874848571608329');" style="">2057                                         } else if (isSdCardReady) {                                      </span>
<span class="3796946079469102110" onmouseenter="enter('3796946079469102110');" onmouseout="out('3796946079469102110');" style="">2058                                             // Do not wait for external media load anymore.              </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">2059                                             // Log the invalid package, and remove it                    </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2060                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="">2061                                                     &quot;Invalid package removed: &quot; + cn, true);             </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2062                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2063                                             continue;                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2064                                         } else {                                                         </span>
<span class="1407932970386463384" onmouseenter="enter('1407932970386463384');" onmouseout="out('1407932970386463384');" style="">2065                                             // SdCard is not ready yet. Package might get available,     </span>
<span class="8490114520358161793" onmouseenter="enter('8490114520358161793');" onmouseout="out('8490114520358161793');" style="">2066                                             // once it is ready.                                         </span>
<span class="-6360577143290119906" onmouseenter="enter('-6360577143290119906');" onmouseout="out('-6360577143290119906');" style="">2067                                             Launcher.addDumpLog(TAG, &quot;Invalid package: &quot; + cn            </span>
<span class="-4780001113233310924" onmouseenter="enter('-4780001113233310924');" onmouseout="out('-4780001113233310924');" style="">2068                                                     + &quot; (check again later)&quot;, true);                     </span>
<span class="-8366417370187832083" onmouseenter="enter('-8366417370187832083');" onmouseout="out('-8366417370187832083');" style="">2069                                             HashSet&lt;String&gt; pkgs = sPendingPackages.get(user);           </span>
<span class="3542388323197199472" onmouseenter="enter('3542388323197199472');" onmouseout="out('3542388323197199472');" style="">2070                                             if (pkgs == null) {                                          </span>
<span class="2501092745877296895" onmouseenter="enter('2501092745877296895');" onmouseout="out('2501092745877296895');" style="">2071                                                 pkgs = new HashSet&lt;String&gt;();                            </span>
<span class="-7473793273553333759" onmouseenter="enter('-7473793273553333759');" onmouseout="out('-7473793273553333759');" style="">2072                                                 sPendingPackages.put(user, pkgs);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2073                                             }                                                            </span>
<span class="-4896386049384421066" onmouseenter="enter('-4896386049384421066');" onmouseout="out('-4896386049384421066');" style="">2074                                             pkgs.add(cn.getPackageName());                               </span>
<span class="-7690684901319719205" onmouseenter="enter('-7690684901319719205');" onmouseout="out('-7690684901319719205');" style="">2075                                             allowMissingTarget = true;                                   </span>
<span class="7315818939061071709" onmouseenter="enter('7315818939061071709');" onmouseout="out('7315818939061071709');" style="">2076                                             // Add the icon on the workspace anyway.                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2077                                         }                                                                </span>
<span class="-237996807879267337" onmouseenter="enter('-237996807879267337');" onmouseout="out('-237996807879267337');" style="">2078                                     } else if (cn == null) {                                             </span>
<span class="8972274794412921183" onmouseenter="enter('8972274794412921183');" onmouseout="out('8972274794412921183');" style="">2079                                         // For shortcuts with no component, keep them as they are        </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2080                                         restoredRows.add(id);                                            </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2081                                         restored = false;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2082                                     }                                                                    </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2083                                 } catch (URISyntaxException e) {                                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2084                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">2085                                             &quot;Invalid uri: &quot; + intentDescription, true);                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2086                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2087                                 }                                                                        </span>
<span  style="">2088                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2089                                 if (restored) {                                                          </span>
<span class="-3932834939055806292" onmouseenter="enter('-3932834939055806292');" onmouseout="out('-3932834939055806292');" style="">2090                                     if (user.equals(UserHandleCompat.myUserHandle())) {                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2091                                         Launcher.addDumpLog(TAG,                                         </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="">2092                                                 &quot;constructing info for partially restored package&quot;,      </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="">2093                                                 true);                                                   </span>
<span class="9114514411241404985" onmouseenter="enter('9114514411241404985');" onmouseout="out('9114514411241404985');" style="">2094                                         info = getRestoredItemInfo(c, titleIndex, intent, promiseType);  </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">2095                                         intent = getRestoredItemIntent(c, context, intent);              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2096                                     } else {                                                             </span>
<span class="5174235078557753913" onmouseenter="enter('5174235078557753913');" onmouseout="out('5174235078557753913');" style="">2097                                         // Don&#x27;t restore items for other profiles.                       </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2098                                         itemsToRemove.add(id);                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2099                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2100                                     }                                                                    </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">2101                                 } else if (itemType ==                                                   </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">2102                                         LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {              </span>
<span class="-7549941140075833136" onmouseenter="enter('-7549941140075833136');" onmouseout="out('-7549941140075833136');" style="">2103                                     info = getShortcutInfo(manager, intent, user, context, c,            </span>
<span class="-4574059466099335125" onmouseenter="enter('-4574059466099335125');" onmouseout="out('-4574059466099335125');" style="">2104                                             iconIndex, titleIndex, mLabelCache, allowMissingTarget);     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2105                                 } else {                                                                 </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">2106                                     info = getShortcutInfo(c, context, iconTypeIndex,                    </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">2107                                             iconPackageIndex, iconResourceIndex, iconIndex,              </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">2108                                             titleIndex);                                                 </span>
<span  style="">2109                                                                                                          </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">2110                                     // App shortcuts that used to be automatically added to Launcher     </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">2111                                     // didn&#x27;t always have the correct intent flags set, so do that       </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">2112                                     // here                                                              </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">2113                                     if (intent.getAction() != null &amp;&amp;                                    </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">2114                                         intent.getCategories() != null &amp;&amp;                                </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">2115                                         intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                 </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">2116                                         intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {     </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">2117                                         intent.addFlags(                                                 </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">2118                                             Intent.FLAG_ACTIVITY_NEW_TASK |                              </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">2119                                             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2120                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2121                                 }                                                                        </span>
<span  style="">2122                                                                                                          </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">2123                                 if (info != null) {                                                      </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">2124                                     info.id = id;                                                        </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">2125                                     info.intent = intent;                                                </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2126                                     container = c.getInt(containerIndex);                                </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">2127                                     info.container = container;                                          </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">2128                                     info.screenId = c.getInt(screenIndex);                               </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">2129                                     info.cellX = c.getInt(cellXIndex);                                   </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">2130                                     info.cellY = c.getInt(cellYIndex);                                   </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">2131                                     info.spanX = 1;                                                      </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">2132                                     info.spanY = 1;                                                      </span>
<span class="3045271753555441709" onmouseenter="enter('3045271753555441709');" onmouseout="out('3045271753555441709');" style="">2133                                     info.intent.putExtra(ItemInfo.EXTRA_PROFILE, serialNumber);          </span>
<span class="-4153270497324690681" onmouseenter="enter('-4153270497324690681');" onmouseout="out('-4153270497324690681');" style="">2134                                     info.isDisabled = isSafeMode                                         </span>
<span class="7337397009343704544" onmouseenter="enter('7337397009343704544');" onmouseout="out('7337397009343704544');" style="">2135                                             &amp;&amp; !Utilities.isSystemApp(context, intent);                  </span>
<span  style="">2136                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2137                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2138                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">2139                                     if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) { </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2140                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2141                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2142                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2143                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2144                                     }                                                                    </span>
<span  style="">2145                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2146                                     switch (container) {                                                 </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2147                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2148                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">2149                                         sBgWorkspaceItems.add(info);                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2150                                         break;                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">2151                                     default:                                                             </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">2152                                         // Item is in a user folder                                      </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">2153                                         FolderInfo folderInfo =                                          </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">2154                                                 findOrMakeFolder(sBgFolders, container);                 </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">2155                                         folderInfo.add(info);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2156                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2157                                     }                                                                    </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">2158                                     sBgItemsIdMap.put(info.id, info);                                    </span>
<span  style="">2159                                                                                                          </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">2160                                     // now that we&#x27;ve loaded everthing re-save it with the               </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">2161                                     // icon in case it disappears somehow.                               </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">2162                                     queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2163                                 } else {                                                                 </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">2164                                     throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2165                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2166                                 break;                                                                   </span>
<span  style="">2167                                                                                                          </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">2168                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2169                                 id = c.getLong(idIndex);                                                 </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">2170                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                </span>
<span  style="">2171                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">2172                                 folderInfo.title = c.getString(titleIndex);                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">2173                                 folderInfo.id = id;                                                      </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2174                                 container = c.getInt(containerIndex);                                    </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">2175                                 folderInfo.container = container;                                        </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">2176                                 folderInfo.screenId = c.getInt(screenIndex);                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">2177                                 folderInfo.cellX = c.getInt(cellXIndex);                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">2178                                 folderInfo.cellY = c.getInt(cellYIndex);                                 </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">2179                                 folderInfo.spanX = 1;                                                    </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">2180                                 folderInfo.spanY = 1;                                                    </span>
<span  style="">2181                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2182                                 // check &amp; update map of what&#x27;s occupied                                 </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2183                                 deleteOnInvalidPlacement.set(false);                                     </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">2184                                 if (!checkItemPlacement(occupied, folderInfo,                            </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2185                                         deleteOnInvalidPlacement)) {                                     </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2186                                     if (deleteOnInvalidPlacement.get()) {                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2187                                         itemsToRemove.add(id);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2188                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2189                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2190                                 }                                                                        </span>
<span  style="">2191                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2192                                 switch (container) {                                                     </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2193                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2194                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">2195                                         sBgWorkspaceItems.add(folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2196                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2197                                 }                                                                        </span>
<span  style="">2198                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2199                                 if (restored) {                                                          </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2200                                     // no special handling required for restored folders                 </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2201                                     restoredRows.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2202                                 }                                                                        </span>
<span  style="">2203                                                                                                          </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2204                                 sBgItemsIdMap.put(folderInfo.id, folderInfo);                            </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2205                                 sBgFolders.put(folderInfo.id, folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2206                                 break;                                                                   </span>
<span  style="">2207                                                                                                          </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2208                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2209                                 // Read all Launcher-specific widget details                             </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2210                                 int appWidgetId = c.getInt(appWidgetIdIndex);                            </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2211                                 String savedProvider = c.getString(appWidgetProviderIndex);              </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2212                                 id = c.getLong(idIndex);                                                 </span>
<span class="-6617867489767824559" onmouseenter="enter('-6617867489767824559');" onmouseout="out('-6617867489767824559');" style="">2213                                 final ComponentName component =                                          </span>
<span class="2036133433071881641" onmouseenter="enter('2036133433071881641');" onmouseout="out('2036133433071881641');" style="">2214                                         ComponentName.unflattenFromString(savedProvider);                </span>
<span  style="">2215                                                                                                          </span>
<span class="-1033311611191387821" onmouseenter="enter('-1033311611191387821');" onmouseout="out('-1033311611191387821');" style="">2216                                 final int restoreStatus = c.getInt(restoredIndex);                       </span>
<span class="-4190680795845516969" onmouseenter="enter('-4190680795845516969');" onmouseout="out('-4190680795845516969');" style="">2217                                 final boolean isIdValid = (restoreStatus &amp;                               </span>
<span class="-1481780029747642556" onmouseenter="enter('-1481780029747642556');" onmouseout="out('-1481780029747642556');" style="">2218                                         LauncherAppWidgetInfo.FLAG_ID_NOT_VALID) == 0;                   </span>
<span  style="">2219                                                                                                          </span>
<span class="5101880033416706570" onmouseenter="enter('5101880033416706570');" onmouseout="out('5101880033416706570');" style="">2220                                 final boolean wasProviderReady = (restoreStatus &amp;                        </span>
<span class="1207335416094145871" onmouseenter="enter('1207335416094145871');" onmouseout="out('1207335416094145871');" style="">2221                                         LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) == 0;             </span>
<span  style="">2222                                                                                                          </span>
<span class="-565532021680206913" onmouseenter="enter('-565532021680206913');" onmouseout="out('-565532021680206913');" style="">2223                                 final AppWidgetProviderInfo provider = isIdValid                         </span>
<span class="-1314040982621159070" onmouseenter="enter('-1314040982621159070');" onmouseout="out('-1314040982621159070');" style="">2224                                         ? widgets.getAppWidgetInfo(appWidgetId)                          </span>
<span class="-5208038715710523064" onmouseenter="enter('-5208038715710523064');" onmouseout="out('-5208038715710523064');" style="">2225                                         : findAppWidgetProviderInfoWithComponent(context, component);    </span>
<span  style="">2226                                                                                                          </span>
<span class="-3732530231777271434" onmouseenter="enter('-3732530231777271434');" onmouseout="out('-3732530231777271434');" style="">2227                                 final boolean isProviderReady = isValidProvider(provider);               </span>
<span class="-4031276934674956730" onmouseenter="enter('-4031276934674956730');" onmouseout="out('-4031276934674956730');" style="">2228                                 if (!isSafeMode &amp;&amp; wasProviderReady &amp;&amp; !isProviderReady) {               </span>
<span class="-7439259826635164411" onmouseenter="enter('-7439259826635164411');" onmouseout="out('-7439259826635164411');" style="">2229                                     String log = &quot;Deleting widget that isn&#x27;t installed anymore: &quot;        </span>
<span class="7602710093107620029" onmouseenter="enter('7602710093107620029');" onmouseout="out('7602710093107620029');" style="">2230                                             + &quot;id=&quot; + id + &quot; appWidgetId=&quot; + appWidgetId;                </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2231                                     Log.e(TAG, log);                                                     </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2232                                     Launcher.addDumpLog(TAG, log, false);                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2233                                     itemsToRemove.add(id);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2234                                 } else {                                                                 </span>
<span class="-6990378869891346567" onmouseenter="enter('-6990378869891346567');" onmouseout="out('-6990378869891346567');" style="">2235                                     if (isProviderReady) {                                               </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2236                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,           </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="">2237                                                 provider.provider);                                      </span>
<span class="-8791440271290591158" onmouseenter="enter('-8791440271290591158');" onmouseout="out('-8791440271290591158');" style="">2238                                         int[] minSpan =                                                  </span>
<span class="-461068380011135868" onmouseenter="enter('-461068380011135868');" onmouseout="out('-461068380011135868');" style="">2239                                                 Launcher.getMinSpanForWidget(context, provider);         </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2240                                         appWidgetInfo.minSpanX = minSpan[0];                             </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2241                                         appWidgetInfo.minSpanY = minSpan[1];                             </span>
<span  style="">2242                                                                                                          </span>
<span class="-4125236257298908421" onmouseenter="enter('-4125236257298908421');" onmouseout="out('-4125236257298908421');" style="">2243                                         int status = restoreStatus;                                      </span>
<span class="7579397535150427943" onmouseenter="enter('7579397535150427943');" onmouseout="out('7579397535150427943');" style="">2244                                         if (!wasProviderReady) {                                         </span>
<span class="1257696726614810242" onmouseenter="enter('1257696726614810242');" onmouseout="out('1257696726614810242');" style="">2245                                             // If provider was not previously ready, update the          </span>
<span class="2493747474831820434" onmouseenter="enter('2493747474831820434');" onmouseout="out('2493747474831820434');" style="">2246                                             // status and UI flag.                                       </span>
<span  style="">2247                                                                                                          </span>
<span class="-551194396664004778" onmouseenter="enter('-551194396664004778');" onmouseout="out('-551194396664004778');" style=""><abbr title="2248                                             // Id would be valid only if the widget restore broadcast was received.">2248                                             // Id would be valid only if the widget restore broadcast was</abbr></span>
<span class="877884548755909685" onmouseenter="enter('877884548755909685');" onmouseout="out('877884548755909685');" style="">2249                                             if (isIdValid) {                                             </span>
<span class="7708410681175562751" onmouseenter="enter('7708410681175562751');" onmouseout="out('7708410681175562751');" style="">2250                                                 status = LauncherAppWidgetInfo.RESTORE_COMPLETED;        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2251                                             } else {                                                     </span>
<span class="-2615385138309932511" onmouseenter="enter('-2615385138309932511');" onmouseout="out('-2615385138309932511');" style="">2252                                                 status &amp;= ~LauncherAppWidgetInfo                         </span>
<span class="-1081946781001842885" onmouseenter="enter('-1081946781001842885');" onmouseout="out('-1081946781001842885');" style="">2253                                                         .FLAG_PROVIDER_NOT_READY;                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2254                                             }                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2255                                         }                                                                </span>
<span class="-5649718664209503492" onmouseenter="enter('-5649718664209503492');" onmouseout="out('-5649718664209503492');" style="">2256                                         appWidgetInfo.restoreStatus = status;                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2257                                     } else {                                                             </span>
<span class="1960922256572910963" onmouseenter="enter('1960922256572910963');" onmouseout="out('1960922256572910963');" style="">2258                                         Log.v(TAG, &quot;Widget restore pending id=&quot; + id                     </span>
<span class="-310807007133679357" onmouseenter="enter('-310807007133679357');" onmouseout="out('-310807007133679357');" style="">2259                                                 + &quot; appWidgetId=&quot; + appWidgetId                          </span>
<span class="-3553458184285370274" onmouseenter="enter('-3553458184285370274');" onmouseout="out('-3553458184285370274');" style="">2260                                                 + &quot; status =&quot; + restoreStatus);                          </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2261                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,           </span>
<span class="-876368090679524620" onmouseenter="enter('-876368090679524620');" onmouseout="out('-876368090679524620');" style="">2262                                                 component);                                              </span>
<span class="5437344546404607904" onmouseenter="enter('5437344546404607904');" onmouseout="out('5437344546404607904');" style="">2263                                         appWidgetInfo.restoreStatus = restoreStatus;                     </span>
<span  style="">2264                                                                                                          </span>
<span class="3064749011557231100" onmouseenter="enter('3064749011557231100');" onmouseout="out('3064749011557231100');" style=""><abbr title="2265                                         if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) != 0) {">2265                                         if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) </abbr></span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2266                                             // Restore has started once.                                 </span>
<span class="1863960885189711466" onmouseenter="enter('1863960885189711466');" onmouseout="out('1863960885189711466');" style="">2267                                         } else if (installingPkgs.contains(component.getPackageName())) {</span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2268                                             // App restore has started. Update the flag                  </span>
<span class="-2352323974911641075" onmouseenter="enter('-2352323974911641075');" onmouseout="out('-2352323974911641075');" style="">2269                                             appWidgetInfo.restoreStatus |=                               </span>
<span class="8590583015720742314" onmouseenter="enter('8590583015720742314');" onmouseout="out('8590583015720742314');" style="">2270                                                     LauncherAppWidgetInfo.FLAG_RESTORE_STARTED;          </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2271                                         } else if (REMOVE_UNRESTORED_ICONS) {                            </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2272                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="-6243477493514584052" onmouseenter="enter('-6243477493514584052');" onmouseout="out('-6243477493514584052');" style="">2273                                                     &quot;Unrestored widget removed: &quot; + component, true);    </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2274                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2275                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2276                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2277                                     }                                                                    </span>
<span  style="">2278                                                                                                          </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2279                                     appWidgetInfo.id = id;                                               </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2280                                     appWidgetInfo.screenId = c.getInt(screenIndex);                      </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2281                                     appWidgetInfo.cellX = c.getInt(cellXIndex);                          </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2282                                     appWidgetInfo.cellY = c.getInt(cellYIndex);                          </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2283                                     appWidgetInfo.spanX = c.getInt(spanXIndex);                          </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2284                                     appWidgetInfo.spanY = c.getInt(spanYIndex);                          </span>
<span  style="">2285                                                                                                          </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2286                                     container = c.getInt(containerIndex);                                </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2287                                     if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;     </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2288                                         container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {     </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2289                                         Log.e(TAG, &quot;Widget found where container != &quot; +                  </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2290                                             &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2291                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2292                                     }                                                                    </span>
<span  style="">2293                                                                                                          </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2294                                     appWidgetInfo.container = c.getInt(containerIndex);                  </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2295                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2296                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2297                                     if (!checkItemPlacement(occupied, appWidgetInfo,                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2298                                             deleteOnInvalidPlacement)) {                                 </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2299                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2300                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2301                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2302                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2303                                     }                                                                    </span>
<span  style="">2304                                                                                                          </span>
<span class="-8698298148744232980" onmouseenter="enter('-8698298148744232980');" onmouseout="out('-8698298148744232980');" style="">2305                                     String providerName = appWidgetInfo.providerName.flattenToString();  </span>
<span class="2853568002576356463" onmouseenter="enter('2853568002576356463');" onmouseout="out('2853568002576356463');" style="">2306                                     if (!providerName.equals(savedProvider) ||                           </span>
<span class="4338446659263892125" onmouseenter="enter('4338446659263892125');" onmouseout="out('4338446659263892125');" style="">2307                                             (appWidgetInfo.restoreStatus != restoreStatus)) {            </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2308                                         ContentValues values = new ContentValues();                      </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2309                                         values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,        </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2310                                                 providerName);                                           </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="">2311                                         values.put(LauncherSettings.Favorites.RESTORED,                  </span>
<span class="6174833257706459781" onmouseenter="enter('6174833257706459781');" onmouseout="out('6174833257706459781');" style="">2312                                                 appWidgetInfo.restoreStatus);                            </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2313                                         String where = BaseColumns._ID + &quot;= ?&quot;;                          </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2314                                         String[] args = {Long.toString(id)};                             </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2315                                         contentResolver.update(contentUri, values, where, args);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2316                                     }                                                                    </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2317                                     sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                  </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2318                                     sBgAppWidgets.add(appWidgetInfo);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2319                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2320                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2321                             }                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2322                         } catch (Exception e) {                                                          </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2323                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2324                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2325                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2326                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2327                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2328                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2329                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2330                 }                                                                                        </span>
<span  style="">2331                                                                                                          </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2332                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2333                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2334                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2335                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2336                 }                                                                                        </span>
<span  style="">2337                                                                                                          </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2338                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2339                     ContentProviderClient client = contentResolver.acquireContentProviderClient(         </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="">2340                             contentUri);                                                                 </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2341                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2342                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2343                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2344                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2345                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2346                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2347                         try {                                                                            </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2348                             client.delete(LauncherSettings.Favorites.getContentUri(id, false),           </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2349                                     null, null);                                                         </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2350                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2351                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2352                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2353                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2354                 }                                                                                        </span>
<span  style="">2355                                                                                                          </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2356                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2357                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(        </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="">2358                             contentUri);                                                                 </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2359                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2360                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2361                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2362                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2363                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2364                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2365                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2366                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2367                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="5986100348417061644" onmouseenter="enter('5986100348417061644');" onmouseout="out('5986100348417061644');" style="">2368                         updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,           </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2369                                 values, selectionBuilder.toString(), null);                              </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2370                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2371                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2372                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2373                 }                                                                                        </span>
<span  style="">2374                                                                                                          </span>
<span class="-5457196494236388113" onmouseenter="enter('-5457196494236388113');" onmouseout="out('-5457196494236388113');" style="">2375                 if (!isSdCardReady &amp;&amp; !sPendingPackages.isEmpty()) {                                     </span>
<span class="371670048052179208" onmouseenter="enter('371670048052179208');" onmouseout="out('371670048052179208');" style="">2376                     context.registerReceiver(new AppsAvailabilityCheck(),                                </span>
<span class="-2250957496563467306" onmouseenter="enter('-2250957496563467306');" onmouseout="out('-2250957496563467306');" style="">2377                             new IntentFilter(StartupReceiver.SYSTEM_READY),                              </span>
<span class="-5536809824571506033" onmouseenter="enter('-5536809824571506033');" onmouseout="out('-5536809824571506033');" style="">2378                             null, sWorker);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2379                 }                                                                                        </span>
<span  style="">2380                                                                                                          </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2381                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2382                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2383                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2384                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2385                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2386                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2387                                 !sBgWorkspaceScreens.contains(screenId)) {                               </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2388                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2389                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2390                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2391                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2392                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2393                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2394                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2395                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2396                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2397                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2398                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2399                                                                                                          </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2400                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2401                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span  style="">2402                                                                                                          </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2403                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2404                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2405                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2406                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2407                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2408                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2409                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2410                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2411                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2412                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2413                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2414                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2415                     // Log to disk                                                                       </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2416                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2417                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2418                                                                                                          </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2419                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2420                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2421                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2422                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2423                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2424                                 unusedScreens.contains(screenId)) {                                      </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2425                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2426                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2427                     }                                                                                    </span>
<span  style="">2428                                                                                                          </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2429                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2430                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2431                         // Log to disk                                                                   </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2432                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +        </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2433                                 TextUtils.join(&quot;, &quot;, unusedScreens), true);                              </span>
<span  style="">2434                                                                                                          </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2435                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2436                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2437                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2438                 }                                                                                        </span>
<span  style="">2439                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2440                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2441                     Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);          </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2442                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2443                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2444                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2445                         String line = &quot;&quot;;                                                                </span>
<span  style="">2446                                                                                                          </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2447                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2448                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2449                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2450                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2451                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2452                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2453                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="-6212011147390486077" onmouseenter="enter('-6212011147390486077');" onmouseout="out('-6212011147390486077');" style="">2454                                 ItemInfo[][] screen = occupied.get(screenId);                            </span>
<span class="-8528390042415740475" onmouseenter="enter('-8528390042415740475');" onmouseout="out('-8528390042415740475');" style="">2455                                 if (x &lt; screen.length &amp;&amp; y &lt; screen[x].length) {                         </span>
<span class="2138628812736326092" onmouseenter="enter('2138628812736326092');" onmouseout="out('2138628812736326092');" style="">2456                                     line += (screen[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2457                                 } else {                                                                 </span>
<span class="3801202768225819208" onmouseenter="enter('3801202768225819208');" onmouseout="out('3801202768225819208');" style="">2458                                     line += &quot;!&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2459                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2460                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2461                         }                                                                                </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2462                         Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2463                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2464                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2465             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2466             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2467         }                                                                                                </span>
<span  style="">2468                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2469         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2470          * specified screen. */                                                                          </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2471         private void filterCurrentWorkspaceItems(long currentScreenId,                                   </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2472                 ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                   </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2473                 ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                  </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2474                 ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                  </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2475             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2476             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2477             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2478                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2479                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2480                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2481                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2482             }                                                                                            </span>
<span  style="">2483                                                                                                          </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2484             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2485             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2486             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2487             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2488             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2489                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2490                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2491                     return (int) (lhs.container - rhs.container);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2492                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2493             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2494             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2495                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2496                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2497                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2498                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2499                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2500                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2501                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2502                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2503                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2504                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2505                 } else {                                                                                 </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2506                     if (itemsOnScreen.contains(info.container)) {                                        </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2507                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2508                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2509                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2510                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2511                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2512                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2513             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2514         }                                                                                                </span>
<span  style="">2515                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2516         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2517         private void filterCurrentAppWidgets(long currentScreenId,                                       </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2518                 ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                             </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2519                 ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                   </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2520                 ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                   </span>
<span  style="">2521                                                                                                          </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2522             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2523                 if (widget == null) continue;                                                            </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2524                 if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                  </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2525                         widget.screenId == currentScreenId) {                                            </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2526                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2527                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2528                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2529                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2530             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2531         }                                                                                                </span>
<span  style="">2532                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2533         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2534         private void filterCurrentFolders(long currentScreenId,                                          </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2535                 HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                      </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2536                 HashMap&lt;Long, FolderInfo&gt; folders,                                                       </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2537                 HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                          </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2538                 HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                          </span>
<span  style="">2539                                                                                                          </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2540             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2541                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2542                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2543                 if (info == null || folder == null) continue;                                            </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2544                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                    </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2545                         info.screenId == currentScreenId) {                                              </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2546                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2547                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2548                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2549                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2550             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2551         }                                                                                                </span>
<span  style="">2552                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2553         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2554          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2555         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2556             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2557             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2558             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2559             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2560                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2561                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2562                     int cellCountX = (int) grid.numColumns;                                              </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2563                     int cellCountY = (int) grid.numRows;                                                 </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2564                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2565                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat      </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2566                     long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +           </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2567                             lhs.cellY * cellCountX + lhs.cellX);                                         </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2568                     long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +           </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2569                             rhs.cellY * cellCountX + rhs.cellX);                                         </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2570                     return (int) (lr - rr);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2571                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2572             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2573         }                                                                                                </span>
<span  style="">2574                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2575         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2576                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2577             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2578                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2579                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2580                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2581                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2582                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2583                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2584                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2585             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2586             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2587         }                                                                                                </span>
<span  style="">2588                                                                                                          </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2589         private void bindWorkspaceItems(final Callbacks oldCallbacks,                                    </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2590                 final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2591                 final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                       </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2592                 final HashMap&lt;Long, FolderInfo&gt; folders,                                                 </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2593                 ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                             </span>
<span  style="">2594                                                                                                          </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2595             final boolean postOnMainThread = (deferredBindRunnables != null);                            </span>
<span  style="">2596                                                                                                          </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2597             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2598             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2599             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2600                 final int start = i;                                                                     </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2601                 final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                        </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2602                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2603                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2604                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2605                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2606                         if (callbacks != null) {                                                         </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2607                             callbacks.bindItems(workspaceItems, start, start+chunkSize,                  </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2608                                     false);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2609                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2610                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2611                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2612                 if (postOnMainThread) {                                                                  </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="">2613                     synchronized (deferredBindRunnables) {                                               </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2614                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2615                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2616                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2617                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2618                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2619             }                                                                                            </span>
<span  style="">2620                                                                                                          </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2621             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2622             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2623                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2624                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2625                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2626                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2627                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2628                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2629                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2630                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2631                 if (postOnMainThread) {                                                                  </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="">2632                     synchronized (deferredBindRunnables) {                                               </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2633                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2634                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2635                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2636                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2637                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2638             }                                                                                            </span>
<span  style="">2639                                                                                                          </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2640             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2641             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2642             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2643                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2644                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2645                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2646                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2647                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2648                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2649                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2650                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2651                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2652                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2653                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2654                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2655                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2656                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2657             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2658         }                                                                                                </span>
<span  style="">2659                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2660         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2661          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2662          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2663         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2664             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2665             Runnable r;                                                                                  </span>
<span  style="">2666                                                                                                          </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2667             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2668             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2669             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2670             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2671                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2672                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2673                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2674             }                                                                                            </span>
<span  style="">2675                                                                                                          </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2676             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2677             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2678             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2679                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2680             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2681             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2682             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2683             synchronized (sBgLock) {                                                                     </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2684                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2685                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2686                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2687                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2688                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2689             }                                                                                            </span>
<span  style="">2690                                                                                                          </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2691             final boolean isLoadingSynchronously =                                                       </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2692                     synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                               </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2693             int currScreen = isLoadingSynchronously ? synchronizeBindPage :                              </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2694                 oldCallbacks.getCurrentWorkspaceScreen();                                                </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2695             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2696                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2697                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2698             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2699             final int currentScreen = currScreen;                                                        </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2700             final long currentScreenId = currentScreen &lt; 0                                               </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2701                     ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                           </span>
<span  style="">2702                                                                                                          </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2703             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2704             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2705             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span  style="">2706                                                                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2707             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2708             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2709             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2710             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2711                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2712             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                           </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2713                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2714             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2715             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span  style="">2716                                                                                                          </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2717             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,          </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2718                     otherWorkspaceItems);                                                                </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2719             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                      </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2720                     otherAppWidgets);                                                                    </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2721             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                   </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2722                     otherFolders);                                                                       </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2723             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2724             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span  style="">2725                                                                                                          </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2726             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2727             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2728                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2729                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2730                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2731                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2732                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2733                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2734             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2735             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span  style="">2736                                                                                                          </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2737             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span  style="">2738                                                                                                          </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2739             // Load items on the current page                                                            </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2740             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                   </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2741                     currentFolders, null);                                                               </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2742             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2743                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2744                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2745                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2746                         if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {      </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2747                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2748                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2749                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2750                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2751                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2752             }                                                                                            </span>
<span  style="">2753                                                                                                          </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2754             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2755             // work until after the first render)                                                        </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">2756             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2757                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2758             }                                                                                            </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2759             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,         </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2760                     (isLoadingSynchronously ? mDeferredBindRunnables : null));                           </span>
<span  style="">2761                                                                                                          </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2762             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2763             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2764                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2765                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2766                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2767                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2768                     }                                                                                    </span>
<span  style="">2769                                                                                                          </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2770                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2771                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2772                         Log.d(TAG, &quot;bound workspace in &quot;                                                 </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2773                             + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2774                     }                                                                                    </span>
<span  style="">2775                                                                                                          </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2776                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2777                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2778             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2779             if (isLoadingSynchronously) {                                                                </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">2780                 synchronized (mDeferredBindRunnables) {                                                  </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2781                     mDeferredBindRunnables.add(r);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2782                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2783             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2784                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2785             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2786         }                                                                                                </span>
<span  style="">2787                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2788         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2789             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2790                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2791             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2792             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2793                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2794                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2795                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2796                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2797                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2798                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2799                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2800             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2801                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2802             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2803         }                                                                                                </span>
<span  style="">2804                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2805         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2806             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2807             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2808                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2809                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2810                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2811             }                                                                                            </span>
<span  style="">2812                                                                                                          </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2813             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2814             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">2815             final ArrayList&lt;AppInfo&gt; list                                                                </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">2816                     = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                  </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2817             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2818                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2819                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2820                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2821                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2822                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2823                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2824                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">2825                         Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                   </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2826                                 + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2827                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2828                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2829             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2830             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2831             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2832                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2833             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2834                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2835             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2836         }                                                                                                </span>
<span  style="">2837                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2838         private void loadAllApps() {                                                                     </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">2839             final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span  style="">2840                                                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2841             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2842             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2843                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2844                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2845                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2846             }                                                                                            </span>
<span  style="">2847                                                                                                          </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2848             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2849             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span  style="">2850                                                                                                          </span>
<span class="-3689765283860688946" onmouseenter="enter('-3689765283860688946');" onmouseout="out('-3689765283860688946');" style="">2851             final List&lt;UserHandleCompat&gt; profiles = mUserManager.getUserProfiles();                      </span>
<span  style="">2852                                                                                                          </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2853             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2854             mBgAllAppsList.clear();                                                                      </span>
<span class="-2262518428251923925" onmouseenter="enter('-2262518428251923925');" onmouseout="out('-2262518428251923925');" style="">2855             for (UserHandleCompat user : profiles) {                                                     </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2856                 // Query for the set of apps                                                             </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">2857                 final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                     </span>
<span class="2012422809707549193" onmouseenter="enter('2012422809707549193');" onmouseout="out('2012422809707549193');" style="">2858                 List&lt;LauncherActivityInfoCompat&gt; apps = mLauncherApps.getActivityList(null, user);       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2859                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="2295985568720272905" onmouseenter="enter('2295985568720272905');" onmouseout="out('2295985568720272905');" style="">2860                     Log.d(TAG, &quot;getActivityList took &quot;                                                   </span>
<span class="-4615420342619003975" onmouseenter="enter('-4615420342619003975');" onmouseout="out('-4615420342619003975');" style="">2861                             + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms for user &quot; + user);             </span>
<span class="-305887566992077245" onmouseenter="enter('-305887566992077245');" onmouseout="out('-305887566992077245');" style="">2862                     Log.d(TAG, &quot;getActivityList got &quot; + apps.size() + &quot; apps for user &quot; + user);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2863                 }                                                                                        </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2864                 // Fail if we don&#x27;t have any apps                                                        </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">2865                 if (apps == null || apps.isEmpty()) {                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2866                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2867                 }                                                                                        </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2868                 // Sort the applications by name                                                         </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">2869                 final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                    </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">2870                 Collections.sort(apps,                                                                   </span>
<span class="-5419021632247745878" onmouseenter="enter('-5419021632247745878');" onmouseout="out('-5419021632247745878');" style="">2871                         new LauncherModel.ShortcutNameComparator(mLabelCache));                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2872                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">2873                     Log.d(TAG, &quot;sort took &quot;                                                              </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">2874                             + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2875                 }                                                                                        </span>
<span  style="">2876                                                                                                          </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2877                 // Create the ApplicationInfos                                                           </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2878                 for (int i = 0; i &lt; apps.size(); i++) {                                                  </span>
<span class="236419152399396874" onmouseenter="enter('236419152399396874');" onmouseout="out('236419152399396874');" style="">2879                     LauncherActivityInfoCompat app = apps.get(i);                                        </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2880                     // This builds the icon bitmaps.                                                     </span>
<span class="-5742259461869454243" onmouseenter="enter('-5742259461869454243');" onmouseout="out('-5742259461869454243');" style="">2881                     mBgAllAppsList.add(new AppInfo(mContext, app, user, mIconCache, mLabelCache));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2882                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2883             }                                                                                            </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2884             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2885             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2886             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span  style="">2887                                                                                                          </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2888             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2889             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2890                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2891                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2892                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2893                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2894                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2895                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">2896                             Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                             </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">2897                                 + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2898                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2899                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2900                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2901                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2902                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2903             });                                                                                          </span>
<span  style="">2904                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2905             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">2906                 Log.d(TAG, &quot;Icons processed in &quot;                                                         </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">2907                         + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2908             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2909         }                                                                                                </span>
<span  style="">2910                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2911         public void dumpState() {                                                                        </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2912             synchronized (sBgLock) {                                                                     </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2913                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2914                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2915                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2916                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2917                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2918             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2919         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2920     }                                                                                                    </span>
<span  style="">2921                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2922     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2923         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2924     }                                                                                                    </span>
<span  style="">2925                                                                                                          </span>
<span class="-2155382700972431684" onmouseenter="enter('-2155382700972431684');" onmouseout="out('-2155382700972431684');" style="">2926     private class AppsAvailabilityCheck extends BroadcastReceiver {                                      </span>
<span  style="">2927                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2928         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">2929         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2930             synchronized (sBgLock) {                                                                     </span>
<span class="4353137230087495395" onmouseenter="enter('4353137230087495395');" onmouseout="out('4353137230087495395');" style="">2931                 final LauncherAppsCompat launcherApps = LauncherAppsCompat                               </span>
<span class="7982344973763927300" onmouseenter="enter('7982344973763927300');" onmouseout="out('7982344973763927300');" style="">2932                         .getInstance(mApp.getContext());                                                 </span>
<span class="-4787354412045768116" onmouseenter="enter('-4787354412045768116');" onmouseout="out('-4787354412045768116');" style="">2933                 ArrayList&lt;String&gt; packagesRemoved;                                                       </span>
<span class="4244873154676657454" onmouseenter="enter('4244873154676657454');" onmouseout="out('4244873154676657454');" style="">2934                 for (Entry&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; entry : sPendingPackages.entrySet()) {     </span>
<span class="5975107845149456463" onmouseenter="enter('5975107845149456463');" onmouseout="out('5975107845149456463');" style="">2935                     UserHandleCompat user = entry.getKey();                                              </span>
<span class="-667022728008343360" onmouseenter="enter('-667022728008343360');" onmouseout="out('-667022728008343360');" style="">2936                     packagesRemoved = new ArrayList&lt;String&gt;();                                           </span>
<span class="1474457728386669675" onmouseenter="enter('1474457728386669675');" onmouseout="out('1474457728386669675');" style="">2937                     for (String pkg : entry.getValue()) {                                                </span>
<span class="-3589045475490406733" onmouseenter="enter('-3589045475490406733');" onmouseout="out('-3589045475490406733');" style="">2938                         if (!launcherApps.isPackageEnabledForProfile(pkg, user)) {                       </span>
<span class="-1955449888814909626" onmouseenter="enter('-1955449888814909626');" onmouseout="out('-1955449888814909626');" style="">2939                             Launcher.addDumpLog(TAG, &quot;Package not found: &quot; + pkg, true);                 </span>
<span class="-7762323097919758551" onmouseenter="enter('-7762323097919758551');" onmouseout="out('-7762323097919758551');" style="">2940                             packagesRemoved.add(pkg);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2941                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2942                     }                                                                                    </span>
<span class="-1545108570433514025" onmouseenter="enter('-1545108570433514025');" onmouseout="out('-1545108570433514025');" style="">2943                     if (!packagesRemoved.isEmpty()) {                                                    </span>
<span class="7608410434352572746" onmouseenter="enter('7608410434352572746');" onmouseout="out('7608410434352572746');" style="">2944                         enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE,       </span>
<span class="-7140992629790434736" onmouseenter="enter('-7140992629790434736');" onmouseout="out('-7140992629790434736');" style="">2945                                 packagesRemoved.toArray(new String[packagesRemoved.size()]), user));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2946                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2947                 }                                                                                        </span>
<span class="483878637633217436" onmouseenter="enter('483878637633217436');" onmouseout="out('483878637633217436');" style="">2948                 sPendingPackages.clear();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2949             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2950         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2951     }                                                                                                    </span>
<span  style="">2952                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2953     /**                                                                                                  </span>
<span class="-4757889214551148663" onmouseenter="enter('-4757889214551148663');" onmouseout="out('-4757889214551148663');" style="">2954      * Workaround to re-check unrestored items, in-case they were installed but the Package-ADD          </span>
<span class="-7981308590935764825" onmouseenter="enter('-7981308590935764825');" onmouseout="out('-7981308590935764825');" style="">2955      * runnable was missed by the launcher.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2956      */                                                                                                  </span>
<span class="-1837604298505960192" onmouseenter="enter('-1837604298505960192');" onmouseout="out('-1837604298505960192');" style="">2957     public void recheckRestoredItems(final Context context) {                                            </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2958         Runnable r = new Runnable() {                                                                    </span>
<span  style="">2959                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2960             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2961             public void run() {                                                                          </span>
<span class="4897732594040868406" onmouseenter="enter('4897732594040868406');" onmouseout="out('4897732594040868406');" style="">2962                 LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);               </span>
<span class="2615938583470046073" onmouseenter="enter('2615938583470046073');" onmouseout="out('2615938583470046073');" style="">2963                 HashSet&lt;String&gt; installedPackages = new HashSet&lt;String&gt;();                               </span>
<span class="-7713836903288582020" onmouseenter="enter('-7713836903288582020');" onmouseout="out('-7713836903288582020');" style="">2964                 UserHandleCompat user = UserHandleCompat.myUserHandle();                                 </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2965                 synchronized(sBgLock) {                                                                  </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="">2966                     for (ItemInfo info : sBgItemsIdMap.values()) {                                       </span>
<span class="3613572740963864398" onmouseenter="enter('3613572740963864398');" onmouseout="out('3613572740963864398');" style="">2967                         if (info instanceof ShortcutInfo) {                                              </span>
<span class="-639177275705060315" onmouseenter="enter('-639177275705060315');" onmouseout="out('-639177275705060315');" style="">2968                             ShortcutInfo si = (ShortcutInfo) info;                                       </span>
<span class="7536634611316201502" onmouseenter="enter('7536634611316201502');" onmouseout="out('7536634611316201502');" style="">2969                             if (si.isPromise() &amp;&amp; si.getTargetComponent() != null                        </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="">2970                                     &amp;&amp; launcherApps.isPackageEnabledForProfile(                          </span>
<span class="8387940407390797707" onmouseenter="enter('8387940407390797707');" onmouseout="out('8387940407390797707');" style="">2971                                             si.getTargetComponent().getPackageName(), user)) {           </span>
<span class="8027032983651882823" onmouseenter="enter('8027032983651882823');" onmouseout="out('8027032983651882823');" style="">2972                                 installedPackages.add(si.getTargetComponent().getPackageName());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2973                             }                                                                            </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style="">2974                         } else if (info instanceof LauncherAppWidgetInfo) {                              </span>
<span class="-3531080121586908110" onmouseenter="enter('-3531080121586908110');" onmouseout="out('-3531080121586908110');" style="">2975                             LauncherAppWidgetInfo widget = (LauncherAppWidgetInfo) info;                 </span>
<span class="-6148029265216954679" onmouseenter="enter('-6148029265216954679');" onmouseout="out('-6148029265216954679');" style="">2976                             if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY)     </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="">2977                                     &amp;&amp; launcherApps.isPackageEnabledForProfile(                          </span>
<span class="4286562368203116307" onmouseenter="enter('4286562368203116307');" onmouseout="out('4286562368203116307');" style="">2978                                             widget.providerName.getPackageName(), user)) {               </span>
<span class="-5968826008275428630" onmouseenter="enter('-5968826008275428630');" onmouseout="out('-5968826008275428630');" style="">2979                                 installedPackages.add(widget.providerName.getPackageName());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2980                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2981                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2982                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2983                 }                                                                                        </span>
<span  style="">2984                                                                                                          </span>
<span class="-8755538775344321333" onmouseenter="enter('-8755538775344321333');" onmouseout="out('-8755538775344321333');" style="">2985                 if (!installedPackages.isEmpty()) {                                                      </span>
<span class="1551205659826155261" onmouseenter="enter('1551205659826155261');" onmouseout="out('1551205659826155261');" style="">2986                     final ArrayList&lt;AppInfo&gt; restoredApps = new ArrayList&lt;AppInfo&gt;();                    </span>
<span class="-3020018355032355950" onmouseenter="enter('-3020018355032355950');" onmouseout="out('-3020018355032355950');" style="">2987                     for (String pkg : installedPackages) {                                               </span>
<span class="-1472387192310078173" onmouseenter="enter('-1472387192310078173');" onmouseout="out('-1472387192310078173');" style="">2988                         for (LauncherActivityInfoCompat info : launcherApps.getActivityList(pkg, user)) {</span>
<span class="-4626697810297530275" onmouseenter="enter('-4626697810297530275');" onmouseout="out('-4626697810297530275');" style="">2989                             restoredApps.add(new AppInfo(context, info, user, mIconCache, null));        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2990                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2991                     }                                                                                    </span>
<span  style="">2992                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">2993                     final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;            </span>
<span class="838327603557009686" onmouseenter="enter('838327603557009686');" onmouseout="out('838327603557009686');" style="">2994                     if (!restoredApps.isEmpty()) {                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2995                         mHandler.post(new Runnable() {                                                   </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2996                             public void run() {                                                          </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2997                                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;             </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2998                                 if (callbacks == cb &amp;&amp; cb != null) {                                     </span>
<span class="-7685400884791180573" onmouseenter="enter('-7685400884791180573');" onmouseout="out('-7685400884791180573');" style="">2999                                     callbacks.bindAppsRestored(restoredApps);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3000                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3001                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3002                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3003                     }                                                                                    </span>
<span  style="">3004                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3005                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3006             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3007         };                                                                                               </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style="">3008         sWorker.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3009     }                                                                                                    </span>
<span  style="">3010                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">3011     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">3012         int mOp;                                                                                         </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">3013         String[] mPackages;                                                                              </span>
<span class="2923888301096709084" onmouseenter="enter('2923888301096709084');" onmouseout="out('2923888301096709084');" style="">3014         UserHandleCompat mUser;                                                                          </span>
<span  style="">3015                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">3016         public static final int OP_NONE = 0;                                                             </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">3017         public static final int OP_ADD = 1;                                                              </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">3018         public static final int OP_UPDATE = 2;                                                           </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">3019         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">3020         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">3021                                                                                                          </span>
<span  style="">3022                                                                                                          </span>
<span class="3202497835561249087" onmouseenter="enter('3202497835561249087');" onmouseout="out('3202497835561249087');" style="">3023         public PackageUpdatedTask(int op, String[] packages, UserHandleCompat user) {                    </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">3024             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">3025             mPackages = packages;                                                                        </span>
<span class="2953270128049103408" onmouseenter="enter('2953270128049103408');" onmouseout="out('2953270128049103408');" style="">3026             mUser = user;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3027         }                                                                                                </span>
<span  style="">3028                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3029         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">3030             final Context context = mApp.getContext();                                                   </span>
<span  style="">3031                                                                                                          </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">3032             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">3033             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">3034             switch (mOp) {                                                                               </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">3035                 case OP_ADD:                                                                             </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3036                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">3037                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);         </span>
<span class="6575289823687229863" onmouseenter="enter('6575289823687229863');" onmouseout="out('6575289823687229863');" style="">3038                         mIconCache.remove(packages[i], mUser);                                           </span>
<span class="-4330949928576769866" onmouseenter="enter('-4330949928576769866');" onmouseout="out('-4330949928576769866');" style="">3039                         mBgAllAppsList.addPackage(context, packages[i], mUser);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3040                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3041                     break;                                                                               </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">3042                 case OP_UPDATE:                                                                          </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3043                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">3044                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);      </span>
<span class="4552988343352109939" onmouseenter="enter('4552988343352109939');" onmouseout="out('4552988343352109939');" style="">3045                         mBgAllAppsList.updatePackage(context, packages[i], mUser);                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3046                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3047                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3048                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3049                     break;                                                                               </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">3050                 case OP_REMOVE:                                                                          </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">3051                 case OP_UNAVAILABLE:                                                                     </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3052                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">3053                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);      </span>
<span class="-4221302437709808804" onmouseenter="enter('-4221302437709808804');" onmouseout="out('-4221302437709808804');" style="">3054                         mBgAllAppsList.removePackage(packages[i], mUser);                                </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3055                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3056                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3057                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3058                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3059             }                                                                                            </span>
<span  style="">3060                                                                                                          </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">3061             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">3062             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">3063             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span  style="">3064                                                                                                          </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">3065             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">3066                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">3067                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3068             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">3069             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">3070                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">3071                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3072             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">3073             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">3074                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">3075                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3076             }                                                                                            </span>
<span  style="">3077                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">3078             final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                    </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">3079             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">3080                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3081                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3082             }                                                                                            </span>
<span  style="">3083                                                                                                          </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">3084             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">3085                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">3086                 if (LauncherAppState.isDisableAllApps()) {                                               </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">3087                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="">3088                     addAndBindAddedWorkspaceApps(context, addedInfos);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3089                 } else {                                                                                 </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="">3090                     addAppsToAllApps(context, added);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3091                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3092             }                                                                                            </span>
<span  style="">3093                                                                                                          </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">3094             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">3095                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span  style="">3096                                                                                                          </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">3097                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">3098                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">3099                     ArrayList&lt;ItemInfo&gt; infos =                                                          </span>
<span class="4076745085710284833" onmouseenter="enter('4076745085710284833');" onmouseout="out('4076745085710284833');" style="">3100                             getItemInfoForComponentName(a.componentName, mUser);                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3101                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">3102                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3103                             ShortcutInfo info = (ShortcutInfo) i;                                        </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">3104                             info.title = a.title.toString();                                             </span>
<span class="911685269403024085" onmouseenter="enter('911685269403024085');" onmouseout="out('911685269403024085');" style="">3105                             info.contentDescription = a.contentDescription;                              </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3106                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3107                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3108                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3109                 }                                                                                        </span>
<span  style="">3110                                                                                                          </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3111                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3112                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3113                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3114                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">3115                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3116                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3117                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3118                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3119             }                                                                                            </span>
<span  style="">3120                                                                                                          </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">3121             final ArrayList&lt;String&gt; removedPackageNames =                                                </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">3122                     new ArrayList&lt;String&gt;();                                                             </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">3123             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">3124                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">3125                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">3126             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">3127                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">3128                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3129                 for (int i=0; i&lt;N; i++) {                                                                </span>
<span class="1189279971614907536" onmouseenter="enter('1189279971614907536');" onmouseout="out('1189279971614907536');" style="">3130                     if (isPackageDisabled(context, packages[i], mUser)) {                                </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">3131                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3132                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3133                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3134             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">3135             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">3136             for (String pn : removedPackageNames) {                                                      </span>
<span class="6482411304432401961" onmouseenter="enter('6482411304432401961');" onmouseout="out('6482411304432401961');" style="">3137                 deletePackageFromDatabase(context, pn, mUser);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3138             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">3139             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">3140             for (AppInfo a : removedApps) {                                                              </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="">3141                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);         </span>
<span class="7293231507608058112" onmouseenter="enter('7293231507608058112');" onmouseout="out('7293231507608058112');" style="">3142                 deleteItemsFromDatabase(context, infos);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3143             }                                                                                            </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">3144             if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                              </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">3145                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">3146                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">3147                 SharedPreferences sp =                                                                   </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">3148                         context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                       </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">3149                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">3150                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3151                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3152                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3153                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3154                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-4641714223338514236" onmouseenter="enter('-4641714223338514236');" onmouseout="out('-4641714223338514236');" style="">3155                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps, mUser);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3156                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3157                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3158                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3159             }                                                                                            </span>
<span  style="">3160                                                                                                          </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">3161             final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="">3162                     getSortedWidgetsAndShortcuts(context);                                               </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3163             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3164                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3165                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3166                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3167                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">3168                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3169                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3170                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3171             });                                                                                          </span>
<span  style="">3172                                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">3173             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3174             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3175                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3176                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3177                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">3178                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3179                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3180                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3181             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3182         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3183     }                                                                                                    </span>
<span  style="">3184                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">3185     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">3186     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3187         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">3188         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="3637822346102420347" onmouseenter="enter('3637822346102420347');" onmouseout="out('3637822346102420347');" style="">3189         widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());       </span>
<span  style="">3190                                                                                                          </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">3191         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">3192         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="3220762690300374865" onmouseenter="enter('3220762690300374865');" onmouseout="out('3220762690300374865');" style="">3193         Collections.sort(widgetsAndShortcuts, new WidgetAndShortcutNameComparator(context));             </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">3194         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3195     }                                                                                                    </span>
<span  style="">3196                                                                                                          </span>
<span class="-7287747070935657411" onmouseenter="enter('-7287747070935657411');" onmouseout="out('-7287747070935657411');" style="">3197     private static boolean isPackageDisabled(Context context, String packageName,                        </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3198             UserHandleCompat user) {                                                                     </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3199         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="2722752944691677150" onmouseenter="enter('2722752944691677150');" onmouseout="out('2722752944691677150');" style="">3200         return !launcherApps.isPackageEnabledForProfile(packageName, user);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3201     }                                                                                                    </span>
<span  style="">3202                                                                                                          </span>
<span class="5738691957451055953" onmouseenter="enter('5738691957451055953');" onmouseout="out('5738691957451055953');" style="">3203     public static boolean isValidPackageActivity(Context context, ComponentName cn,                      </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3204             UserHandleCompat user) {                                                                     </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">3205         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3206             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3207         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3208         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="-6788056339565196353" onmouseenter="enter('-6788056339565196353');" onmouseout="out('-6788056339565196353');" style="">3209         if (!launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user)) {                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3210             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3211         }                                                                                                </span>
<span class="6138596583040601663" onmouseenter="enter('6138596583040601663');" onmouseout="out('6138596583040601663');" style="">3212         return launcherApps.isActivityEnabledForProfile(cn, user);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3213     }                                                                                                    </span>
<span  style="">3214                                                                                                          </span>
<span class="5839979877555451943" onmouseenter="enter('5839979877555451943');" onmouseout="out('5839979877555451943');" style="">3215     public static boolean isValidPackage(Context context, String packageName,                            </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3216             UserHandleCompat user) {                                                                     </span>
<span class="2797777100746091358" onmouseenter="enter('2797777100746091358');" onmouseout="out('2797777100746091358');" style="">3217         if (packageName == null) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3218             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3219         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3220         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="7814688882071205012" onmouseenter="enter('7814688882071205012');" onmouseout="out('7814688882071205012');" style="">3221         return launcherApps.isPackageEnabledForProfile(packageName, user);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3222     }                                                                                                    </span>
<span  style="">3223                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3224     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">3225      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">3226      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3227      */                                                                                                  </span>
<span class="6864587742410665601" onmouseenter="enter('6864587742410665601');" onmouseout="out('6864587742410665601');" style="">3228     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent,                </span>
<span class="-9038086405553223291" onmouseenter="enter('-9038086405553223291');" onmouseout="out('-9038086405553223291');" style="">3229             int promiseType) {                                                                           </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3230         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3231         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="4581768130100169027" onmouseenter="enter('4581768130100169027');" onmouseout="out('4581768130100169027');" style="">3232         mIconCache.getTitleAndIcon(info, intent, info.user, true);                                       </span>
<span  style="">3233                                                                                                          </span>
<span class="-7011074266974647989" onmouseenter="enter('-7011074266974647989');" onmouseout="out('-7011074266974647989');" style="">3234         if ((promiseType &amp; ShortcutInfo.FLAG_RESTORED_ICON) != 0) {                                      </span>
<span class="-8984449213491193878" onmouseenter="enter('-8984449213491193878');" onmouseout="out('-8984449213491193878');" style="">3235             String title = (cursor != null) ? cursor.getString(titleIndex) : null;                       </span>
<span class="-5841612334834081385" onmouseenter="enter('-5841612334834081385');" onmouseout="out('-5841612334834081385');" style="">3236             if (!TextUtils.isEmpty(title)) {                                                             </span>
<span class="-2613617994889375298" onmouseenter="enter('-2613617994889375298');" onmouseout="out('-2613617994889375298');" style="">3237                 info.title = title;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3238             }                                                                                            </span>
<span class="-5174755841373748942" onmouseenter="enter('-5174755841373748942');" onmouseout="out('-5174755841373748942');" style="">3239             info.status = ShortcutInfo.FLAG_RESTORED_ICON;                                               </span>
<span class="2528235782114549087" onmouseenter="enter('2528235782114549087');" onmouseout="out('2528235782114549087');" style="">3240         } else if  ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {                            </span>
<span class="-7717414875603328452" onmouseenter="enter('-7717414875603328452');" onmouseout="out('-7717414875603328452');" style="">3241             if (TextUtils.isEmpty(info.title)) {                                                         </span>
<span class="-5806908871812941257" onmouseenter="enter('-5806908871812941257');" onmouseout="out('-5806908871812941257');" style="">3242                 info.title = (cursor != null) ? cursor.getString(titleIndex) : &quot;&quot;;                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3243             }                                                                                            </span>
<span class="-4388547064813731487" onmouseenter="enter('-4388547064813731487');" onmouseout="out('-4388547064813731487');" style="">3244             info.status = ShortcutInfo.FLAG_AUTOINTALL_ICON;                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3245         } else {                                                                                         </span>
<span class="5717376002108262372" onmouseenter="enter('5717376002108262372');" onmouseout="out('5717376002108262372');" style="">3246             throw new InvalidParameterException(&quot;Invalid restoreType &quot; + promiseType);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3247         }                                                                                                </span>
<span  style="">3248                                                                                                          </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3249         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3250                 info.title.toString(), info.user);                                                       </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3251         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3783926904025262102" onmouseenter="enter('-3783926904025262102');" onmouseout="out('-3783926904025262102');" style="">3252         info.promisedIntent = intent;                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3253         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3254     }                                                                                                    </span>
<span  style="">3255                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3256     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">3257      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">3258      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3259      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">3260     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3261         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-3881801991978262069" onmouseenter="enter('-3881801991978262069');" onmouseout="out('-3881801991978262069');" style="">3262         return getMarketIntent(componentName.getPackageName());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3263     }                                                                                                    </span>
<span  style="">3264                                                                                                          </span>
<span class="-3260913833937220020" onmouseenter="enter('-3260913833937220020');" onmouseout="out('-3260913833937220020');" style="">3265     static Intent getMarketIntent(String packageName) {                                                  </span>
<span class="-9094317775268459694" onmouseenter="enter('-9094317775268459694');" onmouseout="out('-9094317775268459694');" style="">3266         return new Intent(Intent.ACTION_VIEW)                                                            </span>
<span class="273234347361851615" onmouseenter="enter('273234347361851615');" onmouseout="out('273234347361851615');" style="">3267             .setData(new Uri.Builder()                                                                   </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">3268                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">3269                 .authority(&quot;details&quot;)                                                                    </span>
<span class="6782694763028009203" onmouseenter="enter('6782694763028009203');" onmouseout="out('6782694763028009203');" style="">3270                 .appendQueryParameter(&quot;id&quot;, packageName)                                                 </span>
<span class="-5732724158529108102" onmouseenter="enter('-5732724158529108102');" onmouseout="out('-5732724158529108102');" style="">3271                 .build());                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3272     }                                                                                                    </span>
<span  style="">3273                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3274     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">3275      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">3276      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3277      */                                                                                                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="">3278     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                           </span>
<span class="6504255554925479471" onmouseenter="enter('6504255554925479471');" onmouseout="out('6504255554925479471');" style="">3279             UserHandleCompat user, Context context) {                                                    </span>
<span class="-7378868523772977866" onmouseenter="enter('-7378868523772977866');" onmouseout="out('-7378868523772977866');" style="">3280         return getShortcutInfo(manager, intent, user, context, null, -1, -1, null, false);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3281     }                                                                                                    </span>
<span  style="">3282                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3283     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">3284      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">3285      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">3286      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3287      */                                                                                                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="">3288     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                           </span>
<span class="-8761535452245299531" onmouseenter="enter('-8761535452245299531');" onmouseout="out('-8761535452245299531');" style="">3289             UserHandleCompat user, Context context, Cursor c, int iconIndex, int titleIndex,             </span>
<span class="3517019325264382616" onmouseenter="enter('3517019325264382616');" onmouseout="out('3517019325264382616');" style="">3290             HashMap&lt;Object, CharSequence&gt; labelCache, boolean allowMissingTarget) {                      </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">3291         if (user == null) {                                                                              </span>
<span class="6545168092911351889" onmouseenter="enter('6545168092911351889');" onmouseout="out('6545168092911351889');" style="">3292             Log.d(TAG, &quot;Null user found in getShortcutInfo&quot;);                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3293             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3294         }                                                                                                </span>
<span  style="">3295                                                                                                          </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3296         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-5224470428335408787" onmouseenter="enter('-5224470428335408787');" onmouseout="out('-5224470428335408787');" style="">3297         if (componentName == null) {                                                                     </span>
<span class="4371782537001302642" onmouseenter="enter('4371782537001302642');" onmouseout="out('4371782537001302642');" style="">3298             Log.d(TAG, &quot;Missing component found in getShortcutInfo: &quot; + componentName);                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3299             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3300         }                                                                                                </span>
<span  style="">3301                                                                                                          </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">3302         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">3303         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="6894377559056826774" onmouseenter="enter('6894377559056826774');" onmouseout="out('6894377559056826774');" style="">3304         newIntent.setComponent(componentName);                                                           </span>
<span class="-966571371435372555" onmouseenter="enter('-966571371435372555');" onmouseout="out('-966571371435372555');" style="">3305         LauncherActivityInfoCompat lai = mLauncherApps.resolveActivity(newIntent, user);                 </span>
<span class="6800790308293325816" onmouseenter="enter('6800790308293325816');" onmouseout="out('6800790308293325816');" style="">3306         if ((lai == null) &amp;&amp; !allowMissingTarget) {                                                      </span>
<span class="-2395110402435537171" onmouseenter="enter('-2395110402435537171');" onmouseout="out('-2395110402435537171');" style="">3307             Log.d(TAG, &quot;Missing activity found in getShortcutInfo: &quot; + componentName);                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3308             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3309         }                                                                                                </span>
<span  style="">3310                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3311         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3312                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">3313         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">3314         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">3315         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">3316         // have icons anyway.                                                                            </span>
<span class="-6777959075043703494" onmouseenter="enter('-6777959075043703494');" onmouseout="out('-6777959075043703494');" style="">3317         Bitmap icon = mIconCache.getIcon(componentName, lai, labelCache);                                </span>
<span  style="">3318                                                                                                          </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3319         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3320         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3321             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3322                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3323             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3324         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3325         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3326         if (icon == null) {                                                                              </span>
<span class="-1443979577510132687" onmouseenter="enter('-1443979577510132687');" onmouseout="out('-1443979577510132687');" style="">3327             icon = mIconCache.getDefaultIcon(user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3328             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3329         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3330         info.setIcon(icon);                                                                              </span>
<span  style="">3331                                                                                                          </span>
<span class="-7595242445841823644" onmouseenter="enter('-7595242445841823644');" onmouseout="out('-7595242445841823644');" style="">3332         // From the cache.                                                                               </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">3333         if (labelCache != null) {                                                                        </span>
<span class="3073733017601521903" onmouseenter="enter('3073733017601521903');" onmouseout="out('3073733017601521903');" style="">3334             info.title = labelCache.get(componentName);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3335         }                                                                                                </span>
<span  style="">3336                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">3337         // from the resource                                                                             </span>
<span class="6778614741206473497" onmouseenter="enter('6778614741206473497');" onmouseout="out('6778614741206473497');" style="">3338         if (info.title == null &amp;&amp; lai != null) {                                                         </span>
<span class="-4488945615052684527" onmouseenter="enter('-4488945615052684527');" onmouseout="out('-4488945615052684527');" style="">3339             info.title = lai.getLabel();                                                                 </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">3340             if (labelCache != null) {                                                                    </span>
<span class="-3170508962365680295" onmouseenter="enter('-3170508962365680295');" onmouseout="out('-3170508962365680295');" style="">3341                 labelCache.put(componentName, info.title);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3342             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3343         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">3344         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3345         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3346             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">3347                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3348             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3349         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">3350         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3351         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">3352             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3353         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3354         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-7567614667172676383" onmouseenter="enter('-7567614667172676383');" onmouseout="out('-7567614667172676383');" style="">3355         info.user = user;                                                                                </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3356         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3357                 info.title.toString(), info.user);                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3358         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3359     }                                                                                                    </span>
<span  style="">3360                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3361     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3362             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3363         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3364         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3365             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3366                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="-8411217647144645125" onmouseenter="enter('-8411217647144645125');" onmouseout="out('-8411217647144645125');" style="">3367                 ComponentName cn = info.getTargetComponent();                                            </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3368                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3369                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3370                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3371             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3372                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3373                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="-5499244430299718871" onmouseenter="enter('-5499244430299718871');" onmouseout="out('-5499244430299718871');" style="">3374                     ComponentName cn = s.getTargetComponent();                                           </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3375                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3376                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3377                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3378                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3379             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3380                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3381                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3382                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3383                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3384                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3385             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3386         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3387         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3388     }                                                                                                    </span>
<span  style="">3389                                                                                                          </span>
<span class="-6017059906416334391" onmouseenter="enter('-6017059906416334391');" onmouseout="out('-6017059906416334391');" style="">3390     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname,                   </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">3391             final UserHandleCompat user) {                                                               </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3392         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3393             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3394             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="5970365724964589884" onmouseenter="enter('5970365724964589884');" onmouseout="out('5970365724964589884');" style="">3395                 if (info.user == null) {                                                                 </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3396                     return cn.equals(cname);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3397                 } else {                                                                                 </span>
<span class="9080235702604787251" onmouseenter="enter('9080235702604787251');" onmouseout="out('9080235702604787251');" style="">3398                     return cn.equals(cname) &amp;&amp; info.user.equals(user);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3399                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3400             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3401         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3402         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3403     }                                                                                                    </span>
<span  style="">3404                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3405     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3406         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3407             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3408             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3409             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3410             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3411             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3412             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3413             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3414                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3415                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3416             }                                                                                            </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="">3417             // placeholder shortcuts get special treatment, let them through too.                        </span>
<span class="-8737155453802783041" onmouseenter="enter('-8737155453802783041');" onmouseout="out('-8737155453802783041');" style="">3418             if (info.isPromise()) {                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3419                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3420             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3421         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3422         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3423     }                                                                                                    </span>
<span  style="">3424                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3425     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3426      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3427      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3428     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3429             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3430             int titleIndex) {                                                                            </span>
<span  style="">3431                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3432         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3433         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="5882358276056228538" onmouseenter="enter('5882358276056228538');" onmouseout="out('5882358276056228538');" style="">3434         // Non-app shortcuts are only supported for current user.                                        </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3435         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3436         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="">3437                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3438         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="">3439                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3440         info.title = c.getString(titleIndex);                                                            </span>
<span  style="">3441                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3442         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3443         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3444         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3445             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3446             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3447             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3448             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3449             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3450             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3451                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3452                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3453                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3454                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3455                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3456                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3457             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3458                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3459             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3460             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3461             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3462                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3463             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3464             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3465             if (icon == null) {                                                                          </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3466                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3467                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3468             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3469             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3470         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3471             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3472             if (icon == null) {                                                                          </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3473                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3474                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3475                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3476             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3477                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3478             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3479             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3480         default:                                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3481             icon = mIconCache.getDefaultIcon(info.user);                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3482             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3483             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3484             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3485         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3486         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3487         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3488     }                                                                                                    </span>
<span  style="">3489                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3490     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3491         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3492         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3493         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3494             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3495                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3496         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3497         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3498         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3499             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3500                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3501         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3502             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3503         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3504     }                                                                                                    </span>
<span  style="">3505                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3506     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3507             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3508         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3509         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3510             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3511         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3512         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="">3513                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3514         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3515     }                                                                                                    </span>
<span  style="">3516                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3517     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3518      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3519      */                                                                                                  </span>
<span class="-8933877649522571458" onmouseenter="enter('-8933877649522571458');" onmouseout="out('-8933877649522571458');" style="">3520     static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                 </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3521             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3522         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3523             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3524         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3525             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3526                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3527             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3528         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3529         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3530     }                                                                                                    </span>
<span  style="">3531                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3532     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3533         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3534         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3535         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="">3536                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3537         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3538             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3539             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3540             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3541         }                                                                                                </span>
<span  style="">3542                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3543         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3544         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3545         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="">3546                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3547         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3548             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3549             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3550         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3551             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3552             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3553                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3554                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3555                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3556                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3557                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3558                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3559                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="2974405441716858047" onmouseenter="enter('2974405441716858047');" onmouseout="out('2974405441716858047');" style="">3560                             mIconCache.getFullResIcon(resources, id),                                    </span>
<span class="-7033093369240644837" onmouseenter="enter('-7033093369240644837');" onmouseout="out('-7033093369240644837');" style="">3561                             context);                                                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3562                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3563                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3564                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3565             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3566         }                                                                                                </span>
<span  style="">3567                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3568         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3569                                                                                                          </span>
<span class="2102380556199177801" onmouseenter="enter('2102380556199177801');" onmouseout="out('2102380556199177801');" style="">3570         // Only support intents for current user for now. Intents sent from other                        </span>
<span class="2194655253408912185" onmouseenter="enter('2194655253408912185');" onmouseout="out('2194655253408912185');" style="">3571         // users wouldn&#x27;t get here without intent forwarding anyway.                                     </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3572         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3573         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3574             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3575                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3576             } else {                                                                                     </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3577                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3578                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3579             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3580         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3581         info.setIcon(icon);                                                                              </span>
<span  style="">3582                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3583         info.title = name;                                                                               </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3584         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3585                 info.title.toString(), info.user);                                                       </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3586         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3587         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3588         info.iconResource = iconResource;                                                                </span>
<span  style="">3589                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3590         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3591     }                                                                                                    </span>
<span  style="">3592                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3593     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3594             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3595         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3596         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3597             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3598         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3599         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3600         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3601         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3602         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3603         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3604         // the app is on SD) then we can use that instead.                                               </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3605         if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                               </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3606             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3607             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3608         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3609         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3610     }                                                                                                    </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3611     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3612         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3613         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3614             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3615                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3616                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3617                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3618             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3619                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3620             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3621         } catch (Exception e) {                                                                          </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3622             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3623         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3624         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3625             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3626             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3627             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3628             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3629         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3630     }                                                                                                    </span>
<span  style="">3631                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3632     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3633      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3634      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3635      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3636     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3637         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3638         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3639         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3640             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3641             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3642             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3643         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3644         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3645     }                                                                                                    </span>
<span  style="">3646                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3647     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3648         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3649         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3650             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="3541515045662468306" onmouseenter="enter('3541515045662468306');" onmouseout="out('3541515045662468306');" style="">3651                 if (a.user.equals(b.user)) {                                                             </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">3652                     int result = collator.compare(a.title.toString().trim(),                             </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">3653                             b.title.toString().trim());                                                  </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3654                     if (result == 0) {                                                                   </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3655                         result = a.componentName.compareTo(b.componentName);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3656                     }                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3657                     return result;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3658                 } else {                                                                                 </span>
<span class="-4940624116090922199" onmouseenter="enter('-4940624116090922199');" onmouseout="out('-4940624116090922199');" style="">3659                     // TODO Need to figure out rules for sorting                                         </span>
<span class="-7580798058375972430" onmouseenter="enter('-7580798058375972430');" onmouseout="out('-7580798058375972430');" style="">3660                     // profiles, this puts work second.                                                  </span>
<span class="-437659129845370257" onmouseenter="enter('-437659129845370257');" onmouseout="out('-437659129845370257');" style="">3661                     return a.user.toString().compareTo(b.user.toString());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3662                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3663             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3664         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3665     }                                                                                                    </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">3666     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                  </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">3667             = new Comparator&lt;AppInfo&gt;() {                                                                </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3668         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">3669             if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                       </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">3670             if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                      </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3671             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3672         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3673     };                                                                                                   </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3674     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3675         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3676             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3677         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3678             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3679         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3680     }                                                                                                    </span>
<span class="-5604165961236567660" onmouseenter="enter('-5604165961236567660');" onmouseout="out('-5604165961236567660');" style="">3681     public static class ShortcutNameComparator implements Comparator&lt;LauncherActivityInfoCompat&gt; {       </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3682         private Collator mCollator;                                                                      </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3683         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3684         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3685             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3686             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3687         }                                                                                                </span>
<span class="3595266679393364065" onmouseenter="enter('3595266679393364065');" onmouseout="out('3595266679393364065');" style="">3688         ShortcutNameComparator(HashMap&lt;Object, CharSequence&gt; labelCache) {                               </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3689             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3690             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3691         }                                                                                                </span>
<span class="5300656659592950018" onmouseenter="enter('5300656659592950018');" onmouseout="out('5300656659592950018');" style="">3692         public final int compare(LauncherActivityInfoCompat a, LauncherActivityInfoCompat b) {           </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3693             String labelA, labelB;                                                                       </span>
<span class="3539590309650150575" onmouseenter="enter('3539590309650150575');" onmouseout="out('3539590309650150575');" style="">3694             ComponentName keyA = a.getComponentName();                                                   </span>
<span class="-674250356247748253" onmouseenter="enter('-674250356247748253');" onmouseout="out('-674250356247748253');" style="">3695             ComponentName keyB = b.getComponentName();                                                   </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3696             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-1058154863590772027" onmouseenter="enter('-1058154863590772027');" onmouseout="out('-1058154863590772027');" style="">3697                 labelA = mLabelCache.get(keyA).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3698             } else {                                                                                     </span>
<span class="8953753374571564594" onmouseenter="enter('8953753374571564594');" onmouseout="out('8953753374571564594');" style="">3699                 labelA = a.getLabel().toString().trim();                                                 </span>
<span  style="">3700                                                                                                          </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3701                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3702             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3703             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="267036364262288198" onmouseenter="enter('267036364262288198');" onmouseout="out('267036364262288198');" style="">3704                 labelB = mLabelCache.get(keyB).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3705             } else {                                                                                     </span>
<span class="-6332222509536632454" onmouseenter="enter('-6332222509536632454');" onmouseout="out('-6332222509536632454');" style="">3706                 labelB = b.getLabel().toString().trim();                                                 </span>
<span  style="">3707                                                                                                          </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3708                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3709             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3710             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3711         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3712     };                                                                                                   </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3713     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="9150498506085829362" onmouseenter="enter('9150498506085829362');" onmouseout="out('9150498506085829362');" style="">3714         private final AppWidgetManagerCompat mManager;                                                   </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="">3715         private final PackageManager mPackageManager;                                                    </span>
<span class="3147273048289991484" onmouseenter="enter('3147273048289991484');" onmouseout="out('3147273048289991484');" style="">3716         private final HashMap&lt;Object, String&gt; mLabelCache;                                               </span>
<span class="7734513056437222570" onmouseenter="enter('7734513056437222570');" onmouseout="out('7734513056437222570');" style="">3717         private final Collator mCollator;                                                                </span>
<span  style="">3718                                                                                                          </span>
<span class="-4227954493245511846" onmouseenter="enter('-4227954493245511846');" onmouseout="out('-4227954493245511846');" style="">3719         WidgetAndShortcutNameComparator(Context context) {                                               </span>
<span class="3481132346717467494" onmouseenter="enter('3481132346717467494');" onmouseout="out('3481132346717467494');" style="">3720             mManager = AppWidgetManagerCompat.getInstance(context);                                      </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="">3721             mPackageManager = context.getPackageManager();                                               </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3722             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3723             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3724         }                                                                                                </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3725         public final int compare(Object a, Object b) {                                                   </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3726             String labelA, labelB;                                                                       </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3727             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3728                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3729             } else {                                                                                     </span>
<span class="-9066745869396444524" onmouseenter="enter('-9066745869396444524');" onmouseout="out('-9066745869396444524');" style="">3730                 labelA = (a instanceof AppWidgetProviderInfo)                                            </span>
<span class="6558251807363396504" onmouseenter="enter('6558251807363396504');" onmouseout="out('6558251807363396504');" style="">3731                         ? mManager.loadLabel((AppWidgetProviderInfo) a)                                  </span>
<span class="-3214224842100508644" onmouseenter="enter('-3214224842100508644');" onmouseout="out('-3214224842100508644');" style="">3732                         : ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3733                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3734             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3735             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3736                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3737             } else {                                                                                     </span>
<span class="-1855040857913004459" onmouseenter="enter('-1855040857913004459');" onmouseout="out('-1855040857913004459');" style="">3738                 labelB = (b instanceof AppWidgetProviderInfo)                                            </span>
<span class="-6152525661787763086" onmouseenter="enter('-6152525661787763086');" onmouseout="out('-6152525661787763086');" style="">3739                         ? mManager.loadLabel((AppWidgetProviderInfo) b)                                  </span>
<span class="-7836999270960417422" onmouseenter="enter('-7836999270960417422');" onmouseout="out('-7836999270960417422');" style="">3740                         : ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3741                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3742             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3743             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3744         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3745     };                                                                                                   </span>
<span  style="">3746                                                                                                          </span>
<span class="9138636756014527253" onmouseenter="enter('9138636756014527253');" onmouseout="out('9138636756014527253');" style="">3747     static boolean isValidProvider(AppWidgetProviderInfo provider) {                                     </span>
<span class="2022925387876031232" onmouseenter="enter('2022925387876031232');" onmouseout="out('2022925387876031232');" style="">3748         return (provider != null) &amp;&amp; (provider.provider != null)                                         </span>
<span class="-279029610180406352" onmouseenter="enter('-279029610180406352');" onmouseout="out('-279029610180406352');" style="">3749                 &amp;&amp; (provider.provider.getPackageName() != null);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3750     }                                                                                                    </span>
<span  style="">3751                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3752     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3753         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3754         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3755         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3756         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3757         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3758         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3759             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3760         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3761             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3762         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3763     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3764 }                                                                                                        </span>






















































































































































































































































</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  18 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  19 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  20 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  21 import android.content.BroadcastReceiver;                                                                </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  22 import android.content.ComponentName;                                                                    </span>
<span class="5843991090186771909" onmouseenter="enter('5843991090186771909');" onmouseout="out('5843991090186771909');" style="">  23 import android.content.ContentProviderClient;                                                            </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  24 import android.content.ContentProviderOperation;                                                         </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  25 import android.content.ContentResolver;                                                                  </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  26 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  27 import android.content.Context;                                                                          </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  28 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  29 import android.content.Intent;                                                                           </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  30 import android.content.IntentFilter;                                                                     </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  31 import android.content.SharedPreferences;                                                                </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  32 import android.content.pm.PackageManager;                                                                </span>
<span class="-7427681121873781918" onmouseenter="enter('-7427681121873781918');" onmouseout="out('-7427681121873781918');" style="">  33 import android.content.pm.ProviderInfo;                                                                  </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  34 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  35 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  36 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  37 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  38 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  39 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  40 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  41 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  42 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  43 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  44 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  45 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  46 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  47 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  48 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  49 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  50 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  51 import android.util.Pair;                                                                                </span>
<span class="-2301578055393860706" onmouseenter="enter('-2301578055393860706');" onmouseout="out('-2301578055393860706');" style="">  52 import com.android.launcher3.compat.AppWidgetManagerCompat;                                              </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  53 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  54 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="-9185808437279523438" onmouseenter="enter('-9185808437279523438');" onmouseout="out('-9185808437279523438');" style="">  55 import com.android.launcher3.compat.PackageInstallerCompat.PackageInstallInfo;                           </span>
<span class="-6378403157506113444" onmouseenter="enter('-6378403157506113444');" onmouseout="out('-6378403157506113444');" style="">  56 import com.android.launcher3.compat.PackageInstallerCompat;                                              </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  57 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  58 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  59 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  60 import java.net.URISyntaxException;                                                                      </span>
<span class="4163694070296964880" onmouseenter="enter('4163694070296964880');" onmouseout="out('4163694070296964880');" style="">  61 import java.security.InvalidParameterException;                                                          </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  62 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  63 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  64 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  65 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  66 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  67 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  68 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  69 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  70 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  71 import java.util.List;                                                                                   </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  72 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  73 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  74 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  75 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  76                                                                                                          </span>
<span  style="">  77                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  78 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  79  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  80  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  81  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  82  */                                                                                                      </span>
<span class="-5246366312920497703" onmouseenter="enter('-5246366312920497703');" onmouseout="out('-5246366312920497703');" style=""><abbr title="  83 public class LauncherModel extends BroadcastReceiver implements LauncherAppsCompat.OnAppsChangedCallbackCompat {">  83 public class LauncherModel extends BroadcastReceiver implements LauncherAppsCompat.OnAppsChangedCallbackC</abbr></span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  84     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span  style="">  85                                                                                                          </span>
<span class="-5037112122408598239" onmouseenter="enter('-5037112122408598239');" onmouseout="out('-5037112122408598239');" style="">  86     private static final boolean DEBUG_RECEIVER = false;                                                 </span>
<span  style="">  87                                                                                                          </span>
<span class="-4012347986936200510" onmouseenter="enter('-4012347986936200510');" onmouseout="out('-4012347986936200510');" style="">  88     private static final boolean REMOVE_UNRESTORED_ICONS = true;                                         </span>
<span  style="">  89                                                                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  90     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  91                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  92     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  93     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  94     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  95     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  96     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span  style="">  97                                                                                                          </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  98     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span  style="">  99                                                                                                          </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style=""> 100     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span  style=""> 101                                                                                                          </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style=""> 102     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style=""> 103                                                                                                          </span>
<span class="6995464355391954242" onmouseenter="enter('6995464355391954242');" onmouseout="out('6995464355391954242');" style=""> 104     // batch size for the workspace icons                                                                </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style=""> 105     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span  style=""> 106                                                                                                          </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style=""> 107     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style=""> 108                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style=""> 109     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span  style=""> 110                                                                                                          </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style=""> 111     private final boolean mOldContentProviderExists;                                                     </span>
<span  style=""> 112                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style=""> 113     private final LauncherAppState mApp;                                                                 </span>
<span  style=""> 114                                                                                                          </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style=""> 115     private final Object mLock = new Object();                                                           </span>
<span  style=""> 116                                                                                                          </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style=""> 117     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span  style=""> 118                                                                                                          </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 119     private LoaderTask mLoaderTask;                                                                      </span>
<span  style=""> 120                                                                                                          </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 121     private boolean mIsLoaderTaskRunning;                                                                </span>
<span  style=""> 122                                                                                                          </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 123     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style=""> 124                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 125     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 126     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 127     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span  style=""> 128                                                                                                          </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 129     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style=""> 130                                                                                                          </span>
<span class="5026118005036723308" onmouseenter="enter('5026118005036723308');" onmouseout="out('5026118005036723308');" style=""> 131     private static final String MIGRATE_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                    </span>
<span  style=""> 132                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 133     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span  style=""> 134                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 135     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 136         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137     }                                                                                                    </span>
<span  style=""> 138                                                                                                          </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 139     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 140                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 141     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 142     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 143     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 144     private boolean mWorkspaceLoaded;                                                                    </span>
<span  style=""> 145                                                                                                          </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 146     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 147                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 148     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 149     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 150     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 151     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 152     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 153                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 154     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 155                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 156     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 157     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 158     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 159                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 160     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 161     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 162     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 163     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 164     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 165                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 166     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 167     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 168     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 169                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 170     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 171     //       created by LauncherModel that are directly on the home screen (however, no widgets or       </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 172     //       shortcuts within folders).                                                                  </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 173     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 174                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 175     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="4461543750539964634" onmouseenter="enter('4461543750539964634');" onmouseout="out('4461543750539964634');" style=""> 176     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets = new ArrayList&lt;LauncherAppWidgetInfo&gt;();</span>
<span  style=""> 177                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 178     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 179     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 180                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 181     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 182     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 183                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 184     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 185     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 186     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 187                                                                                                          </span>
<span class="8587182513202290942" onmouseenter="enter('8587182513202290942');" onmouseout="out('8587182513202290942');" style=""> 188     // sPendingPackages is a set of packages which could be on sdcard and are not available yet          </span>
<span class="2728800337702245303" onmouseenter="enter('2728800337702245303');" onmouseout="out('2728800337702245303');" style=""><abbr title=" 189     static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages = new HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt;();"> 189     static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages = new HashMap&lt;UserHandleComp</abbr></span>
<span  style=""> 190                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 191     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 192     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 193                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 194     private IconCache mIconCache;                                                                        </span>
<span  style=""> 195                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 196     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 197                                                                                                          </span>
<span class="-1392466613073934971" onmouseenter="enter('-1392466613073934971');" onmouseout="out('-1392466613073934971');" style=""> 198     private final LauncherAppsCompat mLauncherApps;                                                      </span>
<span  style=""> 199                                                                                                          </span>
<span class="-6177668713869523688" onmouseenter="enter('-6177668713869523688');" onmouseout="out('-6177668713869523688');" style=""> 200     private final UserManagerCompat mUserManager;                                                        </span>
<span  style=""> 201                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 202     public interface Callbacks {                                                                         </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 203         public boolean setLoadOnResume();                                                                </span>
<span  style=""> 204                                                                                                          </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 205         public int getCurrentWorkspaceScreen();                                                          </span>
<span  style=""> 206                                                                                                          </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 207         public void startBinding();                                                                      </span>
<span  style=""> 208                                                                                                          </span>
<span class="5769462036588798432" onmouseenter="enter('5769462036588798432');" onmouseout="out('5769462036588798432');" style=""><abbr title=" 209         public abstract void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end, boolean forceAnimateIcons);"> 209         public abstract void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end, boolean forceAn</abbr></span>
<span  style=""> 210                                                                                                          </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 211         public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                       </span>
<span  style=""> 212                                                                                                          </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 213         public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-7787879534890891966" onmouseenter="enter('-7787879534890891966');" onmouseout="out('-7787879534890891966');" style=""> 215         public abstract void bindFolders(HashMap&lt;Long, FolderInfo&gt; folders);                             </span>
<span  style=""> 216                                                                                                          </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 217         public void finishBindingItems(boolean upgradePath);                                             </span>
<span  style=""> 218                                                                                                          </span>
<span class="-4066088446296132158" onmouseenter="enter('-4066088446296132158');" onmouseout="out('-4066088446296132158');" style=""> 219         public abstract void bindAppWidget(LauncherAppWidgetInfo info);                                  </span>
<span  style=""> 220                                                                                                          </span>
<span class="-644636094983226183" onmouseenter="enter('-644636094983226183');" onmouseout="out('-644636094983226183');" style=""> 221         public abstract void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                               </span>
<span  style=""> 222                                                                                                          </span>
<span class="-6644914292556538669" onmouseenter="enter('-6644914292556538669');" onmouseout="out('-6644914292556538669');" style=""><abbr title=" 223         public abstract void bindAppsAdded(ArrayList&lt;Long&gt; newScreens, ArrayList&lt;ItemInfo&gt; addNotAnimated, ArrayList&lt;ItemInfo&gt; addAnimated, ArrayList&lt;AppInfo&gt; addedApps);"> 223         public abstract void bindAppsAdded(ArrayList&lt;Long&gt; newScreens, ArrayList&lt;ItemInfo&gt; addNotAnimated</abbr></span>
<span  style=""> 224                                                                                                          </span>
<span class="-5633473103749570937" onmouseenter="enter('-5633473103749570937');" onmouseout="out('-5633473103749570937');" style=""> 225         public abstract void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                   </span>
<span  style=""> 226                                                                                                          </span>
<span class="-6991207189725786229" onmouseenter="enter('-6991207189725786229');" onmouseout="out('-6991207189725786229');" style=""> 227         public void bindAppsRestored(ArrayList&lt;AppInfo&gt; apps);                                           </span>
<span  style=""> 228                                                                                                          </span>
<span class="1552205679904733456" onmouseenter="enter('1552205679904733456');" onmouseout="out('1552205679904733456');" style=""> 229         public void updatePackageState(ArrayList&lt;PackageInstallInfo&gt; installInfo);                       </span>
<span  style=""> 230                                                                                                          </span>
<span class="3764474087617128758" onmouseenter="enter('3764474087617128758');" onmouseout="out('3764474087617128758');" style=""> 231         public void updatePackageBadge(String packageName);                                              </span>
<span  style=""> 232                                                                                                          </span>
<span class="-615943521541767266" onmouseenter="enter('-615943521541767266');" onmouseout="out('-615943521541767266');" style=""><abbr title=" 233         public abstract void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames, ArrayList&lt;AppInfo&gt; appInfos, UserHandleCompat user);"> 233         public abstract void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames, ArrayList&lt;AppInfo&gt; app</abbr></span>
<span  style=""> 234                                                                                                          </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 235         public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                          </span>
<span  style=""> 236                                                                                                          </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 237         public void bindSearchablesChanged();                                                            </span>
<span  style=""> 238                                                                                                          </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 239         public boolean isAllAppsButtonRank(int rank);                                                    </span>
<span  style=""> 240                                                                                                          </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 241         public void onPageBoundSynchronously(int page);                                                  </span>
<span  style=""> 242                                                                                                          </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 243         public void dumpLogsToLocalData();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244     }                                                                                                    </span>
<span  style=""> 245                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 246     public interface ItemInfoFilter {                                                                    </span>
<span class="3983161794363928901" onmouseenter="enter('3983161794363928901');" onmouseout="out('3983161794363928901');" style=""> 247         public abstract boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248     }                                                                                                    </span>
<span  style=""> 249                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 250     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 251         Context context = app.getContext();                                                              </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 252         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="6456618698786728431" onmouseenter="enter('6456618698786728431');" onmouseout="out('6456618698786728431');" style=""> 253         String oldProvider = context.getString(R.string.old_launcher_provider_uri);                      </span>
<span class="-4473607088242738177" onmouseenter="enter('-4473607088242738177');" onmouseout="out('-4473607088242738177');" style=""> 254         // This may be the same as MIGRATE_AUTHORITY, or it may be replaced by a different               </span>
<span class="-5811264300229071057" onmouseenter="enter('-5811264300229071057');" onmouseout="out('-5811264300229071057');" style=""> 255         // resource string.                                                                              </span>
<span class="7826951633422431656" onmouseenter="enter('7826951633422431656');" onmouseout="out('7826951633422431656');" style=""> 256         String redirectAuthority = Uri.parse(oldProvider).getAuthority();                                </span>
<span class="8660972027578244362" onmouseenter="enter('8660972027578244362');" onmouseout="out('8660972027578244362');" style=""><abbr title=" 257         ProviderInfo providerInfo = context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY, 0);"> 257         ProviderInfo providerInfo = context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY,</abbr></span>
<span class="1193553408131176285" onmouseenter="enter('1193553408131176285');" onmouseout="out('1193553408131176285');" style=""><abbr title=" 258         ProviderInfo redirectProvider = context.getPackageManager().resolveContentProvider(redirectAuthority, 0);"> 258         ProviderInfo redirectProvider = context.getPackageManager().resolveContentProvider(redirectAuthor</abbr></span>
<span class="314259485526307626" onmouseenter="enter('314259485526307626');" onmouseout="out('314259485526307626');" style=""> 259         Log.d(TAG, &quot;Old launcher provider: &quot; + oldProvider);                                             </span>
<span class="-8592116164695986182" onmouseenter="enter('-8592116164695986182');" onmouseout="out('-8592116164695986182');" style=""> 260         mOldContentProviderExists = (providerInfo != null) &amp;&amp; (redirectProvider != null);                </span>
<span class="6861009572404401042" onmouseenter="enter('6861009572404401042');" onmouseout="out('6861009572404401042');" style=""> 261         if (mOldContentProviderExists) {                                                                 </span>
<span class="-1855952710226164095" onmouseenter="enter('-1855952710226164095');" onmouseout="out('-1855952710226164095');" style=""> 262             Log.d(TAG, &quot;Old launcher provider exists.&quot;);                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 263         } else {                                                                                         </span>
<span class="-884548298796331780" onmouseenter="enter('-884548298796331780');" onmouseout="out('-884548298796331780');" style=""> 264             Log.d(TAG, &quot;Old launcher provider does not exist.&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265         }                                                                                                </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 266         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 267         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 268         mIconCache = iconCache;                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 269         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 270         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 271         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1186313261969242146" onmouseenter="enter('-1186313261969242146');" onmouseout="out('-1186313261969242146');" style=""> 272         mLauncherApps = LauncherAppsCompat.getInstance(context);                                         </span>
<span class="5028106411018262806" onmouseenter="enter('5028106411018262806');" onmouseout="out('5028106411018262806');" style=""> 273         mUserManager = UserManagerCompat.getInstance(context);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274     }                                                                                                    </span>
<span  style=""> 275                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 276     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 277      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 278     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 279         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280     }                                                                                                    </span>
<span  style=""> 281                                                                                                          </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 282     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 283         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 284             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 285             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 286         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 287             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289     }                                                                                                    </span>
<span  style=""> 290                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 291     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 292      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 293     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 294         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 295             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 296         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 297             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 298             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300     }                                                                                                    </span>
<span  style=""> 301                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 302     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="1377474616331947329" onmouseenter="enter('1377474616331947329');" onmouseout="out('1377474616331947329');" style=""> 303         return mOldContentProviderExists &amp;&amp; (!launcher.isLauncherPreinstalled());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304     }                                                                                                    </span>
<span  style=""> 305                                                                                                          </span>
<span class="3078656228962170157" onmouseenter="enter('3078656228962170157');" onmouseout="out('3078656228962170157');" style=""> 306     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy, long screen) {</span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 307         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 308         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="6676481294069932535" onmouseenter="enter('6676481294069932535');" onmouseout="out('6676481294069932535');" style=""> 309         final int xCount = ((int) (grid.numColumns));                                                    </span>
<span class="9152107411148713841" onmouseenter="enter('9152107411148713841');" onmouseout="out('9152107411148713841');" style=""> 310         final int yCount = ((int) (grid.numRows));                                                       </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 311         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span class="3723092247323611416" onmouseenter="enter('3723092247323611416');" onmouseout="out('3723092247323611416');" style=""> 312         int cellX;                                                                                       </span>
<span class="-3664060732320228171" onmouseenter="enter('-3664060732320228171');" onmouseout="out('-3664060732320228171');" style=""> 313         int cellY;                                                                                       </span>
<span class="-663830733677842115" onmouseenter="enter('-663830733677842115');" onmouseout="out('-663830733677842115');" style=""> 314         int spanX;                                                                                       </span>
<span class="-2768222588949154828" onmouseenter="enter('-2768222588949154828');" onmouseout="out('-2768222588949154828');" style=""> 315         int spanY;                                                                                       </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 316         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 317             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 318             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 319                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 320                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 321                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 322                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 323                     spanY = item.spanY;                                                                  </span>
<span class="2556401663850988804" onmouseenter="enter('2556401663850988804');" onmouseout="out('2556401663850988804');" style=""> 324                     for (int x = cellX; ((0 &lt;= x) &amp;&amp; (x &lt; (cellX + spanX))) &amp;&amp; (x &lt; xCount); x++) {      </span>
<span class="-4844556115643501361" onmouseenter="enter('-4844556115643501361');" onmouseout="out('-4844556115643501361');" style=""> 325                         for (int y = cellY; ((0 &lt;= y) &amp;&amp; (y &lt; (cellY + spanY))) &amp;&amp; (y &lt; yCount); y++) {  </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 326                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331         }                                                                                                </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 332         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333     }                                                                                                    </span>
<span  style=""> 334                                                                                                          </span>
<span class="-3028160567326440165" onmouseenter="enter('-3028160567326440165');" onmouseout="out('-3028160567326440165');" style=""><abbr title=" 335     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name, Intent launchIntent, int firstScreenIndex, ArrayList&lt;Long&gt; workspaceScreens) {"> 335     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name, Intent launchIntent</abbr></span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 336         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 337         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 338         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 339         boolean found = false;                                                                           </span>
<span class="4291341501295041683" onmouseenter="enter('4291341501295041683');" onmouseout="out('4291341501295041683');" style=""> 340         synchronized(app) {                                                                              </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 341             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 342                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 343                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 344                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 345                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 347             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 348             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 349             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 350             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 351             int count = workspaceScreens.size();                                                         </span>
<span class="888066978954461138" onmouseenter="enter('888066978954461138');" onmouseout="out('888066978954461138');" style=""> 352             for (int screen = firstScreenIndex; (screen &lt; count) &amp;&amp; (!found); screen++) {                </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 353                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="-6728698613126273066" onmouseenter="enter('-6728698613126273066');" onmouseout="out('-6728698613126273066');" style=""><abbr title=" 354                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates, workspaceScreens.get(screen))) {"> 354                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates, workspaceScreens.get(screen</abbr></span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 355                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 356                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 360         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361     }                                                                                                    </span>
<span  style=""> 362                                                                                                          </span>
<span class="-7586986915858549354" onmouseenter="enter('-7586986915858549354');" onmouseout="out('-7586986915858549354');" style=""> 363     public void setPackageState(final ArrayList&lt;PackageInstallInfo&gt; installInfo) {                       </span>
<span class="-7600698850277173095" onmouseenter="enter('-7600698850277173095');" onmouseout="out('-7600698850277173095');" style=""> 364         // Process the updated package state                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 365         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 366             public void run() {                                                                          </span>
<span class="-7845096170882753595" onmouseenter="enter('-7845096170882753595');" onmouseout="out('-7845096170882753595');" style=""> 367                 Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style=""> 368                 if (callbacks != null) {                                                                 </span>
<span class="-2122958624687225435" onmouseenter="enter('-2122958624687225435');" onmouseout="out('-2122958624687225435');" style=""> 369                     callbacks.updatePackageState(installInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 372         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 373         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374     }                                                                                                    </span>
<span  style=""> 375                                                                                                          </span>
<span class="-4348975915921845586" onmouseenter="enter('-4348975915921845586');" onmouseout="out('-4348975915921845586');" style=""> 376     public void updatePackageBadge(final String packageName) {                                           </span>
<span class="7729714843616329773" onmouseenter="enter('7729714843616329773');" onmouseout="out('7729714843616329773');" style=""> 377         // Process the updated package badge                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 378         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 379             public void run() {                                                                          </span>
<span class="-7845096170882753595" onmouseenter="enter('-7845096170882753595');" onmouseout="out('-7845096170882753595');" style=""> 380                 Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style=""> 381                 if (callbacks != null) {                                                                 </span>
<span class="-175082648182985609" onmouseenter="enter('-175082648182985609');" onmouseout="out('-175082648182985609');" style=""> 382                     callbacks.updatePackageBadge(packageName);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 385         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 386         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span  style=""> 388                                                                                                          </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style=""> 389     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style=""> 390         final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                      </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style=""> 391         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style=""> 392             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style=""> 394         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 395             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396         }                                                                                                </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 397         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style=""> 398         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 399         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 400             ItemInfo a = iter.next();                                                                    </span>
<span class="788818030959001981" onmouseenter="enter('788818030959001981');" onmouseout="out('788818030959001981');" style=""> 401             if (LauncherModel.appWasPromise(ctx, a.getIntent(), a.user)) {                               </span>
<span class="3043652812901566303" onmouseenter="enter('3043652812901566303');" onmouseout="out('3043652812901566303');" style=""> 402                 restoredAppsFinal.add(((AppInfo) (a)));                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 405         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 406         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 407             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 408                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 409                     public void run() {                                                                  </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style=""> 410                         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                   </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style=""> 411                         if ((callbacks == cb) &amp;&amp; (cb != null)) {                                         </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 412                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style=""> 413                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style=""> 414                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style=""> 415                                     if (intent != null) {                                                </span>
<span class="-7439034917816334822" onmouseenter="enter('-7439034917816334822');" onmouseout="out('-7439034917816334822');" style=""> 416                                         mIconCache.deletePreloadedIcon(intent.getComponent(), info.user);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 419                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style=""> 421                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 424                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 426         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 427         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428     }                                                                                                    </span>
<span  style=""> 429                                                                                                          </span>
<span class="8398847809050125375" onmouseenter="enter('8398847809050125375');" onmouseout="out('8398847809050125375');" style=""><abbr title=" 430     public void addAndBindAddedWorkspaceApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps) {"> 430     public void addAndBindAddedWorkspaceApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceAp</abbr></span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style=""> 431         final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                      </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style=""> 432         if (workspaceApps == null) {                                                                     </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 433             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434         }                                                                                                </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style=""> 435         if (workspaceApps.isEmpty()) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 436             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 438         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 439         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 440             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 441                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 442                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 443                 final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                   </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 444                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 445                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 446                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 447                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 448                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 449                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 450                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 451                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452                 }                                                                                        </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 453                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 454                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 455                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 456                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 457                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 458                         final Intent launchIntent = a.getIntent();                                       </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 459                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 460                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style=""> 461                             // Only InstallShortcutReceiver sends us shortcutInfos, ignore them          </span>
<span class="-4921867613971796302" onmouseenter="enter('-4921867613971796302');" onmouseout="out('-4921867613971796302');" style=""><abbr title=" 462                             if ((a instanceof AppInfo) &amp;&amp; LauncherModel.appWasPromise(context, launchIntent, a.user)) {"> 462                             if ((a instanceof AppInfo) &amp;&amp; LauncherModel.appWasPromise(context, launchInte</abbr></span>
<span class="3043652812901566303" onmouseenter="enter('3043652812901566303');" onmouseout="out('3043652812901566303');" style=""> 463                                 restoredAppsFinal.add(((AppInfo) (a)));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464                             }                                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 465                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466                         }                                                                                </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 467                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 468                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 469                         // Otherwise, we add them to the next pages.                                     </span>
<span class="6942681515297262086" onmouseenter="enter('6942681515297262086');" onmouseout="out('6942681515297262086');" style=""> 470                         int startSearchPageIndex = (workspaceScreens.isEmpty()) ? 0 : 1;                 </span>
<span class="5475318676933485874" onmouseenter="enter('5475318676933485874');" onmouseout="out('5475318676933485874');" style=""><abbr title=" 471                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent, startSearchPageIndex, workspaceScreens);"> 471                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context, name</abbr></span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 472                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 473                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 474                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 475                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 476                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 477                             // the startSearchPageIndex.                                                 </span>
<span class="-4633937574945330988" onmouseenter="enter('-4633937574945330988');" onmouseout="out('-4633937574945330988');" style=""><abbr title=" 478                             int numPagesToAdd = Math.max(1, (startSearchPageIndex + 1) - workspaceScreens.size());"> 478                             int numPagesToAdd = Math.max(1, (startSearchPageIndex + 1) - workspaceScreens</abbr></span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 479                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 480                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 481                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 482                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 483                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 484                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485                             }                                                                            </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 486                             // Find the coordinate again                                                 </span>
<span class="-8995545726255917793" onmouseenter="enter('-8995545726255917793');" onmouseout="out('-8995545726255917793');" style=""><abbr title=" 487                             coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent, startSearchPageIndex, workspaceScreens);"> 487                             coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 489                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 490                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491                         }                                                                                </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 492                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 493                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-2077713348370366293" onmouseenter="enter('-2077713348370366293');" onmouseout="out('-2077713348370366293');" style=""> 494                             shortcutInfo = ((ShortcutInfo) (a));                                         </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 495                         } else if (a instanceof AppInfo) {                                               </span>
<span class="3620448109683680843" onmouseenter="enter('3620448109683680843');" onmouseout="out('3620448109683680843');" style=""> 496                             shortcutInfo = ((AppInfo) (a)).makeShortcut();                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 497                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 498                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499                         }                                                                                </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 500                         // Add the shortcut to the db                                                    </span>
<span class="-1183187661294806550" onmouseenter="enter('-1183187661294806550');" onmouseout="out('-1183187661294806550');" style=""><abbr title=" 501                         addItemToDatabase(context, shortcutInfo, LauncherSettings.Favorites.CONTAINER_DESKTOP, coords.first, coords.second[0], coords.second[1], false);"> 501                         addItemToDatabase(context, shortcutInfo, LauncherSettings.Favorites.CONTAINER_DES</abbr></span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 502                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 503                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505                 }                                                                                        </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 506                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 507                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 508                 if (!addedShortcutsFinal.isEmpty()) {                                                    </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 509                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 510                         public void run() {                                                              </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style=""> 511                             Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;               </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style=""> 512                             if ((callbacks == cb) &amp;&amp; (cb != null)) {                                     </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 513                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 514                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 515                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 516                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 516                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 517                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 518                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 519                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 520                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 521                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 522                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525                                 }                                                                        </span>
<span class="8586585899680597195" onmouseenter="enter('8586585899680597195');" onmouseout="out('8586585899680597195');" style=""><abbr title=" 526                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal, addNotAnimated, addAnimated, null);"> 526                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal, addNotAnimated, addAn</abbr></span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 527                                 if (!restoredAppsFinal.isEmpty()) {                                      </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 528                                     callbacks.bindAppsUpdated(restoredAppsFinal);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 532                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 535         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 536         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537     }                                                                                                    </span>
<span  style=""> 538                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 539     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 540         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-715860477509754399" onmouseenter="enter('-715860477509754399');" onmouseout="out('-715860477509754399');" style=""><abbr title=" 541             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; + &quot;main thread&quot;);"> 541             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; + &quot;mai</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542         }                                                                                                </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 543         // Clear any deferred bind runnables                                                             </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style=""> 544         synchronized(mDeferredBindRunnables) {                                                           </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 545             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546         }                                                                                                </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 547         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 548         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 549         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 550         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551     }                                                                                                    </span>
<span  style=""> 552                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 553     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 554     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 555         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 556         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 557         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 558         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 559         synchronized(sBgLock) {                                                                          </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 560             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 561             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 563         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 564             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 565             public void run() {                                                                          </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 566                 for (ItemInfo item : tmpWorkspaceItems) {                                                </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 567                     item.unbind();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568                 }                                                                                        </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 569                 for (ItemInfo item : tmpAppWidgets) {                                                    </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 570                     item.unbind();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 573         };                                                                                               </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 574         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575     }                                                                                                    </span>
<span  style=""> 576                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 577     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 578      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 579      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 580      */                                                                                                  </span>
<span class="-4913274496252174191" onmouseenter="enter('-4913274496252174191');" onmouseout="out('-4913274496252174191');" style=""><abbr title=" 581     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container, long screenId, int cellX, int cellY) {"> 581     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container, long screenId, in</abbr></span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 582         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 583             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 584             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 585         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 586             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 587             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589     }                                                                                                    </span>
<span  style=""> 590                                                                                                          </span>
<span class="-3477298304624879477" onmouseenter="enter('-3477298304624879477');" onmouseout="out('-3477298304624879477');" style=""><abbr title=" 591     static void checkItemInfoLocked(final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {"> 591     static void checkItemInfoLocked(final long itemId, final ItemInfo item, StackTraceElement[] stackTrac</abbr></span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 592         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="-4193299319739453899" onmouseenter="enter('-4193299319739453899');" onmouseout="out('-4193299319739453899');" style=""> 593         if ((modelItem != null) &amp;&amp; (item != modelItem)) {                                                </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 594             // check all the data is consistent                                                          </span>
<span class="-6196645600345538831" onmouseenter="enter('-6196645600345538831');" onmouseout="out('-6196645600345538831');" style=""> 595             if ((modelItem instanceof ShortcutInfo) &amp;&amp; (item instanceof ShortcutInfo)) {                 </span>
<span class="7634783497213968312" onmouseenter="enter('7634783497213968312');" onmouseout="out('7634783497213968312');" style=""> 596                 ShortcutInfo modelShortcut = ((ShortcutInfo) (modelItem));                               </span>
<span class="9110910577641752235" onmouseenter="enter('9110910577641752235');" onmouseout="out('9110910577641752235');" style=""> 597                 ShortcutInfo shortcut = ((ShortcutInfo) (item));                                         </span>
<span class="-1328943871575335248" onmouseenter="enter('-1328943871575335248');" onmouseout="out('-1328943871575335248');" style=""><abbr title=" 598                 if ((((((((((modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp; modelShortcut.intent.filterEquals(shortcut.intent)) &amp;&amp; (modelShortcut.id == shortcut.id)) &amp;&amp; (modelShortcut.itemType == shortcut.itemType)) &amp;&amp; (modelShortcut.container == shortcut.container)) &amp;&amp; (modelShortcut.screenId == shortcut.screenId)) &amp;&amp; (modelShortcut.cellX == shortcut.cellX)) &amp;&amp; (modelShortcut.cellY == shortcut.cellY)) &amp;&amp; (modelShortcut.spanX == shortcut.spanX)) &amp;&amp; (modelShortcut.spanY == shortcut.spanY)) &amp;&amp; (((modelShortcut.dropPos == null) &amp;&amp; (shortcut.dropPos == null)) || ((((modelShortcut.dropPos != null) &amp;&amp; (shortcut.dropPos != null)) &amp;&amp; (modelShortcut.dropPos[0] == shortcut.dropPos[0])) &amp;&amp; (modelShortcut.dropPos[1] == shortcut.dropPos[1])))) {"> 598                 if ((((((((((modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp; modelSho</abbr></span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 599                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 600                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602             }                                                                                            </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 603             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 604             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 605             // modelItem == item or the equality check above                                             </span>
<span class="-599352405312960225" onmouseenter="enter('-599352405312960225');" onmouseout="out('-599352405312960225');" style=""><abbr title=" 606             String msg = (((&quot;item: &quot; + (item != null ? item.toString() : &quot;null&quot;)) + &quot;modelItem: &quot;) + (modelItem != null ? modelItem.toString() : &quot;null&quot;)) + &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;"> 606             String msg = (((&quot;item: &quot; + (item != null ? item.toString() : &quot;null&quot;)) + &quot;modelItem: &quot;) + (mod</abbr></span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 607             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 608             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 609                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 611             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613     }                                                                                                    </span>
<span  style=""> 614                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 615     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 616         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 617         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 618         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 619             public void run() {                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 620                 synchronized(sBgLock) {                                                                  </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 621                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 624         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 625         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626     }                                                                                                    </span>
<span  style=""> 627                                                                                                          </span>
<span class="5843580590807195149" onmouseenter="enter('5843580590807195149');" onmouseout="out('5843580590807195149');" style=""><abbr title=" 628     static void updateItemInDatabaseHelper(Context context, final ContentValues values, final ItemInfo item, final String callingFunction) {"> 628     static void updateItemInDatabaseHelper(Context context, final ContentValues values, final ItemInfo it</abbr></span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 629         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 630         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 631         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 632         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 633         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 634             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 635                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 636                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 638         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 639         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640     }                                                                                                    </span>
<span  style=""> 641                                                                                                          </span>
<span class="1323461269664119324" onmouseenter="enter('1323461269664119324');" onmouseout="out('1323461269664119324');" style=""><abbr title=" 642     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList, final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {"> 642     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList, f</abbr></span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 643         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 644         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 645         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 646             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style=""> 647                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 648                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 649                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 650                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 651                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 652                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 653                     ContentValues values = valuesList.get(i);                                            </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 654                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 655                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 657                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 658                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 659                 } catch (java.lang.Exception e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 660                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 663         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 664         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665     }                                                                                                    </span>
<span  style=""> 666                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 667     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 668         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 669         synchronized(sBgLock) {                                                                          </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 670             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span class="-4732894293004003705" onmouseenter="enter('-4732894293004003705');" onmouseout="out('-4732894293004003705');" style=""><abbr title=" 671             if ((item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 671             if ((item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (item.container != La</abbr></span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 672                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 673                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 674                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 675                     // the list of Folders.                                                              </span>
<span class="866170479557672718" onmouseenter="enter('866170479557672718');" onmouseout="out('866170479557672718');" style=""><abbr title=" 676                     String msg = (((&quot;item: &quot; + item) + &quot; container being set to: &quot;) + item.container) + &quot;, not in the list of folders&quot;;"> 676                     String msg = (((&quot;item: &quot; + item) + &quot; container being set to: &quot;) + item.container) + &quot;</abbr></span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 677                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679             }                                                                                            </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 680             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 681             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 682             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 683             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8214278069475616615" onmouseenter="enter('-8214278069475616615');" onmouseout="out('-8214278069475616615');" style=""><abbr title=" 684             if ((modelItem != null) &amp;&amp; ((modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) || (modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT))) {"> 684             if ((modelItem != null) &amp;&amp; ((modelItem.container == LauncherSettings.Favorites.CONTAINER_DESK</abbr></span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 685                 switch (modelItem.itemType) {                                                            </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style=""> 686                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                              </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style=""> 687                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                                 </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style=""> 688                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                                   </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 689                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 690                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 692                         break;                                                                           </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style=""> 693                     default :                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 694                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 696             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 697                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700     }                                                                                                    </span>
<span  style=""> 701                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 702     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 703         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 704         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 705                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 706                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 707                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 708                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 711             };                                                                                           </span>
<span  style=""> 712                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 713         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 714             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 715             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 716                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 717                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 720             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 721             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 722                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 723                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 724                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 725                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729     }                                                                                                    </span>
<span  style=""> 730                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 731     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 732      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 733      */                                                                                                  </span>
<span class="-5600424137319741995" onmouseenter="enter('-5600424137319741995');" onmouseout="out('-5600424137319741995');" style=""><abbr title=" 734     static void moveItemInDatabase(Context context, final ItemInfo item, final long container, final long screenId, final int cellX, final int cellY) {"> 734     static void moveItemInDatabase(Context context, final ItemInfo item, final long container, final long</abbr></span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 735         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 736         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 737         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 738         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 739         // in the hotseat                                                                                </span>
<span class="4606570855627801176" onmouseenter="enter('4606570855627801176');" onmouseout="out('4606570855627801176');" style=""><abbr title=" 740         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 740         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites</abbr></span>
<span class="2559774459784632549" onmouseenter="enter('2559774459784632549');" onmouseout="out('2559774459784632549');" style=""> 741             item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(cellX, cellY);         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 742         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 743             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744         }                                                                                                </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 745         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 746         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 747         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 748         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 749         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 750         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751     }                                                                                                    </span>
<span  style=""> 752                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 753     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 754      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 755      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 756      */                                                                                                  </span>
<span class="3098301382350823622" onmouseenter="enter('3098301382350823622');" onmouseout="out('3098301382350823622');" style=""><abbr title=" 757     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items, final long container, final int screen) {"> 757     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items, final long containe</abbr></span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 758         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 759         int count = items.size();                                                                        </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 760         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 761             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 762             item.container = container;                                                                  </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 763             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 764             // in the hotseat                                                                            </span>
<span class="-6267116755196683474" onmouseenter="enter('-6267116755196683474');" onmouseout="out('-6267116755196683474');" style=""><abbr title=" 765             if (((context instanceof Launcher) &amp;&amp; (screen &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 765             if (((context instanceof Launcher) &amp;&amp; (screen &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorit</abbr></span>
<span class="-1256626981468344422" onmouseenter="enter('-1256626981468344422');" onmouseout="out('-1256626981468344422');" style=""><abbr title=" 766                 item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(item.cellX, item.cellY);"> 766                 item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(item.cellX, item.ce</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 767             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 768                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769             }                                                                                            </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 770             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 771             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 772             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 773             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 774             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 775             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 777         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778     }                                                                                                    </span>
<span  style=""> 779                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 780     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 781      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 782      */                                                                                                  </span>
<span class="2934638672122753077" onmouseenter="enter('2934638672122753077');" onmouseout="out('2934638672122753077');" style=""><abbr title=" 783     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container, final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {"> 783     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container, final lo</abbr></span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 784         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 785         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 786         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 787         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 788         item.spanY = spanY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 789         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 790         // in the hotseat                                                                                </span>
<span class="4606570855627801176" onmouseenter="enter('4606570855627801176');" onmouseout="out('4606570855627801176');" style=""><abbr title=" 791         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 791         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites</abbr></span>
<span class="2559774459784632549" onmouseenter="enter('2559774459784632549');" onmouseout="out('2559774459784632549');" style=""> 792             item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(cellX, cellY);         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 793         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 794             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795         }                                                                                                </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 796         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 797         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 798         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 799         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 800         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 801         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 802         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 803         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804     }                                                                                                    </span>
<span  style=""> 805                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 806     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 807      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 808      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 809     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 810         final ContentValues values = new ContentValues();                                                </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style=""> 811         item.onAddToDatabase(context, values);                                                           </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 812         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 813         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814     }                                                                                                    </span>
<span  style=""> 815                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 816     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 817      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 818      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 819      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 820     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 821         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="4264825260415276278" onmouseenter="enter('4264825260415276278');" onmouseout="out('4264825260415276278');" style=""> 822         final Intent intentWithPkg;                                                                      </span>
<span class="-6472063332783259814" onmouseenter="enter('-6472063332783259814');" onmouseout="out('-6472063332783259814');" style=""> 823         final Intent intentWithoutPkg;                                                                   </span>
<span class="-1192314096420314309" onmouseenter="enter('-1192314096420314309');" onmouseout="out('-1192314096420314309');" style=""> 824         if (intent.getComponent() != null) {                                                             </span>
<span class="5013412415263932655" onmouseenter="enter('5013412415263932655');" onmouseout="out('5013412415263932655');" style=""> 825             // If component is not null, an intent with null package will produce                        </span>
<span class="-2056261929714512728" onmouseenter="enter('-2056261929714512728');" onmouseout="out('-2056261929714512728');" style=""> 826             // the same result and should also be a match.                                               </span>
<span class="8293829844581049791" onmouseenter="enter('8293829844581049791');" onmouseout="out('8293829844581049791');" style=""> 827             if (intent.getPackage() != null) {                                                           </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style=""> 828                 intentWithPkg = intent;                                                                  </span>
<span class="302721143002808724" onmouseenter="enter('302721143002808724');" onmouseout="out('302721143002808724');" style=""> 829                 intentWithoutPkg = new Intent(intent).setPackage(null);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 830             } else {                                                                                     </span>
<span class="9156121259041236614" onmouseenter="enter('9156121259041236614');" onmouseout="out('9156121259041236614');" style=""> 831                 intentWithPkg = new Intent(intent).setPackage(intent.getComponent().getPackageName());   </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style=""> 832                 intentWithoutPkg = intent;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 834         } else {                                                                                         </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style=""> 835             intentWithPkg = intent;                                                                      </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style=""> 836             intentWithoutPkg = intent;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837         }                                                                                                </span>
<span class="-9139396081872919721" onmouseenter="enter('-9139396081872919721');" onmouseout="out('-9139396081872919721');" style=""><abbr title=" 838         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[]{ &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and (intent=? or intent=?)&quot;, new String[]{ title, intentWithPkg.toUri(0), intentWithoutPkg.toUri(0) }, null);"> 838         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[]{ &quot;title&quot;, &quot;intent&quot; }, &quot;t</abbr></span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 839         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 840         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 841             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 842         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 843             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 844         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 845         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846     }                                                                                                    </span>
<span  style=""> 847                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 848     /**                                                                                                  </span>
<span class="2522962036775885267" onmouseenter="enter('2522962036775885267');" onmouseout="out('2522962036775885267');" style=""> 849      * Returns true if the promise shortcuts with the same package name exists on the workspace.         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 850      */                                                                                                  </span>
<span class="-6588164927851751704" onmouseenter="enter('-6588164927851751704');" onmouseout="out('-6588164927851751704');" style=""> 851     static boolean appWasPromise(Context context, Intent intent, UserHandleCompat user) {                </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style=""> 852         final ComponentName component = intent.getComponent();                                           </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style=""> 853         if (component == null) {                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 854             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855         }                                                                                                </span>
<span class="-5254167698548486612" onmouseenter="enter('-5254167698548486612');" onmouseout="out('-5254167698548486612');" style=""> 856         return !getItemsByPackageName(component.getPackageName(), user).isEmpty();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857     }                                                                                                    </span>
<span  style=""> 858                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 859     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 860      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 861      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 862      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 863     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 864         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 865         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="4116267603931841991" onmouseenter="enter('4116267603931841991');" onmouseout="out('4116267603931841991');" style=""><abbr title=" 866         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[]{ LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER, LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY, LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY, LauncherSettings.Favorites.PROFILE_ID }, null, null, null);"> 866         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[]{ LauncherSettings.Favori</abbr></span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 867         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 868         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 869         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 870         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 871         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 872         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 873         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style=""> 874         final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);       </span>
<span class="4378196374401845990" onmouseenter="enter('4378196374401845990');" onmouseout="out('4378196374401845990');" style=""> 875         UserManagerCompat userManager = UserManagerCompat.getInstance(context);                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 876         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 877             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 878                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 879                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 880                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 881                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 882                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 883                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 884                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 885                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style=""> 886                 long serialNumber = c.getInt(profileIdIndex);                                            </span>
<span class="8590899978146640866" onmouseenter="enter('8590899978146640866');" onmouseout="out('8590899978146640866');" style=""> 887                 item.user = userManager.getUserForSerialNumber(serialNumber);                            </span>
<span class="-2267817568611630151" onmouseenter="enter('-2267817568611630151');" onmouseout="out('-2267817568611630151');" style=""> 888                 // Skip if user has been deleted.                                                        </span>
<span class="-8057177251913525905" onmouseenter="enter('-8057177251913525905');" onmouseout="out('-8057177251913525905');" style=""> 889                 if (item.user != null) {                                                                 </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 890                     items.add(item);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 893         } catch (java.lang.Exception e) {                                                                </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 894             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 895         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 896             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897         }                                                                                                </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 898         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899     }                                                                                                    </span>
<span  style=""> 900                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 901     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 902      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 903      */                                                                                                  </span>
<span class="-6151116876875651790" onmouseenter="enter('-6151116876875651790');" onmouseout="out('-6151116876875651790');" style=""> 904     FolderInfo getFolderById(Context context, HashMap&lt;Long, FolderInfo&gt; folderList, long id) {           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 905         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="5921918128416539773" onmouseenter="enter('5921918128416539773');" onmouseout="out('5921918128416539773');" style=""><abbr title=" 906         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null, &quot;_id=? and (itemType=? or itemType=?)&quot;, new String[]{ String.valueOf(id), String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER) }, null);"> 906         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null, &quot;_id=? and (itemType=? or itemT</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 907         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 908             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 909                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 910                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 911                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 912                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 913                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 914                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 915                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 916                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style=""> 917                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                                   </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 918                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 919                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920                 }                                                                                        </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 921                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 922                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 923                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 924                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 925                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 926                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 927                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 929         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 930             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 932         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933     }                                                                                                    </span>
<span  style=""> 934                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 935     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style=""> 936      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style=""> 937      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 938      */                                                                                                  </span>
<span class="-3509553491915540136" onmouseenter="enter('-3509553491915540136');" onmouseout="out('-3509553491915540136');" style=""><abbr title=" 939     static void addItemToDatabase(Context context, final ItemInfo item, final long container, final long screenId, final int cellX, final int cellY, final boolean notify) {"> 939     static void addItemToDatabase(Context context, final ItemInfo item, final long container, final long </abbr></span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 940         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 941         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 942         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 943         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 944         // in the hotseat                                                                                </span>
<span class="4606570855627801176" onmouseenter="enter('4606570855627801176');" onmouseout="out('4606570855627801176');" style=""><abbr title=" 945         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 945         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites</abbr></span>
<span class="2559774459784632549" onmouseenter="enter('2559774459784632549');" onmouseout="out('2559774459784632549');" style=""> 946             item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(cellX, cellY);         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 947         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 948             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949         }                                                                                                </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 950         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 951         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style=""> 952         item.onAddToDatabase(context, values);                                                           </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style=""> 953         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style=""> 954         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 955         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 956         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 957         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 958             public void run() {                                                                          </span>
<span class="-1627636974343001552" onmouseenter="enter('-1627636974343001552');" onmouseout="out('-1627636974343001552');" style=""><abbr title=" 959                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI : LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);"> 959                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI : LauncherSettings.Favorites.CO</abbr></span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 960                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 961                 synchronized(sBgLock) {                                                                  </span>
<span class="-4593486021211754382" onmouseenter="enter('-4593486021211754382');" onmouseout="out('-4593486021211754382');" style=""> 962                     checkItemInfoLocked(item.id, item, stackTrace);                                      </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style=""> 963                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style=""> 964                     switch (item.itemType) {                                                             </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style=""> 965                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                               </span>
<span class="8205841234449084625" onmouseenter="enter('8205841234449084625');" onmouseout="out('8205841234449084625');" style=""> 966                             sBgFolders.put(item.id, ((FolderInfo) (item)));                              </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style=""> 967                             // Fall through                                                              </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style=""> 968                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                          </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style=""> 969                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                             </span>
<span class="1575891278585417897" onmouseenter="enter('1575891278585417897');" onmouseout="out('1575891278585417897');" style=""><abbr title=" 970                             if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) || (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 970                             if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) || (item</abbr></span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style=""> 971                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="1386085614158877352" onmouseenter="enter('1386085614158877352');" onmouseout="out('1386085614158877352');" style=""> 972                             } else if (!sBgFolders.containsKey(item.container)) {                        </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style=""> 973                                 // Adding an item to a folder that doesn&#x27;t exist.                        </span>
<span class="8612747470846713679" onmouseenter="enter('8612747470846713679');" onmouseout="out('8612747470846713679');" style=""><abbr title=" 974                                 String msg = ((&quot;adding item: &quot; + item) + &quot; to a folder that &quot;) + &quot; doesn&#x27;t exist&quot;;"> 974                                 String msg = ((&quot;adding item: &quot; + item) + &quot; to a folder that &quot;) + &quot; doesn&#x27;</abbr></span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 975                                 Log.e(TAG, msg);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 977                             break;                                                                       </span>
<span class="-572090049804539709" onmouseenter="enter('-572090049804539709');" onmouseout="out('-572090049804539709');" style=""> 978                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET :                            </span>
<span class="2548288440156953289" onmouseenter="enter('2548288440156953289');" onmouseout="out('2548288440156953289');" style=""> 979                             sBgAppWidgets.add(((LauncherAppWidgetInfo) (item)));                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 980                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 984         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 985         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986     }                                                                                                    </span>
<span  style=""> 987                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 988     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style=""> 989      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 990      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style=""> 991     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style=""> 992             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style=""> 993         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style=""> 994                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995     }                                                                                                    </span>
<span  style=""> 996                                                                                                          </span>
<span class="1496485219044453497" onmouseenter="enter('1496485219044453497');" onmouseout="out('1496485219044453497');" style=""><abbr title=" 997     private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(final String pn, final UserHandleCompat user) {"> 997     private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(final String pn, final UserHandleCompat user</abbr></span>
<span class="-3373937432913193160" onmouseenter="enter('-3373937432913193160');" onmouseout="out('-3373937432913193160');" style=""> 998         ItemInfoFilter filter = new ItemInfoFilter() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 999             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">1000             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="-3698999064980760147" onmouseenter="enter('-3698999064980760147');" onmouseout="out('-3698999064980760147');" style="">1001                 return cn.getPackageName().equals(pn) &amp;&amp; info.user.equals(user);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1003         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">1004         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005     }                                                                                                    </span>
<span  style="">1006                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1007     /**                                                                                                  </span>
<span class="2342361889363691922" onmouseenter="enter('2342361889363691922');" onmouseout="out('2342361889363691922');" style="">1008      * Removes all the items from the database corresponding to the specified package.                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1009      */                                                                                                  </span>
<span class="-4223841609537991203" onmouseenter="enter('-4223841609537991203');" onmouseout="out('-4223841609537991203');" style="">1010     static void deletePackageFromDatabase(Context context, final String pn,                              </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">1011             final UserHandleCompat user) {                                                               </span>
<span class="-3124051924336649718" onmouseenter="enter('-3124051924336649718');" onmouseout="out('-3124051924336649718');" style="">1012         deleteItemsFromDatabase(context, getItemsByPackageName(pn, user));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013     }                                                                                                    </span>
<span  style="">1014                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1015     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1016      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1017      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1018      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1019      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1020     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="">1021         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="">1022         items.add(item);                                                                                 </span>
<span class="-1343420386438024026" onmouseenter="enter('-1343420386438024026');" onmouseout="out('-1343420386438024026');" style="">1023         deleteItemsFromDatabase(context, items);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1024     }                                                                                                    </span>
<span  style="">1025                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1026     /**                                                                                                  </span>
<span class="6785840277050217586" onmouseenter="enter('6785840277050217586');" onmouseout="out('6785840277050217586');" style="">1027      * Removes the specified items from the database                                                     </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1028      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1029      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1030      */                                                                                                  </span>
<span class="8840034600723804424" onmouseenter="enter('8840034600723804424');" onmouseout="out('8840034600723804424');" style="">1031     static void deleteItemsFromDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items) {              </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1032         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1033         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1034             public void run() {                                                                          </span>
<span class="6119320427209693879" onmouseenter="enter('6119320427209693879');" onmouseout="out('6119320427209693879');" style="">1035                 for (ItemInfo item : items) {                                                            </span>
<span class="-8969008621964178653" onmouseenter="enter('-8969008621964178653');" onmouseout="out('-8969008621964178653');" style="">1036                     final Uri uri = LauncherSettings.Favorites.getContentUri(item.id, false);            </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="">1037                     cr.delete(uri, null, null);                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1038                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1039                     synchronized(sBgLock) {                                                              </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1040                         switch (item.itemType) {                                                         </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style="">1041                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                           </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1042                                 sBgFolders.remove(item.id);                                              </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="">1043                                 for (ItemInfo info : sBgItemsIdMap.values()) {                           </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1044                                     if (info.container == item.id) {                                     </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1045                                     // We are deleting a folder which still contains items that          </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1046                                     // think they are contained by that folder.                          </span>
<span class="9120409891375253770" onmouseenter="enter('9120409891375253770');" onmouseout="out('9120409891375253770');" style=""><abbr title="1047                                         String msg = ((((&quot;deleting a folder (&quot; + item) + &quot;) which still &quot;) + &quot;contains items (&quot;) + info) + &quot;)&quot;;">1047                                         String msg = ((((&quot;deleting a folder (&quot; + item) + &quot;) which still &quot;</abbr></span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1048                                         Log.e(TAG, msg);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050                                 }                                                                        </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1051                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1052                                 break;                                                                   </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style="">1053                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                      </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style="">1054                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                         </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1055                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1056                                 break;                                                                   </span>
<span class="-572090049804539709" onmouseenter="enter('-572090049804539709');" onmouseout="out('-572090049804539709');" style="">1057                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET :                        </span>
<span class="3100137958952392900" onmouseenter="enter('3100137958952392900');" onmouseout="out('3100137958952392900');" style="">1058                                 sBgAppWidgets.remove(((LauncherAppWidgetInfo) (item)));                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1059                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060                         }                                                                                </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1061                         sBgItemsIdMap.remove(item.id);                                                   </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1062                         sBgDbIconCache.remove(item);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1066         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1067         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068     }                                                                                                    </span>
<span  style="">1069                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1070     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1071      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1072      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1073      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1074     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1075         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1076         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1077         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1078         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1079         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1080         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1081         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1082         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1083         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1084             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1085             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1086                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1089         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1090             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1091             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1092                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1093                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1094                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1095                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1096                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1097                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1098                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1099                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1100                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1101                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1103                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1104                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="-2749309157466987679" onmouseenter="enter('-2749309157466987679');" onmouseout="out('-2749309157466987679');" style="">1105                 } catch (java.lang.Exception ex) {                                                       </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1106                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107                 }                                                                                        </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1108                 synchronized(sBgLock) {                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1109                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1110                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1113         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1114         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115     }                                                                                                    </span>
<span  style="">1116                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1117     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1118      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1119      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1120     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1121         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1122         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1123             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1124                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1125                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1126                 synchronized(sBgLock) {                                                                  </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1127                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1128                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1129                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1130                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131                 }                                                                                        </span>
<span class="8523949193675639350" onmouseenter="enter('8523949193675639350');" onmouseout="out('8523949193675639350');" style=""><abbr title="1132                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, (LauncherSettings.Favorites.CONTAINER + &quot;=&quot;) + info.id, null);">1132                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, (LauncherSettings.Favor</abbr></span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1133                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1134                 synchronized(sBgLock) {                                                                  </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1135                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1136                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1137                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1141         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1142         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1143     }                                                                                                    </span>
<span  style="">1144                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1145     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1146      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1147      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1148     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1149         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1150             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152     }                                                                                                    </span>
<span  style="">1153                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1154     @Override                                                                                            </span>
<span class="-2337875492294712218" onmouseenter="enter('-2337875492294712218');" onmouseout="out('-2337875492294712218');" style="">1155     public void onPackageChanged(String packageName, UserHandleCompat user) {                            </span>
<span class="4778571821882595512" onmouseenter="enter('4778571821882595512');" onmouseout="out('4778571821882595512');" style="">1156         int op = PackageUpdatedTask.OP_UPDATE;                                                           </span>
<span class="-2089135724624537865" onmouseenter="enter('-2089135724624537865');" onmouseout="out('-2089135724624537865');" style="">1157         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[]{ packageName }, user));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158     }                                                                                                    </span>
<span  style="">1159                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1160     @Override                                                                                            </span>
<span class="-927554855118637848" onmouseenter="enter('-927554855118637848');" onmouseout="out('-927554855118637848');" style="">1161     public void onPackageRemoved(String packageName, UserHandleCompat user) {                            </span>
<span class="-8281859875413044704" onmouseenter="enter('-8281859875413044704');" onmouseout="out('-8281859875413044704');" style="">1162         int op = PackageUpdatedTask.OP_REMOVE;                                                           </span>
<span class="-2089135724624537865" onmouseenter="enter('-2089135724624537865');" onmouseout="out('-2089135724624537865');" style="">1163         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[]{ packageName }, user));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164     }                                                                                                    </span>
<span  style="">1165                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1166     @Override                                                                                            </span>
<span class="105632639707841197" onmouseenter="enter('105632639707841197');" onmouseout="out('105632639707841197');" style="">1167     public void onPackageAdded(String packageName, UserHandleCompat user) {                              </span>
<span class="4828685442078193889" onmouseenter="enter('4828685442078193889');" onmouseout="out('4828685442078193889');" style="">1168         int op = PackageUpdatedTask.OP_ADD;                                                              </span>
<span class="-2089135724624537865" onmouseenter="enter('-2089135724624537865');" onmouseout="out('-2089135724624537865');" style="">1169         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[]{ packageName }, user));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170     }                                                                                                    </span>
<span  style="">1171                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1172     @Override                                                                                            </span>
<span class="6641549544143459181" onmouseenter="enter('6641549544143459181');" onmouseout="out('6641549544143459181');" style="">1173     public void onPackagesAvailable(String[] packageNames, UserHandleCompat user, boolean replacing) {   </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1174         if (!replacing) {                                                                                </span>
<span class="-3414324808928708436" onmouseenter="enter('-3414324808928708436');" onmouseout="out('-3414324808928708436');" style="">1175             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packageNames, user));</span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1176             if (mAppsCanBeOnRemoveableStorage) {                                                         </span>
<span class="-2089495423111974436" onmouseenter="enter('-2089495423111974436');" onmouseout="out('-2089495423111974436');" style="">1177                 // Only rebind if we support removable storage. It catches the                           </span>
<span class="3966636659656955596" onmouseenter="enter('3966636659656955596');" onmouseout="out('3966636659656955596');" style="">1178                 // case where                                                                            </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1179                 // apps on the external sd card need to be reloaded                                      </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1180                 startLoaderFromBackground();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1182         } else {                                                                                         </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1183             // If we are replacing then just update the packages in the list                             </span>
<span class="3865058334503513498" onmouseenter="enter('3865058334503513498');" onmouseout="out('3865058334503513498');" style=""><abbr title="1184             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE, packageNames, user));">1184             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE, packageNames, user</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186     }                                                                                                    </span>
<span  style="">1187                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1188     @Override                                                                                            </span>
<span class="-1680422231125387704" onmouseenter="enter('-1680422231125387704');" onmouseout="out('-1680422231125387704');" style="">1189     public void onPackagesUnavailable(String[] packageNames, UserHandleCompat user, boolean replacing) { </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1190         if (!replacing) {                                                                                </span>
<span class="871416370003658" onmouseenter="enter('871416370003658');" onmouseout="out('871416370003658');" style=""><abbr title="1191             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UNAVAILABLE, packageNames, user));">1191             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UNAVAILABLE, packageNames,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1193     }                                                                                                    </span>
<span  style="">1194                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1195     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1196      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1197      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1198      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1199     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1200     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-6006203575876886250" onmouseenter="enter('-6006203575876886250');" onmouseout="out('-6006203575876886250');" style="">1201         if (DEBUG_RECEIVER) {                                                                            </span>
<span class="-112054979152437749" onmouseenter="enter('-112054979152437749');" onmouseout="out('-112054979152437749');" style="">1202             Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203         }                                                                                                </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1204         final String action = intent.getAction();                                                        </span>
<span class="2827193781436621695" onmouseenter="enter('2827193781436621695');" onmouseout="out('2827193781436621695');" style="">1205         if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                               </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1206             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1207             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1208         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1209             // Check if configuration change was an mcc/mnc change which would affect app resources      </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1210             // and we would need to clear out the labels in all apps/workspace. Same handling as         </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1211             // above for ACTION_LOCALE_CHANGED                                                           </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1212             Configuration currentConfig = context.getResources().getConfiguration();                     </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1213             if (mPreviousConfigMcc != currentConfig.mcc) {                                               </span>
<span class="417401235100173780" onmouseenter="enter('417401235100173780');" onmouseout="out('417401235100173780');" style=""><abbr title="1214                 Log.d(TAG, ((&quot;Reload apps on config change. curr_mcc:&quot; + currentConfig.mcc) + &quot; prevmcc:&quot;) + mPreviousConfigMcc);">1214                 Log.d(TAG, ((&quot;Reload apps on config change. curr_mcc:&quot; + currentConfig.mcc) + &quot; prevmcc:&quot;</abbr></span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1215                 forceReload();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216             }                                                                                            </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1217             // Update previousConfig                                                                     </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1218             mPreviousConfigMcc = currentConfig.mcc;                                                      </span>
<span class="3668111890142926228" onmouseenter="enter('3668111890142926228');" onmouseout="out('3668111890142926228');" style=""><abbr title="1219         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) || SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {">1219         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) || SearchManager.IN</abbr></span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1220             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1221                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1222                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1223                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1227     }                                                                                                    </span>
<span  style="">1228                                                                                                          </span>
<span class="-17594942140375151" onmouseenter="enter('-17594942140375151');" onmouseout="out('-17594942140375151');" style="">1229     void forceReload() {                                                                                 </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1230         resetLoadedState(true, true);                                                                    </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1231         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1232         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1233         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1234         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235     }                                                                                                    </span>
<span  style="">1236                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1237     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1238         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1239             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1240             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1241             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1242             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1243             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245     }                                                                                                    </span>
<span  style="">1246                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1247     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1248      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1249      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1250      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1251      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1252      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1253     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1254         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1255         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1256             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1257             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1258                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1259                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1260                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1261                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1264         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1265             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267     }                                                                                                    </span>
<span  style="">1268                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1269     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1270     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1271     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1272         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1273         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1274         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1275             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1276                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1278             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1280         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281     }                                                                                                    </span>
<span  style="">1282                                                                                                          </span>
<span class="-650602055294598310" onmouseenter="enter('-650602055294598310');" onmouseout="out('-650602055294598310');" style="">1283     public boolean isCurrentCallbacks(Callbacks callbacks) {                                             </span>
<span class="-2678194210930296625" onmouseenter="enter('-2678194210930296625');" onmouseout="out('-2678194210930296625');" style="">1284         return (mCallbacks != null &amp;&amp; mCallbacks.get() == callbacks);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285     }                                                                                                    </span>
<span  style="">1286                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1287     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1288         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289     }                                                                                                    </span>
<span  style="">1290                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1291     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1292         synchronized(mLock) {                                                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1293             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1294                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295             }                                                                                            </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1296             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1297             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style="">1298             synchronized(mDeferredBindRunnables) {                                                       </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1299                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300             }                                                                                            </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1301             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-4122236186931415542" onmouseenter="enter('-4122236186931415542');" onmouseout="out('-4122236186931415542');" style="">1302             if ((mCallbacks != null) &amp;&amp; (mCallbacks.get() != null)) {                                    </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1303                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1304                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1305                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1306                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="5817874576538355838" onmouseenter="enter('5817874576538355838');" onmouseout="out('5817874576538355838');" style=""><abbr title="1307                 if (((synchronousBindPage != PagedView.INVALID_RESTORE_PAGE) &amp;&amp; mAllAppsLoaded) &amp;&amp; mWorkspaceLoaded) {">1307                 if (((synchronousBindPage != PagedView.INVALID_RESTORE_PAGE) &amp;&amp; mAllAppsLoaded) &amp;&amp; mWorks</abbr></span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1308                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1309                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1310                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1311                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1314         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315     }                                                                                                    </span>
<span  style="">1316                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1317     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1318         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1319         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="3864855355327062414" onmouseenter="enter('3864855355327062414');" onmouseout="out('3864855355327062414');" style="">1320             Runnable[] deferredBindRunnables = null;                                                     </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style="">1321             synchronized(mDeferredBindRunnables) {                                                       </span>
<span class="4169085160158510297" onmouseenter="enter('4169085160158510297');" onmouseout="out('4169085160158510297');" style=""><abbr title="1322                 deferredBindRunnables = mDeferredBindRunnables.toArray(new Runnable[mDeferredBindRunnables.size()]);">1322                 deferredBindRunnables = mDeferredBindRunnables.toArray(new Runnable[mDeferredBindRunnable</abbr></span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1323                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324             }                                                                                            </span>
<span class="-4818994596267375040" onmouseenter="enter('-4818994596267375040');" onmouseout="out('-4818994596267375040');" style="">1325             for (final Runnable r : deferredBindRunnables) {                                             </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1326                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329     }                                                                                                    </span>
<span  style="">1330                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1331     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1332         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1333             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1334                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1336         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337     }                                                                                                    </span>
<span  style="">1338                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1339     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1340     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1341         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1342         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1343         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1344         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1345         try {                                                                                            </span>
<span class="-1944149188601314132" onmouseenter="enter('-1944149188601314132');" onmouseout="out('-1944149188601314132');" style="">1346             final int idIndex = sc.getColumnIndexOrThrow(LauncherSettings.WorkspaceScreens._ID);         </span>
<span class="-3740375170696534436" onmouseenter="enter('-3740375170696534436');" onmouseout="out('-3740375170696534436');" style=""><abbr title="1347             final int rankIndex = sc.getColumnIndexOrThrow(LauncherSettings.WorkspaceScreens.SCREEN_RANK);">1347             final int rankIndex = sc.getColumnIndexOrThrow(LauncherSettings.WorkspaceScreens.SCREEN_RANK)</abbr></span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1348             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1349                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1350                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1351                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1352                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1353                 } catch (java.lang.Exception e) {                                                        </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1354                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1354                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1356             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1357         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1358             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359         }                                                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1360         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1361         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="-2407231300641847603" onmouseenter="enter('-2407231300641847603');" onmouseout="out('-2407231300641847603');" style="">1362         ArrayList&lt;String&gt; orderedScreensPairs = new ArrayList&lt;String&gt;();                                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1363         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="5683764182482910678" onmouseenter="enter('5683764182482910678');" onmouseout="out('5683764182482910678');" style="">1364             orderedScreensPairs.add((((&quot;{ &quot; + i) + &quot;: &quot;) + orderedScreens.get(i)) + &quot; }&quot;);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1365         }                                                                                                </span>
<span class="-4103578831555941807" onmouseenter="enter('-4103578831555941807');" onmouseout="out('-4103578831555941807');" style=""><abbr title="1366         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);">1366         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, orderedScreensPairs), tr</abbr></span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1367         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368     }                                                                                                    </span>
<span  style="">1369                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1370     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1371         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372     }                                                                                                    </span>
<span  style="">1373                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1374     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1375         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1376             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1377                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1378             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1380         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381     }                                                                                                    </span>
<span  style="">1382                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1383     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1384      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1385      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1386      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1387      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1388      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1389     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1390         private Context mContext;                                                                        </span>
<span  style="">1391                                                                                                          </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1392         private boolean mIsLaunching;                                                                    </span>
<span  style="">1393                                                                                                          </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1394         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span  style="">1395                                                                                                          </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1396         private boolean mStopped;                                                                        </span>
<span  style="">1397                                                                                                          </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1398         private boolean mLoadAndBindStepFinished;                                                        </span>
<span  style="">1399                                                                                                          </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1400         private int mFlags;                                                                              </span>
<span  style="">1401                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1402         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1403                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1404         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1405             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1406             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1407             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1408             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1409         }                                                                                                </span>
<span  style="">1410                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1411         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1412             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413         }                                                                                                </span>
<span  style="">1414                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1415         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1416             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417         }                                                                                                </span>
<span  style="">1418                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1419         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1420         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1421             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1422                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1423             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1424             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1425                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1426             }                                                                                            </span>
<span  style="">1427                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1428             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1429             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1430                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1431                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1432                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1433                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1435                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437             }                                                                                            </span>
<span  style="">1438                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1439             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1440             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1441             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1442         }                                                                                                </span>
<span  style="">1443                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1444         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1445             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1446             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1447             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1448             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1449                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1450                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1451                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1452                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1453                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1454                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1455                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1456                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1458                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1461                     });                                                                                  </span>
<span  style="">1462                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1463                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1464                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1465                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1466                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1467                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1468                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1469                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1472                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1473                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1474                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1475                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478         }                                                                                                </span>
<span  style="">1479                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1480         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1481             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1482                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1483                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1484                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1485             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1486             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1487                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1488                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1489                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1491             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1492                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1493                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1494                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1495                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497             }                                                                                            </span>
<span  style="">1498                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1499             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1500             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1501             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1502                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1503             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1504             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1505             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1506             mHandler.flush();                                                                            </span>
<span  style="">1507                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1508             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1509             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1510             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1511             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1512             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1513             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1514         }                                                                                                </span>
<span  style="">1515                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1516         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1517             boolean isUpgrade = false;                                                                   </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1518             synchronized(mLock) {                                                                        </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1519                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1520             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1521             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1522             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1523             // workspace first (default).                                                                </span>
<span class="2986163708134954175" onmouseenter="enter('2986163708134954175');" onmouseout="out('2986163708134954175');" style="">1524             keep_running : {                                                                             </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1525                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1526                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1527                 synchronized(mLock) {                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1528                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="3920349656056887161" onmouseenter="enter('3920349656056887161');" onmouseout="out('3920349656056887161');" style=""><abbr title="1529                         Log.d(TAG, &quot;Setting thread priority to &quot; + (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));">1529                         Log.d(TAG, &quot;Setting thread priority to &quot; + (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUN</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1530                     }                                                                                    </span>
<span class="-159571163629719621" onmouseenter="enter('-159571163629719621');" onmouseout="out('-159571163629719621');" style=""><abbr title="1531                     Process.setThreadPriority(mIsLaunching ? java.lang.Process.THREAD_PRIORITY_DEFAULT : java.lang.Process.THREAD_PRIORITY_BACKGROUND);">1531                     Process.setThreadPriority(mIsLaunching ? java.lang.Process.THREAD_PRIORITY_DEFAULT : </abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1533                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-3999751686770495872" onmouseenter="enter('-3999751686770495872');" onmouseout="out('-3999751686770495872');" style="">1534                     Log.d(TAG, &quot;step 1: loading workspace&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535                 }                                                                                        </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1536                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1537                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1538                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1539                 }                                                                                        </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1540                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1541                 // settled down.                                                                         </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1542                 synchronized(mLock) {                                                                    </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1543                     if (mIsLaunching) {                                                                  </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1544                         if (DEBUG_LOADERS) {                                                             </span>
<span class="8036260568502286466" onmouseenter="enter('8036260568502286466');" onmouseout="out('8036260568502286466');" style="">1545                             Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                         }                                                                                </span>
<span class="8543735010636454853" onmouseenter="enter('8543735010636454853');" onmouseout="out('8543735010636454853');" style="">1547                         Process.setThreadPriority(java.lang.Process.THREAD_PRIORITY_BACKGROUND);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1548                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1549                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1550                 waitForIdle();                                                                           </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1551                 // second step                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1552                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="2015058458764911659" onmouseenter="enter('2015058458764911659');" onmouseout="out('2015058458764911659');" style="">1553                     Log.d(TAG, &quot;step 2: loading all apps&quot;);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554                 }                                                                                        </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1555                 loadAndBindAllApps();                                                                    </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1556                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1557                 synchronized(mLock) {                                                                    </span>
<span class="5551724105057848529" onmouseenter="enter('5551724105057848529');" onmouseout="out('5551724105057848529');" style="">1558                     Process.setThreadPriority(java.lang.Process.THREAD_PRIORITY_DEFAULT);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560             }                                                                                            </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1561             // Update the saved icons if necessary                                                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1562             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-8698870540183511922" onmouseenter="enter('-8698870540183511922');" onmouseout="out('-8698870540183511922');" style="">1563                 Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1564             }                                                                                            </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1565             synchronized(sBgLock) {                                                                      </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1566                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="-211158668012161823" onmouseenter="enter('-211158668012161823');" onmouseout="out('-211158668012161823');" style="">1567                     updateSavedIcon(mContext, ((ShortcutInfo) (key)), sBgDbIconCache.get(key));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1569                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570             }                                                                                            </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1571             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1572                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1573                 // represented on the home screen.                                                       </span>
<span class="-616515436224837247" onmouseenter="enter('-616515436224837247');" onmouseout="out('-616515436224837247');" style="">1574                 if ((!UPGRADE_USE_MORE_APPS_FOLDER) || (!isUpgrade)) {                                   </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1575                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577             }                                                                                            </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1578             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1579             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1580             mContext = null;                                                                             </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1581             synchronized(mLock) {                                                                        </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1582                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1583                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1584                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1586                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588         }                                                                                                </span>
<span  style="">1589                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1590         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1591             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1592                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1593                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1595         }                                                                                                </span>
<span  style="">1596                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1597         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1598          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1599          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1600          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1601          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1602          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1603          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1604         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1605             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1606                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1607                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1608                 }                                                                                        </span>
<span  style="">1609                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1610                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1611                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1612                 }                                                                                        </span>
<span  style="">1613                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1614                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1615                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1616                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1618                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1619                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1620                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1621                 }                                                                                        </span>
<span  style="">1622                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1623                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1625         }                                                                                                </span>
<span  style="">1626                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1627         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1628             final Context context = mApp.getContext();                                                   </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1629             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1630             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1631             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1632             synchronized(sBgLock) {                                                                      </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1633                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="3468492706943039059" onmouseenter="enter('3468492706943039059');" onmouseout="out('3468492706943039059');" style="">1634                     tmpInfos = getItemInfoForComponentName(app.componentName, app.user);                 </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1635                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1636                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1637                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1638                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1639                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1640                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1642             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1643             if (!added.isEmpty()) {                                                                      </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="">1644                 addAndBindAddedWorkspaceApps(context, added);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646         }                                                                                                </span>
<span  style="">1647                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1648         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="-4724952550298502794" onmouseenter="enter('-4724952550298502794');" onmouseout="out('-4724952550298502794');" style=""><abbr title="1649         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item, AtomicBoolean deleteOnInvalidPlacement) {">1649         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item, AtomicBoo</abbr></span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1650             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1651             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="8354002620160470698" onmouseenter="enter('8354002620160470698');" onmouseout="out('8354002620160470698');" style="">1652             final int countX = ((int) (grid.numColumns));                                                </span>
<span class="5527431218828769444" onmouseenter="enter('5527431218828769444');" onmouseout="out('5527431218828769444');" style="">1653             final int countY = ((int) (grid.numRows));                                                   </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1654             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1655             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1656                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="5712521683704202564" onmouseenter="enter('5712521683704202564');" onmouseout="out('5712521683704202564');" style=""><abbr title="1657                 if ((mCallbacks == null) || mCallbacks.get().isAllAppsButtonRank(((int) (item.screenId)))) {">1657                 if ((mCallbacks == null) || mCallbacks.get().isAllAppsButtonRank(((int) (item.screenId)))</abbr></span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1658                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="-4762255259418263051" onmouseenter="enter('-4762255259418263051');" onmouseout="out('-4762255259418263051');" style=""><abbr title="1659                     Log.e(TAG, (((((((&quot;Error loading shortcut into hotseat &quot; + item) + &quot; into position (&quot;) + item.screenId) + &quot;:&quot;) + item.cellX) + &quot;,&quot;) + item.cellY) + &quot;) occupied by all apps&quot;);">1659                     Log.e(TAG, (((((((&quot;Error loading shortcut into hotseat &quot; + item) + &quot; into position (&quot;</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1660                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1661                 }                                                                                        </span>
<span class="-6973387888906317224" onmouseenter="enter('-6973387888906317224');" onmouseout="out('-6973387888906317224');" style=""><abbr title="1662                 final ItemInfo[][] hotseatItems = occupied.get(((long) (LauncherSettings.Favorites.CONTAINER_HOTSEAT)));">1662                 final ItemInfo[][] hotseatItems = occupied.get(((long) (LauncherSettings.Favorites.CONTAI</abbr></span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1663                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="4412410944526624917" onmouseenter="enter('4412410944526624917');" onmouseout="out('4412410944526624917');" style=""><abbr title="1664                     Log.e(TAG, (((((&quot;Error loading shortcut &quot; + item) + &quot; into hotseat position &quot;) + item.screenId) + &quot;, position out of bounds: (0 to &quot;) + (grid.numHotseatIcons - 1)) + &quot;)&quot;);">1664                     Log.e(TAG, (((((&quot;Error loading shortcut &quot; + item) + &quot; into hotseat position &quot;) + item</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1665                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666                 }                                                                                        </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1667                 if (hotseatItems != null) {                                                              </span>
<span class="898179064365029699" onmouseenter="enter('898179064365029699');" onmouseout="out('898179064365029699');" style="">1668                     if (hotseatItems[((int) (item.screenId))][0] != null) {                              </span>
<span class="3267111978335869081" onmouseenter="enter('3267111978335869081');" onmouseout="out('3267111978335869081');" style=""><abbr title="1669                         Log.e(TAG, ((((((((&quot;Error loading shortcut into hotseat &quot; + item) + &quot; into position (&quot;) + item.screenId) + &quot;:&quot;) + item.cellX) + &quot;,&quot;) + item.cellY) + &quot;) occupied by &quot;) + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)[((int) (item.screenId))][0]);">1669                         Log.e(TAG, ((((((((&quot;Error loading shortcut into hotseat &quot; + item) + &quot; into positi</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1670                         return false;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1671                     } else {                                                                             </span>
<span class="2671835386786547631" onmouseenter="enter('2671835386786547631');" onmouseout="out('2671835386786547631');" style="">1672                         hotseatItems[((int) (item.screenId))][0] = item;                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1673                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1674                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1675                 } else {                                                                                 </span>
<span class="1426830949285360899" onmouseenter="enter('1426830949285360899');" onmouseout="out('1426830949285360899');" style="">1676                     final ItemInfo[][] items = new ItemInfo[((int) (grid.numHotseatIcons))][1];          </span>
<span class="-2211586004792807785" onmouseenter="enter('-2211586004792807785');" onmouseout="out('-2211586004792807785');" style="">1677                     items[((int) (item.screenId))][0] = item;                                            </span>
<span class="6348190422508174044" onmouseenter="enter('6348190422508174044');" onmouseout="out('6348190422508174044');" style="">1678                     occupied.put(((long) (LauncherSettings.Favorites.CONTAINER_HOTSEAT)), items);        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1679                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1680                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1681             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1682                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1683                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1684             }                                                                                            </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1685             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1686                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1687                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1688             }                                                                                            </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1689             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="8116241059370746654" onmouseenter="enter('8116241059370746654');" onmouseout="out('8116241059370746654');" style=""><abbr title="1690             if (((((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (item.cellX &lt; 0)) || (item.cellY &lt; 0)) || ((item.cellX + item.spanX) &gt; countX)) || ((item.cellY + item.spanY) &gt; countY)) {">1690             if (((((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (item.cellX &lt; 0)) </abbr></span>
<span class="-38142440906569623" onmouseenter="enter('-38142440906569623');" onmouseout="out('-38142440906569623');" style=""><abbr title="1691                 Log.e(TAG, (((((((((((((&quot;Error loading shortcut &quot; + item) + &quot; into cell (&quot;) + containerIndex) + &quot;-&quot;) + item.screenId) + &quot;:&quot;) + item.cellX) + &quot;,&quot;) + item.cellY) + &quot;) out of screen bounds ( &quot;) + countX) + &quot;x&quot;) + countY) + &quot;)&quot;);">1691                 Log.e(TAG, (((((((((((((&quot;Error loading shortcut &quot; + item) + &quot; into cell (&quot;) + containerIn</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1692                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693             }                                                                                            </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1694             // Check if any workspace icons overlap with each other                                      </span>
<span class="-2092258279968456857" onmouseenter="enter('-2092258279968456857');" onmouseout="out('-2092258279968456857');" style="">1695             for (int x = item.cellX; x &lt; (item.cellX + item.spanX); x++) {                               </span>
<span class="8100170090626610310" onmouseenter="enter('8100170090626610310');" onmouseout="out('8100170090626610310');" style="">1696                 for (int y = item.cellY; y &lt; (item.cellY + item.spanY); y++) {                           </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1697                     if (screens[x][y] != null) {                                                         </span>
<span class="3811303228209948297" onmouseenter="enter('3811303228209948297');" onmouseout="out('3811303228209948297');" style=""><abbr title="1698                         Log.e(TAG, ((((((((((&quot;Error loading shortcut &quot; + item) + &quot; into cell (&quot;) + containerIndex) + &quot;-&quot;) + item.screenId) + &quot;:&quot;) + x) + &quot;,&quot;) + y) + &quot;) occupied by &quot;) + screens[x][y]);">1698                         Log.e(TAG, ((((((((((&quot;Error loading shortcut &quot; + item) + &quot; into cell (&quot;) + contai</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1699                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1700                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1701                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702             }                                                                                            </span>
<span class="-2092258279968456857" onmouseenter="enter('-2092258279968456857');" onmouseout="out('-2092258279968456857');" style="">1703             for (int x = item.cellX; x &lt; (item.cellX + item.spanX); x++) {                               </span>
<span class="8100170090626610310" onmouseenter="enter('8100170090626610310');" onmouseout="out('8100170090626610310');" style="">1704                 for (int y = item.cellY; y &lt; (item.cellY + item.spanY); y++) {                           </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1705                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1706                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1707             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1708             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1709         }                                                                                                </span>
<span  style="">1710                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1711         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1712         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1713             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1714                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1715                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1716                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1717                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1718                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1719                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1720             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1721         }                                                                                                </span>
<span  style="">1722                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1723         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1724         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1725             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1726             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span class="7045952659913516150" onmouseenter="enter('7045952659913516150');" onmouseout="out('7045952659913516150');" style="">1727             final long t = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                             </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1728             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1729             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1730             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1731             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1732             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">1733             final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);             </span>
<span class="6797489784584636002" onmouseenter="enter('6797489784584636002');" onmouseout="out('6797489784584636002');" style=""><abbr title="1734             final boolean isSdCardReady = context.registerReceiver(null, new IntentFilter(StartupReceiver.SYSTEM_READY)) != null;">1734             final boolean isSdCardReady = context.registerReceiver(null, new IntentFilter(StartupReceiver</abbr></span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1735             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1736             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-289744965915874427" onmouseenter="enter('-289744965915874427');" onmouseout="out('-289744965915874427');" style="">1737             int countX = ((int) (grid.numColumns));                                                      </span>
<span class="-3566146670768165206" onmouseenter="enter('-3566146670768165206');" onmouseout="out('-3566146670768165206');" style="">1738             int countY = ((int) (grid.numRows));                                                         </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1739             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1740                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1741                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1742             }                                                                                            </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1743             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1744                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1745                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1746                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1747             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1748                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1749                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="4180233289947251537" onmouseenter="enter('4180233289947251537');" onmouseout="out('4180233289947251537');" style="">1750                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1751             }                                                                                            </span>
<span class="6918238907049954147" onmouseenter="enter('6918238907049954147');" onmouseout="out('6918238907049954147');" style="">1752             // This code path is for our old migration code and should no longer be exercised            </span>
<span class="-6111060399811000023" onmouseenter="enter('-6111060399811000023');" onmouseout="out('-6111060399811000023');" style="">1753             boolean loadedOldDb = false;                                                                 </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1754             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1755             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1756             synchronized(sBgLock) {                                                                      </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1757                 clearSBgDataStructures();                                                                </span>
<span class="-5263705036609595279" onmouseenter="enter('-5263705036609595279');" onmouseout="out('-5263705036609595279');" style=""><abbr title="1758                 final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat.getInstance(mContext).updateAndGetActiveSessionCache();">1758                 final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat.getInstance(mContext).updat</abbr></span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1759                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1760                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="2252334430881119805" onmouseenter="enter('2252334430881119805');" onmouseout="out('2252334430881119805');" style="">1761                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION;           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1762                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-2958802293590769992" onmouseenter="enter('-2958802293590769992');" onmouseout="out('-2958802293590769992');" style="">1763                     Log.d(TAG, &quot;loading model from &quot; + contentUri);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1764                 }                                                                                        </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1765                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1766                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1767                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1768                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1769                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1770                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1771                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="-4033402896828551783" onmouseenter="enter('-4033402896828551783');" onmouseout="out('-4033402896828551783');" style="">1772                     final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);  </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style="">1773                     final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);    </span>
<span class="2476259323357554799" onmouseenter="enter('2476259323357554799');" onmouseout="out('2476259323357554799');" style=""><abbr title="1774                     final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);">1774                     final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYP</abbr></span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1775                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-8681284292868403609" onmouseenter="enter('-8681284292868403609');" onmouseout="out('-8681284292868403609');" style=""><abbr title="1776                     final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);">1776                     final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_</abbr></span>
<span class="6748803854718242440" onmouseenter="enter('6748803854718242440');" onmouseout="out('6748803854718242440');" style=""><abbr title="1777                     final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);">1777                     final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON</abbr></span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""><abbr title="1778                     final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);">1778                     final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAIN</abbr></span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""><abbr title="1779                     final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);">1779                     final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYP</abbr></span>
<span class="-7910612339850750582" onmouseenter="enter('-7910612339850750582');" onmouseout="out('-7910612339850750582');" style=""><abbr title="1780                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWIDGET_ID);">1780                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWI</abbr></span>
<span class="5684730079208643460" onmouseenter="enter('5684730079208643460');" onmouseout="out('5684730079208643460');" style=""><abbr title="1781                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWIDGET_PROVIDER);">1781                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites</abbr></span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1782                     final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);  </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1783                     final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);    </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1784                     final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);    </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style="">1785                     final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);    </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style="">1786                     final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);    </span>
<span class="-4872462981477900111" onmouseenter="enter('-4872462981477900111');" onmouseout="out('-4872462981477900111');" style=""><abbr title="1787                     final int restoredIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.RESTORED);">1787                     final int restoredIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.RESTORED</abbr></span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style=""><abbr title="1788                     final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);">1788                     final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE</abbr></span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">1789                     //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);      </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">1790                     //final int displayModeIndex = c.getColumnIndexOrThrow(                              </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">1791                     //        LauncherSettings.Favorites.DISPLAY_MODE);                                  </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1792                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1793                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1794                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1795                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1796                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1797                     Intent intent;                                                                       </span>
<span class="8928715163618104503" onmouseenter="enter('8928715163618104503');" onmouseout="out('8928715163618104503');" style="">1798                     UserHandleCompat user;                                                               </span>
<span class="1530988389269762839" onmouseenter="enter('1530988389269762839');" onmouseout="out('1530988389269762839');" style="">1799                     while ((!mStopped) &amp;&amp; c.moveToNext()) {                                              </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1800                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1801                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1802                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1803                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span class="4933910026947534491" onmouseenter="enter('4933910026947534491');" onmouseout="out('4933910026947534491');" style="">1804                             boolean allowMissingTarget = false;                                          </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1805                             switch (itemType) {                                                          </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style="">1806                                 case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                  </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style="">1807                                 case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                     </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1808                                     id = c.getLong(idIndex);                                             </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1809                                     intentDescription = c.getString(intentIndex);                        </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="">1810                                     long serialNumber = c.getInt(profileIdIndex);                        </span>
<span class="-4273089527731895214" onmouseenter="enter('-4273089527731895214');" onmouseout="out('-4273089527731895214');" style="">1811                                     user = mUserManager.getUserForSerialNumber(serialNumber);            </span>
<span class="-3834292976309282984" onmouseenter="enter('-3834292976309282984');" onmouseout="out('-3834292976309282984');" style="">1812                                     int promiseType = c.getInt(restoredIndex);                           </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">1813                                     if (user == null) {                                                  </span>
<span class="-496594084298695862" onmouseenter="enter('-496594084298695862');" onmouseout="out('-496594084298695862');" style="">1814                                         // User has been deleted remove the item.                        </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1815                                         itemsToRemove.add(id);                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1816                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1817                                     }                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1818                                     try {                                                                </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1819                                         intent = Intent.parseUri(intentDescription, 0);                  </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1820                                         ComponentName cn = intent.getComponent();                        </span>
<span class="208716353935357302" onmouseenter="enter('208716353935357302');" onmouseout="out('208716353935357302');" style="">1821                                         if ((cn != null) &amp;&amp; (cn.getPackageName() != null)) {             </span>
<span class="3892321831818203854" onmouseenter="enter('3892321831818203854');" onmouseout="out('3892321831818203854');" style=""><abbr title="1822                                             boolean validPkg = launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user);">1822                                             boolean validPkg = launcherApps.isPackageEnabledForProfile(cn</abbr></span>
<span class="-3898957463331514459" onmouseenter="enter('-3898957463331514459');" onmouseout="out('-3898957463331514459');" style=""><abbr title="1823                                             boolean validComponent = validPkg &amp;&amp; launcherApps.isActivityEnabledForProfile(cn, user);">1823                                             boolean validComponent = validPkg &amp;&amp; launcherApps.isActivityE</abbr></span>
<span class="-99499348404964068" onmouseenter="enter('-99499348404964068');" onmouseout="out('-99499348404964068');" style="">1824                                             if (validComponent) {                                        </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1825                                                 if (restored) {                                          </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">1826                                                     // no special handling necessary for this item       </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1827                                                     restoredRows.add(id);                                </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1828                                                     restored = false;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1829                                                 }                                                        </span>
<span class="6348728592662235672" onmouseenter="enter('6348728592662235672');" onmouseout="out('6348728592662235672');" style="">1830                                             } else if (validPkg) {                                       </span>
<span class="-6379280176207841217" onmouseenter="enter('-6379280176207841217');" onmouseout="out('-6379280176207841217');" style="">1831                                                 intent = null;                                           </span>
<span class="-5338271721329837400" onmouseenter="enter('-5338271721329837400');" onmouseout="out('-5338271721329837400');" style=""><abbr title="1832                                                 if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {">1832                                                 if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != </abbr></span>
<span class="5709472974278481468" onmouseenter="enter('5709472974278481468');" onmouseout="out('5709472974278481468');" style="">1833                                                     // We allow auto install apps to have their intent   </span>
<span class="-2650685759805982432" onmouseenter="enter('-2650685759805982432');" onmouseout="out('-2650685759805982432');" style="">1834                                                     // updated after an install.                         </span>
<span class="-3857786471459911903" onmouseenter="enter('-3857786471459911903');" onmouseout="out('-3857786471459911903');" style=""><abbr title="1835                                                     intent = manager.getLaunchIntentForPackage(cn.getPackageName());">1835                                                     intent = manager.getLaunchIntentForPackage(cn.getPack</abbr></span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="">1836                                                     if (intent != null) {                                </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1837                                                         ContentValues values = new ContentValues();      </span>
<span class="-8320415720427654785" onmouseenter="enter('-8320415720427654785');" onmouseout="out('-8320415720427654785');" style=""><abbr title="1838                                                         values.put(LauncherSettings.Favorites.INTENT, intent.toUri(0));">1838                                                         values.put(LauncherSettings.Favorites.INTENT, int</abbr></span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">1839                                                         String where = BaseColumns._ID + &quot;= ?&quot;;          </span>
<span class="-877565314819219638" onmouseenter="enter('-877565314819219638');" onmouseout="out('-877565314819219638');" style=""><abbr title="1840                                                         String[] args = new java.lang.String[]{ Long.toString(id) };">1840                                                         String[] args = new java.lang.String[]{ Long.toSt</abbr></span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style=""><abbr title="1841                                                         contentResolver.update(contentUri, values, where, args);">1841                                                         contentResolver.update(contentUri, values, where,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1842                                                     }                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1843                                                 }                                                        </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">1844                                                 if (intent == null) {                                    </span>
<span class="8006468267706457929" onmouseenter="enter('8006468267706457929');" onmouseout="out('8006468267706457929');" style="">1845                                                     // The app is installed but the component is no      </span>
<span class="7757985899517234268" onmouseenter="enter('7757985899517234268');" onmouseout="out('7757985899517234268');" style="">1846                                                 // longer available.                                     </span>
<span class="-1191782257252614792" onmouseenter="enter('-1191782257252614792');" onmouseout="out('-1191782257252614792');" style=""><abbr title="1847                                                     Launcher.addDumpLog(TAG, &quot;Invalid component removed: &quot; + cn, true);">1847                                                     Launcher.addDumpLog(TAG, &quot;Invalid component removed: </abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1848                                                     itemsToRemove.add(id);                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1849                                                     continue;                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1850                                                 } else {                                                 </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">1851                                                     // no special handling necessary for this item       </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1852                                                     restoredRows.add(id);                                </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1853                                                     restored = false;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1854                                                 }                                                        </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">1855                                             } else if (restored) {                                       </span>
<span class="6723757088957997679" onmouseenter="enter('6723757088957997679');" onmouseout="out('6723757088957997679');" style="">1856                                             // Package is not yet available but might be                 </span>
<span class="9210943103787239320" onmouseenter="enter('9210943103787239320');" onmouseout="out('9210943103787239320');" style="">1857                                             // installed later.                                          </span>
<span class="-6838802539582446987" onmouseenter="enter('-6838802539582446987');" onmouseout="out('-6838802539582446987');" style=""><abbr title="1858                                                 Launcher.addDumpLog(TAG, &quot;package not yet restored: &quot; + cn, true);">1858                                                 Launcher.addDumpLog(TAG, &quot;package not yet restored: &quot; + c</abbr></span>
<span class="-3623786309000722140" onmouseenter="enter('-3623786309000722140');" onmouseout="out('-3623786309000722140');" style=""><abbr title="1859                                                 if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != 0) {">1859                                                 if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != </abbr></span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">1860                                                     // Restore has started once.                         </span>
<span class="-3201378748433506719" onmouseenter="enter('-3201378748433506719');" onmouseout="out('-3201378748433506719');" style=""><abbr title="1861                                                 } else if (installingPkgs.contains(cn.getPackageName())) {">1861                                                 } else if (installingPkgs.contains(cn.getPackageName())) </abbr></span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">1862                                                     // App restore has started. Update the flag          </span>
<span class="-8644667183049601729" onmouseenter="enter('-8644667183049601729');" onmouseout="out('-8644667183049601729');" style="">1863                                                     promiseType |= ShortcutInfo.FLAG_RESTORE_STARTED;    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1864                                                     ContentValues values = new ContentValues();          </span>
<span class="2342985097816451440" onmouseenter="enter('2342985097816451440');" onmouseout="out('2342985097816451440');" style=""><abbr title="1865                                                     values.put(LauncherSettings.Favorites.RESTORED, promiseType);">1865                                                     values.put(LauncherSettings.Favorites.RESTORED, promi</abbr></span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">1866                                                     String where = BaseColumns._ID + &quot;= ?&quot;;              </span>
<span class="-877565314819219638" onmouseenter="enter('-877565314819219638');" onmouseout="out('-877565314819219638');" style=""><abbr title="1867                                                     String[] args = new java.lang.String[]{ Long.toString(id) };">1867                                                     String[] args = new java.lang.String[]{ Long.toString</abbr></span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style=""><abbr title="1868                                                     contentResolver.update(contentUri, values, where, args);">1868                                                     contentResolver.update(contentUri, values, where, arg</abbr></span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">1869                                                 } else if (REMOVE_UNRESTORED_ICONS) {                    </span>
<span class="-2584532676333992238" onmouseenter="enter('-2584532676333992238');" onmouseout="out('-2584532676333992238');" style=""><abbr title="1870                                                     Launcher.addDumpLog(TAG, &quot;Unrestored package removed: &quot; + cn, true);">1870                                                     Launcher.addDumpLog(TAG, &quot;Unrestored package removed:</abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1871                                                     itemsToRemove.add(id);                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1872                                                     continue;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1873                                                 }                                                        </span>
<span class="-1386874848571608329" onmouseenter="enter('-1386874848571608329');" onmouseout="out('-1386874848571608329');" style="">1874                                             } else if (isSdCardReady) {                                  </span>
<span class="3796946079469102110" onmouseenter="enter('3796946079469102110');" onmouseout="out('3796946079469102110');" style="">1875                                             // Do not wait for external media load anymore.              </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">1876                                                 // Log the invalid package, and remove it                </span>
<span class="-8862555937828848407" onmouseenter="enter('-8862555937828848407');" onmouseout="out('-8862555937828848407');" style=""><abbr title="1877                                                 Launcher.addDumpLog(TAG, &quot;Invalid package removed: &quot; + cn, true);">1877                                                 Launcher.addDumpLog(TAG, &quot;Invalid package removed: &quot; + cn</abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1878                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1879                                                 continue;                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1880                                             } else {                                                     </span>
<span class="1407932970386463384" onmouseenter="enter('1407932970386463384');" onmouseout="out('1407932970386463384');" style="">1881                                                 // SdCard is not ready yet. Package might get available, </span>
<span class="8490114520358161793" onmouseenter="enter('8490114520358161793');" onmouseout="out('8490114520358161793');" style="">1882                                                 // once it is ready.                                     </span>
<span class="3864451290968093136" onmouseenter="enter('3864451290968093136');" onmouseout="out('3864451290968093136');" style=""><abbr title="1883                                                 Launcher.addDumpLog(TAG, (&quot;Invalid package: &quot; + cn) + &quot; (check again later)&quot;, true);">1883                                                 Launcher.addDumpLog(TAG, (&quot;Invalid package: &quot; + cn) + &quot; (</abbr></span>
<span class="-8366417370187832083" onmouseenter="enter('-8366417370187832083');" onmouseout="out('-8366417370187832083');" style="">1884                                                 HashSet&lt;String&gt; pkgs = sPendingPackages.get(user);       </span>
<span class="3542388323197199472" onmouseenter="enter('3542388323197199472');" onmouseout="out('3542388323197199472');" style="">1885                                                 if (pkgs == null) {                                      </span>
<span class="2501092745877296895" onmouseenter="enter('2501092745877296895');" onmouseout="out('2501092745877296895');" style="">1886                                                     pkgs = new HashSet&lt;String&gt;();                        </span>
<span class="-7473793273553333759" onmouseenter="enter('-7473793273553333759');" onmouseout="out('-7473793273553333759');" style="">1887                                                     sPendingPackages.put(user, pkgs);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1888                                                 }                                                        </span>
<span class="-4896386049384421066" onmouseenter="enter('-4896386049384421066');" onmouseout="out('-4896386049384421066');" style="">1889                                                 pkgs.add(cn.getPackageName());                           </span>
<span class="-7690684901319719205" onmouseenter="enter('-7690684901319719205');" onmouseout="out('-7690684901319719205');" style="">1890                                                 allowMissingTarget = true;                               </span>
<span class="7315818939061071709" onmouseenter="enter('7315818939061071709');" onmouseout="out('7315818939061071709');" style="">1891                                             // Add the icon on the workspace anyway.                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1892                                             }                                                            </span>
<span class="-237996807879267337" onmouseenter="enter('-237996807879267337');" onmouseout="out('-237996807879267337');" style="">1893                                         } else if (cn == null) {                                         </span>
<span class="8972274794412921183" onmouseenter="enter('8972274794412921183');" onmouseout="out('8972274794412921183');" style="">1894                                             // For shortcuts with no component, keep them as they are    </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1895                                             restoredRows.add(id);                                        </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1896                                             restored = false;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1897                                         }                                                                </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1898                                     } catch (URISyntaxException e) {                                     </span>
<span class="-4515130284142080718" onmouseenter="enter('-4515130284142080718');" onmouseout="out('-4515130284142080718');" style=""><abbr title="1899                                         Launcher.addDumpLog(TAG, &quot;Invalid uri: &quot; + intentDescription, true);">1899                                         Launcher.addDumpLog(TAG, &quot;Invalid uri: &quot; + intentDescription, tru</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1900                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1901                                     }                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1902                                     if (restored) {                                                      </span>
<span class="-3932834939055806292" onmouseenter="enter('-3932834939055806292');" onmouseout="out('-3932834939055806292');" style="">1903                                         if (user.equals(UserHandleCompat.myUserHandle())) {              </span>
<span class="1357336281275541127" onmouseenter="enter('1357336281275541127');" onmouseout="out('1357336281275541127');" style=""><abbr title="1904                                             Launcher.addDumpLog(TAG, &quot;constructing info for partially restored package&quot;, true);">1904                                             Launcher.addDumpLog(TAG, &quot;constructing info for partially res</abbr></span>
<span class="9114514411241404985" onmouseenter="enter('9114514411241404985');" onmouseout="out('9114514411241404985');" style=""><abbr title="1905                                             info = getRestoredItemInfo(c, titleIndex, intent, promiseType);">1905                                             info = getRestoredItemInfo(c, titleIndex, intent, promiseType</abbr></span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">1906                                             intent = getRestoredItemIntent(c, context, intent);          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1907                                         } else {                                                         </span>
<span class="5174235078557753913" onmouseenter="enter('5174235078557753913');" onmouseout="out('5174235078557753913');" style="">1908                                             // Don&#x27;t restore items for other profiles.                   </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1909                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1910                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1911                                         }                                                                </span>
<span class="2236923880514106756" onmouseenter="enter('2236923880514106756');" onmouseout="out('2236923880514106756');" style=""><abbr title="1912                                     } else if (itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {">1912                                     } else if (itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATI</abbr></span>
<span class="-7752513448790764873" onmouseenter="enter('-7752513448790764873');" onmouseout="out('-7752513448790764873');" style=""><abbr title="1913                                         info = getShortcutInfo(manager, intent, user, context, c, iconIndex, titleIndex, mLabelCache, allowMissingTarget);">1913                                         info = getShortcutInfo(manager, intent, user, context, c, iconInd</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1914                                     } else {                                                             </span>
<span class="-5390602608011791340" onmouseenter="enter('-5390602608011791340');" onmouseout="out('-5390602608011791340');" style=""><abbr title="1915                                         info = getShortcutInfo(c, context, iconTypeIndex, iconPackageIndex, iconResourceIndex, iconIndex, titleIndex);">1915                                         info = getShortcutInfo(c, context, iconTypeIndex, iconPackageInde</abbr></span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">1916                                     // App shortcuts that used to be automatically added to Launcher     </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">1917                                     // didn&#x27;t always have the correct intent flags set, so do that       </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">1918                                     // here                                                              </span>
<span class="-3656991395984310113" onmouseenter="enter('-3656991395984310113');" onmouseout="out('-3656991395984310113');" style=""><abbr title="1919                                         if ((((intent.getAction() != null) &amp;&amp; (intent.getCategories() != null)) &amp;&amp; intent.getAction().equals(Intent.ACTION_MAIN)) &amp;&amp; intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {">1919                                         if ((((intent.getAction() != null) &amp;&amp; (intent.getCategories() != </abbr></span>
<span class="-2343040772585959990" onmouseenter="enter('-2343040772585959990');" onmouseout="out('-2343040772585959990');" style=""><abbr title="1920                                             intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);">1920                                             intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_A</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1921                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1922                                     }                                                                    </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">1923                                     if (info != null) {                                                  </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">1924                                         info.id = id;                                                    </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">1925                                         info.intent = intent;                                            </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1926                                         container = c.getInt(containerIndex);                            </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">1927                                         info.container = container;                                      </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">1928                                         info.screenId = c.getInt(screenIndex);                           </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">1929                                         info.cellX = c.getInt(cellXIndex);                               </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">1930                                         info.cellY = c.getInt(cellYIndex);                               </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">1931                                         info.spanX = 1;                                                  </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">1932                                         info.spanY = 1;                                                  </span>
<span class="3045271753555441709" onmouseenter="enter('3045271753555441709');" onmouseout="out('3045271753555441709');" style="">1933                                         info.intent.putExtra(ItemInfo.EXTRA_PROFILE, serialNumber);      </span>
<span class="7150962943077039018" onmouseenter="enter('7150962943077039018');" onmouseout="out('7150962943077039018');" style=""><abbr title="1934                                         info.isDisabled = isSafeMode &amp;&amp; (!Utilities.isSystemApp(context, intent));">1934                                         info.isDisabled = isSafeMode &amp;&amp; (!Utilities.isSystemApp(context, </abbr></span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1935                                         // check &amp; update map of what&#x27;s occupied                         </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1936                                         deleteOnInvalidPlacement.set(false);                             </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style=""><abbr title="1937                                         if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) {">1937                                         if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1938                                             if (deleteOnInvalidPlacement.get()) {                        </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1939                                                 itemsToRemove.add(id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1940                                             }                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1941                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1942                                         }                                                                </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1943                                         switch (container) {                                             </span>
<span class="-243737165652948931" onmouseenter="enter('-243737165652948931');" onmouseout="out('-243737165652948931');" style="">1944                                             case LauncherSettings.Favorites.CONTAINER_DESKTOP :          </span>
<span class="8878956388033266606" onmouseenter="enter('8878956388033266606');" onmouseout="out('8878956388033266606');" style="">1945                                             case LauncherSettings.Favorites.CONTAINER_HOTSEAT :          </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">1946                                                 sBgWorkspaceItems.add(info);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1947                                                 break;                                                   </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style="">1948                                             default :                                                    </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">1949                                         // Item is in a user folder                                      </span>
<span class="2628004221817599267" onmouseenter="enter('2628004221817599267');" onmouseout="out('2628004221817599267');" style=""><abbr title="1950                                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, container);">1950                                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, cont</abbr></span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">1951                                                 folderInfo.add(info);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1952                                                 break;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1953                                         }                                                                </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">1954                                         sBgItemsIdMap.put(info.id, info);                                </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">1955                                         // now that we&#x27;ve loaded everthing re-save it with the           </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">1956                                         // icon in case it disappears somehow.                           </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">1957                                         queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1958                                     } else {                                                             </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">1959                                         throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1960                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1961                                     break;                                                               </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style="">1962                                 case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                       </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1963                                     id = c.getLong(idIndex);                                             </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">1964                                     FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);            </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1965                                     folderInfo.title = c.getString(titleIndex);                          </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1966                                     folderInfo.id = id;                                                  </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1967                                     container = c.getInt(containerIndex);                                </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">1968                                     folderInfo.container = container;                                    </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1969                                     folderInfo.screenId = c.getInt(screenIndex);                         </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1970                                     folderInfo.cellX = c.getInt(cellXIndex);                             </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1971                                     folderInfo.cellY = c.getInt(cellYIndex);                             </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">1972                                     folderInfo.spanX = 1;                                                </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">1973                                     folderInfo.spanY = 1;                                                </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1974                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1975                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="-1509179358414071002" onmouseenter="enter('-1509179358414071002');" onmouseout="out('-1509179358414071002');" style=""><abbr title="1976                                     if (!checkItemPlacement(occupied, folderInfo, deleteOnInvalidPlacement)) {">1976                                     if (!checkItemPlacement(occupied, folderInfo, deleteOnInvalidPlacemen</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1977                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1978                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1979                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1980                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1981                                     }                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1982                                     switch (container) {                                                 </span>
<span class="-243737165652948931" onmouseenter="enter('-243737165652948931');" onmouseout="out('-243737165652948931');" style="">1983                                         case LauncherSettings.Favorites.CONTAINER_DESKTOP :              </span>
<span class="8878956388033266606" onmouseenter="enter('8878956388033266606');" onmouseout="out('8878956388033266606');" style="">1984                                         case LauncherSettings.Favorites.CONTAINER_HOTSEAT :              </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">1985                                             sBgWorkspaceItems.add(folderInfo);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1986                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1987                                     }                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1988                                     if (restored) {                                                      </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">1989                                         // no special handling required for restored folders             </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1990                                         restoredRows.add(id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1991                                     }                                                                    </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">1992                                     sBgItemsIdMap.put(folderInfo.id, folderInfo);                        </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">1993                                     sBgFolders.put(folderInfo.id, folderInfo);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1994                                     break;                                                               </span>
<span class="-572090049804539709" onmouseenter="enter('-572090049804539709');" onmouseout="out('-572090049804539709');" style="">1995                                 case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET :                    </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">1996                                     // Read all Launcher-specific widget details                         </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">1997                                     int appWidgetId = c.getInt(appWidgetIdIndex);                        </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">1998                                     String savedProvider = c.getString(appWidgetProviderIndex);          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1999                                     id = c.getLong(idIndex);                                             </span>
<span class="8078083586659843378" onmouseenter="enter('8078083586659843378');" onmouseout="out('8078083586659843378');" style=""><abbr title="2000                                     final ComponentName component = ComponentName.unflattenFromString(savedProvider);">2000                                     final ComponentName component = ComponentName.unflattenFromString(sav</abbr></span>
<span class="-1033311611191387821" onmouseenter="enter('-1033311611191387821');" onmouseout="out('-1033311611191387821');" style="">2001                                     final int restoreStatus = c.getInt(restoredIndex);                   </span>
<span class="6018676020162178" onmouseenter="enter('6018676020162178');" onmouseout="out('6018676020162178');" style=""><abbr title="2002                                     final boolean isIdValid = (restoreStatus &amp; LauncherAppWidgetInfo.FLAG_ID_NOT_VALID) == 0;">2002                                     final boolean isIdValid = (restoreStatus &amp; LauncherAppWidgetInfo.FLAG</abbr></span>
<span class="4606105832212378930" onmouseenter="enter('4606105832212378930');" onmouseout="out('4606105832212378930');" style=""><abbr title="2003                                     final boolean wasProviderReady = (restoreStatus &amp; LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) == 0;">2003                                     final boolean wasProviderReady = (restoreStatus &amp; LauncherAppWidgetIn</abbr></span>
<span class="-8926252082554534344" onmouseenter="enter('-8926252082554534344');" onmouseout="out('-8926252082554534344');" style=""><abbr title="2004                                     final AppWidgetProviderInfo provider = (isIdValid) ? widgets.getAppWidgetInfo(appWidgetId) : findAppWidgetProviderInfoWithComponent(context, component);">2004                                     final AppWidgetProviderInfo provider = (isIdValid) ? widgets.getAppWi</abbr></span>
<span class="-3732530231777271434" onmouseenter="enter('-3732530231777271434');" onmouseout="out('-3732530231777271434');" style="">2005                                     final boolean isProviderReady = isValidProvider(provider);           </span>
<span class="-1680607524275900953" onmouseenter="enter('-1680607524275900953');" onmouseout="out('-1680607524275900953');" style="">2006                                     if (((!isSafeMode) &amp;&amp; wasProviderReady) &amp;&amp; (!isProviderReady)) {     </span>
<span class="-616275105154599843" onmouseenter="enter('-616275105154599843');" onmouseout="out('-616275105154599843');" style=""><abbr title="2007                                         String log = (((&quot;Deleting widget that isn\&#x27;t installed anymore: &quot; + &quot;id=&quot;) + id) + &quot; appWidgetId=&quot;) + appWidgetId;">2007                                         String log = (((&quot;Deleting widget that isn\&#x27;t installed anymore: &quot;</abbr></span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2008                                         Log.e(TAG, log);                                                 </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2009                                         Launcher.addDumpLog(TAG, log, false);                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2010                                         itemsToRemove.add(id);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2011                                     } else {                                                             </span>
<span class="-6990378869891346567" onmouseenter="enter('-6990378869891346567');" onmouseout="out('-6990378869891346567');" style="">2012                                         if (isProviderReady) {                                           </span>
<span class="8729577948298719872" onmouseenter="enter('8729577948298719872');" onmouseout="out('8729577948298719872');" style=""><abbr title="2013                                             appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, provider.provider);">2013                                             appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, provid</abbr></span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style=""><abbr title="2014                                             int[] minSpan = Launcher.getMinSpanForWidget(context, provider);">2014                                             int[] minSpan = Launcher.getMinSpanForWidget(context, provide</abbr></span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2015                                             appWidgetInfo.minSpanX = minSpan[0];                         </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2016                                             appWidgetInfo.minSpanY = minSpan[1];                         </span>
<span class="-4125236257298908421" onmouseenter="enter('-4125236257298908421');" onmouseout="out('-4125236257298908421');" style="">2017                                             int status = restoreStatus;                                  </span>
<span class="7579397535150427943" onmouseenter="enter('7579397535150427943');" onmouseout="out('7579397535150427943');" style="">2018                                             if (!wasProviderReady) {                                     </span>
<span class="1257696726614810242" onmouseenter="enter('1257696726614810242');" onmouseout="out('1257696726614810242');" style="">2019                                                 // If provider was not previously ready, update the      </span>
<span class="2493747474831820434" onmouseenter="enter('2493747474831820434');" onmouseout="out('2493747474831820434');" style="">2020                                                 // status and UI flag.                                   </span>
<span class="-551194396664004778" onmouseenter="enter('-551194396664004778');" onmouseout="out('-551194396664004778');" style=""><abbr title="2021                                                 // Id would be valid only if the widget restore broadcast was received.">2021                                                 // Id would be valid only if the widget restore broadcast</abbr></span>
<span class="877884548755909685" onmouseenter="enter('877884548755909685');" onmouseout="out('877884548755909685');" style="">2022                                                 if (isIdValid) {                                         </span>
<span class="7708410681175562751" onmouseenter="enter('7708410681175562751');" onmouseout="out('7708410681175562751');" style="">2023                                                     status = LauncherAppWidgetInfo.RESTORE_COMPLETED;    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2024                                                 } else {                                                 </span>
<span class="5542564558278520017" onmouseenter="enter('5542564558278520017');" onmouseout="out('5542564558278520017');" style=""><abbr title="2025                                                     status &amp;= ~LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY;">2025                                                     status &amp;= ~LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_RE</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2026                                                 }                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2027                                             }                                                            </span>
<span class="-5649718664209503492" onmouseenter="enter('-5649718664209503492');" onmouseout="out('-5649718664209503492');" style="">2028                                             appWidgetInfo.restoreStatus = status;                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2029                                         } else {                                                         </span>
<span class="-2966831558437823751" onmouseenter="enter('-2966831558437823751');" onmouseout="out('-2966831558437823751');" style=""><abbr title="2030                                             Log.v(TAG, ((((&quot;Widget restore pending id=&quot; + id) + &quot; appWidgetId=&quot;) + appWidgetId) + &quot; status =&quot;) + restoreStatus);">2030                                             Log.v(TAG, ((((&quot;Widget restore pending id=&quot; + id) + &quot; appWidg</abbr></span>
<span class="-5139724698281222051" onmouseenter="enter('-5139724698281222051');" onmouseout="out('-5139724698281222051');" style=""><abbr title="2031                                             appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, component);">2031                                             appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, compon</abbr></span>
<span class="5437344546404607904" onmouseenter="enter('5437344546404607904');" onmouseout="out('5437344546404607904');" style="">2032                                             appWidgetInfo.restoreStatus = restoreStatus;                 </span>
<span class="3064749011557231100" onmouseenter="enter('3064749011557231100');" onmouseout="out('3064749011557231100');" style=""><abbr title="2033                                             if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) != 0) {">2033                                             if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_START</abbr></span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2034                                                 // Restore has started once.                             </span>
<span class="1863960885189711466" onmouseenter="enter('1863960885189711466');" onmouseout="out('1863960885189711466');" style=""><abbr title="2035                                             } else if (installingPkgs.contains(component.getPackageName())) {">2035                                             } else if (installingPkgs.contains(component.getPackageName()</abbr></span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2036                                                 // App restore has started. Update the flag              </span>
<span class="4536365230915659225" onmouseenter="enter('4536365230915659225');" onmouseout="out('4536365230915659225');" style=""><abbr title="2037                                                 appWidgetInfo.restoreStatus |= LauncherAppWidgetInfo.FLAG_RESTORE_STARTED;">2037                                                 appWidgetInfo.restoreStatus |= LauncherAppWidgetInfo.FLAG</abbr></span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2038                                             } else if (REMOVE_UNRESTORED_ICONS) {                        </span>
<span class="-3060823902277116949" onmouseenter="enter('-3060823902277116949');" onmouseout="out('-3060823902277116949');" style=""><abbr title="2039                                                 Launcher.addDumpLog(TAG, &quot;Unrestored widget removed: &quot; + component, true);">2039                                                 Launcher.addDumpLog(TAG, &quot;Unrestored widget removed: &quot; + </abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2040                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2041                                                 continue;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2042                                             }                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2043                                         }                                                                </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2044                                         appWidgetInfo.id = id;                                           </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2045                                         appWidgetInfo.screenId = c.getInt(screenIndex);                  </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2046                                         appWidgetInfo.cellX = c.getInt(cellXIndex);                      </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2047                                         appWidgetInfo.cellY = c.getInt(cellYIndex);                      </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2048                                         appWidgetInfo.spanX = c.getInt(spanXIndex);                      </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2049                                         appWidgetInfo.spanY = c.getInt(spanYIndex);                      </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2050                                         container = c.getInt(containerIndex);                            </span>
<span class="-4050334248407940033" onmouseenter="enter('-4050334248407940033');" onmouseout="out('-4050334248407940033');" style=""><abbr title="2051                                         if ((container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (container != LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {">2051                                         if ((container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;</abbr></span>
<span class="7404652805162444756" onmouseenter="enter('7404652805162444756');" onmouseout="out('7404652805162444756');" style=""><abbr title="2052                                             Log.e(TAG, &quot;Widget found where container != &quot; + &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);">2052                                             Log.e(TAG, &quot;Widget found where container != &quot; + &quot;CONTAINER_DE</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2053                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2054                                         }                                                                </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2055                                         appWidgetInfo.container = c.getInt(containerIndex);              </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2056                                         // check &amp; update map of what&#x27;s occupied                         </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2057                                         deleteOnInvalidPlacement.set(false);                             </span>
<span class="624158001295943608" onmouseenter="enter('624158001295943608');" onmouseout="out('624158001295943608');" style=""><abbr title="2058                                         if (!checkItemPlacement(occupied, appWidgetInfo, deleteOnInvalidPlacement)) {">2058                                         if (!checkItemPlacement(occupied, appWidgetInfo, deleteOnInvalidP</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2059                                             if (deleteOnInvalidPlacement.get()) {                        </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2060                                                 itemsToRemove.add(id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2061                                             }                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2062                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2063                                         }                                                                </span>
<span class="-8698298148744232980" onmouseenter="enter('-8698298148744232980');" onmouseout="out('-8698298148744232980');" style=""><abbr title="2064                                         String providerName = appWidgetInfo.providerName.flattenToString();">2064                                         String providerName = appWidgetInfo.providerName.flattenToString(</abbr></span>
<span class="-946247368616463127" onmouseenter="enter('-946247368616463127');" onmouseout="out('-946247368616463127');" style=""><abbr title="2065                                         if ((!providerName.equals(savedProvider)) || (appWidgetInfo.restoreStatus != restoreStatus)) {">2065                                         if ((!providerName.equals(savedProvider)) || (appWidgetInfo.resto</abbr></span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2066                                             ContentValues values = new ContentValues();                  </span>
<span class="4458189258819483671" onmouseenter="enter('4458189258819483671');" onmouseout="out('4458189258819483671');" style=""><abbr title="2067                                             values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER, providerName);">2067                                             values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER, pro</abbr></span>
<span class="-1553795309378945639" onmouseenter="enter('-1553795309378945639');" onmouseout="out('-1553795309378945639');" style=""><abbr title="2068                                             values.put(LauncherSettings.Favorites.RESTORED, appWidgetInfo.restoreStatus);">2068                                             values.put(LauncherSettings.Favorites.RESTORED, appWidgetInfo</abbr></span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2069                                             String where = BaseColumns._ID + &quot;= ?&quot;;                      </span>
<span class="-877565314819219638" onmouseenter="enter('-877565314819219638');" onmouseout="out('-877565314819219638');" style="">2070                                             String[] args = new java.lang.String[]{ Long.toString(id) }; </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2071                                             contentResolver.update(contentUri, values, where, args);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2072                                         }                                                                </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2073                                         sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);              </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2074                                         sBgAppWidgets.add(appWidgetInfo);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2075                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2076                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2077                             }                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">2078                         } catch (java.lang.Exception e) {                                                </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2079                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2080                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2081                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2082                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2083                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2084                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2085                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2086                 }                                                                                        </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2087                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2088                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2089                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2090                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2091                 }                                                                                        </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2092                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="-2731141380071723207" onmouseenter="enter('-2731141380071723207');" onmouseout="out('-2731141380071723207');" style=""><abbr title="2093                     ContentProviderClient client = contentResolver.acquireContentProviderClient(contentUri);">2093                     ContentProviderClient client = contentResolver.acquireContentProviderClient(contentUr</abbr></span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2094                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2095                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2096                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2097                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2098                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2099                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2100                         try {                                                                            </span>
<span class="-8377090628300712682" onmouseenter="enter('-8377090628300712682');" onmouseout="out('-8377090628300712682');" style=""><abbr title="2101                             client.delete(LauncherSettings.Favorites.getContentUri(id, false), null, null);">2101                             client.delete(LauncherSettings.Favorites.getContentUri(id, false), null, null</abbr></span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2102                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2103                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2104                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2105                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2106                 }                                                                                        </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2107                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="5371064053707697179" onmouseenter="enter('5371064053707697179');" onmouseout="out('5371064053707697179');" style=""><abbr title="2108                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(contentUri);">2108                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(contentU</abbr></span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2109                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2110                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2111                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2112                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2113                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2114                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2115                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2116                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2117                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="345657349201776292" onmouseenter="enter('345657349201776292');" onmouseout="out('345657349201776292');" style=""><abbr title="2118                         updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values, selectionBuilder.toString(), null);">2118                         updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values, se</abbr></span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2119                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2120                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2121                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2122                 }                                                                                        </span>
<span class="-3219977305654091630" onmouseenter="enter('-3219977305654091630');" onmouseout="out('-3219977305654091630');" style="">2123                 if ((!isSdCardReady) &amp;&amp; (!sPendingPackages.isEmpty())) {                                 </span>
<span class="-2960758839551836627" onmouseenter="enter('-2960758839551836627');" onmouseout="out('-2960758839551836627');" style=""><abbr title="2124                     context.registerReceiver(new AppsAvailabilityCheck(), new IntentFilter(StartupReceiver.SYSTEM_READY), null, sWorker);">2124                     context.registerReceiver(new AppsAvailabilityCheck(), new IntentFilter(StartupReceive</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2125                 }                                                                                        </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2126                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2127                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2128                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">2129                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2130                         long screenId = item.screenId;                                                   </span>
<span class="-5790181917475254894" onmouseenter="enter('-5790181917475254894');" onmouseout="out('-5790181917475254894');" style=""><abbr title="2131                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (!sBgWorkspaceScreens.contains(screenId))) {">2131                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (!sBgWork</abbr></span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2132                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2133                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2134                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2135                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2136                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2137                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2138                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2139                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2140                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="471675311745375832" onmouseenter="enter('471675311745375832');" onmouseout="out('471675311745375832');" style=""><abbr title="2141                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);">2141                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, </abbr></span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2142                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2143                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2144                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2145                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2146                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">2147                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2148                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2149                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2150                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2151                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2152                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2153                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2154                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2155                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2156                     // Log to disk                                                                       </span>
<span class="471675311745375832" onmouseenter="enter('471675311745375832');" onmouseout="out('471675311745375832');" style=""><abbr title="2157                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);">2157                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, </abbr></span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2158                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2159                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">2160                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2161                         long screenId = item.screenId;                                                   </span>
<span class="-2619061293676710063" onmouseenter="enter('-2619061293676710063');" onmouseout="out('-2619061293676710063');" style=""><abbr title="2162                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; unusedScreens.contains(screenId)) {">2162                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; unusedScr</abbr></span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2163                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2164                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2165                     }                                                                                    </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2166                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2167                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2168                         // Log to disk                                                                   </span>
<span class="3224213598090422289" onmouseenter="enter('3224213598090422289');" onmouseout="out('3224213598090422289');" style=""><abbr title="2169                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; + TextUtils.join(&quot;, &quot;, unusedScreens), true);">2169                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; + TextUti</abbr></span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2170                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2171                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2172                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2173                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2174                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7903276559551393896" onmouseenter="enter('7903276559551393896');" onmouseout="out('7903276559551393896');" style="">2175                     Log.d(TAG, (&quot;loaded workspace in &quot; + (SystemClock.uptimeMillis() - t)) + &quot;ms&quot;);      </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2176                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2177                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2178                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2179                         String line = &quot;&quot;;                                                                </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2180                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2181                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2182                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2183                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2184                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2185                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2186                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="-6212011147390486077" onmouseenter="enter('-6212011147390486077');" onmouseout="out('-6212011147390486077');" style="">2187                                 ItemInfo[][] screen = occupied.get(screenId);                            </span>
<span class="-3401241299463807582" onmouseenter="enter('-3401241299463807582');" onmouseout="out('-3401241299463807582');" style="">2188                                 if ((x &lt; screen.length) &amp;&amp; (y &lt; screen[x].length)) {                     </span>
<span class="2138628812736326092" onmouseenter="enter('2138628812736326092');" onmouseout="out('2138628812736326092');" style="">2189                                     line += (screen[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2190                                 } else {                                                                 </span>
<span class="3801202768225819208" onmouseenter="enter('3801202768225819208');" onmouseout="out('3801202768225819208');" style="">2191                                     line += &quot;!&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2192                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2193                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2194                         }                                                                                </span>
<span class="897171976692622190" onmouseenter="enter('897171976692622190');" onmouseout="out('897171976692622190');" style="">2195                         Log.d(TAG, (&quot;[ &quot; + line) + &quot; ]&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2196                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2197                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2198             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2199             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2200         }                                                                                                </span>
<span  style="">2201                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2202         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2203          * specified screen. */                                                                          </span>
<span class="-8325061695461763729" onmouseenter="enter('-8325061695461763729');" onmouseout="out('-8325061695461763729');" style=""><abbr title="2204         private void filterCurrentWorkspaceItems(long currentScreenId, ArrayList&lt;ItemInfo&gt; allWorkspaceItems, ArrayList&lt;ItemInfo&gt; currentScreenItems, ArrayList&lt;ItemInfo&gt; otherScreenItems) {">2204         private void filterCurrentWorkspaceItems(long currentScreenId, ArrayList&lt;ItemInfo&gt; allWorkspaceIt</abbr></span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2205             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2206             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2207             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2208                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2209                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2210                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2211                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2212             }                                                                                            </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2213             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2214             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2215             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2216             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2217             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2218                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2219                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1106143337117455757" onmouseenter="enter('-1106143337117455757');" onmouseout="out('-1106143337117455757');" style="">2220                     return ((int) (lhs.container - rhs.container));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2221                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2222             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2223             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2224                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2225                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2226                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2227                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2228                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2229                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2230                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2231                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2232                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2233                     itemsOnScreen.add(info.id);                                                          </span>
<span class="2199417788618410097" onmouseenter="enter('2199417788618410097');" onmouseout="out('2199417788618410097');" style="">2234                 } else if (itemsOnScreen.contains(info.container)) {                                     </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2235                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2236                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2237                 } else {                                                                                 </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2238                     otherScreenItems.add(info);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2239                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2240             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2241         }                                                                                                </span>
<span  style="">2242                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2243         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="-1344846415293232488" onmouseenter="enter('-1344846415293232488');" onmouseout="out('-1344846415293232488');" style=""><abbr title="2244         private void filterCurrentAppWidgets(long currentScreenId, ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets, ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets, ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {">2244         private void filterCurrentAppWidgets(long currentScreenId, ArrayList&lt;LauncherAppWidgetInfo&gt; appWi</abbr></span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2245             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="3820080085881789794" onmouseenter="enter('3820080085881789794');" onmouseout="out('3820080085881789794');" style="">2246                 if (widget == null) {                                                                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2247                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2248                 }                                                                                        </span>
<span class="8379462461845992860" onmouseenter="enter('8379462461845992860');" onmouseout="out('8379462461845992860');" style=""><abbr title="2249                 if ((widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (widget.screenId == currentScreenId)) {">2249                 if ((widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (widget.screenI</abbr></span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2250                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2251                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2252                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2253                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2254             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2255         }                                                                                                </span>
<span  style="">2256                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2257         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="-932467149735048615" onmouseenter="enter('-932467149735048615');" onmouseout="out('-932467149735048615');" style=""><abbr title="2258         private void filterCurrentFolders(long currentScreenId, HashMap&lt;Long, ItemInfo&gt; itemsIdMap, HashMap&lt;Long, FolderInfo&gt; folders, HashMap&lt;Long, FolderInfo&gt; currentScreenFolders, HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {">2258         private void filterCurrentFolders(long currentScreenId, HashMap&lt;Long, ItemInfo&gt; itemsIdMap, HashM</abbr></span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2259             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2260                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2261                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="-580987735855991773" onmouseenter="enter('-580987735855991773');" onmouseout="out('-580987735855991773');" style="">2262                 if ((info == null) || (folder == null)) {                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2263                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2264                 }                                                                                        </span>
<span class="-8679678645303648611" onmouseenter="enter('-8679678645303648611');" onmouseout="out('-8679678645303648611');" style=""><abbr title="2265                 if ((info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (info.screenId == currentScreenId)) {">2265                 if ((info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (info.screenId ==</abbr></span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2266                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2267                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2268                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2269                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2270             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2271         }                                                                                                </span>
<span  style="">2272                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2273         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2274          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2275         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2276             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2277             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2278             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2279             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2280                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2281                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1438938711154054801" onmouseenter="enter('-1438938711154054801');" onmouseout="out('-1438938711154054801');" style="">2282                     int cellCountX = ((int) (grid.numColumns));                                          </span>
<span class="8922910107101700428" onmouseenter="enter('8922910107101700428');" onmouseout="out('8922910107101700428');" style="">2283                     int cellCountY = ((int) (grid.numRows));                                             </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2284                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-2237698005714932158" onmouseenter="enter('-2237698005714932158');" onmouseout="out('-2237698005714932158');" style="">2285                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1);// +1 hotseat       </span>
<span  style="">2286                                                                                                          </span>
<span class="-8213315077924848318" onmouseenter="enter('-8213315077924848318');" onmouseout="out('-8213315077924848318');" style=""><abbr title="2287                     long lr = (((lhs.container * containerOffset) + (lhs.screenId * screenOffset)) + (lhs.cellY * cellCountX)) + lhs.cellX;">2287                     long lr = (((lhs.container * containerOffset) + (lhs.screenId * screenOffset)) + (lhs</abbr></span>
<span class="4271864280920633428" onmouseenter="enter('4271864280920633428');" onmouseout="out('4271864280920633428');" style=""><abbr title="2288                     long rr = (((rhs.container * containerOffset) + (rhs.screenId * screenOffset)) + (rhs.cellY * cellCountX)) + rhs.cellX;">2288                     long rr = (((rhs.container * containerOffset) + (rhs.screenId * screenOffset)) + (rhs</abbr></span>
<span class="-4221888252583873829" onmouseenter="enter('-4221888252583873829');" onmouseout="out('-4221888252583873829');" style="">2289                     return ((int) (lr - rr));                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2290                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2291             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2292         }                                                                                                </span>
<span  style="">2293                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2294         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2295                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2296             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2297                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2298                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2299                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2300                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2301                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2302                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2303                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2304             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2305             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2306         }                                                                                                </span>
<span  style="">2307                                                                                                          </span>
<span class="1891675589127429654" onmouseenter="enter('1891675589127429654');" onmouseout="out('1891675589127429654');" style=""><abbr title="2308         private void bindWorkspaceItems(final Callbacks oldCallbacks, final ArrayList&lt;ItemInfo&gt; workspaceItems, final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets, final HashMap&lt;Long, FolderInfo&gt; folders, ArrayList&lt;Runnable&gt; deferredBindRunnables) {">2308         private void bindWorkspaceItems(final Callbacks oldCallbacks, final ArrayList&lt;ItemInfo&gt; workspace</abbr></span>
<span class="-38585977637652342" onmouseenter="enter('-38585977637652342');" onmouseout="out('-38585977637652342');" style="">2309             final boolean postOnMainThread = deferredBindRunnables != null;                              </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2310             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2311             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2312             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2313                 final int start = i;                                                                     </span>
<span class="-6277507301767892589" onmouseenter="enter('-6277507301767892589');" onmouseout="out('-6277507301767892589');" style="">2314                 final int chunkSize = ((i + ITEMS_CHUNK) &lt;= N) ? ITEMS_CHUNK : N - i;                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2315                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2316                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2317                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2318                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2319                         if (callbacks != null) {                                                         </span>
<span class="5307922778193224820" onmouseenter="enter('5307922778193224820');" onmouseout="out('5307922778193224820');" style="">2320                             callbacks.bindItems(workspaceItems, start, start + chunkSize, false);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2321                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2322                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2323                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2324                 if (postOnMainThread) {                                                                  </span>
<span class="-2103554278280266432" onmouseenter="enter('-2103554278280266432');" onmouseout="out('-2103554278280266432');" style="">2325                     synchronized(deferredBindRunnables) {                                                </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2326                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2327                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2328                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2329                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2330                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2331             }                                                                                            </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2332             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2333             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2334                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2335                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2336                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2337                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2338                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2339                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2340                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2341                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2342                 if (postOnMainThread) {                                                                  </span>
<span class="-2103554278280266432" onmouseenter="enter('-2103554278280266432');" onmouseout="out('-2103554278280266432');" style="">2343                     synchronized(deferredBindRunnables) {                                                </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2344                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2345                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2346                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2347                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2348                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2349             }                                                                                            </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2350             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2351             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2352             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2353                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2354                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2355                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2356                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2357                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2358                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2359                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2360                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2361                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2362                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2363                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2364                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2365                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2366                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2367             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2368         }                                                                                                </span>
<span  style="">2369                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2370         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2371          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2372          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2373         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2374             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2375             Runnable r;                                                                                  </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2376             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2377             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2378             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2379             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2380                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2381                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2382                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2383             }                                                                                            </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2384             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2385             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="3844231270549126824" onmouseenter="enter('3844231270549126824');" onmouseout="out('3844231270549126824');" style="">2386             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets = new ArrayList&lt;LauncherAppWidgetInfo&gt;();        </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2387             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2388             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2389             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2390             synchronized(sBgLock) {                                                                      </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2391                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2392                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2393                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2394                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2395                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2396             }                                                                                            </span>
<span class="5564253246348200199" onmouseenter="enter('5564253246348200199');" onmouseout="out('5564253246348200199');" style="">2397             final boolean isLoadingSynchronously = synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;</span>
<span class="-1595337420518614132" onmouseenter="enter('-1595337420518614132');" onmouseout="out('-1595337420518614132');" style=""><abbr title="2398             int currScreen = (isLoadingSynchronously) ? synchronizeBindPage : oldCallbacks.getCurrentWorkspaceScreen();">2398             int currScreen = (isLoadingSynchronously) ? synchronizeBindPage : oldCallbacks.getCurrentWork</abbr></span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2399             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2400                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2401                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2402             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2403             final int currentScreen = currScreen;                                                        </span>
<span class="-179611005751201019" onmouseenter="enter('-179611005751201019');" onmouseout="out('-179611005751201019');" style=""><abbr title="2404             final long currentScreenId = (currentScreen &lt; 0) ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);">2404             final long currentScreenId = (currentScreen &lt; 0) ? INVALID_SCREEN_ID : orderedScreenIds.get(c</abbr></span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2405             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2406             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2407             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2408             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2409             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2410             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-609054317006706012" onmouseenter="enter('-609054317006706012');" onmouseout="out('-609054317006706012');" style="">2411             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets = new ArrayList&lt;LauncherAppWidgetInfo&gt;(); </span>
<span class="-9062958238602908575" onmouseenter="enter('-9062958238602908575');" onmouseout="out('-9062958238602908575');" style="">2412             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets = new ArrayList&lt;LauncherAppWidgetInfo&gt;();   </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2413             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2414             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span class="-1123654581916099840" onmouseenter="enter('-1123654581916099840');" onmouseout="out('-1123654581916099840');" style=""><abbr title="2415             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems, otherWorkspaceItems);">2415             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems, otherWork</abbr></span>
<span class="7679218772788462797" onmouseenter="enter('7679218772788462797');" onmouseout="out('7679218772788462797');" style="">2416             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets, otherAppWidgets);    </span>
<span class="-6197537108570878255" onmouseenter="enter('-6197537108570878255');" onmouseout="out('-6197537108570878255');" style="">2417             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders, otherFolders);    </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2418             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2419             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2420             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2421             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2422                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2423                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2424                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2425                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2426                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2427                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2428             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2429             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2430             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2431             // Load items on the current page                                                            </span>
<span class="-8932821665796536122" onmouseenter="enter('-8932821665796536122');" onmouseout="out('-8932821665796536122');" style=""><abbr title="2432             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets, currentFolders, null);">2432             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets, currentFolders, nu</abbr></span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2433             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2434                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2435                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2436                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="-1716707924570444407" onmouseenter="enter('-1716707924570444407');" onmouseout="out('-1716707924570444407');" style="">2437                         if ((callbacks != null) &amp;&amp; (currentScreen != PagedView.INVALID_RESTORE_PAGE)) {  </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2438                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2439                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2440                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2441                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2442                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2443             }                                                                                            </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2444             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2445             // work until after the first render)                                                        </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style="">2446             synchronized(mDeferredBindRunnables) {                                                       </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2447                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2448             }                                                                                            </span>
<span class="4004072035682368150" onmouseenter="enter('4004072035682368150');" onmouseout="out('4004072035682368150');" style=""><abbr title="2449             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders, isLoadingSynchronously ? mDeferredBindRunnables : null);">2449             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders, isLoadin</abbr></span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2450             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2451             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2452                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2453                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2454                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2455                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2456                     }                                                                                    </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2457                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2458                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="7126424552746320219" onmouseenter="enter('7126424552746320219');" onmouseout="out('7126424552746320219');" style="">2459                         Log.d(TAG, (&quot;bound workspace in &quot; + (SystemClock.uptimeMillis() - t)) + &quot;ms&quot;);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2460                     }                                                                                    </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2461                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2462                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2463             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2464             if (isLoadingSynchronously) {                                                                </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style="">2465                 synchronized(mDeferredBindRunnables) {                                                   </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2466                     mDeferredBindRunnables.add(r);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2467                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2468             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2469                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2470             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2471         }                                                                                                </span>
<span  style="">2472                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2473         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2474             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2475                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2476             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2477             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2478                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2479                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2480                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2481                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2482                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2483                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2484                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2485             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2486                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2487             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2488         }                                                                                                </span>
<span  style="">2489                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2490         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2491             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2492             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2493                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2494                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2495                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2496             }                                                                                            </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2497             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2498             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="3610032033107145682" onmouseenter="enter('3610032033107145682');" onmouseout="out('3610032033107145682');" style="">2499             final ArrayList&lt;AppInfo&gt; list = ((ArrayList&lt;AppInfo&gt;) (mBgAllAppsList.data.clone()));        </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2500             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2501                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2502                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2503                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2504                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2505                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2506                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2507                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-3062472775145235730" onmouseenter="enter('-3062472775145235730');" onmouseout="out('-3062472775145235730');" style=""><abbr title="2508                         Log.d(TAG, (((&quot;bound all &quot; + list.size()) + &quot; apps from cache in &quot;) + (SystemClock.uptimeMillis() - t)) + &quot;ms&quot;);">2508                         Log.d(TAG, (((&quot;bound all &quot; + list.size()) + &quot; apps from cache in &quot;) + (SystemCloc</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2509                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2510                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2511             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2512             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2513             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2514                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2515             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2516                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2517             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2518         }                                                                                                </span>
<span  style="">2519                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2520         private void loadAllApps() {                                                                     </span>
<span class="8149184152398766673" onmouseenter="enter('8149184152398766673');" onmouseout="out('8149184152398766673');" style="">2521             final long loadTime = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                      </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2522             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2523             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2524                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2525                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2526                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2527             }                                                                                            </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2528             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2529             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span class="-3689765283860688946" onmouseenter="enter('-3689765283860688946');" onmouseout="out('-3689765283860688946');" style="">2530             final List&lt;UserHandleCompat&gt; profiles = mUserManager.getUserProfiles();                      </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2531             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2532             mBgAllAppsList.clear();                                                                      </span>
<span class="-2262518428251923925" onmouseenter="enter('-2262518428251923925');" onmouseout="out('-2262518428251923925');" style="">2533             for (UserHandleCompat user : profiles) {                                                     </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2534                 // Query for the set of apps                                                             </span>
<span class="-4037045398690514139" onmouseenter="enter('-4037045398690514139');" onmouseout="out('-4037045398690514139');" style="">2535                 final long qiaTime = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                   </span>
<span class="2012422809707549193" onmouseenter="enter('2012422809707549193');" onmouseout="out('2012422809707549193');" style="">2536                 List&lt;LauncherActivityInfoCompat&gt; apps = mLauncherApps.getActivityList(null, user);       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2537                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7955021808459073180" onmouseenter="enter('7955021808459073180');" onmouseout="out('7955021808459073180');" style=""><abbr title="2538                     Log.d(TAG, ((&quot;getActivityList took &quot; + (SystemClock.uptimeMillis() - qiaTime)) + &quot;ms for user &quot;) + user);">2538                     Log.d(TAG, ((&quot;getActivityList took &quot; + (SystemClock.uptimeMillis() - qiaTime)) + &quot;ms </abbr></span>
<span class="2799285437292362192" onmouseenter="enter('2799285437292362192');" onmouseout="out('2799285437292362192');" style="">2539                     Log.d(TAG, ((&quot;getActivityList got &quot; + apps.size()) + &quot; apps for user &quot;) + user);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2540                 }                                                                                        </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2541             // Fail if we don&#x27;t have any apps                                                            </span>
<span class="8225970391092799876" onmouseenter="enter('8225970391092799876');" onmouseout="out('8225970391092799876');" style="">2542                 if ((apps == null) || apps.isEmpty()) {                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2543                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2544                 }                                                                                        </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2545                 // Sort the applications by name                                                         </span>
<span class="-5408684915075564359" onmouseenter="enter('-5408684915075564359');" onmouseout="out('-5408684915075564359');" style="">2546                 final long sortTime = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                  </span>
<span class="-6909455281354601369" onmouseenter="enter('-6909455281354601369');" onmouseout="out('-6909455281354601369');" style="">2547                 Collections.sort(apps, new LauncherModel.ShortcutNameComparator(mLabelCache));           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2548                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="6384883837844400091" onmouseenter="enter('6384883837844400091');" onmouseout="out('6384883837844400091');" style="">2549                     Log.d(TAG, (&quot;sort took &quot; + (SystemClock.uptimeMillis() - sortTime)) + &quot;ms&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2550                 }                                                                                        </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2551             // Create the ApplicationInfos                                                               </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2552                 for (int i = 0; i &lt; apps.size(); i++) {                                                  </span>
<span class="236419152399396874" onmouseenter="enter('236419152399396874');" onmouseout="out('236419152399396874');" style="">2553                     LauncherActivityInfoCompat app = apps.get(i);                                        </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2554                 // This builds the icon bitmaps.                                                         </span>
<span class="-5742259461869454243" onmouseenter="enter('-5742259461869454243');" onmouseout="out('-5742259461869454243');" style="">2555                     mBgAllAppsList.add(new AppInfo(mContext, app, user, mIconCache, mLabelCache));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2556                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2557             }                                                                                            </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2558             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2559             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2560             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2561             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2562             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2563                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2564                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2565                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2566                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2567                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2568                         if (DEBUG_LOADERS) {                                                             </span>
<span class="-3541645763576542658" onmouseenter="enter('-3541645763576542658');" onmouseout="out('-3541645763576542658');" style=""><abbr title="2569                             Log.d(TAG, (((&quot;bound &quot; + added.size()) + &quot; apps in &quot;) + (SystemClock.uptimeMillis() - bindTime)) + &quot;ms&quot;);">2569                             Log.d(TAG, (((&quot;bound &quot; + added.size()) + &quot; apps in &quot;) + (SystemClock.uptimeMi</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2570                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2571                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2572                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2573                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2574                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2575             });                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2576             if (DEBUG_LOADERS) {                                                                         </span>
<span class="1678852613983904602" onmouseenter="enter('1678852613983904602');" onmouseout="out('1678852613983904602');" style="">2577                 Log.d(TAG, (&quot;Icons processed in &quot; + (SystemClock.uptimeMillis() - loadTime)) + &quot;ms&quot;);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2578             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2579         }                                                                                                </span>
<span  style="">2580                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2581         public void dumpState() {                                                                        </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2582             synchronized(sBgLock) {                                                                      </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2583                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2584                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2585                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2586                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2587                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2588             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2589         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2590     }                                                                                                    </span>
<span  style="">2591                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2592     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2593         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2594     }                                                                                                    </span>
<span  style="">2595                                                                                                          </span>
<span class="-2155382700972431684" onmouseenter="enter('-2155382700972431684');" onmouseout="out('-2155382700972431684');" style="">2596     private class AppsAvailabilityCheck extends BroadcastReceiver {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2597         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">2598         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2599             synchronized(sBgLock) {                                                                      </span>
<span class="7852796152174299893" onmouseenter="enter('7852796152174299893');" onmouseout="out('7852796152174299893');" style=""><abbr title="2600                 final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(mApp.getContext());">2600                 final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(mApp.getContext())</abbr></span>
<span class="-4787354412045768116" onmouseenter="enter('-4787354412045768116');" onmouseout="out('-4787354412045768116');" style="">2601                 ArrayList&lt;String&gt; packagesRemoved;                                                       </span>
<span class="4244873154676657454" onmouseenter="enter('4244873154676657454');" onmouseout="out('4244873154676657454');" style="">2602                 for (Entry&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; entry : sPendingPackages.entrySet()) {     </span>
<span class="5975107845149456463" onmouseenter="enter('5975107845149456463');" onmouseout="out('5975107845149456463');" style="">2603                     UserHandleCompat user = entry.getKey();                                              </span>
<span class="-667022728008343360" onmouseenter="enter('-667022728008343360');" onmouseout="out('-667022728008343360');" style="">2604                     packagesRemoved = new ArrayList&lt;String&gt;();                                           </span>
<span class="1474457728386669675" onmouseenter="enter('1474457728386669675');" onmouseout="out('1474457728386669675');" style="">2605                     for (String pkg : entry.getValue()) {                                                </span>
<span class="-3589045475490406733" onmouseenter="enter('-3589045475490406733');" onmouseout="out('-3589045475490406733');" style="">2606                         if (!launcherApps.isPackageEnabledForProfile(pkg, user)) {                       </span>
<span class="-1955449888814909626" onmouseenter="enter('-1955449888814909626');" onmouseout="out('-1955449888814909626');" style="">2607                             Launcher.addDumpLog(TAG, &quot;Package not found: &quot; + pkg, true);                 </span>
<span class="-7762323097919758551" onmouseenter="enter('-7762323097919758551');" onmouseout="out('-7762323097919758551');" style="">2608                             packagesRemoved.add(pkg);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2609                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2610                     }                                                                                    </span>
<span class="-1545108570433514025" onmouseenter="enter('-1545108570433514025');" onmouseout="out('-1545108570433514025');" style="">2611                     if (!packagesRemoved.isEmpty()) {                                                    </span>
<span class="-1046218902024959239" onmouseenter="enter('-1046218902024959239');" onmouseout="out('-1046218902024959239');" style=""><abbr title="2612                         enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE, packagesRemoved.toArray(new String[packagesRemoved.size()]), user));">2612                         enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE, packag</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2613                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2614                 }                                                                                        </span>
<span class="483878637633217436" onmouseenter="enter('483878637633217436');" onmouseout="out('483878637633217436');" style="">2615                 sPendingPackages.clear();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2616             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2617         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2618     }                                                                                                    </span>
<span  style="">2619                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2620     /**                                                                                                  </span>
<span class="-4757889214551148663" onmouseenter="enter('-4757889214551148663');" onmouseout="out('-4757889214551148663');" style="">2621      * Workaround to re-check unrestored items, in-case they were installed but the Package-ADD          </span>
<span class="-7981308590935764825" onmouseenter="enter('-7981308590935764825');" onmouseout="out('-7981308590935764825');" style="">2622      * runnable was missed by the launcher.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2623      */                                                                                                  </span>
<span class="-1837604298505960192" onmouseenter="enter('-1837604298505960192');" onmouseout="out('-1837604298505960192');" style="">2624     public void recheckRestoredItems(final Context context) {                                            </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2625         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2626             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2627             public void run() {                                                                          </span>
<span class="4897732594040868406" onmouseenter="enter('4897732594040868406');" onmouseout="out('4897732594040868406');" style="">2628                 LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);               </span>
<span class="2615938583470046073" onmouseenter="enter('2615938583470046073');" onmouseout="out('2615938583470046073');" style="">2629                 HashSet&lt;String&gt; installedPackages = new HashSet&lt;String&gt;();                               </span>
<span class="-7713836903288582020" onmouseenter="enter('-7713836903288582020');" onmouseout="out('-7713836903288582020');" style="">2630                 UserHandleCompat user = UserHandleCompat.myUserHandle();                                 </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2631                 synchronized(sBgLock) {                                                                  </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="">2632                     for (ItemInfo info : sBgItemsIdMap.values()) {                                       </span>
<span class="3613572740963864398" onmouseenter="enter('3613572740963864398');" onmouseout="out('3613572740963864398');" style="">2633                         if (info instanceof ShortcutInfo) {                                              </span>
<span class="-3724368528192874383" onmouseenter="enter('-3724368528192874383');" onmouseout="out('-3724368528192874383');" style="">2634                             ShortcutInfo si = ((ShortcutInfo) (info));                                   </span>
<span class="-6301991179873686599" onmouseenter="enter('-6301991179873686599');" onmouseout="out('-6301991179873686599');" style=""><abbr title="2635                             if ((si.isPromise() &amp;&amp; (si.getTargetComponent() != null)) &amp;&amp; launcherApps.isPackageEnabledForProfile(si.getTargetComponent().getPackageName(), user)) {">2635                             if ((si.isPromise() &amp;&amp; (si.getTargetComponent() != null)) &amp;&amp; launcherApps.isP</abbr></span>
<span class="8027032983651882823" onmouseenter="enter('8027032983651882823');" onmouseout="out('8027032983651882823');" style="">2636                                 installedPackages.add(si.getTargetComponent().getPackageName());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2637                             }                                                                            </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style="">2638                         } else if (info instanceof LauncherAppWidgetInfo) {                              </span>
<span class="4011740942684641080" onmouseenter="enter('4011740942684641080');" onmouseout="out('4011740942684641080');" style="">2639                             LauncherAppWidgetInfo widget = ((LauncherAppWidgetInfo) (info));             </span>
<span class="9115885693151219755" onmouseenter="enter('9115885693151219755');" onmouseout="out('9115885693151219755');" style=""><abbr title="2640                             if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) &amp;&amp; launcherApps.isPackageEnabledForProfile(widget.providerName.getPackageName(), user)) {">2640                             if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) &amp;&amp; l</abbr></span>
<span class="-5968826008275428630" onmouseenter="enter('-5968826008275428630');" onmouseout="out('-5968826008275428630');" style="">2641                                 installedPackages.add(widget.providerName.getPackageName());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2642                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2643                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2644                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2645                 }                                                                                        </span>
<span class="-8755538775344321333" onmouseenter="enter('-8755538775344321333');" onmouseout="out('-8755538775344321333');" style="">2646                 if (!installedPackages.isEmpty()) {                                                      </span>
<span class="1551205659826155261" onmouseenter="enter('1551205659826155261');" onmouseout="out('1551205659826155261');" style="">2647                     final ArrayList&lt;AppInfo&gt; restoredApps = new ArrayList&lt;AppInfo&gt;();                    </span>
<span class="-3020018355032355950" onmouseenter="enter('-3020018355032355950');" onmouseout="out('-3020018355032355950');" style="">2648                     for (String pkg : installedPackages) {                                               </span>
<span class="-1472387192310078173" onmouseenter="enter('-1472387192310078173');" onmouseout="out('-1472387192310078173');" style="">2649                         for (LauncherActivityInfoCompat info : launcherApps.getActivityList(pkg, user)) {</span>
<span class="-4626697810297530275" onmouseenter="enter('-4626697810297530275');" onmouseout="out('-4626697810297530275');" style="">2650                             restoredApps.add(new AppInfo(context, info, user, mIconCache, null));        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2651                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2652                     }                                                                                    </span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style="">2653                     final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;          </span>
<span class="838327603557009686" onmouseenter="enter('838327603557009686');" onmouseout="out('838327603557009686');" style="">2654                     if (!restoredApps.isEmpty()) {                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2655                         mHandler.post(new Runnable() {                                                   </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2656                             public void run() {                                                          </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2657                                 Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;           </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2658                                 if ((callbacks == cb) &amp;&amp; (cb != null)) {                                 </span>
<span class="-7685400884791180573" onmouseenter="enter('-7685400884791180573');" onmouseout="out('-7685400884791180573');" style="">2659                                     callbacks.bindAppsRestored(restoredApps);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2660                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2661                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2662                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2663                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2664                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2665             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2666         };                                                                                               </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style="">2667         sWorker.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2668     }                                                                                                    </span>
<span  style="">2669                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">2670     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">2671         int mOp;                                                                                         </span>
<span  style="">2672                                                                                                          </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">2673         String[] mPackages;                                                                              </span>
<span  style="">2674                                                                                                          </span>
<span class="2923888301096709084" onmouseenter="enter('2923888301096709084');" onmouseout="out('2923888301096709084');" style="">2675         UserHandleCompat mUser;                                                                          </span>
<span  style="">2676                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">2677         public static final int OP_NONE = 0;                                                             </span>
<span  style="">2678                                                                                                          </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">2679         public static final int OP_ADD = 1;                                                              </span>
<span  style="">2680                                                                                                          </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">2681         public static final int OP_UPDATE = 2;                                                           </span>
<span  style="">2682                                                                                                          </span>
<span class="7552840216364086352" onmouseenter="enter('7552840216364086352');" onmouseout="out('7552840216364086352');" style="">2683         // uninstlled                                                                                    </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">2684         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span  style="">2685                                                                                                          </span>
<span class="75376153538485775" onmouseenter="enter('75376153538485775');" onmouseout="out('75376153538485775');" style="">2686         // external media unmounted                                                                      </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">2687         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">2688                                                                                                          </span>
<span class="3202497835561249087" onmouseenter="enter('3202497835561249087');" onmouseout="out('3202497835561249087');" style="">2689         public PackageUpdatedTask(int op, String[] packages, UserHandleCompat user) {                    </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">2690             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">2691             mPackages = packages;                                                                        </span>
<span class="2953270128049103408" onmouseenter="enter('2953270128049103408');" onmouseout="out('2953270128049103408');" style="">2692             mUser = user;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2693         }                                                                                                </span>
<span  style="">2694                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2695         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">2696             final Context context = mApp.getContext();                                                   </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">2697             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">2698             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">2699             switch (mOp) {                                                                               </span>
<span class="-4399643213085174409" onmouseenter="enter('-4399643213085174409');" onmouseout="out('-4399643213085174409');" style="">2700                 case OP_ADD :                                                                            </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2701                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2702                         if (DEBUG_LOADERS) {                                                             </span>
<span class="-127576380874548097" onmouseenter="enter('-127576380874548097');" onmouseout="out('-127576380874548097');" style="">2703                             Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2704                         }                                                                                </span>
<span class="6575289823687229863" onmouseenter="enter('6575289823687229863');" onmouseout="out('6575289823687229863');" style="">2705                         mIconCache.remove(packages[i], mUser);                                           </span>
<span class="-4330949928576769866" onmouseenter="enter('-4330949928576769866');" onmouseout="out('-4330949928576769866');" style="">2706                         mBgAllAppsList.addPackage(context, packages[i], mUser);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2707                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2708                     break;                                                                               </span>
<span class="-292270606337492127" onmouseenter="enter('-292270606337492127');" onmouseout="out('-292270606337492127');" style="">2709                 case OP_UPDATE :                                                                         </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2710                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2711                         if (DEBUG_LOADERS) {                                                             </span>
<span class="-4422863114349853532" onmouseenter="enter('-4422863114349853532');" onmouseout="out('-4422863114349853532');" style="">2712                             Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2713                         }                                                                                </span>
<span class="4552988343352109939" onmouseenter="enter('4552988343352109939');" onmouseout="out('4552988343352109939');" style="">2714                         mBgAllAppsList.updatePackage(context, packages[i], mUser);                       </span>
<span class="6401867013694049249" onmouseenter="enter('6401867013694049249');" onmouseout="out('6401867013694049249');" style=""><abbr title="2715                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[i]);">2715                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2716                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2717                     break;                                                                               </span>
<span class="4174522110729030147" onmouseenter="enter('4174522110729030147');" onmouseout="out('4174522110729030147');" style="">2718                 case OP_REMOVE :                                                                         </span>
<span class="-5034577413987496211" onmouseenter="enter('-5034577413987496211');" onmouseout="out('-5034577413987496211');" style="">2719                 case OP_UNAVAILABLE :                                                                    </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2720                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2721                         if (DEBUG_LOADERS) {                                                             </span>
<span class="6512000517820647607" onmouseenter="enter('6512000517820647607');" onmouseout="out('6512000517820647607');" style="">2722                             Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2723                         }                                                                                </span>
<span class="-4221302437709808804" onmouseenter="enter('-4221302437709808804');" onmouseout="out('-4221302437709808804');" style="">2724                         mBgAllAppsList.removePackage(packages[i], mUser);                                </span>
<span class="6401867013694049249" onmouseenter="enter('6401867013694049249');" onmouseout="out('6401867013694049249');" style=""><abbr title="2725                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[i]);">2725                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2726                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2727                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2728             }                                                                                            </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">2729             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">2730             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">2731             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">2732             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">2733                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">2734                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2735             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">2736             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">2737                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">2738                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2739             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">2740             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">2741                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">2742                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2743             }                                                                                            </span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style="">2744             final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                  </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">2745             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">2746                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2747                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2748             }                                                                                            </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">2749             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">2750                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">2751                 if (LauncherAppState.isDisableAllApps()) {                                               </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">2752                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="">2753                     addAndBindAddedWorkspaceApps(context, addedInfos);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2754                 } else {                                                                                 </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="">2755                     addAppsToAllApps(context, added);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2756                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2757             }                                                                                            </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">2758             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">2759                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">2760                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">2761                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="">2762                     ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);     </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2763                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">2764                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="7602451342572088838" onmouseenter="enter('7602451342572088838');" onmouseout="out('7602451342572088838');" style="">2765                             ShortcutInfo info = ((ShortcutInfo) (i));                                    </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">2766                             info.title = a.title.toString();                                             </span>
<span class="911685269403024085" onmouseenter="enter('911685269403024085');" onmouseout="out('911685269403024085');" style="">2767                             info.contentDescription = a.contentDescription;                              </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">2768                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2769                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2770                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2771                 }                                                                                        </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2772                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2773                     public void run() {                                                                  </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2774                         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                   </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2775                         if ((callbacks == cb) &amp;&amp; (cb != null)) {                                         </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">2776                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2777                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2778                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2779                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2780             }                                                                                            </span>
<span class="8617927331448094408" onmouseenter="enter('8617927331448094408');" onmouseout="out('8617927331448094408');" style="">2781             final ArrayList&lt;String&gt; removedPackageNames = new ArrayList&lt;String&gt;();                       </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">2782             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">2783                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">2784                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">2785             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">2786                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">2787                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2788                 for (int i = 0; i &lt; N; i++) {                                                            </span>
<span class="1189279971614907536" onmouseenter="enter('1189279971614907536');" onmouseout="out('1189279971614907536');" style="">2789                     if (isPackageDisabled(context, packages[i], mUser)) {                                </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">2790                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2791                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2792                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2793             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">2794             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">2795             for (String pn : removedPackageNames) {                                                      </span>
<span class="6482411304432401961" onmouseenter="enter('6482411304432401961');" onmouseout="out('6482411304432401961');" style="">2796                 deletePackageFromDatabase(context, pn, mUser);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2797             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">2798             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">2799             for (AppInfo a : removedApps) {                                                              </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="">2800                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);         </span>
<span class="7293231507608058112" onmouseenter="enter('7293231507608058112');" onmouseout="out('7293231507608058112');" style="">2801                 deleteItemsFromDatabase(context, infos);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2802             }                                                                                            </span>
<span class="4476200888748494282" onmouseenter="enter('4476200888748494282');" onmouseout="out('4476200888748494282');" style="">2803             if ((!removedPackageNames.isEmpty()) || (!removedApps.isEmpty())) {                          </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">2804                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">2805                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="6255842996478861527" onmouseenter="enter('6255842996478861527');" onmouseout="out('6255842996478861527');" style="">2806                 SharedPreferences sp = context.getSharedPreferences(spKey, Context.MODE_PRIVATE);        </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">2807                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">2808                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2809                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2810                     public void run() {                                                                  </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2811                         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                   </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2812                         if ((callbacks == cb) &amp;&amp; (cb != null)) {                                         </span>
<span class="-4641714223338514236" onmouseenter="enter('-4641714223338514236');" onmouseout="out('-4641714223338514236');" style="">2813                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps, mUser);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2814                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2815                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2816                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2817             }                                                                                            </span>
<span class="7426150459827124612" onmouseenter="enter('7426150459827124612');" onmouseout="out('7426150459827124612');" style="">2818             final ArrayList&lt;Object&gt; widgetsAndShortcuts = getSortedWidgetsAndShortcuts(context);         </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2819             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2820                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2821                 public void run() {                                                                      </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2822                     Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                       </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2823                     if ((callbacks == cb) &amp;&amp; (cb != null)) {                                             </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">2824                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2825                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2826                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2827             });                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">2828             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2829             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2830                 public void run() {                                                                      </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2831                     Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                       </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2832                     if ((callbacks == cb) &amp;&amp; (cb != null)) {                                             </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">2833                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2834                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2835                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2836             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2837         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2838     }                                                                                                    </span>
<span  style="">2839                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">2840     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">2841     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">2842         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">2843         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="3637822346102420347" onmouseenter="enter('3637822346102420347');" onmouseout="out('3637822346102420347');" style="">2844         widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());       </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">2845         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">2846         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="3220762690300374865" onmouseenter="enter('3220762690300374865');" onmouseout="out('3220762690300374865');" style="">2847         Collections.sort(widgetsAndShortcuts, new WidgetAndShortcutNameComparator(context));             </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">2848         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2849     }                                                                                                    </span>
<span  style="">2850                                                                                                          </span>
<span class="-8167988819429958505" onmouseenter="enter('-8167988819429958505');" onmouseout="out('-8167988819429958505');" style=""><abbr title="2851     private static boolean isPackageDisabled(Context context, String packageName, UserHandleCompat user) {">2851     private static boolean isPackageDisabled(Context context, String packageName, UserHandleCompat user) </abbr></span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">2852         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="2722752944691677150" onmouseenter="enter('2722752944691677150');" onmouseout="out('2722752944691677150');" style="">2853         return !launcherApps.isPackageEnabledForProfile(packageName, user);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2854     }                                                                                                    </span>
<span  style="">2855                                                                                                          </span>
<span class="2249090448540517434" onmouseenter="enter('2249090448540517434');" onmouseout="out('2249090448540517434');" style=""><abbr title="2856     public static boolean isValidPackageActivity(Context context, ComponentName cn, UserHandleCompat user) {">2856     public static boolean isValidPackageActivity(Context context, ComponentName cn, UserHandleCompat user</abbr></span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">2857         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2858             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2859         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">2860         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="-6788056339565196353" onmouseenter="enter('-6788056339565196353');" onmouseout="out('-6788056339565196353');" style="">2861         if (!launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user)) {                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2862             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2863         }                                                                                                </span>
<span class="6138596583040601663" onmouseenter="enter('6138596583040601663');" onmouseout="out('6138596583040601663');" style="">2864         return launcherApps.isActivityEnabledForProfile(cn, user);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2865     }                                                                                                    </span>
<span  style="">2866                                                                                                          </span>
<span class="2875319480499362956" onmouseenter="enter('2875319480499362956');" onmouseout="out('2875319480499362956');" style="">2867     public static boolean isValidPackage(Context context, String packageName, UserHandleCompat user) {   </span>
<span class="2797777100746091358" onmouseenter="enter('2797777100746091358');" onmouseout="out('2797777100746091358');" style="">2868         if (packageName == null) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2869             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2870         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">2871         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="7814688882071205012" onmouseenter="enter('7814688882071205012');" onmouseout="out('7814688882071205012');" style="">2872         return launcherApps.isPackageEnabledForProfile(packageName, user);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2873     }                                                                                                    </span>
<span  style="">2874                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2875     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">2876      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">2877      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2878      */                                                                                                  </span>
<span class="-8175192206090066619" onmouseenter="enter('-8175192206090066619');" onmouseout="out('-8175192206090066619');" style=""><abbr title="2879     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent, int promiseType) {">2879     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent, int promiseType</abbr></span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2880         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">2881         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="4581768130100169027" onmouseenter="enter('4581768130100169027');" onmouseout="out('4581768130100169027');" style="">2882         mIconCache.getTitleAndIcon(info, intent, info.user, true);                                       </span>
<span class="-7011074266974647989" onmouseenter="enter('-7011074266974647989');" onmouseout="out('-7011074266974647989');" style="">2883         if ((promiseType &amp; ShortcutInfo.FLAG_RESTORED_ICON) != 0) {                                      </span>
<span class="-8984449213491193878" onmouseenter="enter('-8984449213491193878');" onmouseout="out('-8984449213491193878');" style="">2884             String title = (cursor != null) ? cursor.getString(titleIndex) : null;                       </span>
<span class="-5841612334834081385" onmouseenter="enter('-5841612334834081385');" onmouseout="out('-5841612334834081385');" style="">2885             if (!TextUtils.isEmpty(title)) {                                                             </span>
<span class="-2613617994889375298" onmouseenter="enter('-2613617994889375298');" onmouseout="out('-2613617994889375298');" style="">2886                 info.title = title;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2887             }                                                                                            </span>
<span class="-5174755841373748942" onmouseenter="enter('-5174755841373748942');" onmouseout="out('-5174755841373748942');" style="">2888             info.status = ShortcutInfo.FLAG_RESTORED_ICON;                                               </span>
<span class="-4038501336907671377" onmouseenter="enter('-4038501336907671377');" onmouseout="out('-4038501336907671377');" style="">2889         } else if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {                             </span>
<span class="-7717414875603328452" onmouseenter="enter('-7717414875603328452');" onmouseout="out('-7717414875603328452');" style="">2890             if (TextUtils.isEmpty(info.title)) {                                                         </span>
<span class="-5806908871812941257" onmouseenter="enter('-5806908871812941257');" onmouseout="out('-5806908871812941257');" style="">2891                 info.title = (cursor != null) ? cursor.getString(titleIndex) : &quot;&quot;;                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2892             }                                                                                            </span>
<span class="-4388547064813731487" onmouseenter="enter('-4388547064813731487');" onmouseout="out('-4388547064813731487');" style="">2893             info.status = ShortcutInfo.FLAG_AUTOINTALL_ICON;                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2894         } else {                                                                                         </span>
<span class="5717376002108262372" onmouseenter="enter('5717376002108262372');" onmouseout="out('5717376002108262372');" style="">2895             throw new InvalidParameterException(&quot;Invalid restoreType &quot; + promiseType);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2896         }                                                                                                </span>
<span class="-1867930841645421482" onmouseenter="enter('-1867930841645421482');" onmouseout="out('-1867930841645421482');" style="">2897         info.contentDescription = mUserManager.getBadgedLabelForUser(info.title.toString(), info.user);  </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">2898         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3783926904025262102" onmouseenter="enter('-3783926904025262102');" onmouseout="out('-3783926904025262102');" style="">2899         info.promisedIntent = intent;                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2900         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2901     }                                                                                                    </span>
<span  style="">2902                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2903     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">2904      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">2905      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2906      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">2907     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2908         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-3881801991978262069" onmouseenter="enter('-3881801991978262069');" onmouseout="out('-3881801991978262069');" style="">2909         return getMarketIntent(componentName.getPackageName());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2910     }                                                                                                    </span>
<span  style="">2911                                                                                                          </span>
<span class="-3260913833937220020" onmouseenter="enter('-3260913833937220020');" onmouseout="out('-3260913833937220020');" style="">2912     static Intent getMarketIntent(String packageName) {                                                  </span>
<span class="-3442204550324448227" onmouseenter="enter('-3442204550324448227');" onmouseout="out('-3442204550324448227');" style=""><abbr title="2913         return new Intent(Intent.ACTION_VIEW).setData(new Uri.Builder().scheme(&quot;market&quot;).authority(&quot;details&quot;).appendQueryParameter(&quot;id&quot;, packageName).build());">2913         return new Intent(Intent.ACTION_VIEW).setData(new Uri.Builder().scheme(&quot;market&quot;).authority(&quot;detai</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2914     }                                                                                                    </span>
<span  style="">2915                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2916     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">2917      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">2918      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2919      */                                                                                                  </span>
<span class="-6775236472694544699" onmouseenter="enter('-6775236472694544699');" onmouseout="out('-6775236472694544699');" style=""><abbr title="2920     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, UserHandleCompat user, Context context) {">2920     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, UserHandleCompat user, Con</abbr></span>
<span class="-7378868523772977866" onmouseenter="enter('-7378868523772977866');" onmouseout="out('-7378868523772977866');" style="">2921         return getShortcutInfo(manager, intent, user, context, null, -1, -1, null, false);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2922     }                                                                                                    </span>
<span  style="">2923                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2924     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">2925      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2926      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">2927      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2928      */                                                                                                  </span>
<span class="1800234406183738213" onmouseenter="enter('1800234406183738213');" onmouseout="out('1800234406183738213');" style=""><abbr title="2929     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, UserHandleCompat user, Context context, Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache, boolean allowMissingTarget) {">2929     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, UserHandleCompat user, Con</abbr></span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">2930         if (user == null) {                                                                              </span>
<span class="6545168092911351889" onmouseenter="enter('6545168092911351889');" onmouseout="out('6545168092911351889');" style="">2931             Log.d(TAG, &quot;Null user found in getShortcutInfo&quot;);                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2932             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2933         }                                                                                                </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2934         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-5224470428335408787" onmouseenter="enter('-5224470428335408787');" onmouseout="out('-5224470428335408787');" style="">2935         if (componentName == null) {                                                                     </span>
<span class="4371782537001302642" onmouseenter="enter('4371782537001302642');" onmouseout="out('4371782537001302642');" style="">2936             Log.d(TAG, &quot;Missing component found in getShortcutInfo: &quot; + componentName);                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2937             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2938         }                                                                                                </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">2939         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">2940         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="6894377559056826774" onmouseenter="enter('6894377559056826774');" onmouseout="out('6894377559056826774');" style="">2941         newIntent.setComponent(componentName);                                                           </span>
<span class="-966571371435372555" onmouseenter="enter('-966571371435372555');" onmouseout="out('-966571371435372555');" style="">2942         LauncherActivityInfoCompat lai = mLauncherApps.resolveActivity(newIntent, user);                 </span>
<span class="-3636071150680138349" onmouseenter="enter('-3636071150680138349');" onmouseout="out('-3636071150680138349');" style="">2943         if ((lai == null) &amp;&amp; (!allowMissingTarget)) {                                                    </span>
<span class="-2395110402435537171" onmouseenter="enter('-2395110402435537171');" onmouseout="out('-2395110402435537171');" style="">2944             Log.d(TAG, &quot;Missing activity found in getShortcutInfo: &quot; + componentName);                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2945             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2946         }                                                                                                </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2947         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">2948         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">2949         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">2950         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">2951         // have icons anyway.                                                                            </span>
<span class="-6777959075043703494" onmouseenter="enter('-6777959075043703494');" onmouseout="out('-6777959075043703494');" style="">2952         Bitmap icon = mIconCache.getIcon(componentName, lai, labelCache);                                </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">2953         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2954         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2955             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2956                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2957             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2958         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">2959         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2960         if (icon == null) {                                                                              </span>
<span class="-1443979577510132687" onmouseenter="enter('-1443979577510132687');" onmouseout="out('-1443979577510132687');" style="">2961             icon = mIconCache.getDefaultIcon(user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2962             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2963         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">2964         info.setIcon(icon);                                                                              </span>
<span class="-7595242445841823644" onmouseenter="enter('-7595242445841823644');" onmouseout="out('-7595242445841823644');" style="">2965         // From the cache.                                                                               </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2966         if (labelCache != null) {                                                                        </span>
<span class="3073733017601521903" onmouseenter="enter('3073733017601521903');" onmouseout="out('3073733017601521903');" style="">2967             info.title = labelCache.get(componentName);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2968         }                                                                                                </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">2969         // from the resource                                                                             </span>
<span class="4755391288823593225" onmouseenter="enter('4755391288823593225');" onmouseout="out('4755391288823593225');" style="">2970         if ((info.title == null) &amp;&amp; (lai != null)) {                                                     </span>
<span class="-4488945615052684527" onmouseenter="enter('-4488945615052684527');" onmouseout="out('-4488945615052684527');" style="">2971             info.title = lai.getLabel();                                                                 </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2972             if (labelCache != null) {                                                                    </span>
<span class="-3170508962365680295" onmouseenter="enter('-3170508962365680295');" onmouseout="out('-3170508962365680295');" style="">2973                 labelCache.put(componentName, info.title);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2974             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2975         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">2976         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2977         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2978             if (c != null) {                                                                             </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">2979                 info.title = c.getString(titleIndex);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2980             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2981         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">2982         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2983         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">2984             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2985         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">2986         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-7567614667172676383" onmouseenter="enter('-7567614667172676383');" onmouseout="out('-7567614667172676383');" style="">2987         info.user = user;                                                                                </span>
<span class="-1867930841645421482" onmouseenter="enter('-1867930841645421482');" onmouseout="out('-1867930841645421482');" style="">2988         info.contentDescription = mUserManager.getBadgedLabelForUser(info.title.toString(), info.user);  </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2989         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2990     }                                                                                                    </span>
<span  style="">2991                                                                                                          </span>
<span class="7726226344846472977" onmouseenter="enter('7726226344846472977');" onmouseout="out('7726226344846472977');" style="">2992     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos, ItemInfoFilter f) {           </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">2993         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2994         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">2995             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="7602451342572088838" onmouseenter="enter('7602451342572088838');" onmouseout="out('7602451342572088838');" style="">2996                 ShortcutInfo info = ((ShortcutInfo) (i));                                                </span>
<span class="-8411217647144645125" onmouseenter="enter('-8411217647144645125');" onmouseout="out('-8411217647144645125');" style="">2997                 ComponentName cn = info.getTargetComponent();                                            </span>
<span class="716065875882273504" onmouseenter="enter('716065875882273504');" onmouseout="out('716065875882273504');" style="">2998                 if ((cn != null) &amp;&amp; f.filterItem(null, info, cn)) {                                      </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">2999                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3000                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3001             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="1485373007744595252" onmouseenter="enter('1485373007744595252');" onmouseout="out('1485373007744595252');" style="">3002                 FolderInfo info = ((FolderInfo) (i));                                                    </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3003                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="-5499244430299718871" onmouseenter="enter('-5499244430299718871');" onmouseout="out('-5499244430299718871');" style="">3004                     ComponentName cn = s.getTargetComponent();                                           </span>
<span class="-2117620301865494938" onmouseenter="enter('-2117620301865494938');" onmouseout="out('-2117620301865494938');" style="">3005                     if ((cn != null) &amp;&amp; f.filterItem(info, s, cn)) {                                     </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3006                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3007                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3008                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3009             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="6027076904423340896" onmouseenter="enter('6027076904423340896');" onmouseout="out('6027076904423340896');" style="">3010                 LauncherAppWidgetInfo info = ((LauncherAppWidgetInfo) (i));                              </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3011                 ComponentName cn = info.providerName;                                                    </span>
<span class="716065875882273504" onmouseenter="enter('716065875882273504');" onmouseout="out('716065875882273504');" style="">3012                 if ((cn != null) &amp;&amp; f.filterItem(null, info, cn)) {                                      </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3013                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3014                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3015             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3016         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3017         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3018     }                                                                                                    </span>
<span  style="">3019                                                                                                          </span>
<span class="5180427201621325041" onmouseenter="enter('5180427201621325041');" onmouseout="out('5180427201621325041');" style=""><abbr title="3020     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname, final UserHandleCompat user) {">3020     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname, final UserHandleCo</abbr></span>
<span class="-3373937432913193160" onmouseenter="enter('-3373937432913193160');" onmouseout="out('-3373937432913193160');" style="">3021         ItemInfoFilter filter = new ItemInfoFilter() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3022             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3023             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="5970365724964589884" onmouseenter="enter('5970365724964589884');" onmouseout="out('5970365724964589884');" style="">3024                 if (info.user == null) {                                                                 </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3025                     return cn.equals(cname);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3026                 } else {                                                                                 </span>
<span class="9080235702604787251" onmouseenter="enter('9080235702604787251');" onmouseout="out('9080235702604787251');" style="">3027                     return cn.equals(cname) &amp;&amp; info.user.equals(user);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3028                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3029             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3030         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3031         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3032     }                                                                                                    </span>
<span  style="">3033                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3034     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3035         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="7602451342572088838" onmouseenter="enter('7602451342572088838');" onmouseout="out('7602451342572088838');" style="">3036             ShortcutInfo info = ((ShortcutInfo) (i));                                                    </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3037             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3038             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3039             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3040             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3041             ComponentName name = intent.getComponent();                                                  </span>
<span class="6342345119459728583" onmouseenter="enter('6342345119459728583');" onmouseout="out('6342345119459728583');" style=""><abbr title="3042             if (((info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) &amp;&amp; Intent.ACTION_MAIN.equals(intent.getAction())) &amp;&amp; (name != null)) {">3042             if (((info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) &amp;&amp; Intent.ACTION_MAI</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3043                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3044             }                                                                                            </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="">3045             // placeholder shortcuts get special treatment, let them through too.                        </span>
<span class="-8737155453802783041" onmouseenter="enter('-8737155453802783041');" onmouseout="out('-8737155453802783041');" style="">3046             if (info.isPromise()) {                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3047                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3048             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3049         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3050         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3051     }                                                                                                    </span>
<span  style="">3052                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3053     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3054      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3055      */                                                                                                  </span>
<span class="5032513475497319317" onmouseenter="enter('5032513475497319317');" onmouseout="out('5032513475497319317');" style=""><abbr title="3056     private ShortcutInfo getShortcutInfo(Cursor c, Context context, int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex, int titleIndex) {">3056     private ShortcutInfo getShortcutInfo(Cursor c, Context context, int iconTypeIndex, int iconPackageInd</abbr></span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3057         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3058         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="5882358276056228538" onmouseenter="enter('5882358276056228538');" onmouseout="out('5882358276056228538');" style="">3059         // Non-app shortcuts are only supported for current user.                                        </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3060         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3061         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3062         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3063         info.title = c.getString(titleIndex);                                                            </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3064         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3065         switch (iconType) {                                                                              </span>
<span class="7850088382151211959" onmouseenter="enter('7850088382151211959');" onmouseout="out('7850088382151211959');" style="">3066             case LauncherSettings.Favorites.ICON_TYPE_RESOURCE :                                         </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3067                 String packageName = c.getString(iconPackageIndex);                                      </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3068                 String resourceName = c.getString(iconResourceIndex);                                    </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3069                 PackageManager packageManager = context.getPackageManager();                             </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3070                 info.customIcon = false;                                                                 </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3071             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3072                 try {                                                                                    </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3073                     Resources resources = packageManager.getResourcesForApplication(packageName);        </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3074                     if (resources != null) {                                                             </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3075                         final int id = resources.getIdentifier(resourceName, null, null);                </span>
<span class="-8111506311245393667" onmouseenter="enter('-8111506311245393667');" onmouseout="out('-8111506311245393667');" style=""><abbr title="3076                         icon = Utilities.createIconBitmap(mIconCache.getFullResIcon(resources, id), context);">3076                         icon = Utilities.createIconBitmap(mIconCache.getFullResIcon(resources, id), conte</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3077                     }                                                                                    </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">3078                 } catch (java.lang.Exception e) {                                                        </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3079                     // drop this.  we have other places to look for icons                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3080                 }                                                                                        </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3081             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3082                 if (icon == null) {                                                                      </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3083                     icon = getIconFromCursor(c, iconIndex, context);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3084                 }                                                                                        </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3085             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3086                 if (icon == null) {                                                                      </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3087                     icon = mIconCache.getDefaultIcon(info.user);                                         </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3088                     info.usingFallbackIcon = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3089                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3090                 break;                                                                                   </span>
<span class="-7159883417284246525" onmouseenter="enter('-7159883417284246525');" onmouseout="out('-7159883417284246525');" style="">3091             case LauncherSettings.Favorites.ICON_TYPE_BITMAP :                                           </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3092                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3093                 if (icon == null) {                                                                      </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3094                     icon = mIconCache.getDefaultIcon(info.user);                                         </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3095                     info.customIcon = false;                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3096                     info.usingFallbackIcon = true;                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3097                 } else {                                                                                 </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3098                     info.customIcon = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3099                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3100                 break;                                                                                   </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style="">3101             default :                                                                                    </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3102                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3103                 info.usingFallbackIcon = true;                                                           </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3104                 info.customIcon = false;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3105                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3106         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3107         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3108         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3109     }                                                                                                    </span>
<span  style="">3110                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3111     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="-7344880688543478232" onmouseenter="enter('-7344880688543478232');" onmouseout="out('-7344880688543478232');" style="">3112         // suppress dead code warning                                                                    </span>
<span class="254779087173488622" onmouseenter="enter('254779087173488622');" onmouseout="out('254779087173488622');" style="">3113         @SuppressWarnings(&quot;all&quot;)                                                                         </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3114         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3115         if (debug) {                                                                                     </span>
<span class="391504186289021952" onmouseenter="enter('391504186289021952');" onmouseout="out('391504186289021952');" style=""><abbr title="3116             Log.d(TAG, &quot;getIconFromCursor app=&quot; + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));">3116             Log.d(TAG, &quot;getIconFromCursor app=&quot; + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Fa</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3117         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3118         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3119         try {                                                                                            </span>
<span class="-5397256551797560021" onmouseenter="enter('-5397256551797560021');" onmouseout="out('-5397256551797560021');" style=""><abbr title="3120             return Utilities.createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);">3120             return Utilities.createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), contex</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">3121         } catch (java.lang.Exception e) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3122             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3123         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3124     }                                                                                                    </span>
<span  style="">3125                                                                                                          </span>
<span class="-2326079223618471308" onmouseenter="enter('-2326079223618471308');" onmouseout="out('-2326079223618471308');" style=""><abbr title="3126     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen, int cellX, int cellY, boolean notify) {">3126     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen, int cellX, int cel</abbr></span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3127         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3128         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3129             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3130         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3131         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3132         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3133     }                                                                                                    </span>
<span  style="">3134                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3135     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3136      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3137      */                                                                                                  </span>
<span class="2179041858850413708" onmouseenter="enter('2179041858850413708');" onmouseout="out('2179041858850413708');" style=""><abbr title="3138     static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context, ComponentName component) {">3138     static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context, ComponentName co</abbr></span>
<span class="-1232115849622021899" onmouseenter="enter('-1232115849622021899');" onmouseout="out('-1232115849622021899');" style=""><abbr title="3139         List&lt;AppWidgetProviderInfo&gt; widgets = AppWidgetManager.getInstance(context).getInstalledProviders();">3139         List&lt;AppWidgetProviderInfo&gt; widgets = AppWidgetManager.getInstance(context).getInstalledProviders</abbr></span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3140         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3141             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3142                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3143             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3144         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3145         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3146     }                                                                                                    </span>
<span  style="">3147                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3148     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3149         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3150         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3151         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3152         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3153             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3154             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3155             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3156         }                                                                                                </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3157         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3158         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3159         ShortcutIconResource iconResource = null;                                                        </span>
<span class="-7590275881537128655" onmouseenter="enter('-7590275881537128655');" onmouseout="out('-7590275881537128655');" style="">3160         if ((bitmap != null) &amp;&amp; (bitmap instanceof Bitmap)) {                                            </span>
<span class="4948648185146307241" onmouseenter="enter('4948648185146307241');" onmouseout="out('4948648185146307241');" style="">3161             icon = Utilities.createIconBitmap(new FastBitmapDrawable(((Bitmap) (bitmap))), context);     </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3162             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3163         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3164             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="873539202926474103" onmouseenter="enter('873539202926474103');" onmouseout="out('873539202926474103');" style="">3165             if ((extra != null) &amp;&amp; (extra instanceof ShortcutIconResource)) {                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3166                 try {                                                                                    </span>
<span class="7560781599219001869" onmouseenter="enter('7560781599219001869');" onmouseout="out('7560781599219001869');" style="">3167                     iconResource = ((ShortcutIconResource) (extra));                                     </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3168                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="-3428036711148620835" onmouseenter="enter('-3428036711148620835');" onmouseout="out('-3428036711148620835');" style=""><abbr title="3169                     Resources resources = packageManager.getResourcesForApplication(iconResource.packageName);">3169                     Resources resources = packageManager.getResourcesForApplication(iconResource.packageN</abbr></span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3170                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-8111506311245393667" onmouseenter="enter('-8111506311245393667');" onmouseout="out('-8111506311245393667');" style="">3171                     icon = Utilities.createIconBitmap(mIconCache.getFullResIcon(resources, id), context);</span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">3172                 } catch (java.lang.Exception e) {                                                        </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3173                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3174                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3175             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3176         }                                                                                                </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3177         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="2102380556199177801" onmouseenter="enter('2102380556199177801');" onmouseout="out('2102380556199177801');" style="">3178         // Only support intents for current user for now. Intents sent from other                        </span>
<span class="2194655253408912185" onmouseenter="enter('2194655253408912185');" onmouseout="out('2194655253408912185');" style="">3179         // users wouldn&#x27;t get here without intent forwarding anyway.                                     </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3180         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3181         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3182             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3183                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3184             } else {                                                                                     </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3185                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3186                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3187             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3188         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3189         info.setIcon(icon);                                                                              </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3190         info.title = name;                                                                               </span>
<span class="-1867930841645421482" onmouseenter="enter('-1867930841645421482');" onmouseout="out('-1867930841645421482');" style="">3191         info.contentDescription = mUserManager.getBadgedLabelForUser(info.title.toString(), info.user);  </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3192         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3193         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3194         info.iconResource = iconResource;                                                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3195         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3196     }                                                                                                    </span>
<span  style="">3197                                                                                                          </span>
<span class="3439913297053211120" onmouseenter="enter('3439913297053211120');" onmouseout="out('3439913297053211120');" style=""><abbr title="3198     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c, int iconIndex) {">3198     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c, int iconInde</abbr></span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3199         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3200         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3201             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3202         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3203         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3204         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3205         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3206         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3207         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3208         // the app is on SD) then we can use that instead.                                               </span>
<span class="-4583761309752989647" onmouseenter="enter('-4583761309752989647');" onmouseout="out('-4583761309752989647');" style="">3209         if ((!info.customIcon) &amp;&amp; (!info.usingFallbackIcon)) {                                           </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3210             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3211             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3212         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3213         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3214     }                                                                                                    </span>
<span  style="">3215                                                                                                          </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3216     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3217         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3218         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3219             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3220                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3221                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3222                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3223             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3224                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3225             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">3226         } catch (java.lang.Exception e) {                                                                </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3227             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3228         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3229         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3230             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3231             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3232             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3233             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3234         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3235     }                                                                                                    </span>
<span  style="">3236                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3237     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3238      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3239      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3240      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3241     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3242         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3243         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3244         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3245             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3246             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3247             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3248         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3249         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3250     }                                                                                                    </span>
<span  style="">3251                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3252     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3253         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3254         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3255             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="3541515045662468306" onmouseenter="enter('3541515045662468306');" onmouseout="out('3541515045662468306');" style="">3256                 if (a.user.equals(b.user)) {                                                             </span>
<span class="-3239368458294074157" onmouseenter="enter('-3239368458294074157');" onmouseout="out('-3239368458294074157');" style="">3257                     int result = collator.compare(a.title.toString().trim(), b.title.toString().trim()); </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3258                     if (result == 0) {                                                                   </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3259                         result = a.componentName.compareTo(b.componentName);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3260                     }                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3261                     return result;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3262                 } else {                                                                                 </span>
<span class="-4940624116090922199" onmouseenter="enter('-4940624116090922199');" onmouseout="out('-4940624116090922199');" style="">3263                     // TODO Need to figure out rules for sorting                                         </span>
<span class="-7580798058375972430" onmouseenter="enter('-7580798058375972430');" onmouseout="out('-7580798058375972430');" style="">3264                     // profiles, this puts work second.                                                  </span>
<span class="-437659129845370257" onmouseenter="enter('-437659129845370257');" onmouseout="out('-437659129845370257');" style="">3265                     return a.user.toString().compareTo(b.user.toString());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3266                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3267             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3268         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3269     }                                                                                                    </span>
<span  style="">3270                                                                                                          </span>
<span class="5955404976394705038" onmouseenter="enter('5955404976394705038');" onmouseout="out('5955404976394705038');" style="">3271     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR = new Comparator&lt;AppInfo&gt;() {    </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3272         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="-8187472599640048379" onmouseenter="enter('-8187472599640048379');" onmouseout="out('-8187472599640048379');" style="">3273             if (a.firstInstallTime &lt; b.firstInstallTime) {                                               </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style="">3274                 return 1;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3275             }                                                                                            </span>
<span class="2743042164876951282" onmouseenter="enter('2743042164876951282');" onmouseout="out('2743042164876951282');" style="">3276             if (a.firstInstallTime &gt; b.firstInstallTime) {                                               </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">3277                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3278             }                                                                                            </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3279             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3280         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3281     };                                                                                                   </span>
<span  style="">3282                                                                                                          </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3283     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3284         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3285             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3286         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3287             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3288         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3289     }                                                                                                    </span>
<span  style="">3290                                                                                                          </span>
<span class="-5604165961236567660" onmouseenter="enter('-5604165961236567660');" onmouseout="out('-5604165961236567660');" style="">3291     public static class ShortcutNameComparator implements Comparator&lt;LauncherActivityInfoCompat&gt; {       </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3292         private Collator mCollator;                                                                      </span>
<span  style="">3293                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3294         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">3295                                                                                                          </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3296         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3297             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3298             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3299         }                                                                                                </span>
<span  style="">3300                                                                                                          </span>
<span class="3595266679393364065" onmouseenter="enter('3595266679393364065');" onmouseout="out('3595266679393364065');" style="">3301         ShortcutNameComparator(HashMap&lt;Object, CharSequence&gt; labelCache) {                               </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3302             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3303             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3304         }                                                                                                </span>
<span  style="">3305                                                                                                          </span>
<span class="5300656659592950018" onmouseenter="enter('5300656659592950018');" onmouseout="out('5300656659592950018');" style="">3306         public final int compare(LauncherActivityInfoCompat a, LauncherActivityInfoCompat b) {           </span>
<span class="2630491260437090066" onmouseenter="enter('2630491260437090066');" onmouseout="out('2630491260437090066');" style="">3307             String labelA;                                                                               </span>
<span class="-1930028114823183236" onmouseenter="enter('-1930028114823183236');" onmouseout="out('-1930028114823183236');" style="">3308             String labelB;                                                                               </span>
<span class="3539590309650150575" onmouseenter="enter('3539590309650150575');" onmouseout="out('3539590309650150575');" style="">3309             ComponentName keyA = a.getComponentName();                                                   </span>
<span class="-674250356247748253" onmouseenter="enter('-674250356247748253');" onmouseout="out('-674250356247748253');" style="">3310             ComponentName keyB = b.getComponentName();                                                   </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3311             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-1058154863590772027" onmouseenter="enter('-1058154863590772027');" onmouseout="out('-1058154863590772027');" style="">3312                 labelA = mLabelCache.get(keyA).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3313             } else {                                                                                     </span>
<span class="8953753374571564594" onmouseenter="enter('8953753374571564594');" onmouseout="out('8953753374571564594');" style="">3314                 labelA = a.getLabel().toString().trim();                                                 </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3315                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3316             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3317             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="267036364262288198" onmouseenter="enter('267036364262288198');" onmouseout="out('267036364262288198');" style="">3318                 labelB = mLabelCache.get(keyB).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3319             } else {                                                                                     </span>
<span class="-6332222509536632454" onmouseenter="enter('-6332222509536632454');" onmouseout="out('-6332222509536632454');" style="">3320                 labelB = b.getLabel().toString().trim();                                                 </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3321                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3322             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3323             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3324         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3325     }                                                                                                    </span>
<span  style="">3326                                                                                                          </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3327     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="9150498506085829362" onmouseenter="enter('9150498506085829362');" onmouseout="out('9150498506085829362');" style="">3328         private final AppWidgetManagerCompat mManager;                                                   </span>
<span  style="">3329                                                                                                          </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="">3330         private final PackageManager mPackageManager;                                                    </span>
<span  style="">3331                                                                                                          </span>
<span class="3147273048289991484" onmouseenter="enter('3147273048289991484');" onmouseout="out('3147273048289991484');" style="">3332         private final HashMap&lt;Object, String&gt; mLabelCache;                                               </span>
<span  style="">3333                                                                                                          </span>
<span class="7734513056437222570" onmouseenter="enter('7734513056437222570');" onmouseout="out('7734513056437222570');" style="">3334         private final Collator mCollator;                                                                </span>
<span  style="">3335                                                                                                          </span>
<span class="-4227954493245511846" onmouseenter="enter('-4227954493245511846');" onmouseout="out('-4227954493245511846');" style="">3336         WidgetAndShortcutNameComparator(Context context) {                                               </span>
<span class="3481132346717467494" onmouseenter="enter('3481132346717467494');" onmouseout="out('3481132346717467494');" style="">3337             mManager = AppWidgetManagerCompat.getInstance(context);                                      </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="">3338             mPackageManager = context.getPackageManager();                                               </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3339             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3340             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3341         }                                                                                                </span>
<span  style="">3342                                                                                                          </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3343         public final int compare(Object a, Object b) {                                                   </span>
<span class="2630491260437090066" onmouseenter="enter('2630491260437090066');" onmouseout="out('2630491260437090066');" style="">3344             String labelA;                                                                               </span>
<span class="-1930028114823183236" onmouseenter="enter('-1930028114823183236');" onmouseout="out('-1930028114823183236');" style="">3345             String labelB;                                                                               </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3346             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3347                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3348             } else {                                                                                     </span>
<span class="2721712340914234553" onmouseenter="enter('2721712340914234553');" onmouseout="out('2721712340914234553');" style=""><abbr title="3349                 labelA = (a instanceof AppWidgetProviderInfo) ? mManager.loadLabel(((AppWidgetProviderInfo) (a))) : ((ResolveInfo) (a)).loadLabel(mPackageManager).toString().trim();">3349                 labelA = (a instanceof AppWidgetProviderInfo) ? mManager.loadLabel(((AppWidgetProviderInf</abbr></span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3350                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3351             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3352             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3353                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3354             } else {                                                                                     </span>
<span class="-6328918786059185007" onmouseenter="enter('-6328918786059185007');" onmouseout="out('-6328918786059185007');" style=""><abbr title="3355                 labelB = (b instanceof AppWidgetProviderInfo) ? mManager.loadLabel(((AppWidgetProviderInfo) (b))) : ((ResolveInfo) (b)).loadLabel(mPackageManager).toString().trim();">3355                 labelB = (b instanceof AppWidgetProviderInfo) ? mManager.loadLabel(((AppWidgetProviderInf</abbr></span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3356                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3357             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3358             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3359         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3360     }                                                                                                    </span>
<span  style="">3361                                                                                                          </span>
<span class="9138636756014527253" onmouseenter="enter('9138636756014527253');" onmouseout="out('9138636756014527253');" style="">3362     static boolean isValidProvider(AppWidgetProviderInfo provider) {                                     </span>
<span class="1569900261247391307" onmouseenter="enter('1569900261247391307');" onmouseout="out('1569900261247391307');" style=""><abbr title="3363         return ((provider != null) &amp;&amp; (provider.provider != null)) &amp;&amp; (provider.provider.getPackageName() != null);">3363         return ((provider != null) &amp;&amp; (provider.provider != null)) &amp;&amp; (provider.provider.getPackageName()</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3364     }                                                                                                    </span>
<span  style="">3365                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3366     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3367         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3368         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3369         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3370         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3371         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3372         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3373             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3374         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3375             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3376         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3377     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3378 }                                                                                                        </span>
























































































































































































































































































































































































































































































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19  import android.app.SearchManager;                                                                                 </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="-984325520036959693" onmouseenter="enter('-984325520036959693');" onmouseout="out('-984325520036959693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  22 -import android.content.*;                                                                                         </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  23 +import android.content.BroadcastReceiver;                                                                         </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  24 +import android.content.ComponentName;                                                                             </span>
<span class="5843991090186771909" onmouseenter="enter('5843991090186771909');" onmouseout="out('5843991090186771909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  25 +import android.content.ContentProviderClient;                                                                     </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  26 +import android.content.ContentProviderOperation;                                                                  </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  27 +import android.content.ContentResolver;                                                                           </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import android.content.ContentValues;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  30 +import android.content.Intent;                                                                                    </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  31  import android.content.Intent.ShortcutIconResource;                                                               </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  32 -import android.content.pm.ActivityInfo;                                                                           </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  33 -import android.content.pm.PackageInfo;                                                                            </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import android.content.IntentFilter;                                                                              </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import android.content.SharedPreferences;                                                                         </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  36  import android.content.pm.PackageManager;                                                                         </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  37 -import android.content.pm.PackageManager.NameNotFoundException;                                                   </span>
<span class="-7427681121873781918" onmouseenter="enter('-7427681121873781918');" onmouseout="out('-7427681121873781918');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  38 +import android.content.pm.ProviderInfo;                                                                           </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  39  import android.content.pm.ResolveInfo;                                                                            </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  40  import android.content.res.Configuration;                                                                         </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  41  import android.content.res.Resources;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  42  import android.database.Cursor;                                                                                   </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  43  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  44  import android.graphics.BitmapFactory;                                                                            </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  45  import android.net.Uri;                                                                                           </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  46  import android.os.Environment;                                                                                    </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  47  import android.os.Handler;                                                                                        </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  48  import android.os.HandlerThread;                                                                                  </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  49  import android.os.Parcelable;                                                                                     </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  50  import android.os.Process;                                                                                        </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  51  import android.os.RemoteException;                                                                                </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  52  import android.os.SystemClock;                                                                                    </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  53  import android.provider.BaseColumns;                                                                              </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  54  import android.text.TextUtils;                                                                                    </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  55  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  56  import android.util.Pair;                                                                                         </span>
<span  style="">  57                                                                                                                    </span>
<span class="2480987830742885141" onmouseenter="enter('2480987830742885141');" onmouseout="out('2480987830742885141');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  58 -import com.android.launcher3.InstallWidgetReceiver.WidgetMimeTypeHandlerData;                                     </span>
<span class="-2301578055393860706" onmouseenter="enter('-2301578055393860706');" onmouseout="out('-2301578055393860706');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +import com.android.launcher3.compat.AppWidgetManagerCompat;                                                       </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +import com.android.launcher3.compat.LauncherActivityInfoCompat;                                                   </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +import com.android.launcher3.compat.LauncherAppsCompat;                                                           </span>
<span class="-6378403157506113444" onmouseenter="enter('-6378403157506113444');" onmouseout="out('-6378403157506113444');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  62 +import com.android.launcher3.compat.PackageInstallerCompat;                                                       </span>
<span class="-9185808437279523438" onmouseenter="enter('-9185808437279523438');" onmouseout="out('-9185808437279523438');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +import com.android.launcher3.compat.PackageInstallerCompat.PackageInstallInfo;                                    </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +import com.android.launcher3.compat.UserHandleCompat;                                                             </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +import com.android.launcher3.compat.UserManagerCompat;                                                            </span>
<span  style="">  66                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  67  import java.lang.ref.WeakReference;                                                                               </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  68  import java.net.URISyntaxException;                                                                               </span>
<span class="4163694070296964880" onmouseenter="enter('4163694070296964880');" onmouseout="out('4163694070296964880');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  69 +import java.security.InvalidParameterException;                                                                   </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  70  import java.text.Collator;                                                                                        </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  71  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  72  import java.util.Arrays;                                                                                          </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  73  import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  74  import java.util.Collections;                                                                                     </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  75  import java.util.Comparator;                                                                                      </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  76  import java.util.HashMap;                                                                                         </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  77  import java.util.HashSet;                                                                                         </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  78  import java.util.Iterator;                                                                                        </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  79  import java.util.List;                                                                                            </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  80 +import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  81  import java.util.Set;                                                                                             </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  82  import java.util.TreeMap;                                                                                         </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  83  import java.util.concurrent.atomic.AtomicBoolean;                                                                 </span>
<span  style="">  84                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  85  /**                                                                                                               </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  86   * Maintains in-memory state of the Launcher. It is expected that there should be only one                        </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  87   * LauncherModel object held in a static. Also provide APIs for updating the database state                       </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  88   * for the Launcher.                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  89   */                                                                                                               </span>
<span class="-1237709953007126496" onmouseenter="enter('-1237709953007126496');" onmouseout="out('-1237709953007126496');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  90 -public class LauncherModel extends BroadcastReceiver {                                                            </span>
<span class="-2442101869408899034" onmouseenter="enter('-2442101869408899034');" onmouseout="out('-2442101869408899034');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  91 +public class LauncherModel extends BroadcastReceiver                                                              </span>
<span class="-6161550071310903350" onmouseenter="enter('-6161550071310903350');" onmouseout="out('-6161550071310903350');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +        implements LauncherAppsCompat.OnAppsChangedCallbackCompat {                                               </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  93      static final boolean DEBUG_LOADERS = false;                                                                   </span>
<span class="-5037112122408598239" onmouseenter="enter('-5037112122408598239');" onmouseout="out('-5037112122408598239');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  94 +    private static final boolean DEBUG_RECEIVER = false;                                                          </span>
<span class="-4012347986936200510" onmouseenter="enter('-4012347986936200510');" onmouseout="out('-4012347986936200510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  95 +    private static final boolean REMOVE_UNRESTORED_ICONS = true;                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  96 +                                                                                                                  </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  97      static final String TAG = &quot;Launcher.Model&quot;;                                                                   </span>
<span  style="">  98                                                                                                                    </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  99      // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                          </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style=""> 100      // false = strew non-workspace apps across the workspace on upgrade                                           </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style=""> 101      public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 102 -                                                                                                                  </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style=""> 103      public static final int LOADER_FLAG_NONE = 0;                                                                 </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style=""> 104      public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                                 </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style=""> 105      public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                               </span>
<span  style=""> 106                                                                                                                    </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style=""> 107      private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                               </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style=""> 108      private static final long INVALID_SCREEN_ID = -1L;                                                            </span>
<span  style=""> 109                                                                                                                    </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style=""> 110      private final boolean mAppsCanBeOnRemoveableStorage;                                                          </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style=""> 111      private final boolean mOldContentProviderExists;                                                              </span>
<span  style=""> 112                                                                                                                    </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style=""> 113      private final LauncherAppState mApp;                                                                          </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style=""> 114      private final Object mLock = new Object();                                                                    </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style=""> 115      private DeferredHandler mHandler = new DeferredHandler();                                                     </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 116      private LoaderTask mLoaderTask;                                                                               </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 117      private boolean mIsLoaderTaskRunning;                                                                         </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 118      private volatile boolean mFlushingWorkerThread;                                                               </span>
<span  style=""> 119                                                                                                                    </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 120      // Specific runnable types that are run on the main thread deferred handler, this allows us to                </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 121      // clear all queued binding runnables when the Launcher activity is destroyed.                                </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 122      private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                                     </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 123      private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                                    </span>
<span  style=""> 124                                                                                                                    </span>
<span class="5026118005036723308" onmouseenter="enter('5026118005036723308');" onmouseout="out('5026118005036723308');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +    private static final String MIGRATE_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                             </span>
<span  style=""> 126                                                                                                                    </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 127      private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);                      </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 128      static {                                                                                                      </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 129          sWorkerThread.start();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130      }                                                                                                             </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 131      private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                                </span>
<span  style=""> 132                                                                                                                    </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 133      // We start off with everything not loaded.  After that, we assume that                                       </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 134      // our monitoring of the package manager provides all updates and we never                                    </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 135      // need to do a requery.  These are only ever touched from the loader thread.                                 </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 136      private boolean mWorkspaceLoaded;                                                                             </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 137      private boolean mAllAppsLoaded;                                                                               </span>
<span  style=""> 138                                                                                                                    </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 139      // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side               </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 140      // pages as this delays the rotation process.  Instead, we wait for a callback from the first                 </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 141      // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start                </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 142      // a normal load, we also clear this set of Runnables.                                                        </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 143      static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                          </span>
<span  style=""> 144                                                                                                                    </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 145      private WeakReference&lt;Callbacks&gt; mCallbacks;                                                                  </span>
<span  style=""> 146                                                                                                                    </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 147      // &lt; only access in worker thread &gt;                                                                           </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 148      AllAppsList mBgAllAppsList;                                                                                   </span>
<span  style=""> 149                                                                                                                    </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 150      // The lock that must be acquired before referencing any static bg data structures.  Unlike                   </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 151      // other locks, this one can generally be held long-term because we never expect any of these                 </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 152      // static data structures to be referenced outside of the worker thread except on the first                   </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 153      // load after configuration change.                                                                           </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 154      static final Object sBgLock = new Object();                                                                   </span>
<span  style=""> 155                                                                                                                    </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 156      // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by                        </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 157      // LauncherModel to their ids                                                                                 </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 158      static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                           </span>
<span  style=""> 159                                                                                                                    </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 160      // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts                </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 161      //       created by LauncherModel that are directly on the home screen (however, no widgets or                </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 162      //       shortcuts within folders).                                                                           </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 163      static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                               </span>
<span  style=""> 164                                                                                                                    </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 165      // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()             </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 166      static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                                 </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 167          new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                                   </span>
<span  style=""> 168                                                                                                                    </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 169      // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                            </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 170      static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                          </span>
<span  style=""> 171                                                                                                                    </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 172      // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database               </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 173      static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                          </span>
<span  style=""> 174                                                                                                                    </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 175      // sBgWorkspaceScreens is the ordered set of workspace screens.                                               </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 176      static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                                     </span>
<span  style=""> 177                                                                                                                    </span>
<span class="8587182513202290942" onmouseenter="enter('8587182513202290942');" onmouseout="out('8587182513202290942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 178 +    // sPendingPackages is a set of packages which could be on sdcard and are not available yet                   </span>
<span class="7668483630172593446" onmouseenter="enter('7668483630172593446');" onmouseout="out('7668483630172593446');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 179 +    static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages =                                    </span>
<span class="3743105789756038321" onmouseenter="enter('3743105789756038321');" onmouseout="out('3743105789756038321');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 180 +            new HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt;();                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 181 +                                                                                                                  </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 182      // &lt;/ only access in worker thread &gt;                                                                          </span>
<span  style=""> 183                                                                                                                    </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 184      private IconCache mIconCache;                                                                                 </span>
<span class="7327140815403295852" onmouseenter="enter('7327140815403295852');" onmouseout="out('7327140815403295852');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 185 -    private Bitmap mDefaultIcon;                                                                                  </span>
<span  style=""> 186                                                                                                                    </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 187      protected int mPreviousConfigMcc;                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 188 +                                                                                                                  </span>
<span class="-1392466613073934971" onmouseenter="enter('-1392466613073934971');" onmouseout="out('-1392466613073934971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +    private final LauncherAppsCompat mLauncherApps;                                                               </span>
<span class="-6177668713869523688" onmouseenter="enter('-6177668713869523688');" onmouseout="out('-6177668713869523688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 190 +    private final UserManagerCompat mUserManager;                                                                 </span>
<span  style=""> 191                                                                                                                    </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 192      public interface Callbacks {                                                                                  </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 193          public boolean setLoadOnResume();                                                                         </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 194          public int getCurrentWorkspaceScreen();                                                                   </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 195          public void startBinding();                                                                               </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 196          public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                                  </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 197                                boolean forceAnimateIcons);                                                         </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 198          public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                                </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 199          public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                             </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 200          public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                                </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 201          public void finishBindingItems(boolean upgradePath);                                                      </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 202          public void bindAppWidget(LauncherAppWidgetInfo info);                                                    </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 203          public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                                 </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 204          public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                                     </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 205                                    ArrayList&lt;ItemInfo&gt; addNotAnimated,                                             </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 206                                    ArrayList&lt;ItemInfo&gt; addAnimated,                                                </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 207                                    ArrayList&lt;AppInfo&gt; addedApps);                                                  </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 208          public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                                     </span>
<span class="-6991207189725786229" onmouseenter="enter('-6991207189725786229');" onmouseout="out('-6991207189725786229');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 209 +        public void bindAppsRestored(ArrayList&lt;AppInfo&gt; apps);                                                    </span>
<span class="1552205679904733456" onmouseenter="enter('1552205679904733456');" onmouseout="out('1552205679904733456');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 210 +        public void updatePackageState(ArrayList&lt;PackageInstallInfo&gt; installInfo);                                </span>
<span class="3764474087617128758" onmouseenter="enter('3764474087617128758');" onmouseout="out('3764474087617128758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 211 +        public void updatePackageBadge(String packageName);                                                       </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 212          public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                         </span>
<span class="-4070092502400219459" onmouseenter="enter('-4070092502400219459');" onmouseout="out('-4070092502400219459');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 213 -                        ArrayList&lt;AppInfo&gt; appInfos);                                                             </span>
<span class="-1539895317750647539" onmouseenter="enter('-1539895317750647539');" onmouseout="out('-1539895317750647539');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 214 +                        ArrayList&lt;AppInfo&gt; appInfos, UserHandleCompat user);                                      </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 215          public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                                   </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 216          public void bindSearchablesChanged();                                                                     </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 217          public boolean isAllAppsButtonRank(int rank);                                                             </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 218          public void onPageBoundSynchronously(int page);                                                           </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 219          public void dumpLogsToLocalData();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220      }                                                                                                             </span>
<span  style=""> 221                                                                                                                    </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 222      public interface ItemInfoFilter {                                                                             </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 223          public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224      }                                                                                                             </span>
<span  style=""> 225                                                                                                                    </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 226      LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                               </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 227          Context context = app.getContext();                                                                       </span>
<span class="5049533599805126653" onmouseenter="enter('5049533599805126653');" onmouseout="out('5049533599805126653');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 228 -        ContentResolver contentResolver = context.getContentResolver();                                           </span>
<span  style=""> 229                                                                                                                    </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 230          mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                                 </span>
<span class="953599912945541719" onmouseenter="enter('953599912945541719');" onmouseout="out('953599912945541719');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 231 -        mOldContentProviderExists = (contentResolver.acquireContentProviderClient(                                </span>
<span class="6680469959813031014" onmouseenter="enter('6680469959813031014');" onmouseout="out('6680469959813031014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 232 -                LauncherSettings.Favorites.OLD_CONTENT_URI) != null);                                             </span>
<span class="6456618698786728431" onmouseenter="enter('6456618698786728431');" onmouseout="out('6456618698786728431');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 233 +        String oldProvider = context.getString(R.string.old_launcher_provider_uri);                               </span>
<span class="-4473607088242738177" onmouseenter="enter('-4473607088242738177');" onmouseout="out('-4473607088242738177');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +        // This may be the same as MIGRATE_AUTHORITY, or it may be replaced by a different                        </span>
<span class="-5811264300229071057" onmouseenter="enter('-5811264300229071057');" onmouseout="out('-5811264300229071057');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 235 +        // resource string.                                                                                       </span>
<span class="7826951633422431656" onmouseenter="enter('7826951633422431656');" onmouseout="out('7826951633422431656');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 236 +        String redirectAuthority = Uri.parse(oldProvider).getAuthority();                                         </span>
<span class="6066736278849717257" onmouseenter="enter('6066736278849717257');" onmouseout="out('6066736278849717257');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 237 +        ProviderInfo providerInfo =                                                                               </span>
<span class="-9141516768909079071" onmouseenter="enter('-9141516768909079071');" onmouseout="out('-9141516768909079071');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 238 +                context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY, 0);                         </span>
<span class="765698750338601416" onmouseenter="enter('765698750338601416');" onmouseout="out('765698750338601416');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 239 +        ProviderInfo redirectProvider =                                                                           </span>
<span class="-45874905823641339" onmouseenter="enter('-45874905823641339');" onmouseout="out('-45874905823641339');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 240 +                context.getPackageManager().resolveContentProvider(redirectAuthority, 0);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 241 +                                                                                                                  </span>
<span class="314259485526307626" onmouseenter="enter('314259485526307626');" onmouseout="out('314259485526307626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 242 +        Log.d(TAG, &quot;Old launcher provider: &quot; + oldProvider);                                                      </span>
<span class="-8592116164695986182" onmouseenter="enter('-8592116164695986182');" onmouseout="out('-8592116164695986182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 243 +        mOldContentProviderExists = (providerInfo != null) &amp;&amp; (redirectProvider != null);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 244 +                                                                                                                  </span>
<span class="6861009572404401042" onmouseenter="enter('6861009572404401042');" onmouseout="out('6861009572404401042');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 245 +        if (mOldContentProviderExists) {                                                                          </span>
<span class="-1855952710226164095" onmouseenter="enter('-1855952710226164095');" onmouseout="out('-1855952710226164095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 246 +            Log.d(TAG, &quot;Old launcher provider exists.&quot;);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 247 +        } else {                                                                                                  </span>
<span class="-884548298796331780" onmouseenter="enter('-884548298796331780');" onmouseout="out('-884548298796331780');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 248 +            Log.d(TAG, &quot;Old launcher provider does not exist.&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 249 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 250 +                                                                                                                  </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 251          mApp = app;                                                                                               </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 252          mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                                   </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 253          mIconCache = iconCache;                                                                                   </span>
<span  style=""> 254                                                                                                                    </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 255          final Resources res = context.getResources();                                                             </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 256          Configuration config = res.getConfiguration();                                                            </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 257          mPreviousConfigMcc = config.mcc;                                                                          </span>
<span class="-1186313261969242146" onmouseenter="enter('-1186313261969242146');" onmouseout="out('-1186313261969242146');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 258 +        mLauncherApps = LauncherAppsCompat.getInstance(context);                                                  </span>
<span class="5028106411018262806" onmouseenter="enter('5028106411018262806');" onmouseout="out('5028106411018262806');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 259 +        mUserManager = UserManagerCompat.getInstance(context);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260      }                                                                                                             </span>
<span  style=""> 261                                                                                                                    </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 262      /** Runs the specified runnable immediately if called from the main thread, otherwise it is                   </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 263       * posted on the main thread handler. */                                                                      </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 264      private void runOnMainThread(Runnable r) {                                                                    </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 265          runOnMainThread(r, 0);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266      }                                                                                                             </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 267      private void runOnMainThread(Runnable r, int type) {                                                          </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 268          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 269              // If we are on the worker thread, post onto the main handler                                         </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 270              mHandler.post(r);                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 271          } else {                                                                                                  </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 272              r.run();                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274      }                                                                                                             </span>
<span  style=""> 275                                                                                                                    </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 276      /** Runs the specified runnable immediately if called from the worker thread, otherwise it is                 </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 277       * posted on the worker thread handler. */                                                                    </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 278      private static void runOnWorkerThread(Runnable r) {                                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 279          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 280              r.run();                                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 281          } else {                                                                                                  </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 282              // If we are not on the worker thread, then post to the worker handler                                </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 283              sWorker.post(r);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285      }                                                                                                             </span>
<span  style=""> 286                                                                                                                    </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 287      boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                                      </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 288          return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289      }                                                                                                             </span>
<span  style=""> 290                                                                                                                    </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 291      static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,                        </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 292                                   long screen) {                                                                   </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 293          LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 294          DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                             </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 295          final int xCount = (int) grid.numColumns;                                                                 </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 296          final int yCount = (int) grid.numRows;                                                                    </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 297          boolean[][] occupied = new boolean[xCount][yCount];                                                       </span>
<span  style=""> 298                                                                                                                    </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 299          int cellX, cellY, spanX, spanY;                                                                           </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 300          for (int i = 0; i &lt; items.size(); ++i) {                                                                  </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 301              final ItemInfo item = items.get(i);                                                                   </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 302              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                                 </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 303                  if (item.screenId == screen) {                                                                    </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 304                      cellX = item.cellX;                                                                           </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 305                      cellY = item.cellY;                                                                           </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 306                      spanX = item.spanX;                                                                           </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 307                      spanY = item.spanY;                                                                           </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 308                      for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                         </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 309                          for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {                     </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 310                              occupied[x][y] = true;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315          }                                                                                                         </span>
<span  style=""> 316                                                                                                                    </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 317          return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318      }                                                                                                             </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 319      static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                             </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 320                                                          Intent launchIntent,                                      </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 321                                                          int firstScreenIndex,                                     </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 322                                                          ArrayList&lt;Long&gt; workspaceScreens) {                       </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 323          // Lock on the app so that we don&#x27;t try and get the items while apps are being added                      </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 324          LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 325          LauncherModel model = app.getModel();                                                                     </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 326          boolean found = false;                                                                                    </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 327          synchronized (app) {                                                                                      </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 328              if (sWorkerThread.getThreadId() != Process.myTid()) {                                                 </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 329                  // Flush the LauncherModel worker thread, so that if we just did another                          </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 330                  // processInstallShortcut, we give it time for its shortcut to get added to the                   </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 331                  // database (getItemsInLocalCoordinates reads the database)                                       </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 332                  model.flushWorkerThread();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333              }                                                                                                     </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 334              final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);                  </span>
<span  style=""> 335                                                                                                                    </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 336              // Try adding to the workspace screens incrementally, starting at the default or center               </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 337              // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))                </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 338              firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                               </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 339              int count = workspaceScreens.size();                                                                  </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 340              for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                             </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 341                  int[] tmpCoordinates = new int[2];                                                                </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 342                  if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                                     </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 343                          workspaceScreens.get(screen))) {                                                          </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 344                      // Update the Launcher db                                                                     </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 345                      return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 349          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350      }                                                                                                             </span>
<span  style=""> 351                                                                                                                    </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 352 -    public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,               </span>
<span class="9200705866279837671" onmouseenter="enter('9200705866279837671');" onmouseout="out('9200705866279837671');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 353 -                                    final ArrayList&lt;AppInfo&gt; allAppsApps) {                                       </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 354 -        Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                              </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 355 -        addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 356 -    }                                                                                                             </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 357 -    public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,               </span>
<span class="-6487660545798143403" onmouseenter="enter('-6487660545798143403');" onmouseout="out('-6487660545798143403');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 358 -                                final Callbacks callbacks, final ArrayList&lt;AppInfo&gt; allAppsApps) {                </span>
<span class="-1944739770126231100" onmouseenter="enter('-1944739770126231100');" onmouseout="out('-1944739770126231100');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 359 -        if (workspaceApps == null || allAppsApps == null) {                                                       </span>
<span class="-7586986915858549354" onmouseenter="enter('-7586986915858549354');" onmouseout="out('-7586986915858549354');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 360 +    public void setPackageState(final ArrayList&lt;PackageInstallInfo&gt; installInfo) {                                </span>
<span class="-7600698850277173095" onmouseenter="enter('-7600698850277173095');" onmouseout="out('-7600698850277173095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 361 +        // Process the updated package state                                                                      </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +        Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 363 +            public void run() {                                                                                   </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 364 +                Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                               </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 365 +                if (callbacks != null) {                                                                          </span>
<span class="-2122958624687225435" onmouseenter="enter('-2122958624687225435');" onmouseout="out('-2122958624687225435');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 366 +                    callbacks.updatePackageState(installInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 367 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 368 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 369 +        };                                                                                                        </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 370 +        mHandler.post(r);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 371 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 372 +                                                                                                                  </span>
<span class="-4348975915921845586" onmouseenter="enter('-4348975915921845586');" onmouseout="out('-4348975915921845586');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 373 +    public void updatePackageBadge(final String packageName) {                                                    </span>
<span class="7729714843616329773" onmouseenter="enter('7729714843616329773');" onmouseout="out('7729714843616329773');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 374 +        // Process the updated package badge                                                                      </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 375 +        Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 376 +            public void run() {                                                                                   </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 377 +                Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                               </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 378 +                if (callbacks != null) {                                                                          </span>
<span class="-175082648182985609" onmouseenter="enter('-175082648182985609');" onmouseout="out('-175082648182985609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 379 +                    callbacks.updatePackageBadge(packageName);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 380 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 381 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 382 +        };                                                                                                        </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 383 +        mHandler.post(r);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 384 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 385 +                                                                                                                  </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 386 +    public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {                       </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 387 +        final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 388 +                                                                                                                  </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 389 +        if (allAppsApps == null) {                                                                                </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 390 +            throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 391 +        }                                                                                                         </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 392 +        if (allAppsApps.isEmpty()) {                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 393 +            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 394 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 395 +                                                                                                                  </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 396 +        final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                                    </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 397 +        Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                          </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 398 +        while (iter.hasNext()) {                                                                                  </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 399 +            ItemInfo a = iter.next();                                                                             </span>
<span class="788818030959001981" onmouseenter="enter('788818030959001981');" onmouseout="out('788818030959001981');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 400 +            if (LauncherModel.appWasPromise(ctx, a.getIntent(), a.user)) {                                        </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 401 +                restoredAppsFinal.add((AppInfo) a);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 402 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 403 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 404 +                                                                                                                  </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 405 +        // Process the newly added applications and add them to the database first                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 406 +        Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 407 +            public void run() {                                                                                   </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 408 +                runOnMainThread(new Runnable() {                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 409 +                    public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 410 +                        Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 411 +                        if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 412 +                            if (!restoredAppsFinal.isEmpty()) {                                                   </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 413 +                                for (AppInfo info : restoredAppsFinal) {                                          </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 414 +                                    final Intent intent = info.getIntent();                                       </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 415 +                                    if (intent != null) {                                                         </span>
<span class="7948974687398618411" onmouseenter="enter('7948974687398618411');" onmouseout="out('7948974687398618411');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 416 +                                        mIconCache.deletePreloadedIcon(intent.getComponent(),                     </span>
<span class="1609339875512298297" onmouseenter="enter('1609339875512298297');" onmouseout="out('1609339875512298297');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 417 +                                                info.user);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 418 +                                    }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 419 +                                }                                                                                 </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 420 +                                callbacks.bindAppsUpdated(restoredAppsFinal);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 421 +                            }                                                                                     </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 422 +                            callbacks.bindAppsAdded(null, null, null, allAppsApps);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 423 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 424 +                    }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 425 +                });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 426 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 427 +        };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 428 +        runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 429 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 430 +                                                                                                                  </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 431 +    public void addAndBindAddedWorkspaceApps(final Context context,                                               </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 432 +            final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                            </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 433 +        final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 434 +                                                                                                                  </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 435 +        if (workspaceApps == null) {                                                                              </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 436              throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437          }                                                                                                         </span>
<span class="6140956863670038829" onmouseenter="enter('6140956863670038829');" onmouseout="out('6140956863670038829');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 438 -        if (workspaceApps.isEmpty() &amp;&amp; allAppsApps.isEmpty()) {                                                   </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 439 +        if (workspaceApps.isEmpty()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 440              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441          }                                                                                                         </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 442          // Process the newly added applications and add them to the database first                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 443          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 444              public void run() {                                                                                   </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 445                  final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();                        </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 446                  final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                         </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 447 +                final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                            </span>
<span  style=""> 448                                                                                                                    </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 449                  // Get the list of workspace screens.  We need to append to this list and                         </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 450                  // can not use sBgWorkspaceScreens because loadWorkspace() may not have been                      </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 451                  // called.                                                                                        </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 452                  ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                         </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 453                  TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                          </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 454                  for (Integer i : orderedScreens.keySet()) {                                                       </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 455                      long screenId = orderedScreens.get(i);                                                        </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 456                      workspaceScreens.add(screenId);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457                  }                                                                                                 </span>
<span  style=""> 458                                                                                                                    </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 459                  synchronized(sBgLock) {                                                                           </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 460                      Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                           </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 461                      while (iter.hasNext()) {                                                                      </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 462                          ItemInfo a = iter.next();                                                                 </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 463                          final String name = a.title.toString();                                                   </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 464                          final Intent launchIntent = a.getIntent();                                                </span>
<span  style=""> 465                                                                                                                    </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 466                          // Short-circuit this logic if the icon exists somewhere on the workspace                 </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 467                          if (LauncherModel.shortcutExists(context, name, launchIntent)) {                          </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 468 +                            // Only InstallShortcutReceiver sends us shortcutInfos, ignore them                   </span>
<span class="-8314395278706468200" onmouseenter="enter('-8314395278706468200');" onmouseout="out('-8314395278706468200');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 469 +                            if (a instanceof AppInfo &amp;&amp;                                                           </span>
<span class="-4816286524033800367" onmouseenter="enter('-4816286524033800367');" onmouseout="out('-4816286524033800367');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 470 +                                    LauncherModel.appWasPromise(context, launchIntent, a.user)) {                 </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 471 +                                restoredAppsFinal.add((AppInfo) a);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 472 +                            }                                                                                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 473                              continue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474                          }                                                                                         </span>
<span  style=""> 475                                                                                                                    </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 476                          // Add this icon to the db, creating a new page if necessary.  If there                   </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 477                          // is only the empty page then we just add items to the first page.                       </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 478                          // Otherwise, we add them to the next pages.                                              </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 479                          int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                            </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 480                          Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,              </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 481                                  name, launchIntent, startSearchPageIndex, workspaceScreens);                      </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 482                          if (coords == null) {                                                                     </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 483                              LauncherProvider lp = LauncherAppState.getLauncherProvider();                         </span>
<span  style=""> 484                                                                                                                    </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 485                              // If we can&#x27;t find a valid position, then just add a new screen.                     </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 486                              // This takes time so we need to re-queue the add until the new                       </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 487                              // page is added.  Create as many screens as necessary to satisfy                     </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 488                              // the startSearchPageIndex.                                                          </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 489                              int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                            </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 490                                      workspaceScreens.size());                                                     </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 491                              while (numPagesToAdd &gt; 0) {                                                           </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 492                                  long screenId = lp.generateNewScreenId();                                         </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 493                                  // Save the screen id for binding in the workspace                                </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 494                                  workspaceScreens.add(screenId);                                                   </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 495                                  addedWorkspaceScreensFinal.add(screenId);                                         </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 496                                  numPagesToAdd--;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497                              }                                                                                     </span>
<span  style=""> 498                                                                                                                    </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 499                              // Find the coordinate again                                                          </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 500                              coords = LauncherModel.findNextAvailableIconSpace(context,                            </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 501                                      name, launchIntent, startSearchPageIndex, workspaceScreens);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502                          }                                                                                         </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 503                          if (coords == null) {                                                                     </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 504                              throw new RuntimeException(&quot;Coordinates should not be null&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505                          }                                                                                         </span>
<span  style=""> 506                                                                                                                    </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 507                          ShortcutInfo shortcutInfo;                                                                </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 508                          if (a instanceof ShortcutInfo) {                                                          </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 509                              shortcutInfo = (ShortcutInfo) a;                                                      </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 510                          } else if (a instanceof AppInfo) {                                                        </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 511                              shortcutInfo = ((AppInfo) a).makeShortcut();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 512                          } else {                                                                                  </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 513                              throw new RuntimeException(&quot;Unexpected info type&quot;);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514                          }                                                                                         </span>
<span  style=""> 515                                                                                                                    </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 516                          // Add the shortcut to the db                                                             </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 517                          addItemToDatabase(context, shortcutInfo,                                                  </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 518                                  LauncherSettings.Favorites.CONTAINER_DESKTOP,                                     </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 519                                  coords.first, coords.second[0], coords.second[1], false);                         </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 520                          // Save the ShortcutInfo for binding in the workspace                                     </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 521                          addedShortcutsFinal.add(shortcutInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523                  }                                                                                                 </span>
<span  style=""> 524                                                                                                                    </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 525                  // Update the workspace screens                                                                   </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 526                  updateWorkspaceScreenOrder(context, workspaceScreens);                                            </span>
<span  style=""> 527                                                                                                                    </span>
<span class="6328421283494006334" onmouseenter="enter('6328421283494006334');" onmouseout="out('6328421283494006334');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 528 -                if (!addedShortcutsFinal.isEmpty() || !allAppsApps.isEmpty()) {                                   </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 529 +                if (!addedShortcutsFinal.isEmpty()) {                                                             </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 530                      runOnMainThread(new Runnable() {                                                              </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 531                          public void run() {                                                                       </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 532                              Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                          </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 533                              if (callbacks == cb &amp;&amp; cb != null) {                                                  </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 534                                  final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();                </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 535                                  final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();             </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 536                                  if (!addedShortcutsFinal.isEmpty()) {                                             </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""> 537                                      ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);      </span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 538                                      long lastScreenId = info.screenId;                                            </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 539                                      for (ItemInfo i : addedShortcutsFinal) {                                      </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 540                                          if (i.screenId == lastScreenId) {                                         </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 541                                              addAnimated.add(i);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 542                                          } else {                                                                  </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 543                                              addNotAnimated.add(i);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544                                          }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546                                  }                                                                                 </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 547                                  callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                               </span>
<span class="-748486497380548647" onmouseenter="enter('-748486497380548647');" onmouseout="out('-748486497380548647');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 548 -                                        addNotAnimated, addAnimated, allAppsApps);                                </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 549 +                                        addNotAnimated, addAnimated, null);                                       </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 550 +                                if (!restoredAppsFinal.isEmpty()) {                                               </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 551 +                                    callbacks.bindAppsUpdated(restoredAppsFinal);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 552 +                                }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 555                      });                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 558          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 559          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 560 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 561 -                                                                                                                  </span>
<span class="6011793905538310529" onmouseenter="enter('6011793905538310529');" onmouseout="out('6011793905538310529');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 562 -    public Bitmap getFallbackIcon() {                                                                             </span>
<span class="-671044890656554786" onmouseenter="enter('-671044890656554786');" onmouseout="out('-671044890656554786');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 563 -        if (mDefaultIcon == null) {                                                                               </span>
<span class="6379788101570603758" onmouseenter="enter('6379788101570603758');" onmouseout="out('6379788101570603758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 564 -            final Context context = LauncherAppState.getInstance().getContext();                                  </span>
<span class="-6730081374242205673" onmouseenter="enter('-6730081374242205673');" onmouseout="out('-6730081374242205673');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 565 -            mDefaultIcon = Utilities.createIconBitmap(                                                            </span>
<span class="-5707305257020956234" onmouseenter="enter('-5707305257020956234');" onmouseout="out('-5707305257020956234');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 566 -                    mIconCache.getFullResDefaultActivityIcon(), context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 567 -        }                                                                                                         </span>
<span class="1334413422936499318" onmouseenter="enter('1334413422936499318');" onmouseout="out('1334413422936499318');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 568 -        return Bitmap.createBitmap(mDefaultIcon);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569      }                                                                                                             </span>
<span  style=""> 570                                                                                                                    </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 571      public void unbindItemInfosAndClearQueuedBindRunnables() {                                                    </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 572          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 573              throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +              </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 574                      &quot;main thread&quot;);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575          }                                                                                                         </span>
<span  style=""> 576                                                                                                                    </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 577          // Clear any deferred bind runnables                                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 578 -        mDeferredBindRunnables.clear();                                                                           </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 579 +        synchronized (mDeferredBindRunnables) {                                                                   </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 580 +            mDeferredBindRunnables.clear();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 581 +        }                                                                                                         </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 582          // Remove any queued bind runnables                                                                       </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 583          mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 584          // Unbind all the workspace items                                                                         </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 585          unbindWorkspaceItemsOnMainThread();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586      }                                                                                                             </span>
<span  style=""> 587                                                                                                                    </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 588      /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                                 </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 589      void unbindWorkspaceItemsOnMainThread() {                                                                     </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 590          // Ensure that we don&#x27;t use the same workspace items data structure on the main thread                    </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 591          // by making a copy of workspace items first.                                                             </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 592          final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                  </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 593          final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 594          synchronized (sBgLock) {                                                                                  </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 595              tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                          </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 596              tmpAppWidgets.addAll(sBgAppWidgets);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597          }                                                                                                         </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 598          Runnable r = new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 599                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 600                  public void run() {                                                                               </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 601                     for (ItemInfo item : tmpWorkspaceItems) {                                                      </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 602                         item.unbind();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603                     }                                                                                              </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 604                     for (ItemInfo item : tmpAppWidgets) {                                                          </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 605                         item.unbind();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                     }                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 608              };                                                                                                    </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 609          runOnMainThread(r);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610      }                                                                                                             </span>
<span  style=""> 611                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 612      /**                                                                                                           </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 613       * Adds an item to the DB if it was not created previously, or move it to a new                               </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 614       * &lt;container, screen, cellX, cellY&gt;                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 615       */                                                                                                           </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 616      static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                           </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 617              long screenId, int cellX, int cellY) {                                                                </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 618          if (item.container == ItemInfo.NO_ID) {                                                                   </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 619              // From all apps                                                                                      </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 620              addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 621          } else {                                                                                                  </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 622              // From somewhere else                                                                                </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 623              moveItemInDatabase(context, item, container, screenId, cellX, cellY);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625      }                                                                                                             </span>
<span  style=""> 626                                                                                                                    </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 627      static void checkItemInfoLocked(                                                                              </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 628              final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                             </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 629          ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                           </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 630          if (modelItem != null &amp;&amp; item != modelItem) {                                                             </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 631              // check all the data is consistent                                                                   </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 632              if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                              </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 633                  ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                            </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 634                  ShortcutInfo shortcut = (ShortcutInfo) item;                                                      </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 635                  if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                           </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 636                          modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                                     </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 637                          modelShortcut.id == shortcut.id &amp;&amp;                                                        </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 638                          modelShortcut.itemType == shortcut.itemType &amp;&amp;                                            </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 639                          modelShortcut.container == shortcut.container &amp;&amp;                                          </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 640                          modelShortcut.screenId == shortcut.screenId &amp;&amp;                                            </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 641                          modelShortcut.cellX == shortcut.cellX &amp;&amp;                                                  </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 642                          modelShortcut.cellY == shortcut.cellY &amp;&amp;                                                  </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 643                          modelShortcut.spanX == shortcut.spanX &amp;&amp;                                                  </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 644                          modelShortcut.spanY == shortcut.spanY &amp;&amp;                                                  </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 645                          ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                           </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 646                          (modelShortcut.dropPos != null &amp;&amp;                                                         </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 647                                  shortcut.dropPos != null &amp;&amp;                                                       </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 648                                  modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                                </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 649                          modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                                      </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 650                      // For all intents and purposes, this is the same object                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 651                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653              }                                                                                                     </span>
<span  style=""> 654                                                                                                                    </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 655              // the modelItem needs to match up perfectly with item if our model is                                </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 656              // to be consistent with the database-- for now, just require                                         </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 657              // modelItem == item or the equality check above                                                      </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 658              String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                                 </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 659                      &quot;modelItem: &quot; +                                                                               </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 660                      ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                                       </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 661                      &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                             </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 662              RuntimeException e = new RuntimeException(msg);                                                       </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 663              if (stackTrace != null) {                                                                             </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 664                  e.setStackTrace(stackTrace);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665              }                                                                                                     </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 666              throw e;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668      }                                                                                                             </span>
<span  style=""> 669                                                                                                                    </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 670      static void checkItemInfo(final ItemInfo item) {                                                              </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 671          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 672          final long itemId = item.id;                                                                              </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 673          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 674              public void run() {                                                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 675                  synchronized (sBgLock) {                                                                          </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 676                      checkItemInfoLocked(itemId, item, stackTrace);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 679          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 680          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681      }                                                                                                             </span>
<span  style=""> 682                                                                                                                    </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 683      static void updateItemInDatabaseHelper(Context context, final ContentValues values,                           </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 684              final ItemInfo item, final String callingFunction) {                                                  </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 685          final long itemId = item.id;                                                                              </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 686          final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                                  </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 687          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style=""> 688                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 689          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 690          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 691              public void run() {                                                                                   </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 692                  cr.update(uri, values, null, null);                                                               </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 693                  updateItemArrays(item, itemId, stackTrace);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 695          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 696          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697      }                                                                                                             </span>
<span  style=""> 698                                                                                                                    </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 699      static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,           </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 700              final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                                      </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 701          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style=""> 702                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 703          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 704          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 705              public void run() {                                                                                   </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 706                  ArrayList&lt;ContentProviderOperation&gt; ops =                                                         </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 707                          new ArrayList&lt;ContentProviderOperation&gt;();                                                </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 708                  int count = items.size();                                                                         </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 709                  for (int i = 0; i &lt; count; i++) {                                                                 </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 710                      ItemInfo item = items.get(i);                                                                 </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 711                      final long itemId = item.id;                                                                  </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 712                      final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                      </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 713                      ContentValues values = valuesList.get(i);                                                     </span>
<span  style=""> 714                                                                                                                    </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 715                      ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());                  </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 716                      updateItemArrays(item, itemId, stackTrace);                                                   </span>
<span  style=""> 717                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718                  }                                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 719                  try {                                                                                             </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 720                      cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 721                  } catch (Exception e) {                                                                           </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 722                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 725          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 726          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727      }                                                                                                             </span>
<span  style=""> 728                                                                                                                    </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 729      static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 730          // Lock on mBgLock *after* the db operation                                                               </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 731          synchronized (sBgLock) {                                                                                  </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 732              checkItemInfoLocked(itemId, item, stackTrace);                                                        </span>
<span  style=""> 733                                                                                                                    </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 734              if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                                 </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 735                      item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 736                  // Item is in a folder, make sure this folder exists                                              </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 737                  if (!sBgFolders.containsKey(item.container)) {                                                    </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 738                      // An items container is being set to a that of an item which is not in                       </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 739                      // the list of Folders.                                                                       </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 740                      String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                                  </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 741                              item.container + &quot;, not in the list of folders&quot;;                                      </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 742                      Log.e(TAG, msg);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 743                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744              }                                                                                                     </span>
<span  style=""> 745                                                                                                                    </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 746              // Items are added/removed from the corresponding FolderInfo elsewhere, such                          </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 747              // as in Workspace.onDrop. Here, we just add/remove them from the list of items                       </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 748              // that are on the desktop, as appropriate                                                            </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 749              ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                       </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 750              if (modelItem != null &amp;&amp;                                                                              </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 751                      (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||                       </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 752                       modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {                      </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 753                  switch (modelItem.itemType) {                                                                     </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 754                      case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                        </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 755                      case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                           </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 756                      case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                             </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 757                          if (!sBgWorkspaceItems.contains(modelItem)) {                                             </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 758                              sBgWorkspaceItems.add(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 759                          }                                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 760                          break;                                                                                    </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 761                      default:                                                                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 762                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 764              } else {                                                                                              </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 765                  sBgWorkspaceItems.remove(modelItem);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768      }                                                                                                             </span>
<span  style=""> 769                                                                                                                    </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 770      public void flushWorkerThread() {                                                                             </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 771          mFlushingWorkerThread = true;                                                                             </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 772          Runnable waiter = new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 773                  public void run() {                                                                               </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 774                      synchronized (this) {                                                                         </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 775                          notifyAll();                                                                              </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 776                          mFlushingWorkerThread = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 779              };                                                                                                    </span>
<span  style=""> 780                                                                                                                    </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 781          synchronized(waiter) {                                                                                    </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 782              runOnWorkerThread(waiter);                                                                            </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 783              if (mLoaderTask != null) {                                                                            </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 784                  synchronized(mLoaderTask) {                                                                       </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 785                      mLoaderTask.notify();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787              }                                                                                                     </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 788              boolean success = false;                                                                              </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 789              while (!success) {                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 790                  try {                                                                                             </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 791                      waiter.wait();                                                                                </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 792                      success = true;                                                                               </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 793                  } catch (InterruptedException e) {                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797      }                                                                                                             </span>
<span  style=""> 798                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 799      /**                                                                                                           </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 800       * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 801       */                                                                                                           </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 802      static void moveItemInDatabase(Context context, final ItemInfo item, final long container,                    </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 803              final long screenId, final int cellX, final int cellY) {                                              </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 804          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 805          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 806          item.cellY = cellY;                                                                                       </span>
<span  style=""> 807                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 808          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 809          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 810          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 811                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 812              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 813          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 814              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815          }                                                                                                         </span>
<span  style=""> 816                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 817          final ContentValues values = new ContentValues();                                                         </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 818          values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                         </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 819          values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                                 </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 820          values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                                 </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 821          values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                             </span>
<span  style=""> 822                                                                                                                    </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 823          updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824      }                                                                                                             </span>
<span  style=""> 825                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 826      /**                                                                                                           </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 827       * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the                        </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 828       * cellX, cellY have already been updated on the ItemInfos.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 829       */                                                                                                           </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 830      static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                             </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 831              final long container, final int screen) {                                                             </span>
<span  style=""> 832                                                                                                                    </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 833          ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                                  </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 834          int count = items.size();                                                                                 </span>
<span  style=""> 835                                                                                                                    </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 836          for (int i = 0; i &lt; count; i++) {                                                                         </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 837              ItemInfo item = items.get(i);                                                                         </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 838              item.container = container;                                                                           </span>
<span  style=""> 839                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 840              // We store hotseat items in canonical form which is this orientation invariant position              </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 841              // in the hotseat                                                                                     </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 842              if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                                      </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 843                      container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                  </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 844                  item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,                   </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 845                          item.cellY);                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 846              } else {                                                                                              </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 847                  item.screenId = screen;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848              }                                                                                                     </span>
<span  style=""> 849                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 850              final ContentValues values = new ContentValues();                                                     </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 851              values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                     </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 852              values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                             </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 853              values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                             </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 854              values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                         </span>
<span  style=""> 855                                                                                                                    </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 856              contentValues.add(values);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857          }                                                                                                         </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 858          updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859      }                                                                                                             </span>
<span  style=""> 860                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 861      /**                                                                                                           </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 862       * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 863       */                                                                                                           </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 864      static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,                  </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 865              final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {            </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 866          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 867          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 868          item.cellY = cellY;                                                                                       </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 869          item.spanX = spanX;                                                                                       </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 870          item.spanY = spanY;                                                                                       </span>
<span  style=""> 871                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 872          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 873          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 874          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 875                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 876              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 877          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 878              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879          }                                                                                                         </span>
<span  style=""> 880                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 881          final ContentValues values = new ContentValues();                                                         </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 882          values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                         </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 883          values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                                 </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 884          values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                                 </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 885          values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                                 </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 886          values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                                 </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 887          values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                             </span>
<span  style=""> 888                                                                                                                    </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 889          updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890      }                                                                                                             </span>
<span  style=""> 891                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 892      /**                                                                                                           </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 893       * Update an item to the database in a specified container.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 894       */                                                                                                           </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 895      static void updateItemInDatabase(Context context, final ItemInfo item) {                                      </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 896          final ContentValues values = new ContentValues();                                                         </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 897 -        item.onAddToDatabase(values);                                                                             </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 898 +        item.onAddToDatabase(context, values);                                                                    </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 899          item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                         </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 900          updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901      }                                                                                                             </span>
<span  style=""> 902                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 903      /**                                                                                                           </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 904       * Returns true if the shortcuts already exists in the database.                                              </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 905       * we identify a shortcut by its title and intent.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 906       */                                                                                                           </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 907      static boolean shortcutExists(Context context, String title, Intent intent) {                                 </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 908          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-4175900686448469518" onmouseenter="enter('-4175900686448469518');" onmouseout="out('-4175900686448469518');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 909 +        final Intent intentWithPkg, intentWithoutPkg;                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 910 +                                                                                                                  </span>
<span class="-1192314096420314309" onmouseenter="enter('-1192314096420314309');" onmouseout="out('-1192314096420314309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 911 +        if (intent.getComponent() != null) {                                                                      </span>
<span class="5013412415263932655" onmouseenter="enter('5013412415263932655');" onmouseout="out('5013412415263932655');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 912 +            // If component is not null, an intent with null package will produce                                 </span>
<span class="-2056261929714512728" onmouseenter="enter('-2056261929714512728');" onmouseout="out('-2056261929714512728');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 913 +            // the same result and should also be a match.                                                        </span>
<span class="8293829844581049791" onmouseenter="enter('8293829844581049791');" onmouseout="out('8293829844581049791');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 914 +            if (intent.getPackage() != null) {                                                                    </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 915 +                intentWithPkg = intent;                                                                           </span>
<span class="302721143002808724" onmouseenter="enter('302721143002808724');" onmouseout="out('302721143002808724');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 916 +                intentWithoutPkg = new Intent(intent).setPackage(null);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 917 +            } else {                                                                                              </span>
<span class="411509146924686636" onmouseenter="enter('411509146924686636');" onmouseout="out('411509146924686636');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 918 +                intentWithPkg = new Intent(intent).setPackage(                                                    </span>
<span class="-8194702512537292868" onmouseenter="enter('-8194702512537292868');" onmouseout="out('-8194702512537292868');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 919 +                        intent.getComponent().getPackageName());                                                  </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 920 +                intentWithoutPkg = intent;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 921 +            }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 922 +        } else {                                                                                                  </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 923 +            intentWithPkg = intent;                                                                               </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 924 +            intentWithoutPkg = intent;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 925 +        }                                                                                                         </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 926          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                               </span>
<span class="-3970764614423238561" onmouseenter="enter('-3970764614423238561');" onmouseout="out('-3970764614423238561');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 927 -            new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and intent=?&quot;,                                           </span>
<span class="-8386684562645849198" onmouseenter="enter('-8386684562645849198');" onmouseout="out('-8386684562645849198');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 928 -            new String[] { title, intent.toUri(0) }, null);                                                       </span>
<span class="-6373969991306358457" onmouseenter="enter('-6373969991306358457');" onmouseout="out('-6373969991306358457');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 929 +            new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and (intent=? or intent=?)&quot;,                             </span>
<span class="-338282616399686930" onmouseenter="enter('-338282616399686930');" onmouseout="out('-338282616399686930');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 930 +            new String[] { title, intentWithPkg.toUri(0), intentWithoutPkg.toUri(0) }, null);                     </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 931          boolean result = false;                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 932          try {                                                                                                     </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 933              result = c.moveToFirst();                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 934          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 935              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936          }                                                                                                         </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 937          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 938 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 939 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 940 +    /**                                                                                                           </span>
<span class="2522962036775885267" onmouseenter="enter('2522962036775885267');" onmouseout="out('2522962036775885267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 941 +     * Returns true if the promise shortcuts with the same package name exists on the workspace.                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 942 +     */                                                                                                           </span>
<span class="-6588164927851751704" onmouseenter="enter('-6588164927851751704');" onmouseout="out('-6588164927851751704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 943 +    static boolean appWasPromise(Context context, Intent intent, UserHandleCompat user) {                         </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 944 +        final ComponentName component = intent.getComponent();                                                    </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 945 +        if (component == null) {                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 946 +            return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 947 +        }                                                                                                         </span>
<span class="-5254167698548486612" onmouseenter="enter('-5254167698548486612');" onmouseout="out('-5254167698548486612');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 948 +        return !getItemsByPackageName(component.getPackageName(), user).isEmpty();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949      }                                                                                                             </span>
<span  style=""> 950                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 951      /**                                                                                                           </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 952       * Returns an ItemInfo array containing all the items in the LauncherModel.                                   </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 953       * The ItemInfo.id is not set through this function.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 954       */                                                                                                           </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 955      static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                                      </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 956          ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                                    </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 957          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 958          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                                </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 959                  LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,                       </span>
<span class="-6654705994324280685" onmouseenter="enter('-6654705994324280685');" onmouseout="out('-6654705994324280685');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 960 -                LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,"> 960 -                LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CE</abbr></span>
<span class="-8466015049460674478" onmouseenter="enter('-8466015049460674478');" onmouseout="out('-8466015049460674478');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 961 -                LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY }, null, null, null);          </span>
<span class="-5597662442381403391" onmouseenter="enter('-5597662442381403391');" onmouseout="out('-5597662442381403391');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 962 +                LauncherSettings.Favorites.SCREEN,                                                                </span>
<span class="-2919624041508816442" onmouseenter="enter('-2919624041508816442');" onmouseout="out('-2919624041508816442');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 963 +                LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,                               </span>
<span class="-6977762317278061139" onmouseenter="enter('-6977762317278061139');" onmouseout="out('-6977762317278061139');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 964 +                LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY,                               </span>
<span class="-7245839497619612656" onmouseenter="enter('-7245839497619612656');" onmouseout="out('-7245839497619612656');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 965 +                LauncherSettings.Favorites.PROFILE_ID }, null, null, null);                                       </span>
<span  style=""> 966                                                                                                                    </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 967          final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);                  </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 968          final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);                 </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 969          final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);                       </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 970          final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                         </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 971          final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                         </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 972          final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                         </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 973          final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 974 -                                                                                                                  </span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 975 +        final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);                </span>
<span class="4378196374401845990" onmouseenter="enter('4378196374401845990');" onmouseout="out('4378196374401845990');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 976 +        UserManagerCompat userManager = UserManagerCompat.getInstance(context);                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 977          try {                                                                                                     </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 978              while (c.moveToNext()) {                                                                              </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 979                  ItemInfo item = new ItemInfo();                                                                   </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 980                  item.cellX = c.getInt(cellXIndex);                                                                </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 981                  item.cellY = c.getInt(cellYIndex);                                                                </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 982                  item.spanX = Math.max(1, c.getInt(spanXIndex));                                                   </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 983                  item.spanY = Math.max(1, c.getInt(spanYIndex));                                                   </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 984                  item.container = c.getInt(containerIndex);                                                        </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 985                  item.itemType = c.getInt(itemTypeIndex);                                                          </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 986                  item.screenId = c.getInt(screenIndex);                                                            </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 987 -                                                                                                                  </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 988 -                items.add(item);                                                                                  </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 989 +                long serialNumber = c.getInt(profileIdIndex);                                                     </span>
<span class="8590899978146640866" onmouseenter="enter('8590899978146640866');" onmouseout="out('8590899978146640866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 990 +                item.user = userManager.getUserForSerialNumber(serialNumber);                                     </span>
<span class="-2267817568611630151" onmouseenter="enter('-2267817568611630151');" onmouseout="out('-2267817568611630151');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 991 +                // Skip if user has been deleted.                                                                 </span>
<span class="-8057177251913525905" onmouseenter="enter('-8057177251913525905');" onmouseout="out('-8057177251913525905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 992 +                if (item.user != null) {                                                                          </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 993 +                    items.add(item);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 994 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 996          } catch (Exception e) {                                                                                   </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 997              items.clear();                                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 998          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 999              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000          }                                                                                                         </span>
<span  style="">1001                                                                                                                    </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style="">1002          return items;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003      }                                                                                                             </span>
<span  style="">1004                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1005      /**                                                                                                           </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style="">1006       * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1007       */                                                                                                           </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style="">1008      FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {                     </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1009          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style="">1010          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                         </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style="">1011                  &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                           </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style="">1012                  new String[] { String.valueOf(id),                                                                </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style="">1013                          String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);                      </span>
<span  style="">1014                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1015          try {                                                                                                     </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style="">1016              if (c.moveToFirst()) {                                                                                </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style="">1017                  final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);          </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style="">1018                  final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);                 </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style="">1019                  final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);         </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1020                  final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);               </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1021                  final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                 </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1022                  final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                 </span>
<span  style="">1023                                                                                                                    </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style="">1024                  FolderInfo folderInfo = null;                                                                     </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style="">1025                  switch (c.getInt(itemTypeIndex)) {                                                                </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1026                      case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                             </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style="">1027                          folderInfo = findOrMakeFolder(folderList, id);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1028                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029                  }                                                                                                 </span>
<span  style="">1030                                                                                                                    </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1031                  folderInfo.title = c.getString(titleIndex);                                                       </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1032                  folderInfo.id = id;                                                                               </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style="">1033                  folderInfo.container = c.getInt(containerIndex);                                                  </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1034                  folderInfo.screenId = c.getInt(screenIndex);                                                      </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1035                  folderInfo.cellX = c.getInt(cellXIndex);                                                          </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1036                  folderInfo.cellY = c.getInt(cellYIndex);                                                          </span>
<span  style="">1037                                                                                                                    </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">1038                  return folderInfo;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039              }                                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1040          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1041              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042          }                                                                                                         </span>
<span  style="">1043                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1044          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045      }                                                                                                             </span>
<span  style="">1046                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1047      /**                                                                                                           </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style="">1048       * Add an item to the database in a specified container. Sets the container, screen, cellX and                </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style="">1049       * cellY fields of the item. Also assigns an ID to the item.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1050       */                                                                                                           </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style="">1051      static void addItemToDatabase(Context context, final ItemInfo item, final long container,                     </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style="">1052              final long screenId, final int cellX, final int cellY, final boolean notify) {                        </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1053          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style="">1054          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style="">1055          item.cellY = cellY;                                                                                       </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1056          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1057          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style="">1058          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1059                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style="">1060              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1061          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style="">1062              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063          }                                                                                                         </span>
<span  style="">1064                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1065          final ContentValues values = new ContentValues();                                                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1066          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1067 -        item.onAddToDatabase(values);                                                                             </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1068 +        item.onAddToDatabase(context, values);                                                                    </span>
<span  style="">1069                                                                                                                    </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style="">1070          item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                                     </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style="">1071          values.put(LauncherSettings.Favorites._ID, item.id);                                                      </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style="">1072          item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                         </span>
<span  style="">1073                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1074 +        final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1075          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1076              public void run() {                                                                                   </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style="">1077                  cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                                       </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style="">1078                          LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                          </span>
<span  style="">1079                                                                                                                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1080                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1081                  synchronized (sBgLock) {                                                                          </span>
<span class="7042391537046657417" onmouseenter="enter('7042391537046657417');" onmouseout="out('7042391537046657417');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1082 -                    checkItemInfoLocked(item.id, item, null);                                                     </span>
<span class="-4593486021211754382" onmouseenter="enter('-4593486021211754382');" onmouseout="out('-4593486021211754382');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1083 +                    checkItemInfoLocked(item.id, item, stackTrace);                                               </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style="">1084                      sBgItemsIdMap.put(item.id, item);                                                             </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1085                      switch (item.itemType) {                                                                      </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1086                          case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                         </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style="">1087                              sBgFolders.put(item.id, (FolderInfo) item);                                           </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">1088                              // Fall through                                                                       </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1089                          case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                    </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1090                          case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                       </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style="">1091                              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||                 </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style="">1092                                      item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style="">1093                                  sBgWorkspaceItems.add(item);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1094                              } else {                                                                              </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style="">1095                                  if (!sBgFolders.containsKey(item.container)) {                                    </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style="">1096                                      // Adding an item to a folder that doesn&#x27;t exist.                             </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style="">1097                                      String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +                  </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style="">1098                                              &quot; doesn&#x27;t exist&quot;;                                                     </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1099                                      Log.e(TAG, msg);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101                              }                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1102                              break;                                                                                </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1103                          case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                      </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style="">1104                              sBgAppWidgets.add((LauncherAppWidgetInfo) item);                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1105                              break;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1109          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1110          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111      }                                                                                                             </span>
<span  style="">1112                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1113      /**                                                                                                           </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style="">1114       * Creates a new unique child id, for a given cell span across all layouts.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1115       */                                                                                                           </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1116      static int getCellLayoutChildId(                                                                              </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1117              long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {                  </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1118          return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                                   </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1119                  | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120      }                                                                                                             </span>
<span  style="">1121                                                                                                                    </span>
<span class="-2977858468662335030" onmouseenter="enter('-2977858468662335030');" onmouseout="out('-2977858468662335030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1122 +    private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(                                                     </span>
<span class="-4648411385517347510" onmouseenter="enter('-4648411385517347510');" onmouseout="out('-4648411385517347510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1123 +            final String pn, final UserHandleCompat user) {                                                       </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1124 +        ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1125 +            @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1126 +            public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="-3698999064980760147" onmouseenter="enter('-3698999064980760147');" onmouseout="out('-3698999064980760147');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1127 +                return cn.getPackageName().equals(pn) &amp;&amp; info.user.equals(user);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1128 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1129 +        };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1130 +        return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1131 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1132 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1133 +    /**                                                                                                           </span>
<span class="2342361889363691922" onmouseenter="enter('2342361889363691922');" onmouseout="out('2342361889363691922');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1134 +     * Removes all the items from the database corresponding to the specified package.                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1135 +     */                                                                                                           </span>
<span class="-4223841609537991203" onmouseenter="enter('-4223841609537991203');" onmouseout="out('-4223841609537991203');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1136 +    static void deletePackageFromDatabase(Context context, final String pn,                                       </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1137 +            final UserHandleCompat user) {                                                                        </span>
<span class="-3124051924336649718" onmouseenter="enter('-3124051924336649718');" onmouseout="out('-3124051924336649718');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1138 +        deleteItemsFromDatabase(context, getItemsByPackageName(pn, user));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1139 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1140 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1141      /**                                                                                                           </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1142       * Removes the specified item from the database                                                               </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1143       * @param context                                                                                             </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1144       * @param item                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1145       */                                                                                                           </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1146      static void deleteItemFromDatabase(Context context, final ItemInfo item) {                                    </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1147 +        ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                                    </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1148 +        items.add(item);                                                                                          </span>
<span class="-1343420386438024026" onmouseenter="enter('-1343420386438024026');" onmouseout="out('-1343420386438024026');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1149 +        deleteItemsFromDatabase(context, items);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1150 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1151 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1152 +    /**                                                                                                           </span>
<span class="6785840277050217586" onmouseenter="enter('6785840277050217586');" onmouseout="out('6785840277050217586');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1153 +     * Removes the specified items from the database                                                              </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1154 +     * @param context                                                                                             </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1155 +     * @param item                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1156 +     */                                                                                                           </span>
<span class="8840034600723804424" onmouseenter="enter('8840034600723804424');" onmouseout="out('8840034600723804424');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1157 +    static void deleteItemsFromDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items) {                       </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1158          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-8662622705024005942" onmouseenter="enter('-8662622705024005942');" onmouseout="out('-8662622705024005942');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1159 -        final Uri uriToDelete = LauncherSettings.Favorites.getContentUri(item.id, false);                         </span>
<span  style="">1160                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1161          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1162              public void run() {                                                                                   </span>
<span class="5853003155754312383" onmouseenter="enter('5853003155754312383');" onmouseout="out('5853003155754312383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1163 -                cr.delete(uriToDelete, null, null);                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1164 -                                                                                                                  </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1165 -                // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1166 -                synchronized (sBgLock) {                                                                          </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1167 -                    switch (item.itemType) {                                                                      </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1168 -                        case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                         </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1169 -                            sBgFolders.remove(item.id);                                                           </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1170 -                            for (ItemInfo info: sBgItemsIdMap.values()) {                                         </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1171 -                                if (info.container == item.id) {                                                  </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1172 -                                    // We are deleting a folder which still contains items that                   </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1173 -                                    // think they are contained by that folder.                                   </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1174 -                                    String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +                </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1175 -                                            &quot;contains items (&quot; + info + &quot;)&quot;;                                      </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1176 -                                    Log.e(TAG, msg);                                                              </span>
<span class="6119320427209693879" onmouseenter="enter('6119320427209693879');" onmouseout="out('6119320427209693879');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1177 +                for (ItemInfo item : items) {                                                                     </span>
<span class="-8969008621964178653" onmouseenter="enter('-8969008621964178653');" onmouseout="out('-8969008621964178653');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1178 +                    final Uri uri = LauncherSettings.Favorites.getContentUri(item.id, false);                     </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1179 +                    cr.delete(uri, null, null);                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1180 +                                                                                                                  </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1181 +                    // Lock on mBgLock *after* the db operation                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1182 +                    synchronized (sBgLock) {                                                                      </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1183 +                        switch (item.itemType) {                                                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1184 +                            case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                     </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1185 +                                sBgFolders.remove(item.id);                                                       </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1186 +                                for (ItemInfo info: sBgItemsIdMap.values()) {                                     </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1187 +                                    if (info.container == item.id) {                                              </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1188 +                                        // We are deleting a folder which still contains items that               </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1189 +                                        // think they are contained by that folder.                               </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1190 +                                        String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +            </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1191 +                                                &quot;contains items (&quot; + info + &quot;)&quot;;                                  </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1192 +                                        Log.e(TAG, msg);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1193 +                                    }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1195 -                            }                                                                                     </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1196 -                            sBgWorkspaceItems.remove(item);                                                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1197 -                            break;                                                                                </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1198 -                        case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                    </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1199 -                        case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                       </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1200 -                            sBgWorkspaceItems.remove(item);                                                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1201 -                            break;                                                                                </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1202 -                        case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                      </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1203 -                            sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1204 -                            break;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1205 -                    }                                                                                             </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1206 -                    sBgItemsIdMap.remove(item.id);                                                                </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1207 -                    sBgDbIconCache.remove(item);                                                                  </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1208 +                                sBgWorkspaceItems.remove(item);                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1209 +                                break;                                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1210 +                            case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1211 +                            case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                   </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1212 +                                sBgWorkspaceItems.remove(item);                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1213 +                                break;                                                                            </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1214 +                            case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                  </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1215 +                                sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1216 +                                break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1217 +                        }                                                                                         </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1218 +                        sBgItemsIdMap.remove(item.id);                                                            </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1219 +                        sBgDbIconCache.remove(item);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1220 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1222              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1223          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1224          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225      }                                                                                                             </span>
<span  style="">1226                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1227      /**                                                                                                           </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1228       * Update the order of the workspace screens in the database. The array list contains                         </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1229       * a list of screen ids in the order that they should appear.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1230       */                                                                                                           </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1231      void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                             </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1232          // Log to disk                                                                                            </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1233          Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                                </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1234          Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);                 </span>
<span  style="">1235                                                                                                                    </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1236          final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1237          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1238          final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                            </span>
<span  style="">1239                                                                                                                    </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1240          // Remove any negative screen ids -- these aren&#x27;t persisted                                               </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1241          Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                             </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1242          while (iter.hasNext()) {                                                                                  </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1243              long id = iter.next();                                                                                </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1244              if (id &lt; 0) {                                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1245                  iter.remove();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247          }                                                                                                         </span>
<span  style="">1248                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1249          Runnable r = new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1250              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1251              public void run() {                                                                                   </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1252 +                ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();              </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1253                  // Clear the table                                                                                </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1254 -                cr.delete(uri, null, null);                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1255 +                ops.add(ContentProviderOperation.newDelete(uri).build());                                         </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1256                  int count = screensCopy.size();                                                                   </span>
<span class="213503502164793539" onmouseenter="enter('213503502164793539');" onmouseout="out('213503502164793539');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1257 -                ContentValues[] values = new ContentValues[count];                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1258                  for (int i = 0; i &lt; count; i++) {                                                                 </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1259                      ContentValues v = new ContentValues();                                                        </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1260                      long screenId = screensCopy.get(i);                                                           </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1261                      v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                                       </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1262                      v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                                      </span>
<span class="7040749013360700760" onmouseenter="enter('7040749013360700760');" onmouseout="out('7040749013360700760');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1263 -                    values[i] = v;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1264 -                }                                                                                                 </span>
<span class="454689009614459681" onmouseenter="enter('454689009614459681');" onmouseout="out('454689009614459681');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1265 -                cr.bulkInsert(uri, values);                                                                       </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1266 +                    ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1267 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1268 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1269 +                try {                                                                                             </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1270 +                    cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                               </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1271 +                } catch (Exception ex) {                                                                          </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1272 +                    throw new RuntimeException(ex);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1273 +                }                                                                                                 </span>
<span  style="">1274                                                                                                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1275                  synchronized (sBgLock) {                                                                          </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1276                      sBgWorkspaceScreens.clear();                                                                  </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1277                      sBgWorkspaceScreens.addAll(screensCopy);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1280          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1281          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282      }                                                                                                             </span>
<span  style="">1283                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1284      /**                                                                                                           </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1285       * Remove the contents of the specified folder from the database                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1286       */                                                                                                           </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1287      static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1288          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style="">1289                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1290          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1291              public void run() {                                                                                   </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1292                  cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);                  </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1293                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1294                  synchronized (sBgLock) {                                                                          </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1295                      sBgItemsIdMap.remove(info.id);                                                                </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1296                      sBgFolders.remove(info.id);                                                                   </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1297                      sBgDbIconCache.remove(info);                                                                  </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1298                      sBgWorkspaceItems.remove(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299                  }                                                                                                 </span>
<span  style="">1300                                                                                                                    </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1301                  cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                                 </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1302                          LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                              </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1303                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1304                  synchronized (sBgLock) {                                                                          </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1305                      for (ItemInfo childInfo : info.contents) {                                                    </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1306                          sBgItemsIdMap.remove(childInfo.id);                                                       </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1307                          sBgDbIconCache.remove(childInfo);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1310              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1311          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1312          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313      }                                                                                                             </span>
<span  style="">1314                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1315      /**                                                                                                           </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1316       * Set this as the current Launcher activity object for the loader.                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1317       */                                                                                                           </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1318      public void initialize(Callbacks callbacks) {                                                                 </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1319          synchronized (mLock) {                                                                                    </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1320              mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1322      }                                                                                                             </span>
<span  style="">1323                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1324 +    @Override                                                                                                     </span>
<span class="-2337875492294712218" onmouseenter="enter('-2337875492294712218');" onmouseout="out('-2337875492294712218');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1325 +    public void onPackageChanged(String packageName, UserHandleCompat user) {                                     </span>
<span class="4778571821882595512" onmouseenter="enter('4778571821882595512');" onmouseout="out('4778571821882595512');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1326 +        int op = PackageUpdatedTask.OP_UPDATE;                                                                    </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1327 +        enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                            </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1328 +                user));                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1329 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1330 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1331 +    @Override                                                                                                     </span>
<span class="-927554855118637848" onmouseenter="enter('-927554855118637848');" onmouseout="out('-927554855118637848');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1332 +    public void onPackageRemoved(String packageName, UserHandleCompat user) {                                     </span>
<span class="-8281859875413044704" onmouseenter="enter('-8281859875413044704');" onmouseout="out('-8281859875413044704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1333 +        int op = PackageUpdatedTask.OP_REMOVE;                                                                    </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1334 +        enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                            </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1335 +                user));                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1336 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1337 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1338 +    @Override                                                                                                     </span>
<span class="105632639707841197" onmouseenter="enter('105632639707841197');" onmouseout="out('105632639707841197');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1339 +    public void onPackageAdded(String packageName, UserHandleCompat user) {                                       </span>
<span class="4828685442078193889" onmouseenter="enter('4828685442078193889');" onmouseout="out('4828685442078193889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1340 +        int op = PackageUpdatedTask.OP_ADD;                                                                       </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1341 +        enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                            </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1342 +                user));                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1343 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1344 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1345 +    @Override                                                                                                     </span>
<span class="-5272203289606218807" onmouseenter="enter('-5272203289606218807');" onmouseout="out('-5272203289606218807');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1346 +    public void onPackagesAvailable(String[] packageNames, UserHandleCompat user,                                 </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1347 +            boolean replacing) {                                                                                  </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1348 +        if (!replacing) {                                                                                         </span>
<span class="5127769788151278220" onmouseenter="enter('5127769788151278220');" onmouseout="out('5127769788151278220');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1349 +            enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packageNames,                 </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1350 +                    user));                                                                                       </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1351 +            if (mAppsCanBeOnRemoveableStorage) {                                                                  </span>
<span class="-2089495423111974436" onmouseenter="enter('-2089495423111974436');" onmouseout="out('-2089495423111974436');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1352 +                // Only rebind if we support removable storage. It catches the                                    </span>
<span class="3966636659656955596" onmouseenter="enter('3966636659656955596');" onmouseout="out('3966636659656955596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1353 +                // case where                                                                                     </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1354 +                // apps on the external sd card need to be reloaded                                               </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1355 +                startLoaderFromBackground();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1356 +            }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1357 +        } else {                                                                                                  </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1358 +            // If we are replacing then just update the packages in the list                                      </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1359 +            enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                            </span>
<span class="-8173810846920498048" onmouseenter="enter('-8173810846920498048');" onmouseout="out('-8173810846920498048');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1360 +                    packageNames, user));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1361 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1362 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1363 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1364 +    @Override                                                                                                     </span>
<span class="-3988876954819926239" onmouseenter="enter('-3988876954819926239');" onmouseout="out('-3988876954819926239');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1365 +    public void onPackagesUnavailable(String[] packageNames, UserHandleCompat user,                               </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1366 +            boolean replacing) {                                                                                  </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1367 +        if (!replacing) {                                                                                         </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1368 +            enqueuePackageUpdated(new PackageUpdatedTask(                                                         </span>
<span class="8606082806154374174" onmouseenter="enter('8606082806154374174');" onmouseout="out('8606082806154374174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1369 +                    PackageUpdatedTask.OP_UNAVAILABLE, packageNames,                                              </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1370 +                    user));                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1371 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1372 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1373 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1374 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1375      /**                                                                                                           </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1376       * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                                 </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1377       * ACTION_PACKAGE_CHANGED.                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1378       */                                                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1379      @Override                                                                                                     </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1380      public void onReceive(Context context, Intent intent) {                                                       </span>
<span class="-4567737324281428641" onmouseenter="enter('-4567737324281428641');" onmouseout="out('-4567737324281428641');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1381 -        if (DEBUG_LOADERS) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                              </span>
<span class="-5855592430187821970" onmouseenter="enter('-5855592430187821970');" onmouseout="out('-5855592430187821970');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1382 +        if (DEBUG_RECEIVER) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                             </span>
<span  style="">1383                                                                                                                    </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1384          final String action = intent.getAction();                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1385 -                                                                                                                  </span>
<span class="3248856724191643889" onmouseenter="enter('3248856724191643889');" onmouseout="out('3248856724191643889');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1386 -        if (Intent.ACTION_PACKAGE_CHANGED.equals(action)                                                          </span>
<span class="540624655569635000" onmouseenter="enter('540624655569635000');" onmouseout="out('540624655569635000');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1387 -                || Intent.ACTION_PACKAGE_REMOVED.equals(action)                                                   </span>
<span class="-2497532605624583235" onmouseenter="enter('-2497532605624583235');" onmouseout="out('-2497532605624583235');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1388 -                || Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                                  </span>
<span class="3043595781762965417" onmouseenter="enter('3043595781762965417');" onmouseout="out('3043595781762965417');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1389 -            final String packageName = intent.getData().getSchemeSpecificPart();                                  </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1390 -            final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1391 -                                                                                                                  </span>
<span class="8732681156431716097" onmouseenter="enter('8732681156431716097');" onmouseout="out('8732681156431716097');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1392 -            int op = PackageUpdatedTask.OP_NONE;                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1393 -                                                                                                                  </span>
<span class="226916516395269330" onmouseenter="enter('226916516395269330');" onmouseout="out('226916516395269330');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1394 -            if (packageName == null || packageName.length() == 0) {                                               </span>
<span class="6497011882963257234" onmouseenter="enter('6497011882963257234');" onmouseout="out('6497011882963257234');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1395 -                // they sent us a bad intent                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1396 -                return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1397 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1398 -                                                                                                                  </span>
<span class="-8410954317975616940" onmouseenter="enter('-8410954317975616940');" onmouseout="out('-8410954317975616940');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1399 -            if (Intent.ACTION_PACKAGE_CHANGED.equals(action)) {                                                   </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1400 -                op = PackageUpdatedTask.OP_UPDATE;                                                                </span>
<span class="-6129441538111285553" onmouseenter="enter('-6129441538111285553');" onmouseout="out('-6129441538111285553');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1401 -            } else if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {                                            </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1402 -                if (!replacing) {                                                                                 </span>
<span class="-6586396537735596399" onmouseenter="enter('-6586396537735596399');" onmouseout="out('-6586396537735596399');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1403 -                    op = PackageUpdatedTask.OP_REMOVE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1404 -                }                                                                                                 </span>
<span class="596194884408948956" onmouseenter="enter('596194884408948956');" onmouseout="out('596194884408948956');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1405 -                // else, we are replacing the package, so a PACKAGE_ADDED will be sent                            </span>
<span class="8848734407792838356" onmouseenter="enter('8848734407792838356');" onmouseout="out('8848734407792838356');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1406 -                // later, we will update the package at this time                                                 </span>
<span class="1584650074780198559" onmouseenter="enter('1584650074780198559');" onmouseout="out('1584650074780198559');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1407 -            } else if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                              </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1408 -                if (!replacing) {                                                                                 </span>
<span class="-8510632568607563672" onmouseenter="enter('-8510632568607563672');" onmouseout="out('-8510632568607563672');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1409 -                    op = PackageUpdatedTask.OP_ADD;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1410 -                } else {                                                                                          </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1411 -                    op = PackageUpdatedTask.OP_UPDATE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1412 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1413 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1414 -                                                                                                                  </span>
<span class="4401752612772195970" onmouseenter="enter('4401752612772195970');" onmouseout="out('4401752612772195970');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1415 -            if (op != PackageUpdatedTask.OP_NONE) {                                                               </span>
<span class="-3763042555791809504" onmouseenter="enter('-3763042555791809504');" onmouseout="out('-3763042555791809504');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1416 -                enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName }));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1417 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1418 -                                                                                                                  </span>
<span class="1438616399789326195" onmouseenter="enter('1438616399789326195');" onmouseout="out('1438616399789326195');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1419 -        } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action)) {                                </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1420 -            final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1421 -            String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);                    </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1422 -            if (!replacing) {                                                                                     </span>
<span class="8106264297457531305" onmouseenter="enter('8106264297457531305');" onmouseout="out('8106264297457531305');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1423 -                enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packages));               </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1424 -                if (mAppsCanBeOnRemoveableStorage) {                                                              </span>
<span class="-460878835460866964" onmouseenter="enter('-460878835460866964');" onmouseout="out('-460878835460866964');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1425 -                    // Only rebind if we support removable storage.  It catches the case where                    </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1426 -                    // apps on the external sd card need to be reloaded                                           </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1427 -                    startLoaderFromBackground();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1428 -                }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1429 -            } else {                                                                                              </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1430 -                // If we are replacing then just update the packages in the list                                  </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1431 -                enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                        </span>
<span class="-5628778258633473048" onmouseenter="enter('-5628778258633473048');" onmouseout="out('-5628778258633473048');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1432 -                        packages));                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1433 -            }                                                                                                     </span>
<span class="7043932659231673518" onmouseenter="enter('7043932659231673518');" onmouseout="out('7043932659231673518');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1434 -        } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {                              </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1435 -            final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1436 -            if (!replacing) {                                                                                     </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1437 -                String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);                </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1438 -                enqueuePackageUpdated(new PackageUpdatedTask(                                                     </span>
<span class="296372570783844091" onmouseenter="enter('296372570783844091');" onmouseout="out('296372570783844091');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1439 -                            PackageUpdatedTask.OP_UNAVAILABLE, packages));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1440 -            }                                                                                                     </span>
<span class="1575594556961394504" onmouseenter="enter('1575594556961394504');" onmouseout="out('1575594556961394504');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1441 -            // else, we are replacing the packages, so ignore this event and wait for                             </span>
<span class="-3059095335031402395" onmouseenter="enter('-3059095335031402395');" onmouseout="out('-3059095335031402395');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1442 -            // EXTERNAL_APPLICATIONS_AVAILABLE to update the packages at that time                                </span>
<span class="-2062230633944308548" onmouseenter="enter('-2062230633944308548');" onmouseout="out('-2062230633944308548');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1443 -        } else if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                                 </span>
<span class="2827193781436621695" onmouseenter="enter('2827193781436621695');" onmouseout="out('2827193781436621695');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1444 +        if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                                        </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1445              // If we have changed locale we need to clear out the labels in all apps/workspace.                   </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1446              forceReload();                                                                                        </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1447          } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                          </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1448               // Check if configuration change was an mcc/mnc change which would affect app resources              </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1449               // and we would need to clear out the labels in all apps/workspace. Same handling as                 </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1450               // above for ACTION_LOCALE_CHANGED                                                                   </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1451               Configuration currentConfig = context.getResources().getConfiguration();                             </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1452               if (mPreviousConfigMcc != currentConfig.mcc) {                                                       </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1453                     Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                           </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1454                         + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                                   </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1455                     forceReload();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456               }                                                                                                    </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1457               // Update previousConfig                                                                             </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1458               mPreviousConfigMcc = currentConfig.mcc;                                                              </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1459          } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                          </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1460                     SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                              </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1461              if (mCallbacks != null) {                                                                             </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1462                  Callbacks callbacks = mCallbacks.get();                                                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1463                  if (callbacks != null) {                                                                          </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1464                      callbacks.bindSearchablesChanged();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1467          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1468      }                                                                                                             </span>
<span  style="">1469                                                                                                                    </span>
<span class="-3490103774513517076" onmouseenter="enter('-3490103774513517076');" onmouseout="out('-3490103774513517076');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1470 -    private void forceReload() {                                                                                  </span>
<span class="-17594942140375151" onmouseenter="enter('-17594942140375151');" onmouseout="out('-17594942140375151');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1471 +    void forceReload() {                                                                                          </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1472          resetLoadedState(true, true);                                                                             </span>
<span  style="">1473                                                                                                                    </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1474          // Do this here because if the launcher activity is running it will be restarted.                         </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1475          // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs                        </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1476          // to reload.                                                                                             </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1477          startLoaderFromBackground();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478      }                                                                                                             </span>
<span  style="">1479                                                                                                                    </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1480      public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {                      </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1481          synchronized (mLock) {                                                                                    </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1482              // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                               </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1483              // mWorkspaceLoaded to true later                                                                     </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1484              stopLoaderLocked();                                                                                   </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1485              if (resetAllAppsLoaded) mAllAppsLoaded = false;                                                       </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1486              if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488      }                                                                                                             </span>
<span  style="">1489                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1490      /**                                                                                                           </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1491       * When the launcher is in the background, it&#x27;s possible for it to miss paired                                </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1492       * configuration changes.  So whenever we trigger the loader from the background                              </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1493       * tell the launcher that it needs to re-run the loader when it comes back instead                            </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1494       * of doing it now.                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1495       */                                                                                                           </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1496      public void startLoaderFromBackground() {                                                                     </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1497          boolean runLoader = false;                                                                                </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1498          if (mCallbacks != null) {                                                                                 </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1499              Callbacks callbacks = mCallbacks.get();                                                               </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1500              if (callbacks != null) {                                                                              </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1501                  // Only actually run the loader if they&#x27;re not paused.                                            </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1502                  if (!callbacks.setLoadOnResume()) {                                                               </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1503                      runLoader = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1506          }                                                                                                         </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1507          if (runLoader) {                                                                                          </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1508              startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510      }                                                                                                             </span>
<span  style="">1511                                                                                                                    </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1512      // If there is already a loader task running, tell it to stop.                                                </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1513      // returns true if isLaunching() was true on the old task                                                     </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1514      private boolean stopLoaderLocked() {                                                                          </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1515          boolean isLaunching = false;                                                                              </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1516          LoaderTask oldTask = mLoaderTask;                                                                         </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1517          if (oldTask != null) {                                                                                    </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1518              if (oldTask.isLaunching()) {                                                                          </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1519                  isLaunching = true;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1520              }                                                                                                     </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1521              oldTask.stopLocked();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522          }                                                                                                         </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1523          return isLaunching;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1524      }                                                                                                             </span>
<span  style="">1525                                                                                                                    </span>
<span class="-650602055294598310" onmouseenter="enter('-650602055294598310');" onmouseout="out('-650602055294598310');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1526 +    public boolean isCurrentCallbacks(Callbacks callbacks) {                                                      </span>
<span class="-2678194210930296625" onmouseenter="enter('-2678194210930296625');" onmouseout="out('-2678194210930296625');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1527 +        return (mCallbacks != null &amp;&amp; mCallbacks.get() == callbacks);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1528 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1529 +                                                                                                                  </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1530      public void startLoader(boolean isLaunching, int synchronousBindPage) {                                       </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1531          startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532      }                                                                                                             </span>
<span  style="">1533                                                                                                                    </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1534      public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1535          synchronized (mLock) {                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1536              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1537                  Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538              }                                                                                                     </span>
<span  style="">1539                                                                                                                    </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1540              // Clear any deferred bind-runnables from the synchronized load process                               </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1541              // We must do this before any loading/binding is scheduled below.                                     </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1542 -            mDeferredBindRunnables.clear();                                                                       </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1543 +            synchronized (mDeferredBindRunnables) {                                                               </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1544 +                mDeferredBindRunnables.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1545 +            }                                                                                                     </span>
<span  style="">1546                                                                                                                    </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1547              // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                          </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1548              if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                                 </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1549                  // If there is already one running, tell it to stop.                                              </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1550                  // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                                     </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1551                  isLaunching = isLaunching || stopLoaderLocked();                                                  </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1552                  mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                          </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1553                  if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                         </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1554                          &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                                  </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1555                      mLoaderTask.runBindSynchronousPage(synchronousBindPage);                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1556                  } else {                                                                                          </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1557                      sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                              </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1558                      sWorker.post(mLoaderTask);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1561          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1562      }                                                                                                             </span>
<span  style="">1563                                                                                                                    </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1564      void bindRemainingSynchronousPages() {                                                                        </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1565          // Post the remaining side pages to be loaded                                                             </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1566          if (!mDeferredBindRunnables.isEmpty()) {                                                                  </span>
<span class="5296695443187413802" onmouseenter="enter('5296695443187413802');" onmouseout="out('5296695443187413802');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1567 -            for (final Runnable r : mDeferredBindRunnables) {                                                     </span>
<span class="3864855355327062414" onmouseenter="enter('3864855355327062414');" onmouseout="out('3864855355327062414');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1568 +            Runnable[] deferredBindRunnables = null;                                                              </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1569 +            synchronized (mDeferredBindRunnables) {                                                               </span>
<span class="-7323371485266753329" onmouseenter="enter('-7323371485266753329');" onmouseout="out('-7323371485266753329');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1570 +                deferredBindRunnables = mDeferredBindRunnables.toArray(                                           </span>
<span class="-5228620787203084012" onmouseenter="enter('-5228620787203084012');" onmouseout="out('-5228620787203084012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1571 +                        new Runnable[mDeferredBindRunnables.size()]);                                             </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1572 +                mDeferredBindRunnables.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1573 +            }                                                                                                     </span>
<span class="-4818994596267375040" onmouseenter="enter('-4818994596267375040');" onmouseout="out('-4818994596267375040');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1574 +            for (final Runnable r : deferredBindRunnables) {                                                      </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1575                  mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576              }                                                                                                     </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1577 -            mDeferredBindRunnables.clear();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579      }                                                                                                             </span>
<span  style="">1580                                                                                                                    </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1581      public void stopLoader() {                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1582          synchronized (mLock) {                                                                                    </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1583              if (mLoaderTask != null) {                                                                            </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1584                  mLoaderTask.stopLocked();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587      }                                                                                                             </span>
<span  style="">1588                                                                                                                    </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1589      /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                          </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1590      private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                               </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1591          final ContentResolver contentResolver = context.getContentResolver();                                     </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1592          final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                     </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1593          final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                              </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1594          TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                                     </span>
<span  style="">1595                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1596          try {                                                                                                     </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1597              final int idIndex = sc.getColumnIndexOrThrow(                                                         </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1598                      LauncherSettings.WorkspaceScreens._ID);                                                       </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1599              final int rankIndex = sc.getColumnIndexOrThrow(                                                       </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1600                      LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                               </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1601              while (sc.moveToNext()) {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1602                  try {                                                                                             </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1603                      long screenId = sc.getLong(idIndex);                                                          </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1604                      int rank = sc.getInt(rankIndex);                                                              </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1605                      orderedScreens.put(rank, screenId);                                                           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1606                  } catch (Exception e) {                                                                           </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style="">1607                      Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1608                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1609              }                                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1610          } finally {                                                                                               </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1611              sc.close();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1612          }                                                                                                         </span>
<span  style="">1613                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1614          // Log to disk                                                                                            </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1615          Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                                    </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1616          ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                           </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1617          for (Integer i : orderedScreens.keySet()) {                                                               </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1618              orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619          }                                                                                                         </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1620          Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                                       </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1621                  TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                                 </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1622          return orderedScreens;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623      }                                                                                                             </span>
<span  style="">1624                                                                                                                    </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1625      public boolean isAllAppsLoaded() {                                                                            </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1626          return mAllAppsLoaded;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1627      }                                                                                                             </span>
<span  style="">1628                                                                                                                    </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1629      boolean isLoadingWorkspace() {                                                                                </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1630          synchronized (mLock) {                                                                                    </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1631              if (mLoaderTask != null) {                                                                            </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1632                  return mLoaderTask.isLoadingWorkspace();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1633              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1634          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1635          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1636      }                                                                                                             </span>
<span  style="">1637                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1638      /**                                                                                                           </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1639       * Runnable for the thread that loads the contents of the launcher:                                           </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1640       *   - workspace icons                                                                                        </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1641       *   - widgets                                                                                                </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1642       *   - all apps icons                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1643       */                                                                                                           </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1644      private class LoaderTask implements Runnable {                                                                </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1645          private Context mContext;                                                                                 </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1646          private boolean mIsLaunching;                                                                             </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1647          private boolean mIsLoadingAndBindingWorkspace;                                                            </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1648          private boolean mStopped;                                                                                 </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1649          private boolean mLoadAndBindStepFinished;                                                                 </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1650          private int mFlags;                                                                                       </span>
<span  style="">1651                                                                                                                    </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1652          private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                                        </span>
<span  style="">1653                                                                                                                    </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1654          LoaderTask(Context context, boolean isLaunching, int flags) {                                             </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1655              mContext = context;                                                                                   </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1656              mIsLaunching = isLaunching;                                                                           </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1657              mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                                    </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1658              mFlags = flags;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659          }                                                                                                         </span>
<span  style="">1660                                                                                                                    </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1661          boolean isLaunching() {                                                                                   </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1662              return mIsLaunching;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1663          }                                                                                                         </span>
<span  style="">1664                                                                                                                    </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1665          boolean isLoadingWorkspace() {                                                                            </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1666              return mIsLoadingAndBindingWorkspace;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1667          }                                                                                                         </span>
<span  style="">1668                                                                                                                    </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1669          /** Returns whether this is an upgrade path */                                                            </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1670          private boolean loadAndBindWorkspace() {                                                                  </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1671              mIsLoadingAndBindingWorkspace = true;                                                                 </span>
<span  style="">1672                                                                                                                    </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1673              // Load the workspace                                                                                 </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1674              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1675                  Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1676              }                                                                                                     </span>
<span  style="">1677                                                                                                                    </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1678              boolean isUpgradePath = false;                                                                        </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1679              if (!mWorkspaceLoaded) {                                                                              </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1680                  isUpgradePath = loadWorkspace();                                                                  </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1681                  synchronized (LoaderTask.this) {                                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1682                      if (mStopped) {                                                                               </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1683                          return isUpgradePath;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1684                      }                                                                                             </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1685                      mWorkspaceLoaded = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687              }                                                                                                     </span>
<span  style="">1688                                                                                                                    </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1689              // Bind the workspace                                                                                 </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1690              bindWorkspace(-1, isUpgradePath);                                                                     </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1691              return isUpgradePath;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692          }                                                                                                         </span>
<span  style="">1693                                                                                                                    </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1694          private void waitForIdle() {                                                                              </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1695              // Wait until the either we&#x27;re stopped or the other threads are done.                                 </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1696              // This way we don&#x27;t start loading all apps until the workspace has settled                           </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1697              // down.                                                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1698              synchronized (LoaderTask.this) {                                                                      </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1699                  final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                    </span>
<span  style="">1700                                                                                                                    </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1701                  mHandler.postIdle(new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1702                          public void run() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1703                              synchronized (LoaderTask.this) {                                                      </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1704                                  mLoadAndBindStepFinished = true;                                                  </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1705                                  if (DEBUG_LOADERS) {                                                              </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1706                                      Log.d(TAG, &quot;done with previous binding step&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1707                                  }                                                                                 </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1708                                  LoaderTask.this.notify();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1709                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1710                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1711                      });                                                                                           </span>
<span  style="">1712                                                                                                                    </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1713                  while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1714                      try {                                                                                         </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1715                          // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,                     </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1716                          // wait no longer than 1sec at a time                                                     </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1717                          this.wait(1000);                                                                          </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1718                      } catch (InterruptedException ex) {                                                           </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1719                          // Ignore                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1720                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1721                  }                                                                                                 </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1722                  if (DEBUG_LOADERS) {                                                                              </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1723                      Log.d(TAG, &quot;waited &quot;                                                                          </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1724                              + (SystemClock.uptimeMillis()-workspaceWaitTime)                                      </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1725                              + &quot;ms for previous step to finish binding&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1726                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1727              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1728          }                                                                                                         </span>
<span  style="">1729                                                                                                                    </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1730          void runBindSynchronousPage(int synchronousBindPage) {                                                    </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1731              if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                          </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1732                  // Ensure that we have a valid page index to load synchronously                                   </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1733                  throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +                  </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1734                          &quot;valid page index&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735              }                                                                                                     </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1736              if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                           </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1737                  // Ensure that we don&#x27;t try and bind a specified page when the pages have not been                </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1738                  // loaded already (we should load everything asynchronously in that case)                         </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1739                  throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1740              }                                                                                                     </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1741              synchronized (mLock) {                                                                                </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1742                  if (mIsLoaderTaskRunning) {                                                                       </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1743                      // Ensure that we are never running the background loading at this point since                </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1744                      // we also touch the background collections                                                   </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1745                      throw new RuntimeException(&quot;Error! Background loading is already running&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1746                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1747              }                                                                                                     </span>
<span  style="">1748                                                                                                                    </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1749              // XXX: Throw an exception if we are already loading (since we touch the worker thread                </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1750              //      data structures, we can&#x27;t allow any other thread to touch that data, but because              </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1751              //      this call is synchronous, we can get away with not locking).                                  </span>
<span  style="">1752                                                                                                                    </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1753              // The LauncherModel is static in the LauncherAppState and mHandler may have queued                   </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1754              // operations from the previous activity.  We need to ensure that all queued operations               </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1755              // are executed before any synchronous binding work is done.                                          </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1756              mHandler.flush();                                                                                     </span>
<span  style="">1757                                                                                                                    </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1758              // Divide the set of loaded items into those that we are binding synchronously, and                   </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1759              // everything else that is to be bound normally (asynchronously).                                     </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1760              bindWorkspace(synchronousBindPage, false);                                                            </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1761              // XXX: For now, continue posting the binding of AllApps as there are other issues that               </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1762              //      arise from that.                                                                              </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1763              onlyBindAllApps();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1764          }                                                                                                         </span>
<span  style="">1765                                                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1766          public void run() {                                                                                       </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1767              boolean isUpgrade = false;                                                                            </span>
<span  style="">1768                                                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1769              synchronized (mLock) {                                                                                </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1770                  mIsLoaderTaskRunning = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1771              }                                                                                                     </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1772              // Optimize for end-user experience: if the Launcher is up and // running with the                    </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1773              // All Apps interface in the foreground, load All Apps first. Otherwise, load the                     </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1774              // workspace first (default).                                                                         </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1775              keep_running: {                                                                                       </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1776                  // Elevate priority when Home launches for the first time to avoid                                </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1777                  // starving at boot time. Staring at a blank home is not cool.                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1778                  synchronized (mLock) {                                                                            </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1779                      if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                                 </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1780                              (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                           </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1781                      android.os.Process.setThreadPriority(mIsLaunching                                             </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1782                              ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783                  }                                                                                                 </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1784                  if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                                       </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1785                  isUpgrade = loadAndBindWorkspace();                                                               </span>
<span  style="">1786                                                                                                                    </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1787                  if (mStopped) {                                                                                   </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1788                      break keep_running;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1789                  }                                                                                                 </span>
<span  style="">1790                                                                                                                    </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1791                  // Whew! Hard work done.  Slow us down, and wait until the UI thread has                          </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1792                  // settled down.                                                                                  </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1793                  synchronized (mLock) {                                                                            </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1794                      if (mIsLaunching) {                                                                           </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1795                          if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);                   </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1796                          android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1797                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1798                  }                                                                                                 </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1799                  waitForIdle();                                                                                    </span>
<span  style="">1800                                                                                                                    </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1801                  // second step                                                                                    </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1802                  if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                                        </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1803                  loadAndBindAllApps();                                                                             </span>
<span  style="">1804                                                                                                                    </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1805                  // Restore the default thread priority after we are done loading items                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1806                  synchronized (mLock) {                                                                            </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1807                      android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1808                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1809              }                                                                                                     </span>
<span  style="">1810                                                                                                                    </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1811              // Update the saved icons if necessary                                                                </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1812              if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                            </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1813              synchronized (sBgLock) {                                                                              </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1814                  for (Object key : sBgDbIconCache.keySet()) {                                                      </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1815                      updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1816                  }                                                                                                 </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1817                  sBgDbIconCache.clear();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1818              }                                                                                                     </span>
<span  style="">1819                                                                                                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1820              if (LauncherAppState.isDisableAllApps()) {                                                            </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1821                  // Ensure that all the applications that are in the system are                                    </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1822                  // represented on the home screen.                                                                </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1823                  if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                                </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1824                      verifyApplications();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1825                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1826              }                                                                                                     </span>
<span  style="">1827                                                                                                                    </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1828              // Clear out this reference, otherwise we end up holding it until all of the                          </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1829              // callback runnables are done.                                                                       </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1830              mContext = null;                                                                                      </span>
<span  style="">1831                                                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1832              synchronized (mLock) {                                                                                </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1833                  // If we are still the last one to be scheduled, remove ourselves.                                </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1834                  if (mLoaderTask == this) {                                                                        </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1835                      mLoaderTask = null;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1836                  }                                                                                                 </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1837                  mIsLoaderTaskRunning = false;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1838              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1839          }                                                                                                         </span>
<span  style="">1840                                                                                                                    </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1841          public void stopLocked() {                                                                                </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1842              synchronized (LoaderTask.this) {                                                                      </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1843                  mStopped = true;                                                                                  </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1844                  this.notify();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1845              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1846          }                                                                                                         </span>
<span  style="">1847                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1848          /**                                                                                                       </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1849           * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                           </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1850           * has somehow been garbage collected, return null instead.  Pass in the Callbacks                        </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1851           * object that was around when the deferred message was scheduled, and if there&#x27;s                         </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1852           * a new Callbacks object around then also return null.  This will save us from                           </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1853           * calling onto it with data that will be ignored.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1854           */                                                                                                       </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1855          Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1856              synchronized (mLock) {                                                                                </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1857                  if (mStopped) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1858                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1859                  }                                                                                                 </span>
<span  style="">1860                                                                                                                    </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1861                  if (mCallbacks == null) {                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1862                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1863                  }                                                                                                 </span>
<span  style="">1864                                                                                                                    </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1865                  final Callbacks callbacks = mCallbacks.get();                                                     </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1866                  if (callbacks != oldCallbacks) {                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1867                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1868                  }                                                                                                 </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1869                  if (callbacks == null) {                                                                          </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1870                      Log.w(TAG, &quot;no mCallbacks&quot;);                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1871                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1872                  }                                                                                                 </span>
<span  style="">1873                                                                                                                    </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1874                  return callbacks;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1875              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1876          }                                                                                                         </span>
<span  style="">1877                                                                                                                    </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1878          private void verifyApplications() {                                                                       </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1879              final Context context = mApp.getContext();                                                            </span>
<span  style="">1880                                                                                                                    </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1881              // Cross reference all the applications in our apps list with items in the workspace                  </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1882              ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                         </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1883              ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                                </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1884              synchronized (sBgLock) {                                                                              </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1885                  for (AppInfo app : mBgAllAppsList.data) {                                                         </span>
<span class="8719756079786944918" onmouseenter="enter('8719756079786944918');" onmouseout="out('8719756079786944918');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1886 -                    tmpInfos = getItemInfoForComponentName(app.componentName);                                    </span>
<span class="3468492706943039059" onmouseenter="enter('3468492706943039059');" onmouseout="out('3468492706943039059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1887 +                    tmpInfos = getItemInfoForComponentName(app.componentName, app.user);                          </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1888                      if (tmpInfos.isEmpty()) {                                                                     </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1889                          // We are missing an application icon, so add this to the workspace                       </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1890                          added.add(app);                                                                           </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1891                          // This is a rare event, so lets log it                                                   </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1892                          Log.e(TAG, &quot;Missing Application on load: &quot; + app);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1893                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1894                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1895              }                                                                                                     </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1896              if (!added.isEmpty()) {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1897 -                Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                      </span>
<span class="-7750968314744672785" onmouseenter="enter('-7750968314744672785');" onmouseout="out('-7750968314744672785');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1898 -                addAndBindAddedApps(context, added, cb, new ArrayList&lt;AppInfo&gt;());                                </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1899 +                addAndBindAddedWorkspaceApps(context, added);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1900              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1901          }                                                                                                         </span>
<span  style="">1902                                                                                                                    </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1903          // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items                       </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1904          private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,                   </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1905                                             AtomicBoolean deleteOnInvalidPlacement) {                              </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1906              LauncherAppState app = LauncherAppState.getInstance();                                                </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1907              DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                         </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1908              final int countX = (int) grid.numColumns;                                                             </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1909              final int countY = (int) grid.numRows;                                                                </span>
<span  style="">1910                                                                                                                    </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1911              long containerIndex = item.screenId;                                                                  </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1912              if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                 </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1913                  // Return early if we detect that an item is under the hotseat button                             </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1914                  if (mCallbacks == null ||                                                                         </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1915                          mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                              </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1916                      deleteOnInvalidPlacement.set(true);                                                           </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1917                      Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                                      </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1918                              + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                         </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1919                              + item.cellY + &quot;) occupied by all apps&quot;);                                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1920                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1921                  }                                                                                                 </span>
<span  style="">1922                                                                                                                    </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1923                  final ItemInfo[][] hotseatItems =                                                                 </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1924                          occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);                        </span>
<span  style="">1925                                                                                                                    </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1926                  if (item.screenId &gt;= grid.numHotseatIcons) {                                                      </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1927                      Log.e(TAG, &quot;Error loading shortcut &quot; + item                                                   </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1928                              + &quot; into hotseat position &quot; + item.screenId                                           </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1929                              + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)                     </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1930                              + &quot;)&quot;);                                                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1931                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1932                  }                                                                                                 </span>
<span  style="">1933                                                                                                                    </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1934                  if (hotseatItems != null) {                                                                       </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1935                      if (hotseatItems[(int) item.screenId][0] != null) {                                           </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1936                          Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                                  </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1937                                  + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                     </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1938                                  + item.cellY + &quot;) occupied by &quot;                                                   </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1939                                  + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)                      </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1940                                  [(int) item.screenId][0]);                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1941                              return false;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1942                      } else {                                                                                      </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1943                          hotseatItems[(int) item.screenId][0] = item;                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1944                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1945                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1946                  } else {                                                                                          </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1947                      final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];                       </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1948                      items[(int) item.screenId][0] = item;                                                         </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1949                      occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1950                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1951                  }                                                                                                 </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1952              } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                          </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1953                  // Skip further checking if it is not the hotseat or workspace container                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1954                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1955              }                                                                                                     </span>
<span  style="">1956                                                                                                                    </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1957              if (!occupied.containsKey(item.screenId)) {                                                           </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1958                  ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                                        </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1959                  occupied.put(item.screenId, items);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1960              }                                                                                                     </span>
<span  style="">1961                                                                                                                    </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1962              final ItemInfo[][] screens = occupied.get(item.screenId);                                             </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1963              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                                 </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1964                      item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                           </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1965                      item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {                       </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1966                  Log.e(TAG, &quot;Error loading shortcut &quot; + item                                                       </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1967                          + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                             </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1968                          + item.cellX + &quot;,&quot; + item.cellY                                                           </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1969                          + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1970                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1971              }                                                                                                     </span>
<span  style="">1972                                                                                                                    </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1973              // Check if any workspace icons overlap with each other                                               </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1974              for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                          </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1975                  for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                                      </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1976                      if (screens[x][y] != null) {                                                                  </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1977                          Log.e(TAG, &quot;Error loading shortcut &quot; + item                                               </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1978                              + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                         </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1979                              + x + &quot;,&quot; + y                                                                         </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1980                              + &quot;) occupied by &quot;                                                                    </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1981                              + screens[x][y]);                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1982                          return false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1983                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1984                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1985              }                                                                                                     </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1986              for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                          </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1987                  for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                                      </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1988                      screens[x][y] = item;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1989                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1990              }                                                                                                     </span>
<span  style="">1991                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1992              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1993          }                                                                                                         </span>
<span  style="">1994                                                                                                                    </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1995          /** Clears all the sBg data structures */                                                                 </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1996          private void clearSBgDataStructures() {                                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1997              synchronized (sBgLock) {                                                                              </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1998                  sBgWorkspaceItems.clear();                                                                        </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1999                  sBgAppWidgets.clear();                                                                            </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">2000                  sBgFolders.clear();                                                                               </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">2001                  sBgItemsIdMap.clear();                                                                            </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">2002                  sBgDbIconCache.clear();                                                                           </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">2003                  sBgWorkspaceScreens.clear();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2004              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2005          }                                                                                                         </span>
<span  style="">2006                                                                                                                    </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">2007          /** Returns whether this is an upgrade path */                                                            </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">2008          private boolean loadWorkspace() {                                                                         </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2009              // Log to disk                                                                                        </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">2010              Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                         </span>
<span  style="">2011                                                                                                                    </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">2012              final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                        </span>
<span  style="">2013                                                                                                                    </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">2014              final Context context = mContext;                                                                     </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">2015              final ContentResolver contentResolver = context.getContentResolver();                                 </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">2016              final PackageManager manager = context.getPackageManager();                                           </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">2017              final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                               </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">2018              final boolean isSafeMode = manager.isSafeMode();                                                      </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2019 +            final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                      </span>
<span class="-1126483394746043247" onmouseenter="enter('-1126483394746043247');" onmouseout="out('-1126483394746043247');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2020 +            final boolean isSdCardReady = context.registerReceiver(null,                                          </span>
<span class="235951794025782625" onmouseenter="enter('235951794025782625');" onmouseout="out('235951794025782625');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2021 +                    new IntentFilter(StartupReceiver.SYSTEM_READY)) != null;                                      </span>
<span  style="">2022                                                                                                                    </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">2023              LauncherAppState app = LauncherAppState.getInstance();                                                </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">2024              DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                         </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">2025              int countX = (int) grid.numColumns;                                                                   </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">2026              int countY = (int) grid.numRows;                                                                      </span>
<span  style="">2027                                                                                                                    </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">2028              if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                                    </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">2029                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);                     </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">2030                  LauncherAppState.getLauncherProvider().deleteDatabase();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2031              }                                                                                                     </span>
<span  style="">2032                                                                                                                    </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">2033              if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                                  </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">2034                  // append the user&#x27;s Launcher2 shortcuts                                                          </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">2035                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);                        </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">2036                  LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2037              } else {                                                                                              </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">2038                  // Make sure the default workspace is loaded                                                      </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">2039                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);                      </span>
<span class="8096870978202898311" onmouseenter="enter('8096870978202898311');" onmouseout="out('8096870978202898311');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2040 -                LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary(0);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2041 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2042 -                                                                                                                  </span>
<span class="-8222313360488017709" onmouseenter="enter('-8222313360488017709');" onmouseout="out('-8222313360488017709');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2043 -            // Check if we need to do any upgrade-path logic                                                      </span>
<span class="-995379543715394793" onmouseenter="enter('-995379543715394793');" onmouseout="out('-995379543715394793');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2044 -            // (Includes having just imported default favorites)                                                  </span>
<span class="-2313666044770114963" onmouseenter="enter('-2313666044770114963');" onmouseout="out('-2313666044770114963');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2045 -            boolean loadedOldDb = LauncherAppState.getLauncherProvider().justLoadedOldDb();                       </span>
<span class="4180233289947251537" onmouseenter="enter('4180233289947251537');" onmouseout="out('4180233289947251537');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2046 +                LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary();                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2047 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2048 +                                                                                                                  </span>
<span class="6918238907049954147" onmouseenter="enter('6918238907049954147');" onmouseout="out('6918238907049954147');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2049 +            // This code path is for our old migration code and should no longer be exercised                     </span>
<span class="-6111060399811000023" onmouseenter="enter('-6111060399811000023');" onmouseout="out('-6111060399811000023');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2050 +            boolean loadedOldDb = false;                                                                          </span>
<span  style="">2051                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2052              // Log to disk                                                                                        </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">2053              Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                           </span>
<span  style="">2054                                                                                                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2055              synchronized (sBgLock) {                                                                              </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2056                  clearSBgDataStructures();                                                                         </span>
<span class="8252648371202855385" onmouseenter="enter('8252648371202855385');" onmouseout="out('8252648371202855385');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2057 +                final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat                                     </span>
<span class="-5267108265550912858" onmouseenter="enter('-5267108265550912858');" onmouseout="out('-5267108265550912858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2058 +                        .getInstance(mContext).updateAndGetActiveSessionCache();                                  </span>
<span  style="">2059                                                                                                                    </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">2060                  final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                                      </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">2061                  final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                                       </span>
<span class="1337367669825309510" onmouseenter="enter('1337367669825309510');" onmouseout="out('1337367669825309510');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2062 -                final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI;                                    </span>
<span class="2252334430881119805" onmouseenter="enter('2252334430881119805');" onmouseout="out('2252334430881119805');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2063 +                final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION;                    </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">2064                  if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                                </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">2065                  final Cursor c = contentResolver.query(contentUri, null, null, null, null);                       </span>
<span  style="">2066                                                                                                                    </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">2067                  // +1 for the hotseat (it can be larger than the workspace)                                       </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">2068                  // Load workspace in reverse order to ensure that latest items are loaded first (and              </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">2069                  // before any earlier duplicates)                                                                 </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">2070                  final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();                   </span>
<span  style="">2071                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2072                  try {                                                                                             </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">2073                      final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);                  </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">2074                      final int intentIndex = c.getColumnIndexOrThrow                                               </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">2075                              (LauncherSettings.Favorites.INTENT);                                                  </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">2076                      final int titleIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">2077                              (LauncherSettings.Favorites.TITLE);                                                   </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">2078                      final int iconTypeIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">2079                              LauncherSettings.Favorites.ICON_TYPE);                                                </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">2080                      final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);               </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">2081                      final int iconPackageIndex = c.getColumnIndexOrThrow(                                         </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">2082                              LauncherSettings.Favorites.ICON_PACKAGE);                                             </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">2083                      final int iconResourceIndex = c.getColumnIndexOrThrow(                                        </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">2084                              LauncherSettings.Favorites.ICON_RESOURCE);                                            </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">2085                      final int containerIndex = c.getColumnIndexOrThrow(                                           </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">2086                              LauncherSettings.Favorites.CONTAINER);                                                </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">2087                      final int itemTypeIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">2088                              LauncherSettings.Favorites.ITEM_TYPE);                                                </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">2089                      final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                         </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">2090                              LauncherSettings.Favorites.APPWIDGET_ID);                                             </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">2091                      final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">2092                              LauncherSettings.Favorites.APPWIDGET_PROVIDER);                                       </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">2093                      final int screenIndex = c.getColumnIndexOrThrow(                                              </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">2094                              LauncherSettings.Favorites.SCREEN);                                                   </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">2095                      final int cellXIndex = c.getColumnIndexOrThrow                                                </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">2096                              (LauncherSettings.Favorites.CELLX);                                                   </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">2097                      final int cellYIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">2098                              (LauncherSettings.Favorites.CELLY);                                                   </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">2099                      final int spanXIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">2100                              (LauncherSettings.Favorites.SPANX);                                                   </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">2101                      final int spanYIndex = c.getColumnIndexOrThrow(                                               </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">2102                              LauncherSettings.Favorites.SPANY);                                                    </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">2103                      final int restoredIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">2104                              LauncherSettings.Favorites.RESTORED);                                                 </span>
<span class="3162637821619353517" onmouseenter="enter('3162637821619353517');" onmouseout="out('3162637821619353517');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2105 +                    final int profileIdIndex = c.getColumnIndexOrThrow(                                           </span>
<span class="-1125432391574533143" onmouseenter="enter('-1125432391574533143');" onmouseout="out('-1125432391574533143');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2106 +                            LauncherSettings.Favorites.PROFILE_ID);                                               </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">2107                      //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);               </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">2108                      //final int displayModeIndex = c.getColumnIndexOrThrow(                                       </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">2109                      //        LauncherSettings.Favorites.DISPLAY_MODE);                                           </span>
<span  style="">2110                                                                                                                    </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">2111                      ShortcutInfo info;                                                                            </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">2112                      String intentDescription;                                                                     </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">2113                      LauncherAppWidgetInfo appWidgetInfo;                                                          </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">2114                      int container;                                                                                </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">2115                      long id;                                                                                      </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">2116                      Intent intent;                                                                                </span>
<span class="8928715163618104503" onmouseenter="enter('8928715163618104503');" onmouseout="out('8928715163618104503');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2117 +                    UserHandleCompat user;                                                                        </span>
<span  style="">2118                                                                                                                    </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">2119                      while (!mStopped &amp;&amp; c.moveToNext()) {                                                         </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">2120                          AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2121                          try {                                                                                     </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">2122                              int itemType = c.getInt(itemTypeIndex);                                               </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">2123                              boolean restored = 0 != c.getInt(restoredIndex);                                      </span>
<span class="4933910026947534491" onmouseenter="enter('4933910026947534491');" onmouseout="out('4933910026947534491');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2124 +                            boolean allowMissingTarget = false;                                                   </span>
<span  style="">2125                                                                                                                    </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">2126                              switch (itemType) {                                                                   </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">2127                              case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">2128                              case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                   </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2129                                  id = c.getLong(idIndex);                                                          </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">2130                                  intentDescription = c.getString(intentIndex);                                     </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2131 +                                long serialNumber = c.getInt(profileIdIndex);                                     </span>
<span class="-4273089527731895214" onmouseenter="enter('-4273089527731895214');" onmouseout="out('-4273089527731895214');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2132 +                                user = mUserManager.getUserForSerialNumber(serialNumber);                         </span>
<span class="-3834292976309282984" onmouseenter="enter('-3834292976309282984');" onmouseout="out('-3834292976309282984');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2133 +                                int promiseType = c.getInt(restoredIndex);                                        </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2134 +                                if (user == null) {                                                               </span>
<span class="-496594084298695862" onmouseenter="enter('-496594084298695862');" onmouseout="out('-496594084298695862');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2135 +                                    // User has been deleted remove the item.                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2136 +                                    itemsToRemove.add(id);                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2137 +                                    continue;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2138 +                                }                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2139                                  try {                                                                             </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">2140                                      intent = Intent.parseUri(intentDescription, 0);                               </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">2141                                      ComponentName cn = intent.getComponent();                                     </span>
<span class="6294222122453554998" onmouseenter="enter('6294222122453554998');" onmouseout="out('6294222122453554998');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2142 -                                    if (cn != null &amp;&amp; !isValidPackageComponent(manager, cn)) {                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2143 -                                        if (restored) {                                                           </span>
<span class="-4075692845887634995" onmouseenter="enter('-4075692845887634995');" onmouseout="out('-4075692845887634995');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2144 -                                            // might be installed later                                           </span>
<span class="3739674956299895084" onmouseenter="enter('3739674956299895084');" onmouseout="out('3739674956299895084');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2145 +                                    if (cn != null &amp;&amp; cn.getPackageName() != null) {                              </span>
<span class="-7017860263960771696" onmouseenter="enter('-7017860263960771696');" onmouseout="out('-7017860263960771696');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2146 +                                        boolean validPkg = launcherApps.isPackageEnabledForProfile(               </span>
<span class="-8206530135326160205" onmouseenter="enter('-8206530135326160205');" onmouseout="out('-8206530135326160205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2147 +                                                cn.getPackageName(), user);                                       </span>
<span class="2397899750057092636" onmouseenter="enter('2397899750057092636');" onmouseout="out('2397899750057092636');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2148 +                                        boolean validComponent = validPkg &amp;&amp;                                      </span>
<span class="8762069982139369869" onmouseenter="enter('8762069982139369869');" onmouseout="out('8762069982139369869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2149 +                                                launcherApps.isActivityEnabledForProfile(cn, user);               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2150 +                                                                                                                  </span>
<span class="-99499348404964068" onmouseenter="enter('-99499348404964068');" onmouseout="out('-99499348404964068');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2151 +                                        if (validComponent) {                                                     </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2152 +                                            if (restored) {                                                       </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2153 +                                                // no special handling necessary for this item                    </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2154 +                                                restoredRows.add(id);                                             </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2155 +                                                restored = false;                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2156 +                                            }                                                                     </span>
<span class="6348728592662235672" onmouseenter="enter('6348728592662235672');" onmouseout="out('6348728592662235672');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2157 +                                        } else if (validPkg) {                                                    </span>
<span class="-6379280176207841217" onmouseenter="enter('-6379280176207841217');" onmouseout="out('-6379280176207841217');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2158 +                                            intent = null;                                                        </span>
<span class="-5338271721329837400" onmouseenter="enter('-5338271721329837400');" onmouseout="out('-5338271721329837400');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2159 +                                            if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {         </span>
<span class="5709472974278481468" onmouseenter="enter('5709472974278481468');" onmouseout="out('5709472974278481468');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2160 +                                                // We allow auto install apps to have their intent                </span>
<span class="-2650685759805982432" onmouseenter="enter('-2650685759805982432');" onmouseout="out('-2650685759805982432');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2161 +                                                // updated after an install.                                      </span>
<span class="-9107195642058231815" onmouseenter="enter('-9107195642058231815');" onmouseout="out('-9107195642058231815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2162 +                                                intent = manager.getLaunchIntentForPackage(                       </span>
<span class="2095835690487424293" onmouseenter="enter('2095835690487424293');" onmouseout="out('2095835690487424293');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2163 +                                                        cn.getPackageName());                                     </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2164 +                                                if (intent != null) {                                             </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2165 +                                                    ContentValues values = new ContentValues();                   </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2166 +                                                    values.put(LauncherSettings.Favorites.INTENT,                 </span>
<span class="-6799954997008316510" onmouseenter="enter('-6799954997008316510');" onmouseout="out('-6799954997008316510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2167 +                                                            intent.toUri(0));                                     </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2168 +                                                    String where = BaseColumns._ID + &quot;= ?&quot;;                       </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2169 +                                                    String[] args = {Long.toString(id)};                          </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2170 +                                                    contentResolver.update(contentUri, values, where, args);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2171 +                                                }                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2172 +                                            }                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2173 +                                                                                                                  </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2174 +                                            if (intent == null) {                                                 </span>
<span class="8006468267706457929" onmouseenter="enter('8006468267706457929');" onmouseout="out('8006468267706457929');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2175 +                                                // The app is installed but the component is no                   </span>
<span class="7757985899517234268" onmouseenter="enter('7757985899517234268');" onmouseout="out('7757985899517234268');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2176 +                                                // longer available.                                              </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2177 +                                                Launcher.addDumpLog(TAG,                                          </span>
<span class="-4265604912045441952" onmouseenter="enter('-4265604912045441952');" onmouseout="out('-4265604912045441952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2178 +                                                        &quot;Invalid component removed: &quot; + cn, true);                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2179 +                                                itemsToRemove.add(id);                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2180 +                                                continue;                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2181 +                                            } else {                                                              </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2182 +                                                // no special handling necessary for this item                    </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2183 +                                                restoredRows.add(id);                                             </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2184 +                                                restored = false;                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2185 +                                            }                                                                     </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2186 +                                        } else if (restored) {                                                    </span>
<span class="6723757088957997679" onmouseenter="enter('6723757088957997679');" onmouseout="out('6723757088957997679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2187 +                                            // Package is not yet available but might be                          </span>
<span class="9210943103787239320" onmouseenter="enter('9210943103787239320');" onmouseout="out('9210943103787239320');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2188 +                                            // installed later.                                                   </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2189                                              Launcher.addDumpLog(TAG,                                              </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">2190                                                      &quot;package not yet restored: &quot; + cn, true);                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2191 +                                                                                                                  </span>
<span class="-3623786309000722140" onmouseenter="enter('-3623786309000722140');" onmouseout="out('-3623786309000722140');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2192 +                                            if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != 0) {         </span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2193 +                                                // Restore has started once.                                      </span>
<span class="-3201378748433506719" onmouseenter="enter('-3201378748433506719');" onmouseout="out('-3201378748433506719');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2194 +                                            } else if (installingPkgs.contains(cn.getPackageName())) {            </span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2195 +                                                // App restore has started. Update the flag                       </span>
<span class="-8644667183049601729" onmouseenter="enter('-8644667183049601729');" onmouseout="out('-8644667183049601729');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2196 +                                                promiseType |= ShortcutInfo.FLAG_RESTORE_STARTED;                 </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2197 +                                                ContentValues values = new ContentValues();                       </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2198 +                                                values.put(LauncherSettings.Favorites.RESTORED,                   </span>
<span class="-6746125005705027516" onmouseenter="enter('-6746125005705027516');" onmouseout="out('-6746125005705027516');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2199 +                                                        promiseType);                                             </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2200 +                                                String where = BaseColumns._ID + &quot;= ?&quot;;                           </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2201 +                                                String[] args = {Long.toString(id)};                              </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2202 +                                                contentResolver.update(contentUri, values, where, args);          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2203 +                                                                                                                  </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2204 +                                            } else if (REMOVE_UNRESTORED_ICONS) {                                 </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2205 +                                                Launcher.addDumpLog(TAG,                                          </span>
<span class="-4630254631341932691" onmouseenter="enter('-4630254631341932691');" onmouseout="out('-4630254631341932691');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2206 +                                                        &quot;Unrestored package removed: &quot; + cn, true);               </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2207 +                                                itemsToRemove.add(id);                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2208 +                                                continue;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2209 +                                            }                                                                     </span>
<span class="-1386874848571608329" onmouseenter="enter('-1386874848571608329');" onmouseout="out('-1386874848571608329');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2210 +                                        } else if (isSdCardReady) {                                               </span>
<span class="3796946079469102110" onmouseenter="enter('3796946079469102110');" onmouseout="out('3796946079469102110');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2211 +                                            // Do not wait for external media load anymore.                       </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2212 +                                            // Log the invalid package, and remove it                             </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2213 +                                            Launcher.addDumpLog(TAG,                                              </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2214 +                                                    &quot;Invalid package removed: &quot; + cn, true);                      </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2215 +                                            itemsToRemove.add(id);                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2216 +                                            continue;                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2217                                          } else {                                                                  </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2218 -                                            if (!mAppsCanBeOnRemoveableStorage) {                                 </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2219 -                                                // Log the invalid package, and remove it                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2220 -                                                Launcher.addDumpLog(TAG,                                          </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2221 -                                                        &quot;Invalid package removed: &quot; + cn, true);                  </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2222 -                                                itemsToRemove.add(id);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2223 -                                            } else {                                                              </span>
<span class="1135766729630553535" onmouseenter="enter('1135766729630553535');" onmouseout="out('1135766729630553535');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2224 -                                                // If apps can be on external storage, then we just               </span>
<span class="5840340868837727294" onmouseenter="enter('5840340868837727294');" onmouseout="out('5840340868837727294');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2225 -                                                // leave them for the user to remove (maybe add                   </span>
<span class="1838795663890338817" onmouseenter="enter('1838795663890338817');" onmouseout="out('1838795663890338817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2226 -                                                // visual treatment to it)                                        </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2227 -                                                Launcher.addDumpLog(TAG,                                          </span>
<span class="2228900775203516519" onmouseenter="enter('2228900775203516519');" onmouseout="out('2228900775203516519');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2228 -                                                        &quot;Invalid package found: &quot; + cn, true);                    </span>
<span class="1407932970386463384" onmouseenter="enter('1407932970386463384');" onmouseout="out('1407932970386463384');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2229 +                                            // SdCard is not ready yet. Package might get available,              </span>
<span class="8490114520358161793" onmouseenter="enter('8490114520358161793');" onmouseout="out('8490114520358161793');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2230 +                                            // once it is ready.                                                  </span>
<span class="-6360577143290119906" onmouseenter="enter('-6360577143290119906');" onmouseout="out('-6360577143290119906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2231 +                                            Launcher.addDumpLog(TAG, &quot;Invalid package: &quot; + cn                     </span>
<span class="-4780001113233310924" onmouseenter="enter('-4780001113233310924');" onmouseout="out('-4780001113233310924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2232 +                                                    + &quot; (check again later)&quot;, true);                              </span>
<span class="-8366417370187832083" onmouseenter="enter('-8366417370187832083');" onmouseout="out('-8366417370187832083');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2233 +                                            HashSet&lt;String&gt; pkgs = sPendingPackages.get(user);                    </span>
<span class="3542388323197199472" onmouseenter="enter('3542388323197199472');" onmouseout="out('3542388323197199472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2234 +                                            if (pkgs == null) {                                                   </span>
<span class="2501092745877296895" onmouseenter="enter('2501092745877296895');" onmouseout="out('2501092745877296895');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2235 +                                                pkgs = new HashSet&lt;String&gt;();                                     </span>
<span class="-7473793273553333759" onmouseenter="enter('-7473793273553333759');" onmouseout="out('-7473793273553333759');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2236 +                                                sPendingPackages.put(user, pkgs);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2237                                              }                                                                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2238 -                                            continue;                                                             </span>
<span class="-4896386049384421066" onmouseenter="enter('-4896386049384421066');" onmouseout="out('-4896386049384421066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2239 +                                            pkgs.add(cn.getPackageName());                                        </span>
<span class="-7690684901319719205" onmouseenter="enter('-7690684901319719205');" onmouseout="out('-7690684901319719205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2240 +                                            allowMissingTarget = true;                                            </span>
<span class="7315818939061071709" onmouseenter="enter('7315818939061071709');" onmouseout="out('7315818939061071709');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2241 +                                            // Add the icon on the workspace anyway.                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2242                                          }                                                                         </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2243 -                                    } else if (restored) {                                                        </span>
<span class="-9024381775763282363" onmouseenter="enter('-9024381775763282363');" onmouseout="out('-9024381775763282363');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2244 -                                        // no special handling necessary for this restored item                   </span>
<span class="-237996807879267337" onmouseenter="enter('-237996807879267337');" onmouseout="out('-237996807879267337');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2245 +                                    } else if (cn == null) {                                                      </span>
<span class="8972274794412921183" onmouseenter="enter('8972274794412921183');" onmouseout="out('8972274794412921183');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2246 +                                        // For shortcuts with no component, keep them as they are                 </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2247                                          restoredRows.add(id);                                                     </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2248                                          restored = false;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2249                                      }                                                                             </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2250                                  } catch (URISyntaxException e) {                                                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2251                                      Launcher.addDumpLog(TAG,                                                      </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">2252                                              &quot;Invalid uri: &quot; + intentDescription, true);                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2253                                      continue;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2254                                  }                                                                                 </span>
<span  style="">2255                                                                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2256                                  if (restored) {                                                                   </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2257 -                                    Launcher.addDumpLog(TAG,                                                      </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2258 -                                            &quot;constructing info for partially restored package&quot;,                   </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2259 -                                            true);                                                                </span>
<span class="2209760928415101992" onmouseenter="enter('2209760928415101992');" onmouseout="out('2209760928415101992');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2260 -                                    info = getRestoredItemInfo(c, titleIndex);                                    </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2261 -                                    intent = getRestoredItemIntent(c, context, intent);                           </span>
<span class="-3932834939055806292" onmouseenter="enter('-3932834939055806292');" onmouseout="out('-3932834939055806292');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2262 +                                    if (user.equals(UserHandleCompat.myUserHandle())) {                           </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2263 +                                        Launcher.addDumpLog(TAG,                                                  </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2264 +                                                &quot;constructing info for partially restored package&quot;,               </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2265 +                                                true);                                                            </span>
<span class="9114514411241404985" onmouseenter="enter('9114514411241404985');" onmouseout="out('9114514411241404985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2266 +                                        info = getRestoredItemInfo(c, titleIndex, intent, promiseType);           </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2267 +                                        intent = getRestoredItemIntent(c, context, intent);                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2268 +                                    } else {                                                                      </span>
<span class="5174235078557753913" onmouseenter="enter('5174235078557753913');" onmouseout="out('5174235078557753913');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2269 +                                        // Don&#x27;t restore items for other profiles.                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2270 +                                        itemsToRemove.add(id);                                                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2271 +                                        continue;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2272 +                                    }                                                                             </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">2273                                  } else if (itemType ==                                                            </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">2274                                          LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {                       </span>
<span class="8194872455546731015" onmouseenter="enter('8194872455546731015');" onmouseout="out('8194872455546731015');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2275 -                                    info = getShortcutInfo(manager, intent, context, c, iconIndex,                </span>
<span class="-2187398528357571993" onmouseenter="enter('-2187398528357571993');" onmouseout="out('-2187398528357571993');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2276 -                                            titleIndex, mLabelCache);                                             </span>
<span class="-7549941140075833136" onmouseenter="enter('-7549941140075833136');" onmouseout="out('-7549941140075833136');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2277 +                                    info = getShortcutInfo(manager, intent, user, context, c,                     </span>
<span class="-4574059466099335125" onmouseenter="enter('-4574059466099335125');" onmouseout="out('-4574059466099335125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2278 +                                            iconIndex, titleIndex, mLabelCache, allowMissingTarget);              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2279                                  } else {                                                                          </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">2280                                      info = getShortcutInfo(c, context, iconTypeIndex,                             </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">2281                                              iconPackageIndex, iconResourceIndex, iconIndex,                       </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">2282                                              titleIndex);                                                          </span>
<span  style="">2283                                                                                                                    </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">2284                                      // App shortcuts that used to be automatically added to Launcher              </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">2285                                      // didn&#x27;t always have the correct intent flags set, so do that                </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">2286                                      // here                                                                       </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">2287                                      if (intent.getAction() != null &amp;&amp;                                             </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">2288                                          intent.getCategories() != null &amp;&amp;                                         </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">2289                                          intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                          </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">2290                                          intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {              </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">2291                                          intent.addFlags(                                                          </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">2292                                              Intent.FLAG_ACTIVITY_NEW_TASK |                                       </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">2293                                              Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2294                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2295                                  }                                                                                 </span>
<span  style="">2296                                                                                                                    </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">2297                                  if (info != null) {                                                               </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">2298                                      info.id = id;                                                                 </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">2299                                      info.intent = intent;                                                         </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2300                                      container = c.getInt(containerIndex);                                         </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">2301                                      info.container = container;                                                   </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">2302                                      info.screenId = c.getInt(screenIndex);                                        </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">2303                                      info.cellX = c.getInt(cellXIndex);                                            </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">2304                                      info.cellY = c.getInt(cellYIndex);                                            </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">2305                                      info.spanX = 1;                                                               </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">2306                                      info.spanY = 1;                                                               </span>
<span class="3045271753555441709" onmouseenter="enter('3045271753555441709');" onmouseout="out('3045271753555441709');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2307 +                                    info.intent.putExtra(ItemInfo.EXTRA_PROFILE, serialNumber);                   </span>
<span class="-4153270497324690681" onmouseenter="enter('-4153270497324690681');" onmouseout="out('-4153270497324690681');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2308 +                                    info.isDisabled = isSafeMode                                                  </span>
<span class="7337397009343704544" onmouseenter="enter('7337397009343704544');" onmouseout="out('7337397009343704544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2309 +                                            &amp;&amp; !Utilities.isSystemApp(context, intent);                           </span>
<span  style="">2310                                                                                                                    </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2311                                      // check &amp; update map of what&#x27;s occupied                                      </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2312                                      deleteOnInvalidPlacement.set(false);                                          </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">2313                                      if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) {          </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2314                                          if (deleteOnInvalidPlacement.get()) {                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2315                                              itemsToRemove.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2316                                          }                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2317                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2318                                      }                                                                             </span>
<span  style="">2319                                                                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2320                                      switch (container) {                                                          </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2321                                      case LauncherSettings.Favorites.CONTAINER_DESKTOP:                            </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2322                                      case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                            </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">2323                                          sBgWorkspaceItems.add(info);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2324                                          break;                                                                    </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">2325                                      default:                                                                      </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">2326                                          // Item is in a user folder                                               </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">2327                                          FolderInfo folderInfo =                                                   </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">2328                                                  findOrMakeFolder(sBgFolders, container);                          </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">2329                                          folderInfo.add(info);                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2330                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2331                                      }                                                                             </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">2332                                      sBgItemsIdMap.put(info.id, info);                                             </span>
<span  style="">2333                                                                                                                    </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">2334                                      // now that we&#x27;ve loaded everthing re-save it with the                        </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">2335                                      // icon in case it disappears somehow.                                        </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">2336                                      queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2337                                  } else {                                                                          </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">2338                                      throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2339                                  }                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2340                                  break;                                                                            </span>
<span  style="">2341                                                                                                                    </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">2342                              case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                     </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2343                                  id = c.getLong(idIndex);                                                          </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">2344                                  FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                         </span>
<span  style="">2345                                                                                                                    </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">2346                                  folderInfo.title = c.getString(titleIndex);                                       </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">2347                                  folderInfo.id = id;                                                               </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2348                                  container = c.getInt(containerIndex);                                             </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">2349                                  folderInfo.container = container;                                                 </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">2350                                  folderInfo.screenId = c.getInt(screenIndex);                                      </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">2351                                  folderInfo.cellX = c.getInt(cellXIndex);                                          </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">2352                                  folderInfo.cellY = c.getInt(cellYIndex);                                          </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">2353                                  folderInfo.spanX = 1;                                                             </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">2354                                  folderInfo.spanY = 1;                                                             </span>
<span  style="">2355                                                                                                                    </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2356                                  // check &amp; update map of what&#x27;s occupied                                          </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2357                                  deleteOnInvalidPlacement.set(false);                                              </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">2358                                  if (!checkItemPlacement(occupied, folderInfo,                                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2359                                          deleteOnInvalidPlacement)) {                                              </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2360                                      if (deleteOnInvalidPlacement.get()) {                                         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2361                                          itemsToRemove.add(id);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2362                                      }                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2363                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2364                                  }                                                                                 </span>
<span  style="">2365                                                                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2366                                  switch (container) {                                                              </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2367                                      case LauncherSettings.Favorites.CONTAINER_DESKTOP:                            </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2368                                      case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                            </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">2369                                          sBgWorkspaceItems.add(folderInfo);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2370                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2371                                  }                                                                                 </span>
<span  style="">2372                                                                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2373                                  if (restored) {                                                                   </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2374                                      // no special handling required for restored folders                          </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2375                                      restoredRows.add(id);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2376                                  }                                                                                 </span>
<span  style="">2377                                                                                                                    </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2378                                  sBgItemsIdMap.put(folderInfo.id, folderInfo);                                     </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2379                                  sBgFolders.put(folderInfo.id, folderInfo);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2380                                  break;                                                                            </span>
<span  style="">2381                                                                                                                    </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2382                              case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                  </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2383                                  // Read all Launcher-specific widget details                                      </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2384                                  int appWidgetId = c.getInt(appWidgetIdIndex);                                     </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2385                                  String savedProvider = c.getString(appWidgetProviderIndex);                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2386 -                                                                                                                  </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2387                                  id = c.getLong(idIndex);                                                          </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2388 -                                                                                                                  </span>
<span class="-94114412789236238" onmouseenter="enter('-94114412789236238');" onmouseout="out('-94114412789236238');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2389 -                                final AppWidgetProviderInfo provider =                                            </span>
<span class="1226551708060925883" onmouseenter="enter('1226551708060925883');" onmouseout="out('1226551708060925883');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2390 -                                        widgets.getAppWidgetInfo(appWidgetId);                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2391 -                                                                                                                  </span>
<span class="-3663768974834964011" onmouseenter="enter('-3663768974834964011');" onmouseout="out('-3663768974834964011');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2392 -                                if (!isSafeMode &amp;&amp; (provider == null || provider.provider == null ||              </span>
<span class="5896854251752877894" onmouseenter="enter('5896854251752877894');" onmouseout="out('5896854251752877894');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2393 -                                        provider.provider.getPackageName() == null)) {                            </span>
<span class="6295139059851294613" onmouseenter="enter('6295139059851294613');" onmouseout="out('6295139059851294613');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2394 -                                    String log = &quot;Deleting widget that isn&#x27;t installed anymore: id=&quot;              </span>
<span class="-582482747679217469" onmouseenter="enter('-582482747679217469');" onmouseout="out('-582482747679217469');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2395 -                                        + id + &quot; appWidgetId=&quot; + appWidgetId;                                     </span>
<span class="-6617867489767824559" onmouseenter="enter('-6617867489767824559');" onmouseout="out('-6617867489767824559');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2396 +                                final ComponentName component =                                                   </span>
<span class="2036133433071881641" onmouseenter="enter('2036133433071881641');" onmouseout="out('2036133433071881641');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2397 +                                        ComponentName.unflattenFromString(savedProvider);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2398 +                                                                                                                  </span>
<span class="-1033311611191387821" onmouseenter="enter('-1033311611191387821');" onmouseout="out('-1033311611191387821');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2399 +                                final int restoreStatus = c.getInt(restoredIndex);                                </span>
<span class="-4190680795845516969" onmouseenter="enter('-4190680795845516969');" onmouseout="out('-4190680795845516969');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2400 +                                final boolean isIdValid = (restoreStatus &amp;                                        </span>
<span class="-1481780029747642556" onmouseenter="enter('-1481780029747642556');" onmouseout="out('-1481780029747642556');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2401 +                                        LauncherAppWidgetInfo.FLAG_ID_NOT_VALID) == 0;                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2402 +                                                                                                                  </span>
<span class="5101880033416706570" onmouseenter="enter('5101880033416706570');" onmouseout="out('5101880033416706570');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2403 +                                final boolean wasProviderReady = (restoreStatus &amp;                                 </span>
<span class="1207335416094145871" onmouseenter="enter('1207335416094145871');" onmouseout="out('1207335416094145871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2404 +                                        LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) == 0;                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2405 +                                                                                                                  </span>
<span class="-565532021680206913" onmouseenter="enter('-565532021680206913');" onmouseout="out('-565532021680206913');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2406 +                                final AppWidgetProviderInfo provider = isIdValid                                  </span>
<span class="-1314040982621159070" onmouseenter="enter('-1314040982621159070');" onmouseout="out('-1314040982621159070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2407 +                                        ? widgets.getAppWidgetInfo(appWidgetId)                                   </span>
<span class="-5208038715710523064" onmouseenter="enter('-5208038715710523064');" onmouseout="out('-5208038715710523064');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2408 +                                        : findAppWidgetProviderInfoWithComponent(context, component);             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2409 +                                                                                                                  </span>
<span class="-3732530231777271434" onmouseenter="enter('-3732530231777271434');" onmouseout="out('-3732530231777271434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2410 +                                final boolean isProviderReady = isValidProvider(provider);                        </span>
<span class="-4031276934674956730" onmouseenter="enter('-4031276934674956730');" onmouseout="out('-4031276934674956730');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2411 +                                if (!isSafeMode &amp;&amp; wasProviderReady &amp;&amp; !isProviderReady) {                        </span>
<span class="-7439259826635164411" onmouseenter="enter('-7439259826635164411');" onmouseout="out('-7439259826635164411');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2412 +                                    String log = &quot;Deleting widget that isn&#x27;t installed anymore: &quot;                 </span>
<span class="7602710093107620029" onmouseenter="enter('7602710093107620029');" onmouseout="out('7602710093107620029');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2413 +                                            + &quot;id=&quot; + id + &quot; appWidgetId=&quot; + appWidgetId;                         </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2414                                      Log.e(TAG, log);                                                              </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2415                                      Launcher.addDumpLog(TAG, log, false);                                         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2416                                      itemsToRemove.add(id);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2417                                  } else {                                                                          </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2418 -                                    appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,                        </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2419 -                                            provider.provider);                                                   </span>
<span class="-6990378869891346567" onmouseenter="enter('-6990378869891346567');" onmouseout="out('-6990378869891346567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2420 +                                    if (isProviderReady) {                                                        </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2421 +                                        appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,                    </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2422 +                                                provider.provider);                                               </span>
<span class="-8791440271290591158" onmouseenter="enter('-8791440271290591158');" onmouseout="out('-8791440271290591158');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2423 +                                        int[] minSpan =                                                           </span>
<span class="-461068380011135868" onmouseenter="enter('-461068380011135868');" onmouseout="out('-461068380011135868');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2424 +                                                Launcher.getMinSpanForWidget(context, provider);                  </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2425 +                                        appWidgetInfo.minSpanX = minSpan[0];                                      </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2426 +                                        appWidgetInfo.minSpanY = minSpan[1];                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2427 +                                                                                                                  </span>
<span class="-4125236257298908421" onmouseenter="enter('-4125236257298908421');" onmouseout="out('-4125236257298908421');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2428 +                                        int status = restoreStatus;                                               </span>
<span class="7579397535150427943" onmouseenter="enter('7579397535150427943');" onmouseout="out('7579397535150427943');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2429 +                                        if (!wasProviderReady) {                                                  </span>
<span class="1257696726614810242" onmouseenter="enter('1257696726614810242');" onmouseout="out('1257696726614810242');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2430 +                                            // If provider was not previously ready, update the                   </span>
<span class="2493747474831820434" onmouseenter="enter('2493747474831820434');" onmouseout="out('2493747474831820434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2431 +                                            // status and UI flag.                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2432 +                                                                                                                  </span>
<span class="-551194396664004778" onmouseenter="enter('-551194396664004778');" onmouseout="out('-551194396664004778');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="2433 +                                            // Id would be valid only if the widget restore broadcast was received.">2433 +                                            // Id would be valid only if the widget restore broadcast was received</abbr></span>
<span class="877884548755909685" onmouseenter="enter('877884548755909685');" onmouseout="out('877884548755909685');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2434 +                                            if (isIdValid) {                                                      </span>
<span class="7708410681175562751" onmouseenter="enter('7708410681175562751');" onmouseout="out('7708410681175562751');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2435 +                                                status = LauncherAppWidgetInfo.RESTORE_COMPLETED;                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2436 +                                            } else {                                                              </span>
<span class="-2615385138309932511" onmouseenter="enter('-2615385138309932511');" onmouseout="out('-2615385138309932511');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2437 +                                                status &amp;= ~LauncherAppWidgetInfo                                  </span>
<span class="-1081946781001842885" onmouseenter="enter('-1081946781001842885');" onmouseout="out('-1081946781001842885');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2438 +                                                        .FLAG_PROVIDER_NOT_READY;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2439 +                                            }                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2440 +                                        }                                                                         </span>
<span class="-5649718664209503492" onmouseenter="enter('-5649718664209503492');" onmouseout="out('-5649718664209503492');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2441 +                                        appWidgetInfo.restoreStatus = status;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2442 +                                    } else {                                                                      </span>
<span class="1960922256572910963" onmouseenter="enter('1960922256572910963');" onmouseout="out('1960922256572910963');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2443 +                                        Log.v(TAG, &quot;Widget restore pending id=&quot; + id                              </span>
<span class="-310807007133679357" onmouseenter="enter('-310807007133679357');" onmouseout="out('-310807007133679357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2444 +                                                + &quot; appWidgetId=&quot; + appWidgetId                                   </span>
<span class="-3553458184285370274" onmouseenter="enter('-3553458184285370274');" onmouseout="out('-3553458184285370274');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2445 +                                                + &quot; status =&quot; + restoreStatus);                                   </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2446 +                                        appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,                    </span>
<span class="-876368090679524620" onmouseenter="enter('-876368090679524620');" onmouseout="out('-876368090679524620');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2447 +                                                component);                                                       </span>
<span class="5437344546404607904" onmouseenter="enter('5437344546404607904');" onmouseout="out('5437344546404607904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2448 +                                        appWidgetInfo.restoreStatus = restoreStatus;                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2449 +                                                                                                                  </span>
<span class="3064749011557231100" onmouseenter="enter('3064749011557231100');" onmouseout="out('3064749011557231100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2450 +                                        if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) != 0) {  </span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2451 +                                            // Restore has started once.                                          </span>
<span class="1863960885189711466" onmouseenter="enter('1863960885189711466');" onmouseout="out('1863960885189711466');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2452 +                                        } else if (installingPkgs.contains(component.getPackageName())) {         </span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2453 +                                            // App restore has started. Update the flag                           </span>
<span class="-2352323974911641075" onmouseenter="enter('-2352323974911641075');" onmouseout="out('-2352323974911641075');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2454 +                                            appWidgetInfo.restoreStatus |=                                        </span>
<span class="8590583015720742314" onmouseenter="enter('8590583015720742314');" onmouseout="out('8590583015720742314');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2455 +                                                    LauncherAppWidgetInfo.FLAG_RESTORE_STARTED;                   </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2456 +                                        } else if (REMOVE_UNRESTORED_ICONS) {                                     </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2457 +                                            Launcher.addDumpLog(TAG,                                              </span>
<span class="-6243477493514584052" onmouseenter="enter('-6243477493514584052');" onmouseout="out('-6243477493514584052');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2458 +                                                    &quot;Unrestored widget removed: &quot; + component, true);             </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2459 +                                            itemsToRemove.add(id);                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2460 +                                            continue;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2461 +                                        }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2462 +                                    }                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2463 +                                                                                                                  </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2464                                      appWidgetInfo.id = id;                                                        </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2465                                      appWidgetInfo.screenId = c.getInt(screenIndex);                               </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2466                                      appWidgetInfo.cellX = c.getInt(cellXIndex);                                   </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2467                                      appWidgetInfo.cellY = c.getInt(cellYIndex);                                   </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2468                                      appWidgetInfo.spanX = c.getInt(spanXIndex);                                   </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2469                                      appWidgetInfo.spanY = c.getInt(spanYIndex);                                   </span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2470 -                                    int[] minSpan = Launcher.getMinSpanForWidget(context, provider);              </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2471 -                                    appWidgetInfo.minSpanX = minSpan[0];                                          </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2472 -                                    appWidgetInfo.minSpanY = minSpan[1];                                          </span>
<span  style="">2473                                                                                                                    </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2474                                      container = c.getInt(containerIndex);                                         </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2475                                      if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;              </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2476                                          container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {              </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2477                                          Log.e(TAG, &quot;Widget found where container != &quot; +                           </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2478                                              &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2479                                          continue;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2480                                      }                                                                             </span>
<span  style="">2481                                                                                                                    </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2482                                      appWidgetInfo.container = c.getInt(containerIndex);                           </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2483                                      // check &amp; update map of what&#x27;s occupied                                      </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2484                                      deleteOnInvalidPlacement.set(false);                                          </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2485                                      if (!checkItemPlacement(occupied, appWidgetInfo,                              </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2486                                              deleteOnInvalidPlacement)) {                                          </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2487                                          if (deleteOnInvalidPlacement.get()) {                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2488                                              itemsToRemove.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2489                                          }                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2490                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2491                                      }                                                                             </span>
<span class="1434382407220101710" onmouseenter="enter('1434382407220101710');" onmouseout="out('1434382407220101710');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2492 -                                    String providerName = provider.provider.flattenToString();                    </span>
<span class="-497618701172789575" onmouseenter="enter('-497618701172789575');" onmouseout="out('-497618701172789575');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2493 -                                    if (!providerName.equals(savedProvider)) {                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2494 +                                                                                                                  </span>
<span class="-8698298148744232980" onmouseenter="enter('-8698298148744232980');" onmouseout="out('-8698298148744232980');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2495 +                                    String providerName = appWidgetInfo.providerName.flattenToString();           </span>
<span class="2853568002576356463" onmouseenter="enter('2853568002576356463');" onmouseout="out('2853568002576356463');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2496 +                                    if (!providerName.equals(savedProvider) ||                                    </span>
<span class="4338446659263892125" onmouseenter="enter('4338446659263892125');" onmouseout="out('4338446659263892125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2497 +                                            (appWidgetInfo.restoreStatus != restoreStatus)) {                     </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2498                                          ContentValues values = new ContentValues();                               </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2499                                          values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,                 </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2500                                                  providerName);                                                    </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2501 +                                        values.put(LauncherSettings.Favorites.RESTORED,                           </span>
<span class="6174833257706459781" onmouseenter="enter('6174833257706459781');" onmouseout="out('6174833257706459781');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2502 +                                                appWidgetInfo.restoreStatus);                                     </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2503                                          String where = BaseColumns._ID + &quot;= ?&quot;;                                   </span>
<span class="7642359228989935564" onmouseenter="enter('7642359228989935564');" onmouseout="out('7642359228989935564');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2504 -                                        String[] args = {Integer.toString(c.getInt(idIndex))};                    </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2505 +                                        String[] args = {Long.toString(id)};                                      </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2506                                          contentResolver.update(contentUri, values, where, args);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2507                                      }                                                                             </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2508                                      sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                           </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2509                                      sBgAppWidgets.add(appWidgetInfo);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2510                                  }                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2511                                  break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2512                              }                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2513                          } catch (Exception e) {                                                                   </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2514                              Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2515                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2516                      }                                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2517                  } finally {                                                                                       </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2518                      if (c != null) {                                                                              </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2519                          c.close();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2520                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2521                  }                                                                                                 </span>
<span  style="">2522                                                                                                                    </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2523                  // Break early if we&#x27;ve stopped loading                                                           </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2524                  if (mStopped) {                                                                                   </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2525                      clearSBgDataStructures();                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2526                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2527                  }                                                                                                 </span>
<span  style="">2528                                                                                                                    </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2529                  if (itemsToRemove.size() &gt; 0) {                                                                   </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2530                      ContentProviderClient client = contentResolver.acquireContentProviderClient(                  </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2531 -                            LauncherSettings.Favorites.CONTENT_URI);                                              </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2532 +                            contentUri);                                                                          </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2533                      // Remove dead items                                                                          </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2534                      for (long id : itemsToRemove) {                                                               </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2535                          if (DEBUG_LOADERS) {                                                                      </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2536                              Log.d(TAG, &quot;Removed id = &quot; + id);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2537                          }                                                                                         </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2538                          // Don&#x27;t notify content observers                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2539                          try {                                                                                     </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2540                              client.delete(LauncherSettings.Favorites.getContentUri(id, false),                    </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2541                                      null, null);                                                                  </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2542                          } catch (RemoteException e) {                                                             </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2543                              Log.w(TAG, &quot;Could not remove id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2544                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2545                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2546                  }                                                                                                 </span>
<span  style="">2547                                                                                                                    </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2548                  if (restoredRows.size() &gt; 0) {                                                                    </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2549                      ContentProviderClient updater = contentResolver.acquireContentProviderClient(                 </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2550 -                            LauncherSettings.Favorites.CONTENT_URI);                                              </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2551 +                            contentUri);                                                                          </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2552                      // Update restored items that no longer require special handling                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2553                      try {                                                                                         </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2554                          StringBuilder selectionBuilder = new StringBuilder();                                     </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2555                          selectionBuilder.append(LauncherSettings.Favorites._ID);                                  </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2556                          selectionBuilder.append(&quot; IN (&quot;);                                                         </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2557                          selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                              </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2558                          selectionBuilder.append(&quot;)&quot;);                                                             </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2559                          ContentValues values = new ContentValues();                                               </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2560                          values.put(LauncherSettings.Favorites.RESTORED, 0);                                       </span>
<span class="8477028357087705336" onmouseenter="enter('8477028357087705336');" onmouseout="out('8477028357087705336');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2561 -                        updater.update(LauncherSettings.Favorites.CONTENT_URI,                                    </span>
<span class="5986100348417061644" onmouseenter="enter('5986100348417061644');" onmouseout="out('5986100348417061644');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2562 +                        updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                    </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2563                                  values, selectionBuilder.toString(), null);                                       </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2564                      } catch (RemoteException e) {                                                                 </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2565                          Log.w(TAG, &quot;Could not update restored rows&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2566                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2567 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2568 +                                                                                                                  </span>
<span class="-5457196494236388113" onmouseenter="enter('-5457196494236388113');" onmouseout="out('-5457196494236388113');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2569 +                if (!isSdCardReady &amp;&amp; !sPendingPackages.isEmpty()) {                                              </span>
<span class="371670048052179208" onmouseenter="enter('371670048052179208');" onmouseout="out('371670048052179208');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2570 +                    context.registerReceiver(new AppsAvailabilityCheck(),                                         </span>
<span class="-2250957496563467306" onmouseenter="enter('-2250957496563467306');" onmouseout="out('-2250957496563467306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2571 +                            new IntentFilter(StartupReceiver.SYSTEM_READY),                                       </span>
<span class="-5536809824571506033" onmouseenter="enter('-5536809824571506033');" onmouseout="out('-5536809824571506033');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2572 +                            null, sWorker);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2573                  }                                                                                                 </span>
<span  style="">2574                                                                                                                    </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2575                  if (loadedOldDb) {                                                                                </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2576                      long maxScreenId = 0;                                                                         </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2577                      // If we&#x27;re importing we use the old screen order.                                            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2578                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2579                          long screenId = item.screenId;                                                            </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2580                          if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                     </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2581                                  !sBgWorkspaceScreens.contains(screenId)) {                                        </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2582                              sBgWorkspaceScreens.add(screenId);                                                    </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2583                              if (screenId &gt; maxScreenId) {                                                         </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2584                                  maxScreenId = screenId;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2585                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2586                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2587                      }                                                                                             </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2588                      Collections.sort(sBgWorkspaceScreens);                                                        </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2589                      // Log to disk                                                                                </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2590                      Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);                   </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2591                      Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                               </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2592                              TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                                     </span>
<span  style="">2593                                                                                                                    </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2594                      LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);                        </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2595                      updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                                     </span>
<span  style="">2596                                                                                                                    </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2597                      // Update the max item id after we load an old db                                             </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2598                      long maxItemId = 0;                                                                           </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2599                      // If we&#x27;re importing we use the old screen order.                                            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2600                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2601                          maxItemId = Math.max(maxItemId, item.id);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2602                      }                                                                                             </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2603                      LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2604                  } else {                                                                                          </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2605                      TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);                     </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2606                      for (Integer i : orderedScreens.keySet()) {                                                   </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2607                          sBgWorkspaceScreens.add(orderedScreens.get(i));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2608                      }                                                                                             </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2609                      // Log to disk                                                                                </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2610                      Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                               </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2611                              TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                                     </span>
<span  style="">2612                                                                                                                    </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2613                      // Remove any empty screens                                                                   </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2614                      ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);                     </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2615                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2616                          long screenId = item.screenId;                                                            </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2617                          if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                     </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2618                                  unusedScreens.contains(screenId)) {                                               </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2619                              unusedScreens.remove(screenId);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2620                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2621                      }                                                                                             </span>
<span  style="">2622                                                                                                                    </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2623                      // If there are any empty screens remove them, and update.                                    </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2624                      if (unusedScreens.size() != 0) {                                                              </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2625                          // Log to disk                                                                            </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2626                          Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +                 </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2627                                  TextUtils.join(&quot;, &quot;, unusedScreens), true);                                       </span>
<span  style="">2628                                                                                                                    </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2629                          sBgWorkspaceScreens.removeAll(unusedScreens);                                             </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2630                          updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2631                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2632                  }                                                                                                 </span>
<span  style="">2633                                                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2634                  if (DEBUG_LOADERS) {                                                                              </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2635                      Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                   </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2636                      Log.d(TAG, &quot;workspace layout: &quot;);                                                             </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2637                      int nScreens = occupied.size();                                                               </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2638                      for (int y = 0; y &lt; countY; y++) {                                                            </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2639                          String line = &quot;&quot;;                                                                         </span>
<span  style="">2640                                                                                                                    </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2641                          Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                                       </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2642                          while (iter.hasNext()) {                                                                  </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2643                              long screenId = iter.next();                                                          </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2644                              if (screenId &gt; 0) {                                                                   </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2645                                  line += &quot; | &quot;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2646                              }                                                                                     </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2647                              for (int x = 0; x &lt; countX; x++) {                                                    </span>
<span class="5427490612738327413" onmouseenter="enter('5427490612738327413');" onmouseout="out('5427490612738327413');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2648 -                                line += ((occupied.get(screenId)[x][y] != null) ? &quot;#&quot; : &quot;.&quot;);                     </span>
<span class="-6212011147390486077" onmouseenter="enter('-6212011147390486077');" onmouseout="out('-6212011147390486077');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2649 +                                ItemInfo[][] screen = occupied.get(screenId);                                     </span>
<span class="-8528390042415740475" onmouseenter="enter('-8528390042415740475');" onmouseout="out('-8528390042415740475');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2650 +                                if (x &lt; screen.length &amp;&amp; y &lt; screen[x].length) {                                  </span>
<span class="2138628812736326092" onmouseenter="enter('2138628812736326092');" onmouseout="out('2138628812736326092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2651 +                                    line += (screen[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2652 +                                } else {                                                                          </span>
<span class="3801202768225819208" onmouseenter="enter('3801202768225819208');" onmouseout="out('3801202768225819208');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2653 +                                    line += &quot;!&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2654 +                                }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2655                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2656                          }                                                                                         </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2657                          Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2658                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2659                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2660              }                                                                                                     </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2661              return loadedOldDb;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2662          }                                                                                                         </span>
<span  style="">2663                                                                                                                    </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2664          /** Filters the set of items who are directly or indirectly (via another container) on the                </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2665           * specified screen. */                                                                                   </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2666          private void filterCurrentWorkspaceItems(long currentScreenId,                                            </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2667                  ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                            </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2668                  ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                           </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2669                  ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                           </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2670              // Purge any null ItemInfos                                                                           </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2671              Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                               </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2672              while (iter.hasNext()) {                                                                              </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2673                  ItemInfo i = iter.next();                                                                         </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2674                  if (i == null) {                                                                                  </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2675                      iter.remove();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2676                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2677              }                                                                                                     </span>
<span  style="">2678                                                                                                                    </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2679              // Order the set of items by their containers first, this allows use to walk through the              </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2680              // list sequentially, build up a list of containers that are in the specified screen,                 </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2681              // as well as all items in those containers.                                                          </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2682              Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                                        </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2683              Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2684                  @Override                                                                                         </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2685                  public int compare(ItemInfo lhs, ItemInfo rhs) {                                                  </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2686                      return (int) (lhs.container - rhs.container);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2687                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2688              });                                                                                                   </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2689              for (ItemInfo info : allWorkspaceItems) {                                                             </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2690                  if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                             </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2691                      if (info.screenId == currentScreenId) {                                                       </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2692                          currentScreenItems.add(info);                                                             </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2693                          itemsOnScreen.add(info.id);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2694                      } else {                                                                                      </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2695                          otherScreenItems.add(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2696                      }                                                                                             </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2697                  } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                      </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2698                      currentScreenItems.add(info);                                                                 </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2699                      itemsOnScreen.add(info.id);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2700                  } else {                                                                                          </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2701                      if (itemsOnScreen.contains(info.container)) {                                                 </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2702                          currentScreenItems.add(info);                                                             </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2703                          itemsOnScreen.add(info.id);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2704                      } else {                                                                                      </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2705                          otherScreenItems.add(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2706                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2707                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2708              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2709          }                                                                                                         </span>
<span  style="">2710                                                                                                                    </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2711          /** Filters the set of widgets which are on the specified screen. */                                      </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2712          private void filterCurrentAppWidgets(long currentScreenId,                                                </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2713                  ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                                      </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2714                  ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                            </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2715                  ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                            </span>
<span  style="">2716                                                                                                                    </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2717              for (LauncherAppWidgetInfo widget : appWidgets) {                                                     </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2718                  if (widget == null) continue;                                                                     </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2719                  if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                           </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2720                          widget.screenId == currentScreenId) {                                                     </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2721                      currentScreenWidgets.add(widget);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2722                  } else {                                                                                          </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2723                      otherScreenWidgets.add(widget);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2724                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2725              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2726          }                                                                                                         </span>
<span  style="">2727                                                                                                                    </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2728          /** Filters the set of folders which are on the specified screen. */                                      </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2729          private void filterCurrentFolders(long currentScreenId,                                                   </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2730                  HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                               </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2731                  HashMap&lt;Long, FolderInfo&gt; folders,                                                                </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2732                  HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                                   </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2733                  HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                                   </span>
<span  style="">2734                                                                                                                    </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2735              for (long id : folders.keySet()) {                                                                    </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2736                  ItemInfo info = itemsIdMap.get(id);                                                               </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2737                  FolderInfo folder = folders.get(id);                                                              </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2738                  if (info == null || folder == null) continue;                                                     </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2739                  if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                             </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2740                          info.screenId == currentScreenId) {                                                       </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2741                      currentScreenFolders.put(id, folder);                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2742                  } else {                                                                                          </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2743                      otherScreenFolders.put(id, folder);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2744                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2745              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2746          }                                                                                                         </span>
<span  style="">2747                                                                                                                    </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2748          /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to                   </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2749           * right) */                                                                                              </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2750          private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                            </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2751              final LauncherAppState app = LauncherAppState.getInstance();                                          </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2752              final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                   </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2753              // XXX: review this                                                                                   </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2754              Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2755                  @Override                                                                                         </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2756                  public int compare(ItemInfo lhs, ItemInfo rhs) {                                                  </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2757                      int cellCountX = (int) grid.numColumns;                                                       </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2758                      int cellCountY = (int) grid.numRows;                                                          </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2759                      int screenOffset = cellCountX * cellCountY;                                                   </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2760                      int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat               </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2761                      long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +                    </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2762                              lhs.cellY * cellCountX + lhs.cellX);                                                  </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2763                      long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +                    </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2764                              rhs.cellY * cellCountX + rhs.cellX);                                                  </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2765                      return (int) (lr - rr);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2766                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2767              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2768          }                                                                                                         </span>
<span  style="">2769                                                                                                                    </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2770          private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                           </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2771                  final ArrayList&lt;Long&gt; orderedScreens) {                                                           </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2772              final Runnable r = new Runnable() {                                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2773                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2774                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2775                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2776                      if (callbacks != null) {                                                                      </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2777                          callbacks.bindScreens(orderedScreens);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2778                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2779                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2780              };                                                                                                    </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2781              runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2782          }                                                                                                         </span>
<span  style="">2783                                                                                                                    </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2784          private void bindWorkspaceItems(final Callbacks oldCallbacks,                                             </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2785                  final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                         </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2786                  final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                                </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2787                  final HashMap&lt;Long, FolderInfo&gt; folders,                                                          </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2788                  ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                                      </span>
<span  style="">2789                                                                                                                    </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2790              final boolean postOnMainThread = (deferredBindRunnables != null);                                     </span>
<span  style="">2791                                                                                                                    </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2792              // Bind the workspace items                                                                           </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2793              int N = workspaceItems.size();                                                                        </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2794              for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                            </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2795                  final int start = i;                                                                              </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2796                  final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                                 </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2797                  final Runnable r = new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2798                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2799                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2800                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2801                          if (callbacks != null) {                                                                  </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2802                              callbacks.bindItems(workspaceItems, start, start+chunkSize,                           </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2803                                      false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2804                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2805                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2806                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2807                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2808 -                    deferredBindRunnables.add(r);                                                                 </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2809 +                    synchronized (deferredBindRunnables) {                                                        </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2810 +                        deferredBindRunnables.add(r);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2811 +                    }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2812                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2813                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2814                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2815              }                                                                                                     </span>
<span  style="">2816                                                                                                                    </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2817              // Bind the folders                                                                                   </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2818              if (!folders.isEmpty()) {                                                                             </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2819                  final Runnable r = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2820                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2821                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2822                          if (callbacks != null) {                                                                  </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2823                              callbacks.bindFolders(folders);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2824                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2825                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2826                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2827                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2828 -                    deferredBindRunnables.add(r);                                                                 </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2829 +                    synchronized (deferredBindRunnables) {                                                        </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2830 +                        deferredBindRunnables.add(r);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2831 +                    }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2832                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2833                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2834                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2835              }                                                                                                     </span>
<span  style="">2836                                                                                                                    </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2837              // Bind the widgets, one at a time                                                                    </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2838              N = appWidgets.size();                                                                                </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2839              for (int i = 0; i &lt; N; i++) {                                                                         </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2840                  final LauncherAppWidgetInfo widget = appWidgets.get(i);                                           </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2841                  final Runnable r = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2842                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2843                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2844                          if (callbacks != null) {                                                                  </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2845                              callbacks.bindAppWidget(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2846                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2847                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2848                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2849                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2850                      deferredBindRunnables.add(r);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2851                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2852                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2853                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2854              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2855          }                                                                                                         </span>
<span  style="">2856                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2857          /**                                                                                                       </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2858           * Binds all loaded data to actual views on the main thread.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2859           */                                                                                                       </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2860          private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {                        </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2861              final long t = SystemClock.uptimeMillis();                                                            </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2862              Runnable r;                                                                                           </span>
<span  style="">2863                                                                                                                    </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2864              // Don&#x27;t use these two variables in any of the callback runnables.                                    </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2865              // Otherwise we hold a reference to them.                                                             </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2866              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2867              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2868                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2869                  Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2870                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2871              }                                                                                                     </span>
<span  style="">2872                                                                                                                    </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2873              // Save a copy of all the bg-thread collections                                                       </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2874              ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2875              ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2876                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2877              HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                                  </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2878              HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                                   </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2879              ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2880              synchronized (sBgLock) {                                                                              </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2881                  workspaceItems.addAll(sBgWorkspaceItems);                                                         </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2882                  appWidgets.addAll(sBgAppWidgets);                                                                 </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2883                  folders.putAll(sBgFolders);                                                                       </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2884                  itemsIdMap.putAll(sBgItemsIdMap);                                                                 </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2885                  orderedScreenIds.addAll(sBgWorkspaceScreens);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2886              }                                                                                                     </span>
<span  style="">2887                                                                                                                    </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2888              final boolean isLoadingSynchronously =                                                                </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2889                      synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                                        </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2890              int currScreen = isLoadingSynchronously ? synchronizeBindPage :                                       </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2891                  oldCallbacks.getCurrentWorkspaceScreen();                                                         </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2892              if (currScreen &gt;= orderedScreenIds.size()) {                                                          </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2893                  // There may be no workspace screens (just hotseat items and an empty page).                      </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2894                  currScreen = PagedView.INVALID_RESTORE_PAGE;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2895              }                                                                                                     </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2896              final int currentScreen = currScreen;                                                                 </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2897              final long currentScreenId = currentScreen &lt; 0                                                        </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2898                      ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                                    </span>
<span  style="">2899                                                                                                                    </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2900              // Load all the items that are on the current page first (and in the process, unbind                  </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2901              // all the existing workspace items before we call startBinding() below.                              </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2902              unbindWorkspaceItemsOnMainThread();                                                                   </span>
<span  style="">2903                                                                                                                    </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2904              // Separate the items that are on the current screen, and all the other remaining items               </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2905              ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2906              ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                  </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2907              ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                                  </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2908                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2909              ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                                    </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2910                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2911              HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                           </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2912              HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                             </span>
<span  style="">2913                                                                                                                    </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2914              filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,                   </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2915                      otherWorkspaceItems);                                                                         </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2916              filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                               </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2917                      otherAppWidgets);                                                                             </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2918              filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                            </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2919                      otherFolders);                                                                                </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2920              sortWorkspaceItemsSpatially(currentWorkspaceItems);                                                   </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2921              sortWorkspaceItemsSpatially(otherWorkspaceItems);                                                     </span>
<span  style="">2922                                                                                                                    </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2923              // Tell the workspace that we&#x27;re about to start binding items                                         </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2924              r = new Runnable() {                                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2925                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2926                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2927                      if (callbacks != null) {                                                                      </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2928                          callbacks.startBinding();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2929                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2930                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2931              };                                                                                                    </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2932              runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                     </span>
<span  style="">2933                                                                                                                    </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2934              bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                                 </span>
<span  style="">2935                                                                                                                    </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2936              // Load items on the current page                                                                     </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2937              bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                            </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2938                      currentFolders, null);                                                                        </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2939              if (isLoadingSynchronously) {                                                                         </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2940                  r = new Runnable() {                                                                              </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2941                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2942                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2943                          if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {               </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2944                              callbacks.onPageBoundSynchronously(currentScreen);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2945                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2946                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2947                  };                                                                                                </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2948                  runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2949              }                                                                                                     </span>
<span  style="">2950                                                                                                                    </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2951              // Load all the remaining pages (if we are loading synchronously, we want to defer this               </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2952              // work until after the first render)                                                                 </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2953 -            mDeferredBindRunnables.clear();                                                                       </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2954 +            synchronized (mDeferredBindRunnables) {                                                               </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2955 +                mDeferredBindRunnables.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2956 +            }                                                                                                     </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2957              bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,                  </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2958                      (isLoadingSynchronously ? mDeferredBindRunnables : null));                                    </span>
<span  style="">2959                                                                                                                    </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2960              // Tell the workspace that we&#x27;re done binding items                                                   </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2961              r = new Runnable() {                                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2962                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2963                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2964                      if (callbacks != null) {                                                                      </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2965                          callbacks.finishBindingItems(isUpgradePath);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2966                      }                                                                                             </span>
<span  style="">2967                                                                                                                    </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2968                      // If we&#x27;re profiling, ensure this is the last thing in the queue.                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2969                      if (DEBUG_LOADERS) {                                                                          </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2970                          Log.d(TAG, &quot;bound workspace in &quot;                                                          </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2971                              + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2972                      }                                                                                             </span>
<span  style="">2973                                                                                                                    </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2974                      mIsLoadingAndBindingWorkspace = false;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2975                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2976              };                                                                                                    </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2977              if (isLoadingSynchronously) {                                                                         </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2978 -                mDeferredBindRunnables.add(r);                                                                    </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2979 +                synchronized (mDeferredBindRunnables) {                                                           </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2980 +                    mDeferredBindRunnables.add(r);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2981 +                }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2982              } else {                                                                                              </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2983                  runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2984              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2985          }                                                                                                         </span>
<span  style="">2986                                                                                                                    </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2987          private void loadAndBindAllApps() {                                                                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2988              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2989                  Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2990              }                                                                                                     </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2991              if (!mAllAppsLoaded) {                                                                                </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2992                  loadAllApps();                                                                                    </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2993                  synchronized (LoaderTask.this) {                                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2994                      if (mStopped) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2995                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2996                      }                                                                                             </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2997                      mAllAppsLoaded = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2998                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2999              } else {                                                                                              </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">3000                  onlyBindAllApps();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3001              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3002          }                                                                                                         </span>
<span  style="">3003                                                                                                                    </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">3004          private void onlyBindAllApps() {                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">3005              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">3006              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">3007                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">3008                  Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3009                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3010              }                                                                                                     </span>
<span  style="">3011                                                                                                                    </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">3012              // shallow copy                                                                                       </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">3013              @SuppressWarnings(&quot;unchecked&quot;)                                                                        </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">3014              final ArrayList&lt;AppInfo&gt; list                                                                         </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">3015                      = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                           </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">3016              Runnable r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3017                  public void run() {                                                                               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">3018                      final long t = SystemClock.uptimeMillis();                                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">3019                      final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">3020                      if (callbacks != null) {                                                                      </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">3021                          callbacks.bindAllApplications(list);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3022                      }                                                                                             </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3023                      if (DEBUG_LOADERS) {                                                                          </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">3024                          Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                            </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">3025                                  + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3026                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3027                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3028              };                                                                                                    </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">3029              boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());                    </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">3030              if (isRunningOnMainThread) {                                                                          </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">3031                  r.run();                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3032              } else {                                                                                              </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">3033                  mHandler.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3034              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3035          }                                                                                                         </span>
<span  style="">3036                                                                                                                    </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">3037          private void loadAllApps() {                                                                              </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">3038              final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                 </span>
<span  style="">3039                                                                                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">3040              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">3041              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">3042                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">3043                  Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3044                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3045              }                                                                                                     </span>
<span  style="">3046                                                                                                                    </span>
<span class="1501892088590866369" onmouseenter="enter('1501892088590866369');" onmouseout="out('1501892088590866369');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3047 -            final PackageManager packageManager = mContext.getPackageManager();                                   </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">3048              final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                                       </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">3049              mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                     </span>
<span  style="">3050                                                                                                                    </span>
<span class="-3689765283860688946" onmouseenter="enter('-3689765283860688946');" onmouseout="out('-3689765283860688946');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3051 +            final List&lt;UserHandleCompat&gt; profiles = mUserManager.getUserProfiles();                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3052 +                                                                                                                  </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">3053              // Clear the list of apps                                                                             </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">3054              mBgAllAppsList.clear();                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3055 -                                                                                                                  </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3056 -            // Query for the set of apps                                                                          </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3057 -            final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                  </span>
<span class="-7993784721640929386" onmouseenter="enter('-7993784721640929386');" onmouseout="out('-7993784721640929386');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3058 -            List&lt;ResolveInfo&gt; apps = packageManager.queryIntentActivities(mainIntent, 0);                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3059 -            if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-8953089628779584367" onmouseenter="enter('-8953089628779584367');" onmouseout="out('-8953089628779584367');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3060 -                Log.d(TAG, &quot;queryIntentActivities took &quot;                                                          </span>
<span class="8237341079980485738" onmouseenter="enter('8237341079980485738');" onmouseout="out('8237341079980485738');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3061 -                        + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms&quot;);                                           </span>
<span class="-9015079490762020933" onmouseenter="enter('-9015079490762020933');" onmouseout="out('-9015079490762020933');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3062 -                Log.d(TAG, &quot;queryIntentActivities got &quot; + apps.size() + &quot; apps&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3063 -            }                                                                                                     </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3064 -            // Fail if we don&#x27;t have any apps                                                                     </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3065 -            if (apps == null || apps.isEmpty()) {                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3066 -                return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3067 -            }                                                                                                     </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3068 -            // Sort the applications by name                                                                      </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3069 -            final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                 </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3070 -            Collections.sort(apps,                                                                                </span>
<span class="-8211974845882715204" onmouseenter="enter('-8211974845882715204');" onmouseout="out('-8211974845882715204');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3071 -                    new LauncherModel.ShortcutNameComparator(packageManager, mLabelCache));                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3072 -            if (DEBUG_LOADERS) {                                                                                  </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3073 -                Log.d(TAG, &quot;sort took &quot;                                                                           </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3074 -                        + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3075 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3076 -                                                                                                                  </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3077 -            // Create the ApplicationInfos                                                                        </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3078 -            for (int i = 0; i &lt; apps.size(); i++) {                                                               </span>
<span class="2626157602240887809" onmouseenter="enter('2626157602240887809');" onmouseout="out('2626157602240887809');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3079 -                ResolveInfo app = apps.get(i);                                                                    </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3080 -                // This builds the icon bitmaps.                                                                  </span>
<span class="-6607005785467864621" onmouseenter="enter('-6607005785467864621');" onmouseout="out('-6607005785467864621');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3081 -                mBgAllAppsList.add(new AppInfo(packageManager, app,                                               </span>
<span class="-2018038209439913805" onmouseenter="enter('-2018038209439913805');" onmouseout="out('-2018038209439913805');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3082 -                        mIconCache, mLabelCache));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3083 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3084 -                                                                                                                  </span>
<span class="-2262518428251923925" onmouseenter="enter('-2262518428251923925');" onmouseout="out('-2262518428251923925');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3085 +            for (UserHandleCompat user : profiles) {                                                              </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3086 +                // Query for the set of apps                                                                      </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3087 +                final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                              </span>
<span class="2012422809707549193" onmouseenter="enter('2012422809707549193');" onmouseout="out('2012422809707549193');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3088 +                List&lt;LauncherActivityInfoCompat&gt; apps = mLauncherApps.getActivityList(null, user);                </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3089 +                if (DEBUG_LOADERS) {                                                                              </span>
<span class="2295985568720272905" onmouseenter="enter('2295985568720272905');" onmouseout="out('2295985568720272905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3090 +                    Log.d(TAG, &quot;getActivityList took &quot;                                                            </span>
<span class="-4615420342619003975" onmouseenter="enter('-4615420342619003975');" onmouseout="out('-4615420342619003975');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3091 +                            + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms for user &quot; + user);                      </span>
<span class="-305887566992077245" onmouseenter="enter('-305887566992077245');" onmouseout="out('-305887566992077245');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3092 +                    Log.d(TAG, &quot;getActivityList got &quot; + apps.size() + &quot; apps for user &quot; + user);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3093 +                }                                                                                                 </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3094 +                // Fail if we don&#x27;t have any apps                                                                 </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3095 +                if (apps == null || apps.isEmpty()) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3096 +                    return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3097 +                }                                                                                                 </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3098 +                // Sort the applications by name                                                                  </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3099 +                final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                             </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3100 +                Collections.sort(apps,                                                                            </span>
<span class="-5419021632247745878" onmouseenter="enter('-5419021632247745878');" onmouseout="out('-5419021632247745878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3101 +                        new LauncherModel.ShortcutNameComparator(mLabelCache));                                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3102 +                if (DEBUG_LOADERS) {                                                                              </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3103 +                    Log.d(TAG, &quot;sort took &quot;                                                                       </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3104 +                            + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3105 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3106 +                                                                                                                  </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3107 +                // Create the ApplicationInfos                                                                    </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3108 +                for (int i = 0; i &lt; apps.size(); i++) {                                                           </span>
<span class="236419152399396874" onmouseenter="enter('236419152399396874');" onmouseout="out('236419152399396874');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3109 +                    LauncherActivityInfoCompat app = apps.get(i);                                                 </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3110 +                    // This builds the icon bitmaps.                                                              </span>
<span class="-5742259461869454243" onmouseenter="enter('-5742259461869454243');" onmouseout="out('-5742259461869454243');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3111 +                    mBgAllAppsList.add(new AppInfo(mContext, app, user, mIconCache, mLabelCache));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3112 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3113 +            }                                                                                                     </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">3114              // Huh? Shouldn&#x27;t this be inside the Runnable below?                                                  </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">3115              final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                                </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">3116              mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                                      </span>
<span  style="">3117                                                                                                                    </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">3118              // Post callback on main thread                                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3119              mHandler.post(new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3120                  public void run() {                                                                               </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">3121                      final long bindTime = SystemClock.uptimeMillis();                                             </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">3122                      final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">3123                      if (callbacks != null) {                                                                      </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">3124                          callbacks.bindAllApplications(added);                                                     </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3125                          if (DEBUG_LOADERS) {                                                                      </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">3126                              Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                                      </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">3127                                  + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3128                          }                                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3129                      } else {                                                                                      </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">3130                          Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3131                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3132                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3133              });                                                                                                   </span>
<span  style="">3134                                                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3135              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">3136                  Log.d(TAG, &quot;Icons processed in &quot;                                                                  </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">3137                          + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3138              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3139          }                                                                                                         </span>
<span  style="">3140                                                                                                                    </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3141          public void dumpState() {                                                                                 </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">3142              synchronized (sBgLock) {                                                                              </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">3143                  Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                                   </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">3144                  Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                           </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">3145                  Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                                   </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">3146                  Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);                   </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">3147                  Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3148              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3149          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3150      }                                                                                                             </span>
<span  style="">3151                                                                                                                    </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">3152      void enqueuePackageUpdated(PackageUpdatedTask task) {                                                         </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">3153          sWorker.post(task);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3154      }                                                                                                             </span>
<span  style="">3155                                                                                                                    </span>
<span class="-2155382700972431684" onmouseenter="enter('-2155382700972431684');" onmouseout="out('-2155382700972431684');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3156 +    private class AppsAvailabilityCheck extends BroadcastReceiver {                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3157 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3158 +        @Override                                                                                                 </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3159 +        public void onReceive(Context context, Intent intent) {                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3160 +            synchronized (sBgLock) {                                                                              </span>
<span class="4353137230087495395" onmouseenter="enter('4353137230087495395');" onmouseout="out('4353137230087495395');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3161 +                final LauncherAppsCompat launcherApps = LauncherAppsCompat                                        </span>
<span class="7982344973763927300" onmouseenter="enter('7982344973763927300');" onmouseout="out('7982344973763927300');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3162 +                        .getInstance(mApp.getContext());                                                          </span>
<span class="-4787354412045768116" onmouseenter="enter('-4787354412045768116');" onmouseout="out('-4787354412045768116');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3163 +                ArrayList&lt;String&gt; packagesRemoved;                                                                </span>
<span class="4244873154676657454" onmouseenter="enter('4244873154676657454');" onmouseout="out('4244873154676657454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3164 +                for (Entry&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; entry : sPendingPackages.entrySet()) {              </span>
<span class="5975107845149456463" onmouseenter="enter('5975107845149456463');" onmouseout="out('5975107845149456463');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3165 +                    UserHandleCompat user = entry.getKey();                                                       </span>
<span class="-667022728008343360" onmouseenter="enter('-667022728008343360');" onmouseout="out('-667022728008343360');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3166 +                    packagesRemoved = new ArrayList&lt;String&gt;();                                                    </span>
<span class="1474457728386669675" onmouseenter="enter('1474457728386669675');" onmouseout="out('1474457728386669675');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3167 +                    for (String pkg : entry.getValue()) {                                                         </span>
<span class="-3589045475490406733" onmouseenter="enter('-3589045475490406733');" onmouseout="out('-3589045475490406733');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3168 +                        if (!launcherApps.isPackageEnabledForProfile(pkg, user)) {                                </span>
<span class="-1955449888814909626" onmouseenter="enter('-1955449888814909626');" onmouseout="out('-1955449888814909626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3169 +                            Launcher.addDumpLog(TAG, &quot;Package not found: &quot; + pkg, true);                          </span>
<span class="-7762323097919758551" onmouseenter="enter('-7762323097919758551');" onmouseout="out('-7762323097919758551');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3170 +                            packagesRemoved.add(pkg);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3171 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3172 +                    }                                                                                             </span>
<span class="-1545108570433514025" onmouseenter="enter('-1545108570433514025');" onmouseout="out('-1545108570433514025');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3173 +                    if (!packagesRemoved.isEmpty()) {                                                             </span>
<span class="7608410434352572746" onmouseenter="enter('7608410434352572746');" onmouseout="out('7608410434352572746');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3174 +                        enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE,                </span>
<span class="-7140992629790434736" onmouseenter="enter('-7140992629790434736');" onmouseout="out('-7140992629790434736');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3175 +                                packagesRemoved.toArray(new String[packagesRemoved.size()]), user));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3176 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3177 +                }                                                                                                 </span>
<span class="483878637633217436" onmouseenter="enter('483878637633217436');" onmouseout="out('483878637633217436');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3178 +                sPendingPackages.clear();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3179 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3180 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3181 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3182 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3183 +    /**                                                                                                           </span>
<span class="-4757889214551148663" onmouseenter="enter('-4757889214551148663');" onmouseout="out('-4757889214551148663');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3184 +     * Workaround to re-check unrestored items, in-case they were installed but the Package-ADD                   </span>
<span class="-7981308590935764825" onmouseenter="enter('-7981308590935764825');" onmouseout="out('-7981308590935764825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3185 +     * runnable was missed by the launcher.                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3186 +     */                                                                                                           </span>
<span class="-1837604298505960192" onmouseenter="enter('-1837604298505960192');" onmouseout="out('-1837604298505960192');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3187 +    public void recheckRestoredItems(final Context context) {                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3188 +        Runnable r = new Runnable() {                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3189 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3190 +            @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3191 +            public void run() {                                                                                   </span>
<span class="4897732594040868406" onmouseenter="enter('4897732594040868406');" onmouseout="out('4897732594040868406');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3192 +                LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                        </span>
<span class="2615938583470046073" onmouseenter="enter('2615938583470046073');" onmouseout="out('2615938583470046073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3193 +                HashSet&lt;String&gt; installedPackages = new HashSet&lt;String&gt;();                                        </span>
<span class="-7713836903288582020" onmouseenter="enter('-7713836903288582020');" onmouseout="out('-7713836903288582020');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3194 +                UserHandleCompat user = UserHandleCompat.myUserHandle();                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3195 +                synchronized(sBgLock) {                                                                           </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3196 +                    for (ItemInfo info : sBgItemsIdMap.values()) {                                                </span>
<span class="3613572740963864398" onmouseenter="enter('3613572740963864398');" onmouseout="out('3613572740963864398');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3197 +                        if (info instanceof ShortcutInfo) {                                                       </span>
<span class="-639177275705060315" onmouseenter="enter('-639177275705060315');" onmouseout="out('-639177275705060315');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3198 +                            ShortcutInfo si = (ShortcutInfo) info;                                                </span>
<span class="7536634611316201502" onmouseenter="enter('7536634611316201502');" onmouseout="out('7536634611316201502');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3199 +                            if (si.isPromise() &amp;&amp; si.getTargetComponent() != null                                 </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3200 +                                    &amp;&amp; launcherApps.isPackageEnabledForProfile(                                   </span>
<span class="8387940407390797707" onmouseenter="enter('8387940407390797707');" onmouseout="out('8387940407390797707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3201 +                                            si.getTargetComponent().getPackageName(), user)) {                    </span>
<span class="8027032983651882823" onmouseenter="enter('8027032983651882823');" onmouseout="out('8027032983651882823');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3202 +                                installedPackages.add(si.getTargetComponent().getPackageName());                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3203 +                            }                                                                                     </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3204 +                        } else if (info instanceof LauncherAppWidgetInfo) {                                       </span>
<span class="-3531080121586908110" onmouseenter="enter('-3531080121586908110');" onmouseout="out('-3531080121586908110');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3205 +                            LauncherAppWidgetInfo widget = (LauncherAppWidgetInfo) info;                          </span>
<span class="-6148029265216954679" onmouseenter="enter('-6148029265216954679');" onmouseout="out('-6148029265216954679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3206 +                            if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY)              </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3207 +                                    &amp;&amp; launcherApps.isPackageEnabledForProfile(                                   </span>
<span class="4286562368203116307" onmouseenter="enter('4286562368203116307');" onmouseout="out('4286562368203116307');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3208 +                                            widget.providerName.getPackageName(), user)) {                        </span>
<span class="-5968826008275428630" onmouseenter="enter('-5968826008275428630');" onmouseout="out('-5968826008275428630');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3209 +                                installedPackages.add(widget.providerName.getPackageName());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3210 +                            }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3211 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3212 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3213 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3214 +                                                                                                                  </span>
<span class="-8755538775344321333" onmouseenter="enter('-8755538775344321333');" onmouseout="out('-8755538775344321333');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3215 +                if (!installedPackages.isEmpty()) {                                                               </span>
<span class="1551205659826155261" onmouseenter="enter('1551205659826155261');" onmouseout="out('1551205659826155261');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3216 +                    final ArrayList&lt;AppInfo&gt; restoredApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span class="-3020018355032355950" onmouseenter="enter('-3020018355032355950');" onmouseout="out('-3020018355032355950');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3217 +                    for (String pkg : installedPackages) {                                                        </span>
<span class="-1472387192310078173" onmouseenter="enter('-1472387192310078173');" onmouseout="out('-1472387192310078173');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3218 +                        for (LauncherActivityInfoCompat info : launcherApps.getActivityList(pkg, user)) {         </span>
<span class="-4626697810297530275" onmouseenter="enter('-4626697810297530275');" onmouseout="out('-4626697810297530275');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3219 +                            restoredApps.add(new AppInfo(context, info, user, mIconCache, null));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3220 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3221 +                    }                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3222 +                                                                                                                  </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3223 +                    final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="838327603557009686" onmouseenter="enter('838327603557009686');" onmouseout="out('838327603557009686');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3224 +                    if (!restoredApps.isEmpty()) {                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3225 +                        mHandler.post(new Runnable() {                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3226 +                            public void run() {                                                                   </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3227 +                                Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3228 +                                if (callbacks == cb &amp;&amp; cb != null) {                                              </span>
<span class="-7685400884791180573" onmouseenter="enter('-7685400884791180573');" onmouseout="out('-7685400884791180573');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3229 +                                    callbacks.bindAppsRestored(restoredApps);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3230 +                                }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3231 +                            }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3232 +                        });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3233 +                    }                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3234 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3235 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3236 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3237 +        };                                                                                                        </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3238 +        sWorker.post(r);                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3239 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3240 +                                                                                                                  </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">3241      private class PackageUpdatedTask implements Runnable {                                                        </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">3242          int mOp;                                                                                                  </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">3243          String[] mPackages;                                                                                       </span>
<span class="2923888301096709084" onmouseenter="enter('2923888301096709084');" onmouseout="out('2923888301096709084');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3244 +        UserHandleCompat mUser;                                                                                   </span>
<span  style="">3245                                                                                                                    </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">3246          public static final int OP_NONE = 0;                                                                      </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">3247          public static final int OP_ADD = 1;                                                                       </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">3248          public static final int OP_UPDATE = 2;                                                                    </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">3249          public static final int OP_REMOVE = 3; // uninstlled                                                      </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">3250          public static final int OP_UNAVAILABLE = 4; // external media unmounted                                   </span>
<span  style="">3251                                                                                                                    </span>
<span  style="">3252                                                                                                                    </span>
<span class="-2899951589874278155" onmouseenter="enter('-2899951589874278155');" onmouseout="out('-2899951589874278155');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3253 -        public PackageUpdatedTask(int op, String[] packages) {                                                    </span>
<span class="3202497835561249087" onmouseenter="enter('3202497835561249087');" onmouseout="out('3202497835561249087');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3254 +        public PackageUpdatedTask(int op, String[] packages, UserHandleCompat user) {                             </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">3255              mOp = op;                                                                                             </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">3256              mPackages = packages;                                                                                 </span>
<span class="2953270128049103408" onmouseenter="enter('2953270128049103408');" onmouseout="out('2953270128049103408');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3257 +            mUser = user;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3258          }                                                                                                         </span>
<span  style="">3259                                                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3260          public void run() {                                                                                       </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">3261              final Context context = mApp.getContext();                                                            </span>
<span  style="">3262                                                                                                                    </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">3263              final String[] packages = mPackages;                                                                  </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">3264              final int N = packages.length;                                                                        </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">3265              switch (mOp) {                                                                                        </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">3266                  case OP_ADD:                                                                                      </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3267                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">3268                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);                  </span>
<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3269 -                        mBgAllAppsList.addPackage(context, packages[i]);                                          </span>
<span class="6575289823687229863" onmouseenter="enter('6575289823687229863');" onmouseout="out('6575289823687229863');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3270 +                        mIconCache.remove(packages[i], mUser);                                                    </span>
<span class="-4330949928576769866" onmouseenter="enter('-4330949928576769866');" onmouseout="out('-4330949928576769866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3271 +                        mBgAllAppsList.addPackage(context, packages[i], mUser);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3272                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3273                      break;                                                                                        </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">3274                  case OP_UPDATE:                                                                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3275                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">3276                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);               </span>
<span class="-272128531266392722" onmouseenter="enter('-272128531266392722');" onmouseout="out('-272128531266392722');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3277 -                        mBgAllAppsList.updatePackage(context, packages[i]);                                       </span>
<span class="4552988343352109939" onmouseenter="enter('4552988343352109939');" onmouseout="out('4552988343352109939');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3278 +                        mBgAllAppsList.updatePackage(context, packages[i], mUser);                                </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3279                          WidgetPreviewLoader.removePackageFromDb(                                                  </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3280                                  mApp.getWidgetPreviewCacheDb(), packages[i]);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3281                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3282                      break;                                                                                        </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">3283                  case OP_REMOVE:                                                                                   </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">3284                  case OP_UNAVAILABLE:                                                                              </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3285                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">3286                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);               </span>
<span class="7669526743413608016" onmouseenter="enter('7669526743413608016');" onmouseout="out('7669526743413608016');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3287 -                        mBgAllAppsList.removePackage(packages[i]);                                                </span>
<span class="-4221302437709808804" onmouseenter="enter('-4221302437709808804');" onmouseout="out('-4221302437709808804');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3288 +                        mBgAllAppsList.removePackage(packages[i], mUser);                                         </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3289                          WidgetPreviewLoader.removePackageFromDb(                                                  </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3290                                  mApp.getWidgetPreviewCacheDb(), packages[i]);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3291                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3292                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3293              }                                                                                                     </span>
<span  style="">3294                                                                                                                    </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">3295              ArrayList&lt;AppInfo&gt; added = null;                                                                      </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">3296              ArrayList&lt;AppInfo&gt; modified = null;                                                                   </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">3297              final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                                      </span>
<span  style="">3298                                                                                                                    </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">3299              if (mBgAllAppsList.added.size() &gt; 0) {                                                                </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">3300                  added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                             </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">3301                  mBgAllAppsList.added.clear();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3302              }                                                                                                     </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">3303              if (mBgAllAppsList.modified.size() &gt; 0) {                                                             </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">3304                  modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                                       </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">3305                  mBgAllAppsList.modified.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3306              }                                                                                                     </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">3307              if (mBgAllAppsList.removed.size() &gt; 0) {                                                              </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">3308                  removedApps.addAll(mBgAllAppsList.removed);                                                       </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">3309                  mBgAllAppsList.removed.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3310              }                                                                                                     </span>
<span  style="">3311                                                                                                                    </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">3312              final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">3313              if (callbacks == null) {                                                                              </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">3314                  Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3315                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3316              }                                                                                                     </span>
<span  style="">3317                                                                                                                    </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">3318              if (added != null) {                                                                                  </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">3319                  // Ensure that we add all the workspace applications to the db                                    </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3320 -                Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                      </span>
<span class="-6277587630605553211" onmouseenter="enter('-6277587630605553211');" onmouseout="out('-6277587630605553211');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3321 -                if (!LauncherAppState.isDisableAllApps()) {                                                       </span>
<span class="4785144545835380546" onmouseenter="enter('4785144545835380546');" onmouseout="out('4785144545835380546');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3322 -                    addAndBindAddedApps(context, new ArrayList&lt;ItemInfo&gt;(), cb, added);                           </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3323 +                if (LauncherAppState.isDisableAllApps()) {                                                        </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3324 +                    final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);                        </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3325 +                    addAndBindAddedWorkspaceApps(context, addedInfos);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3326                  } else {                                                                                          </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3327 -                    final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);                        </span>
<span class="620263930069644182" onmouseenter="enter('620263930069644182');" onmouseout="out('620263930069644182');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3328 -                    addAndBindAddedApps(context, addedInfos, cb, added);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3329 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3330 -            }                                                                                                     </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3331 +                    addAppsToAllApps(context, added);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3332 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3333 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3334 +                                                                                                                  </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">3335              if (modified != null) {                                                                               </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">3336                  final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                                </span>
<span  style="">3337                                                                                                                    </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">3338                  // Update the launcher db to reflect the changes                                                  </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">3339                  for (AppInfo a : modifiedFinal) {                                                                 </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">3340                      ArrayList&lt;ItemInfo&gt; infos =                                                                   </span>
<span class="1259644807303209381" onmouseenter="enter('1259644807303209381');" onmouseout="out('1259644807303209381');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3341 -                            getItemInfoForComponentName(a.componentName);                                         </span>
<span class="4076745085710284833" onmouseenter="enter('4076745085710284833');" onmouseout="out('4076745085710284833');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3342 +                            getItemInfoForComponentName(a.componentName, mUser);                                  </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3343                      for (ItemInfo i : infos) {                                                                    </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">3344                          if (isShortcutInfoUpdateable(i)) {                                                        </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3345                              ShortcutInfo info = (ShortcutInfo) i;                                                 </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">3346                              info.title = a.title.toString();                                                      </span>
<span class="911685269403024085" onmouseenter="enter('911685269403024085');" onmouseout="out('911685269403024085');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3347 +                            info.contentDescription = a.contentDescription;                                       </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3348                              updateItemInDatabase(context, info);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3349                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3350                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3351                  }                                                                                                 </span>
<span  style="">3352                                                                                                                    </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3353                  mHandler.post(new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3354                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3355                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3356                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">3357                              callbacks.bindAppsUpdated(modifiedFinal);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3358                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3359                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3360                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3361              }                                                                                                     </span>
<span  style="">3362                                                                                                                    </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">3363              final ArrayList&lt;String&gt; removedPackageNames =                                                         </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">3364                      new ArrayList&lt;String&gt;();                                                                      </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">3365              if (mOp == OP_REMOVE) {                                                                               </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">3366                  // Mark all packages in the broadcast to be removed                                               </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">3367                  removedPackageNames.addAll(Arrays.asList(packages));                                              </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">3368              } else if (mOp == OP_UPDATE) {                                                                        </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">3369                  // Mark disabled packages in the broadcast to be removed                                          </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">3370                  final PackageManager pm = context.getPackageManager();                                            </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3371                  for (int i=0; i&lt;N; i++) {                                                                         </span>
<span class="2935426733804348481" onmouseenter="enter('2935426733804348481');" onmouseout="out('2935426733804348481');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3372 -                    if (isPackageDisabled(pm, packages[i])) {                                                     </span>
<span class="1189279971614907536" onmouseenter="enter('1189279971614907536');" onmouseout="out('1189279971614907536');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3373 +                    if (isPackageDisabled(context, packages[i], mUser)) {                                         </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">3374                          removedPackageNames.add(packages[i]);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3375                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3376                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3377              }                                                                                                     </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">3378              // Remove all the components associated with this package                                             </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">3379              for (String pn : removedPackageNames) {                                                               </span>
<span class="-8111972255125637177" onmouseenter="enter('-8111972255125637177');" onmouseout="out('-8111972255125637177');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3380 -                ArrayList&lt;ItemInfo&gt; infos = getItemInfoForPackageName(pn);                                        </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3381 -                for (ItemInfo i : infos) {                                                                        </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3382 -                    deleteItemFromDatabase(context, i);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3383 -                }                                                                                                 </span>
<span class="6482411304432401961" onmouseenter="enter('6482411304432401961');" onmouseout="out('6482411304432401961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3384 +                deletePackageFromDatabase(context, pn, mUser);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3385              }                                                                                                     </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">3386              // Remove all the specific components                                                                 </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">3387              for (AppInfo a : removedApps) {                                                                       </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3388 -                ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3389 -                for (ItemInfo i : infos) {                                                                        </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3390 -                    deleteItemFromDatabase(context, i);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3391 -                }                                                                                                 </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3392 +                ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);                  </span>
<span class="7293231507608058112" onmouseenter="enter('7293231507608058112');" onmouseout="out('7293231507608058112');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3393 +                deleteItemsFromDatabase(context, infos);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3394              }                                                                                                     </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">3395              if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                                       </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">3396                  // Remove any queued items from the install queue                                                 </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">3397                  String spKey = LauncherAppState.getSharedPreferencesKey();                                        </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">3398                  SharedPreferences sp =                                                                            </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">3399                          context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                                </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">3400                  InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                          </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">3401                  // Call the components-removed callback                                                           </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3402                  mHandler.post(new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3403                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3404                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3405                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="7123425932844918056" onmouseenter="enter('7123425932844918056');" onmouseout="out('7123425932844918056');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3406 -                            callbacks.bindComponentsRemoved(removedPackageNames, removedApps);                    </span>
<span class="-4641714223338514236" onmouseenter="enter('-4641714223338514236');" onmouseout="out('-4641714223338514236');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3407 +                            callbacks.bindComponentsRemoved(removedPackageNames, removedApps, mUser);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3408                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3409                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3410                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3411              }                                                                                                     </span>
<span  style="">3412                                                                                                                    </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">3413              final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                         </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3414 -                getSortedWidgetsAndShortcuts(context);                                                            </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3415 +                    getSortedWidgetsAndShortcuts(context);                                                        </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3416              mHandler.post(new Runnable() {                                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3417                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3418                  public void run() {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3419                      Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                  </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3420                      if (callbacks == cb &amp;&amp; cb != null) {                                                          </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">3421                          callbacks.bindPackagesUpdated(widgetsAndShortcuts);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3422                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3423                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3424              });                                                                                                   </span>
<span  style="">3425                                                                                                                    </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">3426              // Write all the logs to disk                                                                         </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3427              mHandler.post(new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3428                  public void run() {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3429                      Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                  </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3430                      if (callbacks == cb &amp;&amp; cb != null) {                                                          </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">3431                          callbacks.dumpLogsToLocalData();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3432                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3433                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3434              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3435          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3436      }                                                                                                             </span>
<span  style="">3437                                                                                                                    </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">3438      // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                              </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">3439      public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                               </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3440          PackageManager packageManager = context.getPackageManager();                                              </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">3441          final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                                    </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3442 -        widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());                </span>
<span class="3637822346102420347" onmouseenter="enter('3637822346102420347');" onmouseout="out('3637822346102420347');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3443 +        widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3444 +                                                                                                                  </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">3445          Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                                       </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">3446          widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));                     </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3447 -        Collections.sort(widgetsAndShortcuts,                                                                     </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3448 -            new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                                   </span>
<span class="3220762690300374865" onmouseenter="enter('3220762690300374865');" onmouseout="out('3220762690300374865');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3449 +        Collections.sort(widgetsAndShortcuts, new WidgetAndShortcutNameComparator(context));                      </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">3450          return widgetsAndShortcuts;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3451      }                                                                                                             </span>
<span  style="">3452                                                                                                                    </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3453 -    private static boolean isPackageDisabled(PackageManager pm, String packageName) {                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3454 -        try {                                                                                                     </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3455 -            PackageInfo pi = pm.getPackageInfo(packageName, 0);                                                   </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3456 -            return !pi.applicationInfo.enabled;                                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3457 -        } catch (NameNotFoundException e) {                                                                       </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3458 -            // Fall through                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3459 -        }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3460 -        return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3461 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3462 -                                                                                                                  </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3463 -    public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                          </span>
<span class="-7287747070935657411" onmouseenter="enter('-7287747070935657411');" onmouseout="out('-7287747070935657411');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3464 +    private static boolean isPackageDisabled(Context context, String packageName,                                 </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3465 +            UserHandleCompat user) {                                                                              </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3466 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="2722752944691677150" onmouseenter="enter('2722752944691677150');" onmouseout="out('2722752944691677150');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3467 +        return !launcherApps.isPackageEnabledForProfile(packageName, user);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3468 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3469 +                                                                                                                  </span>
<span class="5738691957451055953" onmouseenter="enter('5738691957451055953');" onmouseout="out('5738691957451055953');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3470 +    public static boolean isValidPackageActivity(Context context, ComponentName cn,                               </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3471 +            UserHandleCompat user) {                                                                              </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">3472          if (cn == null) {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3473              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3474          }                                                                                                         </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3475 -        if (isPackageDisabled(pm, cn.getPackageName())) {                                                         </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3476 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="-6788056339565196353" onmouseenter="enter('-6788056339565196353');" onmouseout="out('-6788056339565196353');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3477 +        if (!launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user)) {                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3478              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3479          }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3480 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3481 -        try {                                                                                                     </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3482 -            // Check the activity                                                                                 </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3483 -            PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                           </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3484 -            return (pm.getActivityInfo(cn, 0) != null);                                                           </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3485 -        } catch (NameNotFoundException e) {                                                                       </span>
<span class="6138596583040601663" onmouseenter="enter('6138596583040601663');" onmouseout="out('6138596583040601663');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3486 +        return launcherApps.isActivityEnabledForProfile(cn, user);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3487 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3488 +                                                                                                                  </span>
<span class="5839979877555451943" onmouseenter="enter('5839979877555451943');" onmouseout="out('5839979877555451943');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3489 +    public static boolean isValidPackage(Context context, String packageName,                                     </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3490 +            UserHandleCompat user) {                                                                              </span>
<span class="2797777100746091358" onmouseenter="enter('2797777100746091358');" onmouseout="out('2797777100746091358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3491 +        if (packageName == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3492              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3493          }                                                                                                         </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3494 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="7814688882071205012" onmouseenter="enter('7814688882071205012');" onmouseout="out('7814688882071205012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3495 +        return launcherApps.isPackageEnabledForProfile(packageName, user);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3496      }                                                                                                             </span>
<span  style="">3497                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3498      /**                                                                                                           </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">3499       * Make an ShortcutInfo object for a restored application or shortcut item that points                        </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">3500       * to a package that is not yet installed on the system.                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3501       */                                                                                                           </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3502 -    public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                                      </span>
<span class="6864587742410665601" onmouseenter="enter('6864587742410665601');" onmouseout="out('6864587742410665601');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3503 +    public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent,                         </span>
<span class="-9038086405553223291" onmouseenter="enter('-9038086405553223291');" onmouseout="out('-9038086405553223291');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3504 +            int promiseType) {                                                                                    </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3505          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3506 -        info.usingFallbackIcon = true;                                                                            </span>
<span class="4720658287044976809" onmouseenter="enter('4720658287044976809');" onmouseout="out('4720658287044976809');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3507 -        info.setIcon(getFallbackIcon());                                                                          </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3508 -        if (cursor != null) {                                                                                     </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3509 -            info.title =  cursor.getString(titleIndex);                                                           </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3510 +        info.user = UserHandleCompat.myUserHandle();                                                              </span>
<span class="4581768130100169027" onmouseenter="enter('4581768130100169027');" onmouseout="out('4581768130100169027');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3511 +        mIconCache.getTitleAndIcon(info, intent, info.user, true);                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3512 +                                                                                                                  </span>
<span class="-7011074266974647989" onmouseenter="enter('-7011074266974647989');" onmouseout="out('-7011074266974647989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3513 +        if ((promiseType &amp; ShortcutInfo.FLAG_RESTORED_ICON) != 0) {                                               </span>
<span class="-8984449213491193878" onmouseenter="enter('-8984449213491193878');" onmouseout="out('-8984449213491193878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3514 +            String title = (cursor != null) ? cursor.getString(titleIndex) : null;                                </span>
<span class="-5841612334834081385" onmouseenter="enter('-5841612334834081385');" onmouseout="out('-5841612334834081385');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3515 +            if (!TextUtils.isEmpty(title)) {                                                                      </span>
<span class="-2613617994889375298" onmouseenter="enter('-2613617994889375298');" onmouseout="out('-2613617994889375298');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3516 +                info.title = title;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3517 +            }                                                                                                     </span>
<span class="-5174755841373748942" onmouseenter="enter('-5174755841373748942');" onmouseout="out('-5174755841373748942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3518 +            info.status = ShortcutInfo.FLAG_RESTORED_ICON;                                                        </span>
<span class="2528235782114549087" onmouseenter="enter('2528235782114549087');" onmouseout="out('2528235782114549087');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3519 +        } else if  ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {                                     </span>
<span class="-7717414875603328452" onmouseenter="enter('-7717414875603328452');" onmouseout="out('-7717414875603328452');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3520 +            if (TextUtils.isEmpty(info.title)) {                                                                  </span>
<span class="-5806908871812941257" onmouseenter="enter('-5806908871812941257');" onmouseout="out('-5806908871812941257');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3521 +                info.title = (cursor != null) ? cursor.getString(titleIndex) : &quot;&quot;;                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3522 +            }                                                                                                     </span>
<span class="-4388547064813731487" onmouseenter="enter('-4388547064813731487');" onmouseout="out('-4388547064813731487');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3523 +            info.status = ShortcutInfo.FLAG_AUTOINTALL_ICON;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3524          } else {                                                                                                  </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3525 -            info.title = &quot;&quot;;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3526 -        }                                                                                                         </span>
<span class="5717376002108262372" onmouseenter="enter('5717376002108262372');" onmouseout="out('5717376002108262372');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3527 +            throw new InvalidParameterException(&quot;Invalid restoreType &quot; + promiseType);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3528 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3529 +                                                                                                                  </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3530 +        info.contentDescription = mUserManager.getBadgedLabelForUser(                                             </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3531 +                info.title.toString(), info.user);                                                                </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3532          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                            </span>
<span class="-3783926904025262102" onmouseenter="enter('-3783926904025262102');" onmouseout="out('-3783926904025262102');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3533 +        info.promisedIntent = intent;                                                                             </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3534          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3535      }                                                                                                             </span>
<span  style="">3536                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3537      /**                                                                                                           </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">3538       * Make an Intent object for a restored application or shortcut item that points                              </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">3539       * to the market page for the item.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3540       */                                                                                                           </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">3541      private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                              </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3542          ComponentName componentName = intent.getComponent();                                                      </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3543 -        Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                                     </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3544 -        Uri marketUri = new Uri.Builder()                                                                         </span>
<span class="-3881801991978262069" onmouseenter="enter('-3881801991978262069');" onmouseout="out('-3881801991978262069');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3545 +        return getMarketIntent(componentName.getPackageName());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3546 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3547 +                                                                                                                  </span>
<span class="-3260913833937220020" onmouseenter="enter('-3260913833937220020');" onmouseout="out('-3260913833937220020');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3548 +    static Intent getMarketIntent(String packageName) {                                                           </span>
<span class="-9094317775268459694" onmouseenter="enter('-9094317775268459694');" onmouseout="out('-9094317775268459694');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3549 +        return new Intent(Intent.ACTION_VIEW)                                                                     </span>
<span class="273234347361851615" onmouseenter="enter('273234347361851615');" onmouseout="out('273234347361851615');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3550 +            .setData(new Uri.Builder()                                                                            </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">3551                  .scheme(&quot;market&quot;)                                                                                 </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">3552                  .authority(&quot;details&quot;)                                                                             </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3553 -                .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                                       </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3554 -                .build();                                                                                         </span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3555 -        Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                           </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3556 -        marketIntent.setData(marketUri);                                                                          </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3557 -        return marketIntent;                                                                                      </span>
<span class="6782694763028009203" onmouseenter="enter('6782694763028009203');" onmouseout="out('6782694763028009203');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3558 +                .appendQueryParameter(&quot;id&quot;, packageName)                                                          </span>
<span class="-5732724158529108102" onmouseenter="enter('-5732724158529108102');" onmouseout="out('-5732724158529108102');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3559 +                .build());                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3560      }                                                                                                             </span>
<span  style="">3561                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3562      /**                                                                                                           </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">3563       * This is called from the code that adds shortcuts from the intent receiver.  This                           </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">3564       * doesn&#x27;t have a Cursor, but                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3565       */                                                                                                           </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3566 -    public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {                 </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3567 -        return getShortcutInfo(manager, intent, context, null, -1, -1, null);                                     </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3568 +    public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                                    </span>
<span class="6504255554925479471" onmouseenter="enter('6504255554925479471');" onmouseout="out('6504255554925479471');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3569 +            UserHandleCompat user, Context context) {                                                             </span>
<span class="-7378868523772977866" onmouseenter="enter('-7378868523772977866');" onmouseout="out('-7378868523772977866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3570 +        return getShortcutInfo(manager, intent, user, context, null, -1, -1, null, false);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3571      }                                                                                                             </span>
<span  style="">3572                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3573      /**                                                                                                           </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">3574       * Make an ShortcutInfo object for a shortcut that is an application.                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">3575       *                                                                                                            </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">3576       * If c is not null, then it will be used to fill in missing data like the title and icon.                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3577       */                                                                                                           </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3578 -    public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,                   </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3579 -            Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3580 +    public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                                    </span>
<span class="-8761535452245299531" onmouseenter="enter('-8761535452245299531');" onmouseout="out('-8761535452245299531');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3581 +            UserHandleCompat user, Context context, Cursor c, int iconIndex, int titleIndex,                      </span>
<span class="3517019325264382616" onmouseenter="enter('3517019325264382616');" onmouseout="out('3517019325264382616');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3582 +            HashMap&lt;Object, CharSequence&gt; labelCache, boolean allowMissingTarget) {                               </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3583 +        if (user == null) {                                                                                       </span>
<span class="6545168092911351889" onmouseenter="enter('6545168092911351889');" onmouseout="out('6545168092911351889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3584 +            Log.d(TAG, &quot;Null user found in getShortcutInfo&quot;);                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3585 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3586 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3587 +                                                                                                                  </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3588          ComponentName componentName = intent.getComponent();                                                      </span>
<span class="-5224470428335408787" onmouseenter="enter('-5224470428335408787');" onmouseout="out('-5224470428335408787');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3589 +        if (componentName == null) {                                                                              </span>
<span class="4371782537001302642" onmouseenter="enter('4371782537001302642');" onmouseout="out('4371782537001302642');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3590 +            Log.d(TAG, &quot;Missing component found in getShortcutInfo: &quot; + componentName);                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3591 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3592 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3593 +                                                                                                                  </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3594 +        Intent newIntent = new Intent(intent.getAction(), null);                                                  </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3595 +        newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                          </span>
<span class="6894377559056826774" onmouseenter="enter('6894377559056826774');" onmouseout="out('6894377559056826774');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3596 +        newIntent.setComponent(componentName);                                                                    </span>
<span class="-966571371435372555" onmouseenter="enter('-966571371435372555');" onmouseout="out('-966571371435372555');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3597 +        LauncherActivityInfoCompat lai = mLauncherApps.resolveActivity(newIntent, user);                          </span>
<span class="6800790308293325816" onmouseenter="enter('6800790308293325816');" onmouseout="out('6800790308293325816');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3598 +        if ((lai == null) &amp;&amp; !allowMissingTarget) {                                                               </span>
<span class="-2395110402435537171" onmouseenter="enter('-2395110402435537171');" onmouseout="out('-2395110402435537171');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3599 +            Log.d(TAG, &quot;Missing activity found in getShortcutInfo: &quot; + componentName);                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3600 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3601 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3602 +                                                                                                                  </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3603          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3604 -        if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                          </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3605 -            Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3606 -            return null;                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3607 -        } else {                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3608 -            try {                                                                                                 </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3609 -                PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);                       </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3610 -                info.initFlagsAndFirstInstallTime(pi);                                                            </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3611 -            } catch (NameNotFoundException e) {                                                                   </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3612 -                Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                                    </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3613 -                        componentName.getPackageName());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3614 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3615 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3616 -                                                                                                                  </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3617 -        // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                                  </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3618 -        // then return null &amp; delete this.                                                                        </span>
<span  style="">3619                                                                                                                    </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">3620          // the resource -- This may implicitly give us back the fallback icon,                                    </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">3621          // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                                 </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">3622          // to avoid saving lots of copies of that in the database, and most apps                                  </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">3623          // have icons anyway.                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3624 -                                                                                                                  </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3625 -        // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and               </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3626 -        // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info              </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3627 -        // via resolveActivity().                                                                                 </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3628 -        Bitmap icon = null;                                                                                       </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3629 -        ResolveInfo resolveInfo = null;                                                                           </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3630 -        ComponentName oldComponent = intent.getComponent();                                                       </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3631 -        Intent newIntent = new Intent(intent.getAction(), null);                                                  </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3632 -        newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                          </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3633 -        newIntent.setPackage(oldComponent.getPackageName());                                                      </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3634 -        List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                                    </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3635 -        for (ResolveInfo i : infos) {                                                                             </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3636 -            ComponentName cn = new ComponentName(i.activityInfo.packageName,                                      </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3637 -                    i.activityInfo.name);                                                                         </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3638 -            if (cn.equals(oldComponent)) {                                                                        </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3639 -                resolveInfo = i;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3640 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3641 -        }                                                                                                         </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3642 -        if (resolveInfo == null) {                                                                                </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3643 -            resolveInfo = manager.resolveActivity(intent, 0);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3644 -        }                                                                                                         </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3645 -        if (resolveInfo != null) {                                                                                </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3646 -            icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3647 -        }                                                                                                         </span>
<span class="-6777959075043703494" onmouseenter="enter('-6777959075043703494');" onmouseout="out('-6777959075043703494');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3648 +        Bitmap icon = mIconCache.getIcon(componentName, lai, labelCache);                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3649 +                                                                                                                  </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3650          // the db                                                                                                 </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3651          if (icon == null) {                                                                                       </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3652              if (c != null) {                                                                                      </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3653                  icon = getIconFromCursor(c, iconIndex, context);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3654              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3655          }                                                                                                         </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3656          // the fallback icon                                                                                      </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3657          if (icon == null) {                                                                                       </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3658 -            icon = getFallbackIcon();                                                                             </span>
<span class="-1443979577510132687" onmouseenter="enter('-1443979577510132687');" onmouseout="out('-1443979577510132687');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3659 +            icon = mIconCache.getDefaultIcon(user);                                                               </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3660              info.usingFallbackIcon = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3661          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3662          info.setIcon(icon);                                                                                       </span>
<span  style="">3663                                                                                                                    </span>
<span class="-7595242445841823644" onmouseenter="enter('-7595242445841823644');" onmouseout="out('-7595242445841823644');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3664 +        // From the cache.                                                                                        </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3665 +        if (labelCache != null) {                                                                                 </span>
<span class="3073733017601521903" onmouseenter="enter('3073733017601521903');" onmouseout="out('3073733017601521903');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3666 +            info.title = labelCache.get(componentName);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3667 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3668 +                                                                                                                  </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">3669          // from the resource                                                                                      </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3670 -        if (resolveInfo != null) {                                                                                </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3671 -            ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);                       </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3672 -            if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                              </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3673 -                info.title = labelCache.get(key);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3674 -            } else {                                                                                              </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3675 -                info.title = resolveInfo.activityInfo.loadLabel(manager);                                         </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3676 -                if (labelCache != null) {                                                                         </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3677 -                    labelCache.put(key, info.title);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3678 -                }                                                                                                 </span>
<span class="6778614741206473497" onmouseenter="enter('6778614741206473497');" onmouseout="out('6778614741206473497');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3679 +        if (info.title == null &amp;&amp; lai != null) {                                                                  </span>
<span class="-4488945615052684527" onmouseenter="enter('-4488945615052684527');" onmouseout="out('-4488945615052684527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3680 +            info.title = lai.getLabel();                                                                          </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3681 +            if (labelCache != null) {                                                                             </span>
<span class="-3170508962365680295" onmouseenter="enter('-3170508962365680295');" onmouseout="out('-3170508962365680295');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3682 +                labelCache.put(componentName, info.title);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3683              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3684          }                                                                                                         </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">3685          // from the db                                                                                            </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3686          if (info.title == null) {                                                                                 </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3687              if (c != null) {                                                                                      </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">3688                  info.title =  c.getString(titleIndex);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3689              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3690          }                                                                                                         </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">3691          // fall back to the class name of the activity                                                            </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3692          if (info.title == null) {                                                                                 </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">3693              info.title = componentName.getClassName();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3694          }                                                                                                         </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3695          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                         </span>
<span class="-7567614667172676383" onmouseenter="enter('-7567614667172676383');" onmouseout="out('-7567614667172676383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3696 +        info.user = user;                                                                                         </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3697 +        info.contentDescription = mUserManager.getBadgedLabelForUser(                                             </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3698 +                info.title.toString(), info.user);                                                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3699          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3700      }                                                                                                             </span>
<span  style="">3701                                                                                                                    </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3702      static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                                        </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3703              ItemInfoFilter f) {                                                                                   </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3704          HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                                     </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3705          for (ItemInfo i : infos) {                                                                                </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3706              if (i instanceof ShortcutInfo) {                                                                      </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3707                  ShortcutInfo info = (ShortcutInfo) i;                                                             </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3708 -                ComponentName cn = info.intent.getComponent();                                                    </span>
<span class="-8411217647144645125" onmouseenter="enter('-8411217647144645125');" onmouseout="out('-8411217647144645125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3709 +                ComponentName cn = info.getTargetComponent();                                                     </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3710                  if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                                 </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3711                      filtered.add(info);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3712                  }                                                                                                 </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3713              } else if (i instanceof FolderInfo) {                                                                 </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3714                  FolderInfo info = (FolderInfo) i;                                                                 </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3715                  for (ShortcutInfo s : info.contents) {                                                            </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3716 -                    ComponentName cn = s.intent.getComponent();                                                   </span>
<span class="-5499244430299718871" onmouseenter="enter('-5499244430299718871');" onmouseout="out('-5499244430299718871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3717 +                    ComponentName cn = s.getTargetComponent();                                                    </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3718                      if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                                </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3719                          filtered.add(s);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3720                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3721                  }                                                                                                 </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3722              } else if (i instanceof LauncherAppWidgetInfo) {                                                      </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3723                  LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                           </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3724                  ComponentName cn = info.providerName;                                                             </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3725                  if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                                 </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3726                      filtered.add(info);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3727                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3728              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3729          }                                                                                                         </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3730          return new ArrayList&lt;ItemInfo&gt;(filtered);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3731      }                                                                                                             </span>
<span  style="">3732                                                                                                                    </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3733 -    private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                                      </span>
<span class="-6017059906416334391" onmouseenter="enter('-6017059906416334391');" onmouseout="out('-6017059906416334391');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3734 +    private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname,                            </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3735 +            final UserHandleCompat user) {                                                                        </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3736          ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3737              @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3738              public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3739 -                return cn.getPackageName().equals(pn);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3740 -            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3741 -        };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3742 -        return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3743 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3744 -                                                                                                                  </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3745 -    private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                          </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3746 -        ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3747 -            @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3748 -            public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3749 -                return cn.equals(cname);                                                                          </span>
<span class="5970365724964589884" onmouseenter="enter('5970365724964589884');" onmouseout="out('5970365724964589884');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3750 +                if (info.user == null) {                                                                          </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3751 +                    return cn.equals(cname);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3752 +                } else {                                                                                          </span>
<span class="9080235702604787251" onmouseenter="enter('9080235702604787251');" onmouseout="out('9080235702604787251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3753 +                    return cn.equals(cname) &amp;&amp; info.user.equals(user);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3754 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3755              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3756          };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3757          return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3758      }                                                                                                             </span>
<span  style="">3759                                                                                                                    </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3760      public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                                  </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3761          if (i instanceof ShortcutInfo) {                                                                          </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3762              ShortcutInfo info = (ShortcutInfo) i;                                                                 </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3763              // We need to check for ACTION_MAIN otherwise getComponent() might                                    </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3764              // return null for some shortcuts (for instance, for shortcuts to                                     </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3765              // web pages.)                                                                                        </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3766              Intent intent = info.intent;                                                                          </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3767              ComponentName name = intent.getComponent();                                                           </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3768              if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                              </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3769                      Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3770                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3771              }                                                                                                     </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3772 +            // placeholder shortcuts get special treatment, let them through too.                                 </span>
<span class="-8737155453802783041" onmouseenter="enter('-8737155453802783041');" onmouseout="out('-8737155453802783041');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3773 +            if (info.isPromise()) {                                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3774 +                return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3775 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3776          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3777          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3778      }                                                                                                             </span>
<span  style="">3779                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3780      /**                                                                                                           </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3781       * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3782       */                                                                                                           </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3783      private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                               </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3784              int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,                        </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3785              int titleIndex) {                                                                                     </span>
<span  style="">3786                                                                                                                    </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3787          Bitmap icon = null;                                                                                       </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3788          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="5882358276056228538" onmouseenter="enter('5882358276056228538');" onmouseout="out('5882358276056228538');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3789 +        // Non-app shortcuts are only supported for current user.                                                 </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3790 +        info.user = UserHandleCompat.myUserHandle();                                                              </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3791          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                            </span>
<span  style="">3792                                                                                                                    </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3793          // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                           </span>
<span  style="">3794                                                                                                                    </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3795          info.title = c.getString(titleIndex);                                                                     </span>
<span  style="">3796                                                                                                                    </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3797          int iconType = c.getInt(iconTypeIndex);                                                                   </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3798          switch (iconType) {                                                                                       </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3799          case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                                       </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3800              String packageName = c.getString(iconPackageIndex);                                                   </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3801              String resourceName = c.getString(iconResourceIndex);                                                 </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3802              PackageManager packageManager = context.getPackageManager();                                          </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3803              info.customIcon = false;                                                                              </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3804              // the resource                                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3805              try {                                                                                                 </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3806                  Resources resources = packageManager.getResourcesForApplication(packageName);                     </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3807                  if (resources != null) {                                                                          </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3808                      final int id = resources.getIdentifier(resourceName, null, null);                             </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3809                      icon = Utilities.createIconBitmap(                                                            </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3810                              mIconCache.getFullResIcon(resources, id), context);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3811                  }                                                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3812              } catch (Exception e) {                                                                               </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3813                  // drop this.  we have other places to look for icons                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3814              }                                                                                                     </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3815              // the db                                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3816              if (icon == null) {                                                                                   </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3817                  icon = getIconFromCursor(c, iconIndex, context);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3818              }                                                                                                     </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3819              // the fallback icon                                                                                  </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3820              if (icon == null) {                                                                                   </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3821 -                icon = getFallbackIcon();                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3822 +                icon = mIconCache.getDefaultIcon(info.user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3823                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3824              }                                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3825              break;                                                                                                </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3826          case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                         </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3827              icon = getIconFromCursor(c, iconIndex, context);                                                      </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3828              if (icon == null) {                                                                                   </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3829 -                icon = getFallbackIcon();                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3830 +                icon = mIconCache.getDefaultIcon(info.user);                                                      </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3831                  info.customIcon = false;                                                                          </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3832                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3833              } else {                                                                                              </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3834                  info.customIcon = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3835              }                                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3836              break;                                                                                                </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3837          default:                                                                                                  </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3838 -            icon = getFallbackIcon();                                                                             </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3839 +            icon = mIconCache.getDefaultIcon(info.user);                                                          </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3840              info.usingFallbackIcon = true;                                                                        </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3841              info.customIcon = false;                                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3842              break;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3843          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3844          info.setIcon(icon);                                                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3845          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3846      }                                                                                                             </span>
<span  style="">3847                                                                                                                    </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3848      Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3849          @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                                    </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3850          final boolean debug = false;                                                                              </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3851          if (debug) {                                                                                              </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3852              Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                                   </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3853                      + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3854          }                                                                                                         </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3855          byte[] data = c.getBlob(iconIndex);                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3856          try {                                                                                                     </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3857              return Utilities.createIconBitmap(                                                                    </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3858                      BitmapFactory.decodeByteArray(data, 0, data.length), context);                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3859          } catch (Exception e) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3860              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3861          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3862      }                                                                                                             </span>
<span  style="">3863                                                                                                                    </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3864      ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                            </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3865              int cellX, int cellY, boolean notify) {                                                               </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3866          final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                                    </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3867          if (info == null) {                                                                                       </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3868              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3869          }                                                                                                         </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3870          addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                                </span>
<span  style="">3871                                                                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3872          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3873      }                                                                                                             </span>
<span  style="">3874                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3875      /**                                                                                                           </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3876       * Attempts to find an AppWidgetProviderInfo that matches the given component.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3877       */                                                                                                           </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3878 -    AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                                 </span>
<span class="-8933877649522571458" onmouseenter="enter('-8933877649522571458');" onmouseout="out('-8933877649522571458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3879 +    static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                          </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3880              ComponentName component) {                                                                            </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3881          List&lt;AppWidgetProviderInfo&gt; widgets =                                                                     </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3882              AppWidgetManager.getInstance(context).getInstalledProviders();                                        </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3883          for (AppWidgetProviderInfo info : widgets) {                                                              </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3884              if (info.provider.equals(component)) {                                                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3885                  return info;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3886              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3887          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3888          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3889 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3890 -                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3891 -    /**                                                                                                           </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3892 -     * Returns a list of all the widgets that can handle configuration with a particular mimeType.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3893 -     */                                                                                                           </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3894 -    List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {                 </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3895 -        final PackageManager packageManager = context.getPackageManager();                                        </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3896 -        final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                                  </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3897 -            new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3898 -                                                                                                                  </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3899 -        final Intent supportsIntent =                                                                             </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3900 -            new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                                  </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3901 -        supportsIntent.setType(mimeType);                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3902 -                                                                                                                  </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3903 -        // Create a set of widget configuration components that we can test against                               </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3904 -        final List&lt;AppWidgetProviderInfo&gt; widgets =                                                               </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3905 -            AppWidgetManager.getInstance(context).getInstalledProviders();                                        </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3906 -        final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =                      </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3907 -            new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                                  </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3908 -        for (AppWidgetProviderInfo info : widgets) {                                                              </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3909 -            configurationComponentToWidget.put(info.configure, info);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3910 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3911 -                                                                                                                  </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3912 -        // Run through each of the intents that can handle this type of clip data, and cross                      </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3913 -        // reference them with the components that are actual configuration components                            </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3914 -        final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,                 </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3915 -                PackageManager.MATCH_DEFAULT_ONLY);                                                               </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3916 -        for (ResolveInfo info : activities) {                                                                     </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3917 -            final ActivityInfo activityInfo = info.activityInfo;                                                  </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3918 -            final ComponentName infoComponent = new ComponentName(activityInfo.packageName,                       </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3919 -                    activityInfo.name);                                                                           </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3920 -            if (configurationComponentToWidget.containsKey(infoComponent)) {                                      </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3921 -                supportedConfigurationActivities.add(                                                             </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3922 -                        new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                                 </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3923 -                                configurationComponentToWidget.get(infoComponent)));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3924 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3925 -        }                                                                                                         </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3926 -        return supportedConfigurationActivities;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3927      }                                                                                                             </span>
<span  style="">3928                                                                                                                    </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3929      ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {                      </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3930          Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                                    </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3931          String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                            </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3932          Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                                  </span>
<span  style="">3933                                                                                                                    </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3934          if (intent == null) {                                                                                     </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3935              // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null                  </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3936              Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3937              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3938          }                                                                                                         </span>
<span  style="">3939                                                                                                                    </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3940          Bitmap icon = null;                                                                                       </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3941          boolean customIcon = false;                                                                               </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3942          ShortcutIconResource iconResource = null;                                                                 </span>
<span  style="">3943                                                                                                                    </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3944          if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                         </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3945              icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);                   </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3946              customIcon = true;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3947          } else {                                                                                                  </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3948              Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);                      </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3949              if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3950                  try {                                                                                             </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3951                      iconResource = (ShortcutIconResource) extra;                                                  </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3952                      final PackageManager packageManager = context.getPackageManager();                            </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3953                      Resources resources = packageManager.getResourcesForApplication(                              </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3954                              iconResource.packageName);                                                            </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3955                      final int id = resources.getIdentifier(iconResource.resourceName, null, null);                </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3956                      icon = Utilities.createIconBitmap(                                                            </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3957 -                            mIconCache.getFullResIcon(resources, id), context);                                   </span>
<span class="2974405441716858047" onmouseenter="enter('2974405441716858047');" onmouseout="out('2974405441716858047');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3958 +                            mIconCache.getFullResIcon(resources, id),                                             </span>
<span class="-7033093369240644837" onmouseenter="enter('-7033093369240644837');" onmouseout="out('-7033093369240644837');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3959 +                            context);                                                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3960                  } catch (Exception e) {                                                                           </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3961                      Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3962                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3963              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3964          }                                                                                                         </span>
<span  style="">3965                                                                                                                    </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3966          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span  style="">3967                                                                                                                    </span>
<span class="2102380556199177801" onmouseenter="enter('2102380556199177801');" onmouseout="out('2102380556199177801');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3968 +        // Only support intents for current user for now. Intents sent from other                                 </span>
<span class="2194655253408912185" onmouseenter="enter('2194655253408912185');" onmouseout="out('2194655253408912185');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3969 +        // users wouldn&#x27;t get here without intent forwarding anyway.                                              </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3970 +        info.user = UserHandleCompat.myUserHandle();                                                              </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3971          if (icon == null) {                                                                                       </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3972              if (fallbackIcon != null) {                                                                           </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3973                  icon = fallbackIcon;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3974              } else {                                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3975 -                icon = getFallbackIcon();                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3976 +                icon = mIconCache.getDefaultIcon(info.user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3977                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3978              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3979          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3980          info.setIcon(icon);                                                                                       </span>
<span  style="">3981                                                                                                                    </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3982          info.title = name;                                                                                        </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3983 +        info.contentDescription = mUserManager.getBadgedLabelForUser(                                             </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3984 +                info.title.toString(), info.user);                                                                </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3985          info.intent = intent;                                                                                     </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3986          info.customIcon = customIcon;                                                                             </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3987          info.iconResource = iconResource;                                                                         </span>
<span  style="">3988                                                                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3989          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3990      }                                                                                                             </span>
<span  style="">3991                                                                                                                    </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3992      boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,                      </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3993              int iconIndex) {                                                                                      </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3994          // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                             </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3995          if (!mAppsCanBeOnRemoveableStorage) {                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3996              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3997          }                                                                                                         </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3998          // If this icon doesn&#x27;t have a custom icon, check to see                                                  </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3999          // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                                  </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">4000          // we&#x27;re going to show, store what we are going to show back                                              </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">4001          // into the DB.  We do this so when we&#x27;re loading, if the                                                 </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">4002          // package manager can&#x27;t find an icon (for example because                                                </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">4003          // the app is on SD) then we can use that instead.                                                        </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">4004          if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                                        </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">4005              cache.put(info, c.getBlob(iconIndex));                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">4006              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4007          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">4008          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4009      }                                                                                                             </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">4010      void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                                       </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">4011          boolean needSave = false;                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">4012          try {                                                                                                     </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">4013              if (data != null) {                                                                                   </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">4014                  Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                               </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">4015                  Bitmap loaded = info.getIcon(mIconCache);                                                         </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">4016                  needSave = !saved.sameAs(loaded);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4017              } else {                                                                                              </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">4018                  needSave = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4019              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">4020          } catch (Exception e) {                                                                                   </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">4021              needSave = true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4022          }                                                                                                         </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">4023          if (needSave) {                                                                                           </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">4024              Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                             </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">4025              // This is slower than is ideal, but this only happens once                                           </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">4026              // or when the app is updated with a new icon.                                                        </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">4027              updateItemInDatabase(context, info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4028          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4029      }                                                                                                             </span>
<span  style="">4030                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">4031      /**                                                                                                           </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">4032       * Return an existing FolderInfo object if we have encountered this ID previously,                            </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">4033       * or make a new one.                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">4034       */                                                                                                           </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">4035      private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {                      </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">4036          // See if a placeholder was created for us already                                                        </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">4037          FolderInfo folderInfo = folders.get(id);                                                                  </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">4038          if (folderInfo == null) {                                                                                 </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">4039              // No placeholder -- create a new instance                                                            </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">4040              folderInfo = new FolderInfo();                                                                        </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">4041              folders.put(id, folderInfo);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4042          }                                                                                                         </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">4043          return folderInfo;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4044      }                                                                                                             </span>
<span  style="">4045                                                                                                                    </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">4046      public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                              </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">4047          final Collator collator = Collator.getInstance();                                                         </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">4048          return new Comparator&lt;AppInfo&gt;() {                                                                        </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">4049              public final int compare(AppInfo a, AppInfo b) {                                                      </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4050 -                int result = collator.compare(a.title.toString().trim(),                                          </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4051 -                        b.title.toString().trim());                                                               </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4052 -                if (result == 0) {                                                                                </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4053 -                    result = a.componentName.compareTo(b.componentName);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4054 -                }                                                                                                 </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4055 -                return result;                                                                                    </span>
<span class="3541515045662468306" onmouseenter="enter('3541515045662468306');" onmouseout="out('3541515045662468306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4056 +                if (a.user.equals(b.user)) {                                                                      </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4057 +                    int result = collator.compare(a.title.toString().trim(),                                      </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4058 +                            b.title.toString().trim());                                                           </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4059 +                    if (result == 0) {                                                                            </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4060 +                        result = a.componentName.compareTo(b.componentName);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4061 +                    }                                                                                             </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4062 +                    return result;                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4063 +                } else {                                                                                          </span>
<span class="-4940624116090922199" onmouseenter="enter('-4940624116090922199');" onmouseout="out('-4940624116090922199');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4064 +                    // TODO Need to figure out rules for sorting                                                  </span>
<span class="-7580798058375972430" onmouseenter="enter('-7580798058375972430');" onmouseout="out('-7580798058375972430');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4065 +                    // profiles, this puts work second.                                                           </span>
<span class="-437659129845370257" onmouseenter="enter('-437659129845370257');" onmouseout="out('-437659129845370257');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4066 +                    return a.user.toString().compareTo(b.user.toString());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4067 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4068              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4069          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4070      }                                                                                                             </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">4071      public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                           </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">4072              = new Comparator&lt;AppInfo&gt;() {                                                                         </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">4073          public final int compare(AppInfo a, AppInfo b) {                                                          </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">4074              if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                                </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">4075              if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                               </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">4076              return 0;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4077          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4078      };                                                                                                            </span>
<span class="-8609474311948503984" onmouseenter="enter('-8609474311948503984');" onmouseout="out('-8609474311948503984');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4079 -    public static final Comparator&lt;AppWidgetProviderInfo&gt; getWidgetNameComparator() {                             </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4080 -        final Collator collator = Collator.getInstance();                                                         </span>
<span class="-2259377864696368534" onmouseenter="enter('-2259377864696368534');" onmouseout="out('-2259377864696368534');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4081 -        return new Comparator&lt;AppWidgetProviderInfo&gt;() {                                                          </span>
<span class="-678507615594739242" onmouseenter="enter('-678507615594739242');" onmouseout="out('-678507615594739242');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4082 -            public final int compare(AppWidgetProviderInfo a, AppWidgetProviderInfo b) {                          </span>
<span class="2077578932126968211" onmouseenter="enter('2077578932126968211');" onmouseout="out('2077578932126968211');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4083 -                return collator.compare(a.label.toString().trim(), b.label.toString().trim());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4084 -            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4085 -        };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4086 -    }                                                                                                             </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">4087      static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                                      </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">4088          if (info.activityInfo != null) {                                                                          </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">4089              return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4090          } else {                                                                                                  </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">4091              return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4092          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4093      }                                                                                                             </span>
<span class="-1238156797468239183" onmouseenter="enter('-1238156797468239183');" onmouseout="out('-1238156797468239183');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4094 -    public static class ShortcutNameComparator implements Comparator&lt;ResolveInfo&gt; {                               </span>
<span class="-5604165961236567660" onmouseenter="enter('-5604165961236567660');" onmouseout="out('-5604165961236567660');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4095 +    public static class ShortcutNameComparator implements Comparator&lt;LauncherActivityInfoCompat&gt; {                </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">4096          private Collator mCollator;                                                                               </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4097 -        private PackageManager mPackageManager;                                                                   </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">4098          private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                                        </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">4099          ShortcutNameComparator(PackageManager pm) {                                                               </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4100 -            mPackageManager = pm;                                                                                 </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">4101              mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">4102              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4103          }                                                                                                         </span>
<span class="-5325604689380562785" onmouseenter="enter('-5325604689380562785');" onmouseout="out('-5325604689380562785');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4104 -        ShortcutNameComparator(PackageManager pm, HashMap&lt;Object, CharSequence&gt; labelCache) {                     </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4105 -            mPackageManager = pm;                                                                                 </span>
<span class="3595266679393364065" onmouseenter="enter('3595266679393364065');" onmouseout="out('3595266679393364065');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4106 +        ShortcutNameComparator(HashMap&lt;Object, CharSequence&gt; labelCache) {                                        </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">4107              mLabelCache = labelCache;                                                                             </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">4108              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4109          }                                                                                                         </span>
<span class="2504403784205444317" onmouseenter="enter('2504403784205444317');" onmouseout="out('2504403784205444317');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4110 -        public final int compare(ResolveInfo a, ResolveInfo b) {                                                  </span>
<span class="177946296771916785" onmouseenter="enter('177946296771916785');" onmouseout="out('177946296771916785');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4111 -            CharSequence labelA, labelB;                                                                          </span>
<span class="2313389288092914550" onmouseenter="enter('2313389288092914550');" onmouseout="out('2313389288092914550');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4112 -            ComponentName keyA = LauncherModel.getComponentNameFromResolveInfo(a);                                </span>
<span class="1313017237584786738" onmouseenter="enter('1313017237584786738');" onmouseout="out('1313017237584786738');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4113 -            ComponentName keyB = LauncherModel.getComponentNameFromResolveInfo(b);                                </span>
<span class="5300656659592950018" onmouseenter="enter('5300656659592950018');" onmouseout="out('5300656659592950018');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4114 +        public final int compare(LauncherActivityInfoCompat a, LauncherActivityInfoCompat b) {                    </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4115 +            String labelA, labelB;                                                                                </span>
<span class="3539590309650150575" onmouseenter="enter('3539590309650150575');" onmouseout="out('3539590309650150575');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4116 +            ComponentName keyA = a.getComponentName();                                                            </span>
<span class="-674250356247748253" onmouseenter="enter('-674250356247748253');" onmouseout="out('-674250356247748253');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4117 +            ComponentName keyB = b.getComponentName();                                                            </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">4118              if (mLabelCache.containsKey(keyA)) {                                                                  </span>
<span class="-8432555163859180221" onmouseenter="enter('-8432555163859180221');" onmouseout="out('-8432555163859180221');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4119 -                labelA = mLabelCache.get(keyA);                                                                   </span>
<span class="-1058154863590772027" onmouseenter="enter('-1058154863590772027');" onmouseout="out('-1058154863590772027');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4120 +                labelA = mLabelCache.get(keyA).toString();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4121              } else {                                                                                              </span>
<span class="-2584626643586656789" onmouseenter="enter('-2584626643586656789');" onmouseout="out('-2584626643586656789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4122 -                labelA = a.loadLabel(mPackageManager).toString().trim();                                          </span>
<span class="8953753374571564594" onmouseenter="enter('8953753374571564594');" onmouseout="out('8953753374571564594');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4123 +                labelA = a.getLabel().toString().trim();                                                          </span>
<span  style="">4124                                                                                                                    </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">4125                  mLabelCache.put(keyA, labelA);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4126              }                                                                                                     </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">4127              if (mLabelCache.containsKey(keyB)) {                                                                  </span>
<span class="-3184391819650288160" onmouseenter="enter('-3184391819650288160');" onmouseout="out('-3184391819650288160');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4128 -                labelB = mLabelCache.get(keyB);                                                                   </span>
<span class="267036364262288198" onmouseenter="enter('267036364262288198');" onmouseout="out('267036364262288198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4129 +                labelB = mLabelCache.get(keyB).toString();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4130              } else {                                                                                              </span>
<span class="-6035042839601081566" onmouseenter="enter('-6035042839601081566');" onmouseout="out('-6035042839601081566');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4131 -                labelB = b.loadLabel(mPackageManager).toString().trim();                                          </span>
<span class="-6332222509536632454" onmouseenter="enter('-6332222509536632454');" onmouseout="out('-6332222509536632454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4132 +                labelB = b.getLabel().toString().trim();                                                          </span>
<span  style="">4133                                                                                                                    </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">4134                  mLabelCache.put(keyB, labelB);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4135              }                                                                                                     </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">4136              return mCollator.compare(labelA, labelB);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4137          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4138      };                                                                                                            </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">4139      public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                           </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4140 -        private Collator mCollator;                                                                               </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4141 -        private PackageManager mPackageManager;                                                                   </span>
<span class="-3647203189121938913" onmouseenter="enter('-3647203189121938913');" onmouseout="out('-3647203189121938913');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4142 -        private HashMap&lt;Object, String&gt; mLabelCache;                                                              </span>
<span class="-7973787508768304552" onmouseenter="enter('-7973787508768304552');" onmouseout="out('-7973787508768304552');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4143 -        WidgetAndShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4144 -            mPackageManager = pm;                                                                                 </span>
<span class="9150498506085829362" onmouseenter="enter('9150498506085829362');" onmouseout="out('9150498506085829362');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4145 +        private final AppWidgetManagerCompat mManager;                                                            </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4146 +        private final PackageManager mPackageManager;                                                             </span>
<span class="3147273048289991484" onmouseenter="enter('3147273048289991484');" onmouseout="out('3147273048289991484');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4147 +        private final HashMap&lt;Object, String&gt; mLabelCache;                                                        </span>
<span class="7734513056437222570" onmouseenter="enter('7734513056437222570');" onmouseout="out('7734513056437222570');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4148 +        private final Collator mCollator;                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4149 +                                                                                                                  </span>
<span class="-4227954493245511846" onmouseenter="enter('-4227954493245511846');" onmouseout="out('-4227954493245511846');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4150 +        WidgetAndShortcutNameComparator(Context context) {                                                        </span>
<span class="3481132346717467494" onmouseenter="enter('3481132346717467494');" onmouseout="out('3481132346717467494');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4151 +            mManager = AppWidgetManagerCompat.getInstance(context);                                               </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4152 +            mPackageManager = context.getPackageManager();                                                        </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">4153              mLabelCache = new HashMap&lt;Object, String&gt;();                                                          </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">4154              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4155          }                                                                                                         </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">4156          public final int compare(Object a, Object b) {                                                            </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">4157              String labelA, labelB;                                                                                </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">4158              if (mLabelCache.containsKey(a)) {                                                                     </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">4159                  labelA = mLabelCache.get(a);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4160              } else {                                                                                              </span>
<span class="-5230674800178108876" onmouseenter="enter('-5230674800178108876');" onmouseout="out('-5230674800178108876');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4161 -                labelA = (a instanceof AppWidgetProviderInfo) ?                                                   </span>
<span class="8106329842535817312" onmouseenter="enter('8106329842535817312');" onmouseout="out('8106329842535817312');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4162 -                    ((AppWidgetProviderInfo) a).label :                                                           </span>
<span class="2303647925533744119" onmouseenter="enter('2303647925533744119');" onmouseout="out('2303647925533744119');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4163 -                    ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                               </span>
<span class="-9066745869396444524" onmouseenter="enter('-9066745869396444524');" onmouseout="out('-9066745869396444524');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4164 +                labelA = (a instanceof AppWidgetProviderInfo)                                                     </span>
<span class="6558251807363396504" onmouseenter="enter('6558251807363396504');" onmouseout="out('6558251807363396504');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4165 +                        ? mManager.loadLabel((AppWidgetProviderInfo) a)                                           </span>
<span class="-3214224842100508644" onmouseenter="enter('-3214224842100508644');" onmouseout="out('-3214224842100508644');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4166 +                        : ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                         </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">4167                  mLabelCache.put(a, labelA);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4168              }                                                                                                     </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">4169              if (mLabelCache.containsKey(b)) {                                                                     </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">4170                  labelB = mLabelCache.get(b);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4171              } else {                                                                                              </span>
<span class="2760475927841141319" onmouseenter="enter('2760475927841141319');" onmouseout="out('2760475927841141319');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4172 -                labelB = (b instanceof AppWidgetProviderInfo) ?                                                   </span>
<span class="-8579211562497370011" onmouseenter="enter('-8579211562497370011');" onmouseout="out('-8579211562497370011');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4173 -                    ((AppWidgetProviderInfo) b).label :                                                           </span>
<span class="-7445104582750098413" onmouseenter="enter('-7445104582750098413');" onmouseout="out('-7445104582750098413');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4174 -                    ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                               </span>
<span class="-1855040857913004459" onmouseenter="enter('-1855040857913004459');" onmouseout="out('-1855040857913004459');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4175 +                labelB = (b instanceof AppWidgetProviderInfo)                                                     </span>
<span class="-6152525661787763086" onmouseenter="enter('-6152525661787763086');" onmouseout="out('-6152525661787763086');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4176 +                        ? mManager.loadLabel((AppWidgetProviderInfo) b)                                           </span>
<span class="-7836999270960417422" onmouseenter="enter('-7836999270960417422');" onmouseout="out('-7836999270960417422');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4177 +                        : ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                         </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">4178                  mLabelCache.put(b, labelB);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4179              }                                                                                                     </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">4180              return mCollator.compare(labelA, labelB);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4181          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4182      };                                                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4183 +                                                                                                                  </span>
<span class="9138636756014527253" onmouseenter="enter('9138636756014527253');" onmouseout="out('9138636756014527253');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4184 +    static boolean isValidProvider(AppWidgetProviderInfo provider) {                                              </span>
<span class="2022925387876031232" onmouseenter="enter('2022925387876031232');" onmouseout="out('2022925387876031232');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4185 +        return (provider != null) &amp;&amp; (provider.provider != null)                                                  </span>
<span class="-279029610180406352" onmouseenter="enter('-279029610180406352');" onmouseout="out('-279029610180406352');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4186 +                &amp;&amp; (provider.provider.getPackageName() != null);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4187 +    }                                                                                                             </span>
<span  style="">4188                                                                                                                    </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">4189      public void dumpState() {                                                                                     </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">4190          Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                                   </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">4191          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                           </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">4192          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                         </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">4193          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);                     </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">4194          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">4195          if (mLoaderTask != null) {                                                                                </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">4196              mLoaderTask.dumpState();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4197          } else {                                                                                                  </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">4198              Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4199          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4200      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4201  }                                                                                                                 </span></pre></td>
                            <td><pre></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            