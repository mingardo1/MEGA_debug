<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>23</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    23
                    <a href="22.html">prev</a>
                    <a href="24.html">next</a>
                    <a href="23_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    AriaLyy/Aria_ec1b504309d78f4ff275a5e6a6f08a5e0022f44b_Aria/src/main/java/com/arialyy/aria/core/download/DownloadReceiver.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b:Aria/src/main/java/com/arialyy/aria/core/download/DownloadReceiver.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b^1:Aria/src/main/java/com/arialyy/aria/core/download/DownloadReceiver.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b^2:Aria/src/main/java/com/arialyy/aria/core/download/DownloadReceiver.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;cd587dd212fe20c8c7e9d44c6b009614eae38bef:Aria/src/main/java/com/arialyy/aria/core/download/DownloadReceiver.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bsj]], subset: [[bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="1987357580077471394" onmouseenter="enter('1987357580077471394');" onmouseout="out('1987357580077471394');" style="">  16 package com.arialyy.aria.core.download;                                                                  </span>
<span  style="">  17                                                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  18 import android.support.annotation.NonNull;                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  19 import android.text.TextUtils;                                                                           </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  20 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="3020238846680658976" onmouseenter="enter('3020238846680658976');" onmouseout="out('3020238846680658976');" style="">  21 import com.arialyy.aria.core.command.ICmd;                                                               </span>
<span class="4948857189306634189" onmouseenter="enter('4948857189306634189');" onmouseout="out('4948857189306634189');" style="">  22 import com.arialyy.aria.core.command.normal.CancelAllCmd;                                                </span>
<span class="-801363442427116995" onmouseenter="enter('-801363442427116995');" onmouseout="out('-801363442427116995');" style="">  23 import com.arialyy.aria.core.command.normal.NormalCmdFactory;                                            </span>
<span class="5633299353752109870" onmouseenter="enter('5633299353752109870');" onmouseout="out('5633299353752109870');" style="">  24 import com.arialyy.aria.core.common.ProxyHelper;                                                         </span>
<span class="3322471595626447686" onmouseenter="enter('3322471595626447686');" onmouseout="out('3322471595626447686');" style="">  25 import com.arialyy.aria.core.inf.AbsEntity;                                                              </span>
<span class="-2122960619967737033" onmouseenter="enter('-2122960619967737033');" onmouseout="out('-2122960619967737033');" style="">  26 import com.arialyy.aria.core.inf.AbsReceiver;                                                            </span>
<span class="6977447411617077002" onmouseenter="enter('6977447411617077002');" onmouseout="out('6977447411617077002');" style="">  27 import com.arialyy.aria.core.scheduler.DownloadGroupSchedulers;                                          </span>
<span class="7326175858930165690" onmouseenter="enter('7326175858930165690');" onmouseout="out('7326175858930165690');" style="">  28 import com.arialyy.aria.core.scheduler.DownloadSchedulers;                                               </span>
<span class="-972246557960033348" onmouseenter="enter('-972246557960033348');" onmouseout="out('-972246557960033348');" style="">  29 import com.arialyy.aria.core.scheduler.ISchedulerListener;                                               </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  30 import com.arialyy.aria.orm.DbEntity;                                                                    </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="">  31 import com.arialyy.aria.util.ALog;                                                                       </span>
<span class="-8921020518339919076" onmouseenter="enter('-8921020518339919076');" onmouseout="out('-8921020518339919076');" style="">  32 import com.arialyy.aria.util.CheckUtil;                                                                  </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  33 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  34 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  35 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  36 import java.util.Set;                                                                                    </span>
<span  style="">  37                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  38 /**                                                                                                      </span>
<span class="-8976164179967820781" onmouseenter="enter('-8976164179967820781');" onmouseout="out('-8976164179967820781');" style="">  39  * Created by lyy on 2016/12/5.                                                                          </span>
<span class="8451370004399326130" onmouseenter="enter('8451370004399326130');" onmouseout="out('8451370004399326130');" style="">  40  * 下载功能接收器                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  41  */                                                                                                      </span>
<span class="-2662683455388224586" onmouseenter="enter('-2662683455388224586');" onmouseout="out('-2662683455388224586');" style="">  42 public class DownloadReceiver extends AbsReceiver {                                                      </span>
<span class="-4144196955255973047" onmouseenter="enter('-4144196955255973047');" onmouseout="out('-4144196955255973047');" style="">  43   private final String TAG = &quot;DownloadReceiver&quot;;                                                         </span>
<span class="8974910660156933255" onmouseenter="enter('8974910660156933255');" onmouseout="out('8974910660156933255');" style="">  44   public ISchedulerListener&lt;DownloadTask&gt; listener;                                                      </span>
<span  style="">  45                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  46   /**                                                                                                    </span>
<span class="-8030592473296514020" onmouseenter="enter('-8030592473296514020');" onmouseout="out('-8030592473296514020');" style="">  47    * 设置最大下载速度，单位：kb                                                                                      </span>
<span class="5818094815562401128" onmouseenter="enter('5818094815562401128');" onmouseout="out('5818094815562401128');" style="">  48    * 该方法为实验性功能，清不要轻易在生产环境中使用。                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  49    *                                                                                                     </span>
<span class="9124526800094534994" onmouseenter="enter('9124526800094534994');" onmouseout="out('9124526800094534994');" style="">  50    * @param maxSpeed 为0表示不限速                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  51    */                                                                                                    </span>
<span class="-7953977331871486849" onmouseenter="enter('-7953977331871486849');" onmouseout="out('-7953977331871486849');" style="">  52   @Deprecated public void setMaxSpeed(double maxSpeed) {                                                 </span>
<span class="7170079538529520301" onmouseenter="enter('7170079538529520301');" onmouseout="out('7170079538529520301');" style="">  53     AriaManager.getInstance(AriaManager.APP).getDownloadConfig().setMsxSpeed(maxSpeed);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  54   }                                                                                                      </span>
<span  style="">  55                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  56   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  57    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  58    *                                                                                                     </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style="">  59    * @param entity 下载实体                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  60    */                                                                                                    </span>
<span class="5466262800524521213" onmouseenter="enter('5466262800524521213');" onmouseout="out('5466262800524521213');" style="">  61   public DownloadTarget load(DownloadEntity entity) {                                                    </span>
<span class="6765829635565156021" onmouseenter="enter('6765829635565156021');" onmouseout="out('6765829635565156021');" style="">  62     return load(entity, false);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63   }                                                                                                      </span>
<span  style="">  64                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  65   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  66    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  67    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style="">  68    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69    */                                                                                                    </span>
<span class="4512208090544288363" onmouseenter="enter('4512208090544288363');" onmouseout="out('4512208090544288363');" style="">  70   public DownloadTarget load(DownloadEntity entity, boolean refreshInfo) {                               </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  71 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-8873840630710694359" onmouseenter="enter('-8873840630710694359');" onmouseout="out('-8873840630710694359');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  72     CheckUtil.checkDownloadUrl(entity.getUrl());                                                         </span>
<span class="-3528511344377244480" onmouseenter="enter('-3528511344377244480');" onmouseout="out('-3528511344377244480');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  73     if (entity.getUrl().startsWith(&quot;ftp&quot;)) {                                                             </span>
<span class="7973896769491137792" onmouseenter="enter('7973896769491137792');" onmouseout="out('7973896769491137792');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  74       ALog.w(TAG,                                                                                        </span>
<span class="-1990769771817592658" onmouseenter="enter('-1990769771817592658');" onmouseout="out('-1990769771817592658');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  75           &quot;使用实体启动FTP下载，如果你的FTP服务器需要登录，那么你需要调用登录的接口，如：Aria.download(this).load(url).login(user, pw).start()&quot;);">  75           &quot;使用实体启动FTP下载，如果你的FTP服务器需要登录，那么你需要调用登录的接口，如：Aria.download(this).load(url).login(user, pw).start(🔵</abbr></span>
<span class="5328341516284695107" onmouseenter="enter('5328341516284695107');" onmouseout="out('5328341516284695107');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  76       return new FtpDownloadTarget(entity, targetName, refreshInfo);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  77     }                                                                                                    </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  78 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1334893378673445546" onmouseenter="enter('-1334893378673445546');" onmouseout="out('-1334893378673445546');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79     return new DownloadTarget(entity, targetName, refreshInfo);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80   }                                                                                                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82   /**                                                                                                    </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83    * 加载Http、https单任务下载地址                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84    *                                                                                                     </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85    * @param url 下载地址                                                                                     </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  86 =======                                                                                                  </span>
<span class="-5704682181018188738" onmouseenter="enter('-5704682181018188738');" onmouseout="out('-5704682181018188738');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  87     CheckUtil.checkDownloadEntity(entity);                                                               </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  88 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1334893378673445546" onmouseenter="enter('-1334893378673445546');" onmouseout="out('-1334893378673445546');" style="">  89     return new DownloadTarget(entity, targetName, refreshInfo);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90   }                                                                                                      </span>
<span  style="">  91                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  92   /**                                                                                                    </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="">  93    * 加载Http、https单任务下载地址                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  94    *                                                                                                     </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="">  95    * @param url 下载地址                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  96    */                                                                                                    </span>
<span class="-7620646004657887099" onmouseenter="enter('-7620646004657887099');" onmouseout="out('-7620646004657887099');" style="">  97   public DownloadTarget load(@NonNull String url) {                                                      </span>
<span class="1571066346408047685" onmouseenter="enter('1571066346408047685');" onmouseout="out('1571066346408047685');" style="">  98     return load(url, false);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99   }                                                                                                      </span>
<span  style=""> 100                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 101   /**                                                                                                    </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style=""> 102    * 加载Http、https单任务下载地址                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 103    *                                                                                                     </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style=""> 104    * @param url 下载地址                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 105    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 106    */                                                                                                    </span>
<span class="-5520959846461571672" onmouseenter="enter('-5520959846461571672');" onmouseout="out('-5520959846461571672');" style=""> 107   public DownloadTarget load(@NonNull String url, boolean refreshInfo) {                                 </span>
<span class="-8603189552017833172" onmouseenter="enter('-8603189552017833172');" onmouseout="out('-8603189552017833172');" style=""> 108     CheckUtil.checkUrl(url);                                                                             </span>
<span class="-6107422860730852976" onmouseenter="enter('-6107422860730852976');" onmouseout="out('-6107422860730852976');" style=""> 109     return new DownloadTarget(url, targetName, refreshInfo);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110   }                                                                                                      </span>
<span  style=""> 111                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 112   /**                                                                                                    </span>
<span class="2297304325080531827" onmouseenter="enter('2297304325080531827');" onmouseout="out('2297304325080531827');" style=""> 113    * 加载下载地址，如果任务组的中的下载地址改变了，则任务从新的一个任务组                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 114    */                                                                                                    </span>
<span class="-3978985407316286854" onmouseenter="enter('-3978985407316286854');" onmouseout="out('-3978985407316286854');" style=""> 115   public DownloadGroupTarget load(List&lt;String&gt; urls) {                                                   </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 116     CheckUtil.checkDownloadUrls(urls);                                                                   </span>
<span class="-2612285513071399987" onmouseenter="enter('-2612285513071399987');" onmouseout="out('-2612285513071399987');" style=""> 117     return new DownloadGroupTarget(urls, targetName);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118   }                                                                                                      </span>
<span  style=""> 119                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 120   /**                                                                                                    </span>
<span class="5765642592743702501" onmouseenter="enter('5765642592743702501');" onmouseout="out('5765642592743702501');" style=""> 121    * 使用下载实体执行FTP下载操作                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 122    *                                                                                                     </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style=""> 123    * @param entity 下载实体                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 124    */                                                                                                    </span>
<span class="539990068933324946" onmouseenter="enter('539990068933324946');" onmouseout="out('539990068933324946');" style=""> 125   public FtpDownloadTarget loadFtp(DownloadEntity entity) {                                              </span>
<span class="3022490169827315427" onmouseenter="enter('3022490169827315427');" onmouseout="out('3022490169827315427');" style=""> 126     return loadFtp(entity, false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127   }                                                                                                      </span>
<span  style=""> 128                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 129   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style=""> 130    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 131    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 132    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 133    */                                                                                                    </span>
<span class="7418286421971784035" onmouseenter="enter('7418286421971784035');" onmouseout="out('7418286421971784035');" style=""> 134   public FtpDownloadTarget loadFtp(DownloadEntity entity, boolean refreshInfo) {                         </span>
<span class="-5704682181018188738" onmouseenter="enter('-5704682181018188738');" onmouseout="out('-5704682181018188738');" style=""> 135     CheckUtil.checkDownloadEntity(entity);                                                               </span>
<span class="-6911794941446079567" onmouseenter="enter('-6911794941446079567');" onmouseout="out('-6911794941446079567');" style=""> 136     if (!entity.getUrl().startsWith(&quot;ftp&quot;)) {                                                            </span>
<span class="-1436336878460187386" onmouseenter="enter('-1436336878460187386');" onmouseout="out('-1436336878460187386');" style=""> 137       throw new IllegalArgumentException(&quot;非FTP请求不能使用该方法&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138     }                                                                                                    </span>
<span class="5328341516284695107" onmouseenter="enter('5328341516284695107');" onmouseout="out('5328341516284695107');" style=""> 139     return new FtpDownloadTarget(entity, targetName, refreshInfo);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140   }                                                                                                      </span>
<span  style=""> 141                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 142   /**                                                                                                    </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 143    * 加载ftp单任务下载地址                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 144    */                                                                                                    </span>
<span class="-8520923309760825500" onmouseenter="enter('-8520923309760825500');" onmouseout="out('-8520923309760825500');" style=""> 145   public FtpDownloadTarget loadFtp(@NonNull String url) {                                                </span>
<span class="4470597214358385853" onmouseenter="enter('4470597214358385853');" onmouseout="out('4470597214358385853');" style=""> 146     return loadFtp(url, false);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147   }                                                                                                      </span>
<span  style=""> 148                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 149   /**                                                                                                    </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 150    * 加载ftp单任务下载地址                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 151    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 152    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 153    */                                                                                                    </span>
<span class="-3974752927486852600" onmouseenter="enter('-3974752927486852600');" onmouseout="out('-3974752927486852600');" style=""> 154   public FtpDownloadTarget loadFtp(@NonNull String url, boolean refreshInfo) {                           </span>
<span class="-8603189552017833172" onmouseenter="enter('-8603189552017833172');" onmouseout="out('-8603189552017833172');" style=""> 155     CheckUtil.checkUrl(url);                                                                             </span>
<span class="6480998331304056815" onmouseenter="enter('6480998331304056815');" onmouseout="out('6480998331304056815');" style=""> 156     return new FtpDownloadTarget(url, targetName, refreshInfo);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157   }                                                                                                      </span>
<span  style=""> 158                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 159   /**                                                                                                    </span>
<span class="-644101812843147118" onmouseenter="enter('-644101812843147118');" onmouseout="out('-644101812843147118');" style=""> 160    * 使用任务组实体执行任务组的实体执行任务组的下载操作                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 161    *                                                                                                     </span>
<span class="-7673496858448137784" onmouseenter="enter('-7673496858448137784');" onmouseout="out('-7673496858448137784');" style=""> 162    * @param groupEntity 如果加载的任务实体没有子项的下载地址，                                                              </span>
<span class="-5926959885594342389" onmouseenter="enter('-5926959885594342389');" onmouseout="out('-5926959885594342389');" style=""> 163    * 那么你需要使用{@link DownloadGroupTarget#setGroupUrl(List)}设置子项的下载地址                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 164    */                                                                                                    </span>
<span class="-7986782816995408761" onmouseenter="enter('-7986782816995408761');" onmouseout="out('-7986782816995408761');" style=""> 165   public DownloadGroupTarget load(DownloadGroupEntity groupEntity) {                                     </span>
<span class="5161082270961212892" onmouseenter="enter('5161082270961212892');" onmouseout="out('5161082270961212892');" style=""> 166     return new DownloadGroupTarget(groupEntity, targetName);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167   }                                                                                                      </span>
<span  style=""> 168                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 169   /**                                                                                                    </span>
<span class="1687338762191352295" onmouseenter="enter('1687338762191352295');" onmouseout="out('1687338762191352295');" style=""> 170    * 加载ftp文件夹下载地址                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 171    */                                                                                                    </span>
<span class="5825764911062879168" onmouseenter="enter('5825764911062879168');" onmouseout="out('5825764911062879168');" style=""> 172   public FtpDirDownloadTarget loadFtpDir(@NonNull String dirUrl) {                                       </span>
<span class="8504105770444144396" onmouseenter="enter('8504105770444144396');" onmouseout="out('8504105770444144396');" style=""> 173     CheckUtil.checkUrl(dirUrl);                                                                          </span>
<span class="-8988703603088435939" onmouseenter="enter('-8988703603088435939');" onmouseout="out('-8988703603088435939');" style=""> 174     return new FtpDirDownloadTarget(dirUrl, targetName);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175   }                                                                                                      </span>
<span  style=""> 176                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 177   /**                                                                                                    </span>
<span class="-2874086798355386198" onmouseenter="enter('-2874086798355386198');" onmouseout="out('-2874086798355386198');" style=""> 178    * 将当前类注册到Aria                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 179    */                                                                                                    </span>
<span class="-4925173742984207732" onmouseenter="enter('-4925173742984207732');" onmouseout="out('-4925173742984207732');" style=""> 180   public DownloadReceiver register() {                                                                   </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 181     String className = obj.getClass().getName();                                                         </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 182     Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                    </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 183     Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                              </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 184     Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                          </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 185     if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                              </span>
<span class="-5670875303591463725" onmouseenter="enter('-5670875303591463725');" onmouseout="out('-5670875303591463725');" style=""> 186       DownloadSchedulers.getInstance().register(obj);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187     }                                                                                                    </span>
<span class="8400813546960630432" onmouseenter="enter('8400813546960630432');" onmouseout="out('8400813546960630432');" style=""> 188     if ((dgCounter != null &amp;&amp; dgCounter.contains(className)) || (dgsCounter != null                      </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 189         &amp;&amp; dgsCounter.contains(className))) {                                                            </span>
<span class="1002821899645886942" onmouseenter="enter('1002821899645886942');" onmouseout="out('1002821899645886942');" style=""> 190       DownloadGroupSchedulers.getInstance().register(obj);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191     }                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 192     return this;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193   }                                                                                                      </span>
<span  style=""> 194                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 195   /**                                                                                                    </span>
<span class="4191554136684960646" onmouseenter="enter('4191554136684960646');" onmouseout="out('4191554136684960646');" style=""> 196    * 取消注册，如果是Activity或fragment，Aria会界面销毁时自动调用该方法。                                                        </span>
<span class="-2646056259317531884" onmouseenter="enter('-2646056259317531884');" onmouseout="out('-2646056259317531884');" style=""> 197    * 如果是Dialog或popupwindow，需要你在撤销界面时调用该方法                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 198    */                                                                                                    </span>
<span class="9104098464026605676" onmouseenter="enter('9104098464026605676');" onmouseout="out('9104098464026605676');" style=""> 199   @Override public void unRegister() {                                                                   </span>
<span class="-4378511932529658259" onmouseenter="enter('-4378511932529658259');" onmouseout="out('-4378511932529658259');" style=""> 200     if (needRmListener) {                                                                                </span>
<span class="-6315663267876105123" onmouseenter="enter('-6315663267876105123');" onmouseout="out('-6315663267876105123');" style=""> 201       unRegisterListener();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span class="-1563105831930296864" onmouseenter="enter('-1563105831930296864');" onmouseout="out('-1563105831930296864');" style=""> 203     AriaManager.getInstance(AriaManager.APP).removeReceiver(obj);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204   }                                                                                                      </span>
<span  style=""> 205                                                                                                          </span>
<span class="-6986224254743714260" onmouseenter="enter('-6986224254743714260');" onmouseout="out('-6986224254743714260');" style=""> 206   @Override public void unRegisterListener() {                                                           </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 207     String className = obj.getClass().getName();                                                         </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 208     Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                    </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 209     Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                              </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 210     Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                          </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 211     if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                              </span>
<span class="-4965118218032185711" onmouseenter="enter('-4965118218032185711');" onmouseout="out('-4965118218032185711');" style=""> 212       DownloadSchedulers.getInstance().unRegister(obj);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213     }                                                                                                    </span>
<span class="974113968767899608" onmouseenter="enter('974113968767899608');" onmouseout="out('974113968767899608');" style=""> 214     if (dgCounter != null &amp;&amp; dgCounter.contains(className) || (dgsCounter != null                        </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 215         &amp;&amp; dgsCounter.contains(className))) {                                                            </span>
<span class="-7807598433909017874" onmouseenter="enter('-7807598433909017874');" onmouseout="out('-7807598433909017874');" style=""> 216       DownloadGroupSchedulers.getInstance().unRegister(obj);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218   }                                                                                                      </span>
<span  style=""> 219                                                                                                          </span>
<span class="3345695681730814389" onmouseenter="enter('3345695681730814389');" onmouseout="out('3345695681730814389');" style=""> 220   @Override public void destroy() {                                                                      </span>
<span class="-4901128148553670878" onmouseenter="enter('-4901128148553670878');" onmouseout="out('-4901128148553670878');" style=""> 221     targetName = null;                                                                                   </span>
<span class="-4099358687357442786" onmouseenter="enter('-4099358687357442786');" onmouseout="out('-4099358687357442786');" style=""> 222     listener = null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223   }                                                                                                      </span>
<span  style=""> 224                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 225   /**                                                                                                    </span>
<span class="-4855951461764354463" onmouseenter="enter('-4855951461764354463');" onmouseout="out('-4855951461764354463');" style=""> 226    * 通过下载链接获取下载实体                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 227    */                                                                                                    </span>
<span class="6067624311729681660" onmouseenter="enter('6067624311729681660');" onmouseout="out('6067624311729681660');" style=""> 228   public DownloadEntity getDownloadEntity(String downloadUrl) {                                          </span>
<span class="2765064707147909850" onmouseenter="enter('2765064707147909850');" onmouseout="out('2765064707147909850');" style=""> 229     CheckUtil.checkUrl(downloadUrl);                                                                     </span>
<span class="4826407584559057648" onmouseenter="enter('4826407584559057648');" onmouseout="out('4826407584559057648');" style=""> 230     return DbEntity.findFirst(DownloadEntity.class, &quot;url=? and isGroupChild=&#x27;false&#x27;&quot;, downloadUrl);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231   }                                                                                                      </span>
<span  style=""> 232                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 233   /**                                                                                                    </span>
<span class="625446827844080348" onmouseenter="enter('625446827844080348');" onmouseout="out('625446827844080348');" style=""> 234    * 通过下载链接获取保存在数据库的下载任务实体                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 235    */                                                                                                    </span>
<span class="-7637734105267374212" onmouseenter="enter('-7637734105267374212');" onmouseout="out('-7637734105267374212');" style=""> 236   public DownloadTaskEntity getDownloadTask(String downloadUrl) {                                        </span>
<span class="2765064707147909850" onmouseenter="enter('2765064707147909850');" onmouseout="out('2765064707147909850');" style=""> 237     CheckUtil.checkUrl(downloadUrl);                                                                     </span>
<span class="-5185402298602239038" onmouseenter="enter('-5185402298602239038');" onmouseout="out('-5185402298602239038');" style=""> 238     DownloadEntity entity = getDownloadEntity(downloadUrl);                                              </span>
<span class="-2008932504864023242" onmouseenter="enter('-2008932504864023242');" onmouseout="out('-2008932504864023242');" style=""> 239     if (entity == null || TextUtils.isEmpty(entity.getDownloadPath())) return null;                      </span>
<span class="-7326527410643528824" onmouseenter="enter('-7326527410643528824');" onmouseout="out('-7326527410643528824');" style=""> 240     return DbEntity.findFirst(DownloadTaskEntity.class, &quot;key=? and isGroupTask=&#x27;false&#x27;&quot;,                 </span>
<span class="-153714010952936175" onmouseenter="enter('-153714010952936175');" onmouseout="out('-153714010952936175');" style=""> 241         entity.getDownloadPath());                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242   }                                                                                                      </span>
<span  style=""> 243                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 244   /**                                                                                                    </span>
<span class="-6542418820527226697" onmouseenter="enter('-6542418820527226697');" onmouseout="out('-6542418820527226697');" style=""> 245    * 通过下载链接获取保存在数据库的下载任务组实体                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 246    */                                                                                                    </span>
<span class="5407962917483047507" onmouseenter="enter('5407962917483047507');" onmouseout="out('5407962917483047507');" style=""> 247   public DownloadGroupTaskEntity getDownloadGroupTask(List&lt;String&gt; urls) {                               </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 248     CheckUtil.checkDownloadUrls(urls);                                                                   </span>
<span class="-2143724232684022656" onmouseenter="enter('-2143724232684022656');" onmouseout="out('-2143724232684022656');" style=""> 249     String hashCode = CommonUtil.getMd5Code(urls);                                                       </span>
<span class="753794430818465046" onmouseenter="enter('753794430818465046');" onmouseout="out('753794430818465046');" style=""> 250     return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, hashCode);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251   }                                                                                                      </span>
<span  style=""> 252                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 253   /**                                                                                                    </span>
<span class="8545732146449590791" onmouseenter="enter('8545732146449590791');" onmouseout="out('8545732146449590791');" style=""> 254    * 通过任务组key，获取任务组实体                                                                                    </span>
<span class="-915937270042831698" onmouseenter="enter('-915937270042831698');" onmouseout="out('-915937270042831698');" style=""> 255    * 如果是http，key为所有子任务下载地址拼接后取md5                                                                        </span>
<span class="-6888603962563272152" onmouseenter="enter('-6888603962563272152');" onmouseout="out('-6888603962563272152');" style=""> 256    * 如果是ftp，key为ftp服务器的文件夹路径                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 257    */                                                                                                    </span>
<span class="3930845008170494728" onmouseenter="enter('3930845008170494728');" onmouseout="out('3930845008170494728');" style=""> 258   public DownloadGroupTaskEntity getDownloadGroupTask(String key) {                                      </span>
<span class="-2479292647152353998" onmouseenter="enter('-2479292647152353998');" onmouseout="out('-2479292647152353998');" style=""> 259     return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, key);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260   }                                                                                                      </span>
<span  style=""> 261                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 262   /**                                                                                                    </span>
<span class="-7888671401854060616" onmouseenter="enter('-7888671401854060616');" onmouseout="out('-7888671401854060616');" style=""> 263    * 下载任务是否存在                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 264    */                                                                                                    </span>
<span class="-1092275811913780416" onmouseenter="enter('-1092275811913780416');" onmouseout="out('-1092275811913780416');" style=""> 265   @Override public boolean taskExists(String downloadUrl) {                                              </span>
<span class="-8257903088695496664" onmouseenter="enter('-8257903088695496664');" onmouseout="out('-8257903088695496664');" style=""> 266     return DownloadEntity.findFirst(DownloadEntity.class, &quot;url=?&quot;, downloadUrl) != null;                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267   }                                                                                                      </span>
<span  style=""> 268                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 269   /**                                                                                                    </span>
<span class="-2894577714931105927" onmouseenter="enter('-2894577714931105927');" onmouseout="out('-2894577714931105927');" style=""> 270    * 获取普通下载任务列表                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 271    */                                                                                                    </span>
<span class="-1224977372519603955" onmouseenter="enter('-1224977372519603955');" onmouseout="out('-1224977372519603955');" style=""> 272   @Override public List&lt;DownloadEntity&gt; getSimpleTaskList() {                                            </span>
<span class="-3884263886229518247" onmouseenter="enter('-3884263886229518247');" onmouseout="out('-3884263886229518247');" style=""> 273     return DownloadEntity.findDatas(DownloadEntity.class, &quot;isGroupChild=? and downloadPath!=&#x27;&#x27;&quot;,         </span>
<span class="-8693734603624123186" onmouseenter="enter('-8693734603624123186');" onmouseout="out('-8693734603624123186');" style=""> 274         &quot;false&quot;);                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275   }                                                                                                      </span>
<span  style=""> 276                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 277   /**                                                                                                    </span>
<span class="-7216670373962638911" onmouseenter="enter('-7216670373962638911');" onmouseout="out('-7216670373962638911');" style=""> 278    * 获取任务组列表                                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 279    */                                                                                                    </span>
<span class="-2755211114601704515" onmouseenter="enter('-2755211114601704515');" onmouseout="out('-2755211114601704515');" style=""> 280   public List&lt;DownloadGroupEntity&gt; getGroupTaskList() {                                                  </span>
<span class="-8707622985980297555" onmouseenter="enter('-8707622985980297555');" onmouseout="out('-8707622985980297555');" style=""> 281     return DownloadEntity.findAllData(DownloadGroupEntity.class);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282   }                                                                                                      </span>
<span  style=""> 283                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 284   /**                                                                                                    </span>
<span class="8965383640224391026" onmouseenter="enter('8965383640224391026');" onmouseout="out('8965383640224391026');" style=""> 285    * 获取普通任务和任务组的任务列表                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 286    */                                                                                                    </span>
<span class="-2889141978955106905" onmouseenter="enter('-2889141978955106905');" onmouseout="out('-2889141978955106905');" style=""> 287   public List&lt;AbsEntity&gt; getTotleTaskList() {                                                            </span>
<span class="-7408081633636237340" onmouseenter="enter('-7408081633636237340');" onmouseout="out('-7408081633636237340');" style=""> 288     List&lt;AbsEntity&gt; list = new ArrayList&lt;&gt;();                                                            </span>
<span class="-1266594982388124504" onmouseenter="enter('-1266594982388124504');" onmouseout="out('-1266594982388124504');" style=""> 289     List&lt;DownloadEntity&gt; simpleTask = getSimpleTaskList();                                               </span>
<span class="-4106153234455279996" onmouseenter="enter('-4106153234455279996');" onmouseout="out('-4106153234455279996');" style=""> 290     List&lt;DownloadGroupEntity&gt; groupTask = getGroupTaskList();                                            </span>
<span class="-8209161792107312998" onmouseenter="enter('-8209161792107312998');" onmouseout="out('-8209161792107312998');" style=""> 291     if (simpleTask != null &amp;&amp; !simpleTask.isEmpty()) {                                                   </span>
<span class="6802811283489038468" onmouseenter="enter('6802811283489038468');" onmouseout="out('6802811283489038468');" style=""> 292       list.addAll(simpleTask);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span class="6352724383592003863" onmouseenter="enter('6352724383592003863');" onmouseout="out('6352724383592003863');" style=""> 294     if (groupTask != null &amp;&amp; !groupTask.isEmpty()) {                                                     </span>
<span class="-1528470393600602759" onmouseenter="enter('-1528470393600602759');" onmouseout="out('-1528470393600602759');" style=""> 295       list.addAll(groupTask);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296     }                                                                                                    </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 297     return list;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298   }                                                                                                      </span>
<span  style=""> 299                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 300   /**                                                                                                    </span>
<span class="3402822126794432274" onmouseenter="enter('3402822126794432274');" onmouseout="out('3402822126794432274');" style=""> 301    * 停止所有正在下载的任务，并清空等待队列。                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 302    */                                                                                                    </span>
<span class="-8271139132618696861" onmouseenter="enter('-8271139132618696861');" onmouseout="out('-8271139132618696861');" style=""> 303   @Override public void stopAllTask() {                                                                  </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 304     AriaManager.getInstance(AriaManager.APP)                                                             </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 305         .setCmd(NormalCmdFactory.getInstance()                                                           </span>
<span class="6744734670145487711" onmouseenter="enter('6744734670145487711');" onmouseout="out('6744734670145487711');" style=""> 306             .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_STOP_ALL,             </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 307                 ICmd.TASK_TYPE_DOWNLOAD))                                                                </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 308         .exe();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309   }                                                                                                      </span>
<span  style=""> 310                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 311   /**                                                                                                    </span>
<span class="1311517946297423409" onmouseenter="enter('1311517946297423409');" onmouseout="out('1311517946297423409');" style=""> 312    * 恢复所有正在下载的任务                                                                                         </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style=""> 313    * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                         </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style=""> 314    * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 315    */                                                                                                    </span>
<span class="2382837737668558844" onmouseenter="enter('2382837737668558844');" onmouseout="out('2382837737668558844');" style=""> 316   public void resumeAllTask() {                                                                          </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 317     AriaManager.getInstance(AriaManager.APP)                                                             </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 318         .setCmd(NormalCmdFactory.getInstance()                                                           </span>
<span class="820973633919607204" onmouseenter="enter('820973633919607204');" onmouseout="out('820973633919607204');" style=""> 319             .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_RESUME_ALL,           </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 320                 ICmd.TASK_TYPE_DOWNLOAD))                                                                </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 321         .exe();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322   }                                                                                                      </span>
<span  style=""> 323                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 324   /**                                                                                                    </span>
<span class="-7338390600186437821" onmouseenter="enter('-7338390600186437821');" onmouseout="out('-7338390600186437821');" style=""> 325    * 删除所有任务                                                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 326    *                                                                                                     </span>
<span class="-325804075342723783" onmouseenter="enter('-325804075342723783');" onmouseout="out('-325804075342723783');" style=""> 327    * @param removeFile {@code true} 删除已经下载完成的任务，不仅删除下载记录，还会删除已经下载完成的文件，{@code false}                     </span>
<span class="-4045013558095481687" onmouseenter="enter('-4045013558095481687');" onmouseout="out('-4045013558095481687');" style=""> 328    * 如果文件已经下载完成，只删除下载记录                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 329    */                                                                                                    </span>
<span class="5963878394412937684" onmouseenter="enter('5963878394412937684');" onmouseout="out('5963878394412937684');" style=""> 330   @Override public void removeAllTask(boolean removeFile) {                                              </span>
<span class="-1602790229953823078" onmouseenter="enter('-1602790229953823078');" onmouseout="out('-1602790229953823078');" style=""> 331     final AriaManager ariaManager = AriaManager.getInstance(AriaManager.APP);                            </span>
<span class="-844712413651756711" onmouseenter="enter('-844712413651756711');" onmouseout="out('-844712413651756711');" style=""> 332     CancelAllCmd cancelCmd =                                                                             </span>
<span class="-8183977970671235029" onmouseenter="enter('-8183977970671235029');" onmouseout="out('-8183977970671235029');" style=""> 333         (CancelAllCmd) CommonUtil.createNormalCmd(targetName, new DownloadTaskEntity(),                  </span>
<span class="5247092821337102267" onmouseenter="enter('5247092821337102267');" onmouseout="out('5247092821337102267');" style=""> 334             NormalCmdFactory.TASK_CANCEL_ALL, ICmd.TASK_TYPE_DOWNLOAD);                                  </span>
<span class="-2029657375534786103" onmouseenter="enter('-2029657375534786103');" onmouseout="out('-2029657375534786103');" style=""> 335     cancelCmd.removeFile = removeFile;                                                                   </span>
<span class="-8687051478420435310" onmouseenter="enter('-8687051478420435310');" onmouseout="out('-8687051478420435310');" style=""> 336     ariaManager.setCmd(cancelCmd).exe();                                                                 </span>
<span class="6170682864485863774" onmouseenter="enter('6170682864485863774');" onmouseout="out('6170682864485863774');" style=""> 337     Set&lt;String&gt; keys = ariaManager.getReceiver().keySet();                                               </span>
<span class="-5841525186174834007" onmouseenter="enter('-5841525186174834007');" onmouseout="out('-5841525186174834007');" style=""> 338     for (String key : keys) {                                                                            </span>
<span class="-4261055600814182440" onmouseenter="enter('-4261055600814182440');" onmouseout="out('-4261055600814182440');" style=""> 339       ariaManager.getReceiver().remove(key);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342 }                                                                                                        </span>


</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="1987357580077471394" onmouseenter="enter('1987357580077471394');" onmouseout="out('1987357580077471394');" style="">  16 package com.arialyy.aria.core.download;                                                                  </span>
<span  style="">  17                                                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  18 import android.support.annotation.NonNull;                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  19 import android.text.TextUtils;                                                                           </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  20 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="3020238846680658976" onmouseenter="enter('3020238846680658976');" onmouseout="out('3020238846680658976');" style="">  21 import com.arialyy.aria.core.command.ICmd;                                                               </span>
<span class="4948857189306634189" onmouseenter="enter('4948857189306634189');" onmouseout="out('4948857189306634189');" style="">  22 import com.arialyy.aria.core.command.normal.CancelAllCmd;                                                </span>
<span class="-801363442427116995" onmouseenter="enter('-801363442427116995');" onmouseout="out('-801363442427116995');" style="">  23 import com.arialyy.aria.core.command.normal.NormalCmdFactory;                                            </span>
<span class="5633299353752109870" onmouseenter="enter('5633299353752109870');" onmouseout="out('5633299353752109870');" style="">  24 import com.arialyy.aria.core.common.ProxyHelper;                                                         </span>
<span class="3322471595626447686" onmouseenter="enter('3322471595626447686');" onmouseout="out('3322471595626447686');" style="">  25 import com.arialyy.aria.core.inf.AbsEntity;                                                              </span>
<span class="-2122960619967737033" onmouseenter="enter('-2122960619967737033');" onmouseout="out('-2122960619967737033');" style="">  26 import com.arialyy.aria.core.inf.AbsReceiver;                                                            </span>
<span class="6977447411617077002" onmouseenter="enter('6977447411617077002');" onmouseout="out('6977447411617077002');" style="">  27 import com.arialyy.aria.core.scheduler.DownloadGroupSchedulers;                                          </span>
<span class="7326175858930165690" onmouseenter="enter('7326175858930165690');" onmouseout="out('7326175858930165690');" style="">  28 import com.arialyy.aria.core.scheduler.DownloadSchedulers;                                               </span>
<span class="-972246557960033348" onmouseenter="enter('-972246557960033348');" onmouseout="out('-972246557960033348');" style="">  29 import com.arialyy.aria.core.scheduler.ISchedulerListener;                                               </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  30 import com.arialyy.aria.orm.DbEntity;                                                                    </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="">  31 import com.arialyy.aria.util.ALog;                                                                       </span>
<span class="-8921020518339919076" onmouseenter="enter('-8921020518339919076');" onmouseout="out('-8921020518339919076');" style="">  32 import com.arialyy.aria.util.CheckUtil;                                                                  </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  33 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  34 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  35 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  36 import java.util.Set;                                                                                    </span>
<span  style="">  37                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  38 /**                                                                                                      </span>
<span class="-8976164179967820781" onmouseenter="enter('-8976164179967820781');" onmouseout="out('-8976164179967820781');" style="">  39  * Created by lyy on 2016/12/5.                                                                          </span>
<span class="8451370004399326130" onmouseenter="enter('8451370004399326130');" onmouseout="out('8451370004399326130');" style="">  40  * 下载功能接收器                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  41  */                                                                                                      </span>
<span class="-2662683455388224586" onmouseenter="enter('-2662683455388224586');" onmouseout="out('-2662683455388224586');" style="">  42 public class DownloadReceiver extends AbsReceiver {                                                      </span>
<span class="-4144196955255973047" onmouseenter="enter('-4144196955255973047');" onmouseout="out('-4144196955255973047');" style="">  43   private final String TAG = &quot;DownloadReceiver&quot;;                                                         </span>
<span class="8974910660156933255" onmouseenter="enter('8974910660156933255');" onmouseout="out('8974910660156933255');" style="">  44   public ISchedulerListener&lt;DownloadTask&gt; listener;                                                      </span>
<span  style="">  45                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  46   /**                                                                                                    </span>
<span class="-8030592473296514020" onmouseenter="enter('-8030592473296514020');" onmouseout="out('-8030592473296514020');" style="">  47    * 设置最大下载速度，单位：kb                                                                                      </span>
<span class="5818094815562401128" onmouseenter="enter('5818094815562401128');" onmouseout="out('5818094815562401128');" style="">  48    * 该方法为实验性功能，清不要轻易在生产环境中使用。                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  49    *                                                                                                     </span>
<span class="9124526800094534994" onmouseenter="enter('9124526800094534994');" onmouseout="out('9124526800094534994');" style="">  50    * @param maxSpeed 为0表示不限速                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  51    */                                                                                                    </span>
<span class="-7953977331871486849" onmouseenter="enter('-7953977331871486849');" onmouseout="out('-7953977331871486849');" style="">  52   @Deprecated public void setMaxSpeed(double maxSpeed) {                                                 </span>
<span class="7170079538529520301" onmouseenter="enter('7170079538529520301');" onmouseout="out('7170079538529520301');" style="">  53     AriaManager.getInstance(AriaManager.APP).getDownloadConfig().setMsxSpeed(maxSpeed);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  54   }                                                                                                      </span>
<span  style="">  55                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  56   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  57    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  58    *                                                                                                     </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style="">  59    * @param entity 下载实体                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  60    */                                                                                                    </span>
<span class="5466262800524521213" onmouseenter="enter('5466262800524521213');" onmouseout="out('5466262800524521213');" style="">  61   public DownloadTarget load(DownloadEntity entity) {                                                    </span>
<span class="6765829635565156021" onmouseenter="enter('6765829635565156021');" onmouseout="out('6765829635565156021');" style="">  62     return load(entity, false);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63   }                                                                                                      </span>
<span  style="">  64                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  65   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  66    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  67    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style="">  68    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69    */                                                                                                    </span>
<span class="4512208090544288363" onmouseenter="enter('4512208090544288363');" onmouseout="out('4512208090544288363');" style="">  70   public DownloadTarget load(DownloadEntity entity, boolean refreshInfo) {                               </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  71 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-8873840630710694359" onmouseenter="enter('-8873840630710694359');" onmouseout="out('-8873840630710694359');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  72     CheckUtil.checkDownloadUrl(entity.getUrl());                                                         </span>
<span class="-3528511344377244480" onmouseenter="enter('-3528511344377244480');" onmouseout="out('-3528511344377244480');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  73     if (entity.getUrl().startsWith(&quot;ftp&quot;)) {                                                             </span>
<span class="7973896769491137792" onmouseenter="enter('7973896769491137792');" onmouseout="out('7973896769491137792');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  74       ALog.w(TAG,                                                                                        </span>
<span class="-1990769771817592658" onmouseenter="enter('-1990769771817592658');" onmouseout="out('-1990769771817592658');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  75           &quot;使用实体启动FTP下载，如果你的FTP服务器需要登录，那么你需要调用登录的接口，如：Aria.download(this).load(url).login(user, pw).start()&quot;);">  75           &quot;使用实体启动FTP下载，如果你的FTP服务器需要登录，那么你需要调用登录的接口，如：Aria.download(this).load(url).login(user, pw).start(🔵</abbr></span>
<span class="5328341516284695107" onmouseenter="enter('5328341516284695107');" onmouseout="out('5328341516284695107');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  76       return new FtpDownloadTarget(entity, targetName, refreshInfo);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  77     }                                                                                                    </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  78 ||||||| BASE                                                                                             </span>
<span class="-1334893378673445546" onmouseenter="enter('-1334893378673445546');" onmouseout="out('-1334893378673445546');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79     return new DownloadTarget(entity, targetName, refreshInfo);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80   }                                                                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  81 =======                                                                                                  </span>
<span class="-5704682181018188738" onmouseenter="enter('-5704682181018188738');" onmouseout="out('-5704682181018188738');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  82     CheckUtil.checkDownloadEntity(entity);                                                               </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  83 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1334893378673445546" onmouseenter="enter('-1334893378673445546');" onmouseout="out('-1334893378673445546');" style="">  84     return new DownloadTarget(entity, targetName, refreshInfo);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85   }                                                                                                      </span>
<span  style="">  86                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  87   /**                                                                                                    </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="">  88    * 加载Http、https单任务下载地址                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  89    *                                                                                                     </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="">  90    * @param url 下载地址                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  91    */                                                                                                    </span>
<span class="-7620646004657887099" onmouseenter="enter('-7620646004657887099');" onmouseout="out('-7620646004657887099');" style="">  92   public DownloadTarget load(@NonNull String url) {                                                      </span>
<span class="1571066346408047685" onmouseenter="enter('1571066346408047685');" onmouseout="out('1571066346408047685');" style="">  93     return load(url, false);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94   }                                                                                                      </span>
<span  style="">  95                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  96   /**                                                                                                    </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="">  97    * 加载Http、https单任务下载地址                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  98    *                                                                                                     </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="">  99    * @param url 下载地址                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 100    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 101    */                                                                                                    </span>
<span class="-5520959846461571672" onmouseenter="enter('-5520959846461571672');" onmouseout="out('-5520959846461571672');" style=""> 102   public DownloadTarget load(@NonNull String url, boolean refreshInfo) {                                 </span>
<span class="-8603189552017833172" onmouseenter="enter('-8603189552017833172');" onmouseout="out('-8603189552017833172');" style=""> 103     CheckUtil.checkUrl(url);                                                                             </span>
<span class="-6107422860730852976" onmouseenter="enter('-6107422860730852976');" onmouseout="out('-6107422860730852976');" style=""> 104     return new DownloadTarget(url, targetName, refreshInfo);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105   }                                                                                                      </span>
<span  style=""> 106                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 107   /**                                                                                                    </span>
<span class="2297304325080531827" onmouseenter="enter('2297304325080531827');" onmouseout="out('2297304325080531827');" style=""> 108    * 加载下载地址，如果任务组的中的下载地址改变了，则任务从新的一个任务组                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 109    */                                                                                                    </span>
<span class="-3978985407316286854" onmouseenter="enter('-3978985407316286854');" onmouseout="out('-3978985407316286854');" style=""> 110   public DownloadGroupTarget load(List&lt;String&gt; urls) {                                                   </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 111     CheckUtil.checkDownloadUrls(urls);                                                                   </span>
<span class="-2612285513071399987" onmouseenter="enter('-2612285513071399987');" onmouseout="out('-2612285513071399987');" style=""> 112     return new DownloadGroupTarget(urls, targetName);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113   }                                                                                                      </span>
<span  style=""> 114                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 115   /**                                                                                                    </span>
<span class="5765642592743702501" onmouseenter="enter('5765642592743702501');" onmouseout="out('5765642592743702501');" style=""> 116    * 使用下载实体执行FTP下载操作                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 117    *                                                                                                     </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style=""> 118    * @param entity 下载实体                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 119    */                                                                                                    </span>
<span class="539990068933324946" onmouseenter="enter('539990068933324946');" onmouseout="out('539990068933324946');" style=""> 120   public FtpDownloadTarget loadFtp(DownloadEntity entity) {                                              </span>
<span class="3022490169827315427" onmouseenter="enter('3022490169827315427');" onmouseout="out('3022490169827315427');" style=""> 121     return loadFtp(entity, false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122   }                                                                                                      </span>
<span  style=""> 123                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 124   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style=""> 125    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 126    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 127    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 128    */                                                                                                    </span>
<span class="7418286421971784035" onmouseenter="enter('7418286421971784035');" onmouseout="out('7418286421971784035');" style=""> 129   public FtpDownloadTarget loadFtp(DownloadEntity entity, boolean refreshInfo) {                         </span>
<span class="-5704682181018188738" onmouseenter="enter('-5704682181018188738');" onmouseout="out('-5704682181018188738');" style=""> 130     CheckUtil.checkDownloadEntity(entity);                                                               </span>
<span class="-6911794941446079567" onmouseenter="enter('-6911794941446079567');" onmouseout="out('-6911794941446079567');" style=""> 131     if (!entity.getUrl().startsWith(&quot;ftp&quot;)) {                                                            </span>
<span class="-1436336878460187386" onmouseenter="enter('-1436336878460187386');" onmouseout="out('-1436336878460187386');" style=""> 132       throw new IllegalArgumentException(&quot;非FTP请求不能使用该方法&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133     }                                                                                                    </span>
<span class="5328341516284695107" onmouseenter="enter('5328341516284695107');" onmouseout="out('5328341516284695107');" style=""> 134     return new FtpDownloadTarget(entity, targetName, refreshInfo);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135   }                                                                                                      </span>
<span  style=""> 136                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 137   /**                                                                                                    </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 138    * 加载ftp单任务下载地址                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 139    */                                                                                                    </span>
<span class="-8520923309760825500" onmouseenter="enter('-8520923309760825500');" onmouseout="out('-8520923309760825500');" style=""> 140   public FtpDownloadTarget loadFtp(@NonNull String url) {                                                </span>
<span class="4470597214358385853" onmouseenter="enter('4470597214358385853');" onmouseout="out('4470597214358385853');" style=""> 141     return loadFtp(url, false);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142   }                                                                                                      </span>
<span  style=""> 143                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 144   /**                                                                                                    </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 145    * 加载ftp单任务下载地址                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 146    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 147    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 148    */                                                                                                    </span>
<span class="-3974752927486852600" onmouseenter="enter('-3974752927486852600');" onmouseout="out('-3974752927486852600');" style=""> 149   public FtpDownloadTarget loadFtp(@NonNull String url, boolean refreshInfo) {                           </span>
<span class="-8603189552017833172" onmouseenter="enter('-8603189552017833172');" onmouseout="out('-8603189552017833172');" style=""> 150     CheckUtil.checkUrl(url);                                                                             </span>
<span class="6480998331304056815" onmouseenter="enter('6480998331304056815');" onmouseout="out('6480998331304056815');" style=""> 151     return new FtpDownloadTarget(url, targetName, refreshInfo);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152   }                                                                                                      </span>
<span  style=""> 153                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 154   /**                                                                                                    </span>
<span class="-644101812843147118" onmouseenter="enter('-644101812843147118');" onmouseout="out('-644101812843147118');" style=""> 155    * 使用任务组实体执行任务组的实体执行任务组的下载操作                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 156    *                                                                                                     </span>
<span class="-7673496858448137784" onmouseenter="enter('-7673496858448137784');" onmouseout="out('-7673496858448137784');" style=""> 157    * @param groupEntity 如果加载的任务实体没有子项的下载地址，                                                              </span>
<span class="-5926959885594342389" onmouseenter="enter('-5926959885594342389');" onmouseout="out('-5926959885594342389');" style=""> 158    * 那么你需要使用{@link DownloadGroupTarget#setGroupUrl(List)}设置子项的下载地址                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 159    */                                                                                                    </span>
<span class="-7986782816995408761" onmouseenter="enter('-7986782816995408761');" onmouseout="out('-7986782816995408761');" style=""> 160   public DownloadGroupTarget load(DownloadGroupEntity groupEntity) {                                     </span>
<span class="5161082270961212892" onmouseenter="enter('5161082270961212892');" onmouseout="out('5161082270961212892');" style=""> 161     return new DownloadGroupTarget(groupEntity, targetName);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162   }                                                                                                      </span>
<span  style=""> 163                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 164   /**                                                                                                    </span>
<span class="1687338762191352295" onmouseenter="enter('1687338762191352295');" onmouseout="out('1687338762191352295');" style=""> 165    * 加载ftp文件夹下载地址                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 166    */                                                                                                    </span>
<span class="5825764911062879168" onmouseenter="enter('5825764911062879168');" onmouseout="out('5825764911062879168');" style=""> 167   public FtpDirDownloadTarget loadFtpDir(@NonNull String dirUrl) {                                       </span>
<span class="8504105770444144396" onmouseenter="enter('8504105770444144396');" onmouseout="out('8504105770444144396');" style=""> 168     CheckUtil.checkUrl(dirUrl);                                                                          </span>
<span class="-8988703603088435939" onmouseenter="enter('-8988703603088435939');" onmouseout="out('-8988703603088435939');" style=""> 169     return new FtpDirDownloadTarget(dirUrl, targetName);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170   }                                                                                                      </span>
<span  style=""> 171                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 172   /**                                                                                                    </span>
<span class="-2874086798355386198" onmouseenter="enter('-2874086798355386198');" onmouseout="out('-2874086798355386198');" style=""> 173    * 将当前类注册到Aria                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 174    */                                                                                                    </span>
<span class="-4925173742984207732" onmouseenter="enter('-4925173742984207732');" onmouseout="out('-4925173742984207732');" style=""> 175   public DownloadReceiver register() {                                                                   </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 176     String className = obj.getClass().getName();                                                         </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 177     Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                    </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 178     Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                              </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 179     Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                          </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 180     if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                              </span>
<span class="-5670875303591463725" onmouseenter="enter('-5670875303591463725');" onmouseout="out('-5670875303591463725');" style=""> 181       DownloadSchedulers.getInstance().register(obj);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182     }                                                                                                    </span>
<span class="8400813546960630432" onmouseenter="enter('8400813546960630432');" onmouseout="out('8400813546960630432');" style=""> 183     if ((dgCounter != null &amp;&amp; dgCounter.contains(className)) || (dgsCounter != null                      </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 184         &amp;&amp; dgsCounter.contains(className))) {                                                            </span>
<span class="1002821899645886942" onmouseenter="enter('1002821899645886942');" onmouseout="out('1002821899645886942');" style=""> 185       DownloadGroupSchedulers.getInstance().register(obj);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186     }                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 187     return this;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188   }                                                                                                      </span>
<span  style=""> 189                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 190   /**                                                                                                    </span>
<span class="4191554136684960646" onmouseenter="enter('4191554136684960646');" onmouseout="out('4191554136684960646');" style=""> 191    * 取消注册，如果是Activity或fragment，Aria会界面销毁时自动调用该方法。                                                        </span>
<span class="-2646056259317531884" onmouseenter="enter('-2646056259317531884');" onmouseout="out('-2646056259317531884');" style=""> 192    * 如果是Dialog或popupwindow，需要你在撤销界面时调用该方法                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 193    */                                                                                                    </span>
<span class="9104098464026605676" onmouseenter="enter('9104098464026605676');" onmouseout="out('9104098464026605676');" style=""> 194   @Override public void unRegister() {                                                                   </span>
<span class="-4378511932529658259" onmouseenter="enter('-4378511932529658259');" onmouseout="out('-4378511932529658259');" style=""> 195     if (needRmListener) {                                                                                </span>
<span class="-6315663267876105123" onmouseenter="enter('-6315663267876105123');" onmouseout="out('-6315663267876105123');" style=""> 196       unRegisterListener();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197     }                                                                                                    </span>
<span class="-1563105831930296864" onmouseenter="enter('-1563105831930296864');" onmouseout="out('-1563105831930296864');" style=""> 198       AriaManager.getInstance(AriaManager.APP).removeReceiver(obj);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199     }                                                                                                    </span>
<span  style=""> 200                                                                                                          </span>
<span class="-6986224254743714260" onmouseenter="enter('-6986224254743714260');" onmouseout="out('-6986224254743714260');" style=""> 201   @Override public void unRegisterListener() {                                                           </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 202     String className = obj.getClass().getName();                                                         </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 203     Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                    </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 204     Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                              </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 205     Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                          </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 206     if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                              </span>
<span class="-4965118218032185711" onmouseenter="enter('-4965118218032185711');" onmouseout="out('-4965118218032185711');" style=""> 207       DownloadSchedulers.getInstance().unRegister(obj);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208     }                                                                                                    </span>
<span class="974113968767899608" onmouseenter="enter('974113968767899608');" onmouseout="out('974113968767899608');" style=""> 209     if (dgCounter != null &amp;&amp; dgCounter.contains(className) || (dgsCounter != null                        </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 210         &amp;&amp; dgsCounter.contains(className))) {                                                            </span>
<span class="-7807598433909017874" onmouseenter="enter('-7807598433909017874');" onmouseout="out('-7807598433909017874');" style=""> 211       DownloadGroupSchedulers.getInstance().unRegister(obj);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213   }                                                                                                      </span>
<span  style=""> 214                                                                                                          </span>
<span class="3345695681730814389" onmouseenter="enter('3345695681730814389');" onmouseout="out('3345695681730814389');" style=""> 215   @Override public void destroy() {                                                                      </span>
<span class="-4901128148553670878" onmouseenter="enter('-4901128148553670878');" onmouseout="out('-4901128148553670878');" style=""> 216     targetName = null;                                                                                   </span>
<span class="-4099358687357442786" onmouseenter="enter('-4099358687357442786');" onmouseout="out('-4099358687357442786');" style=""> 217     listener = null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218   }                                                                                                      </span>
<span  style=""> 219                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 220   /**                                                                                                    </span>
<span class="-4855951461764354463" onmouseenter="enter('-4855951461764354463');" onmouseout="out('-4855951461764354463');" style=""> 221    * 通过下载链接获取下载实体                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 222    */                                                                                                    </span>
<span class="6067624311729681660" onmouseenter="enter('6067624311729681660');" onmouseout="out('6067624311729681660');" style=""> 223   public DownloadEntity getDownloadEntity(String downloadUrl) {                                          </span>
<span class="2765064707147909850" onmouseenter="enter('2765064707147909850');" onmouseout="out('2765064707147909850');" style=""> 224     CheckUtil.checkUrl(downloadUrl);                                                                     </span>
<span class="4826407584559057648" onmouseenter="enter('4826407584559057648');" onmouseout="out('4826407584559057648');" style=""> 225     return DbEntity.findFirst(DownloadEntity.class, &quot;url=? and isGroupChild=&#x27;false&#x27;&quot;, downloadUrl);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226   }                                                                                                      </span>
<span  style=""> 227                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 228   /**                                                                                                    </span>
<span class="625446827844080348" onmouseenter="enter('625446827844080348');" onmouseout="out('625446827844080348');" style=""> 229    * 通过下载链接获取保存在数据库的下载任务实体                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 230    */                                                                                                    </span>
<span class="-7637734105267374212" onmouseenter="enter('-7637734105267374212');" onmouseout="out('-7637734105267374212');" style=""> 231   public DownloadTaskEntity getDownloadTask(String downloadUrl) {                                        </span>
<span class="2765064707147909850" onmouseenter="enter('2765064707147909850');" onmouseout="out('2765064707147909850');" style=""> 232     CheckUtil.checkUrl(downloadUrl);                                                                     </span>
<span class="-5185402298602239038" onmouseenter="enter('-5185402298602239038');" onmouseout="out('-5185402298602239038');" style=""> 233     DownloadEntity entity = getDownloadEntity(downloadUrl);                                              </span>
<span class="-2008932504864023242" onmouseenter="enter('-2008932504864023242');" onmouseout="out('-2008932504864023242');" style=""> 234     if (entity == null || TextUtils.isEmpty(entity.getDownloadPath())) return null;                      </span>
<span class="-7326527410643528824" onmouseenter="enter('-7326527410643528824');" onmouseout="out('-7326527410643528824');" style=""> 235     return DbEntity.findFirst(DownloadTaskEntity.class, &quot;key=? and isGroupTask=&#x27;false&#x27;&quot;,                 </span>
<span class="-153714010952936175" onmouseenter="enter('-153714010952936175');" onmouseout="out('-153714010952936175');" style=""> 236         entity.getDownloadPath());                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237   }                                                                                                      </span>
<span  style=""> 238                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 239   /**                                                                                                    </span>
<span class="-6542418820527226697" onmouseenter="enter('-6542418820527226697');" onmouseout="out('-6542418820527226697');" style=""> 240    * 通过下载链接获取保存在数据库的下载任务组实体                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 241    */                                                                                                    </span>
<span class="5407962917483047507" onmouseenter="enter('5407962917483047507');" onmouseout="out('5407962917483047507');" style=""> 242   public DownloadGroupTaskEntity getDownloadGroupTask(List&lt;String&gt; urls) {                               </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 243     CheckUtil.checkDownloadUrls(urls);                                                                   </span>
<span class="-2143724232684022656" onmouseenter="enter('-2143724232684022656');" onmouseout="out('-2143724232684022656');" style=""> 244     String hashCode = CommonUtil.getMd5Code(urls);                                                       </span>
<span class="753794430818465046" onmouseenter="enter('753794430818465046');" onmouseout="out('753794430818465046');" style=""> 245     return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, hashCode);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246   }                                                                                                      </span>
<span  style=""> 247                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 248   /**                                                                                                    </span>
<span class="8545732146449590791" onmouseenter="enter('8545732146449590791');" onmouseout="out('8545732146449590791');" style=""> 249    * 通过任务组key，获取任务组实体                                                                                    </span>
<span class="-915937270042831698" onmouseenter="enter('-915937270042831698');" onmouseout="out('-915937270042831698');" style=""> 250    * 如果是http，key为所有子任务下载地址拼接后取md5                                                                        </span>
<span class="-6888603962563272152" onmouseenter="enter('-6888603962563272152');" onmouseout="out('-6888603962563272152');" style=""> 251    * 如果是ftp，key为ftp服务器的文件夹路径                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 252    */                                                                                                    </span>
<span class="3930845008170494728" onmouseenter="enter('3930845008170494728');" onmouseout="out('3930845008170494728');" style=""> 253   public DownloadGroupTaskEntity getDownloadGroupTask(String key) {                                      </span>
<span class="-2479292647152353998" onmouseenter="enter('-2479292647152353998');" onmouseout="out('-2479292647152353998');" style=""> 254     return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, key);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255   }                                                                                                      </span>
<span  style=""> 256                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 257   /**                                                                                                    </span>
<span class="-7888671401854060616" onmouseenter="enter('-7888671401854060616');" onmouseout="out('-7888671401854060616');" style=""> 258    * 下载任务是否存在                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 259    */                                                                                                    </span>
<span class="-1092275811913780416" onmouseenter="enter('-1092275811913780416');" onmouseout="out('-1092275811913780416');" style=""> 260   @Override public boolean taskExists(String downloadUrl) {                                              </span>
<span class="-8257903088695496664" onmouseenter="enter('-8257903088695496664');" onmouseout="out('-8257903088695496664');" style=""> 261     return DownloadEntity.findFirst(DownloadEntity.class, &quot;url=?&quot;, downloadUrl) != null;                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262   }                                                                                                      </span>
<span  style=""> 263                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 264   /**                                                                                                    </span>
<span class="-2894577714931105927" onmouseenter="enter('-2894577714931105927');" onmouseout="out('-2894577714931105927');" style=""> 265    * 获取普通下载任务列表                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 266    */                                                                                                    </span>
<span class="-1224977372519603955" onmouseenter="enter('-1224977372519603955');" onmouseout="out('-1224977372519603955');" style=""> 267   @Override public List&lt;DownloadEntity&gt; getSimpleTaskList() {                                            </span>
<span class="-3884263886229518247" onmouseenter="enter('-3884263886229518247');" onmouseout="out('-3884263886229518247');" style=""> 268     return DownloadEntity.findDatas(DownloadEntity.class, &quot;isGroupChild=? and downloadPath!=&#x27;&#x27;&quot;,         </span>
<span class="-8693734603624123186" onmouseenter="enter('-8693734603624123186');" onmouseout="out('-8693734603624123186');" style=""> 269         &quot;false&quot;);                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270   }                                                                                                      </span>
<span  style=""> 271                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 272   /**                                                                                                    </span>
<span class="-7216670373962638911" onmouseenter="enter('-7216670373962638911');" onmouseout="out('-7216670373962638911');" style=""> 273    * 获取任务组列表                                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 274    */                                                                                                    </span>
<span class="-2755211114601704515" onmouseenter="enter('-2755211114601704515');" onmouseout="out('-2755211114601704515');" style=""> 275   public List&lt;DownloadGroupEntity&gt; getGroupTaskList() {                                                  </span>
<span class="-8707622985980297555" onmouseenter="enter('-8707622985980297555');" onmouseout="out('-8707622985980297555');" style=""> 276     return DownloadEntity.findAllData(DownloadGroupEntity.class);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277   }                                                                                                      </span>
<span  style=""> 278                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 279   /**                                                                                                    </span>
<span class="8965383640224391026" onmouseenter="enter('8965383640224391026');" onmouseout="out('8965383640224391026');" style=""> 280    * 获取普通任务和任务组的任务列表                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 281    */                                                                                                    </span>
<span class="-2889141978955106905" onmouseenter="enter('-2889141978955106905');" onmouseout="out('-2889141978955106905');" style=""> 282   public List&lt;AbsEntity&gt; getTotleTaskList() {                                                            </span>
<span class="-7408081633636237340" onmouseenter="enter('-7408081633636237340');" onmouseout="out('-7408081633636237340');" style=""> 283     List&lt;AbsEntity&gt; list = new ArrayList&lt;&gt;();                                                            </span>
<span class="-1266594982388124504" onmouseenter="enter('-1266594982388124504');" onmouseout="out('-1266594982388124504');" style=""> 284     List&lt;DownloadEntity&gt; simpleTask = getSimpleTaskList();                                               </span>
<span class="-4106153234455279996" onmouseenter="enter('-4106153234455279996');" onmouseout="out('-4106153234455279996');" style=""> 285     List&lt;DownloadGroupEntity&gt; groupTask = getGroupTaskList();                                            </span>
<span class="-8209161792107312998" onmouseenter="enter('-8209161792107312998');" onmouseout="out('-8209161792107312998');" style=""> 286     if (simpleTask != null &amp;&amp; !simpleTask.isEmpty()) {                                                   </span>
<span class="6802811283489038468" onmouseenter="enter('6802811283489038468');" onmouseout="out('6802811283489038468');" style=""> 287       list.addAll(simpleTask);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288     }                                                                                                    </span>
<span class="6352724383592003863" onmouseenter="enter('6352724383592003863');" onmouseout="out('6352724383592003863');" style=""> 289     if (groupTask != null &amp;&amp; !groupTask.isEmpty()) {                                                     </span>
<span class="-1528470393600602759" onmouseenter="enter('-1528470393600602759');" onmouseout="out('-1528470393600602759');" style=""> 290       list.addAll(groupTask);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291     }                                                                                                    </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 292     return list;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293   }                                                                                                      </span>
<span  style=""> 294                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 295   /**                                                                                                    </span>
<span class="3402822126794432274" onmouseenter="enter('3402822126794432274');" onmouseout="out('3402822126794432274');" style=""> 296    * 停止所有正在下载的任务，并清空等待队列。                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 297    */                                                                                                    </span>
<span class="-8271139132618696861" onmouseenter="enter('-8271139132618696861');" onmouseout="out('-8271139132618696861');" style=""> 298   @Override public void stopAllTask() {                                                                  </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 299     AriaManager.getInstance(AriaManager.APP)                                                             </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 300         .setCmd(NormalCmdFactory.getInstance()                                                           </span>
<span class="6744734670145487711" onmouseenter="enter('6744734670145487711');" onmouseout="out('6744734670145487711');" style=""> 301             .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_STOP_ALL,             </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 302                 ICmd.TASK_TYPE_DOWNLOAD))                                                                </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 303         .exe();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304   }                                                                                                      </span>
<span  style=""> 305                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 306   /**                                                                                                    </span>
<span class="1311517946297423409" onmouseenter="enter('1311517946297423409');" onmouseout="out('1311517946297423409');" style=""> 307    * 恢复所有正在下载的任务                                                                                         </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style=""> 308    * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                         </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style=""> 309    * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 310    */                                                                                                    </span>
<span class="2382837737668558844" onmouseenter="enter('2382837737668558844');" onmouseout="out('2382837737668558844');" style=""> 311   public void resumeAllTask() {                                                                          </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 312     AriaManager.getInstance(AriaManager.APP)                                                             </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 313         .setCmd(NormalCmdFactory.getInstance()                                                           </span>
<span class="820973633919607204" onmouseenter="enter('820973633919607204');" onmouseout="out('820973633919607204');" style=""> 314             .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_RESUME_ALL,           </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 315                 ICmd.TASK_TYPE_DOWNLOAD))                                                                </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 316         .exe();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317   }                                                                                                      </span>
<span  style=""> 318                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 319   /**                                                                                                    </span>
<span class="-7338390600186437821" onmouseenter="enter('-7338390600186437821');" onmouseout="out('-7338390600186437821');" style=""> 320    * 删除所有任务                                                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 321    *                                                                                                     </span>
<span class="-325804075342723783" onmouseenter="enter('-325804075342723783');" onmouseout="out('-325804075342723783');" style=""> 322    * @param removeFile {@code true} 删除已经下载完成的任务，不仅删除下载记录，还会删除已经下载完成的文件，{@code false}                     </span>
<span class="-4045013558095481687" onmouseenter="enter('-4045013558095481687');" onmouseout="out('-4045013558095481687');" style=""> 323    * 如果文件已经下载完成，只删除下载记录                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 324    */                                                                                                    </span>
<span class="5963878394412937684" onmouseenter="enter('5963878394412937684');" onmouseout="out('5963878394412937684');" style=""> 325   @Override public void removeAllTask(boolean removeFile) {                                              </span>
<span class="-1602790229953823078" onmouseenter="enter('-1602790229953823078');" onmouseout="out('-1602790229953823078');" style=""> 326     final AriaManager ariaManager = AriaManager.getInstance(AriaManager.APP);                            </span>
<span class="-844712413651756711" onmouseenter="enter('-844712413651756711');" onmouseout="out('-844712413651756711');" style=""> 327     CancelAllCmd cancelCmd =                                                                             </span>
<span class="-8183977970671235029" onmouseenter="enter('-8183977970671235029');" onmouseout="out('-8183977970671235029');" style=""> 328         (CancelAllCmd) CommonUtil.createNormalCmd(targetName, new DownloadTaskEntity(),                  </span>
<span class="5247092821337102267" onmouseenter="enter('5247092821337102267');" onmouseout="out('5247092821337102267');" style=""> 329             NormalCmdFactory.TASK_CANCEL_ALL, ICmd.TASK_TYPE_DOWNLOAD);                                  </span>
<span class="-2029657375534786103" onmouseenter="enter('-2029657375534786103');" onmouseout="out('-2029657375534786103');" style=""> 330     cancelCmd.removeFile = removeFile;                                                                   </span>
<span class="-8687051478420435310" onmouseenter="enter('-8687051478420435310');" onmouseout="out('-8687051478420435310');" style=""> 331     ariaManager.setCmd(cancelCmd).exe();                                                                 </span>
<span class="6170682864485863774" onmouseenter="enter('6170682864485863774');" onmouseout="out('6170682864485863774');" style=""> 332     Set&lt;String&gt; keys = ariaManager.getReceiver().keySet();                                               </span>
<span class="-5841525186174834007" onmouseenter="enter('-5841525186174834007');" onmouseout="out('-5841525186174834007');" style=""> 333     for (String key : keys) {                                                                            </span>
<span class="-4261055600814182440" onmouseenter="enter('-4261055600814182440');" onmouseout="out('-4261055600814182440');" style=""> 334       ariaManager.getReceiver().remove(key);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337 }                                                                                                        </span>







</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="1987357580077471394" onmouseenter="enter('1987357580077471394');" onmouseout="out('1987357580077471394');" style="">  16 package com.arialyy.aria.core.download;                                                                  </span>
<span  style="">  17                                                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  18 import android.support.annotation.NonNull;                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  19 import android.text.TextUtils;                                                                           </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  20 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="3020238846680658976" onmouseenter="enter('3020238846680658976');" onmouseout="out('3020238846680658976');" style="">  21 import com.arialyy.aria.core.command.ICmd;                                                               </span>
<span class="4948857189306634189" onmouseenter="enter('4948857189306634189');" onmouseout="out('4948857189306634189');" style="">  22 import com.arialyy.aria.core.command.normal.CancelAllCmd;                                                </span>
<span class="-801363442427116995" onmouseenter="enter('-801363442427116995');" onmouseout="out('-801363442427116995');" style="">  23 import com.arialyy.aria.core.command.normal.NormalCmdFactory;                                            </span>
<span class="5633299353752109870" onmouseenter="enter('5633299353752109870');" onmouseout="out('5633299353752109870');" style="">  24 import com.arialyy.aria.core.common.ProxyHelper;                                                         </span>
<span class="3322471595626447686" onmouseenter="enter('3322471595626447686');" onmouseout="out('3322471595626447686');" style="">  25 import com.arialyy.aria.core.inf.AbsEntity;                                                              </span>
<span class="-2122960619967737033" onmouseenter="enter('-2122960619967737033');" onmouseout="out('-2122960619967737033');" style="">  26 import com.arialyy.aria.core.inf.AbsReceiver;                                                            </span>
<span class="6977447411617077002" onmouseenter="enter('6977447411617077002');" onmouseout="out('6977447411617077002');" style="">  27 import com.arialyy.aria.core.scheduler.DownloadGroupSchedulers;                                          </span>
<span class="7326175858930165690" onmouseenter="enter('7326175858930165690');" onmouseout="out('7326175858930165690');" style="">  28 import com.arialyy.aria.core.scheduler.DownloadSchedulers;                                               </span>
<span class="-972246557960033348" onmouseenter="enter('-972246557960033348');" onmouseout="out('-972246557960033348');" style="">  29 import com.arialyy.aria.core.scheduler.ISchedulerListener;                                               </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  30 import com.arialyy.aria.orm.DbEntity;                                                                    </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="">  31 import com.arialyy.aria.util.ALog;                                                                       </span>
<span class="-8921020518339919076" onmouseenter="enter('-8921020518339919076');" onmouseout="out('-8921020518339919076');" style="">  32 import com.arialyy.aria.util.CheckUtil;                                                                  </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  33 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  34 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  35 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  36 import java.util.Set;                                                                                    </span>
<span  style="">  37                                                                                                          </span>
<span  style="">  38                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  39 /**                                                                                                      </span>
<span class="-8976164179967820781" onmouseenter="enter('-8976164179967820781');" onmouseout="out('-8976164179967820781');" style="">  40  * Created by lyy on 2016/12/5.                                                                          </span>
<span class="8451370004399326130" onmouseenter="enter('8451370004399326130');" onmouseout="out('8451370004399326130');" style="">  41  * 下载功能接收器                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  42  */                                                                                                      </span>
<span class="-2662683455388224586" onmouseenter="enter('-2662683455388224586');" onmouseout="out('-2662683455388224586');" style="">  43 public class DownloadReceiver extends AbsReceiver {                                                      </span>
<span class="-4144196955255973047" onmouseenter="enter('-4144196955255973047');" onmouseout="out('-4144196955255973047');" style="">  44   private final String TAG = &quot;DownloadReceiver&quot;;                                                         </span>
<span  style="">  45                                                                                                          </span>
<span class="8974910660156933255" onmouseenter="enter('8974910660156933255');" onmouseout="out('8974910660156933255');" style="">  46   public ISchedulerListener&lt;DownloadTask&gt; listener;                                                      </span>
<span  style="">  47                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  48   /**                                                                                                    </span>
<span class="-8030592473296514020" onmouseenter="enter('-8030592473296514020');" onmouseout="out('-8030592473296514020');" style="">  49    * 设置最大下载速度，单位：kb                                                                                      </span>
<span class="5818094815562401128" onmouseenter="enter('5818094815562401128');" onmouseout="out('5818094815562401128');" style="">  50    * 该方法为实验性功能，清不要轻易在生产环境中使用。                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  51    *                                                                                                     </span>
<span class="9124526800094534994" onmouseenter="enter('9124526800094534994');" onmouseout="out('9124526800094534994');" style="">  52    * @param maxSpeed 为0表示不限速                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  53    */                                                                                                    </span>
<span class="-7953977331871486849" onmouseenter="enter('-7953977331871486849');" onmouseout="out('-7953977331871486849');" style="">  54   @Deprecated public void setMaxSpeed(double maxSpeed) {                                                 </span>
<span class="7170079538529520301" onmouseenter="enter('7170079538529520301');" onmouseout="out('7170079538529520301');" style="">  55     AriaManager.getInstance(AriaManager.APP).getDownloadConfig().setMsxSpeed(maxSpeed);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  56   }                                                                                                      </span>
<span  style="">  57                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  58   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  59    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  60    *                                                                                                     </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style="">  61    * @param entity 下载实体                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  62    */                                                                                                    </span>
<span class="5466262800524521213" onmouseenter="enter('5466262800524521213');" onmouseout="out('5466262800524521213');" style="">  63   public DownloadTarget load(DownloadEntity entity) {                                                    </span>
<span class="6765829635565156021" onmouseenter="enter('6765829635565156021');" onmouseout="out('6765829635565156021');" style="">  64     return load(entity, false);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65   }                                                                                                      </span>
<span  style="">  66                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  67   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  68    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  69    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style="">  70    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  71    */                                                                                                    </span>
<span class="4512208090544288363" onmouseenter="enter('4512208090544288363');" onmouseout="out('4512208090544288363');" style="">  72   public DownloadTarget load(DownloadEntity entity, boolean refreshInfo) {                               </span>
<span  style="">  73                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style="">  74 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="-8873840630710694359" onmouseenter="enter('-8873840630710694359');" onmouseout="out('-8873840630710694359');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  75     CheckUtil.checkDownloadUrl(entity.getUrl());                                                         </span>
<span class="-3528511344377244480" onmouseenter="enter('-3528511344377244480');" onmouseout="out('-3528511344377244480');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  76     if (entity.getUrl().startsWith(&quot;ftp&quot;)) {                                                             </span>
<span class="7973896769491137792" onmouseenter="enter('7973896769491137792');" onmouseout="out('7973896769491137792');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  77       ALog.w(TAG,                                                                                        </span>
<span class="-1990769771817592658" onmouseenter="enter('-1990769771817592658');" onmouseout="out('-1990769771817592658');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  78           &quot;使用实体启动FTP下载，如果你的FTP服务器需要登录，那么你需要调用登录的接口，如：Aria.download(this).load(url).login(user, pw).start()&quot;);">  78           &quot;使用实体启动FTP下载，如果你的FTP服务器需要登录，那么你需要调用登录的接口，如：Aria.download(this).load(url).login(user, pw).start(🔵</abbr></span>
<span class="5328341516284695107" onmouseenter="enter('5328341516284695107');" onmouseout="out('5328341516284695107');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  79       return new FtpDownloadTarget(entity, targetName, refreshInfo);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  80     }                                                                                                    </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  81 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  82 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">  82 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  83 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84                                                                                                          </span>
<span class="-5704682181018188738" onmouseenter="enter('-5704682181018188738');" onmouseout="out('-5704682181018188738');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85     CheckUtil.checkDownloadEntity(entity);                                                               </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style="">  86 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style="">  87                                                                                                          </span>
<span class="-1334893378673445546" onmouseenter="enter('-1334893378673445546');" onmouseout="out('-1334893378673445546');" style="">  88     return new DownloadTarget(entity, targetName, refreshInfo);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  89   }                                                                                                      </span>
<span  style="">  90                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  91   /**                                                                                                    </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="">  92    * 加载Http、https单任务下载地址                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  93    *                                                                                                     </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="">  94    * @param url 下载地址                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  95    */                                                                                                    </span>
<span class="-7620646004657887099" onmouseenter="enter('-7620646004657887099');" onmouseout="out('-7620646004657887099');" style="">  96   public DownloadTarget load(@NonNull String url) {                                                      </span>
<span class="1571066346408047685" onmouseenter="enter('1571066346408047685');" onmouseout="out('1571066346408047685');" style="">  97     return load(url, false);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98   }                                                                                                      </span>
<span  style="">  99                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 100   /**                                                                                                    </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style=""> 101    * 加载Http、https单任务下载地址                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 102    *                                                                                                     </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style=""> 103    * @param url 下载地址                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 104    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 105    */                                                                                                    </span>
<span class="4648348523170975147" onmouseenter="enter('4648348523170975147');" onmouseout="out('4648348523170975147');" style=""> 106   public DownloadTarget load(@NonNull                                                                    </span>
<span class="-4972387181935291340" onmouseenter="enter('-4972387181935291340');" onmouseout="out('-4972387181935291340');" style=""> 107   String url, boolean refreshInfo) {                                                                     </span>
<span class="-8603189552017833172" onmouseenter="enter('-8603189552017833172');" onmouseout="out('-8603189552017833172');" style=""> 108     CheckUtil.checkUrl(url);                                                                             </span>
<span class="-6107422860730852976" onmouseenter="enter('-6107422860730852976');" onmouseout="out('-6107422860730852976');" style=""> 109     return new DownloadTarget(url, targetName, refreshInfo);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110   }                                                                                                      </span>
<span  style=""> 111                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 112   /**                                                                                                    </span>
<span class="2297304325080531827" onmouseenter="enter('2297304325080531827');" onmouseout="out('2297304325080531827');" style=""> 113    * 加载下载地址，如果任务组的中的下载地址改变了，则任务从新的一个任务组                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 114    */                                                                                                    </span>
<span class="-3978985407316286854" onmouseenter="enter('-3978985407316286854');" onmouseout="out('-3978985407316286854');" style=""> 115   public DownloadGroupTarget load(List&lt;String&gt; urls) {                                                   </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 116     CheckUtil.checkDownloadUrls(urls);                                                                   </span>
<span class="-2612285513071399987" onmouseenter="enter('-2612285513071399987');" onmouseout="out('-2612285513071399987');" style=""> 117     return new DownloadGroupTarget(urls, targetName);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118   }                                                                                                      </span>
<span  style=""> 119                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 120   /**                                                                                                    </span>
<span class="5765642592743702501" onmouseenter="enter('5765642592743702501');" onmouseout="out('5765642592743702501');" style=""> 121    * 使用下载实体执行FTP下载操作                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 122    *                                                                                                     </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style=""> 123    * @param entity 下载实体                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 124    */                                                                                                    </span>
<span class="539990068933324946" onmouseenter="enter('539990068933324946');" onmouseout="out('539990068933324946');" style=""> 125   public FtpDownloadTarget loadFtp(DownloadEntity entity) {                                              </span>
<span class="3022490169827315427" onmouseenter="enter('3022490169827315427');" onmouseout="out('3022490169827315427');" style=""> 126     return loadFtp(entity, false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127   }                                                                                                      </span>
<span  style=""> 128                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 129   /**                                                                                                    </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style=""> 130    * 使用下载实体执行下载操作                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 131    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 132    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 133    */                                                                                                    </span>
<span class="7418286421971784035" onmouseenter="enter('7418286421971784035');" onmouseout="out('7418286421971784035');" style=""> 134   public FtpDownloadTarget loadFtp(DownloadEntity entity, boolean refreshInfo) {                         </span>
<span class="-5704682181018188738" onmouseenter="enter('-5704682181018188738');" onmouseout="out('-5704682181018188738');" style=""> 135     CheckUtil.checkDownloadEntity(entity);                                                               </span>
<span class="-6911794941446079567" onmouseenter="enter('-6911794941446079567');" onmouseout="out('-6911794941446079567');" style=""> 136     if (!entity.getUrl().startsWith(&quot;ftp&quot;)) {                                                            </span>
<span class="-1436336878460187386" onmouseenter="enter('-1436336878460187386');" onmouseout="out('-1436336878460187386');" style=""> 137       throw new IllegalArgumentException(&quot;非FTP请求不能使用该方法&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138     }                                                                                                    </span>
<span class="5328341516284695107" onmouseenter="enter('5328341516284695107');" onmouseout="out('5328341516284695107');" style=""> 139     return new FtpDownloadTarget(entity, targetName, refreshInfo);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140   }                                                                                                      </span>
<span  style=""> 141                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 142   /**                                                                                                    </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 143    * 加载ftp单任务下载地址                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 144    */                                                                                                    </span>
<span class="-8520923309760825500" onmouseenter="enter('-8520923309760825500');" onmouseout="out('-8520923309760825500');" style=""> 145   public FtpDownloadTarget loadFtp(@NonNull String url) {                                                </span>
<span class="4470597214358385853" onmouseenter="enter('4470597214358385853');" onmouseout="out('4470597214358385853');" style=""> 146     return loadFtp(url, false);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147   }                                                                                                      </span>
<span  style=""> 148                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 149   /**                                                                                                    </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 150    * 加载ftp单任务下载地址                                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 151    *                                                                                                     </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 152    * @param refreshInfo 是否刷新下载信息                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 153    */                                                                                                    </span>
<span class="-6959426636935550960" onmouseenter="enter('-6959426636935550960');" onmouseout="out('-6959426636935550960');" style=""> 154   public FtpDownloadTarget loadFtp(@NonNull                                                              </span>
<span class="-4972387181935291340" onmouseenter="enter('-4972387181935291340');" onmouseout="out('-4972387181935291340');" style=""> 155   String url, boolean refreshInfo) {                                                                     </span>
<span class="-8603189552017833172" onmouseenter="enter('-8603189552017833172');" onmouseout="out('-8603189552017833172');" style=""> 156     CheckUtil.checkUrl(url);                                                                             </span>
<span class="6480998331304056815" onmouseenter="enter('6480998331304056815');" onmouseout="out('6480998331304056815');" style=""> 157     return new FtpDownloadTarget(url, targetName, refreshInfo);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158   }                                                                                                      </span>
<span  style=""> 159                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 160   /**                                                                                                    </span>
<span class="-644101812843147118" onmouseenter="enter('-644101812843147118');" onmouseout="out('-644101812843147118');" style=""> 161    * 使用任务组实体执行任务组的实体执行任务组的下载操作                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 162    *                                                                                                     </span>
<span class="-7673496858448137784" onmouseenter="enter('-7673496858448137784');" onmouseout="out('-7673496858448137784');" style=""> 163    * @param groupEntity 如果加载的任务实体没有子项的下载地址，                                                              </span>
<span class="-5926959885594342389" onmouseenter="enter('-5926959885594342389');" onmouseout="out('-5926959885594342389');" style=""> 164    * 那么你需要使用{@link DownloadGroupTarget#setGroupUrl(List)}设置子项的下载地址                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 165    */                                                                                                    </span>
<span class="-7986782816995408761" onmouseenter="enter('-7986782816995408761');" onmouseout="out('-7986782816995408761');" style=""> 166   public DownloadGroupTarget load(DownloadGroupEntity groupEntity) {                                     </span>
<span class="5161082270961212892" onmouseenter="enter('5161082270961212892');" onmouseout="out('5161082270961212892');" style=""> 167     return new DownloadGroupTarget(groupEntity, targetName);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168   }                                                                                                      </span>
<span  style=""> 169                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 170   /**                                                                                                    </span>
<span class="1687338762191352295" onmouseenter="enter('1687338762191352295');" onmouseout="out('1687338762191352295');" style=""> 171    * 加载ftp文件夹下载地址                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 172    */                                                                                                    </span>
<span class="-2952243603115483708" onmouseenter="enter('-2952243603115483708');" onmouseout="out('-2952243603115483708');" style=""> 173   public FtpDirDownloadTarget loadFtpDir(@NonNull                                                        </span>
<span class="-702029127564948461" onmouseenter="enter('-702029127564948461');" onmouseout="out('-702029127564948461');" style=""> 174   String dirUrl) {                                                                                       </span>
<span class="8504105770444144396" onmouseenter="enter('8504105770444144396');" onmouseout="out('8504105770444144396');" style=""> 175     CheckUtil.checkUrl(dirUrl);                                                                          </span>
<span class="-8988703603088435939" onmouseenter="enter('-8988703603088435939');" onmouseout="out('-8988703603088435939');" style=""> 176     return new FtpDirDownloadTarget(dirUrl, targetName);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177   }                                                                                                      </span>
<span  style=""> 178                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 179   /**                                                                                                    </span>
<span class="-2874086798355386198" onmouseenter="enter('-2874086798355386198');" onmouseout="out('-2874086798355386198');" style=""> 180    * 将当前类注册到Aria                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 181    */                                                                                                    </span>
<span class="-4925173742984207732" onmouseenter="enter('-4925173742984207732');" onmouseout="out('-4925173742984207732');" style=""> 182   public DownloadReceiver register() {                                                                   </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 183     String className = obj.getClass().getName();                                                         </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 184     Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                    </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 185     Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                              </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 186     Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                          </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 187     if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                              </span>
<span class="-5670875303591463725" onmouseenter="enter('-5670875303591463725');" onmouseout="out('-5670875303591463725');" style=""> 188       DownloadSchedulers.getInstance().register(obj);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189     }                                                                                                    </span>
<span class="8400813546960630432" onmouseenter="enter('8400813546960630432');" onmouseout="out('8400813546960630432');" style=""> 190     if ((dgCounter != null &amp;&amp; dgCounter.contains(className)) || (dgsCounter != null                      </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 191         &amp;&amp; dgsCounter.contains(className))) {                                                            </span>
<span class="1002821899645886942" onmouseenter="enter('1002821899645886942');" onmouseout="out('1002821899645886942');" style=""> 192       DownloadGroupSchedulers.getInstance().register(obj);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193     }                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 194     return this;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195   }                                                                                                      </span>
<span  style=""> 196                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 197   /**                                                                                                    </span>
<span class="4191554136684960646" onmouseenter="enter('4191554136684960646');" onmouseout="out('4191554136684960646');" style=""> 198    * 取消注册，如果是Activity或fragment，Aria会界面销毁时自动调用该方法。                                                        </span>
<span class="-2646056259317531884" onmouseenter="enter('-2646056259317531884');" onmouseout="out('-2646056259317531884');" style=""> 199    * 如果是Dialog或popupwindow，需要你在撤销界面时调用该方法                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 200    */                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 201   @Override                                                                                              </span>
<span class="-4986667513617837645" onmouseenter="enter('-4986667513617837645');" onmouseout="out('-4986667513617837645');" style=""> 202   public void unRegister() {                                                                             </span>
<span class="-4378511932529658259" onmouseenter="enter('-4378511932529658259');" onmouseout="out('-4378511932529658259');" style=""> 203     if (needRmListener) {                                                                                </span>
<span class="-6315663267876105123" onmouseenter="enter('-6315663267876105123');" onmouseout="out('-6315663267876105123');" style=""> 204       unRegisterListener();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205     }                                                                                                    </span>
<span class="-1563105831930296864" onmouseenter="enter('-1563105831930296864');" onmouseout="out('-1563105831930296864');" style=""> 206     AriaManager.getInstance(AriaManager.APP).removeReceiver(obj);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207   }                                                                                                      </span>
<span  style=""> 208                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 209   @Override                                                                                              </span>
<span class="-3635601100555569396" onmouseenter="enter('-3635601100555569396');" onmouseout="out('-3635601100555569396');" style=""> 210   public void unRegisterListener() {                                                                     </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 211     String className = obj.getClass().getName();                                                         </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 212     Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                    </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 213     Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                              </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 214     Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                          </span>
<span class="7963038202731182872" onmouseenter="enter('7963038202731182872');" onmouseout="out('7963038202731182872');" style=""> 215     if ((dCounter != null) &amp;&amp; dCounter.contains(className)) {                                            </span>
<span class="-4965118218032185711" onmouseenter="enter('-4965118218032185711');" onmouseout="out('-4965118218032185711');" style=""> 216       DownloadSchedulers.getInstance().unRegister(obj);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217     }                                                                                                    </span>
<span class="-4280535190255600531" onmouseenter="enter('-4280535190255600531');" onmouseout="out('-4280535190255600531');" style=""><abbr title=" 218     if (((dgCounter != null) &amp;&amp; dgCounter.contains(className)) || ((dgsCounter != null) &amp;&amp; dgsCounter.contains(className))) {"> 218     if (((dgCounter != null) &amp;&amp; dgCounter.contains(className)) || ((dgsCounter != null) &amp;&amp; dgsCounter.con🔵</abbr></span>
<span class="-7807598433909017874" onmouseenter="enter('-7807598433909017874');" onmouseout="out('-7807598433909017874');" style=""> 219       DownloadGroupSchedulers.getInstance().unRegister(obj);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221   }                                                                                                      </span>
<span  style=""> 222                                                                                                          </span>
<span class="3345695681730814389" onmouseenter="enter('3345695681730814389');" onmouseout="out('3345695681730814389');" style=""> 223   @Override public void destroy() {                                                                      </span>
<span class="-4901128148553670878" onmouseenter="enter('-4901128148553670878');" onmouseout="out('-4901128148553670878');" style=""> 224     targetName = null;                                                                                   </span>
<span class="-4099358687357442786" onmouseenter="enter('-4099358687357442786');" onmouseout="out('-4099358687357442786');" style=""> 225     listener = null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226   }                                                                                                      </span>
<span  style=""> 227                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 228   /**                                                                                                    </span>
<span class="-4855951461764354463" onmouseenter="enter('-4855951461764354463');" onmouseout="out('-4855951461764354463');" style=""> 229    * 通过下载链接获取下载实体                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 230    */                                                                                                    </span>
<span class="6067624311729681660" onmouseenter="enter('6067624311729681660');" onmouseout="out('6067624311729681660');" style=""> 231   public DownloadEntity getDownloadEntity(String downloadUrl) {                                          </span>
<span class="2765064707147909850" onmouseenter="enter('2765064707147909850');" onmouseout="out('2765064707147909850');" style=""> 232     CheckUtil.checkUrl(downloadUrl);                                                                     </span>
<span class="4826407584559057648" onmouseenter="enter('4826407584559057648');" onmouseout="out('4826407584559057648');" style=""> 233     return DbEntity.findFirst(DownloadEntity.class, &quot;url=? and isGroupChild=&#x27;false&#x27;&quot;, downloadUrl);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234   }                                                                                                      </span>
<span  style=""> 235                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 236   /**                                                                                                    </span>
<span class="625446827844080348" onmouseenter="enter('625446827844080348');" onmouseout="out('625446827844080348');" style=""> 237    * 通过下载链接获取保存在数据库的下载任务实体                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 238    */                                                                                                    </span>
<span class="-7637734105267374212" onmouseenter="enter('-7637734105267374212');" onmouseout="out('-7637734105267374212');" style=""> 239   public DownloadTaskEntity getDownloadTask(String downloadUrl) {                                        </span>
<span class="2765064707147909850" onmouseenter="enter('2765064707147909850');" onmouseout="out('2765064707147909850');" style=""> 240     CheckUtil.checkUrl(downloadUrl);                                                                     </span>
<span class="-5185402298602239038" onmouseenter="enter('-5185402298602239038');" onmouseout="out('-5185402298602239038');" style=""> 241     DownloadEntity entity = getDownloadEntity(downloadUrl);                                              </span>
<span class="-740295002800895782" onmouseenter="enter('-740295002800895782');" onmouseout="out('-740295002800895782');" style=""> 242     if ((entity == null) || TextUtils.isEmpty(entity.getDownloadPath())) {                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 243       return null;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244     }                                                                                                    </span>
<span class="8000816717114607884" onmouseenter="enter('8000816717114607884');" onmouseout="out('8000816717114607884');" style=""><abbr title=" 245     return DbEntity.findFirst(DownloadTaskEntity.class, &quot;key=? and isGroupTask=&#x27;false&#x27;&quot;, entity.getDownloadPath());"> 245     return DbEntity.findFirst(DownloadTaskEntity.class, &quot;key=? and isGroupTask=&#x27;false&#x27;&quot;, entity.getDownlo🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246   }                                                                                                      </span>
<span  style=""> 247                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 248   /**                                                                                                    </span>
<span class="-6542418820527226697" onmouseenter="enter('-6542418820527226697');" onmouseout="out('-6542418820527226697');" style=""> 249    * 通过下载链接获取保存在数据库的下载任务组实体                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 250    */                                                                                                    </span>
<span class="5407962917483047507" onmouseenter="enter('5407962917483047507');" onmouseout="out('5407962917483047507');" style=""> 251   public DownloadGroupTaskEntity getDownloadGroupTask(List&lt;String&gt; urls) {                               </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 252     CheckUtil.checkDownloadUrls(urls);                                                                   </span>
<span class="-2143724232684022656" onmouseenter="enter('-2143724232684022656');" onmouseout="out('-2143724232684022656');" style=""> 253     String hashCode = CommonUtil.getMd5Code(urls);                                                       </span>
<span class="753794430818465046" onmouseenter="enter('753794430818465046');" onmouseout="out('753794430818465046');" style=""> 254     return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, hashCode);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255   }                                                                                                      </span>
<span  style=""> 256                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 257   /**                                                                                                    </span>
<span class="8545732146449590791" onmouseenter="enter('8545732146449590791');" onmouseout="out('8545732146449590791');" style=""> 258    * 通过任务组key，获取任务组实体                                                                                    </span>
<span class="-915937270042831698" onmouseenter="enter('-915937270042831698');" onmouseout="out('-915937270042831698');" style=""> 259    * 如果是http，key为所有子任务下载地址拼接后取md5                                                                        </span>
<span class="-6888603962563272152" onmouseenter="enter('-6888603962563272152');" onmouseout="out('-6888603962563272152');" style=""> 260    * 如果是ftp，key为ftp服务器的文件夹路径                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 261    */                                                                                                    </span>
<span class="3930845008170494728" onmouseenter="enter('3930845008170494728');" onmouseout="out('3930845008170494728');" style=""> 262   public DownloadGroupTaskEntity getDownloadGroupTask(String key) {                                      </span>
<span class="-2479292647152353998" onmouseenter="enter('-2479292647152353998');" onmouseout="out('-2479292647152353998');" style=""> 263     return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, key);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264   }                                                                                                      </span>
<span  style=""> 265                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 266   /**                                                                                                    </span>
<span class="-7888671401854060616" onmouseenter="enter('-7888671401854060616');" onmouseout="out('-7888671401854060616');" style=""> 267    * 下载任务是否存在                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 268    */                                                                                                    </span>
<span class="-1092275811913780416" onmouseenter="enter('-1092275811913780416');" onmouseout="out('-1092275811913780416');" style=""> 269   @Override public boolean taskExists(String downloadUrl) {                                              </span>
<span class="-8257903088695496664" onmouseenter="enter('-8257903088695496664');" onmouseout="out('-8257903088695496664');" style=""> 270     return DownloadEntity.findFirst(DownloadEntity.class, &quot;url=?&quot;, downloadUrl) != null;                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271   }                                                                                                      </span>
<span  style=""> 272                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 273   /**                                                                                                    </span>
<span class="-2894577714931105927" onmouseenter="enter('-2894577714931105927');" onmouseout="out('-2894577714931105927');" style=""> 274    * 获取普通下载任务列表                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 275    */                                                                                                    </span>
<span class="-1224977372519603955" onmouseenter="enter('-1224977372519603955');" onmouseout="out('-1224977372519603955');" style=""> 276   @Override public List&lt;DownloadEntity&gt; getSimpleTaskList() {                                            </span>
<span class="-3884263886229518247" onmouseenter="enter('-3884263886229518247');" onmouseout="out('-3884263886229518247');" style=""> 277     return DownloadEntity.findDatas(DownloadEntity.class, &quot;isGroupChild=? and downloadPath!=&#x27;&#x27;&quot;,         </span>
<span class="-8693734603624123186" onmouseenter="enter('-8693734603624123186');" onmouseout="out('-8693734603624123186');" style=""> 278         &quot;false&quot;);                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279   }                                                                                                      </span>
<span  style=""> 280                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 281   /**                                                                                                    </span>
<span class="-7216670373962638911" onmouseenter="enter('-7216670373962638911');" onmouseout="out('-7216670373962638911');" style=""> 282    * 获取任务组列表                                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 283    */                                                                                                    </span>
<span class="-2755211114601704515" onmouseenter="enter('-2755211114601704515');" onmouseout="out('-2755211114601704515');" style=""> 284   public List&lt;DownloadGroupEntity&gt; getGroupTaskList() {                                                  </span>
<span class="-8707622985980297555" onmouseenter="enter('-8707622985980297555');" onmouseout="out('-8707622985980297555');" style=""> 285     return DownloadEntity.findAllData(DownloadGroupEntity.class);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286   }                                                                                                      </span>
<span  style=""> 287                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 288   /**                                                                                                    </span>
<span class="8965383640224391026" onmouseenter="enter('8965383640224391026');" onmouseout="out('8965383640224391026');" style=""> 289    * 获取普通任务和任务组的任务列表                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 290    */                                                                                                    </span>
<span class="-2889141978955106905" onmouseenter="enter('-2889141978955106905');" onmouseout="out('-2889141978955106905');" style=""> 291   public List&lt;AbsEntity&gt; getTotleTaskList() {                                                            </span>
<span class="-7408081633636237340" onmouseenter="enter('-7408081633636237340');" onmouseout="out('-7408081633636237340');" style=""> 292     List&lt;AbsEntity&gt; list = new ArrayList&lt;&gt;();                                                            </span>
<span class="-1266594982388124504" onmouseenter="enter('-1266594982388124504');" onmouseout="out('-1266594982388124504');" style=""> 293     List&lt;DownloadEntity&gt; simpleTask = getSimpleTaskList();                                               </span>
<span class="-4106153234455279996" onmouseenter="enter('-4106153234455279996');" onmouseout="out('-4106153234455279996');" style=""> 294     List&lt;DownloadGroupEntity&gt; groupTask = getGroupTaskList();                                            </span>
<span class="-8209161792107312998" onmouseenter="enter('-8209161792107312998');" onmouseout="out('-8209161792107312998');" style=""> 295     if (simpleTask != null &amp;&amp; !simpleTask.isEmpty()) {                                                   </span>
<span class="6802811283489038468" onmouseenter="enter('6802811283489038468');" onmouseout="out('6802811283489038468');" style=""> 296       list.addAll(simpleTask);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297     }                                                                                                    </span>
<span class="6352724383592003863" onmouseenter="enter('6352724383592003863');" onmouseout="out('6352724383592003863');" style=""> 298     if (groupTask != null &amp;&amp; !groupTask.isEmpty()) {                                                     </span>
<span class="-1528470393600602759" onmouseenter="enter('-1528470393600602759');" onmouseout="out('-1528470393600602759');" style=""> 299       list.addAll(groupTask);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300     }                                                                                                    </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 301     return list;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302   }                                                                                                      </span>
<span  style=""> 303                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 304   /**                                                                                                    </span>
<span class="3402822126794432274" onmouseenter="enter('3402822126794432274');" onmouseout="out('3402822126794432274');" style=""> 305    * 停止所有正在下载的任务，并清空等待队列。                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 306    */                                                                                                    </span>
<span class="-8271139132618696861" onmouseenter="enter('-8271139132618696861');" onmouseout="out('-8271139132618696861');" style=""> 307   @Override public void stopAllTask() {                                                                  </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 308     AriaManager.getInstance(AriaManager.APP)                                                             </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 309         .setCmd(NormalCmdFactory.getInstance()                                                           </span>
<span class="6744734670145487711" onmouseenter="enter('6744734670145487711');" onmouseout="out('6744734670145487711');" style=""> 310             .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_STOP_ALL,             </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 311                 ICmd.TASK_TYPE_DOWNLOAD))                                                                </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 312         .exe();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313   }                                                                                                      </span>
<span  style=""> 314                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 315   /**                                                                                                    </span>
<span class="1311517946297423409" onmouseenter="enter('1311517946297423409');" onmouseout="out('1311517946297423409');" style=""> 316    * 恢复所有正在下载的任务                                                                                         </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style=""> 317    * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                         </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style=""> 318    * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 319    */                                                                                                    </span>
<span class="2382837737668558844" onmouseenter="enter('2382837737668558844');" onmouseout="out('2382837737668558844');" style=""> 320   public void resumeAllTask() {                                                                          </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 321     AriaManager.getInstance(AriaManager.APP)                                                             </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 322         .setCmd(NormalCmdFactory.getInstance()                                                           </span>
<span class="820973633919607204" onmouseenter="enter('820973633919607204');" onmouseout="out('820973633919607204');" style=""> 323             .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_RESUME_ALL,           </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 324                 ICmd.TASK_TYPE_DOWNLOAD))                                                                </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 325         .exe();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326   }                                                                                                      </span>
<span  style=""> 327                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 328   /**                                                                                                    </span>
<span class="-7338390600186437821" onmouseenter="enter('-7338390600186437821');" onmouseout="out('-7338390600186437821');" style=""> 329    * 删除所有任务                                                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 330    *                                                                                                     </span>
<span class="-325804075342723783" onmouseenter="enter('-325804075342723783');" onmouseout="out('-325804075342723783');" style=""> 331    * @param removeFile {@code true} 删除已经下载完成的任务，不仅删除下载记录，还会删除已经下载完成的文件，{@code false}                     </span>
<span class="-4045013558095481687" onmouseenter="enter('-4045013558095481687');" onmouseout="out('-4045013558095481687');" style=""> 332    * 如果文件已经下载完成，只删除下载记录                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 333    */                                                                                                    </span>
<span class="5963878394412937684" onmouseenter="enter('5963878394412937684');" onmouseout="out('5963878394412937684');" style=""> 334   @Override public void removeAllTask(boolean removeFile) {                                              </span>
<span class="-1602790229953823078" onmouseenter="enter('-1602790229953823078');" onmouseout="out('-1602790229953823078');" style=""> 335     final AriaManager ariaManager = AriaManager.getInstance(AriaManager.APP);                            </span>
<span class="-844712413651756711" onmouseenter="enter('-844712413651756711');" onmouseout="out('-844712413651756711');" style=""> 336     CancelAllCmd cancelCmd =                                                                             </span>
<span class="-8183977970671235029" onmouseenter="enter('-8183977970671235029');" onmouseout="out('-8183977970671235029');" style=""> 337         (CancelAllCmd) CommonUtil.createNormalCmd(targetName, new DownloadTaskEntity(),                  </span>
<span class="5247092821337102267" onmouseenter="enter('5247092821337102267');" onmouseout="out('5247092821337102267');" style=""> 338             NormalCmdFactory.TASK_CANCEL_ALL, ICmd.TASK_TYPE_DOWNLOAD);                                  </span>
<span class="-2029657375534786103" onmouseenter="enter('-2029657375534786103');" onmouseout="out('-2029657375534786103');" style=""> 339     cancelCmd.removeFile = removeFile;                                                                   </span>
<span class="-8687051478420435310" onmouseenter="enter('-8687051478420435310');" onmouseout="out('-8687051478420435310');" style=""> 340     ariaManager.setCmd(cancelCmd).exe();                                                                 </span>
<span class="6170682864485863774" onmouseenter="enter('6170682864485863774');" onmouseout="out('6170682864485863774');" style=""> 341     Set&lt;String&gt; keys = ariaManager.getReceiver().keySet();                                               </span>
<span class="-5841525186174834007" onmouseenter="enter('-5841525186174834007');" onmouseout="out('-5841525186174834007');" style=""> 342     for (String key : keys) {                                                                            </span>
<span class="-4261055600814182440" onmouseenter="enter('-4261055600814182440');" onmouseout="out('-4261055600814182440');" style=""> 343       ariaManager.getReceiver().remove(key);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346 }                                                                                                        </span></pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span class="1987357580077471394" onmouseenter="enter('1987357580077471394');" onmouseout="out('1987357580077471394');" style="">  16  package com.arialyy.aria.core.download;                                                                           </span>
<span  style="">  17                                                                                                                    </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  18  import android.support.annotation.NonNull;                                                                        </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  19  import android.text.TextUtils;                                                                                    </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  20  import com.arialyy.aria.core.AriaManager;                                                                         </span>
<span class="3020238846680658976" onmouseenter="enter('3020238846680658976');" onmouseout="out('3020238846680658976');" style="">  21  import com.arialyy.aria.core.command.ICmd;                                                                        </span>
<span class="4948857189306634189" onmouseenter="enter('4948857189306634189');" onmouseout="out('4948857189306634189');" style="">  22  import com.arialyy.aria.core.command.normal.CancelAllCmd;                                                         </span>
<span class="-801363442427116995" onmouseenter="enter('-801363442427116995');" onmouseout="out('-801363442427116995');" style="">  23  import com.arialyy.aria.core.command.normal.NormalCmdFactory;                                                     </span>
<span class="5633299353752109870" onmouseenter="enter('5633299353752109870');" onmouseout="out('5633299353752109870');" style="">  24  import com.arialyy.aria.core.common.ProxyHelper;                                                                  </span>
<span class="3322471595626447686" onmouseenter="enter('3322471595626447686');" onmouseout="out('3322471595626447686');" style="">  25  import com.arialyy.aria.core.inf.AbsEntity;                                                                       </span>
<span class="-2122960619967737033" onmouseenter="enter('-2122960619967737033');" onmouseout="out('-2122960619967737033');" style="">  26  import com.arialyy.aria.core.inf.AbsReceiver;                                                                     </span>
<span class="6977447411617077002" onmouseenter="enter('6977447411617077002');" onmouseout="out('6977447411617077002');" style="">  27  import com.arialyy.aria.core.scheduler.DownloadGroupSchedulers;                                                   </span>
<span class="7326175858930165690" onmouseenter="enter('7326175858930165690');" onmouseout="out('7326175858930165690');" style="">  28  import com.arialyy.aria.core.scheduler.DownloadSchedulers;                                                        </span>
<span class="-972246557960033348" onmouseenter="enter('-972246557960033348');" onmouseout="out('-972246557960033348');" style="">  29  import com.arialyy.aria.core.scheduler.ISchedulerListener;                                                        </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  30  import com.arialyy.aria.orm.DbEntity;                                                                             </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  31 +import com.arialyy.aria.util.ALog;                                                                                </span>
<span class="-8921020518339919076" onmouseenter="enter('-8921020518339919076');" onmouseout="out('-8921020518339919076');" style="">  32  import com.arialyy.aria.util.CheckUtil;                                                                           </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  33  import com.arialyy.aria.util.CommonUtil;                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  34  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  35  import java.util.List;                                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  36  import java.util.Set;                                                                                             </span>
<span  style="">  37                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  38  /**                                                                                                               </span>
<span class="-8976164179967820781" onmouseenter="enter('-8976164179967820781');" onmouseout="out('-8976164179967820781');" style="">  39   * Created by lyy on 2016/12/5.                                                                                   </span>
<span class="8451370004399326130" onmouseenter="enter('8451370004399326130');" onmouseout="out('8451370004399326130');" style="">  40   * 下载功能接收器                                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  41   */                                                                                                               </span>
<span class="-2662683455388224586" onmouseenter="enter('-2662683455388224586');" onmouseout="out('-2662683455388224586');" style="">  42  public class DownloadReceiver extends AbsReceiver {                                                               </span>
<span class="-4144196955255973047" onmouseenter="enter('-4144196955255973047');" onmouseout="out('-4144196955255973047');" style="">  43    private final String TAG = &quot;DownloadReceiver&quot;;                                                                  </span>
<span class="8974910660156933255" onmouseenter="enter('8974910660156933255');" onmouseout="out('8974910660156933255');" style="">  44    public ISchedulerListener&lt;DownloadTask&gt; listener;                                                               </span>
<span  style="">  45                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  46    /**                                                                                                             </span>
<span class="-8030592473296514020" onmouseenter="enter('-8030592473296514020');" onmouseout="out('-8030592473296514020');" style="">  47     * 设置最大下载速度，单位：kb                                                                                               </span>
<span class="5818094815562401128" onmouseenter="enter('5818094815562401128');" onmouseout="out('5818094815562401128');" style="">  48     * 该方法为实验性功能，清不要轻易在生产环境中使用。                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  49     *                                                                                                              </span>
<span class="9124526800094534994" onmouseenter="enter('9124526800094534994');" onmouseout="out('9124526800094534994');" style="">  50     * @param maxSpeed 为0表示不限速                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  51     */                                                                                                             </span>
<span class="-7953977331871486849" onmouseenter="enter('-7953977331871486849');" onmouseout="out('-7953977331871486849');" style="">  52    @Deprecated public void setMaxSpeed(double maxSpeed) {                                                          </span>
<span class="7170079538529520301" onmouseenter="enter('7170079538529520301');" onmouseout="out('7170079538529520301');" style="">  53      AriaManager.getInstance(AriaManager.APP).getDownloadConfig().setMsxSpeed(maxSpeed);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  54    }                                                                                                               </span>
<span  style="">  55                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  56    /**                                                                                                             </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  57     * 使用下载实体执行下载操作                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  58     *                                                                                                              </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style="">  59     * @param entity 下载实体                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  60     */                                                                                                             </span>
<span class="5466262800524521213" onmouseenter="enter('5466262800524521213');" onmouseout="out('5466262800524521213');" style="">  61    public DownloadTarget load(DownloadEntity entity) {                                                             </span>
<span class="6765829635565156021" onmouseenter="enter('6765829635565156021');" onmouseout="out('6765829635565156021');" style="">  62      return load(entity, false);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63    }                                                                                                               </span>
<span  style="">  64                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  65    /**                                                                                                             </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  66     * 使用下载实体执行下载操作                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  67     *                                                                                                              </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style="">  68     * @param refreshInfo 是否刷新下载信息                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69     */                                                                                                             </span>
<span class="4512208090544288363" onmouseenter="enter('4512208090544288363');" onmouseout="out('4512208090544288363');" style="">  70    public DownloadTarget load(DownloadEntity entity, boolean refreshInfo) {                                        </span>
<span class="-8873840630710694359" onmouseenter="enter('-8873840630710694359');" onmouseout="out('-8873840630710694359');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +    CheckUtil.checkDownloadUrl(entity.getUrl());                                                                  </span>
<span class="-3528511344377244480" onmouseenter="enter('-3528511344377244480');" onmouseout="out('-3528511344377244480');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +    if (entity.getUrl().startsWith(&quot;ftp&quot;)) {                                                                      </span>
<span class="7973896769491137792" onmouseenter="enter('7973896769491137792');" onmouseout="out('7973896769491137792');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  73 +      ALog.w(TAG,                                                                                                 </span>
<span class="-1990769771817592658" onmouseenter="enter('-1990769771817592658');" onmouseout="out('-1990769771817592658');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +          &quot;使用实体启动FTP下载，如果你的FTP服务器需要登录，那么你需要调用登录的接口，如：Aria.download(this).load(url).login(user, pw).start()&quot;);     </span>
<span class="5328341516284695107" onmouseenter="enter('5328341516284695107');" onmouseout="out('5328341516284695107');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  75 +      return new FtpDownloadTarget(entity, targetName, refreshInfo);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  76 +    }                                                                                                             </span>
<span class="-1334893378673445546" onmouseenter="enter('-1334893378673445546');" onmouseout="out('-1334893378673445546');" style="">  77      return new DownloadTarget(entity, targetName, refreshInfo);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78    }                                                                                                               </span>
<span  style="">  79                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  80    /**                                                                                                             </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="">  81     * 加载Http、https单任务下载地址                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  82     *                                                                                                              </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="">  83     * @param url 下载地址                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  84     */                                                                                                             </span>
<span class="-7620646004657887099" onmouseenter="enter('-7620646004657887099');" onmouseout="out('-7620646004657887099');" style="">  85    public DownloadTarget load(@NonNull String url) {                                                               </span>
<span class="1571066346408047685" onmouseenter="enter('1571066346408047685');" onmouseout="out('1571066346408047685');" style="">  86      return load(url, false);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87    }                                                                                                               </span>
<span  style="">  88                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  89    /**                                                                                                             </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="">  90     * 加载Http、https单任务下载地址                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  91     *                                                                                                              </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="">  92     * @param url 下载地址                                                                                              </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style="">  93     * @param refreshInfo 是否刷新下载信息                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  94     */                                                                                                             </span>
<span class="-5520959846461571672" onmouseenter="enter('-5520959846461571672');" onmouseout="out('-5520959846461571672');" style="">  95    public DownloadTarget load(@NonNull String url, boolean refreshInfo) {                                          </span>
<span class="-41922970968616848" onmouseenter="enter('-41922970968616848');" onmouseout="out('-41922970968616848');" style="">  96      CheckUtil.checkDownloadUrl(url);                                                                              </span>

<span class="-6107422860730852976" onmouseenter="enter('-6107422860730852976');" onmouseout="out('-6107422860730852976');" style="">  97      return new DownloadTarget(url, targetName, refreshInfo);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98    }                                                                                                               </span>
<span  style="">  99                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 100    /**                                                                                                             </span>
<span class="2297304325080531827" onmouseenter="enter('2297304325080531827');" onmouseout="out('2297304325080531827');" style=""> 101     * 加载下载地址，如果任务组的中的下载地址改变了，则任务从新的一个任务组                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 102     */                                                                                                             </span>
<span class="-3978985407316286854" onmouseenter="enter('-3978985407316286854');" onmouseout="out('-3978985407316286854');" style=""> 103    public DownloadGroupTarget load(List&lt;String&gt; urls) {                                                            </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 104      CheckUtil.checkDownloadUrls(urls);                                                                            </span>
<span class="-2612285513071399987" onmouseenter="enter('-2612285513071399987');" onmouseout="out('-2612285513071399987');" style=""> 105      return new DownloadGroupTarget(urls, targetName);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106    }                                                                                                               </span>
<span  style=""> 107                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 108    /**                                                                                                             </span>






















<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 109     * 加载ftp单任务下载地址                                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 110     */                                                                                                             </span>
<span class="-8520923309760825500" onmouseenter="enter('-8520923309760825500');" onmouseout="out('-8520923309760825500');" style=""> 111    public FtpDownloadTarget loadFtp(@NonNull String url) {                                                         </span>
<span class="4470597214358385853" onmouseenter="enter('4470597214358385853');" onmouseout="out('4470597214358385853');" style=""> 112      return loadFtp(url, false);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113    }                                                                                                               </span>
<span  style=""> 114                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 115    /**                                                                                                             </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 116     * 加载ftp单任务下载地址                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 117     *                                                                                                              </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 118     * @param refreshInfo 是否刷新下载信息                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 119     */                                                                                                             </span>
<span class="-3974752927486852600" onmouseenter="enter('-3974752927486852600');" onmouseout="out('-3974752927486852600');" style=""> 120    public FtpDownloadTarget loadFtp(@NonNull String url, boolean refreshInfo) {                                    </span>
<span class="-41922970968616848" onmouseenter="enter('-41922970968616848');" onmouseout="out('-41922970968616848');" style=""> 121      CheckUtil.checkDownloadUrl(url);                                                                              </span>

<span class="6480998331304056815" onmouseenter="enter('6480998331304056815');" onmouseout="out('6480998331304056815');" style=""> 122      return new FtpDownloadTarget(url, targetName, refreshInfo);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123    }                                                                                                               </span>
<span  style=""> 124                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 125    /**                                                                                                             </span>
<span class="-644101812843147118" onmouseenter="enter('-644101812843147118');" onmouseout="out('-644101812843147118');" style=""> 126     * 使用任务组实体执行任务组的实体执行任务组的下载操作                                                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 127     *                                                                                                              </span>
<span class="-7673496858448137784" onmouseenter="enter('-7673496858448137784');" onmouseout="out('-7673496858448137784');" style=""> 128     * @param groupEntity 如果加载的任务实体没有子项的下载地址，                                                                       </span>
<span class="-5926959885594342389" onmouseenter="enter('-5926959885594342389');" onmouseout="out('-5926959885594342389');" style=""> 129     * 那么你需要使用{@link DownloadGroupTarget#setGroupUrl(List)}设置子项的下载地址                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 130     */                                                                                                             </span>
<span class="-7986782816995408761" onmouseenter="enter('-7986782816995408761');" onmouseout="out('-7986782816995408761');" style=""> 131    public DownloadGroupTarget load(DownloadGroupEntity groupEntity) {                                              </span>
<span class="5161082270961212892" onmouseenter="enter('5161082270961212892');" onmouseout="out('5161082270961212892');" style=""> 132      return new DownloadGroupTarget(groupEntity, targetName);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133    }                                                                                                               </span>
<span  style=""> 134                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 135    /**                                                                                                             </span>
<span class="1687338762191352295" onmouseenter="enter('1687338762191352295');" onmouseout="out('1687338762191352295');" style=""> 136     * 加载ftp文件夹下载地址                                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 137     */                                                                                                             </span>
<span class="5825764911062879168" onmouseenter="enter('5825764911062879168');" onmouseout="out('5825764911062879168');" style=""> 138    public FtpDirDownloadTarget loadFtpDir(@NonNull String dirUrl) {                                                </span>
<span class="-1643562423298800413" onmouseenter="enter('-1643562423298800413');" onmouseout="out('-1643562423298800413');" style=""> 139      CheckUtil.checkDownloadUrl(dirUrl);                                                                           </span>

<span class="-8988703603088435939" onmouseenter="enter('-8988703603088435939');" onmouseout="out('-8988703603088435939');" style=""> 140      return new FtpDirDownloadTarget(dirUrl, targetName);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141    }                                                                                                               </span>
<span  style=""> 142                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 143    /**                                                                                                             </span>
<span class="-2874086798355386198" onmouseenter="enter('-2874086798355386198');" onmouseout="out('-2874086798355386198');" style=""> 144     * 将当前类注册到Aria                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 145     */                                                                                                             </span>
<span class="-4925173742984207732" onmouseenter="enter('-4925173742984207732');" onmouseout="out('-4925173742984207732');" style=""> 146    public DownloadReceiver register() {                                                                            </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 147      String className = obj.getClass().getName();                                                                  </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 148      Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                             </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 149      Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                                       </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 150      Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                                   </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 151      if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                                       </span>
<span class="-5670875303591463725" onmouseenter="enter('-5670875303591463725');" onmouseout="out('-5670875303591463725');" style=""> 152        DownloadSchedulers.getInstance().register(obj);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153      }                                                                                                             </span>
<span class="8400813546960630432" onmouseenter="enter('8400813546960630432');" onmouseout="out('8400813546960630432');" style=""> 154      if ((dgCounter != null &amp;&amp; dgCounter.contains(className)) || (dgsCounter != null                               </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 155          &amp;&amp; dgsCounter.contains(className))) {                                                                     </span>
<span class="1002821899645886942" onmouseenter="enter('1002821899645886942');" onmouseout="out('1002821899645886942');" style=""> 156        DownloadGroupSchedulers.getInstance().register(obj);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157      }                                                                                                             </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 158      return this;                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159    }                                                                                                               </span>
<span  style=""> 160                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 161    /**                                                                                                             </span>
<span class="4811620718788803994" onmouseenter="enter('4811620718788803994');" onmouseout="out('4811620718788803994');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 162 -   * 取消注册                                                                                                         </span>
<span class="4191554136684960646" onmouseenter="enter('4191554136684960646');" onmouseout="out('4191554136684960646');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 163 +   * 取消注册，如果是Activity或fragment，Aria会界面销毁时自动调用该方法。                                                                 </span>
<span class="-2646056259317531884" onmouseenter="enter('-2646056259317531884');" onmouseout="out('-2646056259317531884');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 164 +   * 如果是Dialog或popupwindow，需要你在撤销界面时调用该方法                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 165     */                                                                                                             </span>
<span class="9104098464026605676" onmouseenter="enter('9104098464026605676');" onmouseout="out('9104098464026605676');" style=""> 166    @Override public void unRegister() {                                                                            </span>
<span class="-4378511932529658259" onmouseenter="enter('-4378511932529658259');" onmouseout="out('-4378511932529658259');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +    if (needRmListener) {                                                                                         </span>
<span class="-6315663267876105123" onmouseenter="enter('-6315663267876105123');" onmouseout="out('-6315663267876105123');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +      unRegisterListener();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +    }                                                                                                             </span>
<span class="-1563105831930296864" onmouseenter="enter('-1563105831930296864');" onmouseout="out('-1563105831930296864');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 170 +    AriaManager.getInstance(AriaManager.APP).removeReceiver(obj);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 171 +  }                                                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +                                                                                                                  </span>
<span class="-6986224254743714260" onmouseenter="enter('-6986224254743714260');" onmouseout="out('-6986224254743714260');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +  @Override public void unRegisterListener() {                                                                    </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 174      String className = obj.getClass().getName();                                                                  </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 175      Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                             </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 176      Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                                       </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 177      Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                                   </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 178      if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                                       </span>
<span class="-4965118218032185711" onmouseenter="enter('-4965118218032185711');" onmouseout="out('-4965118218032185711');" style=""> 179        DownloadSchedulers.getInstance().unRegister(obj);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180      }                                                                                                             </span>
<span class="974113968767899608" onmouseenter="enter('974113968767899608');" onmouseout="out('974113968767899608');" style=""> 181      if (dgCounter != null &amp;&amp; dgCounter.contains(className) || (dgsCounter != null                                 </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 182          &amp;&amp; dgsCounter.contains(className))) {                                                                     </span>
<span class="-7807598433909017874" onmouseenter="enter('-7807598433909017874');" onmouseout="out('-7807598433909017874');" style=""> 183        DownloadGroupSchedulers.getInstance().unRegister(obj);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 184 -    }                                                                                                             </span>
<span class="7496791377500748366" onmouseenter="enter('7496791377500748366');" onmouseout="out('7496791377500748366');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 185 -    if (needRmReceiver) {                                                                                         </span>
<span class="-1563105831930296864" onmouseenter="enter('-1563105831930296864');" onmouseout="out('-1563105831930296864');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 186 -      AriaManager.getInstance(AriaManager.APP).removeReceiver(obj);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188    }                                                                                                               </span>
<span  style=""> 189                                                                                                                    </span>
<span class="3345695681730814389" onmouseenter="enter('3345695681730814389');" onmouseout="out('3345695681730814389');" style=""> 190    @Override public void destroy() {                                                                               </span>
<span class="-4901128148553670878" onmouseenter="enter('-4901128148553670878');" onmouseout="out('-4901128148553670878');" style=""> 191      targetName = null;                                                                                            </span>
<span class="-4099358687357442786" onmouseenter="enter('-4099358687357442786');" onmouseout="out('-4099358687357442786');" style=""> 192      listener = null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193    }                                                                                                               </span>
<span  style=""> 194                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 195    /**                                                                                                             </span>
<span class="-4855951461764354463" onmouseenter="enter('-4855951461764354463');" onmouseout="out('-4855951461764354463');" style=""> 196     * 通过下载链接获取下载实体                                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 197     */                                                                                                             </span>
<span class="6067624311729681660" onmouseenter="enter('6067624311729681660');" onmouseout="out('6067624311729681660');" style=""> 198    public DownloadEntity getDownloadEntity(String downloadUrl) {                                                   </span>
<span class="-7551708026621458125" onmouseenter="enter('-7551708026621458125');" onmouseout="out('-7551708026621458125');" style=""> 199      CheckUtil.checkDownloadUrl(downloadUrl);                                                                      </span>

<span class="4826407584559057648" onmouseenter="enter('4826407584559057648');" onmouseout="out('4826407584559057648');" style=""> 200      return DbEntity.findFirst(DownloadEntity.class, &quot;url=? and isGroupChild=&#x27;false&#x27;&quot;, downloadUrl);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201    }                                                                                                               </span>
<span  style=""> 202                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 203    /**                                                                                                             </span>
<span class="625446827844080348" onmouseenter="enter('625446827844080348');" onmouseout="out('625446827844080348');" style=""> 204     * 通过下载链接获取保存在数据库的下载任务实体                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 205     */                                                                                                             </span>
<span class="-7637734105267374212" onmouseenter="enter('-7637734105267374212');" onmouseout="out('-7637734105267374212');" style=""> 206    public DownloadTaskEntity getDownloadTask(String downloadUrl) {                                                 </span>
<span class="-7551708026621458125" onmouseenter="enter('-7551708026621458125');" onmouseout="out('-7551708026621458125');" style=""> 207      CheckUtil.checkDownloadUrl(downloadUrl);                                                                      </span>

<span class="-5185402298602239038" onmouseenter="enter('-5185402298602239038');" onmouseout="out('-5185402298602239038');" style=""> 208      DownloadEntity entity = getDownloadEntity(downloadUrl);                                                       </span>
<span class="-2008932504864023242" onmouseenter="enter('-2008932504864023242');" onmouseout="out('-2008932504864023242');" style=""> 209      if (entity == null || TextUtils.isEmpty(entity.getDownloadPath())) return null;                               </span>
<span class="-7326527410643528824" onmouseenter="enter('-7326527410643528824');" onmouseout="out('-7326527410643528824');" style=""> 210      return DbEntity.findFirst(DownloadTaskEntity.class, &quot;key=? and isGroupTask=&#x27;false&#x27;&quot;,                          </span>
<span class="-153714010952936175" onmouseenter="enter('-153714010952936175');" onmouseout="out('-153714010952936175');" style=""> 211          entity.getDownloadPath());                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212    }                                                                                                               </span>
<span  style=""> 213                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 214    /**                                                                                                             </span>
<span class="-6542418820527226697" onmouseenter="enter('-6542418820527226697');" onmouseout="out('-6542418820527226697');" style=""> 215     * 通过下载链接获取保存在数据库的下载任务组实体                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 216     */                                                                                                             </span>
<span class="5407962917483047507" onmouseenter="enter('5407962917483047507');" onmouseout="out('5407962917483047507');" style=""> 217    public DownloadGroupTaskEntity getDownloadGroupTask(List&lt;String&gt; urls) {                                        </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 218      CheckUtil.checkDownloadUrls(urls);                                                                            </span>
<span class="-2143724232684022656" onmouseenter="enter('-2143724232684022656');" onmouseout="out('-2143724232684022656');" style=""> 219      String hashCode = CommonUtil.getMd5Code(urls);                                                                </span>
<span class="753794430818465046" onmouseenter="enter('753794430818465046');" onmouseout="out('753794430818465046');" style=""> 220      return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, hashCode);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221    }                                                                                                               </span>
<span  style=""> 222                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 223    /**                                                                                                             </span>
<span class="8545732146449590791" onmouseenter="enter('8545732146449590791');" onmouseout="out('8545732146449590791');" style=""> 224     * 通过任务组key，获取任务组实体                                                                                             </span>
<span class="-915937270042831698" onmouseenter="enter('-915937270042831698');" onmouseout="out('-915937270042831698');" style=""> 225     * 如果是http，key为所有子任务下载地址拼接后取md5                                                                                 </span>
<span class="-6888603962563272152" onmouseenter="enter('-6888603962563272152');" onmouseout="out('-6888603962563272152');" style=""> 226     * 如果是ftp，key为ftp服务器的文件夹路径                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 227     */                                                                                                             </span>
<span class="3930845008170494728" onmouseenter="enter('3930845008170494728');" onmouseout="out('3930845008170494728');" style=""> 228    public DownloadGroupTaskEntity getDownloadGroupTask(String key) {                                               </span>
<span class="-2479292647152353998" onmouseenter="enter('-2479292647152353998');" onmouseout="out('-2479292647152353998');" style=""> 229      return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, key);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230    }                                                                                                               </span>
<span  style=""> 231                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 232    /**                                                                                                             </span>
<span class="-7888671401854060616" onmouseenter="enter('-7888671401854060616');" onmouseout="out('-7888671401854060616');" style=""> 233     * 下载任务是否存在                                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 234     */                                                                                                             </span>
<span class="-1092275811913780416" onmouseenter="enter('-1092275811913780416');" onmouseout="out('-1092275811913780416');" style=""> 235    @Override public boolean taskExists(String downloadUrl) {                                                       </span>
<span class="-8257903088695496664" onmouseenter="enter('-8257903088695496664');" onmouseout="out('-8257903088695496664');" style=""> 236      return DownloadEntity.findFirst(DownloadEntity.class, &quot;url=?&quot;, downloadUrl) != null;                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237    }                                                                                                               </span>
<span  style=""> 238                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 239    /**                                                                                                             </span>
<span class="-2894577714931105927" onmouseenter="enter('-2894577714931105927');" onmouseout="out('-2894577714931105927');" style=""> 240     * 获取普通下载任务列表                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 241     */                                                                                                             </span>
<span class="-1224977372519603955" onmouseenter="enter('-1224977372519603955');" onmouseout="out('-1224977372519603955');" style=""> 242    @Override public List&lt;DownloadEntity&gt; getSimpleTaskList() {                                                     </span>
<span class="-3884263886229518247" onmouseenter="enter('-3884263886229518247');" onmouseout="out('-3884263886229518247');" style=""> 243      return DownloadEntity.findDatas(DownloadEntity.class, &quot;isGroupChild=? and downloadPath!=&#x27;&#x27;&quot;,                  </span>
<span class="-8693734603624123186" onmouseenter="enter('-8693734603624123186');" onmouseout="out('-8693734603624123186');" style=""> 244          &quot;false&quot;);                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245    }                                                                                                               </span>
<span  style=""> 246                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 247    /**                                                                                                             </span>
<span class="-7216670373962638911" onmouseenter="enter('-7216670373962638911');" onmouseout="out('-7216670373962638911');" style=""> 248     * 获取任务组列表                                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 249     */                                                                                                             </span>
<span class="-2755211114601704515" onmouseenter="enter('-2755211114601704515');" onmouseout="out('-2755211114601704515');" style=""> 250    public List&lt;DownloadGroupEntity&gt; getGroupTaskList() {                                                           </span>
<span class="-8707622985980297555" onmouseenter="enter('-8707622985980297555');" onmouseout="out('-8707622985980297555');" style=""> 251      return DownloadEntity.findAllData(DownloadGroupEntity.class);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252    }                                                                                                               </span>
<span  style=""> 253                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 254    /**                                                                                                             </span>
<span class="8965383640224391026" onmouseenter="enter('8965383640224391026');" onmouseout="out('8965383640224391026');" style=""> 255     * 获取普通任务和任务组的任务列表                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 256     */                                                                                                             </span>
<span class="-2889141978955106905" onmouseenter="enter('-2889141978955106905');" onmouseout="out('-2889141978955106905');" style=""> 257    public List&lt;AbsEntity&gt; getTotleTaskList() {                                                                     </span>
<span class="-7408081633636237340" onmouseenter="enter('-7408081633636237340');" onmouseout="out('-7408081633636237340');" style=""> 258      List&lt;AbsEntity&gt; list = new ArrayList&lt;&gt;();                                                                     </span>
<span class="-1266594982388124504" onmouseenter="enter('-1266594982388124504');" onmouseout="out('-1266594982388124504');" style=""> 259      List&lt;DownloadEntity&gt; simpleTask = getSimpleTaskList();                                                        </span>
<span class="-4106153234455279996" onmouseenter="enter('-4106153234455279996');" onmouseout="out('-4106153234455279996');" style=""> 260      List&lt;DownloadGroupEntity&gt; groupTask = getGroupTaskList();                                                     </span>
<span class="-8209161792107312998" onmouseenter="enter('-8209161792107312998');" onmouseout="out('-8209161792107312998');" style=""> 261      if (simpleTask != null &amp;&amp; !simpleTask.isEmpty()) {                                                            </span>
<span class="6802811283489038468" onmouseenter="enter('6802811283489038468');" onmouseout="out('6802811283489038468');" style=""> 262        list.addAll(simpleTask);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263      }                                                                                                             </span>
<span class="6352724383592003863" onmouseenter="enter('6352724383592003863');" onmouseout="out('6352724383592003863');" style=""> 264      if (groupTask != null &amp;&amp; !groupTask.isEmpty()) {                                                              </span>
<span class="-1528470393600602759" onmouseenter="enter('-1528470393600602759');" onmouseout="out('-1528470393600602759');" style=""> 265        list.addAll(groupTask);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266      }                                                                                                             </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 267      return list;                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268    }                                                                                                               </span>
<span  style=""> 269                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 270    /**                                                                                                             </span>
<span class="3402822126794432274" onmouseenter="enter('3402822126794432274');" onmouseout="out('3402822126794432274');" style=""> 271     * 停止所有正在下载的任务，并清空等待队列。                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 272     */                                                                                                             </span>
<span class="-8271139132618696861" onmouseenter="enter('-8271139132618696861');" onmouseout="out('-8271139132618696861');" style=""> 273    @Override public void stopAllTask() {                                                                           </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 274      AriaManager.getInstance(AriaManager.APP)                                                                      </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 275          .setCmd(NormalCmdFactory.getInstance()                                                                    </span>
<span class="6744734670145487711" onmouseenter="enter('6744734670145487711');" onmouseout="out('6744734670145487711');" style=""> 276              .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_STOP_ALL,                      </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 277                  ICmd.TASK_TYPE_DOWNLOAD))                                                                         </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 278          .exe();                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279    }                                                                                                               </span>
<span  style=""> 280                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 281    /**                                                                                                             </span>
<span class="1311517946297423409" onmouseenter="enter('1311517946297423409');" onmouseout="out('1311517946297423409');" style=""> 282     * 恢复所有正在下载的任务                                                                                                  </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style=""> 283     * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                                  </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style=""> 284     * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 285     */                                                                                                             </span>
<span class="2382837737668558844" onmouseenter="enter('2382837737668558844');" onmouseout="out('2382837737668558844');" style=""> 286    public void resumeAllTask() {                                                                                   </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 287      AriaManager.getInstance(AriaManager.APP)                                                                      </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 288          .setCmd(NormalCmdFactory.getInstance()                                                                    </span>
<span class="820973633919607204" onmouseenter="enter('820973633919607204');" onmouseout="out('820973633919607204');" style=""> 289              .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_RESUME_ALL,                    </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 290                  ICmd.TASK_TYPE_DOWNLOAD))                                                                         </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 291          .exe();                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292    }                                                                                                               </span>
<span  style=""> 293                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 294    /**                                                                                                             </span>
<span class="-7338390600186437821" onmouseenter="enter('-7338390600186437821');" onmouseout="out('-7338390600186437821');" style=""> 295     * 删除所有任务                                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 296     *                                                                                                              </span>
<span class="-325804075342723783" onmouseenter="enter('-325804075342723783');" onmouseout="out('-325804075342723783');" style=""> 297     * @param removeFile {@code true} 删除已经下载完成的任务，不仅删除下载记录，还会删除已经下载完成的文件，{@code false}                              </span>
<span class="-4045013558095481687" onmouseenter="enter('-4045013558095481687');" onmouseout="out('-4045013558095481687');" style=""> 298     * 如果文件已经下载完成，只删除下载记录                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 299     */                                                                                                             </span>
<span class="5963878394412937684" onmouseenter="enter('5963878394412937684');" onmouseout="out('5963878394412937684');" style=""> 300    @Override public void removeAllTask(boolean removeFile) {                                                       </span>
<span class="-1602790229953823078" onmouseenter="enter('-1602790229953823078');" onmouseout="out('-1602790229953823078');" style=""> 301      final AriaManager ariaManager = AriaManager.getInstance(AriaManager.APP);                                     </span>
<span class="-844712413651756711" onmouseenter="enter('-844712413651756711');" onmouseout="out('-844712413651756711');" style=""> 302      CancelAllCmd cancelCmd =                                                                                      </span>
<span class="-8183977970671235029" onmouseenter="enter('-8183977970671235029');" onmouseout="out('-8183977970671235029');" style=""> 303          (CancelAllCmd) CommonUtil.createNormalCmd(targetName, new DownloadTaskEntity(),                           </span>
<span class="5247092821337102267" onmouseenter="enter('5247092821337102267');" onmouseout="out('5247092821337102267');" style=""> 304              NormalCmdFactory.TASK_CANCEL_ALL, ICmd.TASK_TYPE_DOWNLOAD);                                           </span>
<span class="-2029657375534786103" onmouseenter="enter('-2029657375534786103');" onmouseout="out('-2029657375534786103');" style=""> 305      cancelCmd.removeFile = removeFile;                                                                            </span>
<span class="-8687051478420435310" onmouseenter="enter('-8687051478420435310');" onmouseout="out('-8687051478420435310');" style=""> 306      ariaManager.setCmd(cancelCmd).exe();                                                                          </span>
<span class="6170682864485863774" onmouseenter="enter('6170682864485863774');" onmouseout="out('6170682864485863774');" style=""> 307      Set&lt;String&gt; keys = ariaManager.getReceiver().keySet();                                                        </span>
<span class="-5841525186174834007" onmouseenter="enter('-5841525186174834007');" onmouseout="out('-5841525186174834007');" style=""> 308      for (String key : keys) {                                                                                     </span>
<span class="-4261055600814182440" onmouseenter="enter('-4261055600814182440');" onmouseout="out('-4261055600814182440');" style=""> 309        ariaManager.getReceiver().remove(key);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311    }                                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span class="1987357580077471394" onmouseenter="enter('1987357580077471394');" onmouseout="out('1987357580077471394');" style="">  16  package com.arialyy.aria.core.download;                                                                           </span>
<span  style="">  17                                                                                                                    </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  18  import android.support.annotation.NonNull;                                                                        </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  19  import android.text.TextUtils;                                                                                    </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  20  import com.arialyy.aria.core.AriaManager;                                                                         </span>
<span class="3020238846680658976" onmouseenter="enter('3020238846680658976');" onmouseout="out('3020238846680658976');" style="">  21  import com.arialyy.aria.core.command.ICmd;                                                                        </span>
<span class="4948857189306634189" onmouseenter="enter('4948857189306634189');" onmouseout="out('4948857189306634189');" style="">  22  import com.arialyy.aria.core.command.normal.CancelAllCmd;                                                         </span>
<span class="-801363442427116995" onmouseenter="enter('-801363442427116995');" onmouseout="out('-801363442427116995');" style="">  23  import com.arialyy.aria.core.command.normal.NormalCmdFactory;                                                     </span>
<span class="5633299353752109870" onmouseenter="enter('5633299353752109870');" onmouseout="out('5633299353752109870');" style="">  24  import com.arialyy.aria.core.common.ProxyHelper;                                                                  </span>
<span class="3322471595626447686" onmouseenter="enter('3322471595626447686');" onmouseout="out('3322471595626447686');" style="">  25  import com.arialyy.aria.core.inf.AbsEntity;                                                                       </span>
<span class="-2122960619967737033" onmouseenter="enter('-2122960619967737033');" onmouseout="out('-2122960619967737033');" style="">  26  import com.arialyy.aria.core.inf.AbsReceiver;                                                                     </span>
<span class="6977447411617077002" onmouseenter="enter('6977447411617077002');" onmouseout="out('6977447411617077002');" style="">  27  import com.arialyy.aria.core.scheduler.DownloadGroupSchedulers;                                                   </span>
<span class="7326175858930165690" onmouseenter="enter('7326175858930165690');" onmouseout="out('7326175858930165690');" style="">  28  import com.arialyy.aria.core.scheduler.DownloadSchedulers;                                                        </span>
<span class="-972246557960033348" onmouseenter="enter('-972246557960033348');" onmouseout="out('-972246557960033348');" style="">  29  import com.arialyy.aria.core.scheduler.ISchedulerListener;                                                        </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  30  import com.arialyy.aria.orm.DbEntity;                                                                             </span>

<span class="-8921020518339919076" onmouseenter="enter('-8921020518339919076');" onmouseout="out('-8921020518339919076');" style="">  31  import com.arialyy.aria.util.CheckUtil;                                                                           </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  32  import com.arialyy.aria.util.CommonUtil;                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  33  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  34  import java.util.List;                                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  35  import java.util.Set;                                                                                             </span>
<span  style="">  36                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  37  /**                                                                                                               </span>
<span class="-8976164179967820781" onmouseenter="enter('-8976164179967820781');" onmouseout="out('-8976164179967820781');" style="">  38   * Created by lyy on 2016/12/5.                                                                                   </span>
<span class="8451370004399326130" onmouseenter="enter('8451370004399326130');" onmouseout="out('8451370004399326130');" style="">  39   * 下载功能接收器                                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  40   */                                                                                                               </span>
<span class="-2662683455388224586" onmouseenter="enter('-2662683455388224586');" onmouseout="out('-2662683455388224586');" style="">  41  public class DownloadReceiver extends AbsReceiver {                                                               </span>
<span class="-4144196955255973047" onmouseenter="enter('-4144196955255973047');" onmouseout="out('-4144196955255973047');" style="">  42    private final String TAG = &quot;DownloadReceiver&quot;;                                                                  </span>
<span class="8974910660156933255" onmouseenter="enter('8974910660156933255');" onmouseout="out('8974910660156933255');" style="">  43    public ISchedulerListener&lt;DownloadTask&gt; listener;                                                               </span>
<span  style="">  44                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  45    /**                                                                                                             </span>
<span class="-8030592473296514020" onmouseenter="enter('-8030592473296514020');" onmouseout="out('-8030592473296514020');" style="">  46     * 设置最大下载速度，单位：kb                                                                                               </span>
<span class="5818094815562401128" onmouseenter="enter('5818094815562401128');" onmouseout="out('5818094815562401128');" style="">  47     * 该方法为实验性功能，清不要轻易在生产环境中使用。                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  48     *                                                                                                              </span>
<span class="9124526800094534994" onmouseenter="enter('9124526800094534994');" onmouseout="out('9124526800094534994');" style="">  49     * @param maxSpeed 为0表示不限速                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  50     */                                                                                                             </span>
<span class="-7953977331871486849" onmouseenter="enter('-7953977331871486849');" onmouseout="out('-7953977331871486849');" style="">  51    @Deprecated public void setMaxSpeed(double maxSpeed) {                                                          </span>
<span class="7170079538529520301" onmouseenter="enter('7170079538529520301');" onmouseout="out('7170079538529520301');" style="">  52      AriaManager.getInstance(AriaManager.APP).getDownloadConfig().setMsxSpeed(maxSpeed);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  53    }                                                                                                               </span>
<span  style="">  54                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  55    /**                                                                                                             </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  56     * 使用下载实体执行下载操作                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  57     *                                                                                                              </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style="">  58     * @param entity 下载实体                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  59     */                                                                                                             </span>
<span class="5466262800524521213" onmouseenter="enter('5466262800524521213');" onmouseout="out('5466262800524521213');" style="">  60    public DownloadTarget load(DownloadEntity entity) {                                                             </span>
<span class="6765829635565156021" onmouseenter="enter('6765829635565156021');" onmouseout="out('6765829635565156021');" style="">  61      return load(entity, false);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62    }                                                                                                               </span>
<span  style="">  63                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  64    /**                                                                                                             </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="">  65     * 使用下载实体执行下载操作                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  66     *                                                                                                              </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style="">  67     * @param refreshInfo 是否刷新下载信息                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68     */                                                                                                             </span>
<span class="4512208090544288363" onmouseenter="enter('4512208090544288363');" onmouseout="out('4512208090544288363');" style="">  69    public DownloadTarget load(DownloadEntity entity, boolean refreshInfo) {                                        </span>
<span class="-5704682181018188738" onmouseenter="enter('-5704682181018188738');" onmouseout="out('-5704682181018188738');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  70 +    CheckUtil.checkDownloadEntity(entity);                                                                        </span>





<span class="-1334893378673445546" onmouseenter="enter('-1334893378673445546');" onmouseout="out('-1334893378673445546');" style="">  71      return new DownloadTarget(entity, targetName, refreshInfo);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72    }                                                                                                               </span>
<span  style="">  73                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  74    /**                                                                                                             </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="">  75     * 加载Http、https单任务下载地址                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  76     *                                                                                                              </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="">  77     * @param url 下载地址                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  78     */                                                                                                             </span>
<span class="-7620646004657887099" onmouseenter="enter('-7620646004657887099');" onmouseout="out('-7620646004657887099');" style="">  79    public DownloadTarget load(@NonNull String url) {                                                               </span>
<span class="1571066346408047685" onmouseenter="enter('1571066346408047685');" onmouseout="out('1571066346408047685');" style="">  80      return load(url, false);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81    }                                                                                                               </span>
<span  style="">  82                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  83    /**                                                                                                             </span>
<span class="5638968448930847398" onmouseenter="enter('5638968448930847398');" onmouseout="out('5638968448930847398');" style="">  84     * 加载Http、https单任务下载地址                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  85     *                                                                                                              </span>
<span class="8123337654964402602" onmouseenter="enter('8123337654964402602');" onmouseout="out('8123337654964402602');" style="">  86     * @param url 下载地址                                                                                              </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style="">  87     * @param refreshInfo 是否刷新下载信息                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  88     */                                                                                                             </span>
<span class="-5520959846461571672" onmouseenter="enter('-5520959846461571672');" onmouseout="out('-5520959846461571672');" style="">  89    public DownloadTarget load(@NonNull String url, boolean refreshInfo) {                                          </span>
<span class="-41922970968616848" onmouseenter="enter('-41922970968616848');" onmouseout="out('-41922970968616848');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  90 -    CheckUtil.checkDownloadUrl(url);                                                                              </span>
<span class="-8603189552017833172" onmouseenter="enter('-8603189552017833172');" onmouseout="out('-8603189552017833172');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  91 +    CheckUtil.checkUrl(url);                                                                                      </span>
<span class="-6107422860730852976" onmouseenter="enter('-6107422860730852976');" onmouseout="out('-6107422860730852976');" style="">  92      return new DownloadTarget(url, targetName, refreshInfo);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93    }                                                                                                               </span>
<span  style="">  94                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  95    /**                                                                                                             </span>
<span class="2297304325080531827" onmouseenter="enter('2297304325080531827');" onmouseout="out('2297304325080531827');" style="">  96     * 加载下载地址，如果任务组的中的下载地址改变了，则任务从新的一个任务组                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  97     */                                                                                                             </span>
<span class="-3978985407316286854" onmouseenter="enter('-3978985407316286854');" onmouseout="out('-3978985407316286854');" style="">  98    public DownloadGroupTarget load(List&lt;String&gt; urls) {                                                            </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style="">  99      CheckUtil.checkDownloadUrls(urls);                                                                            </span>
<span class="-2612285513071399987" onmouseenter="enter('-2612285513071399987');" onmouseout="out('-2612285513071399987');" style=""> 100      return new DownloadGroupTarget(urls, targetName);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101    }                                                                                                               </span>
<span  style=""> 102                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 103    /**                                                                                                             </span>
<span class="5765642592743702501" onmouseenter="enter('5765642592743702501');" onmouseout="out('5765642592743702501');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 104 +   * 使用下载实体执行FTP下载操作                                                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 105 +   *                                                                                                              </span>
<span class="4163842540176591711" onmouseenter="enter('4163842540176591711');" onmouseout="out('4163842540176591711');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 106 +   * @param entity 下载实体                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 107 +   */                                                                                                             </span>
<span class="539990068933324946" onmouseenter="enter('539990068933324946');" onmouseout="out('539990068933324946');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 108 +  public FtpDownloadTarget loadFtp(DownloadEntity entity) {                                                       </span>
<span class="3022490169827315427" onmouseenter="enter('3022490169827315427');" onmouseout="out('3022490169827315427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 109 +    return loadFtp(entity, false);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 110 +  }                                                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 112 +  /**                                                                                                             </span>
<span class="7584234318250211703" onmouseenter="enter('7584234318250211703');" onmouseout="out('7584234318250211703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 113 +   * 使用下载实体执行下载操作                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 114 +   *                                                                                                              </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 115 +   * @param refreshInfo 是否刷新下载信息                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +   */                                                                                                             </span>
<span class="7418286421971784035" onmouseenter="enter('7418286421971784035');" onmouseout="out('7418286421971784035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +  public FtpDownloadTarget loadFtp(DownloadEntity entity, boolean refreshInfo) {                                  </span>
<span class="-5704682181018188738" onmouseenter="enter('-5704682181018188738');" onmouseout="out('-5704682181018188738');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +    CheckUtil.checkDownloadEntity(entity);                                                                        </span>
<span class="-6911794941446079567" onmouseenter="enter('-6911794941446079567');" onmouseout="out('-6911794941446079567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 119 +    if (!entity.getUrl().startsWith(&quot;ftp&quot;)) {                                                                     </span>
<span class="-1436336878460187386" onmouseenter="enter('-1436336878460187386');" onmouseout="out('-1436336878460187386');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +      throw new IllegalArgumentException(&quot;非FTP请求不能使用该方法&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 121 +    }                                                                                                             </span>
<span class="5328341516284695107" onmouseenter="enter('5328341516284695107');" onmouseout="out('5328341516284695107');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 122 +    return new FtpDownloadTarget(entity, targetName, refreshInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 123 +  }                                                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +  /**                                                                                                             </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 126     * 加载ftp单任务下载地址                                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 127     */                                                                                                             </span>
<span class="-8520923309760825500" onmouseenter="enter('-8520923309760825500');" onmouseout="out('-8520923309760825500');" style=""> 128    public FtpDownloadTarget loadFtp(@NonNull String url) {                                                         </span>
<span class="4470597214358385853" onmouseenter="enter('4470597214358385853');" onmouseout="out('4470597214358385853');" style=""> 129      return loadFtp(url, false);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130    }                                                                                                               </span>
<span  style=""> 131                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 132    /**                                                                                                             </span>
<span class="6833532683343417580" onmouseenter="enter('6833532683343417580');" onmouseout="out('6833532683343417580');" style=""> 133     * 加载ftp单任务下载地址                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 134     *                                                                                                              </span>
<span class="-5436905144102420165" onmouseenter="enter('-5436905144102420165');" onmouseout="out('-5436905144102420165');" style=""> 135     * @param refreshInfo 是否刷新下载信息                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 136     */                                                                                                             </span>
<span class="-3974752927486852600" onmouseenter="enter('-3974752927486852600');" onmouseout="out('-3974752927486852600');" style=""> 137    public FtpDownloadTarget loadFtp(@NonNull String url, boolean refreshInfo) {                                    </span>
<span class="-41922970968616848" onmouseenter="enter('-41922970968616848');" onmouseout="out('-41922970968616848');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 138 -    CheckUtil.checkDownloadUrl(url);                                                                              </span>
<span class="-8603189552017833172" onmouseenter="enter('-8603189552017833172');" onmouseout="out('-8603189552017833172');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 139 +    CheckUtil.checkUrl(url);                                                                                      </span>
<span class="6480998331304056815" onmouseenter="enter('6480998331304056815');" onmouseout="out('6480998331304056815');" style=""> 140      return new FtpDownloadTarget(url, targetName, refreshInfo);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141    }                                                                                                               </span>
<span  style=""> 142                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 143    /**                                                                                                             </span>
<span class="-644101812843147118" onmouseenter="enter('-644101812843147118');" onmouseout="out('-644101812843147118');" style=""> 144     * 使用任务组实体执行任务组的实体执行任务组的下载操作                                                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 145     *                                                                                                              </span>
<span class="-7673496858448137784" onmouseenter="enter('-7673496858448137784');" onmouseout="out('-7673496858448137784');" style=""> 146     * @param groupEntity 如果加载的任务实体没有子项的下载地址，                                                                       </span>
<span class="-5926959885594342389" onmouseenter="enter('-5926959885594342389');" onmouseout="out('-5926959885594342389');" style=""> 147     * 那么你需要使用{@link DownloadGroupTarget#setGroupUrl(List)}设置子项的下载地址                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 148     */                                                                                                             </span>
<span class="-7986782816995408761" onmouseenter="enter('-7986782816995408761');" onmouseout="out('-7986782816995408761');" style=""> 149    public DownloadGroupTarget load(DownloadGroupEntity groupEntity) {                                              </span>
<span class="5161082270961212892" onmouseenter="enter('5161082270961212892');" onmouseout="out('5161082270961212892');" style=""> 150      return new DownloadGroupTarget(groupEntity, targetName);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151    }                                                                                                               </span>
<span  style=""> 152                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 153    /**                                                                                                             </span>
<span class="1687338762191352295" onmouseenter="enter('1687338762191352295');" onmouseout="out('1687338762191352295');" style=""> 154     * 加载ftp文件夹下载地址                                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 155     */                                                                                                             </span>
<span class="5825764911062879168" onmouseenter="enter('5825764911062879168');" onmouseout="out('5825764911062879168');" style=""> 156    public FtpDirDownloadTarget loadFtpDir(@NonNull String dirUrl) {                                                </span>
<span class="-1643562423298800413" onmouseenter="enter('-1643562423298800413');" onmouseout="out('-1643562423298800413');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 157 -    CheckUtil.checkDownloadUrl(dirUrl);                                                                           </span>
<span class="8504105770444144396" onmouseenter="enter('8504105770444144396');" onmouseout="out('8504105770444144396');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 158 +    CheckUtil.checkUrl(dirUrl);                                                                                   </span>
<span class="-8988703603088435939" onmouseenter="enter('-8988703603088435939');" onmouseout="out('-8988703603088435939');" style=""> 159      return new FtpDirDownloadTarget(dirUrl, targetName);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160    }                                                                                                               </span>
<span  style=""> 161                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 162    /**                                                                                                             </span>
<span class="-2874086798355386198" onmouseenter="enter('-2874086798355386198');" onmouseout="out('-2874086798355386198');" style=""> 163     * 将当前类注册到Aria                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 164     */                                                                                                             </span>
<span class="-4925173742984207732" onmouseenter="enter('-4925173742984207732');" onmouseout="out('-4925173742984207732');" style=""> 165    public DownloadReceiver register() {                                                                            </span>
<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 166      String className = obj.getClass().getName();                                                                  </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 167      Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                             </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 168      Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                                       </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 169      Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                                   </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 170      if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                                       </span>
<span class="-5670875303591463725" onmouseenter="enter('-5670875303591463725');" onmouseout="out('-5670875303591463725');" style=""> 171        DownloadSchedulers.getInstance().register(obj);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172      }                                                                                                             </span>
<span class="8400813546960630432" onmouseenter="enter('8400813546960630432');" onmouseout="out('8400813546960630432');" style=""> 173      if ((dgCounter != null &amp;&amp; dgCounter.contains(className)) || (dgsCounter != null                               </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 174          &amp;&amp; dgsCounter.contains(className))) {                                                                     </span>
<span class="1002821899645886942" onmouseenter="enter('1002821899645886942');" onmouseout="out('1002821899645886942');" style=""> 175        DownloadGroupSchedulers.getInstance().register(obj);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176      }                                                                                                             </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 177      return this;                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178    }                                                                                                               </span>
<span  style=""> 179                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 180    /**                                                                                                             </span>
<span class="4811620718788803994" onmouseenter="enter('4811620718788803994');" onmouseout="out('4811620718788803994');" style=""> 181     * 取消注册                                                                                                         </span>


<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 182     */                                                                                                             </span>
<span class="9104098464026605676" onmouseenter="enter('9104098464026605676');" onmouseout="out('9104098464026605676');" style=""> 183    @Override public void unRegister() {                                                                            </span>







<span class="-1210555518541887024" onmouseenter="enter('-1210555518541887024');" onmouseout="out('-1210555518541887024');" style=""> 184      String className = obj.getClass().getName();                                                                  </span>
<span class="8797890047665961725" onmouseenter="enter('8797890047665961725');" onmouseout="out('8797890047665961725');" style=""> 185      Set&lt;String&gt; dCounter = ProxyHelper.getInstance().downloadCounter;                                             </span>
<span class="7137800400602840828" onmouseenter="enter('7137800400602840828');" onmouseout="out('7137800400602840828');" style=""> 186      Set&lt;String&gt; dgCounter = ProxyHelper.getInstance().downloadGroupCounter;                                       </span>
<span class="4341755923634544724" onmouseenter="enter('4341755923634544724');" onmouseout="out('4341755923634544724');" style=""> 187      Set&lt;String&gt; dgsCounter = ProxyHelper.getInstance().downloadGroupSubCounter;                                   </span>
<span class="7430337407759039018" onmouseenter="enter('7430337407759039018');" onmouseout="out('7430337407759039018');" style=""> 188      if (dCounter != null &amp;&amp; dCounter.contains(className)) {                                                       </span>
<span class="-4965118218032185711" onmouseenter="enter('-4965118218032185711');" onmouseout="out('-4965118218032185711');" style=""> 189        DownloadSchedulers.getInstance().unRegister(obj);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190      }                                                                                                             </span>
<span class="974113968767899608" onmouseenter="enter('974113968767899608');" onmouseout="out('974113968767899608');" style=""> 191      if (dgCounter != null &amp;&amp; dgCounter.contains(className) || (dgsCounter != null                                 </span>
<span class="3709549300175275105" onmouseenter="enter('3709549300175275105');" onmouseout="out('3709549300175275105');" style=""> 192          &amp;&amp; dgsCounter.contains(className))) {                                                                     </span>
<span class="-7807598433909017874" onmouseenter="enter('-7807598433909017874');" onmouseout="out('-7807598433909017874');" style=""> 193        DownloadGroupSchedulers.getInstance().unRegister(obj);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194      }                                                                                                             </span>
<span class="7496791377500748366" onmouseenter="enter('7496791377500748366');" onmouseout="out('7496791377500748366');" style=""> 195      if (needRmReceiver) {                                                                                         </span>
<span class="-1563105831930296864" onmouseenter="enter('-1563105831930296864');" onmouseout="out('-1563105831930296864');" style=""> 196        AriaManager.getInstance(AriaManager.APP).removeReceiver(obj);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198    }                                                                                                               </span>
<span  style=""> 199                                                                                                                    </span>
<span class="3345695681730814389" onmouseenter="enter('3345695681730814389');" onmouseout="out('3345695681730814389');" style=""> 200    @Override public void destroy() {                                                                               </span>
<span class="-4901128148553670878" onmouseenter="enter('-4901128148553670878');" onmouseout="out('-4901128148553670878');" style=""> 201      targetName = null;                                                                                            </span>
<span class="-4099358687357442786" onmouseenter="enter('-4099358687357442786');" onmouseout="out('-4099358687357442786');" style=""> 202      listener = null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203    }                                                                                                               </span>
<span  style=""> 204                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 205    /**                                                                                                             </span>
<span class="-4855951461764354463" onmouseenter="enter('-4855951461764354463');" onmouseout="out('-4855951461764354463');" style=""> 206     * 通过下载链接获取下载实体                                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 207     */                                                                                                             </span>
<span class="6067624311729681660" onmouseenter="enter('6067624311729681660');" onmouseout="out('6067624311729681660');" style=""> 208    public DownloadEntity getDownloadEntity(String downloadUrl) {                                                   </span>
<span class="-7551708026621458125" onmouseenter="enter('-7551708026621458125');" onmouseout="out('-7551708026621458125');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 209 -    CheckUtil.checkDownloadUrl(downloadUrl);                                                                      </span>
<span class="2765064707147909850" onmouseenter="enter('2765064707147909850');" onmouseout="out('2765064707147909850');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 210 +    CheckUtil.checkUrl(downloadUrl);                                                                              </span>
<span class="4826407584559057648" onmouseenter="enter('4826407584559057648');" onmouseout="out('4826407584559057648');" style=""> 211      return DbEntity.findFirst(DownloadEntity.class, &quot;url=? and isGroupChild=&#x27;false&#x27;&quot;, downloadUrl);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212    }                                                                                                               </span>
<span  style=""> 213                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 214    /**                                                                                                             </span>
<span class="625446827844080348" onmouseenter="enter('625446827844080348');" onmouseout="out('625446827844080348');" style=""> 215     * 通过下载链接获取保存在数据库的下载任务实体                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 216     */                                                                                                             </span>
<span class="-7637734105267374212" onmouseenter="enter('-7637734105267374212');" onmouseout="out('-7637734105267374212');" style=""> 217    public DownloadTaskEntity getDownloadTask(String downloadUrl) {                                                 </span>
<span class="-7551708026621458125" onmouseenter="enter('-7551708026621458125');" onmouseout="out('-7551708026621458125');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 218 -    CheckUtil.checkDownloadUrl(downloadUrl);                                                                      </span>
<span class="2765064707147909850" onmouseenter="enter('2765064707147909850');" onmouseout="out('2765064707147909850');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 219 +    CheckUtil.checkUrl(downloadUrl);                                                                              </span>
<span class="-5185402298602239038" onmouseenter="enter('-5185402298602239038');" onmouseout="out('-5185402298602239038');" style=""> 220      DownloadEntity entity = getDownloadEntity(downloadUrl);                                                       </span>
<span class="-2008932504864023242" onmouseenter="enter('-2008932504864023242');" onmouseout="out('-2008932504864023242');" style=""> 221      if (entity == null || TextUtils.isEmpty(entity.getDownloadPath())) return null;                               </span>
<span class="-7326527410643528824" onmouseenter="enter('-7326527410643528824');" onmouseout="out('-7326527410643528824');" style=""> 222      return DbEntity.findFirst(DownloadTaskEntity.class, &quot;key=? and isGroupTask=&#x27;false&#x27;&quot;,                          </span>
<span class="-153714010952936175" onmouseenter="enter('-153714010952936175');" onmouseout="out('-153714010952936175');" style=""> 223          entity.getDownloadPath());                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224    }                                                                                                               </span>
<span  style=""> 225                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 226    /**                                                                                                             </span>
<span class="-6542418820527226697" onmouseenter="enter('-6542418820527226697');" onmouseout="out('-6542418820527226697');" style=""> 227     * 通过下载链接获取保存在数据库的下载任务组实体                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 228     */                                                                                                             </span>
<span class="5407962917483047507" onmouseenter="enter('5407962917483047507');" onmouseout="out('5407962917483047507');" style=""> 229    public DownloadGroupTaskEntity getDownloadGroupTask(List&lt;String&gt; urls) {                                        </span>
<span class="-1456626783606571249" onmouseenter="enter('-1456626783606571249');" onmouseout="out('-1456626783606571249');" style=""> 230      CheckUtil.checkDownloadUrls(urls);                                                                            </span>
<span class="-2143724232684022656" onmouseenter="enter('-2143724232684022656');" onmouseout="out('-2143724232684022656');" style=""> 231      String hashCode = CommonUtil.getMd5Code(urls);                                                                </span>
<span class="753794430818465046" onmouseenter="enter('753794430818465046');" onmouseout="out('753794430818465046');" style=""> 232      return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, hashCode);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233    }                                                                                                               </span>
<span  style=""> 234                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 235    /**                                                                                                             </span>
<span class="8545732146449590791" onmouseenter="enter('8545732146449590791');" onmouseout="out('8545732146449590791');" style=""> 236     * 通过任务组key，获取任务组实体                                                                                             </span>
<span class="-915937270042831698" onmouseenter="enter('-915937270042831698');" onmouseout="out('-915937270042831698');" style=""> 237     * 如果是http，key为所有子任务下载地址拼接后取md5                                                                                 </span>
<span class="-6888603962563272152" onmouseenter="enter('-6888603962563272152');" onmouseout="out('-6888603962563272152');" style=""> 238     * 如果是ftp，key为ftp服务器的文件夹路径                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 239     */                                                                                                             </span>
<span class="3930845008170494728" onmouseenter="enter('3930845008170494728');" onmouseout="out('3930845008170494728');" style=""> 240    public DownloadGroupTaskEntity getDownloadGroupTask(String key) {                                               </span>
<span class="-2479292647152353998" onmouseenter="enter('-2479292647152353998');" onmouseout="out('-2479292647152353998');" style=""> 241      return DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, key);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242    }                                                                                                               </span>
<span  style=""> 243                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 244    /**                                                                                                             </span>
<span class="-7888671401854060616" onmouseenter="enter('-7888671401854060616');" onmouseout="out('-7888671401854060616');" style=""> 245     * 下载任务是否存在                                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 246     */                                                                                                             </span>
<span class="-1092275811913780416" onmouseenter="enter('-1092275811913780416');" onmouseout="out('-1092275811913780416');" style=""> 247    @Override public boolean taskExists(String downloadUrl) {                                                       </span>
<span class="-8257903088695496664" onmouseenter="enter('-8257903088695496664');" onmouseout="out('-8257903088695496664');" style=""> 248      return DownloadEntity.findFirst(DownloadEntity.class, &quot;url=?&quot;, downloadUrl) != null;                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249    }                                                                                                               </span>
<span  style=""> 250                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 251    /**                                                                                                             </span>
<span class="-2894577714931105927" onmouseenter="enter('-2894577714931105927');" onmouseout="out('-2894577714931105927');" style=""> 252     * 获取普通下载任务列表                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 253     */                                                                                                             </span>
<span class="-1224977372519603955" onmouseenter="enter('-1224977372519603955');" onmouseout="out('-1224977372519603955');" style=""> 254    @Override public List&lt;DownloadEntity&gt; getSimpleTaskList() {                                                     </span>
<span class="-3884263886229518247" onmouseenter="enter('-3884263886229518247');" onmouseout="out('-3884263886229518247');" style=""> 255      return DownloadEntity.findDatas(DownloadEntity.class, &quot;isGroupChild=? and downloadPath!=&#x27;&#x27;&quot;,                  </span>
<span class="-8693734603624123186" onmouseenter="enter('-8693734603624123186');" onmouseout="out('-8693734603624123186');" style=""> 256          &quot;false&quot;);                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257    }                                                                                                               </span>
<span  style=""> 258                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 259    /**                                                                                                             </span>
<span class="-7216670373962638911" onmouseenter="enter('-7216670373962638911');" onmouseout="out('-7216670373962638911');" style=""> 260     * 获取任务组列表                                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 261     */                                                                                                             </span>
<span class="-2755211114601704515" onmouseenter="enter('-2755211114601704515');" onmouseout="out('-2755211114601704515');" style=""> 262    public List&lt;DownloadGroupEntity&gt; getGroupTaskList() {                                                           </span>
<span class="-8707622985980297555" onmouseenter="enter('-8707622985980297555');" onmouseout="out('-8707622985980297555');" style=""> 263      return DownloadEntity.findAllData(DownloadGroupEntity.class);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264    }                                                                                                               </span>
<span  style=""> 265                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 266    /**                                                                                                             </span>
<span class="8965383640224391026" onmouseenter="enter('8965383640224391026');" onmouseout="out('8965383640224391026');" style=""> 267     * 获取普通任务和任务组的任务列表                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 268     */                                                                                                             </span>
<span class="-2889141978955106905" onmouseenter="enter('-2889141978955106905');" onmouseout="out('-2889141978955106905');" style=""> 269    public List&lt;AbsEntity&gt; getTotleTaskList() {                                                                     </span>
<span class="-7408081633636237340" onmouseenter="enter('-7408081633636237340');" onmouseout="out('-7408081633636237340');" style=""> 270      List&lt;AbsEntity&gt; list = new ArrayList&lt;&gt;();                                                                     </span>
<span class="-1266594982388124504" onmouseenter="enter('-1266594982388124504');" onmouseout="out('-1266594982388124504');" style=""> 271      List&lt;DownloadEntity&gt; simpleTask = getSimpleTaskList();                                                        </span>
<span class="-4106153234455279996" onmouseenter="enter('-4106153234455279996');" onmouseout="out('-4106153234455279996');" style=""> 272      List&lt;DownloadGroupEntity&gt; groupTask = getGroupTaskList();                                                     </span>
<span class="-8209161792107312998" onmouseenter="enter('-8209161792107312998');" onmouseout="out('-8209161792107312998');" style=""> 273      if (simpleTask != null &amp;&amp; !simpleTask.isEmpty()) {                                                            </span>
<span class="6802811283489038468" onmouseenter="enter('6802811283489038468');" onmouseout="out('6802811283489038468');" style=""> 274        list.addAll(simpleTask);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275      }                                                                                                             </span>
<span class="6352724383592003863" onmouseenter="enter('6352724383592003863');" onmouseout="out('6352724383592003863');" style=""> 276      if (groupTask != null &amp;&amp; !groupTask.isEmpty()) {                                                              </span>
<span class="-1528470393600602759" onmouseenter="enter('-1528470393600602759');" onmouseout="out('-1528470393600602759');" style=""> 277        list.addAll(groupTask);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278      }                                                                                                             </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 279      return list;                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280    }                                                                                                               </span>
<span  style=""> 281                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 282    /**                                                                                                             </span>
<span class="3402822126794432274" onmouseenter="enter('3402822126794432274');" onmouseout="out('3402822126794432274');" style=""> 283     * 停止所有正在下载的任务，并清空等待队列。                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 284     */                                                                                                             </span>
<span class="-8271139132618696861" onmouseenter="enter('-8271139132618696861');" onmouseout="out('-8271139132618696861');" style=""> 285    @Override public void stopAllTask() {                                                                           </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 286      AriaManager.getInstance(AriaManager.APP)                                                                      </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 287          .setCmd(NormalCmdFactory.getInstance()                                                                    </span>
<span class="6744734670145487711" onmouseenter="enter('6744734670145487711');" onmouseout="out('6744734670145487711');" style=""> 288              .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_STOP_ALL,                      </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 289                  ICmd.TASK_TYPE_DOWNLOAD))                                                                         </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 290          .exe();                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291    }                                                                                                               </span>
<span  style=""> 292                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 293    /**                                                                                                             </span>
<span class="1311517946297423409" onmouseenter="enter('1311517946297423409');" onmouseout="out('1311517946297423409');" style=""> 294     * 恢复所有正在下载的任务                                                                                                  </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style=""> 295     * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                                  </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style=""> 296     * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 297     */                                                                                                             </span>
<span class="2382837737668558844" onmouseenter="enter('2382837737668558844');" onmouseout="out('2382837737668558844');" style=""> 298    public void resumeAllTask() {                                                                                   </span>
<span class="-7859796608944545969" onmouseenter="enter('-7859796608944545969');" onmouseout="out('-7859796608944545969');" style=""> 299      AriaManager.getInstance(AriaManager.APP)                                                                      </span>
<span class="-8662412021557476230" onmouseenter="enter('-8662412021557476230');" onmouseout="out('-8662412021557476230');" style=""> 300          .setCmd(NormalCmdFactory.getInstance()                                                                    </span>
<span class="820973633919607204" onmouseenter="enter('820973633919607204');" onmouseout="out('820973633919607204');" style=""> 301              .createCmd(targetName, new DownloadTaskEntity(), NormalCmdFactory.TASK_RESUME_ALL,                    </span>
<span class="-569918172439487584" onmouseenter="enter('-569918172439487584');" onmouseout="out('-569918172439487584');" style=""> 302                  ICmd.TASK_TYPE_DOWNLOAD))                                                                         </span>
<span class="4364523834861304685" onmouseenter="enter('4364523834861304685');" onmouseout="out('4364523834861304685');" style=""> 303          .exe();                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304    }                                                                                                               </span>
<span  style=""> 305                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 306    /**                                                                                                             </span>
<span class="-7338390600186437821" onmouseenter="enter('-7338390600186437821');" onmouseout="out('-7338390600186437821');" style=""> 307     * 删除所有任务                                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 308     *                                                                                                              </span>
<span class="-325804075342723783" onmouseenter="enter('-325804075342723783');" onmouseout="out('-325804075342723783');" style=""> 309     * @param removeFile {@code true} 删除已经下载完成的任务，不仅删除下载记录，还会删除已经下载完成的文件，{@code false}                              </span>
<span class="-4045013558095481687" onmouseenter="enter('-4045013558095481687');" onmouseout="out('-4045013558095481687');" style=""> 310     * 如果文件已经下载完成，只删除下载记录                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 311     */                                                                                                             </span>
<span class="5963878394412937684" onmouseenter="enter('5963878394412937684');" onmouseout="out('5963878394412937684');" style=""> 312    @Override public void removeAllTask(boolean removeFile) {                                                       </span>
<span class="-1602790229953823078" onmouseenter="enter('-1602790229953823078');" onmouseout="out('-1602790229953823078');" style=""> 313      final AriaManager ariaManager = AriaManager.getInstance(AriaManager.APP);                                     </span>
<span class="-844712413651756711" onmouseenter="enter('-844712413651756711');" onmouseout="out('-844712413651756711');" style=""> 314      CancelAllCmd cancelCmd =                                                                                      </span>
<span class="-8183977970671235029" onmouseenter="enter('-8183977970671235029');" onmouseout="out('-8183977970671235029');" style=""> 315          (CancelAllCmd) CommonUtil.createNormalCmd(targetName, new DownloadTaskEntity(),                           </span>
<span class="5247092821337102267" onmouseenter="enter('5247092821337102267');" onmouseout="out('5247092821337102267');" style=""> 316              NormalCmdFactory.TASK_CANCEL_ALL, ICmd.TASK_TYPE_DOWNLOAD);                                           </span>
<span class="-2029657375534786103" onmouseenter="enter('-2029657375534786103');" onmouseout="out('-2029657375534786103');" style=""> 317      cancelCmd.removeFile = removeFile;                                                                            </span>
<span class="-8687051478420435310" onmouseenter="enter('-8687051478420435310');" onmouseout="out('-8687051478420435310');" style=""> 318      ariaManager.setCmd(cancelCmd).exe();                                                                          </span>
<span class="6170682864485863774" onmouseenter="enter('6170682864485863774');" onmouseout="out('6170682864485863774');" style=""> 319      Set&lt;String&gt; keys = ariaManager.getReceiver().keySet();                                                        </span>
<span class="-5841525186174834007" onmouseenter="enter('-5841525186174834007');" onmouseout="out('-5841525186174834007');" style=""> 320      for (String key : keys) {                                                                                     </span>
<span class="-4261055600814182440" onmouseenter="enter('-4261055600814182440');" onmouseout="out('-4261055600814182440');" style=""> 321        ariaManager.getReceiver().remove(key);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323    }                                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            