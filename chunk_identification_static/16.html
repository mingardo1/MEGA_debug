<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>16</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    16
                    <a href="15.html">prev</a>
                    <a href="17.html">next</a>
                    <a href="16_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    AriaLyy/Aria_cb1f0e730bde28a18e672c263c1236eb9c4df4fa_Aria/src/main/java/com/arialyy/aria/core/command/normal/ResumeAllCmd.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;cb1f0e730bde28a18e672c263c1236eb9c4df4fa:Aria/src/main/java/com/arialyy/aria/core/command/normal/ResumeAllCmd.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;cb1f0e730bde28a18e672c263c1236eb9c4df4fa^1:Aria/src/main/java/com/arialyy/aria/core/command/normal/ResumeAllCmd.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;cb1f0e730bde28a18e672c263c1236eb9c4df4fa^2:Aria/src/main/java/com/arialyy/aria/core/command/normal/ResumeAllCmd.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;e362621c3899fe60df42df4433560ff4649f9a1e:Aria/src/main/java/com/arialyy/aria/core/command/normal/ResumeAllCmd.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bsj]], subset: [[bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-4185208522764792297" onmouseenter="enter('-4185208522764792297');" onmouseout="out('-4185208522764792297');" style="">   1 package com.arialyy.aria.core.command.normal;                                                            </span>
<span  style="">   2                                                                                                          </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">   3 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="5290109400157436023" onmouseenter="enter('5290109400157436023');" onmouseout="out('5290109400157436023');" style="">   4 import com.arialyy.aria.core.download.DownloadGroupTaskEntity;                                           </span>
<span class="8636089030381561336" onmouseenter="enter('8636089030381561336');" onmouseout="out('8636089030381561336');" style="">   5 import com.arialyy.aria.core.download.DownloadTaskEntity;                                                </span>
<span class="6904362612035804276" onmouseenter="enter('6904362612035804276');" onmouseout="out('6904362612035804276');" style="">   6 import com.arialyy.aria.core.download.wrapper.DGTEWrapper;                                               </span>
<span class="-6970023867987021516" onmouseenter="enter('-6970023867987021516');" onmouseout="out('-6970023867987021516');" style="">   7 import com.arialyy.aria.core.download.wrapper.DTEWrapper;                                                </span>
<span class="-4417152733335289341" onmouseenter="enter('-4417152733335289341');" onmouseout="out('-4417152733335289341');" style="">   8 import com.arialyy.aria.core.inf.AbsTask;                                                                </span>
<span class="4195608340199028072" onmouseenter="enter('4195608340199028072');" onmouseout="out('4195608340199028072');" style="">   9 import com.arialyy.aria.core.inf.AbsTaskEntity;                                                          </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  10 import com.arialyy.aria.core.inf.IEntity;                                                                </span>
<span class="6163330959373243747" onmouseenter="enter('6163330959373243747');" onmouseout="out('6163330959373243747');" style="">  11 import com.arialyy.aria.core.queue.DownloadGroupTaskQueue;                                               </span>
<span class="1325372506799583582" onmouseenter="enter('1325372506799583582');" onmouseout="out('1325372506799583582');" style="">  12 import com.arialyy.aria.core.queue.DownloadTaskQueue;                                                    </span>
<span class="-8259302571631178660" onmouseenter="enter('-8259302571631178660');" onmouseout="out('-8259302571631178660');" style="">  13 import com.arialyy.aria.core.queue.UploadTaskQueue;                                                      </span>
<span class="5529108429384186748" onmouseenter="enter('5529108429384186748');" onmouseout="out('5529108429384186748');" style="">  14 import com.arialyy.aria.core.upload.UploadTaskEntity;                                                    </span>
<span class="3697256534917243563" onmouseenter="enter('3697256534917243563');" onmouseout="out('3697256534917243563');" style="">  15 import com.arialyy.aria.core.upload.wrapper.UTEWrapper;                                                  </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  16 import com.arialyy.aria.orm.DbEntity;                                                                    </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="">  17 import com.arialyy.aria.util.ALog;                                                                       </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  18 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="-3921447581486569047" onmouseenter="enter('-3921447581486569047');" onmouseout="out('-3921447581486569047');" style="">  19 import com.arialyy.aria.util.NetUtils;                                                                   </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  21 import java.util.List;                                                                                   </span>
<span  style="">  22                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  23 /**                                                                                                      </span>
<span class="3256834120032901091" onmouseenter="enter('3256834120032901091');" onmouseout="out('3256834120032901091');" style="">  24  * Created by AriaL on 2017/6/13.                                                                        </span>
<span class="-1725900952073690056" onmouseenter="enter('-1725900952073690056');" onmouseout="out('-1725900952073690056');" style="">  25  * 恢复所有停止的任务                                                                                             </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style="">  26  * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                           </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style="">  27  * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                         </span>
<span class="3647244767730944879" onmouseenter="enter('3647244767730944879');" onmouseout="out('3647244767730944879');" style="">  28  * 3.如果队列中只有等待状态的任务，如果执行队列没有满，则会启动等待状态的任务，如果执行队列已经满了，则会将所有等待状态的任务加载到缓存队列中                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  29  */                                                                                                      </span>
<span class="-5145471632187895448" onmouseenter="enter('-5145471632187895448');" onmouseout="out('-5145471632187895448');" style="">  30 final class ResumeAllCmd&lt;T extends AbsTaskEntity&gt; extends AbsNormalCmd&lt;T&gt; {                              </span>
<span class="6798992044291624411" onmouseenter="enter('6798992044291624411');" onmouseout="out('6798992044291624411');" style="">  31   private List&lt;AbsTaskEntity&gt; mWaitList = new ArrayList&lt;&gt;();                                             </span>
<span  style="">  32                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  33   /**                                                                                                    </span>
<span class="8174408356842298787" onmouseenter="enter('8174408356842298787');" onmouseout="out('8174408356842298787');" style="">  34    * @param targetName 产生任务的对象名                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  35    */                                                                                                    </span>
<span class="889722537235794515" onmouseenter="enter('889722537235794515');" onmouseout="out('889722537235794515');" style="">  36   ResumeAllCmd(String targetName, T entity, int taskType) {                                              </span>
<span class="2762350648838201041" onmouseenter="enter('2762350648838201041');" onmouseout="out('2762350648838201041');" style="">  37     super(targetName, entity, taskType);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  38   }                                                                                                      </span>
<span  style="">  39                                                                                                          </span>
<span class="3557000923024440314" onmouseenter="enter('3557000923024440314');" onmouseout="out('3557000923024440314');" style="">  40   @Override public void executeCmd() {                                                                   </span>
<span class="-6906891541775948108" onmouseenter="enter('-6906891541775948108');" onmouseout="out('-6906891541775948108');" style="">  41     if (!NetUtils.isConnected(AriaManager.APP)) {                                                        </span>
<span class="3527840811195708659" onmouseenter="enter('3527840811195708659');" onmouseout="out('3527840811195708659');" style="">  42       ALog.w(TAG, &quot;恢复任务失败，网络未连接&quot;);                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  43       return;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  44     }                                                                                                    </span>
<span class="1522143620344999653" onmouseenter="enter('1522143620344999653');" onmouseout="out('1522143620344999653');" style="">  45     if (isDownloadCmd) {                                                                                 </span>
<span class="-6890796901789246179" onmouseenter="enter('-6890796901789246179');" onmouseout="out('-6890796901789246179');" style="">  46       resumeTask(findTaskData(1));                                                                       </span>
<span class="-8762133209280134260" onmouseenter="enter('-8762133209280134260');" onmouseout="out('-8762133209280134260');" style="">  47       resumeTask(findTaskData(2));                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  48     } else {                                                                                             </span>
<span class="380554388410105805" onmouseenter="enter('380554388410105805');" onmouseout="out('380554388410105805');" style="">  49       resumeTask(findTaskData(3));                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  50     }                                                                                                    </span>
<span class="-1126421468463401792" onmouseenter="enter('-1126421468463401792');" onmouseout="out('-1126421468463401792');" style="">  51     resumeWaitTask();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  52   }                                                                                                      </span>
<span  style="">  53                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  54   /**                                                                                                    </span>
<span class="4566010906397738885" onmouseenter="enter('4566010906397738885');" onmouseout="out('4566010906397738885');" style="">  55    * 查找数据库中的所有任务数据                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  56    *                                                                                                     </span>
<span class="-4796337639611018481" onmouseenter="enter('-4796337639611018481');" onmouseout="out('-4796337639611018481');" style="">  57    * @param type {@code 1}单任务下载任务；{@code 2}任务组下载任务；{@code 3} 单任务上传任务                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  58    */                                                                                                    </span>
<span class="1340178163970591689" onmouseenter="enter('1340178163970591689');" onmouseout="out('1340178163970591689');" style="">  59   private List&lt;AbsTaskEntity&gt; findTaskData(int type) {                                                   </span>
<span class="-4948925559833229510" onmouseenter="enter('-4948925559833229510');" onmouseout="out('-4948925559833229510');" style="">  60     List&lt;AbsTaskEntity&gt; tempList = new ArrayList&lt;&gt;();                                                    </span>
<span class="-7978942224896054195" onmouseenter="enter('-7978942224896054195');" onmouseout="out('-7978942224896054195');" style="">  61     if (type == 1) {                                                                                     </span>
<span class="8139188931880290130" onmouseenter="enter('8139188931880290130');" onmouseout="out('8139188931880290130');" style="">  62       List&lt;DTEWrapper&gt; wrappers = DbEntity.findRelationData(DTEWrapper.class,                            </span>
<span class="-145224649022788331" onmouseenter="enter('-145224649022788331');" onmouseout="out('-145224649022788331');" style="">  63           &quot;DownloadTaskEntity.isGroupTask=? and DownloadTaskEntity.state!=?&quot;, &quot;false&quot;, &quot;1&quot;);             </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  64       if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                     </span>
<span class="3057039082211951420" onmouseenter="enter('3057039082211951420');" onmouseout="out('3057039082211951420');" style="">  65         for (DTEWrapper w : wrappers) {                                                                  </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  66           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68       }                                                                                                  </span>
<span class="8913765828433928115" onmouseenter="enter('8913765828433928115');" onmouseout="out('8913765828433928115');" style="">  69     } else if (type == 2) {                                                                              </span>
<span class="7331687587543988067" onmouseenter="enter('7331687587543988067');" onmouseout="out('7331687587543988067');" style="">  70       List&lt;DGTEWrapper&gt; wrappers =                                                                       </span>
<span class="1958087491453917500" onmouseenter="enter('1958087491453917500');" onmouseout="out('1958087491453917500');" style="">  71           DbEntity.findRelationData(DGTEWrapper.class, &quot;DownloadGroupTaskEntity.state!=?&quot;, &quot;1&quot;);         </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  72       if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                     </span>
<span class="3408371293368738052" onmouseenter="enter('3408371293368738052');" onmouseout="out('3408371293368738052');" style="">  73         for (DGTEWrapper w : wrappers) {                                                                 </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  74           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76       }                                                                                                  </span>
<span class="1871493888726698877" onmouseenter="enter('1871493888726698877');" onmouseout="out('1871493888726698877');" style="">  77     } else if (type == 3) {                                                                              </span>
<span class="1799852467382085535" onmouseenter="enter('1799852467382085535');" onmouseout="out('1799852467382085535');" style="">  78       List&lt;UTEWrapper&gt; wrappers =                                                                        </span>
<span class="1961233800438776770" onmouseenter="enter('1961233800438776770');" onmouseout="out('1961233800438776770');" style="">  79           DbEntity.findRelationData(UTEWrapper.class, &quot;UploadTaskEntity.state!=?&quot;, &quot;1&quot;);                 </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  80       if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                     </span>
<span class="-5900313342441763645" onmouseenter="enter('-5900313342441763645');" onmouseout="out('-5900313342441763645');" style="">  81         for (UTEWrapper w : wrappers) {                                                                  </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  82           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85     }                                                                                                    </span>
<span class="4353492093014799504" onmouseenter="enter('4353492093014799504');" onmouseout="out('4353492093014799504');" style="">  86     return tempList;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87   }                                                                                                      </span>
<span  style="">  88                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  89   /**                                                                                                    </span>
<span class="5101699313009411241" onmouseenter="enter('5101699313009411241');" onmouseout="out('5101699313009411241');" style="">  90    * 恢复任务                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  91    */                                                                                                    </span>
<span class="3638171901598519953" onmouseenter="enter('3638171901598519953');" onmouseout="out('3638171901598519953');" style="">  92   private void resumeTask(List&lt;AbsTaskEntity&gt; taskList) {                                                </span>
<span class="-7337401294989890148" onmouseenter="enter('-7337401294989890148');" onmouseout="out('-7337401294989890148');" style="">  93     if (taskList != null &amp;&amp; !taskList.isEmpty()) {                                                       </span>
<span class="3612314535203445506" onmouseenter="enter('3612314535203445506');" onmouseout="out('3612314535203445506');" style="">  94       for (AbsTaskEntity te : taskList) {                                                                </span>
<span class="651191964208080036" onmouseenter="enter('651191964208080036');" onmouseout="out('651191964208080036');" style="">  95         if (te == null || te.getEntity() == null) continue;                                              </span>
<span class="-6705546539852962611" onmouseenter="enter('-6705546539852962611');" onmouseout="out('-6705546539852962611');" style="">  96         int state = te.getState();                                                                       </span>
<span class="2104673490985042132" onmouseenter="enter('2104673490985042132');" onmouseout="out('2104673490985042132');" style="">  97         if (state == IEntity.STATE_STOP || state == IEntity.STATE_OTHER) {                               </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style="">  98           resumeEntity(te);                                                                              </span>
<span class="-884893285908090526" onmouseenter="enter('-884893285908090526');" onmouseout="out('-884893285908090526');" style="">  99         } else if (state == IEntity.STATE_WAIT) {                                                        </span>
<span class="-7302123928453854513" onmouseenter="enter('-7302123928453854513');" onmouseout="out('-7302123928453854513');" style=""> 100           mWaitList.add(te);                                                                             </span>
<span class="-4837473431815791771" onmouseenter="enter('-4837473431815791771');" onmouseout="out('-4837473431815791771');" style=""> 101         } else if (state == IEntity.STATE_RUNNING) {                                                     </span>
<span class="-8110574645702777732" onmouseenter="enter('-8110574645702777732');" onmouseout="out('-8110574645702777732');" style=""> 102           if (!mQueue.taskIsRunning(te.getEntity().getKey())) {                                          </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style=""> 103             resumeEntity(te);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104           }                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108   }                                                                                                      </span>
<span  style=""> 109                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 110   /**                                                                                                    </span>
<span class="-5145430413242635014" onmouseenter="enter('-5145430413242635014');" onmouseout="out('-5145430413242635014');" style=""> 111    * 处理等待状态的任务                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 112    */                                                                                                    </span>
<span class="-1625414326575091195" onmouseenter="enter('-1625414326575091195');" onmouseout="out('-1625414326575091195');" style=""> 113   private void resumeWaitTask() {                                                                        </span>
<span class="-189509060053149369" onmouseenter="enter('-189509060053149369');" onmouseout="out('-189509060053149369');" style=""> 114     int maxTaskNum = mQueue.getMaxTaskNum();                                                             </span>
<span class="6227704391685544677" onmouseenter="enter('6227704391685544677');" onmouseout="out('6227704391685544677');" style=""> 115     if (mWaitList == null || mWaitList.isEmpty()) return;                                                </span>
<span class="1864561866722219025" onmouseenter="enter('1864561866722219025');" onmouseout="out('1864561866722219025');" style=""> 116     for (AbsTaskEntity te : mWaitList) {                                                                 </span>
<span class="-2028145384049517138" onmouseenter="enter('-2028145384049517138');" onmouseout="out('-2028145384049517138');" style=""> 117       if (mQueue.getCurrentExePoolNum() &lt; maxTaskNum) {                                                  </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 118         startTask(createTask(te));                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 119       } else {                                                                                           </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style=""> 120         createTask(te);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123   }                                                                                                      </span>
<span  style=""> 124                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 125   /**                                                                                                    </span>
<span class="1558403980806506756" onmouseenter="enter('1558403980806506756');" onmouseout="out('1558403980806506756');" style=""> 126    * 恢复实体任务                                                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 127    *                                                                                                     </span>
<span class="-8639345982942738758" onmouseenter="enter('-8639345982942738758');" onmouseout="out('-8639345982942738758');" style=""> 128    * @param te 任务实体                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 129    */                                                                                                    </span>
<span class="-1988769257152881971" onmouseenter="enter('-1988769257152881971');" onmouseout="out('-1988769257152881971');" style=""> 130   private void resumeEntity(AbsTaskEntity te) {                                                          </span>
<span class="-2998921525610830551" onmouseenter="enter('-2998921525610830551');" onmouseout="out('-2998921525610830551');" style=""> 131     if (te instanceof DownloadTaskEntity) {                                                              </span>
<span class="-1254033370540279069" onmouseenter="enter('-1254033370540279069');" onmouseout="out('-1254033370540279069');" style=""> 132       if (te.getRequestType() == AbsTaskEntity.D_FTP || te.getRequestType() == AbsTaskEntity.U_FTP) {    </span>
<span class="6272043103950913871" onmouseenter="enter('6272043103950913871');" onmouseout="out('6272043103950913871');" style=""> 133         te.setUrlEntity(CommonUtil.getFtpUrlInfo(te.getEntity().getKey()));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134       }                                                                                                  </span>
<span class="4181603964882924928" onmouseenter="enter('4181603964882924928');" onmouseout="out('4181603964882924928');" style=""> 135       mQueue = DownloadTaskQueue.getInstance();                                                          </span>
<span class="7410298183112777491" onmouseenter="enter('7410298183112777491');" onmouseout="out('7410298183112777491');" style=""> 136     } else if (te instanceof UploadTaskEntity) {                                                         </span>
<span class="-4238222144911108592" onmouseenter="enter('-4238222144911108592');" onmouseout="out('-4238222144911108592');" style=""> 137       mQueue = UploadTaskQueue.getInstance();                                                            </span>
<span class="1537663648944988461" onmouseenter="enter('1537663648944988461');" onmouseout="out('1537663648944988461');" style=""> 138     } else if (te instanceof DownloadGroupTaskEntity) {                                                  </span>
<span class="4162299188526624835" onmouseenter="enter('4162299188526624835');" onmouseout="out('4162299188526624835');" style=""> 139       mQueue = DownloadGroupTaskQueue.getInstance();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140     }                                                                                                    </span>
<span class="2957486427642302174" onmouseenter="enter('2957486427642302174');" onmouseout="out('2957486427642302174');" style=""> 141     int exeNum = mQueue.getCurrentExePoolNum();                                                          </span>
<span class="-8608281800626499750" onmouseenter="enter('-8608281800626499750');" onmouseout="out('-8608281800626499750');" style=""> 142     if (exeNum == 0 || exeNum &lt; mQueue.getMaxTaskNum()) {                                                </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 143       startTask(createTask(te));                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 144     } else {                                                                                             </span>
<span class="3190407925113971357" onmouseenter="enter('3190407925113971357');" onmouseout="out('3190407925113971357');" style=""> 145       te.getEntity().setState(IEntity.STATE_WAIT);                                                       </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 146 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 147       createTask(te);                                                                                    </span>
<span class="-7052049638166885619" onmouseenter="enter('-7052049638166885619');" onmouseout="out('-7052049638166885619');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 148       sendWaitState();                                                                                   </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 149 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="3190407925113971357" onmouseenter="enter('3190407925113971357');" onmouseout="out('3190407925113971357');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150       te.getEntity().setState(IEntity.STATE_WAIT);                                                       </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151       createTask(te);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153   }                                                                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 154 =======                                                                                                  </span>
<span class="-4758218181751503086" onmouseenter="enter('-4758218181751503086');" onmouseout="out('-4758218181751503086');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155       AbsTask task = createTask(te);                                                                     </span>
<span class="6082005349029604247" onmouseenter="enter('6082005349029604247');" onmouseout="out('6082005349029604247');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156       sendWaitState(task);                                                                               </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 157 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160 }                                                                                                        </span></pre></td>
                            <td><pre><span class="-4185208522764792297" onmouseenter="enter('-4185208522764792297');" onmouseout="out('-4185208522764792297');" style="">   1 package com.arialyy.aria.core.command.normal;                                                            </span>
<span  style="">   2                                                                                                          </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">   3 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="5290109400157436023" onmouseenter="enter('5290109400157436023');" onmouseout="out('5290109400157436023');" style="">   4 import com.arialyy.aria.core.download.DownloadGroupTaskEntity;                                           </span>
<span class="8636089030381561336" onmouseenter="enter('8636089030381561336');" onmouseout="out('8636089030381561336');" style="">   5 import com.arialyy.aria.core.download.DownloadTaskEntity;                                                </span>
<span class="6904362612035804276" onmouseenter="enter('6904362612035804276');" onmouseout="out('6904362612035804276');" style="">   6 import com.arialyy.aria.core.download.wrapper.DGTEWrapper;                                               </span>
<span class="-6970023867987021516" onmouseenter="enter('-6970023867987021516');" onmouseout="out('-6970023867987021516');" style="">   7 import com.arialyy.aria.core.download.wrapper.DTEWrapper;                                                </span>
<span class="-4417152733335289341" onmouseenter="enter('-4417152733335289341');" onmouseout="out('-4417152733335289341');" style="">   8 import com.arialyy.aria.core.inf.AbsTask;                                                                </span>
<span class="4195608340199028072" onmouseenter="enter('4195608340199028072');" onmouseout="out('4195608340199028072');" style="">   9 import com.arialyy.aria.core.inf.AbsTaskEntity;                                                          </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  10 import com.arialyy.aria.core.inf.IEntity;                                                                </span>
<span class="6163330959373243747" onmouseenter="enter('6163330959373243747');" onmouseout="out('6163330959373243747');" style="">  11 import com.arialyy.aria.core.queue.DownloadGroupTaskQueue;                                               </span>
<span class="1325372506799583582" onmouseenter="enter('1325372506799583582');" onmouseout="out('1325372506799583582');" style="">  12 import com.arialyy.aria.core.queue.DownloadTaskQueue;                                                    </span>
<span class="-8259302571631178660" onmouseenter="enter('-8259302571631178660');" onmouseout="out('-8259302571631178660');" style="">  13 import com.arialyy.aria.core.queue.UploadTaskQueue;                                                      </span>
<span class="5529108429384186748" onmouseenter="enter('5529108429384186748');" onmouseout="out('5529108429384186748');" style="">  14 import com.arialyy.aria.core.upload.UploadTaskEntity;                                                    </span>
<span class="3697256534917243563" onmouseenter="enter('3697256534917243563');" onmouseout="out('3697256534917243563');" style="">  15 import com.arialyy.aria.core.upload.wrapper.UTEWrapper;                                                  </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  16 import com.arialyy.aria.orm.DbEntity;                                                                    </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="">  17 import com.arialyy.aria.util.ALog;                                                                       </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  18 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="-3921447581486569047" onmouseenter="enter('-3921447581486569047');" onmouseout="out('-3921447581486569047');" style="">  19 import com.arialyy.aria.util.NetUtils;                                                                   </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  21 import java.util.List;                                                                                   </span>
<span  style="">  22                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  23 /**                                                                                                      </span>
<span class="3256834120032901091" onmouseenter="enter('3256834120032901091');" onmouseout="out('3256834120032901091');" style="">  24  * Created by AriaL on 2017/6/13.                                                                        </span>
<span class="-1725900952073690056" onmouseenter="enter('-1725900952073690056');" onmouseout="out('-1725900952073690056');" style="">  25  * 恢复所有停止的任务                                                                                             </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style="">  26  * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                           </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style="">  27  * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                         </span>
<span class="3647244767730944879" onmouseenter="enter('3647244767730944879');" onmouseout="out('3647244767730944879');" style="">  28  * 3.如果队列中只有等待状态的任务，如果执行队列没有满，则会启动等待状态的任务，如果执行队列已经满了，则会将所有等待状态的任务加载到缓存队列中                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  29  */                                                                                                      </span>
<span class="-5145471632187895448" onmouseenter="enter('-5145471632187895448');" onmouseout="out('-5145471632187895448');" style="">  30 final class ResumeAllCmd&lt;T extends AbsTaskEntity&gt; extends AbsNormalCmd&lt;T&gt; {                              </span>
<span class="6798992044291624411" onmouseenter="enter('6798992044291624411');" onmouseout="out('6798992044291624411');" style="">  31   private List&lt;AbsTaskEntity&gt; mWaitList = new ArrayList&lt;&gt;();                                             </span>
<span  style="">  32                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  33   /**                                                                                                    </span>
<span class="8174408356842298787" onmouseenter="enter('8174408356842298787');" onmouseout="out('8174408356842298787');" style="">  34    * @param targetName 产生任务的对象名                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  35    */                                                                                                    </span>
<span class="889722537235794515" onmouseenter="enter('889722537235794515');" onmouseout="out('889722537235794515');" style="">  36   ResumeAllCmd(String targetName, T entity, int taskType) {                                              </span>
<span class="2762350648838201041" onmouseenter="enter('2762350648838201041');" onmouseout="out('2762350648838201041');" style="">  37     super(targetName, entity, taskType);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  38   }                                                                                                      </span>
<span  style="">  39                                                                                                          </span>
<span class="3557000923024440314" onmouseenter="enter('3557000923024440314');" onmouseout="out('3557000923024440314');" style="">  40   @Override public void executeCmd() {                                                                   </span>
<span class="-6906891541775948108" onmouseenter="enter('-6906891541775948108');" onmouseout="out('-6906891541775948108');" style="">  41     if (!NetUtils.isConnected(AriaManager.APP)) {                                                        </span>
<span class="3527840811195708659" onmouseenter="enter('3527840811195708659');" onmouseout="out('3527840811195708659');" style="">  42       ALog.w(TAG, &quot;恢复任务失败，网络未连接&quot;);                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  43       return;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  44     }                                                                                                    </span>
<span class="1522143620344999653" onmouseenter="enter('1522143620344999653');" onmouseout="out('1522143620344999653');" style="">  45     if (isDownloadCmd) {                                                                                 </span>
<span class="-6890796901789246179" onmouseenter="enter('-6890796901789246179');" onmouseout="out('-6890796901789246179');" style="">  46       resumeTask(findTaskData(1));                                                                       </span>
<span class="-8762133209280134260" onmouseenter="enter('-8762133209280134260');" onmouseout="out('-8762133209280134260');" style="">  47       resumeTask(findTaskData(2));                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  48     } else {                                                                                             </span>
<span class="380554388410105805" onmouseenter="enter('380554388410105805');" onmouseout="out('380554388410105805');" style="">  49       resumeTask(findTaskData(3));                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  50     }                                                                                                    </span>
<span class="-1126421468463401792" onmouseenter="enter('-1126421468463401792');" onmouseout="out('-1126421468463401792');" style="">  51     resumeWaitTask();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  52   }                                                                                                      </span>
<span  style="">  53                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  54   /**                                                                                                    </span>
<span class="4566010906397738885" onmouseenter="enter('4566010906397738885');" onmouseout="out('4566010906397738885');" style="">  55    * 查找数据库中的所有任务数据                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  56    *                                                                                                     </span>
<span class="-4796337639611018481" onmouseenter="enter('-4796337639611018481');" onmouseout="out('-4796337639611018481');" style="">  57    * @param type {@code 1}单任务下载任务；{@code 2}任务组下载任务；{@code 3} 单任务上传任务                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  58    */                                                                                                    </span>
<span class="1340178163970591689" onmouseenter="enter('1340178163970591689');" onmouseout="out('1340178163970591689');" style="">  59   private List&lt;AbsTaskEntity&gt; findTaskData(int type) {                                                   </span>
<span class="-4948925559833229510" onmouseenter="enter('-4948925559833229510');" onmouseout="out('-4948925559833229510');" style="">  60     List&lt;AbsTaskEntity&gt; tempList = new ArrayList&lt;&gt;();                                                    </span>
<span class="-7978942224896054195" onmouseenter="enter('-7978942224896054195');" onmouseout="out('-7978942224896054195');" style="">  61     if (type == 1) {                                                                                     </span>
<span class="8139188931880290130" onmouseenter="enter('8139188931880290130');" onmouseout="out('8139188931880290130');" style="">  62       List&lt;DTEWrapper&gt; wrappers = DbEntity.findRelationData(DTEWrapper.class,                            </span>
<span class="-145224649022788331" onmouseenter="enter('-145224649022788331');" onmouseout="out('-145224649022788331');" style="">  63           &quot;DownloadTaskEntity.isGroupTask=? and DownloadTaskEntity.state!=?&quot;, &quot;false&quot;, &quot;1&quot;);             </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  64       if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                     </span>
<span class="3057039082211951420" onmouseenter="enter('3057039082211951420');" onmouseout="out('3057039082211951420');" style="">  65         for (DTEWrapper w : wrappers) {                                                                  </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  66           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68       }                                                                                                  </span>
<span class="8913765828433928115" onmouseenter="enter('8913765828433928115');" onmouseout="out('8913765828433928115');" style="">  69     } else if (type == 2) {                                                                              </span>
<span class="7331687587543988067" onmouseenter="enter('7331687587543988067');" onmouseout="out('7331687587543988067');" style="">  70       List&lt;DGTEWrapper&gt; wrappers =                                                                       </span>
<span class="1958087491453917500" onmouseenter="enter('1958087491453917500');" onmouseout="out('1958087491453917500');" style="">  71           DbEntity.findRelationData(DGTEWrapper.class, &quot;DownloadGroupTaskEntity.state!=?&quot;, &quot;1&quot;);         </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  72       if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                     </span>
<span class="3408371293368738052" onmouseenter="enter('3408371293368738052');" onmouseout="out('3408371293368738052');" style="">  73         for (DGTEWrapper w : wrappers) {                                                                 </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  74           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76       }                                                                                                  </span>
<span class="1871493888726698877" onmouseenter="enter('1871493888726698877');" onmouseout="out('1871493888726698877');" style="">  77     } else if (type == 3) {                                                                              </span>
<span class="1799852467382085535" onmouseenter="enter('1799852467382085535');" onmouseout="out('1799852467382085535');" style="">  78       List&lt;UTEWrapper&gt; wrappers =                                                                        </span>
<span class="1961233800438776770" onmouseenter="enter('1961233800438776770');" onmouseout="out('1961233800438776770');" style="">  79           DbEntity.findRelationData(UTEWrapper.class, &quot;UploadTaskEntity.state!=?&quot;, &quot;1&quot;);                 </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  80       if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                     </span>
<span class="-5900313342441763645" onmouseenter="enter('-5900313342441763645');" onmouseout="out('-5900313342441763645');" style="">  81         for (UTEWrapper w : wrappers) {                                                                  </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  82           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85     }                                                                                                    </span>
<span class="4353492093014799504" onmouseenter="enter('4353492093014799504');" onmouseout="out('4353492093014799504');" style="">  86     return tempList;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87   }                                                                                                      </span>
<span  style="">  88                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  89   /**                                                                                                    </span>
<span class="5101699313009411241" onmouseenter="enter('5101699313009411241');" onmouseout="out('5101699313009411241');" style="">  90    * 恢复任务                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  91    */                                                                                                    </span>
<span class="3638171901598519953" onmouseenter="enter('3638171901598519953');" onmouseout="out('3638171901598519953');" style="">  92   private void resumeTask(List&lt;AbsTaskEntity&gt; taskList) {                                                </span>
<span class="-7337401294989890148" onmouseenter="enter('-7337401294989890148');" onmouseout="out('-7337401294989890148');" style="">  93     if (taskList != null &amp;&amp; !taskList.isEmpty()) {                                                       </span>
<span class="3612314535203445506" onmouseenter="enter('3612314535203445506');" onmouseout="out('3612314535203445506');" style="">  94       for (AbsTaskEntity te : taskList) {                                                                </span>
<span class="651191964208080036" onmouseenter="enter('651191964208080036');" onmouseout="out('651191964208080036');" style="">  95         if (te == null || te.getEntity() == null) continue;                                              </span>
<span class="-6705546539852962611" onmouseenter="enter('-6705546539852962611');" onmouseout="out('-6705546539852962611');" style="">  96         int state = te.getState();                                                                       </span>
<span class="2104673490985042132" onmouseenter="enter('2104673490985042132');" onmouseout="out('2104673490985042132');" style="">  97         if (state == IEntity.STATE_STOP || state == IEntity.STATE_OTHER) {                               </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style="">  98           resumeEntity(te);                                                                              </span>
<span class="-884893285908090526" onmouseenter="enter('-884893285908090526');" onmouseout="out('-884893285908090526');" style="">  99         } else if (state == IEntity.STATE_WAIT) {                                                        </span>
<span class="-7302123928453854513" onmouseenter="enter('-7302123928453854513');" onmouseout="out('-7302123928453854513');" style=""> 100           mWaitList.add(te);                                                                             </span>
<span class="-4837473431815791771" onmouseenter="enter('-4837473431815791771');" onmouseout="out('-4837473431815791771');" style=""> 101         } else if (state == IEntity.STATE_RUNNING) {                                                     </span>
<span class="-8110574645702777732" onmouseenter="enter('-8110574645702777732');" onmouseout="out('-8110574645702777732');" style=""> 102           if (!mQueue.taskIsRunning(te.getEntity().getKey())) {                                          </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style=""> 103             resumeEntity(te);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104           }                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108   }                                                                                                      </span>
<span  style=""> 109                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 110   /**                                                                                                    </span>
<span class="-5145430413242635014" onmouseenter="enter('-5145430413242635014');" onmouseout="out('-5145430413242635014');" style=""> 111    * 处理等待状态的任务                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 112    */                                                                                                    </span>
<span class="-1625414326575091195" onmouseenter="enter('-1625414326575091195');" onmouseout="out('-1625414326575091195');" style=""> 113   private void resumeWaitTask() {                                                                        </span>
<span class="-189509060053149369" onmouseenter="enter('-189509060053149369');" onmouseout="out('-189509060053149369');" style=""> 114     int maxTaskNum = mQueue.getMaxTaskNum();                                                             </span>
<span class="6227704391685544677" onmouseenter="enter('6227704391685544677');" onmouseout="out('6227704391685544677');" style=""> 115     if (mWaitList == null || mWaitList.isEmpty()) return;                                                </span>
<span class="1864561866722219025" onmouseenter="enter('1864561866722219025');" onmouseout="out('1864561866722219025');" style=""> 116     for (AbsTaskEntity te : mWaitList) {                                                                 </span>
<span class="-2028145384049517138" onmouseenter="enter('-2028145384049517138');" onmouseout="out('-2028145384049517138');" style=""> 117       if (mQueue.getCurrentExePoolNum() &lt; maxTaskNum) {                                                  </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 118         startTask(createTask(te));                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 119       } else {                                                                                           </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style=""> 120         createTask(te);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123   }                                                                                                      </span>
<span  style=""> 124                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 125   /**                                                                                                    </span>
<span class="1558403980806506756" onmouseenter="enter('1558403980806506756');" onmouseout="out('1558403980806506756');" style=""> 126    * 恢复实体任务                                                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 127    *                                                                                                     </span>
<span class="-8639345982942738758" onmouseenter="enter('-8639345982942738758');" onmouseout="out('-8639345982942738758');" style=""> 128    * @param te 任务实体                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 129    */                                                                                                    </span>
<span class="-1988769257152881971" onmouseenter="enter('-1988769257152881971');" onmouseout="out('-1988769257152881971');" style=""> 130   private void resumeEntity(AbsTaskEntity te) {                                                          </span>
<span class="-2998921525610830551" onmouseenter="enter('-2998921525610830551');" onmouseout="out('-2998921525610830551');" style=""> 131     if (te instanceof DownloadTaskEntity) {                                                              </span>
<span class="-1254033370540279069" onmouseenter="enter('-1254033370540279069');" onmouseout="out('-1254033370540279069');" style=""> 132       if (te.getRequestType() == AbsTaskEntity.D_FTP || te.getRequestType() == AbsTaskEntity.U_FTP) {    </span>
<span class="6272043103950913871" onmouseenter="enter('6272043103950913871');" onmouseout="out('6272043103950913871');" style=""> 133         te.setUrlEntity(CommonUtil.getFtpUrlInfo(te.getEntity().getKey()));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134       }                                                                                                  </span>
<span class="4181603964882924928" onmouseenter="enter('4181603964882924928');" onmouseout="out('4181603964882924928');" style=""> 135       mQueue = DownloadTaskQueue.getInstance();                                                          </span>
<span class="7410298183112777491" onmouseenter="enter('7410298183112777491');" onmouseout="out('7410298183112777491');" style=""> 136     } else if (te instanceof UploadTaskEntity) {                                                         </span>
<span class="-4238222144911108592" onmouseenter="enter('-4238222144911108592');" onmouseout="out('-4238222144911108592');" style=""> 137       mQueue = UploadTaskQueue.getInstance();                                                            </span>
<span class="1537663648944988461" onmouseenter="enter('1537663648944988461');" onmouseout="out('1537663648944988461');" style=""> 138     } else if (te instanceof DownloadGroupTaskEntity) {                                                  </span>
<span class="4162299188526624835" onmouseenter="enter('4162299188526624835');" onmouseout="out('4162299188526624835');" style=""> 139       mQueue = DownloadGroupTaskQueue.getInstance();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140     }                                                                                                    </span>
<span class="2957486427642302174" onmouseenter="enter('2957486427642302174');" onmouseout="out('2957486427642302174');" style=""> 141     int exeNum = mQueue.getCurrentExePoolNum();                                                          </span>
<span class="-8608281800626499750" onmouseenter="enter('-8608281800626499750');" onmouseout="out('-8608281800626499750');" style=""> 142     if (exeNum == 0 || exeNum &lt; mQueue.getMaxTaskNum()) {                                                </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 143       startTask(createTask(te));                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 144     } else {                                                                                             </span>
<span class="3190407925113971357" onmouseenter="enter('3190407925113971357');" onmouseout="out('3190407925113971357');" style=""> 145       te.getEntity().setState(IEntity.STATE_WAIT);                                                       </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 146 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 147       createTask(te);                                                                                    </span>
<span class="-7052049638166885619" onmouseenter="enter('-7052049638166885619');" onmouseout="out('-7052049638166885619');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 148       sendWaitState();                                                                                   </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 149 ||||||| BASE                                                                                             </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150       createTask(te);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 152 =======                                                                                                  </span>
<span class="-4758218181751503086" onmouseenter="enter('-4758218181751503086');" onmouseout="out('-4758218181751503086');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 153       AbsTask task = createTask(te);                                                                     </span>
<span class="6082005349029604247" onmouseenter="enter('6082005349029604247');" onmouseout="out('6082005349029604247');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154       sendWaitState(task);                                                                               </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 155 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158 }                                                                                                        </span>

</pre></td>
                            <td><pre><span class="-4185208522764792297" onmouseenter="enter('-4185208522764792297');" onmouseout="out('-4185208522764792297');" style="">   1 package com.arialyy.aria.core.command.normal;                                                            </span>
<span  style="">   2                                                                                                          </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">   3 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="5290109400157436023" onmouseenter="enter('5290109400157436023');" onmouseout="out('5290109400157436023');" style="">   4 import com.arialyy.aria.core.download.DownloadGroupTaskEntity;                                           </span>
<span class="8636089030381561336" onmouseenter="enter('8636089030381561336');" onmouseout="out('8636089030381561336');" style="">   5 import com.arialyy.aria.core.download.DownloadTaskEntity;                                                </span>
<span class="6904362612035804276" onmouseenter="enter('6904362612035804276');" onmouseout="out('6904362612035804276');" style="">   6 import com.arialyy.aria.core.download.wrapper.DGTEWrapper;                                               </span>
<span class="-6970023867987021516" onmouseenter="enter('-6970023867987021516');" onmouseout="out('-6970023867987021516');" style="">   7 import com.arialyy.aria.core.download.wrapper.DTEWrapper;                                                </span>
<span class="-4417152733335289341" onmouseenter="enter('-4417152733335289341');" onmouseout="out('-4417152733335289341');" style="">   8 import com.arialyy.aria.core.inf.AbsTask;                                                                </span>
<span class="4195608340199028072" onmouseenter="enter('4195608340199028072');" onmouseout="out('4195608340199028072');" style="">   9 import com.arialyy.aria.core.inf.AbsTaskEntity;                                                          </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  10 import com.arialyy.aria.core.inf.IEntity;                                                                </span>
<span class="6163330959373243747" onmouseenter="enter('6163330959373243747');" onmouseout="out('6163330959373243747');" style="">  11 import com.arialyy.aria.core.queue.DownloadGroupTaskQueue;                                               </span>
<span class="1325372506799583582" onmouseenter="enter('1325372506799583582');" onmouseout="out('1325372506799583582');" style="">  12 import com.arialyy.aria.core.queue.DownloadTaskQueue;                                                    </span>
<span class="-8259302571631178660" onmouseenter="enter('-8259302571631178660');" onmouseout="out('-8259302571631178660');" style="">  13 import com.arialyy.aria.core.queue.UploadTaskQueue;                                                      </span>
<span class="5529108429384186748" onmouseenter="enter('5529108429384186748');" onmouseout="out('5529108429384186748');" style="">  14 import com.arialyy.aria.core.upload.UploadTaskEntity;                                                    </span>
<span class="3697256534917243563" onmouseenter="enter('3697256534917243563');" onmouseout="out('3697256534917243563');" style="">  15 import com.arialyy.aria.core.upload.wrapper.UTEWrapper;                                                  </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  16 import com.arialyy.aria.orm.DbEntity;                                                                    </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="">  17 import com.arialyy.aria.util.ALog;                                                                       </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  18 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="-3921447581486569047" onmouseenter="enter('-3921447581486569047');" onmouseout="out('-3921447581486569047');" style="">  19 import com.arialyy.aria.util.NetUtils;                                                                   </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  21 import java.util.List;                                                                                   </span>
<span  style="">  22                                                                                                          </span>
<span  style="">  23                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  24 /**                                                                                                      </span>
<span class="3256834120032901091" onmouseenter="enter('3256834120032901091');" onmouseout="out('3256834120032901091');" style="">  25  * Created by AriaL on 2017/6/13.                                                                        </span>
<span class="-1725900952073690056" onmouseenter="enter('-1725900952073690056');" onmouseout="out('-1725900952073690056');" style="">  26  * 恢复所有停止的任务                                                                                             </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style="">  27  * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                           </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style="">  28  * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                         </span>
<span class="3647244767730944879" onmouseenter="enter('3647244767730944879');" onmouseout="out('3647244767730944879');" style="">  29  * 3.如果队列中只有等待状态的任务，如果执行队列没有满，则会启动等待状态的任务，如果执行队列已经满了，则会将所有等待状态的任务加载到缓存队列中                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  30  */                                                                                                      </span>
<span class="-5145471632187895448" onmouseenter="enter('-5145471632187895448');" onmouseout="out('-5145471632187895448');" style="">  31 final class ResumeAllCmd&lt;T extends AbsTaskEntity&gt; extends AbsNormalCmd&lt;T&gt; {                              </span>
<span class="6798992044291624411" onmouseenter="enter('6798992044291624411');" onmouseout="out('6798992044291624411');" style="">  32   private List&lt;AbsTaskEntity&gt; mWaitList = new ArrayList&lt;&gt;();                                             </span>
<span  style="">  33                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  34   /**                                                                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  35    *                                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  36    *                                                                                                     </span>
<span class="-1687639579474433940" onmouseenter="enter('-1687639579474433940');" onmouseout="out('-1687639579474433940');" style="">  37    * @param targetName                                                                                   </span>
<span class="967658339238120917" onmouseenter="enter('967658339238120917');" onmouseout="out('967658339238120917');" style="">  38    * 		产生任务的对象名                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  39    */                                                                                                    </span>
<span class="889722537235794515" onmouseenter="enter('889722537235794515');" onmouseout="out('889722537235794515');" style="">  40   ResumeAllCmd(String targetName, T entity, int taskType) {                                              </span>
<span class="2762350648838201041" onmouseenter="enter('2762350648838201041');" onmouseout="out('2762350648838201041');" style="">  41     super(targetName, entity, taskType);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  42   }                                                                                                      </span>
<span  style="">  43                                                                                                          </span>
<span class="3557000923024440314" onmouseenter="enter('3557000923024440314');" onmouseout="out('3557000923024440314');" style="">  44   @Override public void executeCmd() {                                                                   </span>
<span class="-6906891541775948108" onmouseenter="enter('-6906891541775948108');" onmouseout="out('-6906891541775948108');" style="">  45     if (!NetUtils.isConnected(AriaManager.APP)) {                                                        </span>
<span class="3527840811195708659" onmouseenter="enter('3527840811195708659');" onmouseout="out('3527840811195708659');" style="">  46       ALog.w(TAG, &quot;恢复任务失败，网络未连接&quot;);                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  47       return;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  48     }                                                                                                    </span>
<span class="1522143620344999653" onmouseenter="enter('1522143620344999653');" onmouseout="out('1522143620344999653');" style="">  49     if (isDownloadCmd) {                                                                                 </span>
<span class="-6890796901789246179" onmouseenter="enter('-6890796901789246179');" onmouseout="out('-6890796901789246179');" style="">  50       resumeTask(findTaskData(1));                                                                       </span>
<span class="-8762133209280134260" onmouseenter="enter('-8762133209280134260');" onmouseout="out('-8762133209280134260');" style="">  51       resumeTask(findTaskData(2));                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  52     } else {                                                                                             </span>
<span class="380554388410105805" onmouseenter="enter('380554388410105805');" onmouseout="out('380554388410105805');" style="">  53       resumeTask(findTaskData(3));                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  54     }                                                                                                    </span>
<span class="-1126421468463401792" onmouseenter="enter('-1126421468463401792');" onmouseout="out('-1126421468463401792');" style="">  55     resumeWaitTask();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  56   }                                                                                                      </span>
<span  style="">  57                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  58   /**                                                                                                    </span>
<span class="4566010906397738885" onmouseenter="enter('4566010906397738885');" onmouseout="out('4566010906397738885');" style="">  59    * 查找数据库中的所有任务数据                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  60    *                                                                                                     </span>
<span class="-4796337639611018481" onmouseenter="enter('-4796337639611018481');" onmouseout="out('-4796337639611018481');" style="">  61    * @param type {@code 1}单任务下载任务；{@code 2}任务组下载任务；{@code 3} 单任务上传任务                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  62    */                                                                                                    </span>
<span class="1340178163970591689" onmouseenter="enter('1340178163970591689');" onmouseout="out('1340178163970591689');" style="">  63   private List&lt;AbsTaskEntity&gt; findTaskData(int type) {                                                   </span>
<span class="-4948925559833229510" onmouseenter="enter('-4948925559833229510');" onmouseout="out('-4948925559833229510');" style="">  64     List&lt;AbsTaskEntity&gt; tempList = new ArrayList&lt;&gt;();                                                    </span>
<span class="-7978942224896054195" onmouseenter="enter('-7978942224896054195');" onmouseout="out('-7978942224896054195');" style="">  65     if (type == 1) {                                                                                     </span>
<span class="-6070051010293188777" onmouseenter="enter('-6070051010293188777');" onmouseout="out('-6070051010293188777');" style=""><abbr title="  66       List&lt;DTEWrapper&gt; wrappers = DbEntity.findRelationData(DTEWrapper.class, &quot;DownloadTaskEntity.isGroupTask=? and DownloadTaskEntity.state!=?&quot;, &quot;false&quot;, &quot;1&quot;);">  66       List&lt;DTEWrapper&gt; wrappers = DbEntity.findRelationData(DTEWrapper.class, &quot;DownloadTaskEntity.isGroup🔵</abbr></span>
<span class="3898802135448370427" onmouseenter="enter('3898802135448370427');" onmouseout="out('3898802135448370427');" style="">  67       if ((wrappers != null) &amp;&amp; (!wrappers.isEmpty())) {                                                 </span>
<span class="3057039082211951420" onmouseenter="enter('3057039082211951420');" onmouseout="out('3057039082211951420');" style="">  68         for (DTEWrapper w : wrappers) {                                                                  </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  69           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  70         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71       }                                                                                                  </span>
<span class="8913765828433928115" onmouseenter="enter('8913765828433928115');" onmouseout="out('8913765828433928115');" style="">  72     } else if (type == 2) {                                                                              </span>
<span class="-1404890364278620327" onmouseenter="enter('-1404890364278620327');" onmouseout="out('-1404890364278620327');" style=""><abbr title="  73       List&lt;DGTEWrapper&gt; wrappers = DbEntity.findRelationData(DGTEWrapper.class, &quot;DownloadGroupTaskEntity.state!=?&quot;, &quot;1&quot;);">  73       List&lt;DGTEWrapper&gt; wrappers = DbEntity.findRelationData(DGTEWrapper.class, &quot;DownloadGroupTaskEntity.🔵</abbr></span>
<span class="3898802135448370427" onmouseenter="enter('3898802135448370427');" onmouseout="out('3898802135448370427');" style="">  74       if ((wrappers != null) &amp;&amp; (!wrappers.isEmpty())) {                                                 </span>
<span class="3408371293368738052" onmouseenter="enter('3408371293368738052');" onmouseout="out('3408371293368738052');" style="">  75         for (DGTEWrapper w : wrappers) {                                                                 </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  76           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  77         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78       }                                                                                                  </span>
<span class="1871493888726698877" onmouseenter="enter('1871493888726698877');" onmouseout="out('1871493888726698877');" style="">  79     } else if (type == 3) {                                                                              </span>
<span class="-8408659699447223676" onmouseenter="enter('-8408659699447223676');" onmouseout="out('-8408659699447223676');" style=""><abbr title="  80       List&lt;UTEWrapper&gt; wrappers = DbEntity.findRelationData(UTEWrapper.class, &quot;UploadTaskEntity.state!=?&quot;, &quot;1&quot;);">  80       List&lt;UTEWrapper&gt; wrappers = DbEntity.findRelationData(UTEWrapper.class, &quot;UploadTaskEntity.state!=?&quot;🔵</abbr></span>
<span class="3898802135448370427" onmouseenter="enter('3898802135448370427');" onmouseout="out('3898802135448370427');" style="">  81       if ((wrappers != null) &amp;&amp; (!wrappers.isEmpty())) {                                                 </span>
<span class="-5900313342441763645" onmouseenter="enter('-5900313342441763645');" onmouseout="out('-5900313342441763645');" style="">  82         for (UTEWrapper w : wrappers) {                                                                  </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  83           tempList.add(w.taskEntity);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86     }                                                                                                    </span>
<span class="4353492093014799504" onmouseenter="enter('4353492093014799504');" onmouseout="out('4353492093014799504');" style="">  87     return tempList;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88   }                                                                                                      </span>
<span  style="">  89                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  90   /**                                                                                                    </span>
<span class="5101699313009411241" onmouseenter="enter('5101699313009411241');" onmouseout="out('5101699313009411241');" style="">  91    * 恢复任务                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  92    */                                                                                                    </span>
<span class="3638171901598519953" onmouseenter="enter('3638171901598519953');" onmouseout="out('3638171901598519953');" style="">  93   private void resumeTask(List&lt;AbsTaskEntity&gt; taskList) {                                                </span>
<span class="-7337401294989890148" onmouseenter="enter('-7337401294989890148');" onmouseout="out('-7337401294989890148');" style="">  94     if (taskList != null &amp;&amp; !taskList.isEmpty()) {                                                       </span>
<span class="3612314535203445506" onmouseenter="enter('3612314535203445506');" onmouseout="out('3612314535203445506');" style="">  95       for (AbsTaskEntity te : taskList) {                                                                </span>
<span class="651191964208080036" onmouseenter="enter('651191964208080036');" onmouseout="out('651191964208080036');" style="">  96         if (te == null || te.getEntity() == null) continue;                                              </span>
<span class="-6705546539852962611" onmouseenter="enter('-6705546539852962611');" onmouseout="out('-6705546539852962611');" style="">  97         int state = te.getState();                                                                       </span>
<span class="2104673490985042132" onmouseenter="enter('2104673490985042132');" onmouseout="out('2104673490985042132');" style="">  98         if (state == IEntity.STATE_STOP || state == IEntity.STATE_OTHER) {                               </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style="">  99           resumeEntity(te);                                                                              </span>
<span class="-884893285908090526" onmouseenter="enter('-884893285908090526');" onmouseout="out('-884893285908090526');" style=""> 100         } else if (state == IEntity.STATE_WAIT) {                                                        </span>
<span class="-7302123928453854513" onmouseenter="enter('-7302123928453854513');" onmouseout="out('-7302123928453854513');" style=""> 101           mWaitList.add(te);                                                                             </span>
<span class="-4837473431815791771" onmouseenter="enter('-4837473431815791771');" onmouseout="out('-4837473431815791771');" style=""> 102         } else if (state == IEntity.STATE_RUNNING) {                                                     </span>
<span class="-8110574645702777732" onmouseenter="enter('-8110574645702777732');" onmouseout="out('-8110574645702777732');" style=""> 103           if (!mQueue.taskIsRunning(te.getEntity().getKey())) {                                          </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style=""> 104             resumeEntity(te);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105           }                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109   }                                                                                                      </span>
<span  style=""> 110                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 111   /**                                                                                                    </span>
<span class="-5145430413242635014" onmouseenter="enter('-5145430413242635014');" onmouseout="out('-5145430413242635014');" style=""> 112    * 处理等待状态的任务                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 113    */                                                                                                    </span>
<span class="-1625414326575091195" onmouseenter="enter('-1625414326575091195');" onmouseout="out('-1625414326575091195');" style=""> 114   private void resumeWaitTask() {                                                                        </span>
<span class="-189509060053149369" onmouseenter="enter('-189509060053149369');" onmouseout="out('-189509060053149369');" style=""> 115     int maxTaskNum = mQueue.getMaxTaskNum();                                                             </span>
<span class="6227704391685544677" onmouseenter="enter('6227704391685544677');" onmouseout="out('6227704391685544677');" style=""> 116     if (mWaitList == null || mWaitList.isEmpty()) return;                                                </span>
<span class="1864561866722219025" onmouseenter="enter('1864561866722219025');" onmouseout="out('1864561866722219025');" style=""> 117     for (AbsTaskEntity te : mWaitList) {                                                                 </span>
<span class="-2028145384049517138" onmouseenter="enter('-2028145384049517138');" onmouseout="out('-2028145384049517138');" style=""> 118       if (mQueue.getCurrentExePoolNum() &lt; maxTaskNum) {                                                  </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 119         startTask(createTask(te));                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 120       } else {                                                                                           </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style=""> 121         createTask(te);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124   }                                                                                                      </span>
<span  style=""> 125                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 126   /**                                                                                                    </span>
<span class="1558403980806506756" onmouseenter="enter('1558403980806506756');" onmouseout="out('1558403980806506756');" style=""> 127    * 恢复实体任务                                                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 128    *                                                                                                     </span>
<span class="-8639345982942738758" onmouseenter="enter('-8639345982942738758');" onmouseout="out('-8639345982942738758');" style=""> 129    * @param te 任务实体                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 130    */                                                                                                    </span>
<span class="-1988769257152881971" onmouseenter="enter('-1988769257152881971');" onmouseout="out('-1988769257152881971');" style=""> 131   private void resumeEntity(AbsTaskEntity te) {                                                          </span>
<span class="-2998921525610830551" onmouseenter="enter('-2998921525610830551');" onmouseout="out('-2998921525610830551');" style=""> 132     if (te instanceof DownloadTaskEntity) {                                                              </span>
<span class="1534250297580527535" onmouseenter="enter('1534250297580527535');" onmouseout="out('1534250297580527535');" style=""> 133       if ((te.getRequestType() == AbsTaskEntity.D_FTP) || (te.getRequestType() == AbsTaskEntity.U_FTP)) {</span>
<span class="6272043103950913871" onmouseenter="enter('6272043103950913871');" onmouseout="out('6272043103950913871');" style=""> 134         te.setUrlEntity(CommonUtil.getFtpUrlInfo(te.getEntity().getKey()));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135       }                                                                                                  </span>
<span class="4181603964882924928" onmouseenter="enter('4181603964882924928');" onmouseout="out('4181603964882924928');" style=""> 136       mQueue = DownloadTaskQueue.getInstance();                                                          </span>
<span class="7410298183112777491" onmouseenter="enter('7410298183112777491');" onmouseout="out('7410298183112777491');" style=""> 137     } else if (te instanceof UploadTaskEntity) {                                                         </span>
<span class="-4238222144911108592" onmouseenter="enter('-4238222144911108592');" onmouseout="out('-4238222144911108592');" style=""> 138       mQueue = UploadTaskQueue.getInstance();                                                            </span>
<span class="1537663648944988461" onmouseenter="enter('1537663648944988461');" onmouseout="out('1537663648944988461');" style=""> 139     } else if (te instanceof DownloadGroupTaskEntity) {                                                  </span>
<span class="4162299188526624835" onmouseenter="enter('4162299188526624835');" onmouseout="out('4162299188526624835');" style=""> 140       mQueue = DownloadGroupTaskQueue.getInstance();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141     }                                                                                                    </span>
<span class="2957486427642302174" onmouseenter="enter('2957486427642302174');" onmouseout="out('2957486427642302174');" style=""> 142     int exeNum = mQueue.getCurrentExePoolNum();                                                          </span>
<span class="-1009290187514006809" onmouseenter="enter('-1009290187514006809');" onmouseout="out('-1009290187514006809');" style=""> 143     if ((exeNum == 0) || (exeNum &lt; mQueue.getMaxTaskNum())) {                                            </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 144       startTask(createTask(te));                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 145     } else {                                                                                             </span>
<span class="3190407925113971357" onmouseenter="enter('3190407925113971357');" onmouseout="out('3190407925113971357');" style=""> 146       te.getEntity().setState(IEntity.STATE_WAIT);                                                       </span>
<span  style=""> 147                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 148 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 149       createTask(te);                                                                                    </span>
<span class="-7052049638166885619" onmouseenter="enter('-7052049638166885619');" onmouseout="out('-7052049638166885619');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 150       sendWaitState();                                                                                   </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 151 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 152 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 152 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 153 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154                                                                                                          </span>
<span class="-4758218181751503086" onmouseenter="enter('-4758218181751503086');" onmouseout="out('-4758218181751503086');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155       AbsTask task = createTask(te);                                                                     </span>
<span class="6082005349029604247" onmouseenter="enter('6082005349029604247');" onmouseout="out('6082005349029604247');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156       sendWaitState(task);                                                                               </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 157 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style=""> 158                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161 }                                                                                                        </span></pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-4185208522764792297" onmouseenter="enter('-4185208522764792297');" onmouseout="out('-4185208522764792297');" style="">   1  package com.arialyy.aria.core.command.normal;                                                                     </span>
<span  style="">   2                                                                                                                    </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">   3  import com.arialyy.aria.core.AriaManager;                                                                         </span>
<span class="5290109400157436023" onmouseenter="enter('5290109400157436023');" onmouseout="out('5290109400157436023');" style="">   4  import com.arialyy.aria.core.download.DownloadGroupTaskEntity;                                                    </span>
<span class="8636089030381561336" onmouseenter="enter('8636089030381561336');" onmouseout="out('8636089030381561336');" style="">   5  import com.arialyy.aria.core.download.DownloadTaskEntity;                                                         </span>
<span class="6904362612035804276" onmouseenter="enter('6904362612035804276');" onmouseout="out('6904362612035804276');" style="">   6  import com.arialyy.aria.core.download.wrapper.DGTEWrapper;                                                        </span>
<span class="-6970023867987021516" onmouseenter="enter('-6970023867987021516');" onmouseout="out('-6970023867987021516');" style="">   7  import com.arialyy.aria.core.download.wrapper.DTEWrapper;                                                         </span>

<span class="4195608340199028072" onmouseenter="enter('4195608340199028072');" onmouseout="out('4195608340199028072');" style="">   8  import com.arialyy.aria.core.inf.AbsTaskEntity;                                                                   </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">   9  import com.arialyy.aria.core.inf.IEntity;                                                                         </span>
<span class="6163330959373243747" onmouseenter="enter('6163330959373243747');" onmouseout="out('6163330959373243747');" style="">  10  import com.arialyy.aria.core.queue.DownloadGroupTaskQueue;                                                        </span>
<span class="1325372506799583582" onmouseenter="enter('1325372506799583582');" onmouseout="out('1325372506799583582');" style="">  11  import com.arialyy.aria.core.queue.DownloadTaskQueue;                                                             </span>
<span class="-8259302571631178660" onmouseenter="enter('-8259302571631178660');" onmouseout="out('-8259302571631178660');" style="">  12  import com.arialyy.aria.core.queue.UploadTaskQueue;                                                               </span>
<span class="5529108429384186748" onmouseenter="enter('5529108429384186748');" onmouseout="out('5529108429384186748');" style="">  13  import com.arialyy.aria.core.upload.UploadTaskEntity;                                                             </span>
<span class="3697256534917243563" onmouseenter="enter('3697256534917243563');" onmouseout="out('3697256534917243563');" style="">  14  import com.arialyy.aria.core.upload.wrapper.UTEWrapper;                                                           </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  15  import com.arialyy.aria.orm.DbEntity;                                                                             </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="">  16  import com.arialyy.aria.util.ALog;                                                                                </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  17  import com.arialyy.aria.util.CommonUtil;                                                                          </span>
<span class="-3921447581486569047" onmouseenter="enter('-3921447581486569047');" onmouseout="out('-3921447581486569047');" style="">  18  import com.arialyy.aria.util.NetUtils;                                                                            </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  19  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  20  import java.util.List;                                                                                            </span>
<span  style="">  21                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  22  /**                                                                                                               </span>
<span class="3256834120032901091" onmouseenter="enter('3256834120032901091');" onmouseout="out('3256834120032901091');" style="">  23   * Created by AriaL on 2017/6/13.                                                                                 </span>
<span class="-1725900952073690056" onmouseenter="enter('-1725900952073690056');" onmouseout="out('-1725900952073690056');" style="">  24   * 恢复所有停止的任务                                                                                                      </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style="">  25   * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                                    </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style="">  26   * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                                  </span>
<span class="3647244767730944879" onmouseenter="enter('3647244767730944879');" onmouseout="out('3647244767730944879');" style="">  27   * 3.如果队列中只有等待状态的任务，如果执行队列没有满，则会启动等待状态的任务，如果执行队列已经满了，则会将所有等待状态的任务加载到缓存队列中                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  28   */                                                                                                               </span>
<span class="-5145471632187895448" onmouseenter="enter('-5145471632187895448');" onmouseout="out('-5145471632187895448');" style="">  29  final class ResumeAllCmd&lt;T extends AbsTaskEntity&gt; extends AbsNormalCmd&lt;T&gt; {                                       </span>
<span class="6798992044291624411" onmouseenter="enter('6798992044291624411');" onmouseout="out('6798992044291624411');" style="">  30    private List&lt;AbsTaskEntity&gt; mWaitList = new ArrayList&lt;&gt;();                                                      </span>
<span  style="">  31                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  32    /**                                                                                                             </span>
<span class="8174408356842298787" onmouseenter="enter('8174408356842298787');" onmouseout="out('8174408356842298787');" style="">  33     * @param targetName 产生任务的对象名                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  34     */                                                                                                             </span>
<span class="889722537235794515" onmouseenter="enter('889722537235794515');" onmouseout="out('889722537235794515');" style="">  35    ResumeAllCmd(String targetName, T entity, int taskType) {                                                       </span>
<span class="2762350648838201041" onmouseenter="enter('2762350648838201041');" onmouseout="out('2762350648838201041');" style="">  36      super(targetName, entity, taskType);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  37    }                                                                                                               </span>
<span  style="">  38                                                                                                                    </span>
<span class="3557000923024440314" onmouseenter="enter('3557000923024440314');" onmouseout="out('3557000923024440314');" style="">  39    @Override public void executeCmd() {                                                                            </span>
<span class="-6906891541775948108" onmouseenter="enter('-6906891541775948108');" onmouseout="out('-6906891541775948108');" style="">  40      if (!NetUtils.isConnected(AriaManager.APP)) {                                                                 </span>
<span class="3527840811195708659" onmouseenter="enter('3527840811195708659');" onmouseout="out('3527840811195708659');" style="">  41        ALog.w(TAG, &quot;恢复任务失败，网络未连接&quot;);                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  42        return;                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  43      }                                                                                                             </span>
<span class="1522143620344999653" onmouseenter="enter('1522143620344999653');" onmouseout="out('1522143620344999653');" style="">  44      if (isDownloadCmd) {                                                                                          </span>
<span class="-6890796901789246179" onmouseenter="enter('-6890796901789246179');" onmouseout="out('-6890796901789246179');" style="">  45        resumeTask(findTaskData(1));                                                                                </span>
<span class="-8762133209280134260" onmouseenter="enter('-8762133209280134260');" onmouseout="out('-8762133209280134260');" style="">  46        resumeTask(findTaskData(2));                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  47      } else {                                                                                                      </span>
<span class="380554388410105805" onmouseenter="enter('380554388410105805');" onmouseout="out('380554388410105805');" style="">  48        resumeTask(findTaskData(3));                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  49      }                                                                                                             </span>
<span class="-1126421468463401792" onmouseenter="enter('-1126421468463401792');" onmouseout="out('-1126421468463401792');" style="">  50      resumeWaitTask();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51    }                                                                                                               </span>
<span  style="">  52                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  53    /**                                                                                                             </span>
<span class="4566010906397738885" onmouseenter="enter('4566010906397738885');" onmouseout="out('4566010906397738885');" style="">  54     * 查找数据库中的所有任务数据                                                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  55     *                                                                                                              </span>
<span class="-4796337639611018481" onmouseenter="enter('-4796337639611018481');" onmouseout="out('-4796337639611018481');" style="">  56     * @param type {@code 1}单任务下载任务；{@code 2}任务组下载任务；{@code 3} 单任务上传任务                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  57     */                                                                                                             </span>
<span class="1340178163970591689" onmouseenter="enter('1340178163970591689');" onmouseout="out('1340178163970591689');" style="">  58    private List&lt;AbsTaskEntity&gt; findTaskData(int type) {                                                            </span>
<span class="2098240446969666629" onmouseenter="enter('2098240446969666629');" onmouseout="out('2098240446969666629');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  59 -    // TODO: 2018/4/20 需要测试                                                                                       </span>
<span class="-4948925559833229510" onmouseenter="enter('-4948925559833229510');" onmouseout="out('-4948925559833229510');" style="">  60      List&lt;AbsTaskEntity&gt; tempList = new ArrayList&lt;&gt;();                                                             </span>
<span class="-7978942224896054195" onmouseenter="enter('-7978942224896054195');" onmouseout="out('-7978942224896054195');" style="">  61      if (type == 1) {                                                                                              </span>
<span class="8139188931880290130" onmouseenter="enter('8139188931880290130');" onmouseout="out('8139188931880290130');" style="">  62        List&lt;DTEWrapper&gt; wrappers = DbEntity.findRelationData(DTEWrapper.class,                                     </span>
<span class="-145224649022788331" onmouseenter="enter('-145224649022788331');" onmouseout="out('-145224649022788331');" style="">  63            &quot;DownloadTaskEntity.isGroupTask=? and DownloadTaskEntity.state!=?&quot;, &quot;false&quot;, &quot;1&quot;);                      </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  64        if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                              </span>
<span class="3057039082211951420" onmouseenter="enter('3057039082211951420');" onmouseout="out('3057039082211951420');" style="">  65          for (DTEWrapper w : wrappers) {                                                                           </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  66            tempList.add(w.taskEntity);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68        }                                                                                                           </span>
<span class="8913765828433928115" onmouseenter="enter('8913765828433928115');" onmouseout="out('8913765828433928115');" style="">  69      } else if (type == 2) {                                                                                       </span>
<span class="7331687587543988067" onmouseenter="enter('7331687587543988067');" onmouseout="out('7331687587543988067');" style="">  70        List&lt;DGTEWrapper&gt; wrappers =                                                                                </span>
<span class="1958087491453917500" onmouseenter="enter('1958087491453917500');" onmouseout="out('1958087491453917500');" style="">  71            DbEntity.findRelationData(DGTEWrapper.class, &quot;DownloadGroupTaskEntity.state!=?&quot;, &quot;1&quot;);                  </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  72        if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                              </span>
<span class="3408371293368738052" onmouseenter="enter('3408371293368738052');" onmouseout="out('3408371293368738052');" style="">  73          for (DGTEWrapper w : wrappers) {                                                                          </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  74            tempList.add(w.taskEntity);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76        }                                                                                                           </span>
<span class="1871493888726698877" onmouseenter="enter('1871493888726698877');" onmouseout="out('1871493888726698877');" style="">  77      } else if (type == 3) {                                                                                       </span>
<span class="1799852467382085535" onmouseenter="enter('1799852467382085535');" onmouseout="out('1799852467382085535');" style="">  78        List&lt;UTEWrapper&gt; wrappers =                                                                                 </span>
<span class="1961233800438776770" onmouseenter="enter('1961233800438776770');" onmouseout="out('1961233800438776770');" style="">  79            DbEntity.findRelationData(UTEWrapper.class, &quot;UploadTaskEntity.state!=?&quot;, &quot;1&quot;);                          </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  80        if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                              </span>
<span class="-5900313342441763645" onmouseenter="enter('-5900313342441763645');" onmouseout="out('-5900313342441763645');" style="">  81          for (UTEWrapper w : wrappers) {                                                                           </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  82            tempList.add(w.taskEntity);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85      }                                                                                                             </span>
<span class="4353492093014799504" onmouseenter="enter('4353492093014799504');" onmouseout="out('4353492093014799504');" style="">  86      return tempList;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87    }                                                                                                               </span>
<span  style="">  88                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  89    /**                                                                                                             </span>
<span class="5101699313009411241" onmouseenter="enter('5101699313009411241');" onmouseout="out('5101699313009411241');" style="">  90     * 恢复任务                                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  91     */                                                                                                             </span>
<span class="3638171901598519953" onmouseenter="enter('3638171901598519953');" onmouseout="out('3638171901598519953');" style="">  92    private void resumeTask(List&lt;AbsTaskEntity&gt; taskList) {                                                         </span>
<span class="-7337401294989890148" onmouseenter="enter('-7337401294989890148');" onmouseout="out('-7337401294989890148');" style="">  93      if (taskList != null &amp;&amp; !taskList.isEmpty()) {                                                                </span>
<span class="3612314535203445506" onmouseenter="enter('3612314535203445506');" onmouseout="out('3612314535203445506');" style="">  94        for (AbsTaskEntity te : taskList) {                                                                         </span>
<span class="651191964208080036" onmouseenter="enter('651191964208080036');" onmouseout="out('651191964208080036');" style="">  95          if (te == null || te.getEntity() == null) continue;                                                       </span>
<span class="-6705546539852962611" onmouseenter="enter('-6705546539852962611');" onmouseout="out('-6705546539852962611');" style="">  96          int state = te.getState();                                                                                </span>
<span class="2104673490985042132" onmouseenter="enter('2104673490985042132');" onmouseout="out('2104673490985042132');" style="">  97          if (state == IEntity.STATE_STOP || state == IEntity.STATE_OTHER) {                                        </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style="">  98            resumeEntity(te);                                                                                       </span>
<span class="-884893285908090526" onmouseenter="enter('-884893285908090526');" onmouseout="out('-884893285908090526');" style="">  99          } else if (state == IEntity.STATE_WAIT) {                                                                 </span>
<span class="-7302123928453854513" onmouseenter="enter('-7302123928453854513');" onmouseout="out('-7302123928453854513');" style=""> 100            mWaitList.add(te);                                                                                      </span>
<span class="-4837473431815791771" onmouseenter="enter('-4837473431815791771');" onmouseout="out('-4837473431815791771');" style=""> 101          } else if (state == IEntity.STATE_RUNNING) {                                                              </span>
<span class="-8110574645702777732" onmouseenter="enter('-8110574645702777732');" onmouseout="out('-8110574645702777732');" style=""> 102            if (!mQueue.taskIsRunning(te.getEntity().getKey())) {                                                   </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style=""> 103              resumeEntity(te);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104            }                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108    }                                                                                                               </span>
<span  style=""> 109                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 110    /**                                                                                                             </span>
<span class="-5145430413242635014" onmouseenter="enter('-5145430413242635014');" onmouseout="out('-5145430413242635014');" style=""> 111     * 处理等待状态的任务                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 112     */                                                                                                             </span>
<span class="-1625414326575091195" onmouseenter="enter('-1625414326575091195');" onmouseout="out('-1625414326575091195');" style=""> 113    private void resumeWaitTask() {                                                                                 </span>
<span class="-189509060053149369" onmouseenter="enter('-189509060053149369');" onmouseout="out('-189509060053149369');" style=""> 114      int maxTaskNum = mQueue.getMaxTaskNum();                                                                      </span>
<span class="6227704391685544677" onmouseenter="enter('6227704391685544677');" onmouseout="out('6227704391685544677');" style=""> 115      if (mWaitList == null || mWaitList.isEmpty()) return;                                                         </span>
<span class="1864561866722219025" onmouseenter="enter('1864561866722219025');" onmouseout="out('1864561866722219025');" style=""> 116      for (AbsTaskEntity te : mWaitList) {                                                                          </span>
<span class="-2028145384049517138" onmouseenter="enter('-2028145384049517138');" onmouseout="out('-2028145384049517138');" style=""> 117        if (mQueue.getCurrentExePoolNum() &lt; maxTaskNum) {                                                           </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 118          startTask(createTask(te));                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 119        } else {                                                                                                    </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style=""> 120          createTask(te);                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123    }                                                                                                               </span>
<span  style=""> 124                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 125    /**                                                                                                             </span>
<span class="1558403980806506756" onmouseenter="enter('1558403980806506756');" onmouseout="out('1558403980806506756');" style=""> 126     * 恢复实体任务                                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 127     *                                                                                                              </span>
<span class="-8639345982942738758" onmouseenter="enter('-8639345982942738758');" onmouseout="out('-8639345982942738758');" style=""> 128     * @param te 任务实体                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 129     */                                                                                                             </span>
<span class="-1988769257152881971" onmouseenter="enter('-1988769257152881971');" onmouseout="out('-1988769257152881971');" style=""> 130    private void resumeEntity(AbsTaskEntity te) {                                                                   </span>
<span class="-2998921525610830551" onmouseenter="enter('-2998921525610830551');" onmouseout="out('-2998921525610830551');" style=""> 131      if (te instanceof DownloadTaskEntity) {                                                                       </span>
<span class="-1254033370540279069" onmouseenter="enter('-1254033370540279069');" onmouseout="out('-1254033370540279069');" style=""> 132        if (te.getRequestType() == AbsTaskEntity.D_FTP || te.getRequestType() == AbsTaskEntity.U_FTP) {             </span>
<span class="6272043103950913871" onmouseenter="enter('6272043103950913871');" onmouseout="out('6272043103950913871');" style=""> 133          te.setUrlEntity(CommonUtil.getFtpUrlInfo(te.getEntity().getKey()));                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134        }                                                                                                           </span>
<span class="4181603964882924928" onmouseenter="enter('4181603964882924928');" onmouseout="out('4181603964882924928');" style=""> 135        mQueue = DownloadTaskQueue.getInstance();                                                                   </span>
<span class="7410298183112777491" onmouseenter="enter('7410298183112777491');" onmouseout="out('7410298183112777491');" style=""> 136      } else if (te instanceof UploadTaskEntity) {                                                                  </span>
<span class="-4238222144911108592" onmouseenter="enter('-4238222144911108592');" onmouseout="out('-4238222144911108592');" style=""> 137        mQueue = UploadTaskQueue.getInstance();                                                                     </span>
<span class="1537663648944988461" onmouseenter="enter('1537663648944988461');" onmouseout="out('1537663648944988461');" style=""> 138      } else if (te instanceof DownloadGroupTaskEntity) {                                                           </span>
<span class="4162299188526624835" onmouseenter="enter('4162299188526624835');" onmouseout="out('4162299188526624835');" style=""> 139        mQueue = DownloadGroupTaskQueue.getInstance();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140      }                                                                                                             </span>
<span class="2957486427642302174" onmouseenter="enter('2957486427642302174');" onmouseout="out('2957486427642302174');" style=""> 141      int exeNum = mQueue.getCurrentExePoolNum();                                                                   </span>
<span class="-8608281800626499750" onmouseenter="enter('-8608281800626499750');" onmouseout="out('-8608281800626499750');" style=""> 142      if (exeNum == 0 || exeNum &lt; mQueue.getMaxTaskNum()) {                                                         </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 143        startTask(createTask(te));                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 144      } else {                                                                                                      </span>
<span class="3190407925113971357" onmouseenter="enter('3190407925113971357');" onmouseout="out('3190407925113971357');" style=""> 145        te.getEntity().setState(IEntity.STATE_WAIT);                                                                </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style=""> 146        createTask(te);                                                                                             </span>
<span class="-7052049638166885619" onmouseenter="enter('-7052049638166885619');" onmouseout="out('-7052049638166885619');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 147 +      sendWaitState();                                                                                            </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149    }                                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="-4185208522764792297" onmouseenter="enter('-4185208522764792297');" onmouseout="out('-4185208522764792297');" style="">   1  package com.arialyy.aria.core.command.normal;                                                                     </span>
<span  style="">   2                                                                                                                    </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">   3  import com.arialyy.aria.core.AriaManager;                                                                         </span>
<span class="5290109400157436023" onmouseenter="enter('5290109400157436023');" onmouseout="out('5290109400157436023');" style="">   4  import com.arialyy.aria.core.download.DownloadGroupTaskEntity;                                                    </span>
<span class="8636089030381561336" onmouseenter="enter('8636089030381561336');" onmouseout="out('8636089030381561336');" style="">   5  import com.arialyy.aria.core.download.DownloadTaskEntity;                                                         </span>
<span class="6904362612035804276" onmouseenter="enter('6904362612035804276');" onmouseout="out('6904362612035804276');" style="">   6  import com.arialyy.aria.core.download.wrapper.DGTEWrapper;                                                        </span>
<span class="-6970023867987021516" onmouseenter="enter('-6970023867987021516');" onmouseout="out('-6970023867987021516');" style="">   7  import com.arialyy.aria.core.download.wrapper.DTEWrapper;                                                         </span>
<span class="-4417152733335289341" onmouseenter="enter('-4417152733335289341');" onmouseout="out('-4417152733335289341');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   8 +import com.arialyy.aria.core.inf.AbsTask;                                                                         </span>
<span class="4195608340199028072" onmouseenter="enter('4195608340199028072');" onmouseout="out('4195608340199028072');" style="">   9  import com.arialyy.aria.core.inf.AbsTaskEntity;                                                                   </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  10  import com.arialyy.aria.core.inf.IEntity;                                                                         </span>
<span class="6163330959373243747" onmouseenter="enter('6163330959373243747');" onmouseout="out('6163330959373243747');" style="">  11  import com.arialyy.aria.core.queue.DownloadGroupTaskQueue;                                                        </span>
<span class="1325372506799583582" onmouseenter="enter('1325372506799583582');" onmouseout="out('1325372506799583582');" style="">  12  import com.arialyy.aria.core.queue.DownloadTaskQueue;                                                             </span>
<span class="-8259302571631178660" onmouseenter="enter('-8259302571631178660');" onmouseout="out('-8259302571631178660');" style="">  13  import com.arialyy.aria.core.queue.UploadTaskQueue;                                                               </span>
<span class="5529108429384186748" onmouseenter="enter('5529108429384186748');" onmouseout="out('5529108429384186748');" style="">  14  import com.arialyy.aria.core.upload.UploadTaskEntity;                                                             </span>
<span class="3697256534917243563" onmouseenter="enter('3697256534917243563');" onmouseout="out('3697256534917243563');" style="">  15  import com.arialyy.aria.core.upload.wrapper.UTEWrapper;                                                           </span>
<span class="-4499301116755301031" onmouseenter="enter('-4499301116755301031');" onmouseout="out('-4499301116755301031');" style="">  16  import com.arialyy.aria.orm.DbEntity;                                                                             </span>
<span class="-3586495952513455611" onmouseenter="enter('-3586495952513455611');" onmouseout="out('-3586495952513455611');" style="">  17  import com.arialyy.aria.util.ALog;                                                                                </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  18  import com.arialyy.aria.util.CommonUtil;                                                                          </span>
<span class="-3921447581486569047" onmouseenter="enter('-3921447581486569047');" onmouseout="out('-3921447581486569047');" style="">  19  import com.arialyy.aria.util.NetUtils;                                                                            </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  21  import java.util.List;                                                                                            </span>
<span  style="">  22                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  23  /**                                                                                                               </span>
<span class="3256834120032901091" onmouseenter="enter('3256834120032901091');" onmouseout="out('3256834120032901091');" style="">  24   * Created by AriaL on 2017/6/13.                                                                                 </span>
<span class="-1725900952073690056" onmouseenter="enter('-1725900952073690056');" onmouseout="out('-1725900952073690056');" style="">  25   * 恢复所有停止的任务                                                                                                      </span>
<span class="-4407894673997389754" onmouseenter="enter('-4407894673997389754');" onmouseout="out('-4407894673997389754');" style="">  26   * 1.如果执行队列没有满，则开始下载任务，直到执行队列满                                                                                    </span>
<span class="-525289014070027486" onmouseenter="enter('-525289014070027486');" onmouseout="out('-525289014070027486');" style="">  27   * 2.如果队列执行队列已经满了，则将所有任务添加到等待队列中                                                                                  </span>
<span class="3647244767730944879" onmouseenter="enter('3647244767730944879');" onmouseout="out('3647244767730944879');" style="">  28   * 3.如果队列中只有等待状态的任务，如果执行队列没有满，则会启动等待状态的任务，如果执行队列已经满了，则会将所有等待状态的任务加载到缓存队列中                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  29   */                                                                                                               </span>
<span class="-5145471632187895448" onmouseenter="enter('-5145471632187895448');" onmouseout="out('-5145471632187895448');" style="">  30  final class ResumeAllCmd&lt;T extends AbsTaskEntity&gt; extends AbsNormalCmd&lt;T&gt; {                                       </span>
<span class="6798992044291624411" onmouseenter="enter('6798992044291624411');" onmouseout="out('6798992044291624411');" style="">  31    private List&lt;AbsTaskEntity&gt; mWaitList = new ArrayList&lt;&gt;();                                                      </span>
<span  style="">  32                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  33    /**                                                                                                             </span>
<span class="8174408356842298787" onmouseenter="enter('8174408356842298787');" onmouseout="out('8174408356842298787');" style="">  34     * @param targetName 产生任务的对象名                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  35     */                                                                                                             </span>
<span class="889722537235794515" onmouseenter="enter('889722537235794515');" onmouseout="out('889722537235794515');" style="">  36    ResumeAllCmd(String targetName, T entity, int taskType) {                                                       </span>
<span class="2762350648838201041" onmouseenter="enter('2762350648838201041');" onmouseout="out('2762350648838201041');" style="">  37      super(targetName, entity, taskType);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  38    }                                                                                                               </span>
<span  style="">  39                                                                                                                    </span>
<span class="3557000923024440314" onmouseenter="enter('3557000923024440314');" onmouseout="out('3557000923024440314');" style="">  40    @Override public void executeCmd() {                                                                            </span>
<span class="-6906891541775948108" onmouseenter="enter('-6906891541775948108');" onmouseout="out('-6906891541775948108');" style="">  41      if (!NetUtils.isConnected(AriaManager.APP)) {                                                                 </span>
<span class="3527840811195708659" onmouseenter="enter('3527840811195708659');" onmouseout="out('3527840811195708659');" style="">  42        ALog.w(TAG, &quot;恢复任务失败，网络未连接&quot;);                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  43        return;                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  44      }                                                                                                             </span>
<span class="1522143620344999653" onmouseenter="enter('1522143620344999653');" onmouseout="out('1522143620344999653');" style="">  45      if (isDownloadCmd) {                                                                                          </span>
<span class="-6890796901789246179" onmouseenter="enter('-6890796901789246179');" onmouseout="out('-6890796901789246179');" style="">  46        resumeTask(findTaskData(1));                                                                                </span>
<span class="-8762133209280134260" onmouseenter="enter('-8762133209280134260');" onmouseout="out('-8762133209280134260');" style="">  47        resumeTask(findTaskData(2));                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  48      } else {                                                                                                      </span>
<span class="380554388410105805" onmouseenter="enter('380554388410105805');" onmouseout="out('380554388410105805');" style="">  49        resumeTask(findTaskData(3));                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  50      }                                                                                                             </span>
<span class="-1126421468463401792" onmouseenter="enter('-1126421468463401792');" onmouseout="out('-1126421468463401792');" style="">  51      resumeWaitTask();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  52    }                                                                                                               </span>
<span  style="">  53                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  54    /**                                                                                                             </span>
<span class="4566010906397738885" onmouseenter="enter('4566010906397738885');" onmouseout="out('4566010906397738885');" style="">  55     * 查找数据库中的所有任务数据                                                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  56     *                                                                                                              </span>
<span class="-4796337639611018481" onmouseenter="enter('-4796337639611018481');" onmouseout="out('-4796337639611018481');" style="">  57     * @param type {@code 1}单任务下载任务；{@code 2}任务组下载任务；{@code 3} 单任务上传任务                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  58     */                                                                                                             </span>
<span class="1340178163970591689" onmouseenter="enter('1340178163970591689');" onmouseout="out('1340178163970591689');" style="">  59    private List&lt;AbsTaskEntity&gt; findTaskData(int type) {                                                            </span>
<span class="2098240446969666629" onmouseenter="enter('2098240446969666629');" onmouseout="out('2098240446969666629');" style="">  60      // TODO: 2018/4/20 需要测试                                                                                       </span>
<span class="-4948925559833229510" onmouseenter="enter('-4948925559833229510');" onmouseout="out('-4948925559833229510');" style="">  61      List&lt;AbsTaskEntity&gt; tempList = new ArrayList&lt;&gt;();                                                             </span>
<span class="-7978942224896054195" onmouseenter="enter('-7978942224896054195');" onmouseout="out('-7978942224896054195');" style="">  62      if (type == 1) {                                                                                              </span>
<span class="8139188931880290130" onmouseenter="enter('8139188931880290130');" onmouseout="out('8139188931880290130');" style="">  63        List&lt;DTEWrapper&gt; wrappers = DbEntity.findRelationData(DTEWrapper.class,                                     </span>
<span class="-145224649022788331" onmouseenter="enter('-145224649022788331');" onmouseout="out('-145224649022788331');" style="">  64            &quot;DownloadTaskEntity.isGroupTask=? and DownloadTaskEntity.state!=?&quot;, &quot;false&quot;, &quot;1&quot;);                      </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  65        if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                              </span>
<span class="3057039082211951420" onmouseenter="enter('3057039082211951420');" onmouseout="out('3057039082211951420');" style="">  66          for (DTEWrapper w : wrappers) {                                                                           </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  67            tempList.add(w.taskEntity);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69        }                                                                                                           </span>
<span class="8913765828433928115" onmouseenter="enter('8913765828433928115');" onmouseout="out('8913765828433928115');" style="">  70      } else if (type == 2) {                                                                                       </span>
<span class="7331687587543988067" onmouseenter="enter('7331687587543988067');" onmouseout="out('7331687587543988067');" style="">  71        List&lt;DGTEWrapper&gt; wrappers =                                                                                </span>
<span class="1958087491453917500" onmouseenter="enter('1958087491453917500');" onmouseout="out('1958087491453917500');" style="">  72            DbEntity.findRelationData(DGTEWrapper.class, &quot;DownloadGroupTaskEntity.state!=?&quot;, &quot;1&quot;);                  </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  73        if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                              </span>
<span class="3408371293368738052" onmouseenter="enter('3408371293368738052');" onmouseout="out('3408371293368738052');" style="">  74          for (DGTEWrapper w : wrappers) {                                                                          </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  75            tempList.add(w.taskEntity);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  77        }                                                                                                           </span>
<span class="1871493888726698877" onmouseenter="enter('1871493888726698877');" onmouseout="out('1871493888726698877');" style="">  78      } else if (type == 3) {                                                                                       </span>
<span class="1799852467382085535" onmouseenter="enter('1799852467382085535');" onmouseout="out('1799852467382085535');" style="">  79        List&lt;UTEWrapper&gt; wrappers =                                                                                 </span>
<span class="1961233800438776770" onmouseenter="enter('1961233800438776770');" onmouseout="out('1961233800438776770');" style="">  80            DbEntity.findRelationData(UTEWrapper.class, &quot;UploadTaskEntity.state!=?&quot;, &quot;1&quot;);                          </span>
<span class="-6037472779120335688" onmouseenter="enter('-6037472779120335688');" onmouseout="out('-6037472779120335688');" style="">  81        if (wrappers != null &amp;&amp; !wrappers.isEmpty()) {                                                              </span>
<span class="-5900313342441763645" onmouseenter="enter('-5900313342441763645');" onmouseout="out('-5900313342441763645');" style="">  82          for (UTEWrapper w : wrappers) {                                                                           </span>
<span class="-8819252291848718428" onmouseenter="enter('-8819252291848718428');" onmouseout="out('-8819252291848718428');" style="">  83            tempList.add(w.taskEntity);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86      }                                                                                                             </span>
<span class="4353492093014799504" onmouseenter="enter('4353492093014799504');" onmouseout="out('4353492093014799504');" style="">  87      return tempList;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88    }                                                                                                               </span>
<span  style="">  89                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  90    /**                                                                                                             </span>
<span class="5101699313009411241" onmouseenter="enter('5101699313009411241');" onmouseout="out('5101699313009411241');" style="">  91     * 恢复任务                                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  92     */                                                                                                             </span>
<span class="3638171901598519953" onmouseenter="enter('3638171901598519953');" onmouseout="out('3638171901598519953');" style="">  93    private void resumeTask(List&lt;AbsTaskEntity&gt; taskList) {                                                         </span>
<span class="-7337401294989890148" onmouseenter="enter('-7337401294989890148');" onmouseout="out('-7337401294989890148');" style="">  94      if (taskList != null &amp;&amp; !taskList.isEmpty()) {                                                                </span>
<span class="3612314535203445506" onmouseenter="enter('3612314535203445506');" onmouseout="out('3612314535203445506');" style="">  95        for (AbsTaskEntity te : taskList) {                                                                         </span>
<span class="651191964208080036" onmouseenter="enter('651191964208080036');" onmouseout="out('651191964208080036');" style="">  96          if (te == null || te.getEntity() == null) continue;                                                       </span>
<span class="-6705546539852962611" onmouseenter="enter('-6705546539852962611');" onmouseout="out('-6705546539852962611');" style="">  97          int state = te.getState();                                                                                </span>
<span class="2104673490985042132" onmouseenter="enter('2104673490985042132');" onmouseout="out('2104673490985042132');" style="">  98          if (state == IEntity.STATE_STOP || state == IEntity.STATE_OTHER) {                                        </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style="">  99            resumeEntity(te);                                                                                       </span>
<span class="-884893285908090526" onmouseenter="enter('-884893285908090526');" onmouseout="out('-884893285908090526');" style=""> 100          } else if (state == IEntity.STATE_WAIT) {                                                                 </span>
<span class="-7302123928453854513" onmouseenter="enter('-7302123928453854513');" onmouseout="out('-7302123928453854513');" style=""> 101            mWaitList.add(te);                                                                                      </span>
<span class="-4837473431815791771" onmouseenter="enter('-4837473431815791771');" onmouseout="out('-4837473431815791771');" style=""> 102          } else if (state == IEntity.STATE_RUNNING) {                                                              </span>
<span class="-8110574645702777732" onmouseenter="enter('-8110574645702777732');" onmouseout="out('-8110574645702777732');" style=""> 103            if (!mQueue.taskIsRunning(te.getEntity().getKey())) {                                                   </span>
<span class="-1468267569684557711" onmouseenter="enter('-1468267569684557711');" onmouseout="out('-1468267569684557711');" style=""> 104              resumeEntity(te);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105            }                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109    }                                                                                                               </span>
<span  style=""> 110                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 111    /**                                                                                                             </span>
<span class="-5145430413242635014" onmouseenter="enter('-5145430413242635014');" onmouseout="out('-5145430413242635014');" style=""> 112     * 处理等待状态的任务                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 113     */                                                                                                             </span>
<span class="-1625414326575091195" onmouseenter="enter('-1625414326575091195');" onmouseout="out('-1625414326575091195');" style=""> 114    private void resumeWaitTask() {                                                                                 </span>
<span class="-189509060053149369" onmouseenter="enter('-189509060053149369');" onmouseout="out('-189509060053149369');" style=""> 115      int maxTaskNum = mQueue.getMaxTaskNum();                                                                      </span>
<span class="6227704391685544677" onmouseenter="enter('6227704391685544677');" onmouseout="out('6227704391685544677');" style=""> 116      if (mWaitList == null || mWaitList.isEmpty()) return;                                                         </span>
<span class="1864561866722219025" onmouseenter="enter('1864561866722219025');" onmouseout="out('1864561866722219025');" style=""> 117      for (AbsTaskEntity te : mWaitList) {                                                                          </span>
<span class="-2028145384049517138" onmouseenter="enter('-2028145384049517138');" onmouseout="out('-2028145384049517138');" style=""> 118        if (mQueue.getCurrentExePoolNum() &lt; maxTaskNum) {                                                           </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 119          startTask(createTask(te));                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 120        } else {                                                                                                    </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style=""> 121          createTask(te);                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124    }                                                                                                               </span>
<span  style=""> 125                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 126    /**                                                                                                             </span>
<span class="1558403980806506756" onmouseenter="enter('1558403980806506756');" onmouseout="out('1558403980806506756');" style=""> 127     * 恢复实体任务                                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 128     *                                                                                                              </span>
<span class="-8639345982942738758" onmouseenter="enter('-8639345982942738758');" onmouseout="out('-8639345982942738758');" style=""> 129     * @param te 任务实体                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 130     */                                                                                                             </span>
<span class="-1988769257152881971" onmouseenter="enter('-1988769257152881971');" onmouseout="out('-1988769257152881971');" style=""> 131    private void resumeEntity(AbsTaskEntity te) {                                                                   </span>
<span class="-2998921525610830551" onmouseenter="enter('-2998921525610830551');" onmouseout="out('-2998921525610830551');" style=""> 132      if (te instanceof DownloadTaskEntity) {                                                                       </span>
<span class="-1254033370540279069" onmouseenter="enter('-1254033370540279069');" onmouseout="out('-1254033370540279069');" style=""> 133        if (te.getRequestType() == AbsTaskEntity.D_FTP || te.getRequestType() == AbsTaskEntity.U_FTP) {             </span>
<span class="6272043103950913871" onmouseenter="enter('6272043103950913871');" onmouseout="out('6272043103950913871');" style=""> 134          te.setUrlEntity(CommonUtil.getFtpUrlInfo(te.getEntity().getKey()));                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135        }                                                                                                           </span>
<span class="4181603964882924928" onmouseenter="enter('4181603964882924928');" onmouseout="out('4181603964882924928');" style=""> 136        mQueue = DownloadTaskQueue.getInstance();                                                                   </span>
<span class="7410298183112777491" onmouseenter="enter('7410298183112777491');" onmouseout="out('7410298183112777491');" style=""> 137      } else if (te instanceof UploadTaskEntity) {                                                                  </span>
<span class="-4238222144911108592" onmouseenter="enter('-4238222144911108592');" onmouseout="out('-4238222144911108592');" style=""> 138        mQueue = UploadTaskQueue.getInstance();                                                                     </span>
<span class="1537663648944988461" onmouseenter="enter('1537663648944988461');" onmouseout="out('1537663648944988461');" style=""> 139      } else if (te instanceof DownloadGroupTaskEntity) {                                                           </span>
<span class="4162299188526624835" onmouseenter="enter('4162299188526624835');" onmouseout="out('4162299188526624835');" style=""> 140        mQueue = DownloadGroupTaskQueue.getInstance();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141      }                                                                                                             </span>
<span class="2957486427642302174" onmouseenter="enter('2957486427642302174');" onmouseout="out('2957486427642302174');" style=""> 142      int exeNum = mQueue.getCurrentExePoolNum();                                                                   </span>
<span class="-8608281800626499750" onmouseenter="enter('-8608281800626499750');" onmouseout="out('-8608281800626499750');" style=""> 143      if (exeNum == 0 || exeNum &lt; mQueue.getMaxTaskNum()) {                                                         </span>
<span class="-8306834117536704764" onmouseenter="enter('-8306834117536704764');" onmouseout="out('-8306834117536704764');" style=""> 144        startTask(createTask(te));                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 145      } else {                                                                                                      </span>
<span class="3190407925113971357" onmouseenter="enter('3190407925113971357');" onmouseout="out('3190407925113971357');" style=""> 146        te.getEntity().setState(IEntity.STATE_WAIT);                                                                </span>
<span class="-6740560997792257972" onmouseenter="enter('-6740560997792257972');" onmouseout="out('-6740560997792257972');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 147 -      createTask(te);                                                                                             </span>
<span class="-4758218181751503086" onmouseenter="enter('-4758218181751503086');" onmouseout="out('-4758218181751503086');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 148 +      AbsTask task = createTask(te);                                                                              </span>
<span class="6082005349029604247" onmouseenter="enter('6082005349029604247');" onmouseout="out('6082005349029604247');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +      sendWaitState(task);                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151    }                                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            