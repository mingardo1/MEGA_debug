<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>44</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    44
                    <a href="43.html">prev</a>
                    <a href="45.html">next</a>
                    <a href="44_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    AriaLyy/Aria_ec1b504309d78f4ff275a5e6a6f08a5e0022f44b_Aria/src/main/java/com/arialyy/aria/core/inf/AbsTaskEntity.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b:Aria/src/main/java/com/arialyy/aria/core/inf/AbsTaskEntity.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b^1:Aria/src/main/java/com/arialyy/aria/core/inf/AbsTaskEntity.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b^2:Aria/src/main/java/com/arialyy/aria/core/inf/AbsTaskEntity.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;cd587dd212fe20c8c7e9d44c6b009614eae38bef:Aria/src/main/java/com/arialyy/aria/core/inf/AbsTaskEntity.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[sbj]], subset: [[sbj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.inf;
  17 
  18 import com.arialyy.aria.core.FtpUrlEntity;
  19 import com.arialyy.aria.core.common.RequestEnum;
  20 import com.arialyy.aria.orm.DbEntity;
  21 import com.arialyy.aria.orm.Ignore;
  22 import com.arialyy.aria.orm.Primary;
  23 import java.util.HashMap;
  24 import java.util.Map;
  25 
  26 /**
  27  * Created by lyy on 2017/2/23.
  28  * 所有任务实体的父类
  29  */
  30 public abstract class AbsTaskEntity&lt;ENTITY extends AbsEntity&gt; extends DbEntity {
  31   /**
  32    * HTTP单任务载
  33    */
  34   public static final int D_HTTP = 0x11;
  35   /**
  36    *  HTTP任务组下载
  37    */
  38   public static final int DG_HTTP = 0x12;
  39   /**
  40    * HTTP单文件上传
  41    */
  42   public static final int U_HTTP = 0xA1;
  43 
  44   /**
  45    * FTP单文件下载
  46    */
  47   public static final int D_FTP = 0x13;
  48   /**
  49    * FTP文件夹下载，为避免登录过多，子任务由单线程进行处理
  50    */
  51   public static final int D_FTP_DIR = 0x14;
  52   /**
  53    * FTP单文件上传
  54    */
  55   public static final int U_FTP = 0xA2;
  56 
  57   /**
  58    * Task实体对应的key
  59    */
  60   @Primary public String key = &quot;&quot;;
  61 
  62   /**
  63    * 账号和密码
  64    */
  65   @Ignore public FtpUrlEntity urlEntity;
  66 
  67   /**
  68    * 刷新信息 {@code true} 重新刷新下载信息
  69    */
  70   @Ignore public boolean refreshInfo = false;
  71 
  72   /**
  73    * 是否是新任务，{@code true} 新任务
  74    */
  75   @Ignore public boolean isNewTask = false;
  76 
  77   /**
  78    * 任务状态，和Entity的state同步
  79    */
  80   public int state = IEntity.STATE_WAIT;
  81 
  82   /**
  83    * 请求类型
  84 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  85    * {@link AbsTaskEntity#HTTP}、{@link AbsTaskEntity#FTP}、{@link AbsTaskEntity#FTP_DIR}</span>
  86 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87    * {@link AbsTaskEntity#HTTP}、{@link AbsTaskEntity#FTP}</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89   public int requestType = HTTP;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92    * http 请求头</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94   public Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97    * 字符编码，默认为&quot;utf-8&quot;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99   public String charSet = &quot;utf-8&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100 </span>
 101 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 102    * {@link AbsTaskEntity#D_HTTP}、{@link AbsTaskEntity#D_FTP}</span>
 103 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 104    */
 105   public int requestType = D_HTTP;
 106 
 107   /**
 108    * http 请求头
 109    */
 110   public Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();
 111 
 112   /**
 113    * 字符编码，默认为&quot;utf-8&quot;
 114    */
 115   public String charSet = &quot;utf-8&quot;;
 116 
 117   /**
 118    * 网络请求类型
 119    */
 120   public RequestEnum requestEnum = RequestEnum.GET;
 121 
 122   /**
 123    * 从header中含有的文件md5码信息所需要的key
 124    */
 125   public String md5Key = &quot;Content-MD5&quot;;
 126 
 127   /**
 128    * 从header中获取文件描述信息所需要的key
 129    */
 130   public String dispositionKey = &quot;Content-Disposition&quot;;
 131 
 132   /**
 133    * 重定向后，从header中获取新url所需要的key
 134    */
 135   public String redirectUrlKey = &quot;location&quot;;
 136 
 137   /**
 138    * 从Disposition获取的文件名说需要的key
 139    */
 140   public String dispositionFileKey = &quot;attachment;filename&quot;;
 141 
 142   /**
 143    * 从header中含有的文件长度信息所需要的key
 144    */
 145   public String contentLength = &quot;Content-Length&quot;;
 146 
 147   /**
 148    * 重定向链接
 149    */
 150   public String redirectUrl = &quot;&quot;;
 151 
 152   /**
 153    * {@code true}  删除任务数据库记录，并且删除已经下载完成的文件
 154    * {@code false} 如果任务已经完成，只删除任务数据库记录
 155    */
 156   @Ignore public boolean removeFile = false;
 157 
 158   /**
 159    * 是否支持断点, {@code true} 为支持断点
 160    */
 161   public boolean isSupportBP = true;
 162 
 163   /**
 164    * 状态码
 165    */
 166   public int code;
 167 
 168   public abstract ENTITY getEntity();
 169 
 170   /**
 171    * 获取任务下载状态
 172    *
 173    * @return {@link IEntity}
 174    */
 175   public int getState() {
 176     return getEntity().getState();
 177   }
 178 
 179   @Override public void deleteData() {
 180     if (getEntity() != null) {
 181       getEntity().deleteData();
 182     }
 183     super.deleteData();
 184   }
 185 
 186   @Override public void update() {
 187     if (getEntity() != null) {
 188       getEntity().update();
 189     }
 190     super.update();
 191   }
 192 }</pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.inf;
  17 
  18 import com.arialyy.aria.core.FtpUrlEntity;
  19 import com.arialyy.aria.core.common.RequestEnum;
  20 import com.arialyy.aria.orm.DbEntity;
  21 import com.arialyy.aria.orm.Ignore;
  22 import com.arialyy.aria.orm.Primary;
  23 import java.util.HashMap;
  24 import java.util.Map;
  25 
  26 /**
  27  * Created by lyy on 2017/2/23.
  28  * 所有任务实体的父类
  29  */
  30 public abstract class AbsTaskEntity&lt;ENTITY extends AbsEntity&gt; extends DbEntity {
  31   /**
  32    * HTTP单任务载
  33    */
  34   public static final int D_HTTP = 0x11;
  35   /**
  36    *  HTTP任务组下载
  37    */
  38   public static final int DG_HTTP = 0x12;
  39   /**
  40    * HTTP单文件上传
  41    */
  42   public static final int U_HTTP = 0xA1;
  43 
  44   /**
  45    * FTP单文件下载
  46    */
  47   public static final int D_FTP = 0x13;
  48   /**
  49    * FTP文件夹下载，为避免登录过多，子任务由单线程进行处理
  50    */
  51   public static final int D_FTP_DIR = 0x14;
  52   /**
  53    * FTP单文件上传
  54    */
  55   public static final int U_FTP = 0xA2;
  56 
  57   /**
  58    * Task实体对应的key
  59    */
  60   @Primary public String key = &quot;&quot;;
  61 
  62   /**
  63    * 账号和密码
  64    */
  65   @Ignore public FtpUrlEntity urlEntity;
  66 
  67   /**
  68    * 刷新信息 {@code true} 重新刷新下载信息
  69    */
  70   @Ignore public boolean refreshInfo = false;
  71 
  72   /**
  73    * 是否是新任务，{@code true} 新任务
  74    */
  75   @Ignore public boolean isNewTask = false;
  76 
  77   /**
  78    * 任务状态，和Entity的state同步
  79    */
  80   public int state = IEntity.STATE_WAIT;
  81 
  82   /**
  83    * 请求类型
  84 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  85    * {@link AbsTaskEntity#HTTP}、{@link AbsTaskEntity#FTP}、{@link AbsTaskEntity#FTP_DIR}</span>
  86 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87    * {@link AbsTaskEntity#HTTP}、{@link AbsTaskEntity#FTP}</span>
  88 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  89    * {@link AbsTaskEntity#D_HTTP}、{@link AbsTaskEntity#D_FTP}</span>
  90 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
  91    */
  92   public int requestType = D_HTTP;
  93 
  94   /**
  95    * http 请求头
  96    */
  97   public Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();
  98 
  99   /**
 100    * 字符编码，默认为&quot;utf-8&quot;
 101    */
 102   public String charSet = &quot;utf-8&quot;;
 103 
 104   /**
 105    * 网络请求类型
 106    */
 107   public RequestEnum requestEnum = RequestEnum.GET;
 108 
 109   /**
 110    * 从header中含有的文件md5码信息所需要的key
 111    */
 112   public String md5Key = &quot;Content-MD5&quot;;
 113 
 114   /**
 115    * 从header中获取文件描述信息所需要的key
 116    */
 117   public String dispositionKey = &quot;Content-Disposition&quot;;
 118 
 119   /**
 120    * 重定向后，从header中获取新url所需要的key
 121    */
 122   public String redirectUrlKey = &quot;location&quot;;
 123 
 124   /**
 125    * 从Disposition获取的文件名说需要的key
 126    */
 127   public String dispositionFileKey = &quot;attachment;filename&quot;;
 128 
 129   /**
 130    * 从header中含有的文件长度信息所需要的key
 131    */
 132   public String contentLength = &quot;Content-Length&quot;;
 133 
 134   /**
 135    * 重定向链接
 136    */
 137   public String redirectUrl = &quot;&quot;;
 138 
 139   /**
 140    * {@code true}  删除任务数据库记录，并且删除已经下载完成的文件
 141    * {@code false} 如果任务已经完成，只删除任务数据库记录
 142    */
 143   @Ignore public boolean removeFile = false;
 144 
 145   /**
 146    * 是否支持断点, {@code true} 为支持断点
 147    */
 148   public boolean isSupportBP = true;
 149 
 150   /**
 151    * 状态码
 152    */
 153   public int code;
 154 
 155   public abstract ENTITY getEntity();
 156 
 157   /**
 158    * 获取任务下载状态
 159    *
 160    * @return {@link IEntity}
 161    */
 162   public int getState() {
 163     return getEntity().getState();
 164   }
 165 
 166   @Override public void deleteData() {
 167     if (getEntity() != null) {
 168       getEntity().deleteData();
 169     }
 170     super.deleteData();
 171   }
 172 
 173   @Override public void update() {
 174     if (getEntity() != null) {
 175       getEntity().update();
 176     }
 177     super.update();
 178   }
 179 }
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.inf;
  17 
  18 import com.arialyy.aria.core.FtpUrlEntity;
  19 import com.arialyy.aria.core.common.RequestEnum;
  20 import com.arialyy.aria.orm.DbEntity;
  21 import com.arialyy.aria.orm.Ignore;
  22 import com.arialyy.aria.orm.Primary;
  23 import java.util.HashMap;
  24 import java.util.Map;
  25 
  26 
  27 /**
  28  * Created by lyy on 2017/2/23.
  29  * 所有任务实体的父类
  30  */
  31 public abstract class AbsTaskEntity&lt;ENTITY extends AbsEntity&gt; extends DbEntity {
  32   /**
  33    * HTTP单任务载
  34    */
  35   public static final int D_HTTP = 0x11;
  36 
  37   /**
  38    *  HTTP任务组下载
  39    */
  40   public static final int DG_HTTP = 0x12;
  41 
  42   /**
  43    * HTTP单文件上传
  44    */
  45   public static final int U_HTTP = 0xA1;
  46 
  47   /**
  48    * FTP单文件下载
  49    */
  50   public static final int D_FTP = 0x13;
  51 
  52   /**
  53    * FTP文件夹下载，为避免登录过多，子任务由单线程进行处理
  54    */
  55   public static final int D_FTP_DIR = 0x14;
  56 
  57   /**
  58    * FTP单文件上传
  59    */
  60   public static final int U_FTP = 0xA2;
  61 
  62   /**
  63    * Task实体对应的key
  64    */
  65   @Primary public String key = &quot;&quot;;
  66 
  67   /**
  68    * 账号和密码
  69    */
  70   @Ignore
  71   public FtpUrlEntity urlEntity;
  72 
  73   /**
  74    * 刷新信息 {@code true} 重新刷新下载信息
  75    */
  76   @Ignore public boolean refreshInfo = false;
  77 
  78   /**
  79    * 是否是新任务，{@code true} 新任务
  80    */
  81   @Ignore public boolean isNewTask = false;
  82 
  83   /**
  84    * 任务状态，和Entity的state同步
  85    */
  86   public int state = IEntity.STATE_WAIT;
  87 
  88   /**
  89      * 请求类型
  90   &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT
  91      * {@link AbsTaskEntity#HTTP}、{@link AbsTaskEntity#FTP}、{@link AbsTaskEntity#FTP_DIR}
  92   ||||||| BASE
<abbr title="  93 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">  93 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr>
  94 =======
  95 
  96      * {@link AbsTaskEntity#D_HTTP}、{@link AbsTaskEntity#D_FTP}
  97   &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT
  98      */
  99 
 100   public int requestType = D_HTTP;
 101 
 102   /**
 103    * http 请求头
 104    */
 105   public Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();
 106 
 107   /**
 108    * 字符编码，默认为&quot;utf-8&quot;
 109    */
 110   public String charSet = &quot;utf-8&quot;;
 111 
 112   /**
 113    * 网络请求类型
 114    */
 115   public RequestEnum requestEnum = RequestEnum.GET;
 116 
 117   /**
 118    * 从header中含有的文件md5码信息所需要的key
 119    */
 120   public String md5Key = &quot;Content-MD5&quot;;
 121 
 122   /**
 123    * 从header中获取文件描述信息所需要的key
 124    */
 125   public String dispositionKey = &quot;Content-Disposition&quot;;
 126 
 127   /**
 128    * 重定向后，从header中获取新url所需要的key
 129    */
 130   public String redirectUrlKey = &quot;location&quot;;
 131 
 132   /**
 133    * 从Disposition获取的文件名说需要的key
 134    */
 135   public String dispositionFileKey = &quot;attachment;filename&quot;;
 136 
 137   /**
 138    * 从header中含有的文件长度信息所需要的key
 139    */
 140   public String contentLength = &quot;Content-Length&quot;;
 141 
 142   /**
 143    * 重定向链接
 144    */
 145   public String redirectUrl = &quot;&quot;;
 146 
 147   /**
 148    * {@code true}  删除任务数据库记录，并且删除已经下载完成的文件
 149    * {@code false} 如果任务已经完成，只删除任务数据库记录
 150    */
 151   @Ignore public boolean removeFile = false;
 152 
 153   /**
 154    * 是否支持断点, {@code true} 为支持断点
 155    */
 156   public boolean isSupportBP = true;
 157 
 158   /**
 159    * 状态码
 160    */
 161   public int code;
 162 
 163   public abstract ENTITY getEntity();
 164 
 165   /**
 166    * 获取任务下载状态
 167    *
 168    * @return {@link IEntity}
 169    */
 170   public int getState() {
 171     return getEntity().getState();
 172   }
 173 
 174   @Override public void deleteData() {
 175     if (getEntity() != null) {
 176       getEntity().deleteData();
 177     }
 178     super.deleteData();
 179   }
 180 
 181   @Override public void update() {
 182     if (getEntity() != null) {
 183       getEntity().update();
 184     }
 185     super.update();
 186   }
 187 }
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  package com.arialyy.aria.core.inf;
  17  
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  18 +import com.arialyy.aria.core.FtpUrlEntity;</span>
  19  import com.arialyy.aria.core.common.RequestEnum;
  20  import com.arialyy.aria.orm.DbEntity;
  21  import com.arialyy.aria.orm.Ignore;
  22  import com.arialyy.aria.orm.Primary;
  23  import java.util.HashMap;
  24  import java.util.Map;
  25  
  26  /**
  27   * Created by lyy on 2017/2/23.
  28   * 所有任务实体的父类
  29   */
  30  public abstract class AbsTaskEntity&lt;ENTITY extends AbsEntity&gt; extends DbEntity {
  31    /**
  32     * HTTP下载

  33     */
  34    public static final int HTTP = 0x11;

  35    /**
  36     * FTP当文件下载

  37     */
  38    public static final int FTP = 0x12;










  39    /**
  40     * FTP文件夹下载，为避免登录过多，子任务由单线程进行处理
  41     */
  42    public static final int FTP_DIR = 0x13;





  43  
  44    /**
  45     * Task实体对应的key
  46     */
  47    @Primary public String key = &quot;&quot;;
  48  
  49    /**
  50     * 账号和密码
  51     */
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  52 -  @Ignore public String userName, userPw, account, serverIp;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  53 -  @Ignore public int port;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  54 +  @Ignore public FtpUrlEntity urlEntity;</span>
  55  
  56    /**
  57     * 刷新信息 {@code true} 重新刷新下载信息
  58     */
  59    @Ignore public boolean refreshInfo = false;
  60  
  61    /**
  62     * 是否是新任务，{@code true} 新任务
  63     */
  64    @Ignore public boolean isNewTask = false;
  65  
  66    /**
  67     * 任务状态，和Entity的state同步
  68     */
  69    public int state = IEntity.STATE_WAIT;
  70  
  71    /**
  72     * 请求类型
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  73 -   * {@link AbsTaskEntity#HTTP}、{@link AbsTaskEntity#FTP}</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +   * {@link AbsTaskEntity#HTTP}、{@link AbsTaskEntity#FTP}、{@link AbsTaskEntity#FTP_DIR}</span>
  75     */
  76    public int requestType = HTTP;

  77  
  78    /**
  79     * http 请求头
  80     */
  81    public Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();
  82  
  83    /**
  84     * 字符编码，默认为&quot;utf-8&quot;
  85     */
  86    public String charSet = &quot;utf-8&quot;;
  87  
  88    /**
  89     * 网络请求类型
  90     */
  91    public RequestEnum requestEnum = RequestEnum.GET;
  92  
  93    /**
  94     * 从header中含有的文件md5码信息所需要的key
  95     */
  96    public String md5Key = &quot;Content-MD5&quot;;
  97  
  98    /**
  99     * 从header中获取文件描述信息所需要的key
 100     */
 101    public String dispositionKey = &quot;Content-Disposition&quot;;
 102  
 103    /**
 104     * 重定向后，从header中获取新url所需要的key
 105     */
 106    public String redirectUrlKey = &quot;location&quot;;
 107  
 108    /**
 109     * 从Disposition获取的文件名说需要的key
 110     */
 111    public String dispositionFileKey = &quot;attachment;filename&quot;;
 112  
 113    /**
 114     * 从header中含有的文件长度信息所需要的key
 115     */
 116    public String contentLength = &quot;Content-Length&quot;;
 117  
 118    /**
 119     * 重定向链接
 120     */
 121    public String redirectUrl = &quot;&quot;;
 122  
 123    /**
 124     * {@code true}  删除任务数据库记录，并且删除已经下载完成的文件
 125     * {@code false} 如果任务已经完成，只删除任务数据库记录
 126     */
 127    @Ignore public boolean removeFile = false;
 128  
 129    /**
 130     * 是否支持断点, {@code true} 为支持断点
 131     */
 132    public boolean isSupportBP = true;
 133  
 134    /**
 135     * 状态码
 136     */
 137    public int code;
 138  
 139    public abstract ENTITY getEntity();
 140  
 141    /**
 142     * 获取任务下载状态
 143     *
 144     * @return {@link IEntity}
 145     */
 146    public int getState() {
 147      return getEntity().getState();
 148    }
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 150 +  @Override public void deleteData() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 151 +    if (getEntity() != null) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +      getEntity().deleteData();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 153 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 154 +    super.deleteData();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 155 +  }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 156 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 157 +  @Override public void update() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 158 +    if (getEntity() != null) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 159 +      getEntity().update();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 161 +    super.update();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 162 +  }</span>
 163  }</pre></td>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  package com.arialyy.aria.core.inf;
  17  

  18  import com.arialyy.aria.core.common.RequestEnum;
  19  import com.arialyy.aria.orm.DbEntity;
  20  import com.arialyy.aria.orm.Ignore;
  21  import com.arialyy.aria.orm.Primary;
  22  import java.util.HashMap;
  23  import java.util.Map;
  24  
  25  /**
  26   * Created by lyy on 2017/2/23.
  27   * 所有任务实体的父类
  28   */
  29  public abstract class AbsTaskEntity&lt;ENTITY extends AbsEntity&gt; extends DbEntity {
  30    /**
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  31 -   * HTTP下载</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +   * HTTP单任务载</span>
  33     */
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  34 -  public static final int HTTP = 0x11;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +  public static final int D_HTTP = 0x11;</span>
  36    /**
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  37 -   * FTP当文件下载</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  38 +   *  HTTP任务组下载</span>
  39     */
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  40 -  public static final int FTP = 0x12;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  41 +  public static final int DG_HTTP = 0x12;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  42 +  /**</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  43 +   * HTTP单文件上传</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  44 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  45 +  public static final int U_HTTP = 0xA1;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  46 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  47 +  /**</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  48 +   * FTP单文件下载</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  49 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  50 +  public static final int D_FTP = 0x13;</span>
  51    /**
  52     * FTP文件夹下载，为避免登录过多，子任务由单线程进行处理
  53     */
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  54 -  public static final int FTP_DIR = 0x13;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 +  public static final int D_FTP_DIR = 0x14;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +  /**</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 +   * FTP单文件上传</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +  public static final int U_FTP = 0xA2;</span>
  60  
  61    /**
  62     * Task实体对应的key
  63     */
  64    @Primary public String key = &quot;&quot;;
  65  
  66    /**
  67     * 账号和密码
  68     */
  69    @Ignore public String userName, userPw, account, serverIp;
  70    @Ignore public int port;

  71  
  72    /**
  73     * 刷新信息 {@code true} 重新刷新下载信息
  74     */
  75    @Ignore public boolean refreshInfo = false;
  76  
  77    /**
  78     * 是否是新任务，{@code true} 新任务
  79     */
  80    @Ignore public boolean isNewTask = false;
  81  
  82    /**
  83     * 任务状态，和Entity的state同步
  84     */
  85    public int state = IEntity.STATE_WAIT;
  86  
  87    /**
  88     * 请求类型
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  89 -   * {@link AbsTaskEntity#HTTP}、{@link AbsTaskEntity#FTP}</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  90 +   * {@link AbsTaskEntity#D_HTTP}、{@link AbsTaskEntity#D_FTP}</span>
  91     */
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  92 -  public int requestType = HTTP;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  93 +  public int requestType = D_HTTP;</span>
  94  
  95    /**
  96     * http 请求头
  97     */
  98    public Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();
  99  
 100    /**
 101     * 字符编码，默认为&quot;utf-8&quot;
 102     */
 103    public String charSet = &quot;utf-8&quot;;
 104  
 105    /**
 106     * 网络请求类型
 107     */
 108    public RequestEnum requestEnum = RequestEnum.GET;
 109  
 110    /**
 111     * 从header中含有的文件md5码信息所需要的key
 112     */
 113    public String md5Key = &quot;Content-MD5&quot;;
 114  
 115    /**
 116     * 从header中获取文件描述信息所需要的key
 117     */
 118    public String dispositionKey = &quot;Content-Disposition&quot;;
 119  
 120    /**
 121     * 重定向后，从header中获取新url所需要的key
 122     */
 123    public String redirectUrlKey = &quot;location&quot;;
 124  
 125    /**
 126     * 从Disposition获取的文件名说需要的key
 127     */
 128    public String dispositionFileKey = &quot;attachment;filename&quot;;
 129  
 130    /**
 131     * 从header中含有的文件长度信息所需要的key
 132     */
 133    public String contentLength = &quot;Content-Length&quot;;
 134  
 135    /**
 136     * 重定向链接
 137     */
 138    public String redirectUrl = &quot;&quot;;
 139  
 140    /**
 141     * {@code true}  删除任务数据库记录，并且删除已经下载完成的文件
 142     * {@code false} 如果任务已经完成，只删除任务数据库记录
 143     */
 144    @Ignore public boolean removeFile = false;
 145  
 146    /**
 147     * 是否支持断点, {@code true} 为支持断点
 148     */
 149    public boolean isSupportBP = true;
 150  
 151    /**
 152     * 状态码
 153     */
 154    public int code;
 155  
 156    public abstract ENTITY getEntity();
 157  
 158    /**
 159     * 获取任务下载状态
 160     *
 161     * @return {@link IEntity}
 162     */
 163    public int getState() {
 164      return getEntity().getState();
 165    }














 166  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            