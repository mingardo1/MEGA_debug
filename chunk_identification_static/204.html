<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>204</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    204
                    <a href="203.html">prev</a>
                    <a href="205.html">next</a>
                    <a href="204_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_e7f6e916645f3d1f94924346de9c404ec2256c68_admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;e7f6e916645f3d1f94924346de9c404ec2256c68:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;e7f6e916645f3d1f94924346de9c404ec2256c68^1:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;e7f6e916645f3d1f94924346de9c404ec2256c68^2:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;bd88c420aa58267bc3f5f4c47a59d49fc79429eb:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b], [b]], subset: [[b], [b], [b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span  style="">  18                                                                                                          </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  19 package org.broadleafcommerce.openadmin.server.service.persistence.module;                               </span>
<span  style="">  20                                                                                                          </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  21 import org.apache.commons.beanutils.PropertyUtils;                                                       </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  22 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  23 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  24 import org.apache.commons.lang.StringUtils;                                                              </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  25 import org.apache.commons.lang3.BooleanUtils;                                                            </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  26 import org.apache.commons.lang3.reflect.FieldUtils;                                                      </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  27 import org.apache.commons.lang3.reflect.MethodUtils;                                                     </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  28 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  29 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  30 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  31 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  32 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  33 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  34 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  35 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  36 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  37 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  38 import org.broadleafcommerce.common.money.Money;                                                         </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  39 import org.broadleafcommerce.common.presentation.client.OperationType;                                   </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  40 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  41 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  42 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  43 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  44 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  45 import org.broadleafcommerce.common.util.ValidationUtil;                                                 </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  46 import org.broadleafcommerce.common.util.dao.TQJoin;                                                     </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  47 import org.broadleafcommerce.common.util.dao.TQOrder;                                                    </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  48 import org.broadleafcommerce.common.util.dao.TQRestriction;                                              </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  49 import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                          </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  50 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-9032655456699873894" onmouseenter="enter('-9032655456699873894');" onmouseout="out('-9032655456699873894');" style="">  51 import org.broadleafcommerce.openadmin.dto.*;                                                            </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style=""><abbr title="  52 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;">  52 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvidðŸ”µ</abbr></span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  53 import org.broadleafcommerce.openadmin.server.service.ValidationException;                               </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  54 import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;      </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  55 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                  </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  56 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  57 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="5058784187408591906" onmouseenter="enter('5058784187408591906');" onmouseout="out('5058784187408591906');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  58 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.*;                     </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  59 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60 import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                        </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  61 import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                   </span>
<span class="7333603239996951733" onmouseenter="enter('7333603239996951733');" onmouseout="out('7333603239996951733');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62 import org.broadleafcommerce.openadmin.dto.MergedPropertyType;                                           </span>
<span class="5387066876064049952" onmouseenter="enter('5387066876064049952');" onmouseout="out('5387066876064049952');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63 import org.broadleafcommerce.openadmin.dto.PersistencePackage;                                           </span>
<span class="8079401142601162613" onmouseenter="enter('8079401142601162613');" onmouseout="out('8079401142601162613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64 import org.broadleafcommerce.openadmin.dto.PersistencePerspective;                                       </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="-3940598810559639452" onmouseenter="enter('-3940598810559639452');" onmouseout="out('-3940598810559639452');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66 import org.broadleafcommerce.openadmin.dto.SortDirection;                                                </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  67 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;">  67 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvidðŸ”µ</abbr></span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68 import org.broadleafcommerce.openadmin.server.service.ValidationException;                               </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69 import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;      </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                  </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="-1323272794227318551" onmouseenter="enter('-1323272794227318551');" onmouseout="out('-1323272794227318551');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  72 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaConversionException;">  72 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaConversionExcepðŸ”µ</abbr></span>
<span class="-4125327013079009203" onmouseenter="enter('-4125327013079009203');" onmouseout="out('-4125327013079009203');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaTranslator;    </span>
<span class="7637154476457570035" onmouseenter="enter('7637154476457570035');" onmouseout="out('7637154476457570035');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath;             </span>
<span class="7520439988643323618" onmouseenter="enter('7520439988643323618');" onmouseout="out('7520439988643323618');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FilterMapping;         </span>
<span class="-4250688222066528552" onmouseenter="enter('-4250688222066528552');" onmouseout="out('-4250688222066528552');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.RestrictionFactory;    </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  77 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter;">  77 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueCoðŸ”µ</abbr></span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  78 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;">  78 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicatePrðŸ”µ</abbr></span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  79 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;">  79 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateðŸ”µ</abbr></span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  80 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;">  80 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvðŸ”µ</abbr></span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  81 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  81 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  82 =======                                                                                                  </span>
<span class="-1323272794227318551" onmouseenter="enter('-1323272794227318551');" onmouseout="out('-1323272794227318551');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  83 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaConversionException;">  83 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaConversionExcepðŸ”µ</abbr></span>
<span class="-4125327013079009203" onmouseenter="enter('-4125327013079009203');" onmouseout="out('-4125327013079009203');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaTranslator;    </span>
<span class="7637154476457570035" onmouseenter="enter('7637154476457570035');" onmouseout="out('7637154476457570035');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath;             </span>
<span class="1663650800150084878" onmouseenter="enter('1663650800150084878');" onmouseout="out('1663650800150084878');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  86 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPathBuilder;      </span>
<span class="7520439988643323618" onmouseenter="enter('7520439988643323618');" onmouseout="out('7520439988643323618');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  87 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FilterMapping;         </span>
<span class="-8754722050104399052" onmouseenter="enter('-8754722050104399052');" onmouseout="out('-8754722050104399052');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  88 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.Restriction;           </span>
<span class="-4250688222066528552" onmouseenter="enter('-4250688222066528552');" onmouseout="out('-4250688222066528552');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  89 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.RestrictionFactory;    </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  90 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style=""><abbr title="  91 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter;">  91 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueCoðŸ”µ</abbr></span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style=""><abbr title="  92 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;">  92 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicatePrðŸ”µ</abbr></span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style=""><abbr title="  93 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;">  93 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateðŸ”µ</abbr></span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style=""><abbr title="  94 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;">  94 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvðŸ”µ</abbr></span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  95 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  95 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style=""><abbr title="  96 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;">  96 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvideðŸ”µ</abbr></span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  97 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  97 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterProperðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style=""><abbr title="  98 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;">  98 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappinðŸ”µ</abbr></span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style=""><abbr title="  99 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;">  99 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueReqðŸ”µ</abbr></span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style=""><abbr title=" 100 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;"> 100 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueReðŸ”µ</abbr></span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style=""> 101 import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;     </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style=""><abbr title=" 102 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;"> 102 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidatoðŸ”µ</abbr></span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style=""> 103 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;   </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style=""> 104 import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                     </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style=""> 105 import org.hibernate.FlushMode;                                                                          </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style=""> 106 import org.hibernate.Session;                                                                            </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style=""> 107 import org.springframework.beans.BeansException;                                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 108 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style=""> 109 import org.springframework.context.ApplicationContext;                                                   </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style=""> 110 import org.springframework.context.ApplicationContextAware;                                              </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style=""> 111 import org.springframework.context.annotation.Primary;                                                   </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style=""> 112 import org.springframework.context.annotation.Scope;                                                     </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style=""> 113 import org.springframework.stereotype.Component;                                                         </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style=""> 114 import org.springframework.util.Assert;                                                                  </span>
<span  style=""> 115                                                                                                          </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style=""> 116 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 117 import javax.annotation.Resource;                                                                        </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style=""> 118 import java.io.Serializable;                                                                             </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style=""> 119 import java.lang.reflect.Field;                                                                          </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style=""> 120 import java.lang.reflect.InvocationTargetException;                                                      </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style=""> 121 import java.lang.reflect.Method;                                                                         </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style=""> 122 import java.lang.reflect.ParameterizedType;                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 123 import java.math.BigDecimal;                                                                             </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style=""> 124 import java.sql.Timestamp;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style=""> 125 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style=""> 126 import java.text.NumberFormat;                                                                           </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 127 import java.text.SimpleDateFormat;                                                                       </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 128 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="196713859697444637" onmouseenter="enter('196713859697444637');" onmouseout="out('196713859697444637');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 129 import java.util.*;                                                                                      </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 130 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131 import org.springframework.context.annotation.Scope;                                                     </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132 import org.springframework.stereotype.Component;                                                         </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133 import org.springframework.util.Assert;                                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134                                                                                                          </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135 import java.io.Serializable;                                                                             </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136 import java.lang.reflect.Field;                                                                          </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137 import java.lang.reflect.InvocationTargetException;                                                      </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138 import java.lang.reflect.Method;                                                                         </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139 import java.lang.reflect.ParameterizedType;                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140 import java.math.BigDecimal;                                                                             </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141 import java.sql.Timestamp;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143 import java.text.NumberFormat;                                                                           </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144 import java.text.SimpleDateFormat;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146 import java.util.Arrays;                                                                                 </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147 import java.util.Calendar;                                                                               </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 149 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150 import java.util.Comparator;                                                                             </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156 import java.util.Map.Entry;                                                                              </span>
<span class="-61738751204335518" onmouseenter="enter('-61738751204335518');" onmouseout="out('-61738751204335518');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157 import java.util.StringTokenizer;                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158                                                                                                          </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160 import javax.annotation.Resource;                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162 /**                                                                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 163 =======                                                                                                  </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 164 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 165 import java.util.Arrays;                                                                                 </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 166 import java.util.Calendar;                                                                               </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 167 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 168 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 169 import java.util.Comparator;                                                                             </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 170 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 171 import java.util.HashMap;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 172 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 173 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 174 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 175 import java.util.Map;                                                                                    </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 176 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 177 import java.util.Map.Entry;                                                                              </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 178 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 179 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180 import org.springframework.util.Assert;                                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181                                                                                                          </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182 import java.io.Serializable;                                                                             </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183 import java.lang.reflect.Field;                                                                          </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 184 import java.lang.reflect.InvocationTargetException;                                                      </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 185 import java.lang.reflect.Method;                                                                         </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 186 import java.lang.reflect.ParameterizedType;                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 187 import java.math.BigDecimal;                                                                             </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 188 import java.sql.Timestamp;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 189 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 190 import java.text.NumberFormat;                                                                           </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 191 import java.text.SimpleDateFormat;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 192 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193 import java.util.Arrays;                                                                                 </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 194 import java.util.Calendar;                                                                               </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 195 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 196 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 197 import java.util.Comparator;                                                                             </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 198 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 199 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 200 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 201 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 202 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 203 import java.util.Map.Entry;                                                                              </span>
<span class="-61738751204335518" onmouseenter="enter('-61738751204335518');" onmouseout="out('-61738751204335518');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 204 import java.util.StringTokenizer;                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 205                                                                                                          </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 206 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 207 import javax.annotation.Resource;                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 208                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 209 /**                                                                                                      </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 210  * @author jfischer                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 211  */                                                                                                      </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 212 @Primary                                                                                                 </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 213 @Component(&quot;blBasicPersistenceModule&quot;)                                                                   </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 214 @Scope(&quot;prototype&quot;)                                                                                      </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 215 public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {</span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 216                                                                                                          </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 217     private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 218                                                                                                          </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 219     public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                           </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 220     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 221 =======                                                                                                  </span>
<span class="-61738751204335518" onmouseenter="enter('-61738751204335518');" onmouseout="out('-61738751204335518');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 222 import java.util.StringTokenizer;                                                                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 223                                                                                                          </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 224 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 225 import javax.annotation.Resource;                                                                        </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 226 import javax.persistence.criteria.CriteriaBuilder;                                                       </span>
<span class="2535099540501772744" onmouseenter="enter('2535099540501772744');" onmouseout="out('2535099540501772744');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 227 import javax.persistence.criteria.From;                                                                  </span>
<span class="5773424155764142692" onmouseenter="enter('5773424155764142692');" onmouseout="out('5773424155764142692');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 228 import javax.persistence.criteria.Path;                                                                  </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 229 import javax.persistence.criteria.Predicate;                                                             </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 230 import javax.persistence.criteria.Root;                                                                  </span>
<span class="1578689085913073314" onmouseenter="enter('1578689085913073314');" onmouseout="out('1578689085913073314');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 231 import javax.persistence.criteria.Subquery;                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 232 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 233                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 234 /**                                                                                                      </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style=""> 235  * @author jfischer                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 236  */                                                                                                      </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style=""> 237 @Primary                                                                                                 </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style=""> 238 @Component(&quot;blBasicPersistenceModule&quot;)                                                                   </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style=""> 239 @Scope(&quot;prototype&quot;)                                                                                      </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style=""> 240 public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {</span>
<span  style=""> 241                                                                                                          </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 242     private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                      </span>
<span  style=""> 243                                                                                                          </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 244     public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                           </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 245     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 246                                                                                                          </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 247     protected ApplicationContext applicationContext;                                                     </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 248     protected PersistenceManager persistenceManager;                                                     </span>
<span  style=""> 249                                                                                                          </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 250     @Resource(name = &quot;blEntityValidatorService&quot;)                                                         </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 251     protected EntityValidatorService entityValidatorService;                                             </span>
<span  style=""> 252                                                                                                          </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 253     @Resource(name = &quot;blPersistenceProviders&quot;)                                                           </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 254     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 254     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistencePrðŸ”µ</abbr></span>
<span  style=""> 255                                                                                                          </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 256     @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                 </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 257     protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                    </span>
<span  style=""> 258                                                                                                          </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 259     @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 260     protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                  </span>
<span  style=""> 261                                                                                                          </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 262     @Resource(name = &quot;blCriteriaTranslator&quot;)                                                             </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 263     protected CriteriaTranslator criteriaTranslator;                                                     </span>
<span  style=""> 264                                                                                                          </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 265     @Resource(name = &quot;blRestrictionFactory&quot;)                                                             </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 266     protected RestrictionFactory restrictionFactory;                                                     </span>
<span  style=""> 267                                                                                                          </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 268     @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                         </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 269     protected BasicPersistenceModuleExtensionManager extensionManager;                                   </span>
<span  style=""> 270                                                                                                          </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 271     @Resource(name = &quot;blFetchWrapper&quot;)                                                                   </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 272     protected FetchWrapper fetchWrapper;                                                                 </span>
<span  style=""> 273                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 274     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 275     protected boolean useTranslationSearch;                                                              </span>
<span  style=""> 276                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 277     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 278     protected LocaleService localeService;                                                               </span>
<span  style=""> 279                                                                                                          </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 280     @PostConstruct                                                                                       </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 281     public void init() {                                                                                 </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 282         Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {         </span>
<span  style=""> 283                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 284             @Override                                                                                    </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 285             public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {               </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 286                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 288         });                                                                                              </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 289         Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {           </span>
<span  style=""> 290                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291             @Override                                                                                    </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 292             public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {     </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 293                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 295         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296     }                                                                                                    </span>
<span  style=""> 297                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 298     @Override                                                                                            </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 299     public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {     </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 300         this.applicationContext = applicationContext;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301     }                                                                                                    </span>
<span  style=""> 302                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 303     @Override                                                                                            </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 304     public boolean isCompatible(OperationType operationType) {                                           </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""><abbr title=" 305         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;"> 305         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationTypðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span  style=""> 307                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 308     @Override                                                                                            </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 309     public FieldManager getFieldManager() {                                                              </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 310         return persistenceManager.getDynamicEntityDao().getFieldManager();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311     }                                                                                                    </span>
<span  style=""> 312                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 313     @Override                                                                                            </span>
<span class="6457346333778015301" onmouseenter="enter('6457346333778015301');" onmouseout="out('6457346333778015301');" style=""> 314     public FieldManager getFieldManager(boolean cleanFieldManger) {                                      </span>
<span class="-7823051609966781187" onmouseenter="enter('-7823051609966781187');" onmouseout="out('-7823051609966781187');" style=""> 315         return persistenceManager.getDynamicEntityDao().getFieldManager(cleanFieldManger);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316     }                                                                                                    </span>
<span  style=""> 317                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 318     @Override                                                                                            </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 319     public DecimalFormat getDecimalFormatter() {                                                         </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 320         BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();              </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 321         Locale locale = brc.getJavaLocale();                                                             </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 322         DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                         </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 323         format.applyPattern(&quot;0.########&quot;);                                                               </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 324         format.setGroupingUsed(false);                                                                   </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 325         return format;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326     }                                                                                                    </span>
<span  style=""> 327                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 328     @Override                                                                                            </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 329     public SimpleDateFormat getSimpleDateFormatter() {                                                   </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 330         return FormatUtil.getDateFormat();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331     }                                                                                                    </span>
<span  style=""> 332                                                                                                          </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""><abbr title=" 333     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {"> 333     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata)ðŸ”µ</abbr></span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 334         if (metadata == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 335             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336         }                                                                                                </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 337         Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                        </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 338         for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                             </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 339             String fieldName = entry.getKey();                                                           </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 340             FieldMetadata md = entry.getValue();                                                         </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 341             // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 341             // Detect instances where the actual metadata for the field is some sort of CollectionMetadatðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 342             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 342             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 343             // can appropriate handle filtration and population                                          </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 344             if (entry.getValue() instanceof BasicFieldMetadata) {                                        </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 345                 newMap.put(fieldName, md);                                                               </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 346             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 346             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FORðŸ”µ</abbr></span>
<span class="-8485840589316329792" onmouseenter="enter('-8485840589316329792');" onmouseout="out('-8485840589316329792');" style=""> 347                 newMap.put(fieldName,                                                                    </span>
<span class="-7674878801561950856" onmouseenter="enter('-7674878801561950856');" onmouseout="out('-7674878801561950856');" style=""><abbr title=" 348                         (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY));"> 348                         (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350         }                                                                                                </span>
<span  style=""> 351                                                                                                          </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 352         return newMap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353     }                                                                                                    </span>
<span  style=""> 354                                                                                                          </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 355     protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                             </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 356         Class&lt;?&gt; response;                                                                               </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 357         switch (fieldType) {                                                                             </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 358             case BOOLEAN:                                                                                </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 359                 response = Boolean.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 360                 break;                                                                                   </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 361             case DATE:                                                                                   </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 362                 response = Date.class;                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 363                 break;                                                                                   </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 364             case DECIMAL:                                                                                </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 365                 response = BigDecimal.class;                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 366                 break;                                                                                   </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 367             case MONEY:                                                                                  </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 368                 response = Money.class;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 369                 break;                                                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 370             case INTEGER:                                                                                </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 371                 response = Integer.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 372                 break;                                                                                   </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 373             case UNKNOWN:                                                                                </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 374                 response = null;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 375                 break;                                                                                   </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 376             default:                                                                                     </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 377                 response = String.class;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 378                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379         }                                                                                                </span>
<span  style=""> 380                                                                                                          </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 381         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382     }                                                                                                    </span>
<span  style=""> 383                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384     @Override                                                                                            </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 385     public Serializable createPopulatedInstance(Serializable instance, Entity entity,                    </span>
<span class="7620597898847416584" onmouseenter="enter('7620597898847416584');" onmouseout="out('7620597898847416584');" style=""> 386             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException { </span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 387         return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388     }                                                                                                    </span>
<span  style=""> 389                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 390     @Override                                                                                            </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 391     public Serializable createPopulatedInstance(Serializable instance, Entity entity,                    </span>
<span class="-6938882731089232507" onmouseenter="enter('-6938882731089232507');" onmouseout="out('-6938882731089232507');" style=""><abbr title=" 392             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 392             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedPrðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""><abbr title=" 393         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);"> 393         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredPropertðŸ”µ</abbr></span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 394         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 395         boolean handled = false;                                                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 396         for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {            </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 397             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 397             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPrðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 398             if (MetadataProviderResponse.NOT_HANDLED != response) {                                      </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 399                 handled = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400             }                                                                                            </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 401             if (MetadataProviderResponse.HANDLED_BREAK == response) {                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 402                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404         }                                                                                                </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 405         if (!handled) {                                                                                  </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 406             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 406             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407         }                                                                                                </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 408         //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 408         //Order media field, map field and rule builder fields last, as they will have some validation coðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 409         Property[] sortedProperties = entity.getProperties();                                            </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 410         Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                       </span>
<span  style=""> 411                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 412             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 413             public int compare(Property o1, Property o2) {                                               </span>
<span class="4801041391951231473" onmouseenter="enter('4801041391951231473');" onmouseout="out('4801041391951231473');" style=""> 414                 BasicFieldMetadata mo1 = (BasicFieldMetadata) mergedProperties.get(o1.getName());        </span>
<span class="8712312491906706674" onmouseenter="enter('8712312491906706674');" onmouseout="out('8712312491906706674');" style=""> 415                 BasicFieldMetadata mo2 = (BasicFieldMetadata) mergedProperties.get(o2.getName());        </span>
<span class="5597729834250389465" onmouseenter="enter('5597729834250389465');" onmouseout="out('5597729834250389465');" style=""><abbr title=" 416                 boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo1.getFieldType() ||"> 416                 boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (ðŸ”µ</abbr></span>
<span class="-5228840553210193176" onmouseenter="enter('-5228840553210193176');" onmouseout="out('-5228840553210193176');" style=""> 417                         SupportedFieldType.RULE_WITH_QUANTITY==mo1.getFieldType() ||                     </span>
<span class="-2825740162482404988" onmouseenter="enter('-2825740162482404988');" onmouseout="out('-2825740162482404988');" style=""> 418                         SupportedFieldType.RULE_SIMPLE_TIME==mo1.getFieldType() ||                       </span>
<span class="-2758640436691235457" onmouseenter="enter('-2758640436691235457');" onmouseout="out('-2758640436691235457');" style=""><abbr title=" 419                         SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 419                         SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManageðŸ”µ</abbr></span>
<span class="4460185052151715074" onmouseenter="enter('4460185052151715074');" onmouseout="out('4460185052151715074');" style=""><abbr title=" 420                 boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo2.getFieldType() ||"> 420                 boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (ðŸ”µ</abbr></span>
<span class="1101038090453452590" onmouseenter="enter('1101038090453452590');" onmouseout="out('1101038090453452590');" style=""> 421                         SupportedFieldType.RULE_WITH_QUANTITY==mo2.getFieldType() ||                     </span>
<span class="-8197603398477948159" onmouseenter="enter('-8197603398477948159');" onmouseout="out('-8197603398477948159');" style=""> 422                         SupportedFieldType.RULE_SIMPLE_TIME==mo2.getFieldType() ||                       </span>
<span class="-275758415706895485" onmouseenter="enter('-275758415706895485');" onmouseout="out('-275758415706895485');" style=""><abbr title=" 423                         SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 423                         SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManageðŸ”µ</abbr></span>
<span class="-2026914999367619686" onmouseenter="enter('-2026914999367619686');" onmouseout="out('-2026914999367619686');" style=""> 424                 if (isLate1 &amp;&amp; !isLate2) {                                                               </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 425                     return 1;                                                                            </span>
<span class="-3681644454129428558" onmouseenter="enter('-3681644454129428558');" onmouseout="out('-3681644454129428558');" style=""> 426                 } else if (!isLate1 &amp;&amp; isLate2) {                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 427                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428                 }                                                                                        </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 429                 return 0;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 431         });                                                                                              </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 432         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 432         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrapðŸ”µ</abbr></span>
<span class="5994630726155221613" onmouseenter="enter('5994630726155221613');" onmouseout="out('5994630726155221613');" style=""> 433         FlushMode originalFlushMode = session.getHibernateFlushMode();                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 434         try {                                                                                            </span>
<span class="5642929065352278415" onmouseenter="enter('5642929065352278415');" onmouseout="out('5642929065352278415');" style=""> 435             session.setHibernateFlushMode(FlushMode.MANUAL);                                             </span>
<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 436             RuntimeException entityPersistenceException = null;                                          </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 437             for (Property property : sortedProperties) {                                                 </span>
<span class="1357949122558141334" onmouseenter="enter('1357949122558141334');" onmouseout="out('1357949122558141334');" style=""><abbr title=" 438                 BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName());"> 438                 BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName(ðŸ”µ</abbr></span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 439                 Class&lt;?&gt; returnType;                                                                     </span>
<span class="8439611434668123958" onmouseenter="enter('8439611434668123958');" onmouseout="out('8439611434668123958');" style=""><abbr title=" 440                 if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWith(&quot;__&quot;)) {"> 440                 if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().sðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 441                     Field field = fieldManager.getField(instance.getClass(), property.getName());        </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 442                     if (field == null) {                                                                 </span>
<span class="2139581581669054854" onmouseenter="enter('2139581581669054854');" onmouseout="out('2139581581669054854');" style=""><abbr title=" 443                         LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 443                         LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 444                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445                     }                                                                                    </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 446                     returnType = field.getType();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 447                 } else {                                                                                 </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 448                     if (metadata == null) {                                                              </span>
<span class="8114946394939525604" onmouseenter="enter('8114946394939525604');" onmouseout="out('8114946394939525604');" style=""><abbr title=" 449                         LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 449                         LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StriðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 450                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                     }                                                                                    </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 452                     returnType = getMapFieldType(instance, fieldManager, property);                      </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 453                     if (returnType == null) {                                                            </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 454                         returnType = getBasicBroadleafType(metadata.getFieldType());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456                 }                                                                                        </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 457                 if (returnType == null) {                                                                </span>
<span class="8716882681587381997" onmouseenter="enter('8716882681587381997');" onmouseout="out('8716882681587381997');" style=""><abbr title=" 458                     throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + property.getName() + &quot;)&quot;);"> 458                     throw new IllegalAccessException(&quot;Unable to determine the value type for the propertyðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459                 }                                                                                        </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 460                 String value = property.getValue();                                                      </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 461                 if (metadata != null) {                                                                  </span>
<span  style=""> 462                                                                                                          </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 463                     if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                    </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 464                         if (value == null) {                                                             </span>
<span class="-8520936090313964890" onmouseenter="enter('-8520936090313964890');" onmouseout="out('-8520936090313964890');" style=""> 465                             String defaultValue = metadata.getDefaultValue();                            </span>
<span class="-7748715783254025298" onmouseenter="enter('-7748715783254025298');" onmouseout="out('-7748715783254025298');" style=""> 466                             value = StringUtils.isBlank(defaultValue)? &quot;false&quot; : defaultValue;           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467                         }                                                                                </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 468                     } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 469                         if (StringUtils.isEmpty(value)) {                                                </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 470                             value = null;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472                     }                                                                                    </span>
<span  style=""> 473                                                                                                          </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 474                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 474                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity,ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 475                         boolean isValid = true;                                                          </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 476                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 476                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, propðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 477                         handled = false;                                                                 </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 478                         if (value != null) {                                                             </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 479                             for (PopulateValueRequestValidator validator : populateValidators) {         </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""><abbr title=" 480                                 PropertyValidationResult validationResult = validator.validate(request, instance);"> 480                                 PropertyValidationResult validationResult = validator.validate(request, iðŸ”µ</abbr></span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 481                                 if (!validationResult.isValid()) {                                       </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 482                                     entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 482                                     entity.addValidationError(property.getName(), validationResult.getErrðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 483                                     isValid = false;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486                         }                                                                                </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 487                         if (isValid) {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 488                             try {                                                                        </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 489                                 boolean isBreakDetected = false;                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 490                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 490                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceðŸ”µ</abbr></span>
<span class="-2175392382273122455" onmouseenter="enter('-2175392382273122455');" onmouseout="out('-2175392382273122455');" style=""><abbr title=" 491                                     if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {"> 491                                     if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (vaðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 492                                         MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 492                                         MetadataProviderResponse response = fieldPersistenceProvider.popuðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 493                                         if (MetadataProviderResponse.NOT_HANDLED != response) {          </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 494                                             handled = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495                                         }                                                                </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 496                                         if (MetadataProviderResponse.HANDLED_BREAK == response) {        </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 497                                             isBreakDetected = true;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500                                 }                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 501                                 if (!handled) {                                                          </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 502                                     if (value == null) {                                                 </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 503                                         property.setIsDirty(true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504                                     }                                                                    </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 505                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 505                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequesðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 506                                     if (value == null) {                                                 </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 507                                         fieldManager.setFieldValue(instance, property.getName(), null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509                                 }                                                                        </span>
<span class="8793300741685062154" onmouseenter="enter('8793300741685062154');" onmouseout="out('8793300741685062154');" style=""><abbr title=" 510                             } catch (ParentEntityPersistenceException | javax.validation.ValidationException e) {"> 510                             } catch (ParentEntityPersistenceException | javax.validation.ValidationExceptðŸ”µ</abbr></span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 511                                 entityPersistenceException = e;                                          </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 512                                 cleanupFailedPersistenceAttempt(instance);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 513                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518             }                                                                                            </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 519             // Only check validation if not the initial add                                              </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 520             if (!entity.isPreAdd()) {                                                                    </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 521                 validate(entity, instance, mergedProperties, validateUnsubmittedProperties);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522             }                                                                                            </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""><abbr title=" 523             //if validation failed, refresh the current instance so that none of the changes will be persisted"> 523             //if validation failed, refresh the current instance so that none of the changes will be persðŸ”µ</abbr></span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 524             if (entity.isValidationFailure()) {                                                          </span>
<span class="-5245333264083845326" onmouseenter="enter('-5245333264083845326');" onmouseout="out('-5245333264083845326');" style=""> 525                 //only refresh the instance if it was managed to begin with                              </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""><abbr title=" 526                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {"> 526                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instanceðŸ”µ</abbr></span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 527                     persistenceManager.getDynamicEntityDao().refresh(instance);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528                 }                                                                                        </span>
<span  style=""> 529                                                                                                          </span>
<span class="-2797407664577460515" onmouseenter="enter('-2797407664577460515');" onmouseout="out('-2797407664577460515');" style=""><abbr title=" 530                 //re-initialize the valid properties for the entity in order to deal with the potential of not"> 530                 //re-initialize the valid properties for the entity in order to deal with the potential oðŸ”µ</abbr></span>
<span class="7620881433898036398" onmouseenter="enter('7620881433898036398');" onmouseout="out('7620881433898036398');" style=""> 531                 //completely sending over all checkbox/radio fields                                      </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 532                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 533                 entityList.add(instance);                                                                </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 534                 Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];          </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 535                 invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());               </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 536                 invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                   </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 537                 invalid.overridePropertyValues(entity);                                                  </span>
<span  style=""> 538                                                                                                          </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 539                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 539                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), ðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 540                 throw new ValidationException(invalid, message);                                         </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 541             } else if (entityPersistenceException != null) {                                             </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 542                 throw ExceptionHelper.refineException(entityPersistenceException.getCause());            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 543             } else {                                                                                     </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 544                 fieldManager.persistMiddleEntities();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545             }                                                                                            </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 546         } catch (IllegalAccessException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 547             throw new PersistenceException(e);                                                           </span>
<span class="6243028624057522413" onmouseenter="enter('6243028624057522413');" onmouseout="out('6243028624057522413');" style=""> 548         } catch (InstantiationException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 549             throw new PersistenceException(e);                                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 550         } finally {                                                                                      </span>
<span class="4677599505604490897" onmouseenter="enter('4677599505604490897');" onmouseout="out('4677599505604490897');" style=""> 551             session.setHibernateFlushMode(originalFlushMode);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552         }                                                                                                </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 553         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554     }                                                                                                    </span>
<span  style=""> 555                                                                                                          </span>
<span class="461529783746476585" onmouseenter="enter('461529783746476585');" onmouseout="out('461529783746476585');" style=""><abbr title=" 556     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance,"> 556     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable iðŸ”µ</abbr></span>
<span class="3885863412641560188" onmouseenter="enter('3885863412641560188');" onmouseout="out('3885863412641560188');" style=""><abbr title=" 557                                              Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 557                                              Boolean setId, BasicFieldMetadata metadata, Entity entity, SðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 558         Boolean mutable = metadata.getMutable();                                                         </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 559         Boolean readOnly = metadata.getReadOnly();                                                       </span>
<span class="949029723485795199" onmouseenter="enter('949029723485795199');" onmouseout="out('949029723485795199');" style=""><abbr title=" 560         boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; property.getEnabled();"> 560         boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp;ðŸ”µ</abbr></span>
<span  style=""> 561                                                                                                          </span>
<span class="-5466596695953259298" onmouseenter="enter('-5466596695953259298');" onmouseout="out('-5466596695953259298');" style=""> 562         if (generalConditionsMet &amp;&amp; value == null) {                                                     </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 563             boolean currentValueIsNotNull = false;                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 564             try {                                                                                        </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 565                 currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;</span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 566             } catch (FieldNotAvailableException e) {                                                     </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 567                 throw new IllegalArgumentException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568             }                                                                                            </span>
<span  style=""> 569                                                                                                          </span>
<span class="2174296922893169949" onmouseenter="enter('2174296922893169949');" onmouseout="out('2174296922893169949');" style=""> 570             boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;        </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 571             boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;         </span>
<span  style=""> 572                                                                                                          </span>
<span class="-802153418821632058" onmouseenter="enter('-802153418821632058');" onmouseout="out('-802153418821632058');" style=""> 573             return currentValueIsNotNull &amp;&amp; !entity.isPreAdd() &amp;&amp; valueIsNotNullId &amp;&amp; valueIsNotPassword;</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574         }                                                                                                </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 575         return generalConditionsMet;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576     }                                                                                                    </span>
<span  style=""> 577                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 578     @Override                                                                                            </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 579     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 579     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;ðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 580         List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                     </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 581         records.add(record);                                                                             </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 582         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 582         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedPropertiesðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 583         return productEntities[0];                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584     }                                                                                                    </span>
<span  style=""> 585                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 586     @Override                                                                                            </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 587     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 587     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 588         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 588         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 589         return getRecord(mergedProperties, record, null, null);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590     }                                                                                                    </span>
<span  style=""> 591                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 592     @Override                                                                                            </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 593     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 593     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspectiveðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 594         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 594         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 595         return getRecords(mergedProperties, records, null, null, null);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596     }                                                                                                    </span>
<span  style=""> 597                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 598     @Override                                                                                            </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 599     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 599     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspectiveðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 600         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 600         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistenceðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601     }                                                                                                    </span>
<span  style=""> 602                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 603     @Override                                                                                            </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 604     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 604     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends SerialiðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 605         return getRecords(primaryMergedProperties, records, null, null, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606     }                                                                                                    </span>
<span  style=""> 607                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 608     @Override                                                                                            </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 609     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,             </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 610                                List&lt;? extends Serializable&gt; records,                                     </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 611                                Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,           </span>
<span class="-4377947839867578072" onmouseenter="enter('-4377947839867578072');" onmouseout="out('-4377947839867578072');" style=""> 612                                String pathToTargetObject) {                                              </span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 613         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 613         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedPropertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614     }                                                                                                    </span>
<span  style=""> 615                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 616     @Override                                                                                            </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 617     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,             </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 618                                List&lt;? extends Serializable&gt; records,                                     </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 619                                Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,           </span>
<span class="8335655514773173486" onmouseenter="enter('8335655514773173486');" onmouseout="out('8335655514773173486');" style=""> 620                                String pathToTargetObject,                                                </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 621                                String[] customCriteria) {                                                </span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 622         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 622         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfiltereðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 623         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 623         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 624         Entity[] entities = new Entity[records.size()];                                                  </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 625         int j = 0;                                                                                       </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 626         for (Serializable recordEntity : records) {                                                      </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 627             Serializable entity;                                                                         </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 628             if (pathToTargetObject != null) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 629                 try {                                                                                    </span>
<span class="-5492139625117264664" onmouseenter="enter('-5492139625117264664');" onmouseout="out('-5492139625117264664');" style=""><abbr title=" 630                     entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObject);"> 630                     entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObjðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 631                 } catch (Exception e) {                                                                  </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 632                     throw new PersistenceException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 634             } else {                                                                                     </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 635                 entity = recordEntity;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636             }                                                                                            </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 637             Entity entityItem = new Entity();                                                            </span>
<span class="3587737780108495887" onmouseenter="enter('3587737780108495887');" onmouseout="out('3587737780108495887');" style=""> 638             entityItem.setType(new String[] { entity.getClass().getName() });                            </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 639             entities[j] = entityItem;                                                                    </span>
<span  style=""> 640                                                                                                          </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 641             List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());              </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""><abbr title=" 642             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);"> 642             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria)ðŸ”µ</abbr></span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 643             if (alternateMergedProperties != null) {                                                     </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 644                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 644                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, cusðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645             }                                                                                            </span>
<span  style=""> 646                                                                                                          </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 647             // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 648             try {                                                                                        </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 649                 Property p = new Property();                                                             </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 650                 p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                    </span>
<span class="-280105646141823521" onmouseenter="enter('-280105646141823521');" onmouseout="out('-280105646141823521');" style=""> 651                 String mainEntityName = (String) MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;);  </span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 652                 p.setValue(mainEntityName);                                                              </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 653                 props.add(p);                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 654             } catch (Exception e) {                                                                      </span>
<span class="8396621627303093896" onmouseenter="enter('8396621627303093896');" onmouseout="out('8396621627303093896');" style=""> 655                 LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;,     </span>
<span class="210384044775512031" onmouseenter="enter('210384044775512031');" onmouseout="out('210384044775512031');" style=""> 656                         entity.getClass().getName()), e);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657             }                                                                                            </span>
<span  style=""> 658                                                                                                          </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 659             // Try to add the alternate id property if available                                         </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 660             if (alternateMergedProperties != null) {                                                     </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 661                 for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {        </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 662                     if (entry.getValue() instanceof BasicFieldMetadata) {                                </span>
<span class="-3735738621021538581" onmouseenter="enter('-3735738621021538581');" onmouseout="out('-3735738621021538581');" style=""><abbr title=" 663                         if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ID) {"> 663                         if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ðŸ”µ</abbr></span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""><abbr title=" 664                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();"> 664                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadðŸ”µ</abbr></span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 665                             alternateOnEntity.put(entry.getKey(), entry.getValue());                     </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 666                             List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                           </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 667                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 667                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2ðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 668                             List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                         </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 669                             for (Property prop : props2) {                                               </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 670                                 if (!prop.getName().startsWith(&quot;__&quot;)) {                                  </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 671                                     filtered.add(prop);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673                             }                                                                            </span>
<span class="7776429612545514862" onmouseenter="enter('7776429612545514862');" onmouseout="out('7776429612545514862');" style=""> 674                             if (filtered.size() == 1 &amp;&amp; !filtered.get(0).getName().contains(&quot;.&quot;)) {      </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 675                                 Property alternateIdProp = filtered.get(0);                              </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 676                                 alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                          </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 677                                 props.add(alternateIdProp);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682             }                                                                                            </span>
<span  style=""> 683                                                                                                          </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 684             Property[] properties = new Property[props.size()];                                          </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 685             properties = props.toArray(properties);                                                      </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 686             entityItem.setProperties(properties);                                                        </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 687             j++;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688         }                                                                                                </span>
<span  style=""> 689                                                                                                          </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 690         return entities;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691     }                                                                                                    </span>
<span  style=""> 692                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 693     @Override                                                                                            </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 694     public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                          </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 695         return fetchWrapper.getRecords(fetchExtractionRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696     }                                                                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="2943865710042007016" onmouseenter="enter('2943865710042007016');" onmouseout="out('2943865710042007016');" style=""> 698     protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties,    </span>
<span class="-3214801195397343505" onmouseenter="enter('-3214801195397343505');" onmouseout="out('-3214801195397343505');" style=""> 699                                                          Serializable entity,                            </span>
<span class="6006324038342333129" onmouseenter="enter('6006324038342333129');" onmouseout="out('6006324038342333129');" style=""> 700                                                          List&lt;Property&gt; props,                           </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 701                                                          String[] customCriteria) {                      </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 702         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 703         try {                                                                                            </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 704             if (entity instanceof AdminMainEntity) {                                                     </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 705                 //Create an invisible property for the admin main entity name, if applicable.            </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 706                 //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive      </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 707                 //its display name.                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 708                 try {                                                                                    </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 709                     Property propertyItem = new Property();                                              </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 710                     propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                     </span>
<span class="-3439538412113948348" onmouseenter="enter('-3439538412113948348');" onmouseout="out('-3439538412113948348');" style=""> 711                     propertyItem.setValue(((AdminMainEntity) entity).getMainEntityName());               </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 712                     props.add(propertyItem);                                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 713                 } catch (Exception e) {                                                                  </span>
<span class="-6660676054828691164" onmouseenter="enter('-6660676054828691164');" onmouseout="out('-6660676054828691164');" style=""><abbr title=" 714                     //do nothing here except for not add the property. Exceptions could occur when there is a validation"> 714                     //do nothing here except for not add the property. Exceptions could occur when there ðŸ”µ</abbr></span>
<span class="6622622754482242268" onmouseenter="enter('6622622754482242268');" onmouseout="out('6622622754482242268');" style=""><abbr title=" 715                     //issue and some properties/relationships that are used for gleaning the main entity name end up"> 715                     //issue and some properties/relationships that are used for gleaning the main entity ðŸ”µ</abbr></span>
<span class="-3324578144663288556" onmouseenter="enter('-3324578144663288556');" onmouseout="out('-3324578144663288556');" style=""> 716                     //not being set                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718             }                                                                                            </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 719             for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 720                 String property = entry.getKey();                                                        </span>
<span class="-6557658272043627235" onmouseenter="enter('-6557658272043627235');" onmouseout="out('-6557658272043627235');" style=""> 721                 BasicFieldMetadata metadata = (BasicFieldMetadata) entry.getValue();                     </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 722                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 722                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) ||ðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 723                     boolean proceed = true;                                                              </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 724                     if (property.contains(&quot;.&quot;)) {                                                        </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 725                         StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                     </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 726                         Object testObject = entity;                                                      </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 727                         while (tokens.hasMoreTokens()) {                                                 </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 728                             String token = tokens.nextToken();                                           </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 729                             if (tokens.hasMoreTokens()) {                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 730                                 try {                                                                    </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 731                                     testObject = fieldManager.getFieldValue(testObject, token);          </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 732                                 } catch (FieldNotAvailableException e) {                                 </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 733                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 734                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735                                 }                                                                        </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 736                                 if (testObject == null) {                                                </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 737                                     Property propertyItem = new Property();                              </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 738                                     propertyItem.setName(property);                                      </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 739                                     if (props.contains(propertyItem)) {                                  </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 740                                         proceed = false;                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 741                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742                                     }                                                                    </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 743                                     propertyItem.setValue(null);                                         </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 744                                     props.add(propertyItem);                                             </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 745                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 746                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 748                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750                     }                                                                                    </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 751                     if (!proceed) {                                                                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 752                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753                     }                                                                                    </span>
<span  style=""> 754                                                                                                          </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 755                     boolean isFieldAccessible = true;                                                    </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 756                     Object value = null;                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 757                     try {                                                                                </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 758                         value = fieldManager.getFieldValue(entity, property);                            </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 759                     } catch (FieldNotAvailableException e) {                                             </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 760                         isFieldAccessible = false;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                     }                                                                                    </span>
<span class="-1242713994964830615" onmouseenter="enter('-1242713994964830615');" onmouseout="out('-1242713994964830615');" style=""> 762                     checkField:                                                                          </span>
<span class="5677081435180812955" onmouseenter="enter('5677081435180812955');" onmouseout="out('5677081435180812955');" style=""> 763                     {                                                                                    </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 764                         if (isFieldAccessible) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 765                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 766                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 767                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 768                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 770                             props.add(propertyItem);                                                     </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 771                             String displayVal = propertyItem.getDisplayValue();                          </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 772                             boolean handled = false;                                                     </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 773                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 773                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvðŸ”µ</abbr></span>
<span class="-6209348320960420357" onmouseenter="enter('-6209348320960420357');" onmouseout="out('-6209348320960420357');" style=""><abbr title=" 774                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValue("> 774                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValueðŸ”µ</abbr></span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""><abbr title=" 775                                         new ExtractValueRequest(props, fieldManager, metadata, value, displayVal,"> 775                                         new ExtractValueRequest(props, fieldManager, metadata, value, disðŸ”µ</abbr></span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""><abbr title=" 776                                                 persistenceManager, this, entity, customCriteria), propertyItem);"> 776                                                 persistenceManager, this, entity, customCriteria), properðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 777                                 if (MetadataProviderResponse.NOT_HANDLED != response) {                  </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 778                                     handled = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779                                 }                                                                        </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 780                                 if (MetadataProviderResponse.HANDLED_BREAK == response) {                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 781                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783                             }                                                                            </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 784                             if (!handled) {                                                              </span>
<span class="5660532463858602467" onmouseenter="enter('5660532463858602467');" onmouseout="out('5660532463858602467');" style=""> 785                                 defaultFieldPersistenceProvider.extractValue(                            </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""><abbr title=" 786                                         new ExtractValueRequest(props, fieldManager, metadata, value, displayVal,"> 786                                         new ExtractValueRequest(props, fieldManager, metadata, value, disðŸ”µ</abbr></span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""><abbr title=" 787                                                 persistenceManager, this, entity, customCriteria), propertyItem);"> 787                                                 persistenceManager, this, entity, customCriteria), properðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788                             }                                                                            </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 789                             break checkField;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790                         }                                                                                </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 791                         //try a direct property acquisition via reflection                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 792                         try {                                                                            </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 793                             String strVal = null;                                                        </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 794                             Method method;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 795                             try {                                                                        </span>
<span class="-188265031890242666" onmouseenter="enter('-188265031890242666');" onmouseout="out('-188265031890242666');" style=""> 796                                 //try a &#x27;get&#x27; prefixed mutator first                                     </span>
<span class="2344864789387251771" onmouseenter="enter('2344864789387251771');" onmouseout="out('2344864789387251771');" style=""><abbr title=" 797                                 String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(1, property.length());"> 797                                 String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.sðŸ”µ</abbr></span>
<span class="6434236432742156955" onmouseenter="enter('6434236432742156955');" onmouseout="out('6434236432742156955');" style=""> 798                                 method = entity.getClass().getMethod(temp, new Class[] {});              </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 799                             } catch (NoSuchMethodException e) {                                          </span>
<span class="5628920111567796624" onmouseenter="enter('5628920111567796624');" onmouseout="out('5628920111567796624');" style=""> 800                                 method = entity.getClass().getMethod(property, new Class[] {});          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801                             }                                                                            </span>
<span class="-1268801467547302511" onmouseenter="enter('-1268801467547302511');" onmouseout="out('-1268801467547302511');" style=""> 802                             value = method.invoke(entity, new String[] {});                              </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 803                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 804                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 805                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 806                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 808                             props.add(propertyItem);                                                     </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 809                             if (value == null) {                                                         </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 810                                 strVal = null;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 811                             } else {                                                                     </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 812                                 if (Date.class.isAssignableFrom(value.getClass())) {                     </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 813                                     strVal = getSimpleDateFormatter().format((Date) value);              </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 814                                 } else if (Timestamp.class.isAssignableFrom(value.getClass())) {         </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""><abbr title=" 815                                     strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));"> 815                                     strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value)ðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 816                                 } else if (Calendar.class.isAssignableFrom(value.getClass())) {          </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""><abbr title=" 817                                     strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());"> 817                                     strVal = getSimpleDateFormatter().format(((Calendar) value).getTime()ðŸ”µ</abbr></span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 818                                 } else if (Double.class.isAssignableFrom(value.getClass())) {            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 819                                     strVal = getDecimalFormatter().format(value);                        </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 820                                 } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {        </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 821                                     strVal = getDecimalFormatter().format(value);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 822                                 } else {                                                                 </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 823                                     strVal = value.toString();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825                             }                                                                            </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 826                             propertyItem.setValue(strVal);                                               </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 827                         } catch (NoSuchMethodException e) {                                              </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 828                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 828                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.ðŸ”µ</abbr></span>
<span class="4115063574789816242" onmouseenter="enter('4115063574789816242');" onmouseout="out('4115063574789816242');" style=""> 829                             //do nothing - this property is simply not in the bean                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 834         } catch (ClassNotFoundException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 835             throw new PersistenceException(e);                                                           </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 836         } catch (IllegalAccessException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 837             throw new PersistenceException(e);                                                           </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 838         } catch (InvocationTargetException e) {                                                          </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 839             throw new PersistenceException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 841     }                                                                                                    </span>
<span  style=""> 842                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 843     @Override                                                                                            </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 844     public String getStringValueFromGetter(Serializable instance, String propertyName)                   </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 845             throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {            </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 846         Object value = PropertyUtils.getProperty(instance, propertyName);                                </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 847         return formatValue(value);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848     }                                                                                                    </span>
<span  style=""> 849                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 850     @Override                                                                                            </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 851     public String formatValue(Object value) {                                                            </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 852         String strVal;                                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 853         if (value == null) {                                                                             </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 854             strVal = null;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 855         } else {                                                                                         </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 856             if (Date.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 857                 strVal = getSimpleDateFormatter().format((Date) value);                                  </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 858             } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                             </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 859                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));       </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 860             } else if (Calendar.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 861                 strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                  </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 862             } else if (Double.class.isAssignableFrom(value.getClass())) {                                </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 863                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 864             } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 865                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 866             } else {                                                                                     </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 867                 strVal = value.toString();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869         }                                                                                                </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 870         return strVal;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871     }                                                                                                    </span>
<span  style=""> 872                                                                                                          </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 873     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 873     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean incluðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 874         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 875         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 876         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 877         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 877         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 878         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 879             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 881         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 882             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 882             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 883             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 883             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 884                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 885                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 886                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 887                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 888                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 889                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 890                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 891                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 892                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 893                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 894                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 895                     );                                                                                   </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 896             if (primaryKey == null) {                                                                    </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 897                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898             }                                                                                            </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 899             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 899             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span  style=""> 900                                                                                                          </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 901             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span  style=""> 902                                                                                                          </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 903             if (!entity.isValidationFailure()) {                                                         </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 904                 //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property</span>
<span class="4247210219521112592" onmouseenter="enter('4247210219521112592');" onmouseout="out('4247210219521112592');" style=""> 905                 if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null &amp;&amp;                           </span>
<span class="235375556032951584" onmouseenter="enter('235375556032951584');" onmouseout="out('235375556032951584');" style=""> 906                         entity.findProperty(foreignKey.getSortField()) != null &amp;&amp;                        </span>
<span class="7175038170339042705" onmouseenter="enter('7175038170339042705');" onmouseout="out('7175038170339042705');" style=""> 907                         entity.findProperty(foreignKey.getSortField()).getValue() != null) {             </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title=" 908                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();"> 908                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="5598129937237964517" onmouseenter="enter('5598129937237964517');" onmouseout="out('5598129937237964517');" style=""> 909                     extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance,   </span>
<span class="4380637637969964834" onmouseenter="enter('4380637637969964834');" onmouseout="out('4380637637969964834');" style=""> 910                             mergedProperties, primaryKey, result);                                       </span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 911                     instance = result.getResult();                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 912                 } else {                                                                                 </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 913                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 913                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 914                 }                                                                                        </span>
<span  style=""> 915                                                                                                          </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 916                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 917                 if (includeRealEntity) {                                                                 </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 918                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919                 }                                                                                        </span>
<span  style=""> 920                                                                                                          </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 921                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 922                 entityList.add(instance);                                                                </span>
<span  style=""> 923                                                                                                          </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 924                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 925                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 926                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 927             } else {                                                                                     </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 928                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 929                 return entityResult;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 930             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 931         } catch (Exception e) {                                                                          </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 932             throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934     }                                                                                                    </span>
<span  style=""> 935                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 936     @Override                                                                                            </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 937     public String getIdPropertyName(String entityClass) {                                                </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 938         return persistenceManager.getIdPropertyName(entityClass);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939     }                                                                                                    </span>
<span  style=""> 940                                                                                                          </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 941     public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {             </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 942         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 942         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 943         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 944             BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);               </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 945             if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {               </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 946                 return property;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 948         }                                                                                                </span>
<span  style=""> 949                                                                                                          </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""><abbr title=" 950         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;);"> 950         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged propertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951     }                                                                                                    </span>
<span  style=""> 952                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 953     @Override                                                                                            </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 954     public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {  </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 955         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 955         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 956         Object primaryKey = null;                                                                        </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 957         String idPropertyName = null;                                                                    </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 958         BasicFieldMetadata metaData = null;                                                              </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 959         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 960             BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);               </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 961             if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {               </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 962                 idPropertyName = property;                                                               </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 963                 metaData = temp;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 964                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966         }                                                                                                </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 967         if (idPropertyName == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 968             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 968             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with tðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969         }                                                                                                </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 970         for (Property property : entity.getProperties()) {                                               </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 971             if (property.getName().equals(idPropertyName)) {                                             </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 972                 switch (metaData.getSecondaryType()) {                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 973                     case INTEGER:                                                                        </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""><abbr title=" 974                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());"> 974                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValuðŸ”µ</abbr></span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 975                         break;                                                                           </span>
<span class="6509618406235281730" onmouseenter="enter('6509618406235281730');" onmouseout="out('6509618406235281730');" style=""> 976                     case STRING:                                                                         </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 977                         primaryKey = property.getValue();                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 978                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 979                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 980                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982         }                                                                                                </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 983         if (primaryKey == null) {                                                                        </span>
<span class="586132424145349171" onmouseenter="enter('586132424145349171');" onmouseout="out('586132424145349171');" style=""><abbr title=" 984             throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the passed entity with type: &quot; + entity.getType()[0]);"> 984             throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985         }                                                                                                </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 986         return primaryKey;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987     }                                                                                                    </span>
<span  style=""> 988                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 989     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 990     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 991             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 992             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8254447054846048089" onmouseenter="enter('-8254447054846048089');" onmouseout="out('-8254447054846048089');" style=""> 993             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties,                                       </span>
<span class="3731877525338754789" onmouseenter="enter('3731877525338754789');" onmouseout="out('3731877525338754789');" style=""> 994             RestrictionFactory customRestrictionFactory) {                                               </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 995         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 995         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 996         List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                             </span>
<span  style=""> 997                                                                                                          </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 998         for (String propertyId : cto.getCriteriaMap().keySet()) {                                        </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 999             if (mergedProperties.containsKey(propertyId)) {                                              </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style="">1000                 boolean handled = false;                                                                 </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style="">1001                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {    </span>
<span class="-6114175924026036851" onmouseenter="enter('-6114175924026036851');" onmouseout="out('-6114175924026036851');" style="">1002                     MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(       </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style="">1003                             new AddSearchMappingRequest(persistencePerspective, cto,                     </span>
<span class="5810135378246725068" onmouseenter="enter('5810135378246725068');" onmouseout="out('5810135378246725068');" style="">1004                                     ceilingEntityFullyQualifiedClassname, mergedProperties,              </span>
<span class="5077524350528682045" onmouseenter="enter('5077524350528682045');" onmouseout="out('5077524350528682045');" style=""><abbr title="1005                                     propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restrictionFactory">1005                                     propertyId, getFieldManager(), this, this, customRestrictionFactory==ðŸ”µ</abbr></span>
<span class="6427059933663878801" onmouseenter="enter('6427059933663878801');" onmouseout="out('6427059933663878801');" style="">1006                                     :customRestrictionFactory), filterMappings);                         </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style="">1007                     if (MetadataProviderResponse.NOT_HANDLED != response) {                              </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style="">1008                         handled = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009                     }                                                                                    </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style="">1010                     if (MetadataProviderResponse.HANDLED_BREAK == response) {                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1011                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013                 }                                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style="">1014                 if (!handled) {                                                                          </span>
<span class="8038403104028382935" onmouseenter="enter('8038403104028382935');" onmouseout="out('8038403104028382935');" style="">1015                     defaultFieldPersistenceProvider.addSearchMapping(                                    </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style="">1016                             new AddSearchMappingRequest(persistencePerspective, cto,                     </span>
<span class="-1188580278753724323" onmouseenter="enter('-1188580278753724323');" onmouseout="out('-1188580278753724323');" style="">1017                                     ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId,  </span>
<span class="-6646794478608592484" onmouseenter="enter('-6646794478608592484');" onmouseout="out('-6646794478608592484');" style=""><abbr title="1018                                     getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory">1018                                     getFieldManager(), this, this, customRestrictionFactory == null ? resðŸ”µ</abbr></span>
<span class="878086898277429379" onmouseenter="enter('878086898277429379');" onmouseout="out('878086898277429379');" style="">1019                                             : customRestrictionFactory), filterMappings);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1021             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022         }                                                                                                </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style="">1023         return filterMappings;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1024     }                                                                                                    </span>
<span  style="">1025                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1026     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style="">1027     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style="">1028             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style="">1029             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style="">1030             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                     </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title="1031         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);">1031         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032     }                                                                                                    </span>
<span  style="">1033                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1034     @Override                                                                                            </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title="1035     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {">1035     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title="1036         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);">1036         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1037     }                                                                                                    </span>
<span  style="">1038                                                                                                          </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title="1039     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {">1039     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style="">1040         Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                   </span>
<span  style="">1041                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1042             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style="">1043             public int compare(Property o1, Property o2) {                                               </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style="">1044                 return o1.getName().compareTo(o2.getName());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1046         };                                                                                               </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="">1047         Collections.sort(properties, comparator);                                                        </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style="">1048         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style="">1049             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style="">1050             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style="">1051             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style="">1052             prop.setName(property);                                                                      </span>
<span  style="">1053                                                                                                          </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style="">1054             int pos = Collections.binarySearch(properties, prop, comparator);                            </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title="1055             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {">1055             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style="">1056                 logWarn: {                                                                               </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title="1057                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {">1057                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style="">1058                         //don&#x27;t warn for id field collisions, but still ignore the colliding fields      </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style="">1059                         break logWarn;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060                     }                                                                                    </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title="1061                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);">1061                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + prðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062                 }                                                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1063                 continue;                                                                                </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style="">1064             } else if (pos &lt; 0) {                                                                        </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style="">1065                 pos = -pos - 1; // calculate position to insert                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066             }                                                                                            </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style="">1067             properties.add(pos, prop);                                                                   </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style="">1068             prop.setMetadata(metadata);                                                                  </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style="">1069             if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                  </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style="">1070                 //this only makes sense for non collection types                                         </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style="">1071                 ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074     }                                                                                                    </span>
<span  style="">1075                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1076     @Override                                                                                            </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title="1077     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {">1077     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, MapðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1078         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1078         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1079         try {                                                                                            </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""><abbr title="1080             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();">1080             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective(ðŸ”µ</abbr></span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""><abbr title="1081             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);">1081             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1082             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1082             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1083                     ceilingEntityFullyQualifiedClassname,                                                </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1084                     entities,                                                                            </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1085                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1085                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1086                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1087                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1088                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1089                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1090                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1091                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1092                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1093                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1094                     );                                                                                   </span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style="">1095             allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1096         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1097             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1097             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099     }                                                                                                    </span>
<span  style="">1100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1101     @Override                                                                                            </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title="1102     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1102     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) thðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style="">1103         return update(persistencePackage, null, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104     }                                                                                                    </span>
<span  style="">1105                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1106     @Override                                                                                            </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style="">1107     public Entity update(PersistencePackage persistencePackage) throws ServiceException {                </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style="">1108         EntityResult er = update(persistencePackage, null, false);                                       </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style="">1109         return er.getEntity();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110     }                                                                                                    </span>
<span  style="">1111                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1112     @Override                                                                                            </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style="">1113     public Entity add(PersistencePackage persistencePackage) throws ServiceException {                   </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style="">1114         EntityResult entityResult = add(persistencePackage, false);                                      </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style="">1115         return entityResult.getEntity();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116     }                                                                                                    </span>
<span  style="">1117                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1118     @Override                                                                                            </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title="1119     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1119     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throwðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style="">1120         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1121         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1122         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1123         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1123         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1124         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1125             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1127         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1128             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1128             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1129             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1129             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1130                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1131                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1132                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1133                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1134                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1135                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1136                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1137                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1138                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1139                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1140                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1141                     );                                                                                   </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title="1142             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);">1142             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span  style="">1143                                                                                                          </span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style="">1144             String idProperty = null;                                                                    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style="">1145             for (String property : mergedProperties.keySet()) {                                          </span>
<span class="-2221369290108753372" onmouseenter="enter('-2221369290108753372');" onmouseout="out('-2221369290108753372');" style=""><abbr title="1146                 if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID) {">1146                 if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFielðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style="">1147                     idProperty = property;                                                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1148                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150             }                                                                                            </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style="">1151             if (idProperty == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title="1152                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);">1152                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity wiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153             }                                                                                            </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style="">1154             Object primaryKey = null;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1155             try {                                                                                        </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style="">1156                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1157             } catch (Exception e) {                                                                      </span>
<span class="-2276199612445624795" onmouseenter="enter('-2276199612445624795');" onmouseout="out('-2276199612445624795');" style="">1158                 //don&#x27;t do anything - this is a valid case                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159             }                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style="">1160             if (primaryKey == null) {                                                                    </span>
<span  style="">1161                                                                                                          </span>
<span class="-425360514461332458" onmouseenter="enter('-425360514461332458');" onmouseout="out('-425360514461332458');" style="">1162                 Serializable instance = (Serializable) Class.forName(entity.getType()[0]).newInstance(); </span>
<span  style="">1163                                                                                                          </span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style="">1164                 instance = createPopulatedInstance(instance, entity, mergedProperties, false);           </span>
<span  style="">1165                                                                                                          </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1166                 if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                           </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title="1167                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();">1167                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title="1168                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);">1168                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergeðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style="">1169                     instance = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170                 }                                                                                        </span>
<span  style="">1171                                                                                                          </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1172                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style="">1173                 if (includeRealEntityObject) {                                                           </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style="">1174                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175                 }                                                                                        </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style="">1176                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style="">1177                 entityList.add(instance);                                                                </span>
<span  style="">1178                                                                                                          </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style="">1179                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style="">1180                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style="">1181                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1182             } else {                                                                                     </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style="">1183                 return update(persistencePackage, primaryKey, includeRealEntityObject);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1185         } catch (Exception e) {                                                                          </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style="">1186             throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188     }                                                                                                    </span>
<span  style="">1189                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1190     @Override                                                                                            </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style="">1191     public void remove(PersistencePackage persistencePackage) throws ServiceException {                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1192         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1193         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1194         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1194         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1195         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1196             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1198         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1199             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1199             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1200             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1200             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1201                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1202                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1203                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1204                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1205                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1206                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1207                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1208                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1209                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1210                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1211                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1212                     );                                                                                   </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title="1213             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);">1213             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style="">1214             Object primaryKey = getPrimaryKey(entity, mergedProperties);                                 </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title="1215             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);">1215             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span  style="">1216                                                                                                          </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style="">1217             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span  style="">1218                                                                                                          </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style="">1219             switch (persistencePerspective.getOperationTypes().getRemoveType()) {                        </span>
<span class="5189123261615208670" onmouseenter="enter('5189123261615208670');" onmouseout="out('5189123261615208670');" style="">1220                 case NONDESTRUCTIVEREMOVE:                                                               </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style="">1221                     FieldManager fieldManager = getFieldManager();                                       </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title="1222                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());">1222                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style=""><abbr title="1223                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();">1223                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1224                     try {                                                                                </span>
<span class="-7359786243551687396" onmouseenter="enter('-7359786243551687396');" onmouseout="out('-7359786243551687396');" style="">1225                         foreignKeyValue = Long.valueOf((String) foreignKeyValue);                        </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="">1226                     } catch (NumberFormatException e) {                                                  </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style=""><abbr title="1227                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);">1227                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove looðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228                     }                                                                                    </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title="1229                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);">1229                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(ClasðŸ”µ</abbr></span>
<span class="-6891408169238328357" onmouseenter="enter('-6891408169238328357');" onmouseout="out('-6891408169238328357');" style=""><abbr title="1230                     Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());">1230                     Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style="">1231                     collection.remove(instance);                                                         </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title="1232                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on">1232                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (justðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style=""><abbr title="1233                     // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly">1233                     // the @ManyToOne side) then it will not be updated. In that instance, we have to expðŸ”µ</abbr></span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style="">1234                     // set the manyTo field to null so that subsequent lookups will not find it          </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style="">1235                     if (manyToFieldMetadata instanceof BasicFieldMetadata) {                             </span>
<span class="3041576912599376884" onmouseenter="enter('3041576912599376884');" onmouseout="out('3041576912599376884');" style=""><abbr title="1236                         if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())) {">1236                         if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())ðŸ”µ</abbr></span>
<span class="-3179114257339016284" onmouseenter="enter('-3179114257339016284');" onmouseout="out('-3179114257339016284');" style=""><abbr title="1237                             throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot;">1237                             throw new ServiceException(&quot;Could not remove from the collection as the ManyTðŸ”µ</abbr></span>
<span class="-7704143059315768665" onmouseenter="enter('-7704143059315768665');" onmouseout="out('-7704143059315768665');" style=""><abbr title="1238                                     + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot;">1238                                     + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in tðŸ”µ</abbr></span>
<span class="-8899164530562544377" onmouseenter="enter('-8899164530562544377');" onmouseout="out('-8899164530562544377');" style="">1239                                     + &quot; or nullable=true within the @JoinColumn annotation&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1240                         }                                                                                </span>
<span class="1164649929234803369" onmouseenter="enter('1164649929234803369');" onmouseout="out('1164649929234803369');" style=""><abbr title="1241                         //Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module">1241                         //Since this is occuring on a remove persistence package, merge up-front (before ðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1242                         instance = persistenceManager.getDynamicEntityDao().merge(instance);             </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title="1243                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());">1243                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style="">1244                         Object manyToObject = manyToField.get(instance);                                 </span>
<span class="-7515244788292498989" onmouseenter="enter('-7515244788292498989');" onmouseout="out('-7515244788292498989');" style=""><abbr title="1245                         if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanceof Map)) {">1245                         if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObjeðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style="">1246                             manyToField.set(instance, null);                                             </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1247                             instance = persistenceManager.getDynamicEntityDao().merge(instance);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1248                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1250                     break;                                                                               </span>
<span class="-5424424301156351095" onmouseenter="enter('-5424424301156351095');" onmouseout="out('-5424424301156351095');" style="">1251                 case BASIC:                                                                              </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style="">1252                     persistenceManager.getDynamicEntityDao().remove(instance);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1253                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1255         } catch (Exception e) {                                                                          </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1256             throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258     }                                                                                                    </span>
<span  style="">1259                                                                                                          </span>
<span class="-5101078461080852406" onmouseenter="enter('-5101078461080852406');" onmouseout="out('-5101078461080852406');" style="">1260     public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage,         </span>
<span class="-1790491118666975112" onmouseenter="enter('-1790491118666975112');" onmouseout="out('-1790491118666975112');" style="">1261             CriteriaTransferObject cto) throws ServiceException {                                        </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1262         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1263         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1263         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span  style="">1264                                                                                                          </span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1265         if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {             </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1266             persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267         }                                                                                                </span>
<span  style="">1268                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1269         try {                                                                                            </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1270             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1270             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span  style="">1271                                                                                                          </span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1272             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1272             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1273                     ceilingEntityFullyQualifiedClassname,                                                </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1274                     entities,                                                                            </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1275                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1275                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1276                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1277                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1278                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1279                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1280                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1281                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1282                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1283                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1284                     );                                                                                   </span>
<span  style="">1285                                                                                                          </span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1286             return mergedProperties;                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1287         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1288             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1288             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290     }                                                                                                    </span>
<span  style="">1291                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1292     @Override                                                                                            </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1293     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1293     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1294         Entity[] payload;                                                                                </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1295         int totalRecords;                                                                                </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1296         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1297         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1297         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1298         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1298         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span  style="">1299                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1300         try {                                                                                            </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1301             if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                               </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1302                 FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                 </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1303                 sortCriteria.setSortAscending(foreignKey.getSortAscending());                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304             }                                                                                            </span>
<span  style="">1305                                                                                                          </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1306             Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);  </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style="">1307             if (useTranslationSearch) {                                                                  </span>
<span class="-4893882968490565148" onmouseenter="enter('-4893882968490565148');" onmouseout="out('-4893882968490565148');" style="">1308                 addTranslationSearchIfNeeded(cto, mergedProperties);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309             }                                                                                            </span>
<span class="-6342955113620354561" onmouseenter="enter('-6342955113620354561');" onmouseout="out('-6342955113620354561');" style=""><abbr title="1310             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage">1310             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistenðŸ”µ</abbr></span>
<span class="-8965082019915054990" onmouseenter="enter('-8965082019915054990');" onmouseout="out('-8965082019915054990');" style="">1311                     .getFetchTypeFullyQualifiedClassname(), mergedProperties);                           </span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1312             List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);   </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1313             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1314                 standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315             }                                                                                            </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1316             if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                 </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1317                 standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318             }                                                                                            </span>
<span  style="">1319                                                                                                          </span>
<span class="-1243671803049331237" onmouseenter="enter('-1243671803049331237');" onmouseout="out('-1243671803049331237');" style="">1320             FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto,                        </span>
<span class="4292734980783020060" onmouseenter="enter('4292734980783020060');" onmouseout="out('4292734980783020060');" style="">1321                     persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);   </span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1322             List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                             </span>
<span  style="">1323                                                                                                          </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1324             List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);      </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1325             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1326                 countFilterMappings.addAll(cto.getAdditionalFilterMappings());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327             }                                                                                            </span>
<span class="-3999242298419802693" onmouseenter="enter('-3999242298419802693');" onmouseout="out('-3999242298419802693');" style="">1328             FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto,                   </span>
<span class="-3552477247406350113" onmouseenter="enter('-3552477247406350113');" onmouseout="out('-3552477247406350113');" style="">1329                     persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);      </span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1330             totalRecords = getTotalRecords(countFetchRequest);                                           </span>
<span  style="">1331                                                                                                          </span>
<span class="-5158650912512765537" onmouseenter="enter('-5158650912512765537');" onmouseout="out('-5158650912512765537');" style=""><abbr title="1332             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto,">1332             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackageðŸ”µ</abbr></span>
<span class="6467880611752491014" onmouseenter="enter('6467880611752491014');" onmouseout="out('6467880611752491014');" style="">1333                     persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);</span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1334             payload = getRecords(fetchExtractionRequest);                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1335         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1336             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1336             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337         }                                                                                                </span>
<span  style="">1338                                                                                                          </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1339         return new DynamicResultSet(null, payload, totalRecords);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1340     }                                                                                                    </span>
<span  style="">1341                                                                                                          </span>
<span class="-6037376119596627025" onmouseenter="enter('-6037376119596627025');" onmouseout="out('-6037376119596627025');" style=""><abbr title="1342     private void addTranslationSearchIfNeeded(CriteriaTransferObject cto, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1342     private void addTranslationSearchIfNeeded(CriteriaTransferObject cto, Map&lt;String, FieldMetadata&gt; mergðŸ”µ</abbr></span>
<span class="-2846648248046819015" onmouseenter="enter('-2846648248046819015');" onmouseout="out('-2846648248046819015');" style="">1343         Map&lt;String, FilterAndSortCriteria&gt; criteriaMap = cto.getCriteriaMap();                           </span>
<span class="811702704133342292" onmouseenter="enter('811702704133342292');" onmouseout="out('811702704133342292');" style="">1344         FilterAndSortCriteria fsc = criteriaMap.get(&quot;translationLocale&quot;);                                </span>
<span class="8797373901407974682" onmouseenter="enter('8797373901407974682');" onmouseout="out('8797373901407974682');" style="">1345         List&lt;String&gt; filterValues = new ArrayList&lt;&gt;();                                                   </span>
<span class="7732194668261263043" onmouseenter="enter('7732194668261263043');" onmouseout="out('7732194668261263043');" style="">1346         if (fsc != null) {                                                                               </span>
<span class="2259588886243628801" onmouseenter="enter('2259588886243628801');" onmouseout="out('2259588886243628801');" style="">1347             filterValues = fsc.getFilterValues();                                                        </span>
<span class="2091742627616562528" onmouseenter="enter('2091742627616562528');" onmouseout="out('2091742627616562528');" style="">1348             criteriaMap.remove(&quot;translationLocale&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1349         }                                                                                                </span>
<span class="3485235865484365089" onmouseenter="enter('3485235865484365089');" onmouseout="out('3485235865484365089');" style="">1350         //If locale is generic - than we use all locales of this language                                </span>
<span class="-41588082364058856" onmouseenter="enter('-41588082364058856');" onmouseout="out('-41588082364058856');" style="">1351         //For example, if locale = &quot;en&quot; than we use also &quot;en_GB&quot; and &quot;en_US&quot;                             </span>
<span class="8329625728999317193" onmouseenter="enter('8329625728999317193');" onmouseout="out('8329625728999317193');" style="">1352         if (filterValues.size() &gt; 0 &amp;&amp; filterValues.get(0).indexOf(&quot;_&quot;) &lt; 0) {                           </span>
<span class="8492179051032337523" onmouseenter="enter('8492179051032337523');" onmouseout="out('8492179051032337523');" style="">1353             String currentLocaleCode = filterValues.get(0);                                              </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title="1354             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();">1354             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span class="-6592630843479972415" onmouseenter="enter('-6592630843479972415');" onmouseout="out('-6592630843479972415');" style="">1355             for (org.broadleafcommerce.common.locale.domain.Locale locale : locales) {                   </span>
<span class="-7527245144390113265" onmouseenter="enter('-7527245144390113265');" onmouseout="out('-7527245144390113265');" style=""><abbr title="1356                 if (!locale.getLocaleCode().equals(currentLocaleCode) &amp;&amp; currentLocaleCode.equals(locale.getLocaleCode().substring(0,2))) {">1356                 if (!locale.getLocaleCode().equals(currentLocaleCode) &amp;&amp; currentLocaleCode.equals(locale.ðŸ”µ</abbr></span>
<span class="-1114101031881938600" onmouseenter="enter('-1114101031881938600');" onmouseout="out('-1114101031881938600');" style="">1357                     filterValues.add(locale.getLocaleCode());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1358                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360         }                                                                                                </span>
<span class="7041175802579200053" onmouseenter="enter('7041175802579200053');" onmouseout="out('7041175802579200053');" style="">1361         Iterator&lt;Entry&lt;String, FilterAndSortCriteria&gt;&gt; iterator = criteriaMap.entrySet().iterator();     </span>
<span class="977968488612897428" onmouseenter="enter('977968488612897428');" onmouseout="out('977968488612897428');" style="">1362         while (iterator.hasNext()) {                                                                     </span>
<span class="-2018186862383960552" onmouseenter="enter('-2018186862383960552');" onmouseout="out('-2018186862383960552');" style="">1363             Entry&lt;String, FilterAndSortCriteria&gt; next = iterator.next();                                 </span>
<span  style="">1364                                                                                                          </span>
<span class="1265738709115975150" onmouseenter="enter('1265738709115975150');" onmouseout="out('1265738709115975150');" style="">1365             final String key = next.getKey();                                                            </span>
<span class="-7678196324163664201" onmouseenter="enter('-7678196324163664201');" onmouseout="out('-7678196324163664201');" style="">1366             FieldMetadata fieldMetadata = mergedProperties.get(key);                                     </span>
<span class="-1023901421219743812" onmouseenter="enter('-1023901421219743812');" onmouseout="out('-1023901421219743812');" style=""><abbr title="1367             if (fieldMetadata != null &amp;&amp; fieldMetadata instanceof BasicFieldMetadata &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getTranslatable()!=null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getTranslatable()) {">1367             if (fieldMetadata != null &amp;&amp; fieldMetadata instanceof BasicFieldMetadata &amp;&amp; ((BasicFieldMetadðŸ”µ</abbr></span>
<span class="4880585623334776575" onmouseenter="enter('4880585623334776575');" onmouseout="out('4880585623334776575');" style="">1368                 BasicFieldMetadata basicFieldMetadata = ((BasicFieldMetadata) fieldMetadata);            </span>
<span class="-388570270073866047" onmouseenter="enter('-388570270073866047');" onmouseout="out('-388570270073866047');" style="">1369                 if (next.getValue().getFilterValues().size() &gt; 0) {                                      </span>
<span class="713070525122680609" onmouseenter="enter('713070525122680609');" onmouseout="out('713070525122680609');" style="">1370                     final String value = next.getValue().getFilterValues().get(0);                       </span>
<span class="3317822052141256197" onmouseenter="enter('3317822052141256197');" onmouseout="out('3317822052141256197');" style="">1371                     final String targetClass = basicFieldMetadata.getTargetClass();                      </span>
<span class="-7313378335001093503" onmouseenter="enter('-7313378335001093503');" onmouseout="out('-7313378335001093503');" style="">1372                     final String fieldName = basicFieldMetadata.getFieldName();                          </span>
<span class="-850715722857507285" onmouseenter="enter('-850715722857507285');" onmouseout="out('-850715722857507285');" style="">1373                     final String friendlyType = getTranslationFriendlyType(targetClass);                 </span>
<span class="895212293547782698" onmouseenter="enter('895212293547782698');" onmouseout="out('895212293547782698');" style="">1374                     final List&lt;String&gt; localeValues = filterValues;                                      </span>
<span class="5947868462885005542" onmouseenter="enter('5947868462885005542');" onmouseout="out('5947868462885005542');" style="">1375                     if (friendlyType != null) {                                                          </span>
<span class="-6215380074365660212" onmouseenter="enter('-6215380074365660212');" onmouseout="out('-6215380074365660212');" style="">1376                         iterator.remove();                                                               </span>
<span class="947198310670736489" onmouseenter="enter('947198310670736489');" onmouseout="out('947198310670736489');" style="">1377                         cto.getAdditionalFilterMappings().add(new FilterMapping()                        </span>
<span class="2888003341970826788" onmouseenter="enter('2888003341970826788');" onmouseout="out('2888003341970826788');" style="">1378                                 .withDirectFilterValues(new EmptyFilterValues())                         </span>
<span class="-178271358118690506" onmouseenter="enter('-178271358118690506');" onmouseout="out('-178271358118690506');" style="">1379                                 .withRestriction(                                                        </span>
<span class="-7975261834482695502" onmouseenter="enter('-7975261834482695502');" onmouseout="out('-7975261834482695502');" style="">1380                                         new Restriction().withPredicateProvider(new PredicateProvider() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1381                                             @Override                                                    </span>
<span class="-6543887403560352788" onmouseenter="enter('-6543887403560352788');" onmouseout="out('-6543887403560352788');" style="">1382                                             public Predicate buildPredicate(CriteriaBuilder builder,     </span>
<span class="-7125560532692692259" onmouseenter="enter('-7125560532692692259');" onmouseout="out('-7125560532692692259');" style=""><abbr title="1383                                                                             FieldPathBuilder fieldPathBuilder,">1383                                                                             FieldPathBuilder fieldPathBuiðŸ”µ</abbr></span>
<span class="7512372620032911912" onmouseenter="enter('7512372620032911912');" onmouseout="out('7512372620032911912');" style="">1384                                                                             From root,                   </span>
<span class="-6496567708295007325" onmouseenter="enter('-6496567708295007325');" onmouseout="out('-6496567708295007325');" style="">1385                                                                             String ceilingEntity,        </span>
<span class="-1158993663019459187" onmouseenter="enter('-1158993663019459187');" onmouseout="out('-1158993663019459187');" style="">1386                                                                             String fullPropertyName,     </span>
<span class="-5850263724287795849" onmouseenter="enter('-5850263724287795849');" onmouseout="out('-5850263724287795849');" style="">1387                                                                             Path explicitPath,           </span>
<span class="-5946251977876316007" onmouseenter="enter('-5946251977876316007');" onmouseout="out('-5946251977876316007');" style="">1388                                                                             List directValues) {         </span>
<span class="-4398445738002779234" onmouseenter="enter('-4398445738002779234');" onmouseout="out('-4398445738002779234');" style="">1389                                                 Subquery subquery =                                      </span>
<span class="4320200709227808343" onmouseenter="enter('4320200709227808343');" onmouseout="out('4320200709227808343');" style=""><abbr title="1390                                                         fieldPathBuilder.getCriteria().subquery(Long.class);">1390                                                         fieldPathBuilder.getCriteria().subquery(Long.clasðŸ”µ</abbr></span>
<span class="-3003233056197271068" onmouseenter="enter('-3003233056197271068');" onmouseout="out('-3003233056197271068');" style="">1391                                                 Root transRoot = subquery.from(TranslationImpl.class);   </span>
<span class="-1828106112834311571" onmouseenter="enter('-1828106112834311571');" onmouseout="out('-1828106112834311571');" style="">1392                                                 subquery.select(builder.count(transRoot.get(&quot;id&quot;)));     </span>
<span class="-7827410329384074180" onmouseenter="enter('-7827410329384074180');" onmouseout="out('-7827410329384074180');" style="">1393                                                 Predicate type =                                         </span>
<span class="-7641385465441036986" onmouseenter="enter('-7641385465441036986');" onmouseout="out('-7641385465441036986');" style=""><abbr title="1394                                                         builder.equal(transRoot.get(&quot;entityType&quot;), friendlyType);">1394                                                         builder.equal(transRoot.get(&quot;entityType&quot;), friendðŸ”µ</abbr></span>
<span class="-8318529626652277752" onmouseenter="enter('-8318529626652277752');" onmouseout="out('-8318529626652277752');" style="">1395                                                 Predicate name =                                         </span>
<span class="-738855264844117982" onmouseenter="enter('-738855264844117982');" onmouseout="out('-738855264844117982');" style=""><abbr title="1396                                                         builder.equal(transRoot.get(&quot;fieldName&quot;), fieldName);">1396                                                         builder.equal(transRoot.get(&quot;fieldName&quot;), fieldNaðŸ”µ</abbr></span>
<span class="-8365644117166289056" onmouseenter="enter('-8365644117166289056');" onmouseout="out('-8365644117166289056');" style="">1397                                                 String[] split = key.split(&quot;\\.&quot;);                       </span>
<span class="2052011196962138618" onmouseenter="enter('2052011196962138618');" onmouseout="out('2052011196962138618');" style="">1398                                                 Path x = null;                                           </span>
<span class="-6625156218225986664" onmouseenter="enter('-6625156218225986664');" onmouseout="out('-6625156218225986664');" style="">1399                                                 for (int i = 0; i &lt; split.length; i++) {                 </span>
<span class="718039065179720471" onmouseenter="enter('718039065179720471');" onmouseout="out('718039065179720471');" style="">1400                                                     if (x == null) {                                     </span>
<span class="-9002262719383855885" onmouseenter="enter('-9002262719383855885');" onmouseout="out('-9002262719383855885');" style="">1401                                                         x = root.get(split[i]);                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1402                                                     } else {                                             </span>
<span class="6538684614966612209" onmouseenter="enter('6538684614966612209');" onmouseout="out('6538684614966612209');" style="">1403                                                         x = x.get(split[i]);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404                                                     }                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1405                                                 }                                                        </span>
<span  style="">1406                                                                                                          </span>
<span class="2609703429332764186" onmouseenter="enter('2609703429332764186');" onmouseout="out('2609703429332764186');" style="">1407                                                 String likeValue = &quot;%&quot; + value + &quot;%&quot;;                    </span>
<span class="-4483755678606832428" onmouseenter="enter('-4483755678606832428');" onmouseout="out('-4483755678606832428');" style="">1408                                                 Predicate transValue =                                   </span>
<span class="1835078746369173226" onmouseenter="enter('1835078746369173226');" onmouseout="out('1835078746369173226');" style=""><abbr title="1409                                                         builder.like(transRoot.get(&quot;translatedValue&quot;), likeValue);">1409                                                         builder.like(transRoot.get(&quot;translatedValue&quot;), liðŸ”µ</abbr></span>
<span class="1363159350076321828" onmouseenter="enter('1363159350076321828');" onmouseout="out('1363159350076321828');" style="">1410                                                 Predicate localeValue =                                  </span>
<span class="6936594261820918527" onmouseenter="enter('6936594261820918527');" onmouseout="out('6936594261820918527');" style=""><abbr title="1411                                                         builder.isTrue(transRoot.get(&quot;localeCode&quot;).in(localeValues));">1411                                                         builder.isTrue(transRoot.get(&quot;localeCode&quot;).in(locðŸ”µ</abbr></span>
<span class="7877531404660919575" onmouseenter="enter('7877531404660919575');" onmouseout="out('7877531404660919575');" style=""><abbr title="1412                                                 Path y = split.length &gt; 1 ? root.get(split[0]).get(&quot;id&quot;) : root.get(&quot;id&quot;);">1412                                                 Path y = split.length &gt; 1 ? root.get(split[0]).get(&quot;id&quot;) ðŸ”µ</abbr></span>
<span class="3537025732073223017" onmouseenter="enter('3537025732073223017');" onmouseout="out('3537025732073223017');" style=""><abbr title="1413                                                 Predicate entityId = builder.equal(transRoot.get(&quot;entityId&quot;),">1413                                                 Predicate entityId = builder.equal(transRoot.get(&quot;entityIðŸ”µ</abbr></span>
<span class="6748376930371571444" onmouseenter="enter('6748376930371571444');" onmouseout="out('6748376930371571444');" style="">1414                                                         y);                                              </span>
<span class="-251672589130318843" onmouseenter="enter('-251672589130318843');" onmouseout="out('-251672589130318843');" style="">1415                                                 if (localeValues.size() &gt; 0) {                           </span>
<span class="-6685004596412549337" onmouseenter="enter('-6685004596412549337');" onmouseout="out('-6685004596412549337');" style=""><abbr title="1416                                                     subquery.where(builder.and(type, entityId, transValue, name, localeValue));">1416                                                     subquery.where(builder.and(type, entityId, transValueðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1417                                                 } else {                                                 </span>
<span class="7320091577548075010" onmouseenter="enter('7320091577548075010');" onmouseout="out('7320091577548075010');" style=""><abbr title="1418                                                     subquery.where(builder.and(type, entityId, transValue, name));">1418                                                     subquery.where(builder.and(type, entityId, transValueðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419                                                 }                                                        </span>
<span  style="">1420                                                                                                          </span>
<span class="-8479552588770286801" onmouseenter="enter('-8479552588770286801');" onmouseout="out('-8479552588770286801');" style="">1421                                                 Predicate like = builder.like(x,                         </span>
<span class="2624583196561559460" onmouseenter="enter('2624583196561559460');" onmouseout="out('2624583196561559460');" style="">1422                                                         likeValue);                                      </span>
<span class="-3685673007027368665" onmouseenter="enter('-3685673007027368665');" onmouseout="out('-3685673007027368665');" style=""><abbr title="1423                                                 Predicate predicate = builder.or(like, builder.greaterThan(subquery, 0));">1423                                                 Predicate predicate = builder.or(like, builder.greaterThaðŸ”µ</abbr></span>
<span class="-7893760688546432215" onmouseenter="enter('-7893760688546432215');" onmouseout="out('-7893760688546432215');" style="">1424                                                 return predicate;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425                                             }                                                            </span>
<span class="-2540327120317221694" onmouseenter="enter('-2540327120317221694');" onmouseout="out('-2540327120317221694');" style="">1426                                         })));                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1427                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428                 }                                                                                        </span>
<span class="-6340274589575485740" onmouseenter="enter('-6340274589575485740');" onmouseout="out('-6340274589575485740');" style="">1429                 System.out.println(&quot;&quot;);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1432     }                                                                                                    </span>
<span  style="">1433                                                                                                          </span>
<span class="490380134896946780" onmouseenter="enter('490380134896946780');" onmouseout="out('490380134896946780');" style="">1434     private String getTranslationFriendlyType(String targetClass) {                                      </span>
<span  style="">1435                                                                                                          </span>
<span class="6841703832389938731" onmouseenter="enter('6841703832389938731');" onmouseout="out('6841703832389938731');" style="">1436         TranslatedEntity instance = TranslatedEntity.getInstance(targetClass);                           </span>
<span class="-2802766618581615140" onmouseenter="enter('-2802766618581615140');" onmouseout="out('-2802766618581615140');" style="">1437         if (instance == null) {                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1438             try {                                                                                        </span>
<span class="-7525038970859272648" onmouseenter="enter('-7525038970859272648');" onmouseout="out('-7525038970859272648');" style="">1439                 Class&lt;?&gt;[] interfaces = Class.forName(targetClass).getInterfaces();                      </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="">1440                 int i = 0;                                                                               </span>
<span class="-6186732733724103268" onmouseenter="enter('-6186732733724103268');" onmouseout="out('-6186732733724103268');" style="">1441                 while (instance == null &amp;&amp; i &lt; interfaces.length) {                                      </span>
<span class="-2054172541787751148" onmouseenter="enter('-2054172541787751148');" onmouseout="out('-2054172541787751148');" style="">1442                     instance = TranslatedEntity.getInstance(interfaces[i].getName());                    </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style="">1443                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">1445             } catch (ClassNotFoundException e) {                                                         </span>
<span  style="">1446                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448         }                                                                                                </span>
<span  style="">1449                                                                                                          </span>
<span class="-7268340201557725928" onmouseenter="enter('-7268340201557725928');" onmouseout="out('-7268340201557725928');" style="">1450         return instance == null ? null : instance.getFriendlyType();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451     }                                                                                                    </span>
<span  style="">1452                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1453     @Override                                                                                            </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1454     public Integer getTotalRecords(FetchRequest fetchRequest) {                                          </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1455         return fetchWrapper.getTotalRecords(fetchRequest);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456     }                                                                                                    </span>
<span  style="">1457                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1458     @Override                                                                                            </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1459     public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1460         try {                                                                                            </span>
<span class="2992791529598050608" onmouseenter="enter('2992791529598050608');" onmouseout="out('2992791529598050608');" style=""><abbr title="1461             return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(),">1461             return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(ðŸ”µ</abbr></span>
<span class="9038213180647386393" onmouseenter="enter('9038213180647386393');" onmouseout="out('9038213180647386393');" style="">1462                     ceilingEntity, filterMappings).getSingleResult()).intValue();                        </span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1463         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1464             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1464             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="3717478470762679000" onmouseenter="enter('3717478470762679000');" onmouseout="out('3717478470762679000');" style=""><abbr title="1465             return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult()).intValue();">1465             return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1467     }                                                                                                    </span>
<span  style="">1468                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1469     @Override                                                                                            </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style=""><abbr title="1470     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {">1470     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxFðŸ”µ</abbr></span>
<span class="378343015895903420" onmouseenter="enter('378343015895903420');" onmouseout="out('378343015895903420');" style="">1471         return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(),            </span>
<span class="-8797211071846459738" onmouseenter="enter('-8797211071846459738');" onmouseout="out('-8797211071846459738');" style="">1472                 ceilingEntity, filterMappings, maxField).getSingleResult();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473     }                                                                                                    </span>
<span  style="">1474                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1475     @Override                                                                                            </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1476     public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                          </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1477         return fetchWrapper.getPersistentRecords(fetchRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478     }                                                                                                    </span>
<span  style="">1479                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1480     @Override                                                                                            </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1481     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1481     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappinðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1482         try {                                                                                            </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1483             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1483             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1484         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1485             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1485             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1486             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1486             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManagerðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488     }                                                                                                    </span>
<span  style="">1489                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1490     @Override                                                                                            </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1491     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1491     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1492         return validate(entity, populatedInstance, mergedProperties, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493     }                                                                                                    </span>
<span  style="">1494                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1495     @Override                                                                                            </span>
<span class="-2540520329201552550" onmouseenter="enter('-2540520329201552550');" onmouseout="out('-2540520329201552550');" style=""><abbr title="1496     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties,">1496     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="-646875273047375380" onmouseenter="enter('-646875273047375380');" onmouseout="out('-646875273047375380');" style="">1497             boolean validateUnsubmittedProperties) {                                                     </span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1498         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1498         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1499         return !entity.isValidationFailure();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500     }                                                                                                    </span>
<span  style="">1501                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1502     @Override                                                                                            </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1503     public void setPersistenceManager(PersistenceManager persistenceManager) {                           </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1504         this.persistenceManager = persistenceManager;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505     }                                                                                                    </span>
<span  style="">1506                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1507     @Override                                                                                            </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1508     public PersistenceModule getCompatibleModule(OperationType operationType) {                          </span>
<span class="-6680721005895887682" onmouseenter="enter('-6680721005895887682');" onmouseout="out('-6680721005895887682');" style="">1509         return ((InspectHelper) persistenceManager).getCompatibleModule(operationType);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510     }                                                                                                    </span>
<span  style="">1511                                                                                                          </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1512     public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                               </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1513         return defaultFieldPersistenceProvider;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1514     }                                                                                                    </span>
<span  style="">1515                                                                                                          </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style=""><abbr title="1516     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {">1516     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvidðŸ”µ</abbr></span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1517         this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1518     }                                                                                                    </span>
<span  style="">1519                                                                                                          </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1520     public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                               </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1521         return fieldPersistenceProviders;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522     }                                                                                                    </span>
<span  style="">1523                                                                                                          </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1524     public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) { </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1525         this.fieldPersistenceProviders = fieldPersistenceProviders;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526     }                                                                                                    </span>
<span  style="">1527                                                                                                          </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1528     public CriteriaTranslator getCriteriaTranslator() {                                                  </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1529         return criteriaTranslator;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1530     }                                                                                                    </span>
<span  style="">1531                                                                                                          </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1532     public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                           </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1533         this.criteriaTranslator = criteriaTranslator;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534     }                                                                                                    </span>
<span  style="">1535                                                                                                          </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1536     public EntityValidatorService getEntityValidatorService() {                                          </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1537         return entityValidatorService;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538     }                                                                                                    </span>
<span  style="">1539                                                                                                          </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1540     public void setEntityValidatorService(EntityValidatorService entityValidatorService) {               </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1541         this.entityValidatorService = entityValidatorService;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542     }                                                                                                    </span>
<span  style="">1543                                                                                                          </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1544     public RestrictionFactory getRestrictionFactory() {                                                  </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1545         return restrictionFactory;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546     }                                                                                                    </span>
<span  style="">1547                                                                                                          </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1548     public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                           </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1549         this.restrictionFactory = restrictionFactory;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1550     }                                                                                                    </span>
<span  style="">1551                                                                                                          </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1552     public PersistenceManager getPersistenceManager() {                                                  </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1553         return persistenceManager;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554     }                                                                                                    </span>
<span  style="">1555                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1556     /**                                                                                                  </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1557      * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1557      * Use an alternate approach to generating a fetch query for a collection located inside of an @EmbedðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1558      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1558      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather thðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1559      * which seems to alleviate the problem.                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1560      *                                                                                                   </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1561      * @param embeddedCollectionPath the path to the collection field itself                             </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1562      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1563      * @param collectionClass the type of the collection members                                         </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1564      * @return the builder capable of generating an appropriate HQL query                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1565      */                                                                                                  </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1566     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1566     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1567         String specialPath = embeddedCollectionPath.getTargetProperty();                                 </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1568         String[] pieces = specialPath.split(&quot;\\.&quot;);                                                      </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1569         if (pieces.length != 3) {                                                                        </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1570             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1570             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of foðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1571         }                                                                                                </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1572         String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                      </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1573         TypedQueryBuilder builder;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1574         try {                                                                                            </span>
<span class="-8552982106091258322" onmouseenter="enter('-8552982106091258322');" onmouseout="out('-8552982106091258322');" style="">1575             builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;)             </span>
<span class="7429624725018559493" onmouseenter="enter('7429624725018559493');" onmouseout="out('7429624725018559493');" style="">1576                     .addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1577         } catch (Exception e) {                                                                          </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1578             throw ExceptionHelper.refineException(e);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579         }                                                                                                </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1580         for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {         </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1581             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1582         }                                                                                                </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style=""><abbr title="1583         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {">1583         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappingsðŸ”µ</abbr></span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1584             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585         }                                                                                                </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1586         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1587             if (mapping.getSortDirection() != null) {                                                    </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1588                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1588                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().gðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1589                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1590                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1591                 }                                                                                        </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1592                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1592                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594         }                                                                                                </span>
<span  style="">1595                                                                                                          </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1596         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597     }                                                                                                    </span>
<span  style="">1598                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1599     /**                                                                                                  </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1600      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1600      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not theðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1601      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1602      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1602      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1603      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1603      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this iðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1604      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1605      * @return the list of restrictions on the root entity                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1606      */                                                                                                  </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1607     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1607     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1608         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1608         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPatðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1609         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1610         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="5670151306593626605" onmouseenter="enter('5670151306593626605');" onmouseout="out('5670151306593626605');" style="">1611             checkProperty: {                                                                             </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1612                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1612                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().gðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1613                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1614                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615                 }                                                                                        </span>
<span class="-8226569942575396694" onmouseenter="enter('-8226569942575396694');" onmouseout="out('-8226569942575396694');" style=""><abbr title="1616                 if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(mappingProperty)) {">1616                 if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.iðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style=""><abbr title="1617                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();">1617                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider()ðŸ”µ</abbr></span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1618                     if (predicateProvider != null) {                                                     </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style=""><abbr title="1619                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();">1619                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverterðŸ”µ</abbr></span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1620                         if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {</span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1621                             Object val = converter.convert(mapping.getFilterValues().get(0));            </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1622                             if (predicateProvider instanceof LikePredicateProvider) {                    </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1623                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1623                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1624                                 break checkProperty;                                                     </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1625                             } else if (predicateProvider instanceof EqPredicateProvider) {               </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style=""><abbr title="1626                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));">1626                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=ðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1627                                 break checkProperty;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1628                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1629                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1630                     }                                                                                    </span>
<span class="-6733273180612799079" onmouseenter="enter('-6733273180612799079');" onmouseout="out('-6733273180612799079');" style=""><abbr title="1631                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;,">1631                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additionaðŸ”µ</abbr></span>
<span class="-8181613750620164347" onmouseenter="enter('-8181613750620164347');" onmouseout="out('-8181613750620164347');" style="">1632                             StringUtil.sanitize(expression),                                             </span>
<span class="-5255115290358802775" onmouseenter="enter('-5255115290358802775');" onmouseout="out('-5255115290358802775');" style="">1633                             StringUtil.sanitize(mappingProperty)));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1634                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1635             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1636         }                                                                                                </span>
<span  style="">1637                                                                                                          </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1638         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1639     }                                                                                                    </span>
<span  style="">1640                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1641     /**                                                                                                  </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1642      * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1642      * Generate EQUALS restrictions for any filter property specified on the entity member of the collectðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1643      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1644      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1644      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1645      * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1645      * @param specialExpression the String representation of the path for the collection field in the @EmðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1646      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1647      * @return the list of restrictions on the collection in the @Embeddable object                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1648      */                                                                                                  </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1649     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1649     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1650         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1651         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-7768046259105737972" onmouseenter="enter('-7768046259105737972');" onmouseout="out('-7768046259105737972');" style=""><abbr title="1652             if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1652             if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1653                 FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();     </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1654                 if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {        </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1655                     Object val = converter.convert(mapping.getFilterValues().get(0));                    </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1656                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1656                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1657                     restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1660         }                                                                                                </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1661         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1662     }                                                                                                    </span>
<span  style="">1663                                                                                                          </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1664     protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {</span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1665         //Remove the entity from ORM management - no further attempts to persist                         </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style=""><abbr title="1666         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {">1666         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) ðŸ”µ</abbr></span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1667             getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668         }                                                                                                </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1669         //Remove the id field value, if it&#x27;s set                                                         </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1670         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1670         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instancðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1671         Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                     </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1672         if (idField == null) {                                                                           </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1673             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1673             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1674         }                                                                                                </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1675         idField.setAccessible(true);                                                                     </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1676         if (idField.get(instance) != null) {                                                             </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1677             idField.set(instance, null);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679     }                                                                                                    </span>
<span  style="">1680                                                                                                          </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style=""><abbr title="1681     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {">1681     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property propertðŸ”µ</abbr></span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1682         Class&lt;?&gt; returnType = null;                                                                      </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1683         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1683         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, propertyðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1684         java.lang.reflect.Type type = field.getGenericType();                                            </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1685         if (type instanceof ParameterizedType) {                                                         </span>
<span class="705860026972665445" onmouseenter="enter('705860026972665445');" onmouseout="out('705860026972665445');" style="">1686             ParameterizedType pType = (ParameterizedType) type;                                          </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1687             Class&lt;?&gt; clazz;                                                                              </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1688             if (pType.getActualTypeArguments().length &lt; 2) {                                             </span>
<span class="4541832948460311824" onmouseenter="enter('4541832948460311824');" onmouseout="out('4541832948460311824');" style="">1689                 clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[0];                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1690             } else {                                                                                     </span>
<span class="-5335821615199731853" onmouseenter="enter('-5335821615199731853');" onmouseout="out('-5335821615199731853');" style="">1691                 clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[1];                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692             }                                                                                            </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1693             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1693             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1694             if (!ArrayUtils.isEmpty(entities)) {                                                         </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1695                 returnType = entities[entities.length - 1];                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1697         }                                                                                                </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1698         return returnType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1700 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span  style="">  18                                                                                                          </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  19 package org.broadleafcommerce.openadmin.server.service.persistence.module;                               </span>
<span  style="">  20                                                                                                          </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  21 import org.apache.commons.beanutils.PropertyUtils;                                                       </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  22 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  23 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  24 import org.apache.commons.lang.StringUtils;                                                              </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  25 import org.apache.commons.lang3.BooleanUtils;                                                            </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  26 import org.apache.commons.lang3.reflect.FieldUtils;                                                      </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  27 import org.apache.commons.lang3.reflect.MethodUtils;                                                     </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  28 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  29 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  30 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  31 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  32 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  33 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  34 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  35 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  36 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  37 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  38 import org.broadleafcommerce.common.money.Money;                                                         </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  39 import org.broadleafcommerce.common.presentation.client.OperationType;                                   </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  40 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  41 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  42 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  43 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  44 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  45 import org.broadleafcommerce.common.util.ValidationUtil;                                                 </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  46 import org.broadleafcommerce.common.util.dao.TQJoin;                                                     </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  47 import org.broadleafcommerce.common.util.dao.TQOrder;                                                    </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  48 import org.broadleafcommerce.common.util.dao.TQRestriction;                                              </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  49 import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                          </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  50 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-9032655456699873894" onmouseenter="enter('-9032655456699873894');" onmouseout="out('-9032655456699873894');" style="">  51 import org.broadleafcommerce.openadmin.dto.*;                                                            </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style=""><abbr title="  52 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;">  52 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvidðŸ”µ</abbr></span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  53 import org.broadleafcommerce.openadmin.server.service.ValidationException;                               </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  54 import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;      </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  55 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                  </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  56 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="5058784187408591906" onmouseenter="enter('5058784187408591906');" onmouseout="out('5058784187408591906');" style="">  57 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.*;                     </span>
<span class="1663650800150084878" onmouseenter="enter('1663650800150084878');" onmouseout="out('1663650800150084878');" style="">  58 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPathBuilder;      </span>
<span class="-8754722050104399052" onmouseenter="enter('-8754722050104399052');" onmouseout="out('-8754722050104399052');" style="">  59 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.Restriction;           </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style=""><abbr title="  60 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter;">  60 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueCoðŸ”µ</abbr></span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style=""><abbr title="  61 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;">  61 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicatePrðŸ”µ</abbr></span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style=""><abbr title="  62 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;">  62 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateðŸ”µ</abbr></span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style=""><abbr title="  63 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;">  63 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvðŸ”µ</abbr></span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  64 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  64 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style=""><abbr title="  65 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;">  65 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvideðŸ”µ</abbr></span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  66 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  66 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterProperðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style=""><abbr title="  67 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;">  67 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappinðŸ”µ</abbr></span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style=""><abbr title="  68 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;">  68 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueReqðŸ”µ</abbr></span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style=""><abbr title="  69 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;">  69 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueReðŸ”µ</abbr></span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  70 import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;     </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style=""><abbr title="  71 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;">  71 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidatoðŸ”µ</abbr></span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  72 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;   </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  73 import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                     </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  74 import org.hibernate.FlushMode;                                                                          </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  75 import org.hibernate.Session;                                                                            </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  76 import org.springframework.beans.BeansException;                                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  77 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  78 import org.springframework.context.ApplicationContext;                                                   </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  79 import org.springframework.context.ApplicationContextAware;                                              </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style="">  80 import org.springframework.context.annotation.Primary;                                                   </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="">  81 import org.springframework.context.annotation.Scope;                                                     </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="">  82 import org.springframework.stereotype.Component;                                                         </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  83 import org.springframework.util.Assert;                                                                  </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  84 import java.io.Serializable;                                                                             </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style="">  85 import java.lang.reflect.Field;                                                                          </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style="">  86 import java.lang.reflect.InvocationTargetException;                                                      </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  87 import java.lang.reflect.Method;                                                                         </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style="">  88 import java.lang.reflect.ParameterizedType;                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="">  89 import java.math.BigDecimal;                                                                             </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style="">  90 import java.sql.Timestamp;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="">  91 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="">  92 import java.text.NumberFormat;                                                                           </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="">  93 import java.text.SimpleDateFormat;                                                                       </span>
<span class="196713859697444637" onmouseenter="enter('196713859697444637');" onmouseout="out('196713859697444637');" style="">  94 import java.util.*;                                                                                      </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  95 import java.util.Iterator;                                                                               </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  96 import java.util.Map.Entry;                                                                              </span>
<span  style="">  97                                                                                                          </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="">  98 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  99 import javax.annotation.Resource;                                                                        </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style=""> 100 import javax.persistence.criteria.CriteriaBuilder;                                                       </span>
<span class="2535099540501772744" onmouseenter="enter('2535099540501772744');" onmouseout="out('2535099540501772744');" style=""> 101 import javax.persistence.criteria.From;                                                                  </span>
<span class="5773424155764142692" onmouseenter="enter('5773424155764142692');" onmouseout="out('5773424155764142692');" style=""> 102 import javax.persistence.criteria.Path;                                                                  </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style=""> 103 import javax.persistence.criteria.Predicate;                                                             </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style=""> 104 import javax.persistence.criteria.Root;                                                                  </span>
<span class="1578689085913073314" onmouseenter="enter('1578689085913073314');" onmouseout="out('1578689085913073314');" style=""> 105 import javax.persistence.criteria.Subquery;                                                              </span>
<span  style=""> 106                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 107 /**                                                                                                      </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style=""> 108  * @author jfischer                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 109  */                                                                                                      </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style=""> 110 @Primary                                                                                                 </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style=""> 111 @Component(&quot;blBasicPersistenceModule&quot;)                                                                   </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style=""> 112 @Scope(&quot;prototype&quot;)                                                                                      </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style=""> 113 public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {</span>
<span  style=""> 114                                                                                                          </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 115     private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                      </span>
<span  style=""> 116                                                                                                          </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 117     public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                           </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 118     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 119                                                                                                          </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 120     protected ApplicationContext applicationContext;                                                     </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 121     protected PersistenceManager persistenceManager;                                                     </span>
<span  style=""> 122                                                                                                          </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 123     @Resource(name = &quot;blEntityValidatorService&quot;)                                                         </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 124     protected EntityValidatorService entityValidatorService;                                             </span>
<span  style=""> 125                                                                                                          </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 126     @Resource(name = &quot;blPersistenceProviders&quot;)                                                           </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 127     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 127     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistencePrðŸ”µ</abbr></span>
<span  style=""> 128                                                                                                          </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 129     @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                 </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 130     protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 132     @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 133     protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                  </span>
<span  style=""> 134                                                                                                          </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 135     @Resource(name = &quot;blCriteriaTranslator&quot;)                                                             </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 136     protected CriteriaTranslator criteriaTranslator;                                                     </span>
<span  style=""> 137                                                                                                          </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 138     @Resource(name = &quot;blRestrictionFactory&quot;)                                                             </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 139     protected RestrictionFactory restrictionFactory;                                                     </span>
<span  style=""> 140                                                                                                          </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 141     @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                         </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 142     protected BasicPersistenceModuleExtensionManager extensionManager;                                   </span>
<span  style=""> 143                                                                                                          </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 144     @Resource(name = &quot;blFetchWrapper&quot;)                                                                   </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 145     protected FetchWrapper fetchWrapper;                                                                 </span>
<span  style=""> 146                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 147     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 148     protected boolean useTranslationSearch;                                                              </span>
<span  style=""> 149                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 150     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 151     protected LocaleService localeService;                                                               </span>
<span  style=""> 152                                                                                                          </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 153     @PostConstruct                                                                                       </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 154     public void init() {                                                                                 </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 155         Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {         </span>
<span  style=""> 156                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157             @Override                                                                                    </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 158             public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {               </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 159                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 161         });                                                                                              </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 162         Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {           </span>
<span  style=""> 163                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164             @Override                                                                                    </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 165             public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {     </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 166                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 168         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169     }                                                                                                    </span>
<span  style=""> 170                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171     @Override                                                                                            </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 172     public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {     </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 173         this.applicationContext = applicationContext;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174     }                                                                                                    </span>
<span  style=""> 175                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 176     @Override                                                                                            </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 177     public boolean isCompatible(OperationType operationType) {                                           </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""><abbr title=" 178         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;"> 178         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationTypðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 181     @Override                                                                                            </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 182     public FieldManager getFieldManager() {                                                              </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 183         return persistenceManager.getDynamicEntityDao().getFieldManager();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184     }                                                                                                    </span>
<span  style=""> 185                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 186     @Override                                                                                            </span>
<span class="6457346333778015301" onmouseenter="enter('6457346333778015301');" onmouseout="out('6457346333778015301');" style=""> 187     public FieldManager getFieldManager(boolean cleanFieldManger) {                                      </span>
<span class="-7823051609966781187" onmouseenter="enter('-7823051609966781187');" onmouseout="out('-7823051609966781187');" style=""> 188         return persistenceManager.getDynamicEntityDao().getFieldManager(cleanFieldManger);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189     }                                                                                                    </span>
<span  style=""> 190                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 191     @Override                                                                                            </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 192     public DecimalFormat getDecimalFormatter() {                                                         </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 193         BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();              </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 194         Locale locale = brc.getJavaLocale();                                                             </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 195         DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                         </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 196         format.applyPattern(&quot;0.########&quot;);                                                               </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 197         format.setGroupingUsed(false);                                                                   </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 198         return format;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199     }                                                                                                    </span>
<span  style=""> 200                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 201     @Override                                                                                            </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 202     public SimpleDateFormat getSimpleDateFormatter() {                                                   </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 203         return FormatUtil.getDateFormat();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204     }                                                                                                    </span>
<span  style=""> 205                                                                                                          </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""><abbr title=" 206     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {"> 206     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata)ðŸ”µ</abbr></span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 207         if (metadata == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 208             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209         }                                                                                                </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 210         Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                        </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 211         for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                             </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 212             String fieldName = entry.getKey();                                                           </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 213             FieldMetadata md = entry.getValue();                                                         </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 214             // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 214             // Detect instances where the actual metadata for the field is some sort of CollectionMetadatðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 215             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 215             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 216             // can appropriate handle filtration and population                                          </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 217             if (entry.getValue() instanceof BasicFieldMetadata) {                                        </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 218                 newMap.put(fieldName, md);                                                               </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 219             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 219             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FORðŸ”µ</abbr></span>
<span class="-8485840589316329792" onmouseenter="enter('-8485840589316329792');" onmouseout="out('-8485840589316329792');" style=""> 220                 newMap.put(fieldName,                                                                    </span>
<span class="-7674878801561950856" onmouseenter="enter('-7674878801561950856');" onmouseout="out('-7674878801561950856');" style=""><abbr title=" 221                         (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY));"> 221                         (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223         }                                                                                                </span>
<span  style=""> 224                                                                                                          </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 225         return newMap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226     }                                                                                                    </span>
<span  style=""> 227                                                                                                          </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 228     protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                             </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 229         Class&lt;?&gt; response;                                                                               </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 230         switch (fieldType) {                                                                             </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 231             case BOOLEAN:                                                                                </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 232                 response = Boolean.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 233                 break;                                                                                   </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 234             case DATE:                                                                                   </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 235                 response = Date.class;                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 236                 break;                                                                                   </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 237             case DECIMAL:                                                                                </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 238                 response = BigDecimal.class;                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 239                 break;                                                                                   </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 240             case MONEY:                                                                                  </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 241                 response = Money.class;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 242                 break;                                                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 243             case INTEGER:                                                                                </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 244                 response = Integer.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 245                 break;                                                                                   </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 246             case UNKNOWN:                                                                                </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 247                 response = null;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 248                 break;                                                                                   </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 249             default:                                                                                     </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 250                 response = String.class;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 251                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252         }                                                                                                </span>
<span  style=""> 253                                                                                                          </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 254         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255     }                                                                                                    </span>
<span  style=""> 256                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 257     @Override                                                                                            </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 258     public Serializable createPopulatedInstance(Serializable instance, Entity entity,                    </span>
<span class="7620597898847416584" onmouseenter="enter('7620597898847416584');" onmouseout="out('7620597898847416584');" style=""> 259             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException { </span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 260         return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261     }                                                                                                    </span>
<span  style=""> 262                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263     @Override                                                                                            </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 264     public Serializable createPopulatedInstance(Serializable instance, Entity entity,                    </span>
<span class="-6938882731089232507" onmouseenter="enter('-6938882731089232507');" onmouseout="out('-6938882731089232507');" style=""><abbr title=" 265             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 265             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedPrðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""><abbr title=" 266         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);"> 266         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredPropertðŸ”µ</abbr></span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 267         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 268         boolean handled = false;                                                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 269         for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {            </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 270             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 270             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPrðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 271             if (MetadataProviderResponse.NOT_HANDLED != response) {                                      </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 272                 handled = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273             }                                                                                            </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 274             if (MetadataProviderResponse.HANDLED_BREAK == response) {                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 275                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277         }                                                                                                </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 278         if (!handled) {                                                                                  </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 279             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 279             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280         }                                                                                                </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 281         //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 281         //Order media field, map field and rule builder fields last, as they will have some validation coðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 282         Property[] sortedProperties = entity.getProperties();                                            </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 283         Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                       </span>
<span  style=""> 284                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 285             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 286             public int compare(Property o1, Property o2) {                                               </span>
<span class="4801041391951231473" onmouseenter="enter('4801041391951231473');" onmouseout="out('4801041391951231473');" style=""> 287                 BasicFieldMetadata mo1 = (BasicFieldMetadata) mergedProperties.get(o1.getName());        </span>
<span class="8712312491906706674" onmouseenter="enter('8712312491906706674');" onmouseout="out('8712312491906706674');" style=""> 288                 BasicFieldMetadata mo2 = (BasicFieldMetadata) mergedProperties.get(o2.getName());        </span>
<span class="5597729834250389465" onmouseenter="enter('5597729834250389465');" onmouseout="out('5597729834250389465');" style=""><abbr title=" 289                 boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo1.getFieldType() ||"> 289                 boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (ðŸ”µ</abbr></span>
<span class="-5228840553210193176" onmouseenter="enter('-5228840553210193176');" onmouseout="out('-5228840553210193176');" style=""> 290                         SupportedFieldType.RULE_WITH_QUANTITY==mo1.getFieldType() ||                     </span>
<span class="-2825740162482404988" onmouseenter="enter('-2825740162482404988');" onmouseout="out('-2825740162482404988');" style=""> 291                         SupportedFieldType.RULE_SIMPLE_TIME==mo1.getFieldType() ||                       </span>
<span class="-2758640436691235457" onmouseenter="enter('-2758640436691235457');" onmouseout="out('-2758640436691235457');" style=""><abbr title=" 292                         SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 292                         SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManageðŸ”µ</abbr></span>
<span class="4460185052151715074" onmouseenter="enter('4460185052151715074');" onmouseout="out('4460185052151715074');" style=""><abbr title=" 293                 boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo2.getFieldType() ||"> 293                 boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (ðŸ”µ</abbr></span>
<span class="1101038090453452590" onmouseenter="enter('1101038090453452590');" onmouseout="out('1101038090453452590');" style=""> 294                         SupportedFieldType.RULE_WITH_QUANTITY==mo2.getFieldType() ||                     </span>
<span class="-8197603398477948159" onmouseenter="enter('-8197603398477948159');" onmouseout="out('-8197603398477948159');" style=""> 295                         SupportedFieldType.RULE_SIMPLE_TIME==mo2.getFieldType() ||                       </span>
<span class="-275758415706895485" onmouseenter="enter('-275758415706895485');" onmouseout="out('-275758415706895485');" style=""><abbr title=" 296                         SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 296                         SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManageðŸ”µ</abbr></span>
<span class="-2026914999367619686" onmouseenter="enter('-2026914999367619686');" onmouseout="out('-2026914999367619686');" style=""> 297                 if (isLate1 &amp;&amp; !isLate2) {                                                               </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 298                     return 1;                                                                            </span>
<span class="-3681644454129428558" onmouseenter="enter('-3681644454129428558');" onmouseout="out('-3681644454129428558');" style=""> 299                 } else if (!isLate1 &amp;&amp; isLate2) {                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 300                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301                 }                                                                                        </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 302                 return 0;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 304         });                                                                                              </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 305         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 305         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrapðŸ”µ</abbr></span>
<span class="5994630726155221613" onmouseenter="enter('5994630726155221613');" onmouseout="out('5994630726155221613');" style=""> 306         FlushMode originalFlushMode = session.getHibernateFlushMode();                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 307         try {                                                                                            </span>
<span class="5642929065352278415" onmouseenter="enter('5642929065352278415');" onmouseout="out('5642929065352278415');" style=""> 308             session.setHibernateFlushMode(FlushMode.MANUAL);                                             </span>
<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 309             RuntimeException entityPersistenceException = null;                                          </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 310             for (Property property : sortedProperties) {                                                 </span>
<span class="1357949122558141334" onmouseenter="enter('1357949122558141334');" onmouseout="out('1357949122558141334');" style=""><abbr title=" 311                 BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName());"> 311                 BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName(ðŸ”µ</abbr></span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 312                 Class&lt;?&gt; returnType;                                                                     </span>
<span class="8439611434668123958" onmouseenter="enter('8439611434668123958');" onmouseout="out('8439611434668123958');" style=""><abbr title=" 313                 if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWith(&quot;__&quot;)) {"> 313                 if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().sðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 314                     Field field = fieldManager.getField(instance.getClass(), property.getName());        </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 315                     if (field == null) {                                                                 </span>
<span class="2139581581669054854" onmouseenter="enter('2139581581669054854');" onmouseout="out('2139581581669054854');" style=""><abbr title=" 316                         LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 316                         LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 317                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318                     }                                                                                    </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 319                     returnType = field.getType();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 320                 } else {                                                                                 </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 321                     if (metadata == null) {                                                              </span>
<span class="8114946394939525604" onmouseenter="enter('8114946394939525604');" onmouseout="out('8114946394939525604');" style=""><abbr title=" 322                         LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 322                         LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StriðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 323                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324                     }                                                                                    </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 325                     returnType = getMapFieldType(instance, fieldManager, property);                      </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 326                     if (returnType == null) {                                                            </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 327                         returnType = getBasicBroadleafType(metadata.getFieldType());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329                 }                                                                                        </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 330                 if (returnType == null) {                                                                </span>
<span class="8716882681587381997" onmouseenter="enter('8716882681587381997');" onmouseout="out('8716882681587381997');" style=""><abbr title=" 331                     throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + property.getName() + &quot;)&quot;);"> 331                     throw new IllegalAccessException(&quot;Unable to determine the value type for the propertyðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332                 }                                                                                        </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 333                 String value = property.getValue();                                                      </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 334                 if (metadata != null) {                                                                  </span>
<span  style=""> 335                                                                                                          </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 336                     if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                    </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 337                         if (value == null) {                                                             </span>
<span class="-8520936090313964890" onmouseenter="enter('-8520936090313964890');" onmouseout="out('-8520936090313964890');" style=""> 338                             String defaultValue = metadata.getDefaultValue();                            </span>
<span class="-7748715783254025298" onmouseenter="enter('-7748715783254025298');" onmouseout="out('-7748715783254025298');" style=""> 339                             value = StringUtils.isBlank(defaultValue)? &quot;false&quot; : defaultValue;           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340                         }                                                                                </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 341                     } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 342                         if (StringUtils.isEmpty(value)) {                                                </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 343                             value = null;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345                     }                                                                                    </span>
<span  style=""> 346                                                                                                          </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 347                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 347                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity,ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 348                         boolean isValid = true;                                                          </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 349                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 349                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, propðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 350                         handled = false;                                                                 </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 351                         if (value != null) {                                                             </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 352                             for (PopulateValueRequestValidator validator : populateValidators) {         </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""><abbr title=" 353                                 PropertyValidationResult validationResult = validator.validate(request, instance);"> 353                                 PropertyValidationResult validationResult = validator.validate(request, iðŸ”µ</abbr></span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 354                                 if (!validationResult.isValid()) {                                       </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 355                                     entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 355                                     entity.addValidationError(property.getName(), validationResult.getErrðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 356                                     isValid = false;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359                         }                                                                                </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 360                         if (isValid) {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 361                             try {                                                                        </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 362                                 boolean isBreakDetected = false;                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 363                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 363                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceðŸ”µ</abbr></span>
<span class="-2175392382273122455" onmouseenter="enter('-2175392382273122455');" onmouseout="out('-2175392382273122455');" style=""><abbr title=" 364                                     if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {"> 364                                     if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (vaðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 365                                         MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 365                                         MetadataProviderResponse response = fieldPersistenceProvider.popuðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 366                                         if (MetadataProviderResponse.NOT_HANDLED != response) {          </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 367                                             handled = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368                                         }                                                                </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 369                                         if (MetadataProviderResponse.HANDLED_BREAK == response) {        </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 370                                             isBreakDetected = true;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373                                 }                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 374                                 if (!handled) {                                                          </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 375                                     if (value == null) {                                                 </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 376                                         property.setIsDirty(true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377                                     }                                                                    </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 378                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 378                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequesðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 379                                     if (value == null) {                                                 </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 380                                         fieldManager.setFieldValue(instance, property.getName(), null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382                                 }                                                                        </span>
<span class="8793300741685062154" onmouseenter="enter('8793300741685062154');" onmouseout="out('8793300741685062154');" style=""><abbr title=" 383                             } catch (ParentEntityPersistenceException | javax.validation.ValidationException e) {"> 383                             } catch (ParentEntityPersistenceException | javax.validation.ValidationExceptðŸ”µ</abbr></span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 384                                 entityPersistenceException = e;                                          </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 385                                 cleanupFailedPersistenceAttempt(instance);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 386                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391             }                                                                                            </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 392             // Only check validation if not the initial add                                              </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 393             if (!entity.isPreAdd()) {                                                                    </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 394                 validate(entity, instance, mergedProperties, validateUnsubmittedProperties);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395             }                                                                                            </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""><abbr title=" 396             //if validation failed, refresh the current instance so that none of the changes will be persisted"> 396             //if validation failed, refresh the current instance so that none of the changes will be persðŸ”µ</abbr></span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 397             if (entity.isValidationFailure()) {                                                          </span>
<span class="-5245333264083845326" onmouseenter="enter('-5245333264083845326');" onmouseout="out('-5245333264083845326');" style=""> 398                 //only refresh the instance if it was managed to begin with                              </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""><abbr title=" 399                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {"> 399                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instanceðŸ”µ</abbr></span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 400                     persistenceManager.getDynamicEntityDao().refresh(instance);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401                 }                                                                                        </span>
<span  style=""> 402                                                                                                          </span>
<span class="-2797407664577460515" onmouseenter="enter('-2797407664577460515');" onmouseout="out('-2797407664577460515');" style=""><abbr title=" 403                 //re-initialize the valid properties for the entity in order to deal with the potential of not"> 403                 //re-initialize the valid properties for the entity in order to deal with the potential oðŸ”µ</abbr></span>
<span class="7620881433898036398" onmouseenter="enter('7620881433898036398');" onmouseout="out('7620881433898036398');" style=""> 404                 //completely sending over all checkbox/radio fields                                      </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 405                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 406                 entityList.add(instance);                                                                </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 407                 Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];          </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 408                 invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());               </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 409                 invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                   </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 410                 invalid.overridePropertyValues(entity);                                                  </span>
<span  style=""> 411                                                                                                          </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 412                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 412                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), ðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 413                 throw new ValidationException(invalid, message);                                         </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 414             } else if (entityPersistenceException != null) {                                             </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 415                 throw ExceptionHelper.refineException(entityPersistenceException.getCause());            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 416             } else {                                                                                     </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 417                 fieldManager.persistMiddleEntities();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418             }                                                                                            </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 419         } catch (IllegalAccessException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 420             throw new PersistenceException(e);                                                           </span>
<span class="6243028624057522413" onmouseenter="enter('6243028624057522413');" onmouseout="out('6243028624057522413');" style=""> 421         } catch (InstantiationException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 422             throw new PersistenceException(e);                                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 423         } finally {                                                                                      </span>
<span class="4677599505604490897" onmouseenter="enter('4677599505604490897');" onmouseout="out('4677599505604490897');" style=""> 424             session.setHibernateFlushMode(originalFlushMode);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425         }                                                                                                </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 426         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427     }                                                                                                    </span>
<span  style=""> 428                                                                                                          </span>
<span class="461529783746476585" onmouseenter="enter('461529783746476585');" onmouseout="out('461529783746476585');" style=""><abbr title=" 429     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance,"> 429     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable iðŸ”µ</abbr></span>
<span class="3885863412641560188" onmouseenter="enter('3885863412641560188');" onmouseout="out('3885863412641560188');" style=""><abbr title=" 430                                              Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 430                                              Boolean setId, BasicFieldMetadata metadata, Entity entity, SðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 431         Boolean mutable = metadata.getMutable();                                                         </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 432         Boolean readOnly = metadata.getReadOnly();                                                       </span>
<span class="949029723485795199" onmouseenter="enter('949029723485795199');" onmouseout="out('949029723485795199');" style=""><abbr title=" 433         boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; property.getEnabled();"> 433         boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp;ðŸ”µ</abbr></span>
<span  style=""> 434                                                                                                          </span>
<span class="-5466596695953259298" onmouseenter="enter('-5466596695953259298');" onmouseout="out('-5466596695953259298');" style=""> 435         if (generalConditionsMet &amp;&amp; value == null) {                                                     </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 436             boolean currentValueIsNotNull = false;                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 437             try {                                                                                        </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 438                 currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;</span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 439             } catch (FieldNotAvailableException e) {                                                     </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 440                 throw new IllegalArgumentException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441             }                                                                                            </span>
<span  style=""> 442                                                                                                          </span>
<span class="2174296922893169949" onmouseenter="enter('2174296922893169949');" onmouseout="out('2174296922893169949');" style=""> 443             boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;        </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 444             boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;         </span>
<span  style=""> 445                                                                                                          </span>
<span class="-802153418821632058" onmouseenter="enter('-802153418821632058');" onmouseout="out('-802153418821632058');" style=""> 446             return currentValueIsNotNull &amp;&amp; !entity.isPreAdd() &amp;&amp; valueIsNotNullId &amp;&amp; valueIsNotPassword;</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447         }                                                                                                </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 448         return generalConditionsMet;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449     }                                                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451     @Override                                                                                            </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 452     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 452     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;ðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 453         List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                     </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 454         records.add(record);                                                                             </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 455         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 455         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedPropertiesðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 456         return productEntities[0];                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457     }                                                                                                    </span>
<span  style=""> 458                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 459     @Override                                                                                            </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 460     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 460     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 461         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 461         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 462         return getRecord(mergedProperties, record, null, null);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463     }                                                                                                    </span>
<span  style=""> 464                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 465     @Override                                                                                            </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 466     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 466     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspectiveðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 467         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 467         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 468         return getRecords(mergedProperties, records, null, null, null);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469     }                                                                                                    </span>
<span  style=""> 470                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 471     @Override                                                                                            </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 472     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 472     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspectiveðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 473         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 473         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistenceðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474     }                                                                                                    </span>
<span  style=""> 475                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 476     @Override                                                                                            </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 477     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 477     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends SerialiðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 478         return getRecords(primaryMergedProperties, records, null, null, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479     }                                                                                                    </span>
<span  style=""> 480                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 481     @Override                                                                                            </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 482     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,             </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 483                                List&lt;? extends Serializable&gt; records,                                     </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 484                                Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,           </span>
<span class="-4377947839867578072" onmouseenter="enter('-4377947839867578072');" onmouseout="out('-4377947839867578072');" style=""> 485                                String pathToTargetObject) {                                              </span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 486         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 486         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedPropertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487     }                                                                                                    </span>
<span  style=""> 488                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 489     @Override                                                                                            </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 490     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,             </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 491                                List&lt;? extends Serializable&gt; records,                                     </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 492                                Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,           </span>
<span class="8335655514773173486" onmouseenter="enter('8335655514773173486');" onmouseout="out('8335655514773173486');" style=""> 493                                String pathToTargetObject,                                                </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 494                                String[] customCriteria) {                                                </span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 495         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 495         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfiltereðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 496         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 496         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 497         Entity[] entities = new Entity[records.size()];                                                  </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 498         int j = 0;                                                                                       </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 499         for (Serializable recordEntity : records) {                                                      </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 500             Serializable entity;                                                                         </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 501             if (pathToTargetObject != null) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 502                 try {                                                                                    </span>
<span class="-5492139625117264664" onmouseenter="enter('-5492139625117264664');" onmouseout="out('-5492139625117264664');" style=""><abbr title=" 503                     entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObject);"> 503                     entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObjðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 504                 } catch (Exception e) {                                                                  </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 505                     throw new PersistenceException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 507             } else {                                                                                     </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 508                 entity = recordEntity;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509             }                                                                                            </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 510             Entity entityItem = new Entity();                                                            </span>
<span class="3587737780108495887" onmouseenter="enter('3587737780108495887');" onmouseout="out('3587737780108495887');" style=""> 511             entityItem.setType(new String[] { entity.getClass().getName() });                            </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 512             entities[j] = entityItem;                                                                    </span>
<span  style=""> 513                                                                                                          </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 514             List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());              </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""><abbr title=" 515             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);"> 515             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria)ðŸ”µ</abbr></span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 516             if (alternateMergedProperties != null) {                                                     </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 517                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 517                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, cusðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518             }                                                                                            </span>
<span  style=""> 519                                                                                                          </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 520             // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 521             try {                                                                                        </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 522                 Property p = new Property();                                                             </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 523                 p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                    </span>
<span class="-280105646141823521" onmouseenter="enter('-280105646141823521');" onmouseout="out('-280105646141823521');" style=""> 524                 String mainEntityName = (String) MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;);  </span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 525                 p.setValue(mainEntityName);                                                              </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 526                 props.add(p);                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 527             } catch (Exception e) {                                                                      </span>
<span class="8396621627303093896" onmouseenter="enter('8396621627303093896');" onmouseout="out('8396621627303093896');" style=""> 528                 LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;,     </span>
<span class="210384044775512031" onmouseenter="enter('210384044775512031');" onmouseout="out('210384044775512031');" style=""> 529                         entity.getClass().getName()), e);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530             }                                                                                            </span>
<span  style=""> 531                                                                                                          </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 532             // Try to add the alternate id property if available                                         </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 533             if (alternateMergedProperties != null) {                                                     </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 534                 for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {        </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 535                     if (entry.getValue() instanceof BasicFieldMetadata) {                                </span>
<span class="-3735738621021538581" onmouseenter="enter('-3735738621021538581');" onmouseout="out('-3735738621021538581');" style=""><abbr title=" 536                         if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ID) {"> 536                         if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ðŸ”µ</abbr></span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""><abbr title=" 537                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();"> 537                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadðŸ”µ</abbr></span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 538                             alternateOnEntity.put(entry.getKey(), entry.getValue());                     </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 539                             List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                           </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 540                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 540                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2ðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 541                             List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                         </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 542                             for (Property prop : props2) {                                               </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 543                                 if (!prop.getName().startsWith(&quot;__&quot;)) {                                  </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 544                                     filtered.add(prop);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546                             }                                                                            </span>
<span class="7776429612545514862" onmouseenter="enter('7776429612545514862');" onmouseout="out('7776429612545514862');" style=""> 547                             if (filtered.size() == 1 &amp;&amp; !filtered.get(0).getName().contains(&quot;.&quot;)) {      </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 548                                 Property alternateIdProp = filtered.get(0);                              </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 549                                 alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                          </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 550                                 props.add(alternateIdProp);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555             }                                                                                            </span>
<span  style=""> 556                                                                                                          </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 557             Property[] properties = new Property[props.size()];                                          </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 558             properties = props.toArray(properties);                                                      </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 559             entityItem.setProperties(properties);                                                        </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 560             j++;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561         }                                                                                                </span>
<span  style=""> 562                                                                                                          </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 563         return entities;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564     }                                                                                                    </span>
<span  style=""> 565                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 566     @Override                                                                                            </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 567     public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                          </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 568         return fetchWrapper.getRecords(fetchExtractionRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569     }                                                                                                    </span>
<span  style=""> 570                                                                                                          </span>
<span class="2943865710042007016" onmouseenter="enter('2943865710042007016');" onmouseout="out('2943865710042007016');" style=""> 571     protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties,    </span>
<span class="-3214801195397343505" onmouseenter="enter('-3214801195397343505');" onmouseout="out('-3214801195397343505');" style=""> 572                                                          Serializable entity,                            </span>
<span class="6006324038342333129" onmouseenter="enter('6006324038342333129');" onmouseout="out('6006324038342333129');" style=""> 573                                                          List&lt;Property&gt; props,                           </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 574                                                          String[] customCriteria) {                      </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 575         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 576         try {                                                                                            </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 577             if (entity instanceof AdminMainEntity) {                                                     </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 578                 //Create an invisible property for the admin main entity name, if applicable.            </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 579                 //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive      </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 580                 //its display name.                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 581                 try {                                                                                    </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 582                     Property propertyItem = new Property();                                              </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 583                     propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                     </span>
<span class="-3439538412113948348" onmouseenter="enter('-3439538412113948348');" onmouseout="out('-3439538412113948348');" style=""> 584                     propertyItem.setValue(((AdminMainEntity) entity).getMainEntityName());               </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 585                     props.add(propertyItem);                                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 586                 } catch (Exception e) {                                                                  </span>
<span class="-6660676054828691164" onmouseenter="enter('-6660676054828691164');" onmouseout="out('-6660676054828691164');" style=""><abbr title=" 587                     //do nothing here except for not add the property. Exceptions could occur when there is a validation"> 587                     //do nothing here except for not add the property. Exceptions could occur when there ðŸ”µ</abbr></span>
<span class="6622622754482242268" onmouseenter="enter('6622622754482242268');" onmouseout="out('6622622754482242268');" style=""><abbr title=" 588                     //issue and some properties/relationships that are used for gleaning the main entity name end up"> 588                     //issue and some properties/relationships that are used for gleaning the main entity ðŸ”µ</abbr></span>
<span class="-3324578144663288556" onmouseenter="enter('-3324578144663288556');" onmouseout="out('-3324578144663288556');" style=""> 589                     //not being set                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591             }                                                                                            </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 592             for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 593                 String property = entry.getKey();                                                        </span>
<span class="-6557658272043627235" onmouseenter="enter('-6557658272043627235');" onmouseout="out('-6557658272043627235');" style=""> 594                 BasicFieldMetadata metadata = (BasicFieldMetadata) entry.getValue();                     </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 595                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 595                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) ||ðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 596                     boolean proceed = true;                                                              </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 597                     if (property.contains(&quot;.&quot;)) {                                                        </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 598                         StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                     </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 599                         Object testObject = entity;                                                      </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 600                         while (tokens.hasMoreTokens()) {                                                 </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 601                             String token = tokens.nextToken();                                           </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 602                             if (tokens.hasMoreTokens()) {                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 603                                 try {                                                                    </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 604                                     testObject = fieldManager.getFieldValue(testObject, token);          </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 605                                 } catch (FieldNotAvailableException e) {                                 </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 606                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 607                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608                                 }                                                                        </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 609                                 if (testObject == null) {                                                </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 610                                     Property propertyItem = new Property();                              </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 611                                     propertyItem.setName(property);                                      </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 612                                     if (props.contains(propertyItem)) {                                  </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 613                                         proceed = false;                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 614                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615                                     }                                                                    </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 616                                     propertyItem.setValue(null);                                         </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 617                                     props.add(propertyItem);                                             </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 618                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 619                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                     }                                                                                    </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 624                     if (!proceed) {                                                                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 625                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626                     }                                                                                    </span>
<span  style=""> 627                                                                                                          </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 628                     boolean isFieldAccessible = true;                                                    </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 629                     Object value = null;                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 630                     try {                                                                                </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 631                         value = fieldManager.getFieldValue(entity, property);                            </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 632                     } catch (FieldNotAvailableException e) {                                             </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 633                         isFieldAccessible = false;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634                     }                                                                                    </span>
<span class="-1242713994964830615" onmouseenter="enter('-1242713994964830615');" onmouseout="out('-1242713994964830615');" style=""> 635                     checkField:                                                                          </span>
<span class="5677081435180812955" onmouseenter="enter('5677081435180812955');" onmouseout="out('5677081435180812955');" style=""> 636                     {                                                                                    </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 637                         if (isFieldAccessible) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 638                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 639                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 640                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 641                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 643                             props.add(propertyItem);                                                     </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 644                             String displayVal = propertyItem.getDisplayValue();                          </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 645                             boolean handled = false;                                                     </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 646                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 646                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvðŸ”µ</abbr></span>
<span class="-6209348320960420357" onmouseenter="enter('-6209348320960420357');" onmouseout="out('-6209348320960420357');" style=""><abbr title=" 647                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValue("> 647                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValueðŸ”µ</abbr></span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""><abbr title=" 648                                         new ExtractValueRequest(props, fieldManager, metadata, value, displayVal,"> 648                                         new ExtractValueRequest(props, fieldManager, metadata, value, disðŸ”µ</abbr></span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""><abbr title=" 649                                                 persistenceManager, this, entity, customCriteria), propertyItem);"> 649                                                 persistenceManager, this, entity, customCriteria), properðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 650                                 if (MetadataProviderResponse.NOT_HANDLED != response) {                  </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 651                                     handled = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652                                 }                                                                        </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 653                                 if (MetadataProviderResponse.HANDLED_BREAK == response) {                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 654                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656                             }                                                                            </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 657                             if (!handled) {                                                              </span>
<span class="5660532463858602467" onmouseenter="enter('5660532463858602467');" onmouseout="out('5660532463858602467');" style=""> 658                                 defaultFieldPersistenceProvider.extractValue(                            </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""><abbr title=" 659                                         new ExtractValueRequest(props, fieldManager, metadata, value, displayVal,"> 659                                         new ExtractValueRequest(props, fieldManager, metadata, value, disðŸ”µ</abbr></span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""><abbr title=" 660                                                 persistenceManager, this, entity, customCriteria), propertyItem);"> 660                                                 persistenceManager, this, entity, customCriteria), properðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661                             }                                                                            </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 662                             break checkField;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663                         }                                                                                </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 664                         //try a direct property acquisition via reflection                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 665                         try {                                                                            </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 666                             String strVal = null;                                                        </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 667                             Method method;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 668                             try {                                                                        </span>
<span class="-188265031890242666" onmouseenter="enter('-188265031890242666');" onmouseout="out('-188265031890242666');" style=""> 669                                 //try a &#x27;get&#x27; prefixed mutator first                                     </span>
<span class="2344864789387251771" onmouseenter="enter('2344864789387251771');" onmouseout="out('2344864789387251771');" style=""><abbr title=" 670                                 String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(1, property.length());"> 670                                 String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.sðŸ”µ</abbr></span>
<span class="6434236432742156955" onmouseenter="enter('6434236432742156955');" onmouseout="out('6434236432742156955');" style=""> 671                                 method = entity.getClass().getMethod(temp, new Class[] {});              </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 672                             } catch (NoSuchMethodException e) {                                          </span>
<span class="5628920111567796624" onmouseenter="enter('5628920111567796624');" onmouseout="out('5628920111567796624');" style=""> 673                                 method = entity.getClass().getMethod(property, new Class[] {});          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674                             }                                                                            </span>
<span class="-1268801467547302511" onmouseenter="enter('-1268801467547302511');" onmouseout="out('-1268801467547302511');" style=""> 675                             value = method.invoke(entity, new String[] {});                              </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 676                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 677                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 678                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 679                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 681                             props.add(propertyItem);                                                     </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 682                             if (value == null) {                                                         </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 683                                 strVal = null;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 684                             } else {                                                                     </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 685                                 if (Date.class.isAssignableFrom(value.getClass())) {                     </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 686                                     strVal = getSimpleDateFormatter().format((Date) value);              </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 687                                 } else if (Timestamp.class.isAssignableFrom(value.getClass())) {         </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""><abbr title=" 688                                     strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));"> 688                                     strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value)ðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 689                                 } else if (Calendar.class.isAssignableFrom(value.getClass())) {          </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""><abbr title=" 690                                     strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());"> 690                                     strVal = getSimpleDateFormatter().format(((Calendar) value).getTime()ðŸ”µ</abbr></span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 691                                 } else if (Double.class.isAssignableFrom(value.getClass())) {            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 692                                     strVal = getDecimalFormatter().format(value);                        </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 693                                 } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {        </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 694                                     strVal = getDecimalFormatter().format(value);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 695                                 } else {                                                                 </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 696                                     strVal = value.toString();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698                             }                                                                            </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 699                             propertyItem.setValue(strVal);                                               </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 700                         } catch (NoSuchMethodException e) {                                              </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 701                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 701                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.ðŸ”µ</abbr></span>
<span class="4115063574789816242" onmouseenter="enter('4115063574789816242');" onmouseout="out('4115063574789816242');" style=""> 702                             //do nothing - this property is simply not in the bean                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 707         } catch (ClassNotFoundException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 708             throw new PersistenceException(e);                                                           </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 709         } catch (IllegalAccessException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 710             throw new PersistenceException(e);                                                           </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 711         } catch (InvocationTargetException e) {                                                          </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 712             throw new PersistenceException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714     }                                                                                                    </span>
<span  style=""> 715                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 716     @Override                                                                                            </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 717     public String getStringValueFromGetter(Serializable instance, String propertyName)                   </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 718             throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {            </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 719         Object value = PropertyUtils.getProperty(instance, propertyName);                                </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 720         return formatValue(value);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721     }                                                                                                    </span>
<span  style=""> 722                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 723     @Override                                                                                            </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 724     public String formatValue(Object value) {                                                            </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 725         String strVal;                                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 726         if (value == null) {                                                                             </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 727             strVal = null;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 728         } else {                                                                                         </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 729             if (Date.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 730                 strVal = getSimpleDateFormatter().format((Date) value);                                  </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 731             } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                             </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 732                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));       </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 733             } else if (Calendar.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 734                 strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                  </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 735             } else if (Double.class.isAssignableFrom(value.getClass())) {                                </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 736                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 737             } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 738                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 739             } else {                                                                                     </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 740                 strVal = value.toString();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742         }                                                                                                </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 743         return strVal;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744     }                                                                                                    </span>
<span  style=""> 745                                                                                                          </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 746     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 746     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean incluðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 747         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 748         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 749         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 750         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 750         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 751         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 752             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 754         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 755             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 755             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 756             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 756             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 757                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 758                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 759                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 760                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 761                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 762                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 763                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 764                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 765                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 766                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 767                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 768                     );                                                                                   </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 769             if (primaryKey == null) {                                                                    </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 770                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771             }                                                                                            </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 772             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 772             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span  style=""> 773                                                                                                          </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 774             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span  style=""> 775                                                                                                          </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 776             if (!entity.isValidationFailure()) {                                                         </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 777                 //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property</span>
<span class="4247210219521112592" onmouseenter="enter('4247210219521112592');" onmouseout="out('4247210219521112592');" style=""> 778                 if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null &amp;&amp;                           </span>
<span class="235375556032951584" onmouseenter="enter('235375556032951584');" onmouseout="out('235375556032951584');" style=""> 779                         entity.findProperty(foreignKey.getSortField()) != null &amp;&amp;                        </span>
<span class="7175038170339042705" onmouseenter="enter('7175038170339042705');" onmouseout="out('7175038170339042705');" style=""> 780                         entity.findProperty(foreignKey.getSortField()).getValue() != null) {             </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title=" 781                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();"> 781                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="5598129937237964517" onmouseenter="enter('5598129937237964517');" onmouseout="out('5598129937237964517');" style=""> 782                     extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance,   </span>
<span class="4380637637969964834" onmouseenter="enter('4380637637969964834');" onmouseout="out('4380637637969964834');" style=""> 783                             mergedProperties, primaryKey, result);                                       </span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 784                     instance = result.getResult();                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 785                 } else {                                                                                 </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 786                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 786                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787                 }                                                                                        </span>
<span  style=""> 788                                                                                                          </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 789                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 790                 if (includeRealEntity) {                                                                 </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 791                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792                 }                                                                                        </span>
<span  style=""> 793                                                                                                          </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 794                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 795                 entityList.add(instance);                                                                </span>
<span  style=""> 796                                                                                                          </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 797                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 798                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 799                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 800             } else {                                                                                     </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 801                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 802                 return entityResult;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 803             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 804         } catch (Exception e) {                                                                          </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 805             throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807     }                                                                                                    </span>
<span  style=""> 808                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 809     @Override                                                                                            </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 810     public String getIdPropertyName(String entityClass) {                                                </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 811         return persistenceManager.getIdPropertyName(entityClass);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812     }                                                                                                    </span>
<span  style=""> 813                                                                                                          </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 814     public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {             </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 815         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 815         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 816         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 817             BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);               </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 818             if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {               </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 819                 return property;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821         }                                                                                                </span>
<span  style=""> 822                                                                                                          </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""><abbr title=" 823         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;);"> 823         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged propertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824     }                                                                                                    </span>
<span  style=""> 825                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 826     @Override                                                                                            </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 827     public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {  </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 828         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 828         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 829         Object primaryKey = null;                                                                        </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 830         String idPropertyName = null;                                                                    </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 831         BasicFieldMetadata metaData = null;                                                              </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 832         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 833             BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);               </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 834             if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {               </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 835                 idPropertyName = property;                                                               </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 836                 metaData = temp;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 837                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839         }                                                                                                </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 840         if (idPropertyName == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 841             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 841             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with tðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842         }                                                                                                </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 843         for (Property property : entity.getProperties()) {                                               </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 844             if (property.getName().equals(idPropertyName)) {                                             </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 845                 switch (metaData.getSecondaryType()) {                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 846                     case INTEGER:                                                                        </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""><abbr title=" 847                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());"> 847                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValuðŸ”µ</abbr></span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 848                         break;                                                                           </span>
<span class="6509618406235281730" onmouseenter="enter('6509618406235281730');" onmouseout="out('6509618406235281730');" style=""> 849                     case STRING:                                                                         </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 850                         primaryKey = property.getValue();                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 851                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 853                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 854             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855         }                                                                                                </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 856         if (primaryKey == null) {                                                                        </span>
<span class="586132424145349171" onmouseenter="enter('586132424145349171');" onmouseout="out('586132424145349171');" style=""><abbr title=" 857             throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the passed entity with type: &quot; + entity.getType()[0]);"> 857             throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858         }                                                                                                </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 859         return primaryKey;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 860     }                                                                                                    </span>
<span  style=""> 861                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 862     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 863     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 864             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 865             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8254447054846048089" onmouseenter="enter('-8254447054846048089');" onmouseout="out('-8254447054846048089');" style=""> 866             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties,                                       </span>
<span class="3731877525338754789" onmouseenter="enter('3731877525338754789');" onmouseout="out('3731877525338754789');" style=""> 867             RestrictionFactory customRestrictionFactory) {                                               </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 868         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 868         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 869         List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                             </span>
<span  style=""> 870                                                                                                          </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 871         for (String propertyId : cto.getCriteriaMap().keySet()) {                                        </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 872             if (mergedProperties.containsKey(propertyId)) {                                              </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 873                 boolean handled = false;                                                                 </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 874                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {    </span>
<span class="-6114175924026036851" onmouseenter="enter('-6114175924026036851');" onmouseout="out('-6114175924026036851');" style=""> 875                     MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(       </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 876                             new AddSearchMappingRequest(persistencePerspective, cto,                     </span>
<span class="5810135378246725068" onmouseenter="enter('5810135378246725068');" onmouseout="out('5810135378246725068');" style=""> 877                                     ceilingEntityFullyQualifiedClassname, mergedProperties,              </span>
<span class="5077524350528682045" onmouseenter="enter('5077524350528682045');" onmouseout="out('5077524350528682045');" style=""><abbr title=" 878                                     propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restrictionFactory"> 878                                     propertyId, getFieldManager(), this, this, customRestrictionFactory==ðŸ”µ</abbr></span>
<span class="6427059933663878801" onmouseenter="enter('6427059933663878801');" onmouseout="out('6427059933663878801');" style=""> 879                                     :customRestrictionFactory), filterMappings);                         </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 880                     if (MetadataProviderResponse.NOT_HANDLED != response) {                              </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 881                         handled = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 882                     }                                                                                    </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 883                     if (MetadataProviderResponse.HANDLED_BREAK == response) {                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 884                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886                 }                                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 887                 if (!handled) {                                                                          </span>
<span class="8038403104028382935" onmouseenter="enter('8038403104028382935');" onmouseout="out('8038403104028382935');" style=""> 888                     defaultFieldPersistenceProvider.addSearchMapping(                                    </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 889                             new AddSearchMappingRequest(persistencePerspective, cto,                     </span>
<span class="-1188580278753724323" onmouseenter="enter('-1188580278753724323');" onmouseout="out('-1188580278753724323');" style=""> 890                                     ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId,  </span>
<span class="-6646794478608592484" onmouseenter="enter('-6646794478608592484');" onmouseout="out('-6646794478608592484');" style=""><abbr title=" 891                                     getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory"> 891                                     getFieldManager(), this, this, customRestrictionFactory == null ? resðŸ”µ</abbr></span>
<span class="878086898277429379" onmouseenter="enter('878086898277429379');" onmouseout="out('878086898277429379');" style=""> 892                                             : customRestrictionFactory), filterMappings);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 893                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895         }                                                                                                </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 896         return filterMappings;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897     }                                                                                                    </span>
<span  style=""> 898                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 899     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 900     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 901             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 902             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style=""> 903             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                     </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 904         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 904         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905     }                                                                                                    </span>
<span  style=""> 906                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 907     @Override                                                                                            </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 908     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 908     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 909         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 909         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910     }                                                                                                    </span>
<span  style=""> 911                                                                                                          </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 912     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 912     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style=""> 913         Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                   </span>
<span  style=""> 914                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 915             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 916             public int compare(Property o1, Property o2) {                                               </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style=""> 917                 return o1.getName().compareTo(o2.getName());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 919         };                                                                                               </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style=""> 920         Collections.sort(properties, comparator);                                                        </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style=""> 921         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 922             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style=""> 923             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style=""> 924             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style=""> 925             prop.setName(property);                                                                      </span>
<span  style=""> 926                                                                                                          </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 927             int pos = Collections.binarySearch(properties, prop, comparator);                            </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title=" 928             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {"> 928             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style=""> 929                 logWarn: {                                                                               </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title=" 930                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {"> 930                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style=""> 931                         //don&#x27;t warn for id field collisions, but still ignore the colliding fields      </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 932                         break logWarn;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933                     }                                                                                    </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 934                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 934                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + prðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935                 }                                                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 936                 continue;                                                                                </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style=""> 937             } else if (pos &lt; 0) {                                                                        </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style=""> 938                 pos = -pos - 1; // calculate position to insert                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939             }                                                                                            </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style=""> 940             properties.add(pos, prop);                                                                   </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 941             prop.setMetadata(metadata);                                                                  </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style=""> 942             if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                  </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 943                 //this only makes sense for non collection types                                         </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style=""> 944                 ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947     }                                                                                                    </span>
<span  style=""> 948                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 949     @Override                                                                                            </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 950     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 950     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, MapðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 951         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 951         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 952         try {                                                                                            </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""><abbr title=" 953             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();"> 953             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective(ðŸ”µ</abbr></span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""><abbr title=" 954             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);"> 954             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 955             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 955             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style=""> 956                     ceilingEntityFullyQualifiedClassname,                                                </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 957                     entities,                                                                            </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title=" 958                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),"> 958                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 959                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 960                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 961                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 962                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 963                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 964                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 965                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 966                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 967                     );                                                                                   </span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style=""> 968             allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 969         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title=" 970             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);"> 970             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 972     }                                                                                                    </span>
<span  style=""> 973                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 974     @Override                                                                                            </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title=" 975     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 975     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) thðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style=""> 976         return update(persistencePackage, null, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977     }                                                                                                    </span>
<span  style=""> 978                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 979     @Override                                                                                            </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style=""> 980     public Entity update(PersistencePackage persistencePackage) throws ServiceException {                </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style=""> 981         EntityResult er = update(persistencePackage, null, false);                                       </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style=""> 982         return er.getEntity();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983     }                                                                                                    </span>
<span  style=""> 984                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 985     @Override                                                                                            </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style=""> 986     public Entity add(PersistencePackage persistencePackage) throws ServiceException {                   </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style=""> 987         EntityResult entityResult = add(persistencePackage, false);                                      </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style=""> 988         return entityResult.getEntity();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989     }                                                                                                    </span>
<span  style=""> 990                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 991     @Override                                                                                            </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title=" 992     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 992     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throwðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 993         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 994         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 995         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 996         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 996         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 997         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 998             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1000         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1001             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1001             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1002             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1002             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1003                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1004                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1005                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1006                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1007                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1008                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1009                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1010                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1011                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1012                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1013                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1014                     );                                                                                   </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title="1015             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);">1015             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span  style="">1016                                                                                                          </span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style="">1017             String idProperty = null;                                                                    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style="">1018             for (String property : mergedProperties.keySet()) {                                          </span>
<span class="-2221369290108753372" onmouseenter="enter('-2221369290108753372');" onmouseout="out('-2221369290108753372');" style=""><abbr title="1019                 if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID) {">1019                 if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFielðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style="">1020                     idProperty = property;                                                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1021                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1023             }                                                                                            </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style="">1024             if (idProperty == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title="1025                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);">1025                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity wiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1026             }                                                                                            </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style="">1027             Object primaryKey = null;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1028             try {                                                                                        </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style="">1029                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1030             } catch (Exception e) {                                                                      </span>
<span class="-2276199612445624795" onmouseenter="enter('-2276199612445624795');" onmouseout="out('-2276199612445624795');" style="">1031                 //don&#x27;t do anything - this is a valid case                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032             }                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style="">1033             if (primaryKey == null) {                                                                    </span>
<span  style="">1034                                                                                                          </span>
<span class="-425360514461332458" onmouseenter="enter('-425360514461332458');" onmouseout="out('-425360514461332458');" style="">1035                 Serializable instance = (Serializable) Class.forName(entity.getType()[0]).newInstance(); </span>
<span  style="">1036                                                                                                          </span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style="">1037                 instance = createPopulatedInstance(instance, entity, mergedProperties, false);           </span>
<span  style="">1038                                                                                                          </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1039                 if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                           </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title="1040                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();">1040                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title="1041                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);">1041                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergeðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style="">1042                     instance = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043                 }                                                                                        </span>
<span  style="">1044                                                                                                          </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1045                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style="">1046                 if (includeRealEntityObject) {                                                           </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style="">1047                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048                 }                                                                                        </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style="">1049                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style="">1050                 entityList.add(instance);                                                                </span>
<span  style="">1051                                                                                                          </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style="">1052                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style="">1053                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style="">1054                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1055             } else {                                                                                     </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style="">1056                 return update(persistencePackage, primaryKey, includeRealEntityObject);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1058         } catch (Exception e) {                                                                          </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style="">1059             throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061     }                                                                                                    </span>
<span  style="">1062                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1063     @Override                                                                                            </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style="">1064     public void remove(PersistencePackage persistencePackage) throws ServiceException {                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1065         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1066         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1067         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1067         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1068         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1069             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1071         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1072             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1072             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1073             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1073             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1074                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1075                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1076                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1077                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1078                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1079                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1080                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1081                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1082                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1083                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1084                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1085                     );                                                                                   </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title="1086             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);">1086             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style="">1087             Object primaryKey = getPrimaryKey(entity, mergedProperties);                                 </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title="1088             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);">1088             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span  style="">1089                                                                                                          </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style="">1090             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span  style="">1091                                                                                                          </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style="">1092             switch (persistencePerspective.getOperationTypes().getRemoveType()) {                        </span>
<span class="5189123261615208670" onmouseenter="enter('5189123261615208670');" onmouseout="out('5189123261615208670');" style="">1093                 case NONDESTRUCTIVEREMOVE:                                                               </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style="">1094                     FieldManager fieldManager = getFieldManager();                                       </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title="1095                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());">1095                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style=""><abbr title="1096                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();">1096                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1097                     try {                                                                                </span>
<span class="-7359786243551687396" onmouseenter="enter('-7359786243551687396');" onmouseout="out('-7359786243551687396');" style="">1098                         foreignKeyValue = Long.valueOf((String) foreignKeyValue);                        </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="">1099                     } catch (NumberFormatException e) {                                                  </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style=""><abbr title="1100                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);">1100                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove looðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101                     }                                                                                    </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title="1102                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);">1102                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(ClasðŸ”µ</abbr></span>
<span class="-6891408169238328357" onmouseenter="enter('-6891408169238328357');" onmouseout="out('-6891408169238328357');" style=""><abbr title="1103                     Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());">1103                     Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style="">1104                     collection.remove(instance);                                                         </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title="1105                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on">1105                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (justðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style=""><abbr title="1106                     // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly">1106                     // the @ManyToOne side) then it will not be updated. In that instance, we have to expðŸ”µ</abbr></span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style="">1107                     // set the manyTo field to null so that subsequent lookups will not find it          </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style="">1108                     if (manyToFieldMetadata instanceof BasicFieldMetadata) {                             </span>
<span class="3041576912599376884" onmouseenter="enter('3041576912599376884');" onmouseout="out('3041576912599376884');" style=""><abbr title="1109                         if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())) {">1109                         if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())ðŸ”µ</abbr></span>
<span class="-3179114257339016284" onmouseenter="enter('-3179114257339016284');" onmouseout="out('-3179114257339016284');" style=""><abbr title="1110                             throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot;">1110                             throw new ServiceException(&quot;Could not remove from the collection as the ManyTðŸ”µ</abbr></span>
<span class="-7704143059315768665" onmouseenter="enter('-7704143059315768665');" onmouseout="out('-7704143059315768665');" style=""><abbr title="1111                                     + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot;">1111                                     + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in tðŸ”µ</abbr></span>
<span class="-8899164530562544377" onmouseenter="enter('-8899164530562544377');" onmouseout="out('-8899164530562544377');" style="">1112                                     + &quot; or nullable=true within the @JoinColumn annotation&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113                         }                                                                                </span>
<span class="1164649929234803369" onmouseenter="enter('1164649929234803369');" onmouseout="out('1164649929234803369');" style=""><abbr title="1114                         //Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module">1114                         //Since this is occuring on a remove persistence package, merge up-front (before ðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1115                         instance = persistenceManager.getDynamicEntityDao().merge(instance);             </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title="1116                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());">1116                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style="">1117                         Object manyToObject = manyToField.get(instance);                                 </span>
<span class="-7515244788292498989" onmouseenter="enter('-7515244788292498989');" onmouseout="out('-7515244788292498989');" style=""><abbr title="1118                         if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanceof Map)) {">1118                         if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObjeðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style="">1119                             manyToField.set(instance, null);                                             </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1120                             instance = persistenceManager.getDynamicEntityDao().merge(instance);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1123                     break;                                                                               </span>
<span class="-5424424301156351095" onmouseenter="enter('-5424424301156351095');" onmouseout="out('-5424424301156351095');" style="">1124                 case BASIC:                                                                              </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style="">1125                     persistenceManager.getDynamicEntityDao().remove(instance);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1126                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1127             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1128         } catch (Exception e) {                                                                          </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1129             throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131     }                                                                                                    </span>
<span  style="">1132                                                                                                          </span>
<span class="-5101078461080852406" onmouseenter="enter('-5101078461080852406');" onmouseout="out('-5101078461080852406');" style="">1133     public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage,         </span>
<span class="-1790491118666975112" onmouseenter="enter('-1790491118666975112');" onmouseout="out('-1790491118666975112');" style="">1134             CriteriaTransferObject cto) throws ServiceException {                                        </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1135         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1136         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1136         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span  style="">1137                                                                                                          </span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1138         if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {             </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1139             persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140         }                                                                                                </span>
<span  style="">1141                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1142         try {                                                                                            </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1143             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1143             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span  style="">1144                                                                                                          </span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1145             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1145             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1146                     ceilingEntityFullyQualifiedClassname,                                                </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1147                     entities,                                                                            </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1148                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1148                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1149                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1150                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1151                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1152                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1153                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1154                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1155                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1156                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1157                     );                                                                                   </span>
<span  style="">1158                                                                                                          </span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1159             return mergedProperties;                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1160         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1161             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1161             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163     }                                                                                                    </span>
<span  style="">1164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1165     @Override                                                                                            </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1166     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1166     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1167         Entity[] payload;                                                                                </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1168         int totalRecords;                                                                                </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1169         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1170         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1170         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1171         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1171         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span  style="">1172                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1173         try {                                                                                            </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1174             if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                               </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1175                 FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                 </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1176                 sortCriteria.setSortAscending(foreignKey.getSortAscending());                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177             }                                                                                            </span>
<span  style="">1178                                                                                                          </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1179             Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);  </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style="">1180             if (useTranslationSearch) {                                                                  </span>
<span class="-4893882968490565148" onmouseenter="enter('-4893882968490565148');" onmouseout="out('-4893882968490565148');" style="">1181                 addTranslationSearchIfNeeded(cto, mergedProperties);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1182             }                                                                                            </span>
<span class="-6342955113620354561" onmouseenter="enter('-6342955113620354561');" onmouseout="out('-6342955113620354561');" style=""><abbr title="1183             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage">1183             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistenðŸ”µ</abbr></span>
<span class="-8965082019915054990" onmouseenter="enter('-8965082019915054990');" onmouseout="out('-8965082019915054990');" style="">1184                     .getFetchTypeFullyQualifiedClassname(), mergedProperties);                           </span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1185             List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);   </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1186             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1187                 standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188             }                                                                                            </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1189             if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                 </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1190                 standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191             }                                                                                            </span>
<span  style="">1192                                                                                                          </span>
<span class="-1243671803049331237" onmouseenter="enter('-1243671803049331237');" onmouseout="out('-1243671803049331237');" style="">1193             FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto,                        </span>
<span class="4292734980783020060" onmouseenter="enter('4292734980783020060');" onmouseout="out('4292734980783020060');" style="">1194                     persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);   </span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1195             List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                             </span>
<span  style="">1196                                                                                                          </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1197             List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);      </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1198             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1199                 countFilterMappings.addAll(cto.getAdditionalFilterMappings());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1200             }                                                                                            </span>
<span class="-3999242298419802693" onmouseenter="enter('-3999242298419802693');" onmouseout="out('-3999242298419802693');" style="">1201             FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto,                   </span>
<span class="-3552477247406350113" onmouseenter="enter('-3552477247406350113');" onmouseout="out('-3552477247406350113');" style="">1202                     persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);      </span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1203             totalRecords = getTotalRecords(countFetchRequest);                                           </span>
<span  style="">1204                                                                                                          </span>
<span class="-5158650912512765537" onmouseenter="enter('-5158650912512765537');" onmouseout="out('-5158650912512765537');" style=""><abbr title="1205             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto,">1205             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackageðŸ”µ</abbr></span>
<span class="6467880611752491014" onmouseenter="enter('6467880611752491014');" onmouseout="out('6467880611752491014');" style="">1206                     persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);</span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1207             payload = getRecords(fetchExtractionRequest);                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1208         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1209             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1209             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210         }                                                                                                </span>
<span  style="">1211                                                                                                          </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1212         return new DynamicResultSet(null, payload, totalRecords);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1213     }                                                                                                    </span>
<span  style="">1214                                                                                                          </span>
<span class="-6037376119596627025" onmouseenter="enter('-6037376119596627025');" onmouseout="out('-6037376119596627025');" style=""><abbr title="1215     private void addTranslationSearchIfNeeded(CriteriaTransferObject cto, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1215     private void addTranslationSearchIfNeeded(CriteriaTransferObject cto, Map&lt;String, FieldMetadata&gt; mergðŸ”µ</abbr></span>
<span class="-2846648248046819015" onmouseenter="enter('-2846648248046819015');" onmouseout="out('-2846648248046819015');" style="">1216         Map&lt;String, FilterAndSortCriteria&gt; criteriaMap = cto.getCriteriaMap();                           </span>
<span class="811702704133342292" onmouseenter="enter('811702704133342292');" onmouseout="out('811702704133342292');" style="">1217         FilterAndSortCriteria fsc = criteriaMap.get(&quot;translationLocale&quot;);                                </span>
<span class="8797373901407974682" onmouseenter="enter('8797373901407974682');" onmouseout="out('8797373901407974682');" style="">1218         List&lt;String&gt; filterValues = new ArrayList&lt;&gt;();                                                   </span>
<span class="7732194668261263043" onmouseenter="enter('7732194668261263043');" onmouseout="out('7732194668261263043');" style="">1219         if (fsc != null) {                                                                               </span>
<span class="2259588886243628801" onmouseenter="enter('2259588886243628801');" onmouseout="out('2259588886243628801');" style="">1220             filterValues = fsc.getFilterValues();                                                        </span>
<span class="2091742627616562528" onmouseenter="enter('2091742627616562528');" onmouseout="out('2091742627616562528');" style="">1221             criteriaMap.remove(&quot;translationLocale&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1222         }                                                                                                </span>
<span class="3485235865484365089" onmouseenter="enter('3485235865484365089');" onmouseout="out('3485235865484365089');" style="">1223         //If locale is generic - than we use all locales of this language                                </span>
<span class="-41588082364058856" onmouseenter="enter('-41588082364058856');" onmouseout="out('-41588082364058856');" style="">1224         //For example, if locale = &quot;en&quot; than we use also &quot;en_GB&quot; and &quot;en_US&quot;                             </span>
<span class="8329625728999317193" onmouseenter="enter('8329625728999317193');" onmouseout="out('8329625728999317193');" style="">1225         if (filterValues.size() &gt; 0 &amp;&amp; filterValues.get(0).indexOf(&quot;_&quot;) &lt; 0) {                           </span>
<span class="8492179051032337523" onmouseenter="enter('8492179051032337523');" onmouseout="out('8492179051032337523');" style="">1226             String currentLocaleCode = filterValues.get(0);                                              </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title="1227             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();">1227             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span class="-6592630843479972415" onmouseenter="enter('-6592630843479972415');" onmouseout="out('-6592630843479972415');" style="">1228             for (org.broadleafcommerce.common.locale.domain.Locale locale : locales) {                   </span>
<span class="-7527245144390113265" onmouseenter="enter('-7527245144390113265');" onmouseout="out('-7527245144390113265');" style=""><abbr title="1229                 if (!locale.getLocaleCode().equals(currentLocaleCode) &amp;&amp; currentLocaleCode.equals(locale.getLocaleCode().substring(0,2))) {">1229                 if (!locale.getLocaleCode().equals(currentLocaleCode) &amp;&amp; currentLocaleCode.equals(locale.ðŸ”µ</abbr></span>
<span class="-1114101031881938600" onmouseenter="enter('-1114101031881938600');" onmouseout="out('-1114101031881938600');" style="">1230                     filterValues.add(locale.getLocaleCode());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233         }                                                                                                </span>
<span class="7041175802579200053" onmouseenter="enter('7041175802579200053');" onmouseout="out('7041175802579200053');" style="">1234         Iterator&lt;Entry&lt;String, FilterAndSortCriteria&gt;&gt; iterator = criteriaMap.entrySet().iterator();     </span>
<span class="977968488612897428" onmouseenter="enter('977968488612897428');" onmouseout="out('977968488612897428');" style="">1235         while (iterator.hasNext()) {                                                                     </span>
<span class="-2018186862383960552" onmouseenter="enter('-2018186862383960552');" onmouseout="out('-2018186862383960552');" style="">1236             Entry&lt;String, FilterAndSortCriteria&gt; next = iterator.next();                                 </span>
<span  style="">1237                                                                                                          </span>
<span class="1265738709115975150" onmouseenter="enter('1265738709115975150');" onmouseout="out('1265738709115975150');" style="">1238             final String key = next.getKey();                                                            </span>
<span class="-7678196324163664201" onmouseenter="enter('-7678196324163664201');" onmouseout="out('-7678196324163664201');" style="">1239             FieldMetadata fieldMetadata = mergedProperties.get(key);                                     </span>
<span class="-1023901421219743812" onmouseenter="enter('-1023901421219743812');" onmouseout="out('-1023901421219743812');" style=""><abbr title="1240             if (fieldMetadata != null &amp;&amp; fieldMetadata instanceof BasicFieldMetadata &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getTranslatable()!=null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getTranslatable()) {">1240             if (fieldMetadata != null &amp;&amp; fieldMetadata instanceof BasicFieldMetadata &amp;&amp; ((BasicFieldMetadðŸ”µ</abbr></span>
<span class="4880585623334776575" onmouseenter="enter('4880585623334776575');" onmouseout="out('4880585623334776575');" style="">1241                 BasicFieldMetadata basicFieldMetadata = ((BasicFieldMetadata) fieldMetadata);            </span>
<span class="-388570270073866047" onmouseenter="enter('-388570270073866047');" onmouseout="out('-388570270073866047');" style="">1242                 if (next.getValue().getFilterValues().size() &gt; 0) {                                      </span>
<span class="713070525122680609" onmouseenter="enter('713070525122680609');" onmouseout="out('713070525122680609');" style="">1243                     final String value = next.getValue().getFilterValues().get(0);                       </span>
<span class="3317822052141256197" onmouseenter="enter('3317822052141256197');" onmouseout="out('3317822052141256197');" style="">1244                     final String targetClass = basicFieldMetadata.getTargetClass();                      </span>
<span class="-7313378335001093503" onmouseenter="enter('-7313378335001093503');" onmouseout="out('-7313378335001093503');" style="">1245                     final String fieldName = basicFieldMetadata.getFieldName();                          </span>
<span class="-850715722857507285" onmouseenter="enter('-850715722857507285');" onmouseout="out('-850715722857507285');" style="">1246                     final String friendlyType = getTranslationFriendlyType(targetClass);                 </span>
<span class="895212293547782698" onmouseenter="enter('895212293547782698');" onmouseout="out('895212293547782698');" style="">1247                     final List&lt;String&gt; localeValues = filterValues;                                      </span>
<span class="5947868462885005542" onmouseenter="enter('5947868462885005542');" onmouseout="out('5947868462885005542');" style="">1248                     if (friendlyType != null) {                                                          </span>
<span class="-6215380074365660212" onmouseenter="enter('-6215380074365660212');" onmouseout="out('-6215380074365660212');" style="">1249                         iterator.remove();                                                               </span>
<span class="947198310670736489" onmouseenter="enter('947198310670736489');" onmouseout="out('947198310670736489');" style="">1250                         cto.getAdditionalFilterMappings().add(new FilterMapping()                        </span>
<span class="2888003341970826788" onmouseenter="enter('2888003341970826788');" onmouseout="out('2888003341970826788');" style="">1251                                 .withDirectFilterValues(new EmptyFilterValues())                         </span>
<span class="-178271358118690506" onmouseenter="enter('-178271358118690506');" onmouseout="out('-178271358118690506');" style="">1252                                 .withRestriction(                                                        </span>
<span class="-7975261834482695502" onmouseenter="enter('-7975261834482695502');" onmouseout="out('-7975261834482695502');" style="">1253                                         new Restriction().withPredicateProvider(new PredicateProvider() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1254                                             @Override                                                    </span>
<span class="-6543887403560352788" onmouseenter="enter('-6543887403560352788');" onmouseout="out('-6543887403560352788');" style="">1255                                             public Predicate buildPredicate(CriteriaBuilder builder,     </span>
<span class="-7125560532692692259" onmouseenter="enter('-7125560532692692259');" onmouseout="out('-7125560532692692259');" style=""><abbr title="1256                                                                             FieldPathBuilder fieldPathBuilder,">1256                                                                             FieldPathBuilder fieldPathBuiðŸ”µ</abbr></span>
<span class="7512372620032911912" onmouseenter="enter('7512372620032911912');" onmouseout="out('7512372620032911912');" style="">1257                                                                             From root,                   </span>
<span class="-6496567708295007325" onmouseenter="enter('-6496567708295007325');" onmouseout="out('-6496567708295007325');" style="">1258                                                                             String ceilingEntity,        </span>
<span class="-1158993663019459187" onmouseenter="enter('-1158993663019459187');" onmouseout="out('-1158993663019459187');" style="">1259                                                                             String fullPropertyName,     </span>
<span class="-5850263724287795849" onmouseenter="enter('-5850263724287795849');" onmouseout="out('-5850263724287795849');" style="">1260                                                                             Path explicitPath,           </span>
<span class="-5946251977876316007" onmouseenter="enter('-5946251977876316007');" onmouseout="out('-5946251977876316007');" style="">1261                                                                             List directValues) {         </span>
<span class="-4398445738002779234" onmouseenter="enter('-4398445738002779234');" onmouseout="out('-4398445738002779234');" style="">1262                                                 Subquery subquery =                                      </span>
<span class="4320200709227808343" onmouseenter="enter('4320200709227808343');" onmouseout="out('4320200709227808343');" style=""><abbr title="1263                                                         fieldPathBuilder.getCriteria().subquery(Long.class);">1263                                                         fieldPathBuilder.getCriteria().subquery(Long.clasðŸ”µ</abbr></span>
<span class="-3003233056197271068" onmouseenter="enter('-3003233056197271068');" onmouseout="out('-3003233056197271068');" style="">1264                                                 Root transRoot = subquery.from(TranslationImpl.class);   </span>
<span class="-1828106112834311571" onmouseenter="enter('-1828106112834311571');" onmouseout="out('-1828106112834311571');" style="">1265                                                 subquery.select(builder.count(transRoot.get(&quot;id&quot;)));     </span>
<span class="-7827410329384074180" onmouseenter="enter('-7827410329384074180');" onmouseout="out('-7827410329384074180');" style="">1266                                                 Predicate type =                                         </span>
<span class="-7641385465441036986" onmouseenter="enter('-7641385465441036986');" onmouseout="out('-7641385465441036986');" style=""><abbr title="1267                                                         builder.equal(transRoot.get(&quot;entityType&quot;), friendlyType);">1267                                                         builder.equal(transRoot.get(&quot;entityType&quot;), friendðŸ”µ</abbr></span>
<span class="-8318529626652277752" onmouseenter="enter('-8318529626652277752');" onmouseout="out('-8318529626652277752');" style="">1268                                                 Predicate name =                                         </span>
<span class="-738855264844117982" onmouseenter="enter('-738855264844117982');" onmouseout="out('-738855264844117982');" style=""><abbr title="1269                                                         builder.equal(transRoot.get(&quot;fieldName&quot;), fieldName);">1269                                                         builder.equal(transRoot.get(&quot;fieldName&quot;), fieldNaðŸ”µ</abbr></span>
<span class="-8365644117166289056" onmouseenter="enter('-8365644117166289056');" onmouseout="out('-8365644117166289056');" style="">1270                                                 String[] split = key.split(&quot;\\.&quot;);                       </span>
<span class="2052011196962138618" onmouseenter="enter('2052011196962138618');" onmouseout="out('2052011196962138618');" style="">1271                                                 Path x = null;                                           </span>
<span class="-6625156218225986664" onmouseenter="enter('-6625156218225986664');" onmouseout="out('-6625156218225986664');" style="">1272                                                 for (int i = 0; i &lt; split.length; i++) {                 </span>
<span class="718039065179720471" onmouseenter="enter('718039065179720471');" onmouseout="out('718039065179720471');" style="">1273                                                     if (x == null) {                                     </span>
<span class="-9002262719383855885" onmouseenter="enter('-9002262719383855885');" onmouseout="out('-9002262719383855885');" style="">1274                                                         x = root.get(split[i]);                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1275                                                     } else {                                             </span>
<span class="6538684614966612209" onmouseenter="enter('6538684614966612209');" onmouseout="out('6538684614966612209');" style="">1276                                                         x = x.get(split[i]);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277                                                     }                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278                                                 }                                                        </span>
<span  style="">1279                                                                                                          </span>
<span class="2609703429332764186" onmouseenter="enter('2609703429332764186');" onmouseout="out('2609703429332764186');" style="">1280                                                 String likeValue = &quot;%&quot; + value + &quot;%&quot;;                    </span>
<span class="-4483755678606832428" onmouseenter="enter('-4483755678606832428');" onmouseout="out('-4483755678606832428');" style="">1281                                                 Predicate transValue =                                   </span>
<span class="1835078746369173226" onmouseenter="enter('1835078746369173226');" onmouseout="out('1835078746369173226');" style=""><abbr title="1282                                                         builder.like(transRoot.get(&quot;translatedValue&quot;), likeValue);">1282                                                         builder.like(transRoot.get(&quot;translatedValue&quot;), liðŸ”µ</abbr></span>
<span class="1363159350076321828" onmouseenter="enter('1363159350076321828');" onmouseout="out('1363159350076321828');" style="">1283                                                 Predicate localeValue =                                  </span>
<span class="6936594261820918527" onmouseenter="enter('6936594261820918527');" onmouseout="out('6936594261820918527');" style=""><abbr title="1284                                                         builder.isTrue(transRoot.get(&quot;localeCode&quot;).in(localeValues));">1284                                                         builder.isTrue(transRoot.get(&quot;localeCode&quot;).in(locðŸ”µ</abbr></span>
<span class="7877531404660919575" onmouseenter="enter('7877531404660919575');" onmouseout="out('7877531404660919575');" style=""><abbr title="1285                                                 Path y = split.length &gt; 1 ? root.get(split[0]).get(&quot;id&quot;) : root.get(&quot;id&quot;);">1285                                                 Path y = split.length &gt; 1 ? root.get(split[0]).get(&quot;id&quot;) ðŸ”µ</abbr></span>
<span class="3537025732073223017" onmouseenter="enter('3537025732073223017');" onmouseout="out('3537025732073223017');" style=""><abbr title="1286                                                 Predicate entityId = builder.equal(transRoot.get(&quot;entityId&quot;),">1286                                                 Predicate entityId = builder.equal(transRoot.get(&quot;entityIðŸ”µ</abbr></span>
<span class="6748376930371571444" onmouseenter="enter('6748376930371571444');" onmouseout="out('6748376930371571444');" style="">1287                                                         y);                                              </span>
<span class="-251672589130318843" onmouseenter="enter('-251672589130318843');" onmouseout="out('-251672589130318843');" style="">1288                                                 if (localeValues.size() &gt; 0) {                           </span>
<span class="-6685004596412549337" onmouseenter="enter('-6685004596412549337');" onmouseout="out('-6685004596412549337');" style=""><abbr title="1289                                                     subquery.where(builder.and(type, entityId, transValue, name, localeValue));">1289                                                     subquery.where(builder.and(type, entityId, transValueðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1290                                                 } else {                                                 </span>
<span class="7320091577548075010" onmouseenter="enter('7320091577548075010');" onmouseout="out('7320091577548075010');" style=""><abbr title="1291                                                     subquery.where(builder.and(type, entityId, transValue, name));">1291                                                     subquery.where(builder.and(type, entityId, transValueðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1292                                                 }                                                        </span>
<span  style="">1293                                                                                                          </span>
<span class="-8479552588770286801" onmouseenter="enter('-8479552588770286801');" onmouseout="out('-8479552588770286801');" style="">1294                                                 Predicate like = builder.like(x,                         </span>
<span class="2624583196561559460" onmouseenter="enter('2624583196561559460');" onmouseout="out('2624583196561559460');" style="">1295                                                         likeValue);                                      </span>
<span class="-3685673007027368665" onmouseenter="enter('-3685673007027368665');" onmouseout="out('-3685673007027368665');" style=""><abbr title="1296                                                 Predicate predicate = builder.or(like, builder.greaterThan(subquery, 0));">1296                                                 Predicate predicate = builder.or(like, builder.greaterThaðŸ”µ</abbr></span>
<span class="-7893760688546432215" onmouseenter="enter('-7893760688546432215');" onmouseout="out('-7893760688546432215');" style="">1297                                                 return predicate;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298                                             }                                                            </span>
<span class="-2540327120317221694" onmouseenter="enter('-2540327120317221694');" onmouseout="out('-2540327120317221694');" style="">1299                                         })));                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301                 }                                                                                        </span>
<span class="-6340274589575485740" onmouseenter="enter('-6340274589575485740');" onmouseout="out('-6340274589575485740');" style="">1302                 System.out.println(&quot;&quot;);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305     }                                                                                                    </span>
<span  style="">1306                                                                                                          </span>
<span class="490380134896946780" onmouseenter="enter('490380134896946780');" onmouseout="out('490380134896946780');" style="">1307     private String getTranslationFriendlyType(String targetClass) {                                      </span>
<span  style="">1308                                                                                                          </span>
<span class="6841703832389938731" onmouseenter="enter('6841703832389938731');" onmouseout="out('6841703832389938731');" style="">1309         TranslatedEntity instance = TranslatedEntity.getInstance(targetClass);                           </span>
<span class="-2802766618581615140" onmouseenter="enter('-2802766618581615140');" onmouseout="out('-2802766618581615140');" style="">1310         if (instance == null) {                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1311             try {                                                                                        </span>
<span class="-7525038970859272648" onmouseenter="enter('-7525038970859272648');" onmouseout="out('-7525038970859272648');" style="">1312                 Class&lt;?&gt;[] interfaces = Class.forName(targetClass).getInterfaces();                      </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="">1313                 int i = 0;                                                                               </span>
<span class="-6186732733724103268" onmouseenter="enter('-6186732733724103268');" onmouseout="out('-6186732733724103268');" style="">1314                 while (instance == null &amp;&amp; i &lt; interfaces.length) {                                      </span>
<span class="-2054172541787751148" onmouseenter="enter('-2054172541787751148');" onmouseout="out('-2054172541787751148');" style="">1315                     instance = TranslatedEntity.getInstance(interfaces[i].getName());                    </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style="">1316                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">1318             } catch (ClassNotFoundException e) {                                                         </span>
<span  style="">1319                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321         }                                                                                                </span>
<span  style="">1322                                                                                                          </span>
<span class="-7268340201557725928" onmouseenter="enter('-7268340201557725928');" onmouseout="out('-7268340201557725928');" style="">1323         return instance == null ? null : instance.getFriendlyType();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324     }                                                                                                    </span>
<span  style="">1325                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1326     @Override                                                                                            </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1327     public Integer getTotalRecords(FetchRequest fetchRequest) {                                          </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1328         return fetchWrapper.getTotalRecords(fetchRequest);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329     }                                                                                                    </span>
<span  style="">1330                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1331     @Override                                                                                            </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1332     public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1333         try {                                                                                            </span>
<span class="2992791529598050608" onmouseenter="enter('2992791529598050608');" onmouseout="out('2992791529598050608');" style=""><abbr title="1334             return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(),">1334             return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(ðŸ”µ</abbr></span>
<span class="9038213180647386393" onmouseenter="enter('9038213180647386393');" onmouseout="out('9038213180647386393');" style="">1335                     ceilingEntity, filterMappings).getSingleResult()).intValue();                        </span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1336         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1337             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1337             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="3717478470762679000" onmouseenter="enter('3717478470762679000');" onmouseout="out('3717478470762679000');" style=""><abbr title="1338             return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult()).intValue();">1338             return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1340     }                                                                                                    </span>
<span  style="">1341                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1342     @Override                                                                                            </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style=""><abbr title="1343     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {">1343     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxFðŸ”µ</abbr></span>
<span class="378343015895903420" onmouseenter="enter('378343015895903420');" onmouseout="out('378343015895903420');" style="">1344         return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(),            </span>
<span class="-8797211071846459738" onmouseenter="enter('-8797211071846459738');" onmouseout="out('-8797211071846459738');" style="">1345                 ceilingEntity, filterMappings, maxField).getSingleResult();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1346     }                                                                                                    </span>
<span  style="">1347                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1348     @Override                                                                                            </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1349     public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                          </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1350         return fetchWrapper.getPersistentRecords(fetchRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351     }                                                                                                    </span>
<span  style="">1352                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1353     @Override                                                                                            </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1354     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1354     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappinðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1355         try {                                                                                            </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1356             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1356             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1357         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1358             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1358             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1359             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1359             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManagerðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361     }                                                                                                    </span>
<span  style="">1362                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1363     @Override                                                                                            </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1364     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1364     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1365         return validate(entity, populatedInstance, mergedProperties, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366     }                                                                                                    </span>
<span  style="">1367                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1368     @Override                                                                                            </span>
<span class="-2540520329201552550" onmouseenter="enter('-2540520329201552550');" onmouseout="out('-2540520329201552550');" style=""><abbr title="1369     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties,">1369     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="-646875273047375380" onmouseenter="enter('-646875273047375380');" onmouseout="out('-646875273047375380');" style="">1370             boolean validateUnsubmittedProperties) {                                                     </span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1371         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1371         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1372         return !entity.isValidationFailure();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373     }                                                                                                    </span>
<span  style="">1374                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1375     @Override                                                                                            </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1376     public void setPersistenceManager(PersistenceManager persistenceManager) {                           </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1377         this.persistenceManager = persistenceManager;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1378     }                                                                                                    </span>
<span  style="">1379                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1380     @Override                                                                                            </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1381     public PersistenceModule getCompatibleModule(OperationType operationType) {                          </span>
<span class="-6680721005895887682" onmouseenter="enter('-6680721005895887682');" onmouseout="out('-6680721005895887682');" style="">1382         return ((InspectHelper) persistenceManager).getCompatibleModule(operationType);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383     }                                                                                                    </span>
<span  style="">1384                                                                                                          </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1385     public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                               </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1386         return defaultFieldPersistenceProvider;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1387     }                                                                                                    </span>
<span  style="">1388                                                                                                          </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style=""><abbr title="1389     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {">1389     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvidðŸ”µ</abbr></span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1390         this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391     }                                                                                                    </span>
<span  style="">1392                                                                                                          </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1393     public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                               </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1394         return fieldPersistenceProviders;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395     }                                                                                                    </span>
<span  style="">1396                                                                                                          </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1397     public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) { </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1398         this.fieldPersistenceProviders = fieldPersistenceProviders;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1399     }                                                                                                    </span>
<span  style="">1400                                                                                                          </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1401     public CriteriaTranslator getCriteriaTranslator() {                                                  </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1402         return criteriaTranslator;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403     }                                                                                                    </span>
<span  style="">1404                                                                                                          </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1405     public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                           </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1406         this.criteriaTranslator = criteriaTranslator;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407     }                                                                                                    </span>
<span  style="">1408                                                                                                          </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1409     public EntityValidatorService getEntityValidatorService() {                                          </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1410         return entityValidatorService;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411     }                                                                                                    </span>
<span  style="">1412                                                                                                          </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1413     public void setEntityValidatorService(EntityValidatorService entityValidatorService) {               </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1414         this.entityValidatorService = entityValidatorService;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415     }                                                                                                    </span>
<span  style="">1416                                                                                                          </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1417     public RestrictionFactory getRestrictionFactory() {                                                  </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1418         return restrictionFactory;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419     }                                                                                                    </span>
<span  style="">1420                                                                                                          </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1421     public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                           </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1422         this.restrictionFactory = restrictionFactory;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423     }                                                                                                    </span>
<span  style="">1424                                                                                                          </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1425     public PersistenceManager getPersistenceManager() {                                                  </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1426         return persistenceManager;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1427     }                                                                                                    </span>
<span  style="">1428                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1429     /**                                                                                                  </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1430      * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1430      * Use an alternate approach to generating a fetch query for a collection located inside of an @EmbedðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1431      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1431      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather thðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1432      * which seems to alleviate the problem.                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1433      *                                                                                                   </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1434      * @param embeddedCollectionPath the path to the collection field itself                             </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1435      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1436      * @param collectionClass the type of the collection members                                         </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1437      * @return the builder capable of generating an appropriate HQL query                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1438      */                                                                                                  </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1439     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1439     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1440         String specialPath = embeddedCollectionPath.getTargetProperty();                                 </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1441         String[] pieces = specialPath.split(&quot;\\.&quot;);                                                      </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1442         if (pieces.length != 3) {                                                                        </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1443             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1443             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of foðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444         }                                                                                                </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1445         String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                      </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1446         TypedQueryBuilder builder;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1447         try {                                                                                            </span>
<span class="-8552982106091258322" onmouseenter="enter('-8552982106091258322');" onmouseout="out('-8552982106091258322');" style="">1448             builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;)             </span>
<span class="7429624725018559493" onmouseenter="enter('7429624725018559493');" onmouseout="out('7429624725018559493');" style="">1449                     .addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1450         } catch (Exception e) {                                                                          </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1451             throw ExceptionHelper.refineException(e);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452         }                                                                                                </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1453         for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {         </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1454             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455         }                                                                                                </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style=""><abbr title="1456         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {">1456         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappingsðŸ”µ</abbr></span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1457             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458         }                                                                                                </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1459         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1460             if (mapping.getSortDirection() != null) {                                                    </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1461                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1461                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().gðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1462                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1463                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1464                 }                                                                                        </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1465                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1465                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1467         }                                                                                                </span>
<span  style="">1468                                                                                                          </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1469         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470     }                                                                                                    </span>
<span  style="">1471                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1472     /**                                                                                                  </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1473      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1473      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not theðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1474      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1475      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1475      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1476      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1476      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this iðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1477      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1478      * @return the list of restrictions on the root entity                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1479      */                                                                                                  </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1480     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1480     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1481         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1481         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPatðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1482         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1483         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="5670151306593626605" onmouseenter="enter('5670151306593626605');" onmouseout="out('5670151306593626605');" style="">1484             checkProperty: {                                                                             </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1485                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1485                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().gðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1486                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1487                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488                 }                                                                                        </span>
<span class="-8226569942575396694" onmouseenter="enter('-8226569942575396694');" onmouseout="out('-8226569942575396694');" style=""><abbr title="1489                 if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(mappingProperty)) {">1489                 if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.iðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style=""><abbr title="1490                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();">1490                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider()ðŸ”µ</abbr></span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1491                     if (predicateProvider != null) {                                                     </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style=""><abbr title="1492                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();">1492                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverterðŸ”µ</abbr></span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1493                         if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {</span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1494                             Object val = converter.convert(mapping.getFilterValues().get(0));            </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1495                             if (predicateProvider instanceof LikePredicateProvider) {                    </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1496                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1496                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1497                                 break checkProperty;                                                     </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1498                             } else if (predicateProvider instanceof EqPredicateProvider) {               </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style=""><abbr title="1499                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));">1499                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=ðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1500                                 break checkProperty;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1502                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1503                     }                                                                                    </span>
<span class="-6733273180612799079" onmouseenter="enter('-6733273180612799079');" onmouseout="out('-6733273180612799079');" style=""><abbr title="1504                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;,">1504                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additionaðŸ”µ</abbr></span>
<span class="-8181613750620164347" onmouseenter="enter('-8181613750620164347');" onmouseout="out('-8181613750620164347');" style="">1505                             StringUtil.sanitize(expression),                                             </span>
<span class="-5255115290358802775" onmouseenter="enter('-5255115290358802775');" onmouseout="out('-5255115290358802775');" style="">1506                             StringUtil.sanitize(mappingProperty)));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1508             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509         }                                                                                                </span>
<span  style="">1510                                                                                                          </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1511         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512     }                                                                                                    </span>
<span  style="">1513                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1514     /**                                                                                                  </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1515      * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1515      * Generate EQUALS restrictions for any filter property specified on the entity member of the collectðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1516      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1517      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1517      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1518      * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1518      * @param specialExpression the String representation of the path for the collection field in the @EmðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1519      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1520      * @return the list of restrictions on the collection in the @Embeddable object                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1521      */                                                                                                  </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1522     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1522     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1523         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1524         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-7768046259105737972" onmouseenter="enter('-7768046259105737972');" onmouseout="out('-7768046259105737972');" style=""><abbr title="1525             if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1525             if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1526                 FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();     </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1527                 if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {        </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1528                     Object val = converter.convert(mapping.getFilterValues().get(0));                    </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1529                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1529                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1530                     restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1531                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533         }                                                                                                </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1534         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535     }                                                                                                    </span>
<span  style="">1536                                                                                                          </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1537     protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {</span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1538         //Remove the entity from ORM management - no further attempts to persist                         </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style=""><abbr title="1539         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {">1539         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) ðŸ”µ</abbr></span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1540             getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1541         }                                                                                                </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1542         //Remove the id field value, if it&#x27;s set                                                         </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1543         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1543         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instancðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1544         Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                     </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1545         if (idField == null) {                                                                           </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1546             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1546             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547         }                                                                                                </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1548         idField.setAccessible(true);                                                                     </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1549         if (idField.get(instance) != null) {                                                             </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1550             idField.set(instance, null);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1551         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552     }                                                                                                    </span>
<span  style="">1553                                                                                                          </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style=""><abbr title="1554     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {">1554     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property propertðŸ”µ</abbr></span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1555         Class&lt;?&gt; returnType = null;                                                                      </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1556         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1556         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, propertyðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1557         java.lang.reflect.Type type = field.getGenericType();                                            </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1558         if (type instanceof ParameterizedType) {                                                         </span>
<span class="705860026972665445" onmouseenter="enter('705860026972665445');" onmouseout="out('705860026972665445');" style="">1559             ParameterizedType pType = (ParameterizedType) type;                                          </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1560             Class&lt;?&gt; clazz;                                                                              </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1561             if (pType.getActualTypeArguments().length &lt; 2) {                                             </span>
<span class="4541832948460311824" onmouseenter="enter('4541832948460311824');" onmouseout="out('4541832948460311824');" style="">1562                 clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[0];                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1563             } else {                                                                                     </span>
<span class="-5335821615199731853" onmouseenter="enter('-5335821615199731853');" onmouseout="out('-5335821615199731853');" style="">1564                 clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[1];                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565             }                                                                                            </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1566             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1566             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1567             if (!ArrayUtils.isEmpty(entities)) {                                                         </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1568                 returnType = entities[entities.length - 1];                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570         }                                                                                                </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1571         return returnType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1572     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573 }                                                                                                        </span>





























































































































</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  18 package org.broadleafcommerce.openadmin.server.service.persistence.module;                               </span>
<span  style="">  19                                                                                                          </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  20 import java.io.Serializable;                                                                             </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style="">  21 import java.lang.reflect.Field;                                                                          </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style="">  22 import java.lang.reflect.InvocationTargetException;                                                      </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  23 import java.lang.reflect.Method;                                                                         </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style="">  24 import java.lang.reflect.ParameterizedType;                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="">  25 import java.math.BigDecimal;                                                                             </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style="">  26 import java.sql.Timestamp;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="">  27 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="">  28 import java.text.NumberFormat;                                                                           </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="">  29 import java.text.SimpleDateFormat;                                                                       </span>
<span class="196713859697444637" onmouseenter="enter('196713859697444637');" onmouseout="out('196713859697444637');" style="">  30 import java.util.*;                                                                                      </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  31 import java.util.Iterator;                                                                               </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  32 import java.util.Map.Entry;                                                                              </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="">  33 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  34 import javax.annotation.Resource;                                                                        </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style="">  35 import javax.persistence.criteria.CriteriaBuilder;                                                       </span>
<span class="2535099540501772744" onmouseenter="enter('2535099540501772744');" onmouseout="out('2535099540501772744');" style="">  36 import javax.persistence.criteria.From;                                                                  </span>
<span class="5773424155764142692" onmouseenter="enter('5773424155764142692');" onmouseout="out('5773424155764142692');" style="">  37 import javax.persistence.criteria.Path;                                                                  </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style="">  38 import javax.persistence.criteria.Predicate;                                                             </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style="">  39 import javax.persistence.criteria.Root;                                                                  </span>
<span class="1578689085913073314" onmouseenter="enter('1578689085913073314');" onmouseout="out('1578689085913073314');" style="">  40 import javax.persistence.criteria.Subquery;                                                              </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  41 import org.apache.commons.beanutils.PropertyUtils;                                                       </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  42 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  43 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  44 import org.apache.commons.lang.StringUtils;                                                              </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  45 import org.apache.commons.lang3.BooleanUtils;                                                            </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  46 import org.apache.commons.lang3.reflect.FieldUtils;                                                      </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  47 import org.apache.commons.lang3.reflect.MethodUtils;                                                     </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  48 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  49 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  50 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  51 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  52 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  53 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  54 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  55 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  56 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  57 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  58 import org.broadleafcommerce.common.money.Money;                                                         </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  59 import org.broadleafcommerce.common.presentation.client.OperationType;                                   </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  60 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  61 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  62 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  63 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  64 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  65 import org.broadleafcommerce.common.util.ValidationUtil;                                                 </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  66 import org.broadleafcommerce.common.util.dao.TQJoin;                                                     </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  67 import org.broadleafcommerce.common.util.dao.TQOrder;                                                    </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  68 import org.broadleafcommerce.common.util.dao.TQRestriction;                                              </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  69 import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                          </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  70 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-9032655456699873894" onmouseenter="enter('-9032655456699873894');" onmouseout="out('-9032655456699873894');" style="">  71 import org.broadleafcommerce.openadmin.dto.*;                                                            </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style=""><abbr title="  72 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;">  72 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvidðŸ”µ</abbr></span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  73 import org.broadleafcommerce.openadmin.server.service.ValidationException;                               </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  74 import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;      </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  75 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                  </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  76 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="5058784187408591906" onmouseenter="enter('5058784187408591906');" onmouseout="out('5058784187408591906');" style="">  77 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.*;                     </span>
<span class="1663650800150084878" onmouseenter="enter('1663650800150084878');" onmouseout="out('1663650800150084878');" style="">  78 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPathBuilder;      </span>
<span class="-8754722050104399052" onmouseenter="enter('-8754722050104399052');" onmouseout="out('-8754722050104399052');" style="">  79 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.Restriction;           </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style=""><abbr title="  80 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter;">  80 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueCoðŸ”µ</abbr></span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style=""><abbr title="  81 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;">  81 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicatePrðŸ”µ</abbr></span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style=""><abbr title="  82 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;">  82 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateðŸ”µ</abbr></span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style=""><abbr title="  83 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;">  83 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvðŸ”µ</abbr></span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  84 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  84 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style=""><abbr title="  85 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;">  85 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvideðŸ”µ</abbr></span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  86 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  86 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterProperðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style=""><abbr title="  87 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;">  87 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappinðŸ”µ</abbr></span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style=""><abbr title="  88 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;">  88 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueReqðŸ”µ</abbr></span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style=""><abbr title="  89 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;">  89 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueReðŸ”µ</abbr></span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  90 import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;     </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style=""><abbr title="  91 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;">  91 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidatoðŸ”µ</abbr></span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  92 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;   </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  93 import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                     </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  94 import org.hibernate.FlushMode;                                                                          </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  95 import org.hibernate.Session;                                                                            </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  96 import org.springframework.beans.BeansException;                                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  97 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  98 import org.springframework.context.ApplicationContext;                                                   </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  99 import org.springframework.context.ApplicationContextAware;                                              </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style=""> 100 import org.springframework.context.annotation.Primary;                                                   </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style=""> 101 import org.springframework.context.annotation.Scope;                                                     </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style=""> 102 import org.springframework.stereotype.Component;                                                         </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style=""> 103 import org.springframework.util.Assert;                                                                  </span>
<span  style=""> 104                                                                                                          </span>
<span  style=""> 105                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 106 /**                                                                                                      </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style=""> 107  * @author jfischer                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 108  */                                                                                                      </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style=""> 109 @Primary                                                                                                 </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style=""> 110 @Component(&quot;blBasicPersistenceModule&quot;)                                                                   </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style=""> 111 @Scope(&quot;prototype&quot;)                                                                                      </span>
<span class="1065304803760142735" onmouseenter="enter('1065304803760142735');" onmouseout="out('1065304803760142735');" style=""><abbr title=" 112 public class BasicPersistenceModule implements PersistenceModule , RecordHelper , ApplicationContextAware {"> 112 public class BasicPersistenceModule implements PersistenceModule , RecordHelper , ApplicationContextAwareðŸ”µ</abbr></span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 113     private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                      </span>
<span  style=""> 114                                                                                                          </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 115     public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                           </span>
<span  style=""> 116                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 117     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 118                                                                                                          </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 119     protected ApplicationContext applicationContext;                                                     </span>
<span  style=""> 120                                                                                                          </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 121     protected PersistenceManager persistenceManager;                                                     </span>
<span  style=""> 122                                                                                                          </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 123     @Resource(name = &quot;blEntityValidatorService&quot;)                                                         </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 124     protected EntityValidatorService entityValidatorService;                                             </span>
<span  style=""> 125                                                                                                          </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 126     @Resource(name = &quot;blPersistenceProviders&quot;)                                                           </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 127     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 127     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistencePrðŸ”µ</abbr></span>
<span  style=""> 128                                                                                                          </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 129     @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                 </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 130     protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 132     @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 133     protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                  </span>
<span  style=""> 134                                                                                                          </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 135     @Resource(name = &quot;blCriteriaTranslator&quot;)                                                             </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 136     protected CriteriaTranslator criteriaTranslator;                                                     </span>
<span  style=""> 137                                                                                                          </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 138     @Resource(name = &quot;blRestrictionFactory&quot;)                                                             </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 139     protected RestrictionFactory restrictionFactory;                                                     </span>
<span  style=""> 140                                                                                                          </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 141     @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                         </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 142     protected BasicPersistenceModuleExtensionManager extensionManager;                                   </span>
<span  style=""> 143                                                                                                          </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 144     @Resource(name = &quot;blFetchWrapper&quot;)                                                                   </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 145     protected FetchWrapper fetchWrapper;                                                                 </span>
<span  style=""> 146                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 147     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 148     protected boolean useTranslationSearch;                                                              </span>
<span  style=""> 149                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 150     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 151     protected LocaleService localeService;                                                               </span>
<span  style=""> 152                                                                                                          </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 153     @PostConstruct                                                                                       </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 154     public void init() {                                                                                 </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 155         Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {         </span>
<span  style=""> 156                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157             @Override                                                                                    </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 158             public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {               </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 159                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 161         });                                                                                              </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 162         Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {           </span>
<span  style=""> 163                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164             @Override                                                                                    </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 165             public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {     </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 166                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 168         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169     }                                                                                                    </span>
<span  style=""> 170                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171     @Override                                                                                            </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 172     public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {     </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 173         this.applicationContext = applicationContext;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174     }                                                                                                    </span>
<span  style=""> 175                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 176     @Override                                                                                            </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 177     public boolean isCompatible(OperationType operationType) {                                           </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""><abbr title=" 178         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;"> 178         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationTypðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 181     @Override                                                                                            </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 182     public FieldManager getFieldManager() {                                                              </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 183         return persistenceManager.getDynamicEntityDao().getFieldManager();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184     }                                                                                                    </span>
<span  style=""> 185                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 186     @Override                                                                                            </span>
<span class="6457346333778015301" onmouseenter="enter('6457346333778015301');" onmouseout="out('6457346333778015301');" style=""> 187     public FieldManager getFieldManager(boolean cleanFieldManger) {                                      </span>
<span class="-7823051609966781187" onmouseenter="enter('-7823051609966781187');" onmouseout="out('-7823051609966781187');" style=""> 188         return persistenceManager.getDynamicEntityDao().getFieldManager(cleanFieldManger);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189     }                                                                                                    </span>
<span  style=""> 190                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 191     @Override                                                                                            </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 192     public DecimalFormat getDecimalFormatter() {                                                         </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 193         BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();              </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 194         Locale locale = brc.getJavaLocale();                                                             </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 195         DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                         </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 196         format.applyPattern(&quot;0.########&quot;);                                                               </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 197         format.setGroupingUsed(false);                                                                   </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 198         return format;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199     }                                                                                                    </span>
<span  style=""> 200                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 201     @Override                                                                                            </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 202     public SimpleDateFormat getSimpleDateFormatter() {                                                   </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 203         return FormatUtil.getDateFormat();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204     }                                                                                                    </span>
<span  style=""> 205                                                                                                          </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""><abbr title=" 206     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {"> 206     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata)ðŸ”µ</abbr></span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 207         if (metadata == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 208             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209         }                                                                                                </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 210         Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                        </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 211         for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                             </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 212             String fieldName = entry.getKey();                                                           </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 213             FieldMetadata md = entry.getValue();                                                         </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 214             // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 214             // Detect instances where the actual metadata for the field is some sort of CollectionMetadatðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 215             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 215             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 216             // can appropriate handle filtration and population                                          </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 217             if (entry.getValue() instanceof BasicFieldMetadata) {                                        </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 218                 newMap.put(fieldName, md);                                                               </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 219             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 219             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FORðŸ”µ</abbr></span>
<span class="-2679713042458666087" onmouseenter="enter('-2679713042458666087');" onmouseout="out('-2679713042458666087');" style=""><abbr title=" 220                 newMap.put(fieldName, ((BasicFieldMetadata) (md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY))));"> 220                 newMap.put(fieldName, ((BasicFieldMetadata) (md.getAdditionalMetadata().get(AdvancedColleðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222         }                                                                                                </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 223         return newMap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224     }                                                                                                    </span>
<span  style=""> 225                                                                                                          </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 226     protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                             </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 227         Class&lt;?&gt; response;                                                                               </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 228         switch (fieldType) {                                                                             </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 229             case BOOLEAN:                                                                                </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 230                 response = Boolean.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 231                 break;                                                                                   </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 232             case DATE:                                                                                   </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 233                 response = Date.class;                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 234                 break;                                                                                   </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 235             case DECIMAL:                                                                                </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 236                 response = BigDecimal.class;                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 237                 break;                                                                                   </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 238             case MONEY:                                                                                  </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 239                 response = Money.class;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 240                 break;                                                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 241             case INTEGER:                                                                                </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 242                 response = Integer.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 243                 break;                                                                                   </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 244             case UNKNOWN:                                                                                </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 245                 response = null;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 246                 break;                                                                                   </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 247             default:                                                                                     </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 248                 response = String.class;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 249                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250         }                                                                                                </span>
<span  style=""> 251                                                                                                          </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 252         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253     }                                                                                                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 255     @Override                                                                                            </span>
<span class="9140503876431781889" onmouseenter="enter('9140503876431781889');" onmouseout="out('9140503876431781889');" style=""><abbr title=" 256     public Serializable createPopulatedInstance(Serializable instance, Entity entity, Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException {"> 256     public Serializable createPopulatedInstance(Serializable instance, Entity entity, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 257         return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258     }                                                                                                    </span>
<span  style=""> 259                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 260     @Override                                                                                            </span>
<span class="-7020372606553926938" onmouseenter="enter('-7020372606553926938');" onmouseout="out('-7020372606553926938');" style=""><abbr title=" 261     public Serializable createPopulatedInstance(Serializable instance, Entity entity, Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 261     public Serializable createPopulatedInstance(Serializable instance, Entity entity, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""><abbr title=" 262         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);"> 262         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredPropertðŸ”µ</abbr></span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 263         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 264         boolean handled = false;                                                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 265         for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {            </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 266             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 266             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPrðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 267             if (MetadataProviderResponse.NOT_HANDLED != response) {                                      </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 268                 handled = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269             }                                                                                            </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 270             if (MetadataProviderResponse.HANDLED_BREAK == response) {                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 271                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273         }                                                                                                </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 274         if (!handled) {                                                                                  </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 275             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 275             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276         }                                                                                                </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 277         //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 277         //Order media field, map field and rule builder fields last, as they will have some validation coðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 278         Property[] sortedProperties = entity.getProperties();                                            </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 279         Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 280             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 281             public int compare(Property o1, Property o2) {                                               </span>
<span class="2463065884987512190" onmouseenter="enter('2463065884987512190');" onmouseout="out('2463065884987512190');" style=""> 282                 BasicFieldMetadata mo1 = ((BasicFieldMetadata) (mergedProperties.get(o1.getName())));    </span>
<span class="-8475059538497777965" onmouseenter="enter('-8475059538497777965');" onmouseout="out('-8475059538497777965');" style=""> 283                 BasicFieldMetadata mo2 = ((BasicFieldMetadata) (mergedProperties.get(o2.getName())));    </span>
<span class="-6929562501569500630" onmouseenter="enter('-6929562501569500630');" onmouseout="out('-6929562501569500630');" style=""><abbr title=" 284                 boolean isLate1 = (((mo1 != null) &amp;&amp; (mo1.getFieldType() != null)) &amp;&amp; (mo1.getName() != null)) &amp;&amp; (((((SupportedFieldType.RULE_SIMPLE == mo1.getFieldType()) || (SupportedFieldType.RULE_WITH_QUANTITY == mo1.getFieldType())) || (SupportedFieldType.RULE_SIMPLE_TIME == mo1.getFieldType())) || (SupportedFieldType.MEDIA == mo1.getFieldType())) || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 284                 boolean isLate1 = (((mo1 != null) &amp;&amp; (mo1.getFieldType() != null)) &amp;&amp; (mo1.getName() != nðŸ”µ</abbr></span>
<span class="2168627307559448624" onmouseenter="enter('2168627307559448624');" onmouseout="out('2168627307559448624');" style=""><abbr title=" 285                 boolean isLate2 = (((mo2 != null) &amp;&amp; (mo2.getFieldType() != null)) &amp;&amp; (mo2.getName() != null)) &amp;&amp; (((((SupportedFieldType.RULE_SIMPLE == mo2.getFieldType()) || (SupportedFieldType.RULE_WITH_QUANTITY == mo2.getFieldType())) || (SupportedFieldType.RULE_SIMPLE_TIME == mo2.getFieldType())) || (SupportedFieldType.MEDIA == mo2.getFieldType())) || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 285                 boolean isLate2 = (((mo2 != null) &amp;&amp; (mo2.getFieldType() != null)) &amp;&amp; (mo2.getName() != nðŸ”µ</abbr></span>
<span class="-3819336154797151545" onmouseenter="enter('-3819336154797151545');" onmouseout="out('-3819336154797151545');" style=""> 286                 if (isLate1 &amp;&amp; (!isLate2)) {                                                             </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 287                     return 1;                                                                            </span>
<span class="-509320053190784502" onmouseenter="enter('-509320053190784502');" onmouseout="out('-509320053190784502');" style=""> 288                 } else if ((!isLate1) &amp;&amp; isLate2) {                                                      </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 289                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290                 }                                                                                        </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 291                 return 0;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 293         });                                                                                              </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 294         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 294         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrapðŸ”µ</abbr></span>
<span class="5994630726155221613" onmouseenter="enter('5994630726155221613');" onmouseout="out('5994630726155221613');" style=""> 295         FlushMode originalFlushMode = session.getHibernateFlushMode();                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 296         try {                                                                                            </span>
<span class="5642929065352278415" onmouseenter="enter('5642929065352278415');" onmouseout="out('5642929065352278415');" style=""> 297             session.setHibernateFlushMode(FlushMode.MANUAL);                                             </span>
<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 298             RuntimeException entityPersistenceException = null;                                          </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 299             for (Property property : sortedProperties) {                                                 </span>
<span class="-6260061789817992450" onmouseenter="enter('-6260061789817992450');" onmouseout="out('-6260061789817992450');" style=""><abbr title=" 300                 BasicFieldMetadata metadata = ((BasicFieldMetadata) (mergedProperties.get(property.getName())));"> 300                 BasicFieldMetadata metadata = ((BasicFieldMetadata) (mergedProperties.get(property.getNamðŸ”µ</abbr></span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 301                 Class&lt;?&gt; returnType;                                                                     </span>
<span class="-3476209394550836719" onmouseenter="enter('-3476209394550836719');" onmouseout="out('-3476209394550836719');" style=""><abbr title=" 302                 if ((!property.getName().contains(FieldManager.MAPFIELDSEPARATOR)) &amp;&amp; (!property.getName().startsWith(&quot;__&quot;))) {"> 302                 if ((!property.getName().contains(FieldManager.MAPFIELDSEPARATOR)) &amp;&amp; (!property.getName(ðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 303                     Field field = fieldManager.getField(instance.getClass(), property.getName());        </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 304                     if (field == null) {                                                                 </span>
<span class="1212343711820066941" onmouseenter="enter('1212343711820066941');" onmouseout="out('1212343711820066941');" style=""><abbr title=" 305                         LOG.debug((&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName())) + &quot;. Ignoring property.&quot;);"> 305                         LOG.debug((&quot;Unable to find a bean property for the reported property: &quot; + StringUðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 306                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307                     }                                                                                    </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 308                     returnType = field.getType();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 309                 } else {                                                                                 </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 310                     if (metadata == null) {                                                              </span>
<span class="7533167748241732386" onmouseenter="enter('7533167748241732386');" onmouseout="out('7533167748241732386');" style=""><abbr title=" 311                         LOG.debug((&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName())) + &quot;. Ignoring property.&quot;);"> 311                         LOG.debug((&quot;Unable to find a metadata property for the reported property: &quot; + StrðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 312                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313                     }                                                                                    </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 314                     returnType = getMapFieldType(instance, fieldManager, property);                      </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 315                     if (returnType == null) {                                                            </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 316                         returnType = getBasicBroadleafType(metadata.getFieldType());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318                 }                                                                                        </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 319                 if (returnType == null) {                                                                </span>
<span class="6378707186421382713" onmouseenter="enter('6378707186421382713');" onmouseout="out('6378707186421382713');" style=""><abbr title=" 320                     throw new IllegalAccessException((&quot;Unable to determine the value type for the property (&quot; + property.getName()) + &quot;)&quot;);"> 320                     throw new IllegalAccessException((&quot;Unable to determine the value type for the propertðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321                 }                                                                                        </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 322                 String value = property.getValue();                                                      </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 323                 if (metadata != null) {                                                                  </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 324                     if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                    </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 325                         if (value == null) {                                                             </span>
<span class="-8520936090313964890" onmouseenter="enter('-8520936090313964890');" onmouseout="out('-8520936090313964890');" style=""> 326                             String defaultValue = metadata.getDefaultValue();                            </span>
<span class="-7355839783687037578" onmouseenter="enter('-7355839783687037578');" onmouseout="out('-7355839783687037578');" style=""> 327                             value = (StringUtils.isBlank(defaultValue)) ? &quot;false&quot; : defaultValue;        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328                         }                                                                                </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 329                     } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 330                         if (StringUtils.isEmpty(value)) {                                                </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 331                             value = null;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                     }                                                                                    </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 334                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 334                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity,ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 335                         boolean isValid = true;                                                          </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 336                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 336                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, propðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 337                         handled = false;                                                                 </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 338                         if (value != null) {                                                             </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 339                             for (PopulateValueRequestValidator validator : populateValidators) {         </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""><abbr title=" 340                                 PropertyValidationResult validationResult = validator.validate(request, instance);"> 340                                 PropertyValidationResult validationResult = validator.validate(request, iðŸ”µ</abbr></span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 341                                 if (!validationResult.isValid()) {                                       </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 342                                     entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 342                                     entity.addValidationError(property.getName(), validationResult.getErrðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 343                                     isValid = false;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346                         }                                                                                </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 347                         if (isValid) {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 348                             try {                                                                        </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 349                                 boolean isBreakDetected = false;                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 350                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 350                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceðŸ”µ</abbr></span>
<span class="-7259286066970943612" onmouseenter="enter('-7259286066970943612');" onmouseout="out('-7259286066970943612');" style=""><abbr title=" 351                                     if (((!isBreakDetected) || fieldPersistenceProvider.alwaysRun()) &amp;&amp; ((value != null) || fieldPersistenceProvider.canHandlePopulateNull())) {"> 351                                     if (((!isBreakDetected) || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (ðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 352                                         MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 352                                         MetadataProviderResponse response = fieldPersistenceProvider.popuðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 353                                         if (MetadataProviderResponse.NOT_HANDLED != response) {          </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 354                                             handled = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355                                         }                                                                </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 356                                         if (MetadataProviderResponse.HANDLED_BREAK == response) {        </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 357                                             isBreakDetected = true;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360                                 }                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 361                                 if (!handled) {                                                          </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 362                                     if (value == null) {                                                 </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 363                                         property.setIsDirty(true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                                     }                                                                    </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 365                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 365                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequesðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 366                                     if (value == null) {                                                 </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 367                                         fieldManager.setFieldValue(instance, property.getName(), null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369                                 }                                                                        </span>
<span class="3832349856237680933" onmouseenter="enter('3832349856237680933');" onmouseout="out('3832349856237680933');" style=""> 370                             } catch (ParentEntityPersistenceException | validation e) {                  </span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 371                                 entityPersistenceException = e;                                          </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 372                                 cleanupFailedPersistenceAttempt(instance);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 373                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378             }                                                                                            </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 379             // Only check validation if not the initial add                                              </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 380             if (!entity.isPreAdd()) {                                                                    </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 381                 validate(entity, instance, mergedProperties, validateUnsubmittedProperties);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382             }                                                                                            </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""><abbr title=" 383             //if validation failed, refresh the current instance so that none of the changes will be persisted"> 383             //if validation failed, refresh the current instance so that none of the changes will be persðŸ”µ</abbr></span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 384             if (entity.isValidationFailure()) {                                                          </span>
<span class="-8969892038594607693" onmouseenter="enter('-8969892038594607693');" onmouseout="out('-8969892038594607693');" style=""> 385                 // only refresh the instance if it was managed to begin with                             </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""><abbr title=" 386                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {"> 386                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instanceðŸ”µ</abbr></span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 387                     persistenceManager.getDynamicEntityDao().refresh(instance);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388                 }                                                                                        </span>
<span class="1787582277904250536" onmouseenter="enter('1787582277904250536');" onmouseout="out('1787582277904250536');" style=""><abbr title=" 389                 // re-initialize the valid properties for the entity in order to deal with the potential of not"> 389                 // re-initialize the valid properties for the entity in order to deal with the potential ðŸ”µ</abbr></span>
<span class="-2299815299068924272" onmouseenter="enter('-2299815299068924272');" onmouseout="out('-2299815299068924272');" style=""> 390                 // completely sending over all checkbox/radio fields                                     </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 391                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 392                 entityList.add(instance);                                                                </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 393                 Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];          </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 394                 invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());               </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 395                 invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                   </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 396                 invalid.overridePropertyValues(entity);                                                  </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 397                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 397                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), ðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 398                 throw new ValidationException(invalid, message);                                         </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 399             } else if (entityPersistenceException != null) {                                             </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 400                 throw ExceptionHelper.refineException(entityPersistenceException.getCause());            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 401             } else {                                                                                     </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 402                 fieldManager.persistMiddleEntities();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403             }                                                                                            </span>
<span class="1719180133827210930" onmouseenter="enter('1719180133827210930');" onmouseout="out('1719180133827210930');" style=""> 404         } catch (java.lang.IllegalAccessException e) {                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 405             throw new PersistenceException(e);                                                           </span>
<span class="-7511883255711123624" onmouseenter="enter('-7511883255711123624');" onmouseout="out('-7511883255711123624');" style=""> 406         } catch (java.lang.InstantiationException e) {                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 407             throw new PersistenceException(e);                                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 408         } finally {                                                                                      </span>
<span class="4677599505604490897" onmouseenter="enter('4677599505604490897');" onmouseout="out('4677599505604490897');" style=""> 409             session.setHibernateFlushMode(originalFlushMode);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410         }                                                                                                </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 411         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412     }                                                                                                    </span>
<span  style=""> 413                                                                                                          </span>
<span class="8134762858963910121" onmouseenter="enter('8134762858963910121');" onmouseout="out('8134762858963910121');" style=""><abbr title=" 414     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance, Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 414     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable iðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 415         Boolean mutable = metadata.getMutable();                                                         </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 416         Boolean readOnly = metadata.getReadOnly();                                                       </span>
<span class="-6050868424852633932" onmouseenter="enter('-6050868424852633932');" onmouseout="out('-6050868424852633932');" style=""><abbr title=" 417         boolean generalConditionsMet = (((mutable == null) || mutable) &amp;&amp; ((readOnly == null) || (!readOnly))) &amp;&amp; property.getEnabled();"> 417         boolean generalConditionsMet = (((mutable == null) || mutable) &amp;&amp; ((readOnly == null) || (!readOnðŸ”µ</abbr></span>
<span class="-3315585342667864056" onmouseenter="enter('-3315585342667864056');" onmouseout="out('-3315585342667864056');" style=""> 418         if (generalConditionsMet &amp;&amp; (value == null)) {                                                   </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 419             boolean currentValueIsNotNull = false;                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 420             try {                                                                                        </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 421                 currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;</span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 422             } catch (FieldNotAvailableException e) {                                                     </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 423                 throw new IllegalArgumentException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424             }                                                                                            </span>
<span class="7940049496971698158" onmouseenter="enter('7940049496971698158');" onmouseout="out('7940049496971698158');" style=""> 425             boolean valueIsNotNullId = (metadata.getFieldType() != SupportedFieldType.ID) || setId;      </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 426             boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;         </span>
<span class="-8291989319077971492" onmouseenter="enter('-8291989319077971492');" onmouseout="out('-8291989319077971492');" style=""><abbr title=" 427             return ((currentValueIsNotNull &amp;&amp; (!entity.isPreAdd())) &amp;&amp; valueIsNotNullId) &amp;&amp; valueIsNotPassword;"> 427             return ((currentValueIsNotNull &amp;&amp; (!entity.isPreAdd())) &amp;&amp; valueIsNotNullId) &amp;&amp; valueIsNotPasðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428         }                                                                                                </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 429         return generalConditionsMet;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430     }                                                                                                    </span>
<span  style=""> 431                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 432     @Override                                                                                            </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 433     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 433     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;ðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 434         List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                     </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 435         records.add(record);                                                                             </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 436         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 436         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedPropertiesðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 437         return productEntities[0];                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438     }                                                                                                    </span>
<span  style=""> 439                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 440     @Override                                                                                            </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 441     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 441     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 442         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 442         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 443         return getRecord(mergedProperties, record, null, null);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444     }                                                                                                    </span>
<span  style=""> 445                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 446     @Override                                                                                            </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 447     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 447     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspectiveðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 448         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 448         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 449         return getRecords(mergedProperties, records, null, null, null);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450     }                                                                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 452     @Override                                                                                            </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 453     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 453     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspectiveðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 454         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 454         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistenceðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455     }                                                                                                    </span>
<span  style=""> 456                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 457     @Override                                                                                            </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 458     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 458     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends SerialiðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 459         return getRecords(primaryMergedProperties, records, null, null, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460     }                                                                                                    </span>
<span  style=""> 461                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 462     @Override                                                                                            </span>
<span class="-709830068230433213" onmouseenter="enter('-709830068230433213');" onmouseout="out('-709830068230433213');" style=""><abbr title=" 463     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties, List&lt;? extends Serializable&gt; records, Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties, String pathToTargetObject) {"> 463     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties, List&lt;? extenðŸ”µ</abbr></span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 464         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 464         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedPropertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465     }                                                                                                    </span>
<span  style=""> 466                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 467     @Override                                                                                            </span>
<span class="-2383938559120790833" onmouseenter="enter('-2383938559120790833');" onmouseout="out('-2383938559120790833');" style=""><abbr title=" 468     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties, List&lt;? extends Serializable&gt; records, Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties, String pathToTargetObject, String[] customCriteria) {"> 468     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties, List&lt;? extenðŸ”µ</abbr></span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 469         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 469         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfiltereðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 470         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 470         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 471         Entity[] entities = new Entity[records.size()];                                                  </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 472         int j = 0;                                                                                       </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 473         for (Serializable recordEntity : records) {                                                      </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 474             Serializable entity;                                                                         </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 475             if (pathToTargetObject != null) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 476                 try {                                                                                    </span>
<span class="8092430585586094613" onmouseenter="enter('8092430585586094613');" onmouseout="out('8092430585586094613');" style=""><abbr title=" 477                     entity = ((Serializable) (getFieldManager().getFieldValue(recordEntity, pathToTargetObject)));"> 477                     entity = ((Serializable) (getFieldManager().getFieldValue(recordEntity, pathToTargetOðŸ”µ</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 478                 } catch (java.lang.Exception e) {                                                        </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 479                     throw new PersistenceException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 481             } else {                                                                                     </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 482                 entity = recordEntity;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483             }                                                                                            </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 484             Entity entityItem = new Entity();                                                            </span>
<span class="4821790133949377855" onmouseenter="enter('4821790133949377855');" onmouseout="out('4821790133949377855');" style=""> 485             entityItem.setType(new String[]{ entity.getClass().getName() });                             </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 486             entities[j] = entityItem;                                                                    </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 487             List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());              </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""><abbr title=" 488             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);"> 488             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria)ðŸ”µ</abbr></span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 489             if (alternateMergedProperties != null) {                                                     </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 490                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 490                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, cusðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491             }                                                                                            </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 492             // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 493             try {                                                                                        </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 494                 Property p = new Property();                                                             </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 495                 p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                    </span>
<span class="8982792589285289046" onmouseenter="enter('8982792589285289046');" onmouseout="out('8982792589285289046');" style=""><abbr title=" 496                 String mainEntityName = ((String) (MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;)));"> 496                 String mainEntityName = ((String) (MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;))ðŸ”µ</abbr></span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 497                 p.setValue(mainEntityName);                                                              </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 498                 props.add(p);                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 499             } catch (java.lang.Exception e) {                                                            </span>
<span class="-1660146654333002213" onmouseenter="enter('-1660146654333002213');" onmouseout="out('-1660146654333002213');" style=""><abbr title=" 500                 LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;, entity.getClass().getName()), e);"> 500                 LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;, entiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501             }                                                                                            </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 502             // Try to add the alternate id property if available                                         </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 503             if (alternateMergedProperties != null) {                                                     </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 504                 for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {        </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 505                     if (entry.getValue() instanceof BasicFieldMetadata) {                                </span>
<span class="2600247396988132656" onmouseenter="enter('2600247396988132656');" onmouseout="out('2600247396988132656');" style=""><abbr title=" 506                         if (((BasicFieldMetadata) (entry.getValue())).getFieldType() == SupportedFieldType.ID) {"> 506                         if (((BasicFieldMetadata) (entry.getValue())).getFieldType() == SupportedFieldTypðŸ”µ</abbr></span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""><abbr title=" 507                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();"> 507                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadðŸ”µ</abbr></span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 508                             alternateOnEntity.put(entry.getKey(), entry.getValue());                     </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 509                             List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                           </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 510                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 510                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2ðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 511                             List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                         </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 512                             for (Property prop : props2) {                                               </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 513                                 if (!prop.getName().startsWith(&quot;__&quot;)) {                                  </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 514                                     filtered.add(prop);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516                             }                                                                            </span>
<span class="8545840255355279194" onmouseenter="enter('8545840255355279194');" onmouseout="out('8545840255355279194');" style=""> 517                             if ((filtered.size() == 1) &amp;&amp; (!filtered.get(0).getName().contains(&quot;.&quot;))) {  </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 518                                 Property alternateIdProp = filtered.get(0);                              </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 519                                 alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                          </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 520                                 props.add(alternateIdProp);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525             }                                                                                            </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 526             Property[] properties = new Property[props.size()];                                          </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 527             properties = props.toArray(properties);                                                      </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 528             entityItem.setProperties(properties);                                                        </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 529             j++;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530         }                                                                                                </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 531         return entities;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532     }                                                                                                    </span>
<span  style=""> 533                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 534     @Override                                                                                            </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 535     public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                          </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 536         return fetchWrapper.getRecords(fetchExtractionRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537     }                                                                                                    </span>
<span  style=""> 538                                                                                                          </span>
<span class="402950671367523298" onmouseenter="enter('402950671367523298');" onmouseout="out('402950671367523298');" style=""><abbr title=" 539     protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties, Serializable entity, List&lt;Property&gt; props, String[] customCriteria) {"> 539     protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties, SerðŸ”µ</abbr></span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 540         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 541         try {                                                                                            </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 542             if (entity instanceof AdminMainEntity) {                                                     </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 543                 //Create an invisible property for the admin main entity name, if applicable.            </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 544                 //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive      </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 545                 //its display name.                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 546                 try {                                                                                    </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 547                     Property propertyItem = new Property();                                              </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 548                     propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                     </span>
<span class="-9086113788587820330" onmouseenter="enter('-9086113788587820330');" onmouseout="out('-9086113788587820330');" style=""> 549                     propertyItem.setValue(((AdminMainEntity) (entity)).getMainEntityName());             </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 550                     props.add(propertyItem);                                                             </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 551                 } catch (java.lang.Exception e) {                                                        </span>
<span class="6081116632745046614" onmouseenter="enter('6081116632745046614');" onmouseout="out('6081116632745046614');" style=""><abbr title=" 552                     // do nothing here except for not add the property. Exceptions could occur when there is a validation"> 552                     // do nothing here except for not add the property. Exceptions could occur when thereðŸ”µ</abbr></span>
<span class="-8380642892784592262" onmouseenter="enter('-8380642892784592262');" onmouseout="out('-8380642892784592262');" style=""><abbr title=" 553                     // issue and some properties/relationships that are used for gleaning the main entity name end up"> 553                     // issue and some properties/relationships that are used for gleaning the main entityðŸ”µ</abbr></span>
<span class="3602890251629998271" onmouseenter="enter('3602890251629998271');" onmouseout="out('3602890251629998271');" style=""> 554                     // not being set                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556             }                                                                                            </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 557             for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 558                 String property = entry.getKey();                                                        </span>
<span class="152445406816498608" onmouseenter="enter('152445406816498608');" onmouseout="out('152445406816498608');" style=""> 559                 BasicFieldMetadata metadata = ((BasicFieldMetadata) (entry.getValue()));                 </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 560                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 560                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) ||ðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 561                     boolean proceed = true;                                                              </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 562                     if (property.contains(&quot;.&quot;)) {                                                        </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 563                         StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                     </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 564                         Object testObject = entity;                                                      </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 565                         while (tokens.hasMoreTokens()) {                                                 </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 566                             String token = tokens.nextToken();                                           </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 567                             if (tokens.hasMoreTokens()) {                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 568                                 try {                                                                    </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 569                                     testObject = fieldManager.getFieldValue(testObject, token);          </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 570                                 } catch (FieldNotAvailableException e) {                                 </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 571                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 572                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573                                 }                                                                        </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 574                                 if (testObject == null) {                                                </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 575                                     Property propertyItem = new Property();                              </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 576                                     propertyItem.setName(property);                                      </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 577                                     if (props.contains(propertyItem)) {                                  </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 578                                         proceed = false;                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 579                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580                                     }                                                                    </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 581                                     propertyItem.setValue(null);                                         </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 582                                     props.add(propertyItem);                                             </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 583                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 584                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588                     }                                                                                    </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 589                     if (!proceed) {                                                                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 590                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591                     }                                                                                    </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 592                     boolean isFieldAccessible = true;                                                    </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 593                     Object value = null;                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 594                     try {                                                                                </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 595                         value = fieldManager.getFieldValue(entity, property);                            </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 596                     } catch (FieldNotAvailableException e) {                                             </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 597                         isFieldAccessible = false;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598                     }                                                                                    </span>
<span class="-395470139210522993" onmouseenter="enter('-395470139210522993');" onmouseout="out('-395470139210522993');" style=""> 599                     checkField : {                                                                       </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 600                         if (isFieldAccessible) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 601                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 602                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 603                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 604                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 606                             props.add(propertyItem);                                                     </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 607                             String displayVal = propertyItem.getDisplayValue();                          </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 608                             boolean handled = false;                                                     </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 609                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 609                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvðŸ”µ</abbr></span>
<span class="-5011952326211088481" onmouseenter="enter('-5011952326211088481');" onmouseout="out('-5011952326211088481');" style=""><abbr title=" 610                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValue(new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, persistenceManager, this, entity, customCriteria), propertyItem);"> 610                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValueðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 611                                 if (MetadataProviderResponse.NOT_HANDLED != response) {                  </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 612                                     handled = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613                                 }                                                                        </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 614                                 if (MetadataProviderResponse.HANDLED_BREAK == response) {                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 615                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617                             }                                                                            </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 618                             if (!handled) {                                                              </span>
<span class="-4696769326244627405" onmouseenter="enter('-4696769326244627405');" onmouseout="out('-4696769326244627405');" style=""><abbr title=" 619                                 defaultFieldPersistenceProvider.extractValue(new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, persistenceManager, this, entity, customCriteria), propertyItem);"> 619                                 defaultFieldPersistenceProvider.extractValue(new ExtractValueRequest(propðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620                             }                                                                            </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 621                             break checkField;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622                         }                                                                                </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 623                         //try a direct property acquisition via reflection                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 624                         try {                                                                            </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 625                             String strVal = null;                                                        </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 626                             Method method;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 627                             try {                                                                        </span>
<span class="-1798391636455890646" onmouseenter="enter('-1798391636455890646');" onmouseout="out('-1798391636455890646');" style=""> 628                                 // try a &#x27;get&#x27; prefixed mutator first                                    </span>
<span class="7435702377730641897" onmouseenter="enter('7435702377730641897');" onmouseout="out('7435702377730641897');" style=""><abbr title=" 629                                 String temp = (&quot;get&quot; + property.substring(0, 1).toUpperCase()) + property.substring(1, property.length());"> 629                                 String temp = (&quot;get&quot; + property.substring(0, 1).toUpperCase()) + propertyðŸ”µ</abbr></span>
<span class="-4778345320120097366" onmouseenter="enter('-4778345320120097366');" onmouseout="out('-4778345320120097366');" style=""> 630                                 method = entity.getClass().getMethod(temp, new Class[]{  });             </span>
<span class="5128954153220851217" onmouseenter="enter('5128954153220851217');" onmouseout="out('5128954153220851217');" style=""> 631                             } catch (java.lang.NoSuchMethodException e) {                                </span>
<span class="9023003814127164292" onmouseenter="enter('9023003814127164292');" onmouseout="out('9023003814127164292');" style=""> 632                                 method = entity.getClass().getMethod(property, new Class[]{  });         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633                             }                                                                            </span>
<span class="-5580774230721267569" onmouseenter="enter('-5580774230721267569');" onmouseout="out('-5580774230721267569');" style=""> 634                             value = method.invoke(entity, new String[]{  });                             </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 635                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 636                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 637                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 638                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 640                             props.add(propertyItem);                                                     </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 641                             if (value == null) {                                                         </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 642                                 strVal = null;                                                           </span>
<span class="773085658303013028" onmouseenter="enter('773085658303013028');" onmouseout="out('773085658303013028');" style=""> 643                             } else if (Date.class.isAssignableFrom(value.getClass())) {                  </span>
<span class="-1039455398020614014" onmouseenter="enter('-1039455398020614014');" onmouseout="out('-1039455398020614014');" style=""> 644                                 strVal = getSimpleDateFormatter().format(((Date) (value)));              </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 645                             } else if (Timestamp.class.isAssignableFrom(value.getClass())) {             </span>
<span class="8826059092820512259" onmouseenter="enter('8826059092820512259');" onmouseout="out('8826059092820512259');" style=""><abbr title=" 646                                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) (value)).getTime()));"> 646                                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) (value)).gðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 647                             } else if (Calendar.class.isAssignableFrom(value.getClass())) {              </span>
<span class="6187048619204773000" onmouseenter="enter('6187048619204773000');" onmouseout="out('6187048619204773000');" style=""> 648                                 strVal = getSimpleDateFormatter().format(((Calendar) (value)).getTime());</span>
<span class="-8000513140171445641" onmouseenter="enter('-8000513140171445641');" onmouseout="out('-8000513140171445641');" style=""> 649                             } else if (java.lang.Double.class.isAssignableFrom(value.getClass())) {      </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 650                                 strVal = getDecimalFormatter().format(value);                            </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 651                             } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 652                                 strVal = getDecimalFormatter().format(value);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 653                             } else {                                                                     </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 654                                 strVal = value.toString();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655                             }                                                                            </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 656                             propertyItem.setValue(strVal);                                               </span>
<span class="5128954153220851217" onmouseenter="enter('5128954153220851217');" onmouseout="out('5128954153220851217');" style=""> 657                         } catch (java.lang.NoSuchMethodException e) {                                    </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 658                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 658                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.ðŸ”µ</abbr></span>
<span class="-474645157140037388" onmouseenter="enter('-474645157140037388');" onmouseout="out('-474645157140037388');" style=""> 659                             // do nothing - this property is simply not in the bean                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663             }                                                                                            </span>
<span class="-4826617111900065805" onmouseenter="enter('-4826617111900065805');" onmouseout="out('-4826617111900065805');" style=""> 664         } catch (java.lang.ClassNotFoundException e) {                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 665             throw new PersistenceException(e);                                                           </span>
<span class="1719180133827210930" onmouseenter="enter('1719180133827210930');" onmouseout="out('1719180133827210930');" style=""> 666         } catch (java.lang.IllegalAccessException e) {                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 667             throw new PersistenceException(e);                                                           </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 668         } catch (InvocationTargetException e) {                                                          </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 669             throw new PersistenceException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671     }                                                                                                    </span>
<span  style=""> 672                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 673     @Override                                                                                            </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 674     public String getStringValueFromGetter(Serializable instance, String propertyName)                   </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 675             throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {            </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 676         Object value = PropertyUtils.getProperty(instance, propertyName);                                </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 677         return formatValue(value);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678     }                                                                                                    </span>
<span  style=""> 679                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 680     @Override                                                                                            </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 681     public String formatValue(Object value) {                                                            </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 682         String strVal;                                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 683         if (value == null) {                                                                             </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 684             strVal = null;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 685         } else {                                                                                         </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 686             if (Date.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 687                 strVal = getSimpleDateFormatter().format((Date) value);                                  </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 688             } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                             </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 689                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));       </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 690             } else if (Calendar.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 691                 strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                  </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 692             } else if (Double.class.isAssignableFrom(value.getClass())) {                                </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 693                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 694             } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 695                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 696             } else {                                                                                     </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 697                 strVal = value.toString();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699         }                                                                                                </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 700         return strVal;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701     }                                                                                                    </span>
<span  style=""> 702                                                                                                          </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 703     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 703     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean incluðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 704         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 705         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 706         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-6574648083356776864" onmouseenter="enter('-6574648083356776864');" onmouseout="out('-6574648083356776864');" style=""><abbr title=" 707         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY)));"> 707         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().geðŸ”µ</abbr></span>
<span class="2810923578864584163" onmouseenter="enter('2810923578864584163');" onmouseout="out('2810923578864584163');" style=""> 708         if ((foreignKey != null) &amp;&amp; (!foreignKey.getMutable())) {                                        </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 709             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 711         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 712             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 712             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="489034708612369752" onmouseenter="enter('489034708612369752');" onmouseout="out('489034708612369752');" style=""><abbr title=" 713             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(persistencePackage.getCeilingEntityFullyQualifiedClassname(), entities, foreignKey, persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);"> 713             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 714             if (primaryKey == null) {                                                                    </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 715                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716             }                                                                                            </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 717             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 717             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 718             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 719             if (!entity.isValidationFailure()) {                                                         </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 720                 //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property</span>
<span class="223804448508639776" onmouseenter="enter('223804448508639776');" onmouseout="out('223804448508639776');" style=""><abbr title=" 721                 if ((((foreignKey != null) &amp;&amp; (foreignKey.getSortField() != null)) &amp;&amp; (entity.findProperty(foreignKey.getSortField()) != null)) &amp;&amp; (entity.findProperty(foreignKey.getSortField()).getValue() != null)) {"> 721                 if ((((foreignKey != null) &amp;&amp; (foreignKey.getSortField() != null)) &amp;&amp; (entity.findPropertðŸ”µ</abbr></span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title=" 722                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();"> 722                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="72752549748996882" onmouseenter="enter('72752549748996882');" onmouseout="out('72752549748996882');" style=""><abbr title=" 723                     extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance, mergedProperties, primaryKey, result);"> 723                     extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance, meðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 724                     instance = result.getResult();                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 725                 } else {                                                                                 </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 726                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 726                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727                 }                                                                                        </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 728                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 729                 if (includeRealEntity) {                                                                 </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 730                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731                 }                                                                                        </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 732                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 733                 entityList.add(instance);                                                                </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 734                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 735                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 736                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 737             } else {                                                                                     </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 738                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 739                 return entityResult;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 741         } catch (java.lang.Exception e) {                                                                </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 742             throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 743         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744     }                                                                                                    </span>
<span  style=""> 745                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 746     @Override                                                                                            </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 747     public String getIdPropertyName(String entityClass) {                                                </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 748         return persistenceManager.getIdPropertyName(entityClass);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749     }                                                                                                    </span>
<span  style=""> 750                                                                                                          </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 751     public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {             </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 752         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 752         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 753         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="-2918742519902049887" onmouseenter="enter('-2918742519902049887');" onmouseout="out('-2918742519902049887');" style=""> 754             BasicFieldMetadata temp = ((BasicFieldMetadata) (mergedProperties.get(property)));           </span>
<span class="-5683108998705740453" onmouseenter="enter('-5683108998705740453');" onmouseout="out('-5683108998705740453');" style=""> 755             if ((temp.getFieldType() == SupportedFieldType.ID) &amp;&amp; (!property.contains(&quot;.&quot;))) {           </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 756                 return property;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758         }                                                                                                </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""><abbr title=" 759         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;);"> 759         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged propertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760     }                                                                                                    </span>
<span  style=""> 761                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 762     @Override                                                                                            </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 763     public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {  </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 764         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 764         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 765         Object primaryKey = null;                                                                        </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 766         String idPropertyName = null;                                                                    </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 767         BasicFieldMetadata metaData = null;                                                              </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 768         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="-2918742519902049887" onmouseenter="enter('-2918742519902049887');" onmouseout="out('-2918742519902049887');" style=""> 769             BasicFieldMetadata temp = ((BasicFieldMetadata) (mergedProperties.get(property)));           </span>
<span class="-5683108998705740453" onmouseenter="enter('-5683108998705740453');" onmouseout="out('-5683108998705740453');" style=""> 770             if ((temp.getFieldType() == SupportedFieldType.ID) &amp;&amp; (!property.contains(&quot;.&quot;))) {           </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 771                 idPropertyName = property;                                                               </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 772                 metaData = temp;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 773                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775         }                                                                                                </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 776         if (idPropertyName == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 777             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 777             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with tðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778         }                                                                                                </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 779         for (Property property : entity.getProperties()) {                                               </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 780             if (property.getName().equals(idPropertyName)) {                                             </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 781                 switch (metaData.getSecondaryType()) {                                                   </span>
<span class="3414571945316628455" onmouseenter="enter('3414571945316628455');" onmouseout="out('3414571945316628455');" style=""> 782                     case INTEGER :                                                                       </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""><abbr title=" 783                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());"> 783                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValuðŸ”µ</abbr></span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 784                         break;                                                                           </span>
<span class="8574078210225677907" onmouseenter="enter('8574078210225677907');" onmouseout="out('8574078210225677907');" style=""> 785                     case STRING :                                                                        </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 786                         primaryKey = property.getValue();                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 787                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 789                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791         }                                                                                                </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 792         if (primaryKey == null) {                                                                        </span>
<span class="-782560894109424745" onmouseenter="enter('-782560894109424745');" onmouseout="out('-782560894109424745');" style=""><abbr title=" 793             throw new RuntimeException(((&quot;Could not find the primary key property (&quot; + idPropertyName) + &quot;) in the passed entity with type: &quot;) + entity.getType()[0]);"> 793             throw new RuntimeException(((&quot;Could not find the primary key property (&quot; + idPropertyName) + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794         }                                                                                                </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 795         return primaryKey;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796     }                                                                                                    </span>
<span  style=""> 797                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 798     @Override                                                                                            </span>
<span class="8348793631888876933" onmouseenter="enter('8348793631888876933');" onmouseout="out('8348793631888876933');" style=""><abbr title=" 799     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective, CriteriaTransferObject cto, String ceilingEntityFullyQualifiedClassname, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties, RestrictionFactory customRestrictionFactory) {"> 799     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective, CriteriaTðŸ”µ</abbr></span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 800         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 800         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 801         List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                             </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 802         for (String propertyId : cto.getCriteriaMap().keySet()) {                                        </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 803             if (mergedProperties.containsKey(propertyId)) {                                              </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 804                 boolean handled = false;                                                                 </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 805                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {    </span>
<span class="-7159139530677495719" onmouseenter="enter('-7159139530677495719');" onmouseout="out('-7159139530677495719');" style=""><abbr title=" 806                     MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(new AddSearchMappingRequest(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId, getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory : customRestrictionFactory), filterMappings);"> 806                     MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(new AddðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 807                     if (MetadataProviderResponse.NOT_HANDLED != response) {                              </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 808                         handled = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809                     }                                                                                    </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 810                     if (MetadataProviderResponse.HANDLED_BREAK == response) {                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 811                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 813                 }                                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 814                 if (!handled) {                                                                          </span>
<span class="-6710096082108719164" onmouseenter="enter('-6710096082108719164');" onmouseout="out('-6710096082108719164');" style=""><abbr title=" 815                     defaultFieldPersistenceProvider.addSearchMapping(new AddSearchMappingRequest(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId, getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory : customRestrictionFactory), filterMappings);"> 815                     defaultFieldPersistenceProvider.addSearchMapping(new AddSearchMappingRequest(persisteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818         }                                                                                                </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 819         return filterMappings;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820     }                                                                                                    </span>
<span  style=""> 821                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 822     @Override                                                                                            </span>
<span class="-8929616746934601136" onmouseenter="enter('-8929616746934601136');" onmouseout="out('-8929616746934601136');" style=""><abbr title=" 823     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective, CriteriaTransferObject cto, String ceilingEntityFullyQualifiedClassname, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {"> 823     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective, CriteriaTðŸ”µ</abbr></span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 824         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 824         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825     }                                                                                                    </span>
<span  style=""> 826                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 827     @Override                                                                                            </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 828     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 828     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 829         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 829         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830     }                                                                                                    </span>
<span  style=""> 831                                                                                                          </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 832     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 832     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style=""> 833         Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 834             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 835             public int compare(Property o1, Property o2) {                                               </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style=""> 836                 return o1.getName().compareTo(o2.getName());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 838         };                                                                                               </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style=""> 839         Collections.sort(properties, comparator);                                                        </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style=""> 840         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 841             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style=""> 842             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style=""> 843             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style=""> 844             prop.setName(property);                                                                      </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 845             int pos = Collections.binarySearch(properties, prop, comparator);                            </span>
<span class="-8984574907660299213" onmouseenter="enter('-8984574907660299213');" onmouseout="out('-8984574907660299213');" style=""><abbr title=" 846             if (((pos &gt;= 0) &amp;&amp; (MergedPropertyType.MAPSTRUCTUREKEY != type)) &amp;&amp; (MergedPropertyType.MAPSTRUCTUREVALUE != type)) {"> 846             if (((pos &gt;= 0) &amp;&amp; (MergedPropertyType.MAPSTRUCTUREKEY != type)) &amp;&amp; (MergedPropertyType.MAPSTðŸ”µ</abbr></span>
<span class="-8463788550096128348" onmouseenter="enter('-8463788550096128348');" onmouseout="out('-8463788550096128348');" style=""> 847                 logWarn : {                                                                              </span>
<span class="-1741528801694696097" onmouseenter="enter('-1741528801694696097');" onmouseout="out('-1741528801694696097');" style=""><abbr title=" 848                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) (metadata)).getFieldType())) {"> 848                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFðŸ”µ</abbr></span>
<span class="-218378381239172071" onmouseenter="enter('-218378381239172071');" onmouseout="out('-218378381239172071');" style=""> 849                         // don&#x27;t warn for id field collisions, but still ignore the colliding fields     </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 850                         break logWarn;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851                     }                                                                                    </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 852                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 852                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + prðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853                 }                                                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 854                 continue;                                                                                </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style=""> 855             } else if (pos &lt; 0) {                                                                        </span>
<span class="2362226727065531470" onmouseenter="enter('2362226727065531470');" onmouseout="out('2362226727065531470');" style=""> 856                 pos = (-pos) - 1;// calculate position to insert                                         </span>
<span  style=""> 857                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858             }                                                                                            </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style=""> 859             properties.add(pos, prop);                                                                   </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 860             prop.setMetadata(metadata);                                                                  </span>
<span class="8349865777333884404" onmouseenter="enter('8349865777333884404');" onmouseout="out('8349865777333884404');" style=""> 861             if (isHiddenOverride &amp;&amp; (prop.getMetadata() instanceof BasicFieldMetadata)) {                </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 862                 //this only makes sense for non collection types                                         </span>
<span class="6353414356723434185" onmouseenter="enter('6353414356723434185');" onmouseout="out('6353414356723434185');" style=""> 863                 ((BasicFieldMetadata) (prop.getMetadata())).setVisibility(VisibilityEnum.HIDDEN_ALL);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 864             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 865         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866     }                                                                                                    </span>
<span  style=""> 867                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 868     @Override                                                                                            </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 869     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 869     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, MapðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 870         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 870         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 871         try {                                                                                            </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""><abbr title=" 872             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();"> 872             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective(ðŸ”µ</abbr></span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""><abbr title=" 873             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);"> 873             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="1054635470267988291" onmouseenter="enter('1054635470267988291');" onmouseout="out('1054635470267988291');" style=""><abbr title=" 874             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(ceilingEntityFullyQualifiedClassname, entities, ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY))), persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);"> 874             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style=""> 875             allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                       </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 876         } catch (java.lang.Exception e) {                                                                </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title=" 877             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);"> 877             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879     }                                                                                                    </span>
<span  style=""> 880                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 881     @Override                                                                                            </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title=" 882     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 882     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) thðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style=""> 883         return update(persistencePackage, null, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884     }                                                                                                    </span>
<span  style=""> 885                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 886     @Override                                                                                            </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style=""> 887     public Entity update(PersistencePackage persistencePackage) throws ServiceException {                </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style=""> 888         EntityResult er = update(persistencePackage, null, false);                                       </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style=""> 889         return er.getEntity();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890     }                                                                                                    </span>
<span  style=""> 891                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 892     @Override                                                                                            </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style=""> 893     public Entity add(PersistencePackage persistencePackage) throws ServiceException {                   </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style=""> 894         EntityResult entityResult = add(persistencePackage, false);                                      </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style=""> 895         return entityResult.getEntity();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896     }                                                                                                    </span>
<span  style=""> 897                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 898     @Override                                                                                            </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title=" 899     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 899     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throwðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 900         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 901         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 902         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-6574648083356776864" onmouseenter="enter('-6574648083356776864');" onmouseout="out('-6574648083356776864');" style=""><abbr title=" 903         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY)));"> 903         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().geðŸ”µ</abbr></span>
<span class="2810923578864584163" onmouseenter="enter('2810923578864584163');" onmouseout="out('2810923578864584163');" style=""> 904         if ((foreignKey != null) &amp;&amp; (!foreignKey.getMutable())) {                                        </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 905             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 907         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 908             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 908             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="8820266687956758411" onmouseenter="enter('8820266687956758411');" onmouseout="out('8820266687956758411');" style=""><abbr title=" 909             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(persistencePackage.getCeilingEntityFullyQualifiedClassname(), entities, foreignKey, persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);"> 909             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 910             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 910             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style=""> 911             String idProperty = null;                                                                    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 912             for (String property : mergedProperties.keySet()) {                                          </span>
<span class="2006913739212116449" onmouseenter="enter('2006913739212116449');" onmouseout="out('2006913739212116449');" style=""><abbr title=" 913                 if (((BasicFieldMetadata) (mergedProperties.get(property))).getFieldType() == SupportedFieldType.ID) {"> 913                 if (((BasicFieldMetadata) (mergedProperties.get(property))).getFieldType() == SupportedFiðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style=""> 914                     idProperty = property;                                                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 915                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917             }                                                                                            </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style=""> 918             if (idProperty == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 919                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 919                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity wiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920             }                                                                                            </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 921             Object primaryKey = null;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 922             try {                                                                                        </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 923                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 924             } catch (java.lang.Exception e) {                                                            </span>
<span class="1765240511479733113" onmouseenter="enter('1765240511479733113');" onmouseout="out('1765240511479733113');" style=""> 925                 // don&#x27;t do anything - this is a valid case                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926             }                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 927             if (primaryKey == null) {                                                                    </span>
<span class="2338163775309691724" onmouseenter="enter('2338163775309691724');" onmouseout="out('2338163775309691724');" style=""><abbr title=" 928                 Serializable instance = ((Serializable) (Class.forName(entity.getType()[0]).newInstance()));"> 928                 Serializable instance = ((Serializable) (Class.forName(entity.getType()[0]).newInstance()ðŸ”µ</abbr></span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style=""> 929                 instance = createPopulatedInstance(instance, entity, mergedProperties, false);           </span>
<span class="-2673597301429377432" onmouseenter="enter('-2673597301429377432');" onmouseout="out('-2673597301429377432');" style=""> 930                 if ((foreignKey != null) &amp;&amp; (foreignKey.getSortField() != null)) {                       </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title=" 931                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();"> 931                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title=" 932                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);"> 932                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergeðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 933                     instance = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934                 }                                                                                        </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 935                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style=""> 936                 if (includeRealEntityObject) {                                                           </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 937                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 938                 }                                                                                        </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 939                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 940                 entityList.add(instance);                                                                </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 941                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 942                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 943                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 944             } else {                                                                                     </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style=""> 945                 return update(persistencePackage, primaryKey, includeRealEntityObject);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 947         } catch (java.lang.Exception e) {                                                                </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style=""> 948             throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 950     }                                                                                                    </span>
<span  style=""> 951                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 952     @Override                                                                                            </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style=""> 953     public void remove(PersistencePackage persistencePackage) throws ServiceException {                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 954         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 955         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-6574648083356776864" onmouseenter="enter('-6574648083356776864');" onmouseout="out('-6574648083356776864');" style=""><abbr title=" 956         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY)));"> 956         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().geðŸ”µ</abbr></span>
<span class="2810923578864584163" onmouseenter="enter('2810923578864584163');" onmouseout="out('2810923578864584163');" style=""> 957         if ((foreignKey != null) &amp;&amp; (!foreignKey.getMutable())) {                                        </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 958             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 960         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 961             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 961             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="8820266687956758411" onmouseenter="enter('8820266687956758411');" onmouseout="out('8820266687956758411');" style=""><abbr title=" 962             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(persistencePackage.getCeilingEntityFullyQualifiedClassname(), entities, foreignKey, persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);"> 962             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 963             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 963             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style=""> 964             Object primaryKey = getPrimaryKey(entity, mergedProperties);                                 </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 965             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 965             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 966             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style=""> 967             switch (persistencePerspective.getOperationTypes().getRemoveType()) {                        </span>
<span class="1142445618842124271" onmouseenter="enter('1142445618842124271');" onmouseout="out('1142445618842124271');" style=""> 968                 case NONDESTRUCTIVEREMOVE :                                                              </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 969                     FieldManager fieldManager = getFieldManager();                                       </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title=" 970                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());"> 970                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style=""><abbr title=" 971                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();"> 971                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 972                     try {                                                                                </span>
<span class="5481501032486366952" onmouseenter="enter('5481501032486366952');" onmouseout="out('5481501032486366952');" style=""> 973                         foreignKeyValue = Long.valueOf(((String) (foreignKeyValue)));                    </span>
<span class="5607511864385965813" onmouseenter="enter('5607511864385965813');" onmouseout="out('5607511864385965813');" style=""> 974                     } catch (java.lang.NumberFormatException e) {                                        </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style=""><abbr title=" 975                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);"> 975                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove looðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976                     }                                                                                    </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title=" 977                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);"> 977                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(ClasðŸ”µ</abbr></span>
<span class="-4517376354405682059" onmouseenter="enter('-4517376354405682059');" onmouseout="out('-4517376354405682059');" style=""><abbr title=" 978                     Collection collection = ((Collection) (fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField())));"> 978                     Collection collection = ((Collection) (fieldManager.getFieldValue(foreignInstance, foðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style=""> 979                     collection.remove(instance);                                                         </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title=" 980                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on"> 980                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (justðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style=""><abbr title=" 981                     // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly"> 981                     // the @ManyToOne side) then it will not be updated. In that instance, we have to expðŸ”µ</abbr></span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style=""> 982                     // set the manyTo field to null so that subsequent lookups will not find it          </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style=""> 983                     if (manyToFieldMetadata instanceof BasicFieldMetadata) {                             </span>
<span class="-7109466749209802804" onmouseenter="enter('-7109466749209802804');" onmouseout="out('-7109466749209802804');" style=""><abbr title=" 984                         if (BooleanUtils.isTrue(((BasicFieldMetadata) (manyToFieldMetadata)).getRequired())) {"> 984                         if (BooleanUtils.isTrue(((BasicFieldMetadata) (manyToFieldMetadata)).getRequired(ðŸ”µ</abbr></span>
<span class="-6517838810722879881" onmouseenter="enter('-6517838810722879881');" onmouseout="out('-6517838810722879881');" style=""><abbr title=" 985                             throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot; + (&quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot; + &quot; or nullable=true within the @JoinColumn annotation&quot;));"> 985                             throw new ServiceException(&quot;Could not remove from the collection as the ManyTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986                         }                                                                                </span>
<span class="-7414876815352490832" onmouseenter="enter('-7414876815352490832');" onmouseout="out('-7414876815352490832');" style=""><abbr title=" 987                         // Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module"> 987                         // Since this is occuring on a remove persistence package, merge up-front (beforeðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 988                         instance = persistenceManager.getDynamicEntityDao().merge(instance);             </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title=" 989                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());"> 989                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style=""> 990                         Object manyToObject = manyToField.get(instance);                                 </span>
<span class="-3949036003110653717" onmouseenter="enter('-3949036003110653717');" onmouseout="out('-3949036003110653717');" style=""><abbr title=" 991                         if (((manyToObject != null) &amp;&amp; (!(manyToObject instanceof Collection))) &amp;&amp; (!(manyToObject instanceof Map))) {"> 991                         if (((manyToObject != null) &amp;&amp; (!(manyToObject instanceof Collection))) &amp;&amp; (!(manðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style=""> 992                             manyToField.set(instance, null);                                             </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 993                             instance = persistenceManager.getDynamicEntityDao().merge(instance);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 994                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 996                     break;                                                                               </span>
<span class="2582537678465774458" onmouseenter="enter('2582537678465774458');" onmouseout="out('2582537678465774458');" style=""> 997                 case BASIC :                                                                             </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style=""> 998                     persistenceManager.getDynamicEntityDao().remove(instance);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 999                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1001         } catch (java.lang.Exception e) {                                                                </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1002             throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004     }                                                                                                    </span>
<span  style="">1005                                                                                                          </span>
<span class="513510735216993654" onmouseenter="enter('513510735216993654');" onmouseout="out('513510735216993654');" style=""><abbr title="1006     public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1006     public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage, CriteriaðŸ”µ</abbr></span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1007         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1008         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1008         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1009         if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {             </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1010             persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1012         try {                                                                                            </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1013             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1013             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span class="1054635470267988291" onmouseenter="enter('1054635470267988291');" onmouseout="out('1054635470267988291');" style=""><abbr title="1014             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(ceilingEntityFullyQualifiedClassname, entities, ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY))), persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);">1014             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1015             return mergedProperties;                                                                     </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1016         } catch (java.lang.Exception e) {                                                                </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1017             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1017             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1018         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1019     }                                                                                                    </span>
<span  style="">1020                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1021     @Override                                                                                            </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1022     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1022     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1023         Entity[] payload;                                                                                </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1024         int totalRecords;                                                                                </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1025         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1026         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1026         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-6574648083356776864" onmouseenter="enter('-6574648083356776864');" onmouseout="out('-6574648083356776864');" style=""><abbr title="1027         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY)));">1027         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().geðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1028         try {                                                                                            </span>
<span class="-2673597301429377432" onmouseenter="enter('-2673597301429377432');" onmouseout="out('-2673597301429377432');" style="">1029             if ((foreignKey != null) &amp;&amp; (foreignKey.getSortField() != null)) {                           </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1030                 FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                 </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1031                 sortCriteria.setSortAscending(foreignKey.getSortAscending());                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032             }                                                                                            </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1033             Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);  </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style="">1034             if (useTranslationSearch) {                                                                  </span>
<span class="-4893882968490565148" onmouseenter="enter('-4893882968490565148');" onmouseout="out('-4893882968490565148');" style="">1035                 addTranslationSearchIfNeeded(cto, mergedProperties);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1036             }                                                                                            </span>
<span class="7364642128609949837" onmouseenter="enter('7364642128609949837');" onmouseout="out('7364642128609949837');" style=""><abbr title="1037             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties);">1037             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistenðŸ”µ</abbr></span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1038             List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);   </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1039             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1040                 standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041             }                                                                                            </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1042             if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                 </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1043                 standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044             }                                                                                            </span>
<span class="5923409016849567594" onmouseenter="enter('5923409016849567594');" onmouseout="out('5923409016849567594');" style=""><abbr title="1045             FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto, persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);">1045             FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto, persistencePackage.getFðŸ”µ</abbr></span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1046             List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                             </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1047             List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);      </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1048             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1049                 countFilterMappings.addAll(cto.getAdditionalFilterMappings());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050             }                                                                                            </span>
<span class="-6858810223014839204" onmouseenter="enter('-6858810223014839204');" onmouseout="out('-6858810223014839204');" style=""><abbr title="1051             FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto, persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);">1051             FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto, persistencePackageðŸ”µ</abbr></span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1052             totalRecords = getTotalRecords(countFetchRequest);                                           </span>
<span class="29160359336504019" onmouseenter="enter('29160359336504019');" onmouseout="out('29160359336504019');" style=""><abbr title="1053             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto, persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);">1053             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackageðŸ”µ</abbr></span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1054             payload = getRecords(fetchExtractionRequest);                                                </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1055         } catch (java.lang.Exception e) {                                                                </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1056             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1056             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057         }                                                                                                </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1058         return new DynamicResultSet(null, payload, totalRecords);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059     }                                                                                                    </span>
<span  style="">1060                                                                                                          </span>
<span class="-6037376119596627025" onmouseenter="enter('-6037376119596627025');" onmouseout="out('-6037376119596627025');" style=""><abbr title="1061     private void addTranslationSearchIfNeeded(CriteriaTransferObject cto, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1061     private void addTranslationSearchIfNeeded(CriteriaTransferObject cto, Map&lt;String, FieldMetadata&gt; mergðŸ”µ</abbr></span>
<span class="-2846648248046819015" onmouseenter="enter('-2846648248046819015');" onmouseout="out('-2846648248046819015');" style="">1062         Map&lt;String, FilterAndSortCriteria&gt; criteriaMap = cto.getCriteriaMap();                           </span>
<span class="811702704133342292" onmouseenter="enter('811702704133342292');" onmouseout="out('811702704133342292');" style="">1063         FilterAndSortCriteria fsc = criteriaMap.get(&quot;translationLocale&quot;);                                </span>
<span class="8797373901407974682" onmouseenter="enter('8797373901407974682');" onmouseout="out('8797373901407974682');" style="">1064         List&lt;String&gt; filterValues = new ArrayList&lt;&gt;();                                                   </span>
<span class="7732194668261263043" onmouseenter="enter('7732194668261263043');" onmouseout="out('7732194668261263043');" style="">1065         if (fsc != null) {                                                                               </span>
<span class="2259588886243628801" onmouseenter="enter('2259588886243628801');" onmouseout="out('2259588886243628801');" style="">1066             filterValues = fsc.getFilterValues();                                                        </span>
<span class="2091742627616562528" onmouseenter="enter('2091742627616562528');" onmouseout="out('2091742627616562528');" style="">1067             criteriaMap.remove(&quot;translationLocale&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068         }                                                                                                </span>
<span class="3485235865484365089" onmouseenter="enter('3485235865484365089');" onmouseout="out('3485235865484365089');" style="">1069         //If locale is generic - than we use all locales of this language                                </span>
<span class="-41588082364058856" onmouseenter="enter('-41588082364058856');" onmouseout="out('-41588082364058856');" style="">1070         //For example, if locale = &quot;en&quot; than we use also &quot;en_GB&quot; and &quot;en_US&quot;                             </span>
<span class="8329625728999317193" onmouseenter="enter('8329625728999317193');" onmouseout="out('8329625728999317193');" style="">1071         if (filterValues.size() &gt; 0 &amp;&amp; filterValues.get(0).indexOf(&quot;_&quot;) &lt; 0) {                           </span>
<span class="8492179051032337523" onmouseenter="enter('8492179051032337523');" onmouseout="out('8492179051032337523');" style="">1072             String currentLocaleCode = filterValues.get(0);                                              </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title="1073             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();">1073             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span class="-6592630843479972415" onmouseenter="enter('-6592630843479972415');" onmouseout="out('-6592630843479972415');" style="">1074             for (org.broadleafcommerce.common.locale.domain.Locale locale : locales) {                   </span>
<span class="-7527245144390113265" onmouseenter="enter('-7527245144390113265');" onmouseout="out('-7527245144390113265');" style=""><abbr title="1075                 if (!locale.getLocaleCode().equals(currentLocaleCode) &amp;&amp; currentLocaleCode.equals(locale.getLocaleCode().substring(0,2))) {">1075                 if (!locale.getLocaleCode().equals(currentLocaleCode) &amp;&amp; currentLocaleCode.equals(locale.ðŸ”µ</abbr></span>
<span class="-1114101031881938600" onmouseenter="enter('-1114101031881938600');" onmouseout="out('-1114101031881938600');" style="">1076                     filterValues.add(locale.getLocaleCode());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079         }                                                                                                </span>
<span class="7041175802579200053" onmouseenter="enter('7041175802579200053');" onmouseout="out('7041175802579200053');" style="">1080         Iterator&lt;Entry&lt;String, FilterAndSortCriteria&gt;&gt; iterator = criteriaMap.entrySet().iterator();     </span>
<span class="977968488612897428" onmouseenter="enter('977968488612897428');" onmouseout="out('977968488612897428');" style="">1081         while (iterator.hasNext()) {                                                                     </span>
<span class="-2018186862383960552" onmouseenter="enter('-2018186862383960552');" onmouseout="out('-2018186862383960552');" style="">1082             Entry&lt;String, FilterAndSortCriteria&gt; next = iterator.next();                                 </span>
<span  style="">1083                                                                                                          </span>
<span class="1265738709115975150" onmouseenter="enter('1265738709115975150');" onmouseout="out('1265738709115975150');" style="">1084             final String key = next.getKey();                                                            </span>
<span class="-7678196324163664201" onmouseenter="enter('-7678196324163664201');" onmouseout="out('-7678196324163664201');" style="">1085             FieldMetadata fieldMetadata = mergedProperties.get(key);                                     </span>
<span class="-1023901421219743812" onmouseenter="enter('-1023901421219743812');" onmouseout="out('-1023901421219743812');" style=""><abbr title="1086             if (fieldMetadata != null &amp;&amp; fieldMetadata instanceof BasicFieldMetadata &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getTranslatable()!=null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getTranslatable()) {">1086             if (fieldMetadata != null &amp;&amp; fieldMetadata instanceof BasicFieldMetadata &amp;&amp; ((BasicFieldMetadðŸ”µ</abbr></span>
<span class="4880585623334776575" onmouseenter="enter('4880585623334776575');" onmouseout="out('4880585623334776575');" style="">1087                 BasicFieldMetadata basicFieldMetadata = ((BasicFieldMetadata) fieldMetadata);            </span>
<span class="-388570270073866047" onmouseenter="enter('-388570270073866047');" onmouseout="out('-388570270073866047');" style="">1088                 if (next.getValue().getFilterValues().size() &gt; 0) {                                      </span>
<span class="713070525122680609" onmouseenter="enter('713070525122680609');" onmouseout="out('713070525122680609');" style="">1089                     final String value = next.getValue().getFilterValues().get(0);                       </span>
<span class="3317822052141256197" onmouseenter="enter('3317822052141256197');" onmouseout="out('3317822052141256197');" style="">1090                     final String targetClass = basicFieldMetadata.getTargetClass();                      </span>
<span class="-7313378335001093503" onmouseenter="enter('-7313378335001093503');" onmouseout="out('-7313378335001093503');" style="">1091                     final String fieldName = basicFieldMetadata.getFieldName();                          </span>
<span class="-850715722857507285" onmouseenter="enter('-850715722857507285');" onmouseout="out('-850715722857507285');" style="">1092                     final String friendlyType = getTranslationFriendlyType(targetClass);                 </span>
<span class="895212293547782698" onmouseenter="enter('895212293547782698');" onmouseout="out('895212293547782698');" style="">1093                     final List&lt;String&gt; localeValues = filterValues;                                      </span>
<span class="5947868462885005542" onmouseenter="enter('5947868462885005542');" onmouseout="out('5947868462885005542');" style="">1094                     if (friendlyType != null) {                                                          </span>
<span class="-6215380074365660212" onmouseenter="enter('-6215380074365660212');" onmouseout="out('-6215380074365660212');" style="">1095                         iterator.remove();                                                               </span>
<span class="947198310670736489" onmouseenter="enter('947198310670736489');" onmouseout="out('947198310670736489');" style="">1096                         cto.getAdditionalFilterMappings().add(new FilterMapping()                        </span>
<span class="2888003341970826788" onmouseenter="enter('2888003341970826788');" onmouseout="out('2888003341970826788');" style="">1097                                 .withDirectFilterValues(new EmptyFilterValues())                         </span>
<span class="-178271358118690506" onmouseenter="enter('-178271358118690506');" onmouseout="out('-178271358118690506');" style="">1098                                 .withRestriction(                                                        </span>
<span class="-7975261834482695502" onmouseenter="enter('-7975261834482695502');" onmouseout="out('-7975261834482695502');" style="">1099                                         new Restriction().withPredicateProvider(new PredicateProvider() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1100                                             @Override                                                    </span>
<span class="-6543887403560352788" onmouseenter="enter('-6543887403560352788');" onmouseout="out('-6543887403560352788');" style="">1101                                             public Predicate buildPredicate(CriteriaBuilder builder,     </span>
<span class="-7125560532692692259" onmouseenter="enter('-7125560532692692259');" onmouseout="out('-7125560532692692259');" style=""><abbr title="1102                                                                             FieldPathBuilder fieldPathBuilder,">1102                                                                             FieldPathBuilder fieldPathBuiðŸ”µ</abbr></span>
<span class="7512372620032911912" onmouseenter="enter('7512372620032911912');" onmouseout="out('7512372620032911912');" style="">1103                                                                             From root,                   </span>
<span class="-6496567708295007325" onmouseenter="enter('-6496567708295007325');" onmouseout="out('-6496567708295007325');" style="">1104                                                                             String ceilingEntity,        </span>
<span class="-1158993663019459187" onmouseenter="enter('-1158993663019459187');" onmouseout="out('-1158993663019459187');" style="">1105                                                                             String fullPropertyName,     </span>
<span class="-5850263724287795849" onmouseenter="enter('-5850263724287795849');" onmouseout="out('-5850263724287795849');" style="">1106                                                                             Path explicitPath,           </span>
<span class="-5946251977876316007" onmouseenter="enter('-5946251977876316007');" onmouseout="out('-5946251977876316007');" style="">1107                                                                             List directValues) {         </span>
<span class="-4398445738002779234" onmouseenter="enter('-4398445738002779234');" onmouseout="out('-4398445738002779234');" style="">1108                                                 Subquery subquery =                                      </span>
<span class="4320200709227808343" onmouseenter="enter('4320200709227808343');" onmouseout="out('4320200709227808343');" style=""><abbr title="1109                                                         fieldPathBuilder.getCriteria().subquery(Long.class);">1109                                                         fieldPathBuilder.getCriteria().subquery(Long.clasðŸ”µ</abbr></span>
<span class="-3003233056197271068" onmouseenter="enter('-3003233056197271068');" onmouseout="out('-3003233056197271068');" style="">1110                                                 Root transRoot = subquery.from(TranslationImpl.class);   </span>
<span class="-1828106112834311571" onmouseenter="enter('-1828106112834311571');" onmouseout="out('-1828106112834311571');" style="">1111                                                 subquery.select(builder.count(transRoot.get(&quot;id&quot;)));     </span>
<span class="-7827410329384074180" onmouseenter="enter('-7827410329384074180');" onmouseout="out('-7827410329384074180');" style="">1112                                                 Predicate type =                                         </span>
<span class="-7641385465441036986" onmouseenter="enter('-7641385465441036986');" onmouseout="out('-7641385465441036986');" style=""><abbr title="1113                                                         builder.equal(transRoot.get(&quot;entityType&quot;), friendlyType);">1113                                                         builder.equal(transRoot.get(&quot;entityType&quot;), friendðŸ”µ</abbr></span>
<span class="-8318529626652277752" onmouseenter="enter('-8318529626652277752');" onmouseout="out('-8318529626652277752');" style="">1114                                                 Predicate name =                                         </span>
<span class="-738855264844117982" onmouseenter="enter('-738855264844117982');" onmouseout="out('-738855264844117982');" style=""><abbr title="1115                                                         builder.equal(transRoot.get(&quot;fieldName&quot;), fieldName);">1115                                                         builder.equal(transRoot.get(&quot;fieldName&quot;), fieldNaðŸ”µ</abbr></span>
<span class="-8365644117166289056" onmouseenter="enter('-8365644117166289056');" onmouseout="out('-8365644117166289056');" style="">1116                                                 String[] split = key.split(&quot;\\.&quot;);                       </span>
<span class="2052011196962138618" onmouseenter="enter('2052011196962138618');" onmouseout="out('2052011196962138618');" style="">1117                                                 Path x = null;                                           </span>
<span class="-6625156218225986664" onmouseenter="enter('-6625156218225986664');" onmouseout="out('-6625156218225986664');" style="">1118                                                 for (int i = 0; i &lt; split.length; i++) {                 </span>
<span class="718039065179720471" onmouseenter="enter('718039065179720471');" onmouseout="out('718039065179720471');" style="">1119                                                     if (x == null) {                                     </span>
<span class="-9002262719383855885" onmouseenter="enter('-9002262719383855885');" onmouseout="out('-9002262719383855885');" style="">1120                                                         x = root.get(split[i]);                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1121                                                     } else {                                             </span>
<span class="6538684614966612209" onmouseenter="enter('6538684614966612209');" onmouseout="out('6538684614966612209');" style="">1122                                                         x = x.get(split[i]);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1123                                                     }                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124                                                 }                                                        </span>
<span  style="">1125                                                                                                          </span>
<span class="2609703429332764186" onmouseenter="enter('2609703429332764186');" onmouseout="out('2609703429332764186');" style="">1126                                                 String likeValue = &quot;%&quot; + value + &quot;%&quot;;                    </span>
<span class="-4483755678606832428" onmouseenter="enter('-4483755678606832428');" onmouseout="out('-4483755678606832428');" style="">1127                                                 Predicate transValue =                                   </span>
<span class="1835078746369173226" onmouseenter="enter('1835078746369173226');" onmouseout="out('1835078746369173226');" style=""><abbr title="1128                                                         builder.like(transRoot.get(&quot;translatedValue&quot;), likeValue);">1128                                                         builder.like(transRoot.get(&quot;translatedValue&quot;), liðŸ”µ</abbr></span>
<span class="1363159350076321828" onmouseenter="enter('1363159350076321828');" onmouseout="out('1363159350076321828');" style="">1129                                                 Predicate localeValue =                                  </span>
<span class="6936594261820918527" onmouseenter="enter('6936594261820918527');" onmouseout="out('6936594261820918527');" style=""><abbr title="1130                                                         builder.isTrue(transRoot.get(&quot;localeCode&quot;).in(localeValues));">1130                                                         builder.isTrue(transRoot.get(&quot;localeCode&quot;).in(locðŸ”µ</abbr></span>
<span class="7877531404660919575" onmouseenter="enter('7877531404660919575');" onmouseout="out('7877531404660919575');" style=""><abbr title="1131                                                 Path y = split.length &gt; 1 ? root.get(split[0]).get(&quot;id&quot;) : root.get(&quot;id&quot;);">1131                                                 Path y = split.length &gt; 1 ? root.get(split[0]).get(&quot;id&quot;) ðŸ”µ</abbr></span>
<span class="3537025732073223017" onmouseenter="enter('3537025732073223017');" onmouseout="out('3537025732073223017');" style=""><abbr title="1132                                                 Predicate entityId = builder.equal(transRoot.get(&quot;entityId&quot;),">1132                                                 Predicate entityId = builder.equal(transRoot.get(&quot;entityIðŸ”µ</abbr></span>
<span class="6748376930371571444" onmouseenter="enter('6748376930371571444');" onmouseout="out('6748376930371571444');" style="">1133                                                         y);                                              </span>
<span class="-251672589130318843" onmouseenter="enter('-251672589130318843');" onmouseout="out('-251672589130318843');" style="">1134                                                 if (localeValues.size() &gt; 0) {                           </span>
<span class="-6685004596412549337" onmouseenter="enter('-6685004596412549337');" onmouseout="out('-6685004596412549337');" style=""><abbr title="1135                                                     subquery.where(builder.and(type, entityId, transValue, name, localeValue));">1135                                                     subquery.where(builder.and(type, entityId, transValueðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1136                                                 } else {                                                 </span>
<span class="7320091577548075010" onmouseenter="enter('7320091577548075010');" onmouseout="out('7320091577548075010');" style=""><abbr title="1137                                                     subquery.where(builder.and(type, entityId, transValue, name));">1137                                                     subquery.where(builder.and(type, entityId, transValueðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138                                                 }                                                        </span>
<span  style="">1139                                                                                                          </span>
<span class="-8479552588770286801" onmouseenter="enter('-8479552588770286801');" onmouseout="out('-8479552588770286801');" style="">1140                                                 Predicate like = builder.like(x,                         </span>
<span class="2624583196561559460" onmouseenter="enter('2624583196561559460');" onmouseout="out('2624583196561559460');" style="">1141                                                         likeValue);                                      </span>
<span class="-3685673007027368665" onmouseenter="enter('-3685673007027368665');" onmouseout="out('-3685673007027368665');" style=""><abbr title="1142                                                 Predicate predicate = builder.or(like, builder.greaterThan(subquery, 0));">1142                                                 Predicate predicate = builder.or(like, builder.greaterThaðŸ”µ</abbr></span>
<span class="-7893760688546432215" onmouseenter="enter('-7893760688546432215');" onmouseout="out('-7893760688546432215');" style="">1143                                                 return predicate;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144                                             }                                                            </span>
<span class="-2540327120317221694" onmouseenter="enter('-2540327120317221694');" onmouseout="out('-2540327120317221694');" style="">1145                                         })));                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147                 }                                                                                        </span>
<span class="-6340274589575485740" onmouseenter="enter('-6340274589575485740');" onmouseout="out('-6340274589575485740');" style="">1148                 System.out.println(&quot;&quot;);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151     }                                                                                                    </span>
<span  style="">1152                                                                                                          </span>
<span class="490380134896946780" onmouseenter="enter('490380134896946780');" onmouseout="out('490380134896946780');" style="">1153     private String getTranslationFriendlyType(String targetClass) {                                      </span>
<span  style="">1154                                                                                                          </span>
<span class="6841703832389938731" onmouseenter="enter('6841703832389938731');" onmouseout="out('6841703832389938731');" style="">1155         TranslatedEntity instance = TranslatedEntity.getInstance(targetClass);                           </span>
<span class="-2802766618581615140" onmouseenter="enter('-2802766618581615140');" onmouseout="out('-2802766618581615140');" style="">1156         if (instance == null) {                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1157             try {                                                                                        </span>
<span class="-7525038970859272648" onmouseenter="enter('-7525038970859272648');" onmouseout="out('-7525038970859272648');" style="">1158                 Class&lt;?&gt;[] interfaces = Class.forName(targetClass).getInterfaces();                      </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="">1159                 int i = 0;                                                                               </span>
<span class="-6186732733724103268" onmouseenter="enter('-6186732733724103268');" onmouseout="out('-6186732733724103268');" style="">1160                 while (instance == null &amp;&amp; i &lt; interfaces.length) {                                      </span>
<span class="-2054172541787751148" onmouseenter="enter('-2054172541787751148');" onmouseout="out('-2054172541787751148');" style="">1161                     instance = TranslatedEntity.getInstance(interfaces[i].getName());                    </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style="">1162                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">1164             } catch (ClassNotFoundException e) {                                                         </span>
<span  style="">1165                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1167         }                                                                                                </span>
<span  style="">1168                                                                                                          </span>
<span class="-7268340201557725928" onmouseenter="enter('-7268340201557725928');" onmouseout="out('-7268340201557725928');" style="">1169         return instance == null ? null : instance.getFriendlyType();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170     }                                                                                                    </span>
<span  style="">1171                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1172     @Override                                                                                            </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1173     public Integer getTotalRecords(FetchRequest fetchRequest) {                                          </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1174         return fetchWrapper.getTotalRecords(fetchRequest);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175     }                                                                                                    </span>
<span  style="">1176                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1177     @Override                                                                                            </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1178     public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1179         try {                                                                                            </span>
<span class="779760690581428066" onmouseenter="enter('779760690581428066');" onmouseout="out('779760690581428066');" style=""><abbr title="1180             return ((Long) (criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings).getSingleResult())).intValue();">1180             return ((Long) (criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDaoðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1181         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1182             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1182             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="301817421820724152" onmouseenter="enter('301817421820724152');" onmouseout="out('301817421820724152');" style=""><abbr title="1183             return ((Long) (builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult())).intValue();">1183             return ((Long) (builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandarðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185     }                                                                                                    </span>
<span  style="">1186                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1187     @Override                                                                                            </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style=""><abbr title="1188     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {">1188     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxFðŸ”µ</abbr></span>
<span class="793889105442484323" onmouseenter="enter('793889105442484323');" onmouseout="out('793889105442484323');" style=""><abbr title="1189         return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, maxField).getSingleResult();">1189         return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(), ceilingEntiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190     }                                                                                                    </span>
<span  style="">1191                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1192     @Override                                                                                            </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1193     public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                          </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1194         return fetchWrapper.getPersistentRecords(fetchRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195     }                                                                                                    </span>
<span  style="">1196                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1197     @Override                                                                                            </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1198     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1198     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappinðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1199         try {                                                                                            </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1200             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1200             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1201         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1202             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1202             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1203             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1203             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManagerðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205     }                                                                                                    </span>
<span  style="">1206                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1207     @Override                                                                                            </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1208     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1208     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1209         return validate(entity, populatedInstance, mergedProperties, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210     }                                                                                                    </span>
<span  style="">1211                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1212     @Override                                                                                            </span>
<span class="729304134647630610" onmouseenter="enter('729304134647630610');" onmouseout="out('729304134647630610');" style=""><abbr title="1213     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties, boolean validateUnsubmittedProperties) {">1213     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1214         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1214         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1215         return !entity.isValidationFailure();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216     }                                                                                                    </span>
<span  style="">1217                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1218     @Override                                                                                            </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1219     public void setPersistenceManager(PersistenceManager persistenceManager) {                           </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1220         this.persistenceManager = persistenceManager;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221     }                                                                                                    </span>
<span  style="">1222                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1223     @Override                                                                                            </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1224     public PersistenceModule getCompatibleModule(OperationType operationType) {                          </span>
<span class="-7427303697741971710" onmouseenter="enter('-7427303697741971710');" onmouseout="out('-7427303697741971710');" style="">1225         return ((InspectHelper) (persistenceManager)).getCompatibleModule(operationType);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226     }                                                                                                    </span>
<span  style="">1227                                                                                                          </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1228     public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                               </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1229         return defaultFieldPersistenceProvider;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230     }                                                                                                    </span>
<span  style="">1231                                                                                                          </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style=""><abbr title="1232     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {">1232     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvidðŸ”µ</abbr></span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1233         this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234     }                                                                                                    </span>
<span  style="">1235                                                                                                          </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1236     public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                               </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1237         return fieldPersistenceProviders;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1238     }                                                                                                    </span>
<span  style="">1239                                                                                                          </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1240     public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) { </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1241         this.fieldPersistenceProviders = fieldPersistenceProviders;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242     }                                                                                                    </span>
<span  style="">1243                                                                                                          </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1244     public CriteriaTranslator getCriteriaTranslator() {                                                  </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1245         return criteriaTranslator;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246     }                                                                                                    </span>
<span  style="">1247                                                                                                          </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1248     public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                           </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1249         this.criteriaTranslator = criteriaTranslator;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1250     }                                                                                                    </span>
<span  style="">1251                                                                                                          </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1252     public EntityValidatorService getEntityValidatorService() {                                          </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1253         return entityValidatorService;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254     }                                                                                                    </span>
<span  style="">1255                                                                                                          </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1256     public void setEntityValidatorService(EntityValidatorService entityValidatorService) {               </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1257         this.entityValidatorService = entityValidatorService;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258     }                                                                                                    </span>
<span  style="">1259                                                                                                          </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1260     public RestrictionFactory getRestrictionFactory() {                                                  </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1261         return restrictionFactory;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262     }                                                                                                    </span>
<span  style="">1263                                                                                                          </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1264     public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                           </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1265         this.restrictionFactory = restrictionFactory;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266     }                                                                                                    </span>
<span  style="">1267                                                                                                          </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1268     public PersistenceManager getPersistenceManager() {                                                  </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1269         return persistenceManager;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270     }                                                                                                    </span>
<span  style="">1271                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1272     /**                                                                                                  </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1273      * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1273      * Use an alternate approach to generating a fetch query for a collection located inside of an @EmbedðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1274      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1274      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather thðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1275      * which seems to alleviate the problem.                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1276      *                                                                                                   </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1277      * @param embeddedCollectionPath the path to the collection field itself                             </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1278      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1279      * @param collectionClass the type of the collection members                                         </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1280      * @return the builder capable of generating an appropriate HQL query                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1281      */                                                                                                  </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1282     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1282     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1283         String specialPath = embeddedCollectionPath.getTargetProperty();                                 </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1284         String[] pieces = specialPath.split(&quot;\\.&quot;);                                                      </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1285         if (pieces.length != 3) {                                                                        </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1286             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1286             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of foðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287         }                                                                                                </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1288         String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                      </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1289         TypedQueryBuilder builder;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1290         try {                                                                                            </span>
<span class="-3418087850184102775" onmouseenter="enter('-3418087850184102775');" onmouseout="out('-3418087850184102775');" style=""><abbr title="1291             builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;).addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));">1291             builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;).addJoin(new ðŸ”µ</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1292         } catch (java.lang.Exception e) {                                                                </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1293             throw ExceptionHelper.refineException(e);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294         }                                                                                                </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1295         for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {         </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1296             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297         }                                                                                                </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style=""><abbr title="1298         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {">1298         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappingsðŸ”µ</abbr></span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1299             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300         }                                                                                                </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1301         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1302             if (mapping.getSortDirection() != null) {                                                    </span>
<span class="-1365516568891359032" onmouseenter="enter('-1365516568891359032');" onmouseout="out('-1365516568891359032');" style=""><abbr title="1303                 String mappingProperty = (mapping.getFieldPath() == null) ? null : mapping.getFieldPath().getTargetProperty();">1303                 String mappingProperty = (mapping.getFieldPath() == null) ? null : mapping.getFieldPath()ðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1304                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1305                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306                 }                                                                                        </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1307                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1307                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309         }                                                                                                </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1310         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311     }                                                                                                    </span>
<span  style="">1312                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1313     /**                                                                                                  </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1314      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1314      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not theðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1315      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1316      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1316      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1317      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1317      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this iðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1318      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1319      * @return the list of restrictions on the root entity                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1320      */                                                                                                  </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1321     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1321     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1322         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1322         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPatðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1323         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1324         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="4178758118598554907" onmouseenter="enter('4178758118598554907');" onmouseout="out('4178758118598554907');" style="">1325             checkProperty : {                                                                            </span>
<span class="-1365516568891359032" onmouseenter="enter('-1365516568891359032');" onmouseout="out('-1365516568891359032');" style=""><abbr title="1326                 String mappingProperty = (mapping.getFieldPath() == null) ? null : mapping.getFieldPath().getTargetProperty();">1326                 String mappingProperty = (mapping.getFieldPath() == null) ? null : mapping.getFieldPath()ðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1327                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1328                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329                 }                                                                                        </span>
<span class="3246436473353089511" onmouseenter="enter('3246436473353089511');" onmouseout="out('3246436473353089511');" style=""><abbr title="1330                 if ((!embeddedCollectionPath.getTargetProperty().equals(mappingProperty)) &amp;&amp; (!StringUtils.isEmpty(mappingProperty))) {">1330                 if ((!embeddedCollectionPath.getTargetProperty().equals(mappingProperty)) &amp;&amp; (!StringUtilðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style=""><abbr title="1331                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();">1331                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider()ðŸ”µ</abbr></span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1332                     if (predicateProvider != null) {                                                     </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style=""><abbr title="1333                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();">1333                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverterðŸ”µ</abbr></span>
<span class="2828712592765886814" onmouseenter="enter('2828712592765886814');" onmouseout="out('2828712592765886814');" style=""><abbr title="1334                         if ((converter != null) &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {">1334                         if ((converter != null) &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues()))ðŸ”µ</abbr></span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1335                             Object val = converter.convert(mapping.getFilterValues().get(0));            </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1336                             if (predicateProvider instanceof LikePredicateProvider) {                    </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1337                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1337                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1338                                 break checkProperty;                                                     </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1339                             } else if (predicateProvider instanceof EqPredicateProvider) {               </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style=""><abbr title="1340                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));">1340                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=ðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1341                                 break checkProperty;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1342                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344                     }                                                                                    </span>
<span class="7092560648886274919" onmouseenter="enter('7092560648886274919');" onmouseout="out('7092560648886274919');" style=""><abbr title="1345                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;, StringUtil.sanitize(expression), StringUtil.sanitize(mappingProperty)));">1345                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additionaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1346                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348         }                                                                                                </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1349         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1350     }                                                                                                    </span>
<span  style="">1351                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1352     /**                                                                                                  </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1353      * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1353      * Generate EQUALS restrictions for any filter property specified on the entity member of the collectðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1354      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1355      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1355      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1356      * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1356      * @param specialExpression the String representation of the path for the collection field in the @EmðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1357      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1358      * @return the list of restrictions on the collection in the @Embeddable object                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1359      */                                                                                                  </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1360     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1360     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1361         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1362         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-5273458843713330250" onmouseenter="enter('-5273458843713330250');" onmouseout="out('-5273458843713330250');" style=""><abbr title="1363             if (((mapping.getFieldPath() != null) &amp;&amp; (mapping.getFieldPath().getTargetProperty() != null)) &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1363             if (((mapping.getFieldPath() != null) &amp;&amp; (mapping.getFieldPath().getTargetProperty() != null)ðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1364                 FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();     </span>
<span class="2828712592765886814" onmouseenter="enter('2828712592765886814');" onmouseout="out('2828712592765886814');" style="">1365                 if ((converter != null) &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {      </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1366                     Object val = converter.convert(mapping.getFilterValues().get(0));                    </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1367                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1367                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1368                     restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371         }                                                                                                </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1372         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373     }                                                                                                    </span>
<span  style="">1374                                                                                                          </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1375     protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {</span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1376         //Remove the entity from ORM management - no further attempts to persist                         </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style=""><abbr title="1377         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {">1377         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) ðŸ”µ</abbr></span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1378             getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379         }                                                                                                </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1380         //Remove the id field value, if it&#x27;s set                                                         </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1381         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1381         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instancðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1382         Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                     </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1383         if (idField == null) {                                                                           </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1384             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1384             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385         }                                                                                                </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1386         idField.setAccessible(true);                                                                     </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1387         if (idField.get(instance) != null) {                                                             </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1388             idField.set(instance, null);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1390     }                                                                                                    </span>
<span  style="">1391                                                                                                          </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style=""><abbr title="1392     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {">1392     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property propertðŸ”µ</abbr></span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1393         Class&lt;?&gt; returnType = null;                                                                      </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1394         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1394         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, propertyðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1395         java.lang.reflect.Type type = field.getGenericType();                                            </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1396         if (type instanceof ParameterizedType) {                                                         </span>
<span class="-6709038845954129207" onmouseenter="enter('-6709038845954129207');" onmouseout="out('-6709038845954129207');" style="">1397             ParameterizedType pType = ((ParameterizedType) (type));                                      </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1398             Class&lt;?&gt; clazz;                                                                              </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1399             if (pType.getActualTypeArguments().length &lt; 2) {                                             </span>
<span class="3405725510929758931" onmouseenter="enter('3405725510929758931');" onmouseout="out('3405725510929758931');" style="">1400                 clazz = ((Class&lt;?&gt;) (pType.getActualTypeArguments()[0]));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1401             } else {                                                                                     </span>
<span class="-5796622521841635218" onmouseenter="enter('-5796622521841635218');" onmouseout="out('-5796622521841635218');" style="">1402                 clazz = ((Class&lt;?&gt;) (pType.getActualTypeArguments()[1]));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403             }                                                                                            </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1404             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1404             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1405             if (!ArrayUtils.isEmpty(entities)) {                                                         </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1406                 returnType = entities[entities.length - 1];                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408         }                                                                                                </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1409         return returnType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411 }                                                                                                        </span>































































































































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span  style="">  18                                                                                                                    </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  19  package org.broadleafcommerce.openadmin.server.service.persistence.module;                                        </span>
<span  style="">  20                                                                                                                    </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  21  import org.apache.commons.beanutils.PropertyUtils;                                                                </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  22  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  23  import org.apache.commons.lang.ArrayUtils;                                                                        </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  24  import org.apache.commons.lang.StringUtils;                                                                       </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  25  import org.apache.commons.lang3.BooleanUtils;                                                                     </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  26  import org.apache.commons.lang3.reflect.FieldUtils;                                                               </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  27  import org.apache.commons.lang3.reflect.MethodUtils;                                                              </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  28  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  29  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  30  import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                                 </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  31  import org.broadleafcommerce.common.exception.ExceptionHelper;                                                    </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  32  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  33  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  34  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>



<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  35  import org.broadleafcommerce.common.money.Money;                                                                  </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  36  import org.broadleafcommerce.common.presentation.client.OperationType;                                            </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  37  import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                           </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  38  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  39  import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                           </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  40  import org.broadleafcommerce.common.util.FormatUtil;                                                              </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  41  import org.broadleafcommerce.common.util.StringUtil;                                                              </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  42  import org.broadleafcommerce.common.util.ValidationUtil;                                                          </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  43  import org.broadleafcommerce.common.util.dao.TQJoin;                                                              </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  44  import org.broadleafcommerce.common.util.dao.TQOrder;                                                             </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  45  import org.broadleafcommerce.common.util.dao.TQRestriction;                                                       </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  46  import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                                   </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  48 -import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-8970007776478821592" onmouseenter="enter('-8970007776478821592');" onmouseout="out('-8970007776478821592');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  49 -import org.broadleafcommerce.openadmin.dto.CriteriaTransferObject;                                                </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  50 -import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  51 -import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-3504337137222904883" onmouseenter="enter('-3504337137222904883');" onmouseout="out('-3504337137222904883');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  52 -import org.broadleafcommerce.openadmin.dto.EntityResult;                                                          </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  53 -import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  54 -import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                                 </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  55 -import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                            </span>
<span class="7333603239996951733" onmouseenter="enter('7333603239996951733');" onmouseout="out('7333603239996951733');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  56 -import org.broadleafcommerce.openadmin.dto.MergedPropertyType;                                                    </span>
<span class="5387066876064049952" onmouseenter="enter('5387066876064049952');" onmouseout="out('5387066876064049952');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  57 -import org.broadleafcommerce.openadmin.dto.PersistencePackage;                                                    </span>
<span class="8079401142601162613" onmouseenter="enter('8079401142601162613');" onmouseout="out('8079401142601162613');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  58 -import org.broadleafcommerce.openadmin.dto.PersistencePerspective;                                                </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  59 -import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="-3940598810559639452" onmouseenter="enter('-3940598810559639452');" onmouseout="out('-3940598810559639452');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  60 -import org.broadleafcommerce.openadmin.dto.SortDirection;                                                         </span>
<span class="-9032655456699873894" onmouseenter="enter('-9032655456699873894');" onmouseout="out('-9032655456699873894');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +import org.broadleafcommerce.openadmin.dto.*;                                                                     </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style="">  62  import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;      </span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  63  import org.broadleafcommerce.openadmin.server.service.ValidationException;                                        </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  64  import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;               </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  65  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                           </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  66  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                             </span>
<span class="-1323272794227318551" onmouseenter="enter('-1323272794227318551');" onmouseout="out('-1323272794227318551');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  67 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaConversionException;    </span>
<span class="-4125327013079009203" onmouseenter="enter('-4125327013079009203');" onmouseout="out('-4125327013079009203');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaTranslator;             </span>
<span class="7637154476457570035" onmouseenter="enter('7637154476457570035');" onmouseout="out('7637154476457570035');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  69 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath;                      </span>

<span class="7520439988643323618" onmouseenter="enter('7520439988643323618');" onmouseout="out('7520439988643323618');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  70 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FilterMapping;                  </span>

<span class="-4250688222066528552" onmouseenter="enter('-4250688222066528552');" onmouseout="out('-4250688222066528552');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  71 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.RestrictionFactory;             </span>
<span class="5058784187408591906" onmouseenter="enter('5058784187408591906');" onmouseout="out('5058784187408591906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.*;                              </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style="">  73  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter; </span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style="">  74  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;  </span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style="">  75  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;</span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style="">  76  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;    </span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  77  import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  77  import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style="">  78  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;       </span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  79  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  79  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequeðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style="">  80  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;</span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style="">  81  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;    </span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style="">  82  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;   </span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  83  import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;              </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style="">  84  import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;       </span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  85  import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;            </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  86  import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                              </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  87  import org.hibernate.FlushMode;                                                                                   </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  88  import org.hibernate.Session;                                                                                     </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  89  import org.springframework.beans.BeansException;                                                                  </span>

<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  90  import org.springframework.context.ApplicationContext;                                                            </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  91  import org.springframework.context.ApplicationContextAware;                                                       </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style="">  92  import org.springframework.context.annotation.Primary;                                                            </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="">  93  import org.springframework.context.annotation.Scope;                                                              </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="">  94  import org.springframework.stereotype.Component;                                                                  </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  95  import org.springframework.util.Assert;                                                                           </span>
<span  style="">  96                                                                                                                    </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  97 +import javax.annotation.PostConstruct;                                                                            </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  98 +import javax.annotation.Resource;                                                                                 </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  99  import java.io.Serializable;                                                                                      </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style=""> 100  import java.lang.reflect.Field;                                                                                   </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style=""> 101  import java.lang.reflect.InvocationTargetException;                                                               </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style=""> 102  import java.lang.reflect.Method;                                                                                  </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style=""> 103  import java.lang.reflect.ParameterizedType;                                                                       </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 104  import java.math.BigDecimal;                                                                                      </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style=""> 105  import java.sql.Timestamp;                                                                                        </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style=""> 106  import java.text.DecimalFormat;                                                                                   </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style=""> 107  import java.text.NumberFormat;                                                                                    </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 108  import java.text.SimpleDateFormat;                                                                                </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 109 -import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 110 -import java.util.Arrays;                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 111 -import java.util.Calendar;                                                                                        </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 112 -import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 113 -import java.util.Collections;                                                                                     </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 114 -import java.util.Comparator;                                                                                      </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 115 -import java.util.Date;                                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 116 -import java.util.HashMap;                                                                                         </span>

<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 117 -import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 118 -import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 119 -import java.util.Map;                                                                                             </span>
<span class="196713859697444637" onmouseenter="enter('196713859697444637');" onmouseout="out('196713859697444637');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +import java.util.*;                                                                                               </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 121  import java.util.Map.Entry;                                                                                       </span>
<span class="-61738751204335518" onmouseenter="enter('-61738751204335518');" onmouseout="out('-61738751204335518');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 122 -import java.util.StringTokenizer;                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 123 -                                                                                                                  </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 124 -import javax.annotation.PostConstruct;                                                                            </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 125 -import javax.annotation.Resource;                                                                                 </span>






<span  style=""> 126                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 127  /**                                                                                                               </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style=""> 128   * @author jfischer                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 129   */                                                                                                               </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style=""> 130  @Primary                                                                                                          </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style=""> 131  @Component(&quot;blBasicPersistenceModule&quot;)                                                                            </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style=""> 132  @Scope(&quot;prototype&quot;)                                                                                               </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style=""> 133  public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {         </span>
<span  style=""> 134                                                                                                                    </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 135      private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                               </span>
<span  style=""> 136                                                                                                                    </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 137      public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 138      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span  style=""> 139                                                                                                                    </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 140      protected ApplicationContext applicationContext;                                                              </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 141      protected PersistenceManager persistenceManager;                                                              </span>
<span  style=""> 142                                                                                                                    </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 143      @Resource(name = &quot;blEntityValidatorService&quot;)                                                                  </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 144      protected EntityValidatorService entityValidatorService;                                                      </span>
<span  style=""> 145                                                                                                                    </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 146      @Resource(name = &quot;blPersistenceProviders&quot;)                                                                    </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 147      protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 147      protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;()ðŸ”µ</abbr></span>
<span  style=""> 148                                                                                                                    </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 149      @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                          </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 150      protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                             </span>
<span  style=""> 151                                                                                                                    </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 152      @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                         </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 153      protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                           </span>
<span  style=""> 154                                                                                                                    </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 155      @Resource(name = &quot;blCriteriaTranslator&quot;)                                                                      </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 156      protected CriteriaTranslator criteriaTranslator;                                                              </span>
<span  style=""> 157                                                                                                                    </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 158      @Resource(name = &quot;blRestrictionFactory&quot;)                                                                      </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 159      protected RestrictionFactory restrictionFactory;                                                              </span>
<span  style=""> 160                                                                                                                    </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 161      @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                                  </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 162      protected BasicPersistenceModuleExtensionManager extensionManager;                                            </span>
<span  style=""> 163                                                                                                                    </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 164      @Resource(name = &quot;blFetchWrapper&quot;)                                                                            </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 165      protected FetchWrapper fetchWrapper;                                                                          </span>






<span  style=""> 166                                                                                                                    </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 167      @PostConstruct                                                                                                </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 168      public void init() {                                                                                          </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 169          Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {                  </span>
<span  style=""> 170                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171              @Override                                                                                             </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 172              public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {                        </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 173                  return Integer.compare(o1.getOrder(), o2.getOrder());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 175          });                                                                                                       </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 176          Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {                    </span>
<span  style=""> 177                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 178              @Override                                                                                             </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 179              public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {              </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 180                  return Integer.compare(o1.getOrder(), o2.getOrder());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 182          });                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183      }                                                                                                             </span>
<span  style=""> 184                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 185      @Override                                                                                                     </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 186      public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {              </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 187          this.applicationContext = applicationContext;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188      }                                                                                                             </span>
<span  style=""> 189                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190      @Override                                                                                                     </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 191      public boolean isCompatible(OperationType operationType) {                                                    </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""> 192          return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193      }                                                                                                             </span>
<span  style=""> 194                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 195      @Override                                                                                                     </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 196      public FieldManager getFieldManager() {                                                                       </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 197          return persistenceManager.getDynamicEntityDao().getFieldManager();                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198      }                                                                                                             </span>
<span  style=""> 199                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 200      @Override                                                                                                     </span>
<span class="6457346333778015301" onmouseenter="enter('6457346333778015301');" onmouseout="out('6457346333778015301');" style=""> 201      public FieldManager getFieldManager(boolean cleanFieldManger) {                                               </span>
<span class="-7823051609966781187" onmouseenter="enter('-7823051609966781187');" onmouseout="out('-7823051609966781187');" style=""> 202          return persistenceManager.getDynamicEntityDao().getFieldManager(cleanFieldManger);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203      }                                                                                                             </span>
<span  style=""> 204                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 205      @Override                                                                                                     </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 206      public DecimalFormat getDecimalFormatter() {                                                                  </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 207          BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();                       </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 208          Locale locale = brc.getJavaLocale();                                                                      </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 209          DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                                  </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 210          format.applyPattern(&quot;0.########&quot;);                                                                        </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 211          format.setGroupingUsed(false);                                                                            </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 212          return format;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213      }                                                                                                             </span>
<span  style=""> 214                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 215      @Override                                                                                                     </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 216      public SimpleDateFormat getSimpleDateFormatter() {                                                            </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 217          return FormatUtil.getDateFormat();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218      }                                                                                                             </span>
<span  style=""> 219                                                                                                                    </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""> 220      protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {       </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 221          if (metadata == null) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 222              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223          }                                                                                                         </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 224          Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                                 </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 225          for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                                      </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 226              String fieldName = entry.getKey();                                                                    </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 227              FieldMetadata md = entry.getValue();                                                                  </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 228              // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 228              // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but alsðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 229              // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 229              // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 230              // can appropriate handle filtration and population                                                   </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 231              if (entry.getValue() instanceof BasicFieldMetadata) {                                                 </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 232                  newMap.put(fieldName, md);                                                                        </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 233              } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 233              } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ðŸ”µ</abbr></span>
<span class="-8485840589316329792" onmouseenter="enter('-8485840589316329792');" onmouseout="out('-8485840589316329792');" style=""> 234                  newMap.put(fieldName,                                                                             </span>
<span class="-7674878801561950856" onmouseenter="enter('-7674878801561950856');" onmouseout="out('-7674878801561950856');" style=""><abbr title=" 235                          (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY));"> 235                          (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvideðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237          }                                                                                                         </span>
<span  style=""> 238                                                                                                                    </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 239          return newMap;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240      }                                                                                                             </span>
<span  style=""> 241                                                                                                                    </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 242      protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                                      </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 243          Class&lt;?&gt; response;                                                                                        </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 244          switch (fieldType) {                                                                                      </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 245              case BOOLEAN:                                                                                         </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 246                  response = Boolean.TYPE;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 247                  break;                                                                                            </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 248              case DATE:                                                                                            </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 249                  response = Date.class;                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 250                  break;                                                                                            </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 251              case DECIMAL:                                                                                         </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 252                  response = BigDecimal.class;                                                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 253                  break;                                                                                            </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 254              case MONEY:                                                                                           </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 255                  response = Money.class;                                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 256                  break;                                                                                            </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 257              case INTEGER:                                                                                         </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 258                  response = Integer.TYPE;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 259                  break;                                                                                            </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 260              case UNKNOWN:                                                                                         </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 261                  response = null;                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 262                  break;                                                                                            </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 263              default:                                                                                              </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 264                  response = String.class;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 265                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266          }                                                                                                         </span>
<span  style=""> 267                                                                                                                    </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 268          return response;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269      }                                                                                                             </span>
<span  style=""> 270                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 271      @Override                                                                                                     </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 272      public Serializable createPopulatedInstance(Serializable instance, Entity entity,                             </span>
<span class="7620597898847416584" onmouseenter="enter('7620597898847416584');" onmouseout="out('7620597898847416584');" style=""> 273              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException {          </span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 274          return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275      }                                                                                                             </span>
<span  style=""> 276                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 277      @Override                                                                                                     </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 278      public Serializable createPopulatedInstance(Serializable instance, Entity entity,                             </span>
<span class="-6938882731089232507" onmouseenter="enter('-6938882731089232507');" onmouseout="out('-6938882731089232507');" style=""><abbr title=" 279              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 279              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties)ðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""> 280          final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);    </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 281          FieldManager fieldManager = getFieldManager();                                                            </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 282          boolean handled = false;                                                                                  </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 283          for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {                     </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 284              MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 284              MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 285              if (MetadataProviderResponse.NOT_HANDLED != response) {                                               </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 286                  handled = true;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287              }                                                                                                     </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 288              if (MetadataProviderResponse.HANDLED_BREAK == response) {                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 289                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291          }                                                                                                         </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 292          if (!handled) {                                                                                           </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 293              defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 293              defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294          }                                                                                                         </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 295          //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 295          //Order media field, map field and rule builder fields last, as they will have some validation components ðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 296          Property[] sortedProperties = entity.getProperties();                                                     </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 297          Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                                </span>
<span  style=""> 298                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 299              @Override                                                                                             </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 300              public int compare(Property o1, Property o2) {                                                        </span>
<span class="4801041391951231473" onmouseenter="enter('4801041391951231473');" onmouseout="out('4801041391951231473');" style=""> 301                  BasicFieldMetadata mo1 = (BasicFieldMetadata) mergedProperties.get(o1.getName());                 </span>
<span class="8712312491906706674" onmouseenter="enter('8712312491906706674');" onmouseout="out('8712312491906706674');" style=""> 302                  BasicFieldMetadata mo2 = (BasicFieldMetadata) mergedProperties.get(o2.getName());                 </span>
<span class="5597729834250389465" onmouseenter="enter('5597729834250389465');" onmouseout="out('5597729834250389465');" style=""><abbr title=" 303                  boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo1.getFieldType() ||"> 303                  boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedðŸ”µ</abbr></span>
<span class="-5228840553210193176" onmouseenter="enter('-5228840553210193176');" onmouseout="out('-5228840553210193176');" style=""> 304                          SupportedFieldType.RULE_WITH_QUANTITY==mo1.getFieldType() ||                              </span>
<span class="-2825740162482404988" onmouseenter="enter('-2825740162482404988');" onmouseout="out('-2825740162482404988');" style=""> 305                          SupportedFieldType.RULE_SIMPLE_TIME==mo1.getFieldType() ||                                </span>
<span class="-2758640436691235457" onmouseenter="enter('-2758640436691235457');" onmouseout="out('-2758640436691235457');" style=""><abbr title=" 306                          SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 306                          SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELðŸ”µ</abbr></span>
<span class="4460185052151715074" onmouseenter="enter('4460185052151715074');" onmouseout="out('4460185052151715074');" style=""><abbr title=" 307                  boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo2.getFieldType() ||"> 307                  boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedðŸ”µ</abbr></span>
<span class="1101038090453452590" onmouseenter="enter('1101038090453452590');" onmouseout="out('1101038090453452590');" style=""> 308                          SupportedFieldType.RULE_WITH_QUANTITY==mo2.getFieldType() ||                              </span>
<span class="-8197603398477948159" onmouseenter="enter('-8197603398477948159');" onmouseout="out('-8197603398477948159');" style=""> 309                          SupportedFieldType.RULE_SIMPLE_TIME==mo2.getFieldType() ||                                </span>
<span class="-275758415706895485" onmouseenter="enter('-275758415706895485');" onmouseout="out('-275758415706895485');" style=""><abbr title=" 310                          SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 310                          SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELðŸ”µ</abbr></span>
<span class="-2026914999367619686" onmouseenter="enter('-2026914999367619686');" onmouseout="out('-2026914999367619686');" style=""> 311                  if (isLate1 &amp;&amp; !isLate2) {                                                                        </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 312                      return 1;                                                                                     </span>
<span class="-3681644454129428558" onmouseenter="enter('-3681644454129428558');" onmouseout="out('-3681644454129428558');" style=""> 313                  } else if (!isLate1 &amp;&amp; isLate2) {                                                                 </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 314                      return -1;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                  }                                                                                                 </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 316                  return 0;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 318          });                                                                                                       </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 319          Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 319          Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.ðŸ”µ</abbr></span>
<span class="2352236362444167215" onmouseenter="enter('2352236362444167215');" onmouseout="out('2352236362444167215');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 320 -        FlushMode originalFlushMode = session.getFlushMode();                                                     </span>
<span class="5994630726155221613" onmouseenter="enter('5994630726155221613');" onmouseout="out('5994630726155221613');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 321 +        FlushMode originalFlushMode = session.getHibernateFlushMode();                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 322          try {                                                                                                     </span>
<span class="-20881645087342177" onmouseenter="enter('-20881645087342177');" onmouseout="out('-20881645087342177');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 323 -            session.setFlushMode(FlushMode.MANUAL);                                                               </span>
<span class="5642929065352278415" onmouseenter="enter('5642929065352278415');" onmouseout="out('5642929065352278415');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 324 +            session.setHibernateFlushMode(FlushMode.MANUAL);                                                      </span>
<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 325              RuntimeException entityPersistenceException = null;                                                   </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 326              for (Property property : sortedProperties) {                                                          </span>
<span class="1357949122558141334" onmouseenter="enter('1357949122558141334');" onmouseout="out('1357949122558141334');" style=""> 327                  BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName());      </span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 328                  Class&lt;?&gt; returnType;                                                                              </span>
<span class="8439611434668123958" onmouseenter="enter('8439611434668123958');" onmouseout="out('8439611434668123958');" style=""><abbr title=" 329                  if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWith(&quot;__&quot;)) {"> 329                  if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWithðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 330                      Field field = fieldManager.getField(instance.getClass(), property.getName());                 </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 331                      if (field == null) {                                                                          </span>
<span class="2139581581669054854" onmouseenter="enter('2139581581669054854');" onmouseout="out('2139581581669054854');" style=""><abbr title=" 332                          LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 332                          LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitiðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 333                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                      }                                                                                             </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 335                      returnType = field.getType();                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 336                  } else {                                                                                          </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 337                      if (metadata == null) {                                                                       </span>
<span class="8114946394939525604" onmouseenter="enter('8114946394939525604');" onmouseout="out('8114946394939525604');" style=""><abbr title=" 338                          LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 338                          LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.saðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 339                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340                      }                                                                                             </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 341                      returnType = getMapFieldType(instance, fieldManager, property);                               </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 342                      if (returnType == null) {                                                                     </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 343                          returnType = getBasicBroadleafType(metadata.getFieldType());                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345                  }                                                                                                 </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 346                  if (returnType == null) {                                                                         </span>
<span class="8716882681587381997" onmouseenter="enter('8716882681587381997');" onmouseout="out('8716882681587381997');" style=""><abbr title=" 347                      throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + property.getName() + &quot;)&quot;);"> 347                      throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + proðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348                  }                                                                                                 </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 349                  String value = property.getValue();                                                               </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 350                  if (metadata != null) {                                                                           </span>
<span  style=""> 351                                                                                                                    </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 352                      if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                             </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 353                          if (value == null) {                                                                      </span>
<span class="3558706163819897442" onmouseenter="enter('3558706163819897442');" onmouseout="out('3558706163819897442');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 354 -                            value = &quot;false&quot;;                                                                      </span>
<span class="-8520936090313964890" onmouseenter="enter('-8520936090313964890');" onmouseout="out('-8520936090313964890');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 355 +                            String defaultValue = metadata.getDefaultValue();                                     </span>
<span class="-7748715783254025298" onmouseenter="enter('-7748715783254025298');" onmouseout="out('-7748715783254025298');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 356 +                            value = StringUtils.isBlank(defaultValue)? &quot;false&quot; : defaultValue;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                          }                                                                                         </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 358                      } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                         </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 359                          if (StringUtils.isEmpty(value)) {                                                         </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 360                              value = null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362                      }                                                                                             </span>
<span  style=""> 363                                                                                                                    </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 364                      if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 364                      if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 365                          boolean isValid = true;                                                                   </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 366                          PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 366                          PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 367                          handled = false;                                                                          </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 368                          if (value != null) {                                                                      </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 369                              for (PopulateValueRequestValidator validator : populateValidators) {                  </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""> 370                                  PropertyValidationResult validationResult = validator.validate(request, instance);</span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 371                                  if (!validationResult.isValid()) {                                                </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 372                                      entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 372                                      entity.addValidationError(property.getName(), validationResult.getErrorMessageðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 373                                      isValid = false;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376                          }                                                                                         </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 377                          if (isValid) {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 378                              try {                                                                                 </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 379                                  boolean isBreakDetected = false;                                                  </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 380                                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 380                                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvidersðŸ”µ</abbr></span>
<span class="-2175392382273122455" onmouseenter="enter('-2175392382273122455');" onmouseout="out('-2175392382273122455');" style=""><abbr title=" 381                                      if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {"> 381                                      if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != nuðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 382                                          MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 382                                          MetadataProviderResponse response = fieldPersistenceProvider.populateValueðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 383                                          if (MetadataProviderResponse.NOT_HANDLED != response) {                   </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 384                                              handled = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385                                          }                                                                         </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 386                                          if (MetadataProviderResponse.HANDLED_BREAK == response) {                 </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 387                                              isBreakDetected = true;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388                                          }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390                                  }                                                                                 </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 391                                  if (!handled) {                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 392                                      if (value == null) {                                                          </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 393                                          property.setIsDirty(true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394                                      }                                                                             </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 395                                      defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 395                                      defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, ðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 396                                      if (value == null) {                                                          </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 397                                          fieldManager.setFieldValue(instance, property.getName(), null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399                                  }                                                                                 </span>
<span class="8793300741685062154" onmouseenter="enter('8793300741685062154');" onmouseout="out('8793300741685062154');" style=""> 400                              } catch (ParentEntityPersistenceException | javax.validation.ValidationException e) { </span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 401                                  entityPersistenceException = e;                                                   </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 402                                  cleanupFailedPersistenceAttempt(instance);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 403                                  break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408              }                                                                                                     </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 409              // Only check validation if not the initial add                                                       </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 410              if (!entity.isPreAdd()) {                                                                             </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 411                  validate(entity, instance, mergedProperties, validateUnsubmittedProperties);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412              }                                                                                                     </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""> 413              //if validation failed, refresh the current instance so that none of the changes will be persisted    </span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 414              if (entity.isValidationFailure()) {                                                                   </span>
<span class="-5245333264083845326" onmouseenter="enter('-5245333264083845326');" onmouseout="out('-5245333264083845326');" style=""> 415                  //only refresh the instance if it was managed to begin with                                       </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""> 416                  if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {     </span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 417                      persistenceManager.getDynamicEntityDao().refresh(instance);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                  }                                                                                                 </span>
<span  style=""> 419                                                                                                                    </span>
<span class="-2797407664577460515" onmouseenter="enter('-2797407664577460515');" onmouseout="out('-2797407664577460515');" style=""> 420                  //re-initialize the valid properties for the entity in order to deal with the potential of not    </span>
<span class="7620881433898036398" onmouseenter="enter('7620881433898036398');" onmouseout="out('7620881433898036398');" style=""> 421                  //completely sending over all checkbox/radio fields                                               </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 422                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 423                  entityList.add(instance);                                                                         </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 424                  Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];                   </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 425                  invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());                        </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 426                  invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                            </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 427                  invalid.overridePropertyValues(entity);                                                           </span>
<span  style=""> 428                                                                                                                    </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 429                  String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 429                  String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.gðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 430                  throw new ValidationException(invalid, message);                                                  </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 431              } else if (entityPersistenceException != null) {                                                      </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 432                  throw ExceptionHelper.refineException(entityPersistenceException.getCause());                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 433              } else {                                                                                              </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 434                  fieldManager.persistMiddleEntities();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435              }                                                                                                     </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 436          } catch (IllegalAccessException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 437              throw new PersistenceException(e);                                                                    </span>
<span class="6243028624057522413" onmouseenter="enter('6243028624057522413');" onmouseout="out('6243028624057522413');" style=""> 438          } catch (InstantiationException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 439              throw new PersistenceException(e);                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 440          } finally {                                                                                               </span>
<span class="6063597376304480914" onmouseenter="enter('6063597376304480914');" onmouseout="out('6063597376304480914');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 441 -            session.setFlushMode(originalFlushMode);                                                              </span>
<span class="4677599505604490897" onmouseenter="enter('4677599505604490897');" onmouseout="out('4677599505604490897');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 442 +            session.setHibernateFlushMode(originalFlushMode);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443          }                                                                                                         </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 444          return instance;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445      }                                                                                                             </span>
<span  style=""> 446                                                                                                                    </span>
<span class="461529783746476585" onmouseenter="enter('461529783746476585');" onmouseout="out('461529783746476585');" style=""> 447      protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance, </span>
<span class="3885863412641560188" onmouseenter="enter('3885863412641560188');" onmouseout="out('3885863412641560188');" style=""><abbr title=" 448                                               Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 448                                               Boolean setId, BasicFieldMetadata metadata, Entity entity, String valðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 449          Boolean mutable = metadata.getMutable();                                                                  </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 450          Boolean readOnly = metadata.getReadOnly();                                                                </span>
<span class="949029723485795199" onmouseenter="enter('949029723485795199');" onmouseout="out('949029723485795199');" style=""><abbr title=" 451          boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; property.getEnabled();"> 451          boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; propertyðŸ”µ</abbr></span>
<span  style=""> 452                                                                                                                    </span>
<span class="-5466596695953259298" onmouseenter="enter('-5466596695953259298');" onmouseout="out('-5466596695953259298');" style=""> 453          if (generalConditionsMet &amp;&amp; value == null) {                                                              </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 454              boolean currentValueIsNotNull = false;                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 455              try {                                                                                                 </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 456                  currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;         </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 457              } catch (FieldNotAvailableException e) {                                                              </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 458                  throw new IllegalArgumentException(e);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459              }                                                                                                     </span>
<span  style=""> 460                                                                                                                    </span>
<span class="2174296922893169949" onmouseenter="enter('2174296922893169949');" onmouseout="out('2174296922893169949');" style=""> 461              boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;                 </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 462              boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;                  </span>
<span  style=""> 463                                                                                                                    </span>
<span class="-802153418821632058" onmouseenter="enter('-802153418821632058');" onmouseout="out('-802153418821632058');" style=""> 464              return currentValueIsNotNull &amp;&amp; !entity.isPreAdd() &amp;&amp; valueIsNotNullId &amp;&amp; valueIsNotPassword;         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465          }                                                                                                         </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 466          return generalConditionsMet;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467      }                                                                                                             </span>
<span  style=""> 468                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 469      @Override                                                                                                     </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 470      public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 470      public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 471          List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                              </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 472          records.add(record);                                                                                      </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 473          Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 473          Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 474          return productEntities[0];                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475      }                                                                                                             </span>
<span  style=""> 476                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 477      @Override                                                                                                     </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 478      public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 478      public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SerializabðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 479          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 479          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 480          return getRecord(mergedProperties, record, null, null);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481      }                                                                                                             </span>
<span  style=""> 482                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 483      @Override                                                                                                     </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 484      public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 484      public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? ðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 485          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 485          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 486          return getRecords(mergedProperties, records, null, null, null);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487      }                                                                                                             </span>
<span  style=""> 488                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 489      @Override                                                                                                     </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 490      public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 490      public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persisteðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 491          return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 491          return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspectiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492      }                                                                                                             </span>
<span  style=""> 493                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 494      @Override                                                                                                     </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 495      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 495      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; reðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 496          return getRecords(primaryMergedProperties, records, null, null, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497      }                                                                                                             </span>
<span  style=""> 498                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 499      @Override                                                                                                     </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 500      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,                      </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 501                                 List&lt;? extends Serializable&gt; records,                                              </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 502                                 Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,                    </span>
<span class="-4377947839867578072" onmouseenter="enter('-4377947839867578072');" onmouseout="out('-4377947839867578072');" style=""> 503                                 String pathToTargetObject) {                                                       </span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 504          return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 504          return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505      }                                                                                                             </span>
<span  style=""> 506                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 507      @Override                                                                                                     </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 508      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,                      </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 509                                 List&lt;? extends Serializable&gt; records,                                              </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 510                                 Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,                    </span>
<span class="8335655514773173486" onmouseenter="enter('8335655514773173486');" onmouseout="out('8335655514773173486');" style=""> 511                                 String pathToTargetObject,                                                         </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 512                                 String[] customCriteria) {                                                         </span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 513          Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 513          Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedPrðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 514          Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 514          Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 515          Entity[] entities = new Entity[records.size()];                                                           </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 516          int j = 0;                                                                                                </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 517          for (Serializable recordEntity : records) {                                                               </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 518              Serializable entity;                                                                                  </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 519              if (pathToTargetObject != null) {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 520                  try {                                                                                             </span>
<span class="-5492139625117264664" onmouseenter="enter('-5492139625117264664');" onmouseout="out('-5492139625117264664');" style=""> 521                      entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObject);    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 522                  } catch (Exception e) {                                                                           </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 523                      throw new PersistenceException(e);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 525              } else {                                                                                              </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 526                  entity = recordEntity;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527              }                                                                                                     </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 528              Entity entityItem = new Entity();                                                                     </span>
<span class="3587737780108495887" onmouseenter="enter('3587737780108495887');" onmouseout="out('3587737780108495887');" style=""> 529              entityItem.setType(new String[] { entity.getClass().getName() });                                     </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 530              entities[j] = entityItem;                                                                             </span>
<span  style=""> 531                                                                                                                    </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 532              List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());                       </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""> 533              extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);        </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 534              if (alternateMergedProperties != null) {                                                              </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 535                  extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 535                  extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriterðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536              }                                                                                                     </span>
<span  style=""> 537                                                                                                                    </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 538              // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 539              try {                                                                                                 </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 540                  Property p = new Property();                                                                      </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 541                  p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                             </span>
<span class="-280105646141823521" onmouseenter="enter('-280105646141823521');" onmouseout="out('-280105646141823521');" style=""> 542                  String mainEntityName = (String) MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;);           </span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 543                  p.setValue(mainEntityName);                                                                       </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 544                  props.add(p);                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 545              } catch (Exception e) {                                                                               </span>
<span class="8396621627303093896" onmouseenter="enter('8396621627303093896');" onmouseout="out('8396621627303093896');" style=""> 546                  LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;,              </span>
<span class="210384044775512031" onmouseenter="enter('210384044775512031');" onmouseout="out('210384044775512031');" style=""> 547                          entity.getClass().getName()), e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548              }                                                                                                     </span>
<span  style=""> 549                                                                                                                    </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 550              // Try to add the alternate id property if available                                                  </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 551              if (alternateMergedProperties != null) {                                                              </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 552                  for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {                 </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 553                      if (entry.getValue() instanceof BasicFieldMetadata) {                                         </span>
<span class="-3735738621021538581" onmouseenter="enter('-3735738621021538581');" onmouseout="out('-3735738621021538581');" style=""> 554                          if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ID) {    </span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""> 555                              Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();  </span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 556                              alternateOnEntity.put(entry.getKey(), entry.getValue());                              </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 557                              List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                                    </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 558                              extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 558                              extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 559                              List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                                  </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 560                              for (Property prop : props2) {                                                        </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 561                                  if (!prop.getName().startsWith(&quot;__&quot;)) {                                           </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 562                                      filtered.add(prop);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564                              }                                                                                     </span>
<span class="7776429612545514862" onmouseenter="enter('7776429612545514862');" onmouseout="out('7776429612545514862');" style=""> 565                              if (filtered.size() == 1 &amp;&amp; !filtered.get(0).getName().contains(&quot;.&quot;)) {               </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 566                                  Property alternateIdProp = filtered.get(0);                                       </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 567                                  alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                                   </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 568                                  props.add(alternateIdProp);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573              }                                                                                                     </span>
<span  style=""> 574                                                                                                                    </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 575              Property[] properties = new Property[props.size()];                                                   </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 576              properties = props.toArray(properties);                                                               </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 577              entityItem.setProperties(properties);                                                                 </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 578              j++;                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579          }                                                                                                         </span>
<span  style=""> 580                                                                                                                    </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 581          return entities;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 582      }                                                                                                             </span>
<span  style=""> 583                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 584      @Override                                                                                                     </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 585      public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                                   </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 586          return fetchWrapper.getRecords(fetchExtractionRequest);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587      }                                                                                                             </span>
<span  style=""> 588                                                                                                                    </span>
<span class="2943865710042007016" onmouseenter="enter('2943865710042007016');" onmouseout="out('2943865710042007016');" style=""> 589      protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties,             </span>
<span class="-3214801195397343505" onmouseenter="enter('-3214801195397343505');" onmouseout="out('-3214801195397343505');" style=""> 590                                                           Serializable entity,                                     </span>
<span class="6006324038342333129" onmouseenter="enter('6006324038342333129');" onmouseout="out('6006324038342333129');" style=""> 591                                                           List&lt;Property&gt; props,                                    </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 592                                                           String[] customCriteria) {                               </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 593          FieldManager fieldManager = getFieldManager();                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 594          try {                                                                                                     </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 595              if (entity instanceof AdminMainEntity) {                                                              </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 596                  //Create an invisible property for the admin main entity name, if applicable.                     </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 597                  //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive               </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 598                  //its display name.                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 599                  try {                                                                                             </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 600                      Property propertyItem = new Property();                                                       </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 601                      propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                              </span>
<span class="-3439538412113948348" onmouseenter="enter('-3439538412113948348');" onmouseout="out('-3439538412113948348');" style=""> 602                      propertyItem.setValue(((AdminMainEntity) entity).getMainEntityName());                        </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 603                      props.add(propertyItem);                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 604                  } catch (Exception e) {                                                                           </span>
<span class="-6660676054828691164" onmouseenter="enter('-6660676054828691164');" onmouseout="out('-6660676054828691164');" style=""><abbr title=" 605                      //do nothing here except for not add the property. Exceptions could occur when there is a validation"> 605                      //do nothing here except for not add the property. Exceptions could occur when there is a valiðŸ”µ</abbr></span>
<span class="6622622754482242268" onmouseenter="enter('6622622754482242268');" onmouseout="out('6622622754482242268');" style=""><abbr title=" 606                      //issue and some properties/relationships that are used for gleaning the main entity name end up"> 606                      //issue and some properties/relationships that are used for gleaning the main entity name end ðŸ”µ</abbr></span>
<span class="-3324578144663288556" onmouseenter="enter('-3324578144663288556');" onmouseout="out('-3324578144663288556');" style=""> 607                      //not being set                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609              }                                                                                                     </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 610              for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                              </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 611                  String property = entry.getKey();                                                                 </span>
<span class="-6557658272043627235" onmouseenter="enter('-6557658272043627235');" onmouseout="out('-6557658272043627235');" style=""> 612                  BasicFieldMetadata metadata = (BasicFieldMetadata) entry.getValue();                              </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 613                  if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 613                  if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.gðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 614                      boolean proceed = true;                                                                       </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 615                      if (property.contains(&quot;.&quot;)) {                                                                 </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 616                          StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                              </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 617                          Object testObject = entity;                                                               </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 618                          while (tokens.hasMoreTokens()) {                                                          </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 619                              String token = tokens.nextToken();                                                    </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 620                              if (tokens.hasMoreTokens()) {                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 621                                  try {                                                                             </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 622                                      testObject = fieldManager.getFieldValue(testObject, token);                   </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 623                                  } catch (FieldNotAvailableException e) {                                          </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 624                                      proceed = false;                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 625                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626                                  }                                                                                 </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 627                                  if (testObject == null) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 628                                      Property propertyItem = new Property();                                       </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 629                                      propertyItem.setName(property);                                               </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 630                                      if (props.contains(propertyItem)) {                                           </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 631                                          proceed = false;                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 632                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633                                      }                                                                             </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 634                                      propertyItem.setValue(null);                                                  </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 635                                      props.add(propertyItem);                                                      </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 636                                      proceed = false;                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 637                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641                      }                                                                                             </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 642                      if (!proceed) {                                                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 643                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644                      }                                                                                             </span>
<span  style=""> 645                                                                                                                    </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 646                      boolean isFieldAccessible = true;                                                             </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 647                      Object value = null;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 648                      try {                                                                                         </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 649                          value = fieldManager.getFieldValue(entity, property);                                     </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 650                      } catch (FieldNotAvailableException e) {                                                      </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 651                          isFieldAccessible = false;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652                      }                                                                                             </span>
<span class="-1242713994964830615" onmouseenter="enter('-1242713994964830615');" onmouseout="out('-1242713994964830615');" style=""> 653                      checkField:                                                                                   </span>
<span class="5677081435180812955" onmouseenter="enter('5677081435180812955');" onmouseout="out('5677081435180812955');" style=""> 654                      {                                                                                             </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 655                          if (isFieldAccessible) {                                                                  </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 656                              Property propertyItem = new Property();                                               </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 657                              propertyItem.setName(property);                                                       </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 658                              if (props.contains(propertyItem)) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 659                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660                              }                                                                                     </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 661                              props.add(propertyItem);                                                              </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 662                              String displayVal = propertyItem.getDisplayValue();                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 663                              boolean handled = false;                                                              </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 664                              for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) { </span>
<span class="-6209348320960420357" onmouseenter="enter('-6209348320960420357');" onmouseout="out('-6209348320960420357');" style=""> 665                                  MetadataProviderResponse response = fieldPersistenceProvider.extractValue(        </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""> 666                                          new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, </span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""> 667                                                  persistenceManager, this, entity, customCriteria), propertyItem); </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 668                                  if (MetadataProviderResponse.NOT_HANDLED != response) {                           </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 669                                      handled = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670                                  }                                                                                 </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 671                                  if (MetadataProviderResponse.HANDLED_BREAK == response) {                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 672                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674                              }                                                                                     </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 675                              if (!handled) {                                                                       </span>
<span class="5660532463858602467" onmouseenter="enter('5660532463858602467');" onmouseout="out('5660532463858602467');" style=""> 676                                  defaultFieldPersistenceProvider.extractValue(                                     </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""> 677                                          new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, </span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""> 678                                                  persistenceManager, this, entity, customCriteria), propertyItem); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679                              }                                                                                     </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 680                              break checkField;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681                          }                                                                                         </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 682                          //try a direct property acquisition via reflection                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 683                          try {                                                                                     </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 684                              String strVal = null;                                                                 </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 685                              Method method;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 686                              try {                                                                                 </span>
<span class="-188265031890242666" onmouseenter="enter('-188265031890242666');" onmouseout="out('-188265031890242666');" style=""> 687                                  //try a &#x27;get&#x27; prefixed mutator first                                              </span>
<span class="2344864789387251771" onmouseenter="enter('2344864789387251771');" onmouseout="out('2344864789387251771');" style=""><abbr title=" 688                                  String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(1, property.length());"> 688                                  String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(ðŸ”µ</abbr></span>
<span class="6434236432742156955" onmouseenter="enter('6434236432742156955');" onmouseout="out('6434236432742156955');" style=""> 689                                  method = entity.getClass().getMethod(temp, new Class[] {});                       </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 690                              } catch (NoSuchMethodException e) {                                                   </span>
<span class="5628920111567796624" onmouseenter="enter('5628920111567796624');" onmouseout="out('5628920111567796624');" style=""> 691                                  method = entity.getClass().getMethod(property, new Class[] {});                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692                              }                                                                                     </span>
<span class="-1268801467547302511" onmouseenter="enter('-1268801467547302511');" onmouseout="out('-1268801467547302511');" style=""> 693                              value = method.invoke(entity, new String[] {});                                       </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 694                              Property propertyItem = new Property();                                               </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 695                              propertyItem.setName(property);                                                       </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 696                              if (props.contains(propertyItem)) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 697                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698                              }                                                                                     </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 699                              props.add(propertyItem);                                                              </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 700                              if (value == null) {                                                                  </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 701                                  strVal = null;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 702                              } else {                                                                              </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 703                                  if (Date.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 704                                      strVal = getSimpleDateFormatter().format((Date) value);                       </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 705                                  } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                  </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""><abbr title=" 706                                      strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));"> 706                                      strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime(ðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 707                                  } else if (Calendar.class.isAssignableFrom(value.getClass())) {                   </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 708                                      strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());       </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 709                                  } else if (Double.class.isAssignableFrom(value.getClass())) {                     </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 710                                      strVal = getDecimalFormatter().format(value);                                 </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 711                                  } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                 </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 712                                      strVal = getDecimalFormatter().format(value);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 713                                  } else {                                                                          </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 714                                      strVal = value.toString();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716                              }                                                                                     </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 717                              propertyItem.setValue(strVal);                                                        </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 718                          } catch (NoSuchMethodException e) {                                                       </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 719                              LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 719                              LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(ðŸ”µ</abbr></span>
<span class="4115063574789816242" onmouseenter="enter('4115063574789816242');" onmouseout="out('4115063574789816242');" style=""> 720                              //do nothing - this property is simply not in the bean                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724              }                                                                                                     </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 725          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 726              throw new PersistenceException(e);                                                                    </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 727          } catch (IllegalAccessException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 728              throw new PersistenceException(e);                                                                    </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 729          } catch (InvocationTargetException e) {                                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 730              throw new PersistenceException(e);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732      }                                                                                                             </span>
<span  style=""> 733                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 734      @Override                                                                                                     </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 735      public String getStringValueFromGetter(Serializable instance, String propertyName)                            </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 736              throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {                     </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 737          Object value = PropertyUtils.getProperty(instance, propertyName);                                         </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 738          return formatValue(value);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739      }                                                                                                             </span>
<span  style=""> 740                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 741      @Override                                                                                                     </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 742      public String formatValue(Object value) {                                                                     </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 743          String strVal;                                                                                            </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 744          if (value == null) {                                                                                      </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 745              strVal = null;                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 746          } else {                                                                                                  </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 747              if (Date.class.isAssignableFrom(value.getClass())) {                                                  </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 748                  strVal = getSimpleDateFormatter().format((Date) value);                                           </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 749              } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                                      </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 750                  strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));                </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 751              } else if (Calendar.class.isAssignableFrom(value.getClass())) {                                       </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 752                  strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                           </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 753              } else if (Double.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 754                  strVal = getDecimalFormatter().format(value);                                                     </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 755              } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                                     </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 756                  strVal = getDecimalFormatter().format(value);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 757              } else {                                                                                              </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 758                  strVal = value.toString();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 759              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760          }                                                                                                         </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 761          return strVal;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762      }                                                                                                             </span>
<span  style=""> 763                                                                                                                    </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 764      protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 764      protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 765          EntityResult entityResult = new EntityResult();                                                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 766          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 767          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 768          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 768          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 769          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 770              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 772          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 773              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 773              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 774              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 774              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 775                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 776                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 777                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 778                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 779                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 780                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 781                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 782                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 783                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 784                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 785                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 786                      );                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 787              if (primaryKey == null) {                                                                             </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 788                  primaryKey = getPrimaryKey(entity, mergedProperties);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789              }                                                                                                     </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 790              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 790              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getTypeðŸ”µ</abbr></span>
<span  style=""> 791                                                                                                                    </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 792              Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                                  </span>
<span  style=""> 793                                                                                                                    </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 794              if (!entity.isValidationFailure()) {                                                                  </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 795                  //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property         </span>
<span class="4247210219521112592" onmouseenter="enter('4247210219521112592');" onmouseout="out('4247210219521112592');" style=""> 796                  if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null &amp;&amp;                                    </span>
<span class="235375556032951584" onmouseenter="enter('235375556032951584');" onmouseout="out('235375556032951584');" style=""> 797                          entity.findProperty(foreignKey.getSortField()) != null &amp;&amp;                                 </span>
<span class="7175038170339042705" onmouseenter="enter('7175038170339042705');" onmouseout="out('7175038170339042705');" style=""> 798                          entity.findProperty(foreignKey.getSortField()).getValue() != null) {                      </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""> 799                      ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();       </span>
<span class="5598129937237964517" onmouseenter="enter('5598129937237964517');" onmouseout="out('5598129937237964517');" style=""> 800                      extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance,            </span>
<span class="4380637637969964834" onmouseenter="enter('4380637637969964834');" onmouseout="out('4380637637969964834');" style=""> 801                              mergedProperties, primaryKey, result);                                                </span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 802                      instance = result.getResult();                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 803                  } else {                                                                                          </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 804                      instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 804                      instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805                  }                                                                                                 </span>
<span  style=""> 806                                                                                                                    </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 807                  instance = persistenceManager.getDynamicEntityDao().merge(instance);                              </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 808                  if (includeRealEntity) {                                                                          </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 809                      entityResult.setEntityBackingObject(instance);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810                  }                                                                                                 </span>
<span  style=""> 811                                                                                                                    </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 812                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 813                  entityList.add(instance);                                                                         </span>
<span  style=""> 814                                                                                                                    </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 815                  entity = getRecords(mergedProperties, entityList, null, null, null)[0];                           </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 816                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 817                  return entityResult;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 818              } else {                                                                                              </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 819                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 820                  return entityResult;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 822          } catch (Exception e) {                                                                                   </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 823              throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825      }                                                                                                             </span>
<span  style=""> 826                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 827      @Override                                                                                                     </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 828      public String getIdPropertyName(String entityClass) {                                                         </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 829          return persistenceManager.getIdPropertyName(entityClass);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830      }                                                                                                             </span>
<span  style=""> 831                                                                                                                    </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 832      public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                      </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 833          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 834          for (String property : mergedProperties.keySet()) {                                                       </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 835              BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);                        </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 836              if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {                        </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 837                  return property;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839          }                                                                                                         </span>
<span  style=""> 840                                                                                                                    </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""> 841          throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842      }                                                                                                             </span>
<span  style=""> 843                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 844      @Override                                                                                                     </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 845      public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {           </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 846          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 847          Object primaryKey = null;                                                                                 </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 848          String idPropertyName = null;                                                                             </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 849          BasicFieldMetadata metaData = null;                                                                       </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 850          for (String property : mergedProperties.keySet()) {                                                       </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 851              BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);                        </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 852              if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {                        </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 853                  idPropertyName = property;                                                                        </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 854                  metaData = temp;                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 855                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 856              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857          }                                                                                                         </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 858          if (idPropertyName == null) {                                                                             </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 859              throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 859              throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 860          }                                                                                                         </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 861          for (Property property : entity.getProperties()) {                                                        </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 862              if (property.getName().equals(idPropertyName)) {                                                      </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 863                  switch (metaData.getSecondaryType()) {                                                            </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 864                      case INTEGER:                                                                                 </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""> 865                          primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 866                          break;                                                                                    </span>
<span class="6509618406235281730" onmouseenter="enter('6509618406235281730');" onmouseout="out('6509618406235281730');" style=""> 867                      case STRING:                                                                                  </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 868                          primaryKey = property.getValue();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 869                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870                  }                                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 871                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 872              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873          }                                                                                                         </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 874          if (primaryKey == null) {                                                                                 </span>
<span class="586132424145349171" onmouseenter="enter('586132424145349171');" onmouseout="out('586132424145349171');" style=""><abbr title=" 875              throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the passed entity with type: &quot; + entity.getType()[0]);"> 875              throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the paðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876          }                                                                                                         </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 877          return primaryKey;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878      }                                                                                                             </span>
<span  style=""> 879                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 880      @Override                                                                                                     </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 881      public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,                   </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 882              CriteriaTransferObject cto,                                                                           </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 883              String ceilingEntityFullyQualifiedClassname,                                                          </span>
<span class="-8254447054846048089" onmouseenter="enter('-8254447054846048089');" onmouseout="out('-8254447054846048089');" style=""> 884              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties,                                                </span>
<span class="3731877525338754789" onmouseenter="enter('3731877525338754789');" onmouseout="out('3731877525338754789');" style=""> 885              RestrictionFactory customRestrictionFactory) {                                                        </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 886          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 887          List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                                      </span>
<span  style=""> 888                                                                                                                    </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 889          for (String propertyId : cto.getCriteriaMap().keySet()) {                                                 </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 890              if (mergedProperties.containsKey(propertyId)) {                                                       </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 891                  boolean handled = false;                                                                          </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 892                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {             </span>
<span class="-6114175924026036851" onmouseenter="enter('-6114175924026036851');" onmouseout="out('-6114175924026036851');" style=""> 893                      MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(                </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 894                              new AddSearchMappingRequest(persistencePerspective, cto,                              </span>
<span class="5810135378246725068" onmouseenter="enter('5810135378246725068');" onmouseout="out('5810135378246725068');" style=""> 895                                      ceilingEntityFullyQualifiedClassname, mergedProperties,                       </span>
<span class="5077524350528682045" onmouseenter="enter('5077524350528682045');" onmouseout="out('5077524350528682045');" style=""><abbr title=" 896                                      propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restrictionFactory"> 896                                      propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restðŸ”µ</abbr></span>
<span class="6427059933663878801" onmouseenter="enter('6427059933663878801');" onmouseout="out('6427059933663878801');" style=""> 897                                      :customRestrictionFactory), filterMappings);                                  </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 898                      if (MetadataProviderResponse.NOT_HANDLED != response) {                                       </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 899                          handled = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900                      }                                                                                             </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 901                      if (MetadataProviderResponse.HANDLED_BREAK == response) {                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 902                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 904                  }                                                                                                 </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 905                  if (!handled) {                                                                                   </span>
<span class="8038403104028382935" onmouseenter="enter('8038403104028382935');" onmouseout="out('8038403104028382935');" style=""> 906                      defaultFieldPersistenceProvider.addSearchMapping(                                             </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 907                              new AddSearchMappingRequest(persistencePerspective, cto,                              </span>
<span class="-1188580278753724323" onmouseenter="enter('-1188580278753724323');" onmouseout="out('-1188580278753724323');" style=""> 908                                      ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId,           </span>
<span class="-6646794478608592484" onmouseenter="enter('-6646794478608592484');" onmouseout="out('-6646794478608592484');" style=""><abbr title=" 909                                      getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory"> 909                                      getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFðŸ”µ</abbr></span>
<span class="878086898277429379" onmouseenter="enter('878086898277429379');" onmouseout="out('878086898277429379');" style=""> 910                                              : customRestrictionFactory), filterMappings);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 912              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913          }                                                                                                         </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 914          return filterMappings;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915      }                                                                                                             </span>
<span  style=""> 916                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 917      @Override                                                                                                     </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 918      public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,                   </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 919              CriteriaTransferObject cto,                                                                           </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 920              String ceilingEntityFullyQualifiedClassname,                                                          </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style=""> 921              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                              </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 922          return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 922          return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilterðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923      }                                                                                                             </span>
<span  style=""> 924                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 925      @Override                                                                                                     </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 926      public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 926      public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; ðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 927          extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 927          extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), propertieðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928      }                                                                                                             </span>
<span  style=""> 929                                                                                                                    </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 930      protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 930      protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedPropðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style=""> 931          Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                            </span>
<span  style=""> 932                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 933              @Override                                                                                             </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 934              public int compare(Property o1, Property o2) {                                                        </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style=""> 935                  return o1.getName().compareTo(o2.getName());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 937          };                                                                                                        </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style=""> 938          Collections.sort(properties, comparator);                                                                 </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style=""> 939          for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                              </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 940              String property = entry.getKey();                                                                     </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style=""> 941              Property prop = new Property();                                                                       </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style=""> 942              FieldMetadata metadata = mergedProperties.get(property);                                              </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style=""> 943              prop.setName(property);                                                                               </span>
<span  style=""> 944                                                                                                                    </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 945              int pos = Collections.binarySearch(properties, prop, comparator);                                     </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title=" 946              if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {"> 946              if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != ðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style=""> 947                  logWarn: {                                                                                        </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title=" 948                      if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {"> 948                      if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style=""> 949                          //don&#x27;t warn for id field collisions, but still ignore the colliding fields               </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 950                          break logWarn;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951                      }                                                                                             </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 952                      //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 952                      //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953                  }                                                                                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 954                  continue;                                                                                         </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style=""> 955              } else if (pos &lt; 0) {                                                                                 </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style=""> 956                  pos = -pos - 1; // calculate position to insert                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957              }                                                                                                     </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style=""> 958              properties.add(pos, prop);                                                                            </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 959              prop.setMetadata(metadata);                                                                           </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style=""> 960              if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                           </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 961                  //this only makes sense for non collection types                                                  </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style=""> 962                  ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 963              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965      }                                                                                                             </span>
<span  style=""> 966                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 967      @Override                                                                                                     </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 968      public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 968      public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, ðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 969          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 969          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 970          try {                                                                                                     </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 971              PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();       </span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""> 972              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);</span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 973              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 973              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style=""> 974                      ceilingEntityFullyQualifiedClassname,                                                         </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 975                      entities,                                                                                     </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title=" 976                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),"> 976                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectivðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 977                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 978                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 979                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 980                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 981                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 982                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 983                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 984                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 985                      );                                                                                            </span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style=""> 986              allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 987          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""> 988              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 990      }                                                                                                             </span>
<span  style=""> 991                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 992      @Override                                                                                                     </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title=" 993      public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 993      public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style=""> 994          return update(persistencePackage, null, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995      }                                                                                                             </span>
<span  style=""> 996                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 997      @Override                                                                                                     </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style=""> 998      public Entity update(PersistencePackage persistencePackage) throws ServiceException {                         </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style=""> 999          EntityResult er = update(persistencePackage, null, false);                                                </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style="">1000          return er.getEntity();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1001      }                                                                                                             </span>
<span  style="">1002                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1003      @Override                                                                                                     </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style="">1004      public Entity add(PersistencePackage persistencePackage) throws ServiceException {                            </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style="">1005          EntityResult entityResult = add(persistencePackage, false);                                               </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style="">1006          return entityResult.getEntity();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1007      }                                                                                                             </span>
<span  style="">1008                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1009      @Override                                                                                                     </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title="1010      public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1010      public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style="">1011          EntityResult entityResult = new EntityResult();                                                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1012          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1013          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1014          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1014          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1015          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1016              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1017          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1018          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1019              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1019              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1020              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1020              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMeðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1021                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1022                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1023                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1024                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1025                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1026                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1027                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1028                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1029                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1030                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1031                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1032                      );                                                                                            </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style="">1033              Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);</span>
<span  style="">1034                                                                                                                    </span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style="">1035              String idProperty = null;                                                                             </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style="">1036              for (String property : mergedProperties.keySet()) {                                                   </span>
<span class="-2221369290108753372" onmouseenter="enter('-2221369290108753372');" onmouseout="out('-2221369290108753372');" style=""><abbr title="1037                  if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID) {">1037                  if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID)ðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style="">1038                      idProperty = property;                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1039                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1040                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041              }                                                                                                     </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style="">1042              if (idProperty == null) {                                                                             </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title="1043                  throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);">1043                  throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044              }                                                                                                     </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style="">1045              Object primaryKey = null;                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1046              try {                                                                                                 </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style="">1047                  primaryKey = getPrimaryKey(entity, mergedProperties);                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1048              } catch (Exception e) {                                                                               </span>
<span class="-2276199612445624795" onmouseenter="enter('-2276199612445624795');" onmouseout="out('-2276199612445624795');" style="">1049                  //don&#x27;t do anything - this is a valid case                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050              }                                                                                                     </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style="">1051              if (primaryKey == null) {                                                                             </span>
<span  style="">1052                                                                                                                    </span>
<span class="-425360514461332458" onmouseenter="enter('-425360514461332458');" onmouseout="out('-425360514461332458');" style="">1053                  Serializable instance = (Serializable) Class.forName(entity.getType()[0]).newInstance();          </span>
<span  style="">1054                                                                                                                    </span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style="">1055                  instance = createPopulatedInstance(instance, entity, mergedProperties, false);                    </span>
<span  style="">1056                                                                                                                    </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1057                  if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                                    </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style="">1058                      ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();       </span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title="1059                      extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);">1059                      extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedPropertiðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style="">1060                      instance = result.getResult();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061                  }                                                                                                 </span>
<span  style="">1062                                                                                                                    </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1063                  instance = persistenceManager.getDynamicEntityDao().merge(instance);                              </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style="">1064                  if (includeRealEntityObject) {                                                                    </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style="">1065                      entityResult.setEntityBackingObject(instance);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066                  }                                                                                                 </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style="">1067                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style="">1068                  entityList.add(instance);                                                                         </span>
<span  style="">1069                                                                                                                    </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style="">1070                  entity = getRecords(mergedProperties, entityList, null, null, null)[0];                           </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style="">1071                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style="">1072                  return entityResult;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1073              } else {                                                                                              </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style="">1074                  return update(persistencePackage, primaryKey, includeRealEntityObject);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1076          } catch (Exception e) {                                                                                   </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style="">1077              throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079      }                                                                                                             </span>
<span  style="">1080                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1081      @Override                                                                                                     </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style="">1082      public void remove(PersistencePackage persistencePackage) throws ServiceException {                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1083          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1084          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1085          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1085          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1086          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1087              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1089          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1090              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1090              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1091              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1091              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMeðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1092                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1093                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1094                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1095                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1096                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1097                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1098                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1099                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1100                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1101                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1102                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1103                      );                                                                                            </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style="">1104              Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);</span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style="">1105              Object primaryKey = getPrimaryKey(entity, mergedProperties);                                          </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title="1106              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);">1106              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getTypeðŸ”µ</abbr></span>
<span  style="">1107                                                                                                                    </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style="">1108              Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                                  </span>
<span  style="">1109                                                                                                                    </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style="">1110              switch (persistencePerspective.getOperationTypes().getRemoveType()) {                                 </span>
<span class="5189123261615208670" onmouseenter="enter('5189123261615208670');" onmouseout="out('5189123261615208670');" style="">1111                  case NONDESTRUCTIVEREMOVE:                                                                        </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style="">1112                      FieldManager fieldManager = getFieldManager();                                                </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title="1113                      FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());">1113                      FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField()ðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style="">1114                      Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1115                      try {                                                                                         </span>
<span class="-7359786243551687396" onmouseenter="enter('-7359786243551687396');" onmouseout="out('-7359786243551687396');" style="">1116                          foreignKeyValue = Long.valueOf((String) foreignKeyValue);                                 </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="">1117                      } catch (NumberFormatException e) {                                                           </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style="">1118                          LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119                      }                                                                                             </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title="1120                      Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);">1120                      Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forNameðŸ”µ</abbr></span>
<span class="-6891408169238328357" onmouseenter="enter('-6891408169238328357');" onmouseout="out('-6891408169238328357');" style=""><abbr title="1121                      Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());">1121                      Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.geðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style="">1122                      collection.remove(instance);                                                                  </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title="1123                      // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on">1123                      // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreigðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style="">1124                      // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly  </span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style="">1125                      // set the manyTo field to null so that subsequent lookups will not find it                   </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style="">1126                      if (manyToFieldMetadata instanceof BasicFieldMetadata) {                                      </span>
<span class="3041576912599376884" onmouseenter="enter('3041576912599376884');" onmouseout="out('3041576912599376884');" style="">1127                          if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())) {      </span>
<span class="-3179114257339016284" onmouseenter="enter('-3179114257339016284');" onmouseout="out('-3179114257339016284');" style=""><abbr title="1128                              throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot;">1128                              throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne sideðŸ”µ</abbr></span>
<span class="-7704143059315768665" onmouseenter="enter('-7704143059315768665');" onmouseout="out('-7704143059315768665');" style=""><abbr title="1129                                      + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot;">1129                                      + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyTðŸ”µ</abbr></span>
<span class="-8899164530562544377" onmouseenter="enter('-8899164530562544377');" onmouseout="out('-8899164530562544377');" style="">1130                                      + &quot; or nullable=true within the @JoinColumn annotation&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131                          }                                                                                         </span>
<span class="1164649929234803369" onmouseenter="enter('1164649929234803369');" onmouseout="out('1164649929234803369');" style=""><abbr title="1132                          //Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module">1132                          //Since this is occuring on a remove persistence package, merge up-front (before making a ðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1133                          instance = persistenceManager.getDynamicEntityDao().merge(instance);                      </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title="1134                          Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());">1134                          Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField()ðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style="">1135                          Object manyToObject = manyToField.get(instance);                                          </span>
<span class="-7515244788292498989" onmouseenter="enter('-7515244788292498989');" onmouseout="out('-7515244788292498989');" style=""><abbr title="1136                          if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanceof Map)) {">1136                          if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style="">1137                              manyToField.set(instance, null);                                                      </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1138                              instance = persistenceManager.getDynamicEntityDao().merge(instance);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1141                      break;                                                                                        </span>
<span class="-5424424301156351095" onmouseenter="enter('-5424424301156351095');" onmouseout="out('-5424424301156351095');" style="">1142                  case BASIC:                                                                                       </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style="">1143                      persistenceManager.getDynamicEntityDao().remove(instance);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1144                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1146          } catch (Exception e) {                                                                                   </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1147              throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149      }                                                                                                             </span>
<span  style="">1150                                                                                                                    </span>
<span class="-5101078461080852406" onmouseenter="enter('-5101078461080852406');" onmouseout="out('-5101078461080852406');" style="">1151      public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage,                  </span>
<span class="-1790491118666975112" onmouseenter="enter('-1790491118666975112');" onmouseout="out('-1790491118666975112');" style="">1152              CriteriaTransferObject cto) throws ServiceException {                                                 </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1153          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1154          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1154          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span  style="">1155                                                                                                                    </span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1156          if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {                      </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1157              persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158          }                                                                                                         </span>
<span  style="">1159                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1160          try {                                                                                                     </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1161              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1161              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(ClðŸ”µ</abbr></span>
<span  style="">1162                                                                                                                    </span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1163              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1163              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1164                      ceilingEntityFullyQualifiedClassname,                                                         </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1165                      entities,                                                                                     </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1166                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1166                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectivðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1167                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1168                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1169                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1170                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1171                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1172                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1173                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1174                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1175                      );                                                                                            </span>
<span  style="">1176                                                                                                                    </span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1177              return mergedProperties;                                                                              </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1178          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style="">1179              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181      }                                                                                                             </span>
<span  style="">1182                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1183      @Override                                                                                                     </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1184      public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1184      public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServicðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1185          Entity[] payload;                                                                                         </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1186          int totalRecords;                                                                                         </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1187          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1188          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1188          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1189          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1189          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span  style="">1190                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1191          try {                                                                                                     </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1192              if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                                        </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1193                  FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                          </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1194                  sortCriteria.setSortAscending(foreignKey.getSortAscending());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195              }                                                                                                     </span>
<span  style="">1196                                                                                                                    </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1197              Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);           </span>
<span  style="">1198                                                                                                                    </span>



<span class="-6342955113620354561" onmouseenter="enter('-6342955113620354561');" onmouseout="out('-6342955113620354561');" style="">1199              List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage</span>
<span class="-8965082019915054990" onmouseenter="enter('-8965082019915054990');" onmouseout="out('-8965082019915054990');" style="">1200                      .getFetchTypeFullyQualifiedClassname(), mergedProperties);                                    </span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1201              List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);            </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1202              if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                                  </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1203                  standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204              }                                                                                                     </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1205              if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                          </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1206                  standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207              }                                                                                                     </span>
<span  style="">1208                                                                                                                    </span>
<span class="-1243671803049331237" onmouseenter="enter('-1243671803049331237');" onmouseout="out('-1243671803049331237');" style="">1209              FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto,                                 </span>
<span class="4292734980783020060" onmouseenter="enter('4292734980783020060');" onmouseout="out('4292734980783020060');" style="">1210                      persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);            </span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1211              List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                                      </span>
<span  style="">1212                                                                                                                    </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1213              List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);               </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1214              if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                                  </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1215                  countFilterMappings.addAll(cto.getAdditionalFilterMappings());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216              }                                                                                                     </span>
<span class="-3999242298419802693" onmouseenter="enter('-3999242298419802693');" onmouseout="out('-3999242298419802693');" style="">1217              FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto,                            </span>
<span class="-3552477247406350113" onmouseenter="enter('-3552477247406350113');" onmouseout="out('-3552477247406350113');" style="">1218                      persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);               </span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1219              totalRecords = getTotalRecords(countFetchRequest);                                                    </span>
<span  style="">1220                                                                                                                    </span>
<span class="-5158650912512765537" onmouseenter="enter('-5158650912512765537');" onmouseout="out('-5158650912512765537');" style="">1221              FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto,   </span>
<span class="6467880611752491014" onmouseenter="enter('6467880611752491014');" onmouseout="out('6467880611752491014');" style="">1222                      persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);         </span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1223              payload = getRecords(fetchExtractionRequest);                                                         </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1224          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style="">1225              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226          }                                                                                                         </span>
<span  style="">1227                                                                                                                    </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1228          return new DynamicResultSet(null, payload, totalRecords);                                                 </span>















































































































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229      }                                                                                                             </span>
<span  style="">1230                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1231      @Override                                                                                                     </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1232      public Integer getTotalRecords(FetchRequest fetchRequest) {                                                   </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1233          return fetchWrapper.getTotalRecords(fetchRequest);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234      }                                                                                                             </span>
<span  style="">1235                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1236      @Override                                                                                                     </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1237      public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1238          try {                                                                                                     </span>
<span class="2992791529598050608" onmouseenter="enter('2992791529598050608');" onmouseout="out('2992791529598050608');" style="">1239              return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(),       </span>
<span class="9038213180647386393" onmouseenter="enter('9038213180647386393');" onmouseout="out('9038213180647386393');" style="">1240                      ceilingEntity, filterMappings).getSingleResult()).intValue();                                 </span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1241          } catch (CriteriaConversionException e) {                                                                 </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1242              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1242              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntityðŸ”µ</abbr></span>
<span class="3717478470762679000" onmouseenter="enter('3717478470762679000');" onmouseout="out('3717478470762679000');" style=""><abbr title="1243              return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult()).intValue();">1243              return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245      }                                                                                                             </span>
<span  style="">1246                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1247      @Override                                                                                                     </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style="">1248      public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {  </span>
<span class="378343015895903420" onmouseenter="enter('378343015895903420');" onmouseout="out('378343015895903420');" style="">1249          return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(),                     </span>
<span class="-8797211071846459738" onmouseenter="enter('-8797211071846459738');" onmouseout="out('-8797211071846459738');" style="">1250                  ceilingEntity, filterMappings, maxField).getSingleResult();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1251      }                                                                                                             </span>
<span  style="">1252                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1253      @Override                                                                                                     </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1254      public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                                   </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1255          return fetchWrapper.getPersistentRecords(fetchRequest);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256      }                                                                                                             </span>
<span  style="">1257                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1258      @Override                                                                                                     </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1259      public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1259      public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, IntegðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1260          try {                                                                                                     </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1261              return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1261              return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filtðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1262          } catch (CriteriaConversionException e) {                                                                 </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1263              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1263              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntityðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1264              return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1264              return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getReðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266      }                                                                                                             </span>
<span  style="">1267                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1268      @Override                                                                                                     </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1269      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1269      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1270          return validate(entity, populatedInstance, mergedProperties, true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271      }                                                                                                             </span>
<span  style="">1272                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1273      @Override                                                                                                     </span>
<span class="-2540520329201552550" onmouseenter="enter('-2540520329201552550');" onmouseout="out('-2540520329201552550');" style=""><abbr title="1274      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties,">1274      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperðŸ”µ</abbr></span>
<span class="-646875273047375380" onmouseenter="enter('-646875273047375380');" onmouseout="out('-646875273047375380');" style="">1275              boolean validateUnsubmittedProperties) {                                                              </span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1276          entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1276          entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedPropðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1277          return !entity.isValidationFailure();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278      }                                                                                                             </span>
<span  style="">1279                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1280      @Override                                                                                                     </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1281      public void setPersistenceManager(PersistenceManager persistenceManager) {                                    </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1282          this.persistenceManager = persistenceManager;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283      }                                                                                                             </span>
<span  style="">1284                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1285      @Override                                                                                                     </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1286      public PersistenceModule getCompatibleModule(OperationType operationType) {                                   </span>
<span class="-6680721005895887682" onmouseenter="enter('-6680721005895887682');" onmouseout="out('-6680721005895887682');" style="">1287          return ((InspectHelper) persistenceManager).getCompatibleModule(operationType);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288      }                                                                                                             </span>
<span  style="">1289                                                                                                                    </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1290      public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                                        </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1291          return defaultFieldPersistenceProvider;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1292      }                                                                                                             </span>
<span  style="">1293                                                                                                                    </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style="">1294      public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {    </span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1295          this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296      }                                                                                                             </span>
<span  style="">1297                                                                                                                    </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1298      public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                                        </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1299          return fieldPersistenceProviders;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300      }                                                                                                             </span>
<span  style="">1301                                                                                                                    </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1302      public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) {          </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1303          this.fieldPersistenceProviders = fieldPersistenceProviders;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304      }                                                                                                             </span>
<span  style="">1305                                                                                                                    </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1306      public CriteriaTranslator getCriteriaTranslator() {                                                           </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1307          return criteriaTranslator;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308      }                                                                                                             </span>
<span  style="">1309                                                                                                                    </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1310      public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                                    </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1311          this.criteriaTranslator = criteriaTranslator;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312      }                                                                                                             </span>
<span  style="">1313                                                                                                                    </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1314      public EntityValidatorService getEntityValidatorService() {                                                   </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1315          return entityValidatorService;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316      }                                                                                                             </span>
<span  style="">1317                                                                                                                    </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1318      public void setEntityValidatorService(EntityValidatorService entityValidatorService) {                        </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1319          this.entityValidatorService = entityValidatorService;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320      }                                                                                                             </span>
<span  style="">1321                                                                                                                    </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1322      public RestrictionFactory getRestrictionFactory() {                                                           </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1323          return restrictionFactory;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324      }                                                                                                             </span>
<span  style="">1325                                                                                                                    </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1326      public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                                    </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1327          this.restrictionFactory = restrictionFactory;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328      }                                                                                                             </span>
<span  style="">1329                                                                                                                    </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1330      public PersistenceManager getPersistenceManager() {                                                           </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1331          return persistenceManager;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332      }                                                                                                             </span>
<span  style="">1333                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1334      /**                                                                                                           </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1335       * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1335       * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable objðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1336       * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1336       * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA crðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1337       * which seems to alleviate the problem.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1338       *                                                                                                            </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1339       * @param embeddedCollectionPath the path to the collection field itself                                      </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1340       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1341       * @param collectionClass the type of the collection members                                                  </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1342       * @return the builder capable of generating an appropriate HQL query                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1343       */                                                                                                           </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1344      protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1344      protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; fðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1345          String specialPath = embeddedCollectionPath.getTargetProperty();                                          </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1346          String[] pieces = specialPath.split(&quot;\\.&quot;);                                                               </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1347          if (pieces.length != 3) {                                                                                 </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1348              throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1348              throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1349          }                                                                                                         </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1350          String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                               </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1351          TypedQueryBuilder builder;                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1352          try {                                                                                                     </span>
<span class="-8552982106091258322" onmouseenter="enter('-8552982106091258322');" onmouseout="out('-8552982106091258322');" style="">1353              builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;)                      </span>
<span class="7429624725018559493" onmouseenter="enter('7429624725018559493');" onmouseout="out('7429624725018559493');" style="">1354                      .addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1355          } catch (Exception e) {                                                                                   </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1356              throw ExceptionHelper.refineException(e);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357          }                                                                                                         </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1358          for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {                  </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1359              builder = builder.addRestriction(restriction);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360          }                                                                                                         </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style="">1361          for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {     </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1362              builder = builder.addRestriction(restriction);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1363          }                                                                                                         </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1364          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1365              if (mapping.getSortDirection() != null) {                                                             </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1366                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1366                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetPðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1367                  if (StringUtils.isEmpty(mappingProperty)) {                                                       </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1368                      mappingProperty = mapping.getFullPropertyName();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369                  }                                                                                                 </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1370                  builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1370                  builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDINGðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372          }                                                                                                         </span>
<span  style="">1373                                                                                                                    </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1374          return builder;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375      }                                                                                                             </span>
<span  style="">1376                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1377      /**                                                                                                           </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1378       * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1378       * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collectiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1379       *                                                                                                            </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1380       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1380       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteriaðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1381       * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1381       * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1382       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1383       * @return the list of restrictions on the root entity                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1384       */                                                                                                           </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1385      protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1385      protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1386          String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1386          String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1387          List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                                        </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1388          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="5670151306593626605" onmouseenter="enter('5670151306593626605');" onmouseout="out('5670151306593626605');" style="">1389              checkProperty: {                                                                                      </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1390                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1390                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetPðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1391                  if (StringUtils.isEmpty(mappingProperty)) {                                                       </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1392                      mappingProperty = mapping.getFullPropertyName();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1393                  }                                                                                                 </span>
<span class="-8226569942575396694" onmouseenter="enter('-8226569942575396694');" onmouseout="out('-8226569942575396694');" style=""><abbr title="1394                  if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(mappingProperty)) {">1394                  if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(maðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style="">1395                      PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();        </span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1396                      if (predicateProvider != null) {                                                              </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1397                          FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();      </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1398                          if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {         </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1399                              Object val = converter.convert(mapping.getFilterValues().get(0));                     </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1400                              if (predicateProvider instanceof LikePredicateProvider) {                             </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1401                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1401                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, valðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1402                                  break checkProperty;                                                              </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1403                              } else if (predicateProvider instanceof EqPredicateProvider) {                        </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style="">1404                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));</span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1405                                  break checkProperty;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408                      }                                                                                             </span>
<span class="-6733273180612799079" onmouseenter="enter('-6733273180612799079');" onmouseout="out('-6733273180612799079');" style=""><abbr title="1409                      LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;,">1409                      LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional propertðŸ”µ</abbr></span>
<span class="-8181613750620164347" onmouseenter="enter('-8181613750620164347');" onmouseout="out('-8181613750620164347');" style="">1410                              StringUtil.sanitize(expression),                                                      </span>
<span class="-5255115290358802775" onmouseenter="enter('-5255115290358802775');" onmouseout="out('-5255115290358802775');" style="">1411                              StringUtil.sanitize(mappingProperty)));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1414          }                                                                                                         </span>
<span  style="">1415                                                                                                                    </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1416          return restrictions;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417      }                                                                                                             </span>
<span  style="">1418                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1419      /**                                                                                                           </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1420       * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1420       * Generate EQUALS restrictions for any filter property specified on the entity member of the collection fieldðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1421       *                                                                                                            </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1422       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1422       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteriaðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1423       * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1423       * @param specialExpression the String representation of the path for the collection field in the @Embeddable ðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1424       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1425       * @return the list of restrictions on the collection in the @Embeddable object                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1426       */                                                                                                           </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1427      protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1427      protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMapðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1428          List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                                        </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1429          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="-7768046259105737972" onmouseenter="enter('-7768046259105737972');" onmouseout="out('-7768046259105737972');" style=""><abbr title="1430              if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1430              if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.geðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1431                  FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();              </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1432                  if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {                 </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1433                      Object val = converter.convert(mapping.getFilterValues().get(0));                             </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1434                      String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1434                      String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().ðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1435                      restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438          }                                                                                                         </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1439          return restrictions;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440      }                                                                                                             </span>
<span  style="">1441                                                                                                                    </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1442      protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {         </span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1443          //Remove the entity from ORM management - no further attempts to persist                                  </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style="">1444          if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {        </span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1445              getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1446          }                                                                                                         </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1447          //Remove the id field value, if it&#x27;s set                                                                  </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1448          String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1448          String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClasðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1449          Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                              </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1450          if (idField == null) {                                                                                    </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1451              throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1451              throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getNameðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452          }                                                                                                         </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1453          idField.setAccessible(true);                                                                              </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1454          if (idField.get(instance) != null) {                                                                      </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1455              idField.set(instance, null);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457      }                                                                                                             </span>
<span  style="">1458                                                                                                                    </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style="">1459      protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {     </span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1460          Class&lt;?&gt; returnType = null;                                                                               </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1461          Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1461          Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName(ðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1462          java.lang.reflect.Type type = field.getGenericType();                                                     </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1463          if (type instanceof ParameterizedType) {                                                                  </span>
<span class="705860026972665445" onmouseenter="enter('705860026972665445');" onmouseout="out('705860026972665445');" style="">1464              ParameterizedType pType = (ParameterizedType) type;                                                   </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1465              Class&lt;?&gt; clazz;                                                                                       </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1466              if (pType.getActualTypeArguments().length &lt; 2) {                                                      </span>
<span class="4541832948460311824" onmouseenter="enter('4541832948460311824');" onmouseout="out('4541832948460311824');" style="">1467                  clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[0];                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1468              } else {                                                                                              </span>
<span class="-5335821615199731853" onmouseenter="enter('-5335821615199731853');" onmouseout="out('-5335821615199731853');" style="">1469                  clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[1];                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470              }                                                                                                     </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1471              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1471              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1472              if (!ArrayUtils.isEmpty(entities)) {                                                                  </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1473                  returnType = entities[entities.length - 1];                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1474              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1475          }                                                                                                         </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1476          return returnType;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span  style="">  18                                                                                                                    </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  19  package org.broadleafcommerce.openadmin.server.service.persistence.module;                                        </span>
<span  style="">  20                                                                                                                    </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  21  import org.apache.commons.beanutils.PropertyUtils;                                                                </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  22  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  23  import org.apache.commons.lang.ArrayUtils;                                                                        </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  24  import org.apache.commons.lang.StringUtils;                                                                       </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  25  import org.apache.commons.lang3.BooleanUtils;                                                                     </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  26  import org.apache.commons.lang3.reflect.FieldUtils;                                                               </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  27  import org.apache.commons.lang3.reflect.MethodUtils;                                                              </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  28  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  29  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  30  import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                                 </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  31  import org.broadleafcommerce.common.exception.ExceptionHelper;                                                    </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  32  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  33  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  34  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                                 </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  36 +import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                                  </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  37 +import org.broadleafcommerce.common.locale.service.LocaleService;                                                 </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  38  import org.broadleafcommerce.common.money.Money;                                                                  </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  39  import org.broadleafcommerce.common.presentation.client.OperationType;                                            </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  40  import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                           </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  41  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  42  import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                           </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  43  import org.broadleafcommerce.common.util.FormatUtil;                                                              </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  44  import org.broadleafcommerce.common.util.StringUtil;                                                              </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  45  import org.broadleafcommerce.common.util.ValidationUtil;                                                          </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  46  import org.broadleafcommerce.common.util.dao.TQJoin;                                                              </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  47  import org.broadleafcommerce.common.util.dao.TQOrder;                                                             </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  48  import org.broadleafcommerce.common.util.dao.TQRestriction;                                                       </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  49  import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                                   </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  50  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  51  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-8970007776478821592" onmouseenter="enter('-8970007776478821592');" onmouseout="out('-8970007776478821592');" style="">  52  import org.broadleafcommerce.openadmin.dto.CriteriaTransferObject;                                                </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  53  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  54  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-3504337137222904883" onmouseenter="enter('-3504337137222904883');" onmouseout="out('-3504337137222904883');" style="">  55  import org.broadleafcommerce.openadmin.dto.EntityResult;                                                          </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  56  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  57  import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                                 </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  58  import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                            </span>
<span class="7333603239996951733" onmouseenter="enter('7333603239996951733');" onmouseout="out('7333603239996951733');" style="">  59  import org.broadleafcommerce.openadmin.dto.MergedPropertyType;                                                    </span>
<span class="5387066876064049952" onmouseenter="enter('5387066876064049952');" onmouseout="out('5387066876064049952');" style="">  60  import org.broadleafcommerce.openadmin.dto.PersistencePackage;                                                    </span>
<span class="8079401142601162613" onmouseenter="enter('8079401142601162613');" onmouseout="out('8079401142601162613');" style="">  61  import org.broadleafcommerce.openadmin.dto.PersistencePerspective;                                                </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  62  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="-3940598810559639452" onmouseenter="enter('-3940598810559639452');" onmouseout="out('-3940598810559639452');" style="">  63  import org.broadleafcommerce.openadmin.dto.SortDirection;                                                         </span>

<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style="">  64  import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;      </span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  65  import org.broadleafcommerce.openadmin.server.service.ValidationException;                                        </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  66  import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;               </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  67  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                           </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  68  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                             </span>
<span class="-1323272794227318551" onmouseenter="enter('-1323272794227318551');" onmouseout="out('-1323272794227318551');" style="">  69  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaConversionException;    </span>
<span class="-4125327013079009203" onmouseenter="enter('-4125327013079009203');" onmouseout="out('-4125327013079009203');" style="">  70  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaTranslator;             </span>
<span class="7637154476457570035" onmouseenter="enter('7637154476457570035');" onmouseout="out('7637154476457570035');" style="">  71  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath;                      </span>
<span class="1663650800150084878" onmouseenter="enter('1663650800150084878');" onmouseout="out('1663650800150084878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPathBuilder;               </span>
<span class="7520439988643323618" onmouseenter="enter('7520439988643323618');" onmouseout="out('7520439988643323618');" style="">  73  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FilterMapping;                  </span>
<span class="-8754722050104399052" onmouseenter="enter('-8754722050104399052');" onmouseout="out('-8754722050104399052');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.Restriction;                    </span>
<span class="-4250688222066528552" onmouseenter="enter('-4250688222066528552');" onmouseout="out('-4250688222066528552');" style="">  75  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.RestrictionFactory;             </span>

<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style="">  76  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter; </span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style="">  77  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;  </span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style="">  78  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;</span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style="">  79  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;    </span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  80  import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  80  import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style="">  81  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;       </span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  82  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  82  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequeðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style="">  83  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;</span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style="">  84  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;    </span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style="">  85  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;   </span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  86  import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;              </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style="">  87  import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;       </span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  88  import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;            </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  89  import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                              </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  90  import org.hibernate.FlushMode;                                                                                   </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  91  import org.hibernate.Session;                                                                                     </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  92  import org.springframework.beans.BeansException;                                                                  </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  93 +import org.springframework.beans.factory.annotation.Value;                                                        </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  94  import org.springframework.context.ApplicationContext;                                                            </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  95  import org.springframework.context.ApplicationContextAware;                                                       </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style="">  96  import org.springframework.context.annotation.Primary;                                                            </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="">  97  import org.springframework.context.annotation.Scope;                                                              </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="">  98  import org.springframework.stereotype.Component;                                                                  </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  99  import org.springframework.util.Assert;                                                                           </span>
<span  style=""> 100                                                                                                                    </span>


<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style=""> 101  import java.io.Serializable;                                                                                      </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style=""> 102  import java.lang.reflect.Field;                                                                                   </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style=""> 103  import java.lang.reflect.InvocationTargetException;                                                               </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style=""> 104  import java.lang.reflect.Method;                                                                                  </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style=""> 105  import java.lang.reflect.ParameterizedType;                                                                       </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 106  import java.math.BigDecimal;                                                                                      </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style=""> 107  import java.sql.Timestamp;                                                                                        </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style=""> 108  import java.text.DecimalFormat;                                                                                   </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style=""> 109  import java.text.NumberFormat;                                                                                    </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 110  import java.text.SimpleDateFormat;                                                                                </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 111  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 112  import java.util.Arrays;                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style=""> 113  import java.util.Calendar;                                                                                        </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style=""> 114  import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 115  import java.util.Collections;                                                                                     </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style=""> 116  import java.util.Comparator;                                                                                      </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 117  import java.util.Date;                                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 118  import java.util.HashMap;                                                                                         </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 119 +import java.util.Iterator;                                                                                        </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 120  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 121  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 122  import java.util.Map;                                                                                             </span>

<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 123  import java.util.Map.Entry;                                                                                       </span>
<span class="-61738751204335518" onmouseenter="enter('-61738751204335518');" onmouseout="out('-61738751204335518');" style=""> 124  import java.util.StringTokenizer;                                                                                 </span>
<span  style=""> 125                                                                                                                    </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style=""> 126  import javax.annotation.PostConstruct;                                                                            </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 127  import javax.annotation.Resource;                                                                                 </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 128 +import javax.persistence.criteria.CriteriaBuilder;                                                                </span>
<span class="2535099540501772744" onmouseenter="enter('2535099540501772744');" onmouseout="out('2535099540501772744');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 129 +import javax.persistence.criteria.From;                                                                           </span>
<span class="5773424155764142692" onmouseenter="enter('5773424155764142692');" onmouseout="out('5773424155764142692');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 130 +import javax.persistence.criteria.Path;                                                                           </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 131 +import javax.persistence.criteria.Predicate;                                                                      </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +import javax.persistence.criteria.Root;                                                                           </span>
<span class="1578689085913073314" onmouseenter="enter('1578689085913073314');" onmouseout="out('1578689085913073314');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +import javax.persistence.criteria.Subquery;                                                                       </span>
<span  style=""> 134                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 135  /**                                                                                                               </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style=""> 136   * @author jfischer                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 137   */                                                                                                               </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style=""> 138  @Primary                                                                                                          </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style=""> 139  @Component(&quot;blBasicPersistenceModule&quot;)                                                                            </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style=""> 140  @Scope(&quot;prototype&quot;)                                                                                               </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style=""> 141  public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {         </span>
<span  style=""> 142                                                                                                                    </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 143      private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                               </span>
<span  style=""> 144                                                                                                                    </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 145      public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 146      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span  style=""> 147                                                                                                                    </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 148      protected ApplicationContext applicationContext;                                                              </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 149      protected PersistenceManager persistenceManager;                                                              </span>
<span  style=""> 150                                                                                                                    </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 151      @Resource(name = &quot;blEntityValidatorService&quot;)                                                                  </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 152      protected EntityValidatorService entityValidatorService;                                                      </span>
<span  style=""> 153                                                                                                                    </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 154      @Resource(name = &quot;blPersistenceProviders&quot;)                                                                    </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 155      protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 155      protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;()ðŸ”µ</abbr></span>
<span  style=""> 156                                                                                                                    </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 157      @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                          </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 158      protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                             </span>
<span  style=""> 159                                                                                                                    </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 160      @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                         </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 161      protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                           </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 163      @Resource(name = &quot;blCriteriaTranslator&quot;)                                                                      </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 164      protected CriteriaTranslator criteriaTranslator;                                                              </span>
<span  style=""> 165                                                                                                                    </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 166      @Resource(name = &quot;blRestrictionFactory&quot;)                                                                      </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 167      protected RestrictionFactory restrictionFactory;                                                              </span>
<span  style=""> 168                                                                                                                    </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 169      @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                                  </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 170      protected BasicPersistenceModuleExtensionManager extensionManager;                                            </span>
<span  style=""> 171                                                                                                                    </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 172      @Resource(name = &quot;blFetchWrapper&quot;)                                                                            </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 173      protected FetchWrapper fetchWrapper;                                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 174 +                                                                                                                  </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +    @Value(&quot;${use.translation.search:false}&quot;)                                                                     </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +    protected boolean useTranslationSearch;                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 177 +                                                                                                                  </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 178 +    @Resource(name = &quot;blLocaleService&quot;)                                                                           </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 179 +    protected LocaleService localeService;                                                                        </span>
<span  style=""> 180                                                                                                                    </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 181      @PostConstruct                                                                                                </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 182      public void init() {                                                                                          </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 183          Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {                  </span>
<span  style=""> 184                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 185              @Override                                                                                             </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 186              public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {                        </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 187                  return Integer.compare(o1.getOrder(), o2.getOrder());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 189          });                                                                                                       </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 190          Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {                    </span>
<span  style=""> 191                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 192              @Override                                                                                             </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 193              public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {              </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 194                  return Integer.compare(o1.getOrder(), o2.getOrder());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 196          });                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197      }                                                                                                             </span>
<span  style=""> 198                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 199      @Override                                                                                                     </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 200      public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {              </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 201          this.applicationContext = applicationContext;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202      }                                                                                                             </span>
<span  style=""> 203                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 204      @Override                                                                                                     </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 205      public boolean isCompatible(OperationType operationType) {                                                    </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""> 206          return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207      }                                                                                                             </span>
<span  style=""> 208                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 209      @Override                                                                                                     </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 210      public FieldManager getFieldManager() {                                                                       </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 211          return persistenceManager.getDynamicEntityDao().getFieldManager();                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212      }                                                                                                             </span>
<span  style=""> 213                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 214      @Override                                                                                                     </span>
<span class="6457346333778015301" onmouseenter="enter('6457346333778015301');" onmouseout="out('6457346333778015301');" style=""> 215      public FieldManager getFieldManager(boolean cleanFieldManger) {                                               </span>
<span class="-7823051609966781187" onmouseenter="enter('-7823051609966781187');" onmouseout="out('-7823051609966781187');" style=""> 216          return persistenceManager.getDynamicEntityDao().getFieldManager(cleanFieldManger);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217      }                                                                                                             </span>
<span  style=""> 218                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 219      @Override                                                                                                     </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 220      public DecimalFormat getDecimalFormatter() {                                                                  </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 221          BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();                       </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 222          Locale locale = brc.getJavaLocale();                                                                      </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 223          DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                                  </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 224          format.applyPattern(&quot;0.########&quot;);                                                                        </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 225          format.setGroupingUsed(false);                                                                            </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 226          return format;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227      }                                                                                                             </span>
<span  style=""> 228                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 229      @Override                                                                                                     </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 230      public SimpleDateFormat getSimpleDateFormatter() {                                                            </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 231          return FormatUtil.getDateFormat();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232      }                                                                                                             </span>
<span  style=""> 233                                                                                                                    </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""> 234      protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {       </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 235          if (metadata == null) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 236              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237          }                                                                                                         </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 238          Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                                 </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 239          for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                                      </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 240              String fieldName = entry.getKey();                                                                    </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 241              FieldMetadata md = entry.getValue();                                                                  </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 242              // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 242              // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but alsðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 243              // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 243              // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 244              // can appropriate handle filtration and population                                                   </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 245              if (entry.getValue() instanceof BasicFieldMetadata) {                                                 </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 246                  newMap.put(fieldName, md);                                                                        </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 247              } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 247              } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ðŸ”µ</abbr></span>
<span class="-8485840589316329792" onmouseenter="enter('-8485840589316329792');" onmouseout="out('-8485840589316329792');" style=""> 248                  newMap.put(fieldName,                                                                             </span>
<span class="-7674878801561950856" onmouseenter="enter('-7674878801561950856');" onmouseout="out('-7674878801561950856');" style=""><abbr title=" 249                          (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY));"> 249                          (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvideðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251          }                                                                                                         </span>
<span  style=""> 252                                                                                                                    </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 253          return newMap;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254      }                                                                                                             </span>
<span  style=""> 255                                                                                                                    </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 256      protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                                      </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 257          Class&lt;?&gt; response;                                                                                        </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 258          switch (fieldType) {                                                                                      </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 259              case BOOLEAN:                                                                                         </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 260                  response = Boolean.TYPE;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 261                  break;                                                                                            </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 262              case DATE:                                                                                            </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 263                  response = Date.class;                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 264                  break;                                                                                            </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 265              case DECIMAL:                                                                                         </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 266                  response = BigDecimal.class;                                                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 267                  break;                                                                                            </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 268              case MONEY:                                                                                           </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 269                  response = Money.class;                                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 270                  break;                                                                                            </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 271              case INTEGER:                                                                                         </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 272                  response = Integer.TYPE;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 273                  break;                                                                                            </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 274              case UNKNOWN:                                                                                         </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 275                  response = null;                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 276                  break;                                                                                            </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 277              default:                                                                                              </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 278                  response = String.class;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 279                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280          }                                                                                                         </span>
<span  style=""> 281                                                                                                                    </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 282          return response;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283      }                                                                                                             </span>
<span  style=""> 284                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 285      @Override                                                                                                     </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 286      public Serializable createPopulatedInstance(Serializable instance, Entity entity,                             </span>
<span class="7620597898847416584" onmouseenter="enter('7620597898847416584');" onmouseout="out('7620597898847416584');" style=""> 287              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException {          </span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 288          return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289      }                                                                                                             </span>
<span  style=""> 290                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291      @Override                                                                                                     </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 292      public Serializable createPopulatedInstance(Serializable instance, Entity entity,                             </span>
<span class="-6938882731089232507" onmouseenter="enter('-6938882731089232507');" onmouseout="out('-6938882731089232507');" style=""><abbr title=" 293              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 293              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties)ðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""> 294          final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);    </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 295          FieldManager fieldManager = getFieldManager();                                                            </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 296          boolean handled = false;                                                                                  </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 297          for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {                     </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 298              MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 298              MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 299              if (MetadataProviderResponse.NOT_HANDLED != response) {                                               </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 300                  handled = true;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301              }                                                                                                     </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 302              if (MetadataProviderResponse.HANDLED_BREAK == response) {                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 303                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305          }                                                                                                         </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 306          if (!handled) {                                                                                           </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 307              defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 307              defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308          }                                                                                                         </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 309          //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 309          //Order media field, map field and rule builder fields last, as they will have some validation components ðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 310          Property[] sortedProperties = entity.getProperties();                                                     </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 311          Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                                </span>
<span  style=""> 312                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 313              @Override                                                                                             </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 314              public int compare(Property o1, Property o2) {                                                        </span>
<span class="4801041391951231473" onmouseenter="enter('4801041391951231473');" onmouseout="out('4801041391951231473');" style=""> 315                  BasicFieldMetadata mo1 = (BasicFieldMetadata) mergedProperties.get(o1.getName());                 </span>
<span class="8712312491906706674" onmouseenter="enter('8712312491906706674');" onmouseout="out('8712312491906706674');" style=""> 316                  BasicFieldMetadata mo2 = (BasicFieldMetadata) mergedProperties.get(o2.getName());                 </span>
<span class="5597729834250389465" onmouseenter="enter('5597729834250389465');" onmouseout="out('5597729834250389465');" style=""><abbr title=" 317                  boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo1.getFieldType() ||"> 317                  boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedðŸ”µ</abbr></span>
<span class="-5228840553210193176" onmouseenter="enter('-5228840553210193176');" onmouseout="out('-5228840553210193176');" style=""> 318                          SupportedFieldType.RULE_WITH_QUANTITY==mo1.getFieldType() ||                              </span>
<span class="-2825740162482404988" onmouseenter="enter('-2825740162482404988');" onmouseout="out('-2825740162482404988');" style=""> 319                          SupportedFieldType.RULE_SIMPLE_TIME==mo1.getFieldType() ||                                </span>
<span class="-2758640436691235457" onmouseenter="enter('-2758640436691235457');" onmouseout="out('-2758640436691235457');" style=""><abbr title=" 320                          SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 320                          SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELðŸ”µ</abbr></span>
<span class="4460185052151715074" onmouseenter="enter('4460185052151715074');" onmouseout="out('4460185052151715074');" style=""><abbr title=" 321                  boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo2.getFieldType() ||"> 321                  boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedðŸ”µ</abbr></span>
<span class="1101038090453452590" onmouseenter="enter('1101038090453452590');" onmouseout="out('1101038090453452590');" style=""> 322                          SupportedFieldType.RULE_WITH_QUANTITY==mo2.getFieldType() ||                              </span>
<span class="-8197603398477948159" onmouseenter="enter('-8197603398477948159');" onmouseout="out('-8197603398477948159');" style=""> 323                          SupportedFieldType.RULE_SIMPLE_TIME==mo2.getFieldType() ||                                </span>
<span class="-275758415706895485" onmouseenter="enter('-275758415706895485');" onmouseout="out('-275758415706895485');" style=""><abbr title=" 324                          SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 324                          SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELðŸ”µ</abbr></span>
<span class="-2026914999367619686" onmouseenter="enter('-2026914999367619686');" onmouseout="out('-2026914999367619686');" style=""> 325                  if (isLate1 &amp;&amp; !isLate2) {                                                                        </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 326                      return 1;                                                                                     </span>
<span class="-3681644454129428558" onmouseenter="enter('-3681644454129428558');" onmouseout="out('-3681644454129428558');" style=""> 327                  } else if (!isLate1 &amp;&amp; isLate2) {                                                                 </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 328                      return -1;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329                  }                                                                                                 </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 330                  return 0;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 332          });                                                                                                       </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 333          Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 333          Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.ðŸ”µ</abbr></span>
<span class="2352236362444167215" onmouseenter="enter('2352236362444167215');" onmouseout="out('2352236362444167215');" style=""> 334          FlushMode originalFlushMode = session.getFlushMode();                                                     </span>

<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 335          try {                                                                                                     </span>
<span class="-20881645087342177" onmouseenter="enter('-20881645087342177');" onmouseout="out('-20881645087342177');" style=""> 336              session.setFlushMode(FlushMode.MANUAL);                                                               </span>

<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 337              RuntimeException entityPersistenceException = null;                                                   </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 338              for (Property property : sortedProperties) {                                                          </span>
<span class="1357949122558141334" onmouseenter="enter('1357949122558141334');" onmouseout="out('1357949122558141334');" style=""> 339                  BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName());      </span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 340                  Class&lt;?&gt; returnType;                                                                              </span>
<span class="8439611434668123958" onmouseenter="enter('8439611434668123958');" onmouseout="out('8439611434668123958');" style=""><abbr title=" 341                  if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWith(&quot;__&quot;)) {"> 341                  if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWithðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 342                      Field field = fieldManager.getField(instance.getClass(), property.getName());                 </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 343                      if (field == null) {                                                                          </span>
<span class="2139581581669054854" onmouseenter="enter('2139581581669054854');" onmouseout="out('2139581581669054854');" style=""><abbr title=" 344                          LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 344                          LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitiðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 345                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346                      }                                                                                             </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 347                      returnType = field.getType();                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 348                  } else {                                                                                          </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 349                      if (metadata == null) {                                                                       </span>
<span class="8114946394939525604" onmouseenter="enter('8114946394939525604');" onmouseout="out('8114946394939525604');" style=""><abbr title=" 350                          LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 350                          LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.saðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 351                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352                      }                                                                                             </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 353                      returnType = getMapFieldType(instance, fieldManager, property);                               </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 354                      if (returnType == null) {                                                                     </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 355                          returnType = getBasicBroadleafType(metadata.getFieldType());                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                  }                                                                                                 </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 358                  if (returnType == null) {                                                                         </span>
<span class="8716882681587381997" onmouseenter="enter('8716882681587381997');" onmouseout="out('8716882681587381997');" style=""><abbr title=" 359                      throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + property.getName() + &quot;)&quot;);"> 359                      throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + proðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360                  }                                                                                                 </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 361                  String value = property.getValue();                                                               </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 362                  if (metadata != null) {                                                                           </span>
<span  style=""> 363                                                                                                                    </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 364                      if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                             </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 365                          if (value == null) {                                                                      </span>
<span class="3558706163819897442" onmouseenter="enter('3558706163819897442');" onmouseout="out('3558706163819897442');" style=""> 366                              value = &quot;false&quot;;                                                                      </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367                          }                                                                                         </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 368                      } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                         </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 369                          if (StringUtils.isEmpty(value)) {                                                         </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 370                              value = null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372                      }                                                                                             </span>
<span  style=""> 373                                                                                                                    </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 374                      if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 374                      if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 375                          boolean isValid = true;                                                                   </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 376                          PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 376                          PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 377                          handled = false;                                                                          </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 378                          if (value != null) {                                                                      </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 379                              for (PopulateValueRequestValidator validator : populateValidators) {                  </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""> 380                                  PropertyValidationResult validationResult = validator.validate(request, instance);</span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 381                                  if (!validationResult.isValid()) {                                                </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 382                                      entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 382                                      entity.addValidationError(property.getName(), validationResult.getErrorMessageðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 383                                      isValid = false;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386                          }                                                                                         </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 387                          if (isValid) {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 388                              try {                                                                                 </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 389                                  boolean isBreakDetected = false;                                                  </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 390                                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 390                                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvidersðŸ”µ</abbr></span>
<span class="-2175392382273122455" onmouseenter="enter('-2175392382273122455');" onmouseout="out('-2175392382273122455');" style=""><abbr title=" 391                                      if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {"> 391                                      if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != nuðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 392                                          MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 392                                          MetadataProviderResponse response = fieldPersistenceProvider.populateValueðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 393                                          if (MetadataProviderResponse.NOT_HANDLED != response) {                   </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 394                                              handled = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395                                          }                                                                         </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 396                                          if (MetadataProviderResponse.HANDLED_BREAK == response) {                 </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 397                                              isBreakDetected = true;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398                                          }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400                                  }                                                                                 </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 401                                  if (!handled) {                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 402                                      if (value == null) {                                                          </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 403                                          property.setIsDirty(true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404                                      }                                                                             </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 405                                      defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 405                                      defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, ðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 406                                      if (value == null) {                                                          </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 407                                          fieldManager.setFieldValue(instance, property.getName(), null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409                                  }                                                                                 </span>
<span class="8793300741685062154" onmouseenter="enter('8793300741685062154');" onmouseout="out('8793300741685062154');" style=""> 410                              } catch (ParentEntityPersistenceException | javax.validation.ValidationException e) { </span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 411                                  entityPersistenceException = e;                                                   </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 412                                  cleanupFailedPersistenceAttempt(instance);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 413                                  break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418              }                                                                                                     </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 419              // Only check validation if not the initial add                                                       </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 420              if (!entity.isPreAdd()) {                                                                             </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 421                  validate(entity, instance, mergedProperties, validateUnsubmittedProperties);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422              }                                                                                                     </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""> 423              //if validation failed, refresh the current instance so that none of the changes will be persisted    </span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 424              if (entity.isValidationFailure()) {                                                                   </span>
<span class="-5245333264083845326" onmouseenter="enter('-5245333264083845326');" onmouseout="out('-5245333264083845326');" style=""> 425                  //only refresh the instance if it was managed to begin with                                       </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""> 426                  if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {     </span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 427                      persistenceManager.getDynamicEntityDao().refresh(instance);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428                  }                                                                                                 </span>
<span  style=""> 429                                                                                                                    </span>
<span class="-2797407664577460515" onmouseenter="enter('-2797407664577460515');" onmouseout="out('-2797407664577460515');" style=""> 430                  //re-initialize the valid properties for the entity in order to deal with the potential of not    </span>
<span class="7620881433898036398" onmouseenter="enter('7620881433898036398');" onmouseout="out('7620881433898036398');" style=""> 431                  //completely sending over all checkbox/radio fields                                               </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 432                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 433                  entityList.add(instance);                                                                         </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 434                  Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];                   </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 435                  invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());                        </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 436                  invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                            </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 437                  invalid.overridePropertyValues(entity);                                                           </span>
<span  style=""> 438                                                                                                                    </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 439                  String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 439                  String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.gðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 440                  throw new ValidationException(invalid, message);                                                  </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 441              } else if (entityPersistenceException != null) {                                                      </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 442                  throw ExceptionHelper.refineException(entityPersistenceException.getCause());                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 443              } else {                                                                                              </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 444                  fieldManager.persistMiddleEntities();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445              }                                                                                                     </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 446          } catch (IllegalAccessException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 447              throw new PersistenceException(e);                                                                    </span>
<span class="6243028624057522413" onmouseenter="enter('6243028624057522413');" onmouseout="out('6243028624057522413');" style=""> 448          } catch (InstantiationException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 449              throw new PersistenceException(e);                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 450          } finally {                                                                                               </span>
<span class="6063597376304480914" onmouseenter="enter('6063597376304480914');" onmouseout="out('6063597376304480914');" style=""> 451              session.setFlushMode(originalFlushMode);                                                              </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452          }                                                                                                         </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 453          return instance;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454      }                                                                                                             </span>
<span  style=""> 455                                                                                                                    </span>
<span class="461529783746476585" onmouseenter="enter('461529783746476585');" onmouseout="out('461529783746476585');" style=""> 456      protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance, </span>
<span class="3885863412641560188" onmouseenter="enter('3885863412641560188');" onmouseout="out('3885863412641560188');" style=""><abbr title=" 457                                               Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 457                                               Boolean setId, BasicFieldMetadata metadata, Entity entity, String valðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 458          Boolean mutable = metadata.getMutable();                                                                  </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 459          Boolean readOnly = metadata.getReadOnly();                                                                </span>
<span class="949029723485795199" onmouseenter="enter('949029723485795199');" onmouseout="out('949029723485795199');" style=""><abbr title=" 460          boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; property.getEnabled();"> 460          boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; propertyðŸ”µ</abbr></span>
<span  style=""> 461                                                                                                                    </span>
<span class="-5466596695953259298" onmouseenter="enter('-5466596695953259298');" onmouseout="out('-5466596695953259298');" style=""> 462          if (generalConditionsMet &amp;&amp; value == null) {                                                              </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 463              boolean currentValueIsNotNull = false;                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 464              try {                                                                                                 </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 465                  currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;         </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 466              } catch (FieldNotAvailableException e) {                                                              </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 467                  throw new IllegalArgumentException(e);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468              }                                                                                                     </span>
<span  style=""> 469                                                                                                                    </span>
<span class="2174296922893169949" onmouseenter="enter('2174296922893169949');" onmouseout="out('2174296922893169949');" style=""> 470              boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;                 </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 471              boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;                  </span>
<span  style=""> 472                                                                                                                    </span>
<span class="-802153418821632058" onmouseenter="enter('-802153418821632058');" onmouseout="out('-802153418821632058');" style=""> 473              return currentValueIsNotNull &amp;&amp; !entity.isPreAdd() &amp;&amp; valueIsNotNullId &amp;&amp; valueIsNotPassword;         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474          }                                                                                                         </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 475          return generalConditionsMet;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476      }                                                                                                             </span>
<span  style=""> 477                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 478      @Override                                                                                                     </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 479      public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 479      public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 480          List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                              </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 481          records.add(record);                                                                                      </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 482          Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 482          Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 483          return productEntities[0];                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484      }                                                                                                             </span>
<span  style=""> 485                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 486      @Override                                                                                                     </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 487      public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 487      public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SerializabðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 488          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 488          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 489          return getRecord(mergedProperties, record, null, null);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490      }                                                                                                             </span>
<span  style=""> 491                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 492      @Override                                                                                                     </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 493      public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 493      public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? ðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 494          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 494          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 495          return getRecords(mergedProperties, records, null, null, null);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496      }                                                                                                             </span>
<span  style=""> 497                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 498      @Override                                                                                                     </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 499      public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 499      public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persisteðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 500          return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 500          return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspectiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501      }                                                                                                             </span>
<span  style=""> 502                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 503      @Override                                                                                                     </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 504      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 504      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; reðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 505          return getRecords(primaryMergedProperties, records, null, null, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506      }                                                                                                             </span>
<span  style=""> 507                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 508      @Override                                                                                                     </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 509      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,                      </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 510                                 List&lt;? extends Serializable&gt; records,                                              </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 511                                 Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,                    </span>
<span class="-4377947839867578072" onmouseenter="enter('-4377947839867578072');" onmouseout="out('-4377947839867578072');" style=""> 512                                 String pathToTargetObject) {                                                       </span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 513          return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 513          return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514      }                                                                                                             </span>
<span  style=""> 515                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 516      @Override                                                                                                     </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 517      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,                      </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 518                                 List&lt;? extends Serializable&gt; records,                                              </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 519                                 Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,                    </span>
<span class="8335655514773173486" onmouseenter="enter('8335655514773173486');" onmouseout="out('8335655514773173486');" style=""> 520                                 String pathToTargetObject,                                                         </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 521                                 String[] customCriteria) {                                                         </span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 522          Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 522          Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedPrðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 523          Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 523          Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 524          Entity[] entities = new Entity[records.size()];                                                           </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 525          int j = 0;                                                                                                </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 526          for (Serializable recordEntity : records) {                                                               </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 527              Serializable entity;                                                                                  </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 528              if (pathToTargetObject != null) {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 529                  try {                                                                                             </span>
<span class="-5492139625117264664" onmouseenter="enter('-5492139625117264664');" onmouseout="out('-5492139625117264664');" style=""> 530                      entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObject);    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 531                  } catch (Exception e) {                                                                           </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 532                      throw new PersistenceException(e);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 534              } else {                                                                                              </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 535                  entity = recordEntity;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536              }                                                                                                     </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 537              Entity entityItem = new Entity();                                                                     </span>
<span class="3587737780108495887" onmouseenter="enter('3587737780108495887');" onmouseout="out('3587737780108495887');" style=""> 538              entityItem.setType(new String[] { entity.getClass().getName() });                                     </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 539              entities[j] = entityItem;                                                                             </span>
<span  style=""> 540                                                                                                                    </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 541              List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());                       </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""> 542              extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);        </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 543              if (alternateMergedProperties != null) {                                                              </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 544                  extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 544                  extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriterðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545              }                                                                                                     </span>
<span  style=""> 546                                                                                                                    </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 547              // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 548              try {                                                                                                 </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 549                  Property p = new Property();                                                                      </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 550                  p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                             </span>
<span class="-280105646141823521" onmouseenter="enter('-280105646141823521');" onmouseout="out('-280105646141823521');" style=""> 551                  String mainEntityName = (String) MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;);           </span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 552                  p.setValue(mainEntityName);                                                                       </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 553                  props.add(p);                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 554              } catch (Exception e) {                                                                               </span>
<span class="8396621627303093896" onmouseenter="enter('8396621627303093896');" onmouseout="out('8396621627303093896');" style=""> 555                  LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;,              </span>
<span class="210384044775512031" onmouseenter="enter('210384044775512031');" onmouseout="out('210384044775512031');" style=""> 556                          entity.getClass().getName()), e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557              }                                                                                                     </span>
<span  style=""> 558                                                                                                                    </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 559              // Try to add the alternate id property if available                                                  </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 560              if (alternateMergedProperties != null) {                                                              </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 561                  for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {                 </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 562                      if (entry.getValue() instanceof BasicFieldMetadata) {                                         </span>
<span class="-3735738621021538581" onmouseenter="enter('-3735738621021538581');" onmouseout="out('-3735738621021538581');" style=""> 563                          if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ID) {    </span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""> 564                              Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();  </span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 565                              alternateOnEntity.put(entry.getKey(), entry.getValue());                              </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 566                              List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                                    </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 567                              extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 567                              extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 568                              List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                                  </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 569                              for (Property prop : props2) {                                                        </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 570                                  if (!prop.getName().startsWith(&quot;__&quot;)) {                                           </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 571                                      filtered.add(prop);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573                              }                                                                                     </span>
<span class="7776429612545514862" onmouseenter="enter('7776429612545514862');" onmouseout="out('7776429612545514862');" style=""> 574                              if (filtered.size() == 1 &amp;&amp; !filtered.get(0).getName().contains(&quot;.&quot;)) {               </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 575                                  Property alternateIdProp = filtered.get(0);                                       </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 576                                  alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                                   </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 577                                  props.add(alternateIdProp);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 582              }                                                                                                     </span>
<span  style=""> 583                                                                                                                    </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 584              Property[] properties = new Property[props.size()];                                                   </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 585              properties = props.toArray(properties);                                                               </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 586              entityItem.setProperties(properties);                                                                 </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 587              j++;                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588          }                                                                                                         </span>
<span  style=""> 589                                                                                                                    </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 590          return entities;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591      }                                                                                                             </span>
<span  style=""> 592                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 593      @Override                                                                                                     </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 594      public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                                   </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 595          return fetchWrapper.getRecords(fetchExtractionRequest);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596      }                                                                                                             </span>
<span  style=""> 597                                                                                                                    </span>
<span class="2943865710042007016" onmouseenter="enter('2943865710042007016');" onmouseout="out('2943865710042007016');" style=""> 598      protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties,             </span>
<span class="-3214801195397343505" onmouseenter="enter('-3214801195397343505');" onmouseout="out('-3214801195397343505');" style=""> 599                                                           Serializable entity,                                     </span>
<span class="6006324038342333129" onmouseenter="enter('6006324038342333129');" onmouseout="out('6006324038342333129');" style=""> 600                                                           List&lt;Property&gt; props,                                    </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 601                                                           String[] customCriteria) {                               </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 602          FieldManager fieldManager = getFieldManager();                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 603          try {                                                                                                     </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 604              if (entity instanceof AdminMainEntity) {                                                              </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 605                  //Create an invisible property for the admin main entity name, if applicable.                     </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 606                  //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive               </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 607                  //its display name.                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 608                  try {                                                                                             </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 609                      Property propertyItem = new Property();                                                       </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 610                      propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                              </span>
<span class="-3439538412113948348" onmouseenter="enter('-3439538412113948348');" onmouseout="out('-3439538412113948348');" style=""> 611                      propertyItem.setValue(((AdminMainEntity) entity).getMainEntityName());                        </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 612                      props.add(propertyItem);                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 613                  } catch (Exception e) {                                                                           </span>
<span class="-6660676054828691164" onmouseenter="enter('-6660676054828691164');" onmouseout="out('-6660676054828691164');" style=""><abbr title=" 614                      //do nothing here except for not add the property. Exceptions could occur when there is a validation"> 614                      //do nothing here except for not add the property. Exceptions could occur when there is a valiðŸ”µ</abbr></span>
<span class="6622622754482242268" onmouseenter="enter('6622622754482242268');" onmouseout="out('6622622754482242268');" style=""><abbr title=" 615                      //issue and some properties/relationships that are used for gleaning the main entity name end up"> 615                      //issue and some properties/relationships that are used for gleaning the main entity name end ðŸ”µ</abbr></span>
<span class="-3324578144663288556" onmouseenter="enter('-3324578144663288556');" onmouseout="out('-3324578144663288556');" style=""> 616                      //not being set                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618              }                                                                                                     </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 619              for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                              </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 620                  String property = entry.getKey();                                                                 </span>
<span class="-6557658272043627235" onmouseenter="enter('-6557658272043627235');" onmouseout="out('-6557658272043627235');" style=""> 621                  BasicFieldMetadata metadata = (BasicFieldMetadata) entry.getValue();                              </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 622                  if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 622                  if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.gðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 623                      boolean proceed = true;                                                                       </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 624                      if (property.contains(&quot;.&quot;)) {                                                                 </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 625                          StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                              </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 626                          Object testObject = entity;                                                               </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 627                          while (tokens.hasMoreTokens()) {                                                          </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 628                              String token = tokens.nextToken();                                                    </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 629                              if (tokens.hasMoreTokens()) {                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 630                                  try {                                                                             </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 631                                      testObject = fieldManager.getFieldValue(testObject, token);                   </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 632                                  } catch (FieldNotAvailableException e) {                                          </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 633                                      proceed = false;                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 634                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635                                  }                                                                                 </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 636                                  if (testObject == null) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 637                                      Property propertyItem = new Property();                                       </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 638                                      propertyItem.setName(property);                                               </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 639                                      if (props.contains(propertyItem)) {                                           </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 640                                          proceed = false;                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 641                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642                                      }                                                                             </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 643                                      propertyItem.setValue(null);                                                  </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 644                                      props.add(propertyItem);                                                      </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 645                                      proceed = false;                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 646                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650                      }                                                                                             </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 651                      if (!proceed) {                                                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 652                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653                      }                                                                                             </span>
<span  style=""> 654                                                                                                                    </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 655                      boolean isFieldAccessible = true;                                                             </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 656                      Object value = null;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 657                      try {                                                                                         </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 658                          value = fieldManager.getFieldValue(entity, property);                                     </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 659                      } catch (FieldNotAvailableException e) {                                                      </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 660                          isFieldAccessible = false;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661                      }                                                                                             </span>
<span class="-1242713994964830615" onmouseenter="enter('-1242713994964830615');" onmouseout="out('-1242713994964830615');" style=""> 662                      checkField:                                                                                   </span>
<span class="5677081435180812955" onmouseenter="enter('5677081435180812955');" onmouseout="out('5677081435180812955');" style=""> 663                      {                                                                                             </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 664                          if (isFieldAccessible) {                                                                  </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 665                              Property propertyItem = new Property();                                               </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 666                              propertyItem.setName(property);                                                       </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 667                              if (props.contains(propertyItem)) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 668                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669                              }                                                                                     </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 670                              props.add(propertyItem);                                                              </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 671                              String displayVal = propertyItem.getDisplayValue();                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 672                              boolean handled = false;                                                              </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 673                              for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) { </span>
<span class="-6209348320960420357" onmouseenter="enter('-6209348320960420357');" onmouseout="out('-6209348320960420357');" style=""> 674                                  MetadataProviderResponse response = fieldPersistenceProvider.extractValue(        </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""> 675                                          new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, </span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""> 676                                                  persistenceManager, this, entity, customCriteria), propertyItem); </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 677                                  if (MetadataProviderResponse.NOT_HANDLED != response) {                           </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 678                                      handled = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679                                  }                                                                                 </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 680                                  if (MetadataProviderResponse.HANDLED_BREAK == response) {                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 681                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683                              }                                                                                     </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 684                              if (!handled) {                                                                       </span>
<span class="5660532463858602467" onmouseenter="enter('5660532463858602467');" onmouseout="out('5660532463858602467');" style=""> 685                                  defaultFieldPersistenceProvider.extractValue(                                     </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""> 686                                          new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, </span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""> 687                                                  persistenceManager, this, entity, customCriteria), propertyItem); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688                              }                                                                                     </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 689                              break checkField;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690                          }                                                                                         </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 691                          //try a direct property acquisition via reflection                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 692                          try {                                                                                     </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 693                              String strVal = null;                                                                 </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 694                              Method method;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 695                              try {                                                                                 </span>
<span class="-188265031890242666" onmouseenter="enter('-188265031890242666');" onmouseout="out('-188265031890242666');" style=""> 696                                  //try a &#x27;get&#x27; prefixed mutator first                                              </span>
<span class="2344864789387251771" onmouseenter="enter('2344864789387251771');" onmouseout="out('2344864789387251771');" style=""><abbr title=" 697                                  String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(1, property.length());"> 697                                  String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(ðŸ”µ</abbr></span>
<span class="6434236432742156955" onmouseenter="enter('6434236432742156955');" onmouseout="out('6434236432742156955');" style=""> 698                                  method = entity.getClass().getMethod(temp, new Class[] {});                       </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 699                              } catch (NoSuchMethodException e) {                                                   </span>
<span class="5628920111567796624" onmouseenter="enter('5628920111567796624');" onmouseout="out('5628920111567796624');" style=""> 700                                  method = entity.getClass().getMethod(property, new Class[] {});                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701                              }                                                                                     </span>
<span class="-1268801467547302511" onmouseenter="enter('-1268801467547302511');" onmouseout="out('-1268801467547302511');" style=""> 702                              value = method.invoke(entity, new String[] {});                                       </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 703                              Property propertyItem = new Property();                                               </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 704                              propertyItem.setName(property);                                                       </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 705                              if (props.contains(propertyItem)) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 706                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707                              }                                                                                     </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 708                              props.add(propertyItem);                                                              </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 709                              if (value == null) {                                                                  </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 710                                  strVal = null;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 711                              } else {                                                                              </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 712                                  if (Date.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 713                                      strVal = getSimpleDateFormatter().format((Date) value);                       </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 714                                  } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                  </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""><abbr title=" 715                                      strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));"> 715                                      strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime(ðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 716                                  } else if (Calendar.class.isAssignableFrom(value.getClass())) {                   </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 717                                      strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());       </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 718                                  } else if (Double.class.isAssignableFrom(value.getClass())) {                     </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 719                                      strVal = getDecimalFormatter().format(value);                                 </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 720                                  } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                 </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 721                                      strVal = getDecimalFormatter().format(value);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 722                                  } else {                                                                          </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 723                                      strVal = value.toString();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725                              }                                                                                     </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 726                              propertyItem.setValue(strVal);                                                        </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 727                          } catch (NoSuchMethodException e) {                                                       </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 728                              LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 728                              LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(ðŸ”µ</abbr></span>
<span class="4115063574789816242" onmouseenter="enter('4115063574789816242');" onmouseout="out('4115063574789816242');" style=""> 729                              //do nothing - this property is simply not in the bean                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733              }                                                                                                     </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 734          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 735              throw new PersistenceException(e);                                                                    </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 736          } catch (IllegalAccessException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 737              throw new PersistenceException(e);                                                                    </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 738          } catch (InvocationTargetException e) {                                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 739              throw new PersistenceException(e);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741      }                                                                                                             </span>
<span  style=""> 742                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 743      @Override                                                                                                     </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 744      public String getStringValueFromGetter(Serializable instance, String propertyName)                            </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 745              throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {                     </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 746          Object value = PropertyUtils.getProperty(instance, propertyName);                                         </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 747          return formatValue(value);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 748      }                                                                                                             </span>
<span  style=""> 749                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 750      @Override                                                                                                     </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 751      public String formatValue(Object value) {                                                                     </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 752          String strVal;                                                                                            </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 753          if (value == null) {                                                                                      </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 754              strVal = null;                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 755          } else {                                                                                                  </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 756              if (Date.class.isAssignableFrom(value.getClass())) {                                                  </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 757                  strVal = getSimpleDateFormatter().format((Date) value);                                           </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 758              } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                                      </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 759                  strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));                </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 760              } else if (Calendar.class.isAssignableFrom(value.getClass())) {                                       </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 761                  strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                           </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 762              } else if (Double.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 763                  strVal = getDecimalFormatter().format(value);                                                     </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 764              } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                                     </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 765                  strVal = getDecimalFormatter().format(value);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 766              } else {                                                                                              </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 767                  strVal = value.toString();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769          }                                                                                                         </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 770          return strVal;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771      }                                                                                                             </span>
<span  style=""> 772                                                                                                                    </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 773      protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 773      protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 774          EntityResult entityResult = new EntityResult();                                                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 775          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 776          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 777          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 777          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 778          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 779              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 781          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 782              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 782              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 783              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 783              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 784                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 785                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 786                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 787                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 788                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 789                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 790                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 791                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 792                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 793                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 794                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 795                      );                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 796              if (primaryKey == null) {                                                                             </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 797                  primaryKey = getPrimaryKey(entity, mergedProperties);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 798              }                                                                                                     </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 799              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 799              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getTypeðŸ”µ</abbr></span>
<span  style=""> 800                                                                                                                    </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 801              Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                                  </span>
<span  style=""> 802                                                                                                                    </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 803              if (!entity.isValidationFailure()) {                                                                  </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 804                  //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property         </span>
<span class="4247210219521112592" onmouseenter="enter('4247210219521112592');" onmouseout="out('4247210219521112592');" style=""> 805                  if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null &amp;&amp;                                    </span>
<span class="235375556032951584" onmouseenter="enter('235375556032951584');" onmouseout="out('235375556032951584');" style=""> 806                          entity.findProperty(foreignKey.getSortField()) != null &amp;&amp;                                 </span>
<span class="7175038170339042705" onmouseenter="enter('7175038170339042705');" onmouseout="out('7175038170339042705');" style=""> 807                          entity.findProperty(foreignKey.getSortField()).getValue() != null) {                      </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""> 808                      ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();       </span>
<span class="5598129937237964517" onmouseenter="enter('5598129937237964517');" onmouseout="out('5598129937237964517');" style=""> 809                      extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance,            </span>
<span class="4380637637969964834" onmouseenter="enter('4380637637969964834');" onmouseout="out('4380637637969964834');" style=""> 810                              mergedProperties, primaryKey, result);                                                </span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 811                      instance = result.getResult();                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 812                  } else {                                                                                          </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 813                      instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 813                      instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814                  }                                                                                                 </span>
<span  style=""> 815                                                                                                                    </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 816                  instance = persistenceManager.getDynamicEntityDao().merge(instance);                              </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 817                  if (includeRealEntity) {                                                                          </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 818                      entityResult.setEntityBackingObject(instance);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819                  }                                                                                                 </span>
<span  style=""> 820                                                                                                                    </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 821                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 822                  entityList.add(instance);                                                                         </span>
<span  style=""> 823                                                                                                                    </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 824                  entity = getRecords(mergedProperties, entityList, null, null, null)[0];                           </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 825                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 826                  return entityResult;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 827              } else {                                                                                              </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 828                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 829                  return entityResult;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 831          } catch (Exception e) {                                                                                   </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 832              throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834      }                                                                                                             </span>
<span  style=""> 835                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 836      @Override                                                                                                     </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 837      public String getIdPropertyName(String entityClass) {                                                         </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 838          return persistenceManager.getIdPropertyName(entityClass);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839      }                                                                                                             </span>
<span  style=""> 840                                                                                                                    </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 841      public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                      </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 842          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 843          for (String property : mergedProperties.keySet()) {                                                       </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 844              BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);                        </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 845              if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {                        </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 846                  return property;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848          }                                                                                                         </span>
<span  style=""> 849                                                                                                                    </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""> 850          throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851      }                                                                                                             </span>
<span  style=""> 852                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 853      @Override                                                                                                     </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 854      public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {           </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 855          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 856          Object primaryKey = null;                                                                                 </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 857          String idPropertyName = null;                                                                             </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 858          BasicFieldMetadata metaData = null;                                                                       </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 859          for (String property : mergedProperties.keySet()) {                                                       </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 860              BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);                        </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 861              if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {                        </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 862                  idPropertyName = property;                                                                        </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 863                  metaData = temp;                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 864                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 865              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866          }                                                                                                         </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 867          if (idPropertyName == null) {                                                                             </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 868              throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 868              throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869          }                                                                                                         </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 870          for (Property property : entity.getProperties()) {                                                        </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 871              if (property.getName().equals(idPropertyName)) {                                                      </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 872                  switch (metaData.getSecondaryType()) {                                                            </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 873                      case INTEGER:                                                                                 </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""> 874                          primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 875                          break;                                                                                    </span>
<span class="6509618406235281730" onmouseenter="enter('6509618406235281730');" onmouseout="out('6509618406235281730');" style=""> 876                      case STRING:                                                                                  </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 877                          primaryKey = property.getValue();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 878                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879                  }                                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 880                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 882          }                                                                                                         </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 883          if (primaryKey == null) {                                                                                 </span>
<span class="586132424145349171" onmouseenter="enter('586132424145349171');" onmouseout="out('586132424145349171');" style=""><abbr title=" 884              throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the passed entity with type: &quot; + entity.getType()[0]);"> 884              throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the paðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885          }                                                                                                         </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 886          return primaryKey;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887      }                                                                                                             </span>
<span  style=""> 888                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 889      @Override                                                                                                     </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 890      public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,                   </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 891              CriteriaTransferObject cto,                                                                           </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 892              String ceilingEntityFullyQualifiedClassname,                                                          </span>
<span class="-8254447054846048089" onmouseenter="enter('-8254447054846048089');" onmouseout="out('-8254447054846048089');" style=""> 893              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties,                                                </span>
<span class="3731877525338754789" onmouseenter="enter('3731877525338754789');" onmouseout="out('3731877525338754789');" style=""> 894              RestrictionFactory customRestrictionFactory) {                                                        </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 895          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 896          List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                                      </span>
<span  style=""> 897                                                                                                                    </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 898          for (String propertyId : cto.getCriteriaMap().keySet()) {                                                 </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 899              if (mergedProperties.containsKey(propertyId)) {                                                       </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 900                  boolean handled = false;                                                                          </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 901                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {             </span>
<span class="-6114175924026036851" onmouseenter="enter('-6114175924026036851');" onmouseout="out('-6114175924026036851');" style=""> 902                      MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(                </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 903                              new AddSearchMappingRequest(persistencePerspective, cto,                              </span>
<span class="5810135378246725068" onmouseenter="enter('5810135378246725068');" onmouseout="out('5810135378246725068');" style=""> 904                                      ceilingEntityFullyQualifiedClassname, mergedProperties,                       </span>
<span class="5077524350528682045" onmouseenter="enter('5077524350528682045');" onmouseout="out('5077524350528682045');" style=""><abbr title=" 905                                      propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restrictionFactory"> 905                                      propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restðŸ”µ</abbr></span>
<span class="6427059933663878801" onmouseenter="enter('6427059933663878801');" onmouseout="out('6427059933663878801');" style=""> 906                                      :customRestrictionFactory), filterMappings);                                  </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 907                      if (MetadataProviderResponse.NOT_HANDLED != response) {                                       </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 908                          handled = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909                      }                                                                                             </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 910                      if (MetadataProviderResponse.HANDLED_BREAK == response) {                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 911                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 912                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913                  }                                                                                                 </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 914                  if (!handled) {                                                                                   </span>
<span class="8038403104028382935" onmouseenter="enter('8038403104028382935');" onmouseout="out('8038403104028382935');" style=""> 915                      defaultFieldPersistenceProvider.addSearchMapping(                                             </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 916                              new AddSearchMappingRequest(persistencePerspective, cto,                              </span>
<span class="-1188580278753724323" onmouseenter="enter('-1188580278753724323');" onmouseout="out('-1188580278753724323');" style=""> 917                                      ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId,           </span>
<span class="-6646794478608592484" onmouseenter="enter('-6646794478608592484');" onmouseout="out('-6646794478608592484');" style=""><abbr title=" 918                                      getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory"> 918                                      getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFðŸ”µ</abbr></span>
<span class="878086898277429379" onmouseenter="enter('878086898277429379');" onmouseout="out('878086898277429379');" style=""> 919                                              : customRestrictionFactory), filterMappings);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 921              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 922          }                                                                                                         </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 923          return filterMappings;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924      }                                                                                                             </span>
<span  style=""> 925                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 926      @Override                                                                                                     </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 927      public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,                   </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 928              CriteriaTransferObject cto,                                                                           </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 929              String ceilingEntityFullyQualifiedClassname,                                                          </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style=""> 930              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                              </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 931          return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 931          return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilterðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932      }                                                                                                             </span>
<span  style=""> 933                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 934      @Override                                                                                                     </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 935      public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 935      public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; ðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 936          extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 936          extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), propertieðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937      }                                                                                                             </span>
<span  style=""> 938                                                                                                                    </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 939      protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 939      protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedPropðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style=""> 940          Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                            </span>
<span  style=""> 941                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 942              @Override                                                                                             </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 943              public int compare(Property o1, Property o2) {                                                        </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style=""> 944                  return o1.getName().compareTo(o2.getName());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 946          };                                                                                                        </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style=""> 947          Collections.sort(properties, comparator);                                                                 </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style=""> 948          for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                              </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 949              String property = entry.getKey();                                                                     </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style=""> 950              Property prop = new Property();                                                                       </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style=""> 951              FieldMetadata metadata = mergedProperties.get(property);                                              </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style=""> 952              prop.setName(property);                                                                               </span>
<span  style=""> 953                                                                                                                    </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 954              int pos = Collections.binarySearch(properties, prop, comparator);                                     </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title=" 955              if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {"> 955              if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != ðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style=""> 956                  logWarn: {                                                                                        </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title=" 957                      if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {"> 957                      if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style=""> 958                          //don&#x27;t warn for id field collisions, but still ignore the colliding fields               </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 959                          break logWarn;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960                      }                                                                                             </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 961                      //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 961                      //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962                  }                                                                                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 963                  continue;                                                                                         </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style=""> 964              } else if (pos &lt; 0) {                                                                                 </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style=""> 965                  pos = -pos - 1; // calculate position to insert                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966              }                                                                                                     </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style=""> 967              properties.add(pos, prop);                                                                            </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 968              prop.setMetadata(metadata);                                                                           </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style=""> 969              if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                           </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 970                  //this only makes sense for non collection types                                                  </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style=""> 971                  ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 972              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974      }                                                                                                             </span>
<span  style=""> 975                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 976      @Override                                                                                                     </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 977      public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 977      public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, ðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 978          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 978          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 979          try {                                                                                                     </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 980              PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();       </span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""> 981              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);</span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 982              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 982              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style=""> 983                      ceilingEntityFullyQualifiedClassname,                                                         </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 984                      entities,                                                                                     </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title=" 985                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),"> 985                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectivðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 986                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 987                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 988                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 989                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 990                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 991                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 992                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 993                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 994                      );                                                                                            </span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style=""> 995              allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 996          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""> 997              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999      }                                                                                                             </span>
<span  style="">1000                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1001      @Override                                                                                                     </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title="1002      public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1002      public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style="">1003          return update(persistencePackage, null, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004      }                                                                                                             </span>
<span  style="">1005                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1006      @Override                                                                                                     </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style="">1007      public Entity update(PersistencePackage persistencePackage) throws ServiceException {                         </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style="">1008          EntityResult er = update(persistencePackage, null, false);                                                </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style="">1009          return er.getEntity();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010      }                                                                                                             </span>
<span  style="">1011                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1012      @Override                                                                                                     </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style="">1013      public Entity add(PersistencePackage persistencePackage) throws ServiceException {                            </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style="">1014          EntityResult entityResult = add(persistencePackage, false);                                               </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style="">1015          return entityResult.getEntity();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016      }                                                                                                             </span>
<span  style="">1017                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1018      @Override                                                                                                     </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title="1019      public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1019      public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style="">1020          EntityResult entityResult = new EntityResult();                                                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1021          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1022          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1023          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1023          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1024          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1025              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1026          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1027          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1028              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1028              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1029              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1029              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMeðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1030                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1031                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1032                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1033                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1034                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1035                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1036                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1037                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1038                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1039                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1040                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1041                      );                                                                                            </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style="">1042              Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);</span>
<span  style="">1043                                                                                                                    </span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style="">1044              String idProperty = null;                                                                             </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style="">1045              for (String property : mergedProperties.keySet()) {                                                   </span>
<span class="-2221369290108753372" onmouseenter="enter('-2221369290108753372');" onmouseout="out('-2221369290108753372');" style=""><abbr title="1046                  if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID) {">1046                  if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID)ðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style="">1047                      idProperty = property;                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1048                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050              }                                                                                                     </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style="">1051              if (idProperty == null) {                                                                             </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title="1052                  throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);">1052                  throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053              }                                                                                                     </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style="">1054              Object primaryKey = null;                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1055              try {                                                                                                 </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style="">1056                  primaryKey = getPrimaryKey(entity, mergedProperties);                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1057              } catch (Exception e) {                                                                               </span>
<span class="-2276199612445624795" onmouseenter="enter('-2276199612445624795');" onmouseout="out('-2276199612445624795');" style="">1058                  //don&#x27;t do anything - this is a valid case                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059              }                                                                                                     </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style="">1060              if (primaryKey == null) {                                                                             </span>
<span  style="">1061                                                                                                                    </span>
<span class="-425360514461332458" onmouseenter="enter('-425360514461332458');" onmouseout="out('-425360514461332458');" style="">1062                  Serializable instance = (Serializable) Class.forName(entity.getType()[0]).newInstance();          </span>
<span  style="">1063                                                                                                                    </span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style="">1064                  instance = createPopulatedInstance(instance, entity, mergedProperties, false);                    </span>
<span  style="">1065                                                                                                                    </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1066                  if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                                    </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style="">1067                      ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();       </span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title="1068                      extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);">1068                      extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedPropertiðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style="">1069                      instance = result.getResult();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070                  }                                                                                                 </span>
<span  style="">1071                                                                                                                    </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1072                  instance = persistenceManager.getDynamicEntityDao().merge(instance);                              </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style="">1073                  if (includeRealEntityObject) {                                                                    </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style="">1074                      entityResult.setEntityBackingObject(instance);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075                  }                                                                                                 </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style="">1076                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style="">1077                  entityList.add(instance);                                                                         </span>
<span  style="">1078                                                                                                                    </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style="">1079                  entity = getRecords(mergedProperties, entityList, null, null, null)[0];                           </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style="">1080                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style="">1081                  return entityResult;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1082              } else {                                                                                              </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style="">1083                  return update(persistencePackage, primaryKey, includeRealEntityObject);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1085          } catch (Exception e) {                                                                                   </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style="">1086              throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088      }                                                                                                             </span>
<span  style="">1089                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1090      @Override                                                                                                     </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style="">1091      public void remove(PersistencePackage persistencePackage) throws ServiceException {                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1092          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1093          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1094          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1094          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1095          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1096              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1098          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1099              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1099              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1100              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1100              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMeðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1101                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1102                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1103                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1104                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1105                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1106                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1107                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1108                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1109                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1110                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1111                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1112                      );                                                                                            </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style="">1113              Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);</span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style="">1114              Object primaryKey = getPrimaryKey(entity, mergedProperties);                                          </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title="1115              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);">1115              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getTypeðŸ”µ</abbr></span>
<span  style="">1116                                                                                                                    </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style="">1117              Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                                  </span>
<span  style="">1118                                                                                                                    </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style="">1119              switch (persistencePerspective.getOperationTypes().getRemoveType()) {                                 </span>
<span class="5189123261615208670" onmouseenter="enter('5189123261615208670');" onmouseout="out('5189123261615208670');" style="">1120                  case NONDESTRUCTIVEREMOVE:                                                                        </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style="">1121                      FieldManager fieldManager = getFieldManager();                                                </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title="1122                      FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());">1122                      FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField()ðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style="">1123                      Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1124                      try {                                                                                         </span>
<span class="-7359786243551687396" onmouseenter="enter('-7359786243551687396');" onmouseout="out('-7359786243551687396');" style="">1125                          foreignKeyValue = Long.valueOf((String) foreignKeyValue);                                 </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="">1126                      } catch (NumberFormatException e) {                                                           </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style="">1127                          LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128                      }                                                                                             </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title="1129                      Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);">1129                      Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forNameðŸ”µ</abbr></span>
<span class="-6891408169238328357" onmouseenter="enter('-6891408169238328357');" onmouseout="out('-6891408169238328357');" style=""><abbr title="1130                      Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());">1130                      Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.geðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style="">1131                      collection.remove(instance);                                                                  </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title="1132                      // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on">1132                      // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreigðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style="">1133                      // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly  </span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style="">1134                      // set the manyTo field to null so that subsequent lookups will not find it                   </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style="">1135                      if (manyToFieldMetadata instanceof BasicFieldMetadata) {                                      </span>
<span class="3041576912599376884" onmouseenter="enter('3041576912599376884');" onmouseout="out('3041576912599376884');" style="">1136                          if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())) {      </span>
<span class="-3179114257339016284" onmouseenter="enter('-3179114257339016284');" onmouseout="out('-3179114257339016284');" style=""><abbr title="1137                              throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot;">1137                              throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne sideðŸ”µ</abbr></span>
<span class="-7704143059315768665" onmouseenter="enter('-7704143059315768665');" onmouseout="out('-7704143059315768665');" style=""><abbr title="1138                                      + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot;">1138                                      + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyTðŸ”µ</abbr></span>
<span class="-8899164530562544377" onmouseenter="enter('-8899164530562544377');" onmouseout="out('-8899164530562544377');" style="">1139                                      + &quot; or nullable=true within the @JoinColumn annotation&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140                          }                                                                                         </span>
<span class="1164649929234803369" onmouseenter="enter('1164649929234803369');" onmouseout="out('1164649929234803369');" style=""><abbr title="1141                          //Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module">1141                          //Since this is occuring on a remove persistence package, merge up-front (before making a ðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1142                          instance = persistenceManager.getDynamicEntityDao().merge(instance);                      </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title="1143                          Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());">1143                          Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField()ðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style="">1144                          Object manyToObject = manyToField.get(instance);                                          </span>
<span class="-7515244788292498989" onmouseenter="enter('-7515244788292498989');" onmouseout="out('-7515244788292498989');" style=""><abbr title="1145                          if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanceof Map)) {">1145                          if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style="">1146                              manyToField.set(instance, null);                                                      </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1147                              instance = persistenceManager.getDynamicEntityDao().merge(instance);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1150                      break;                                                                                        </span>
<span class="-5424424301156351095" onmouseenter="enter('-5424424301156351095');" onmouseout="out('-5424424301156351095');" style="">1151                  case BASIC:                                                                                       </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style="">1152                      persistenceManager.getDynamicEntityDao().remove(instance);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1153                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1155          } catch (Exception e) {                                                                                   </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1156              throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158      }                                                                                                             </span>
<span  style="">1159                                                                                                                    </span>
<span class="-5101078461080852406" onmouseenter="enter('-5101078461080852406');" onmouseout="out('-5101078461080852406');" style="">1160      public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage,                  </span>
<span class="-1790491118666975112" onmouseenter="enter('-1790491118666975112');" onmouseout="out('-1790491118666975112');" style="">1161              CriteriaTransferObject cto) throws ServiceException {                                                 </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1162          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1163          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1163          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span  style="">1164                                                                                                                    </span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1165          if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {                      </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1166              persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1167          }                                                                                                         </span>
<span  style="">1168                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1169          try {                                                                                                     </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1170              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1170              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(ClðŸ”µ</abbr></span>
<span  style="">1171                                                                                                                    </span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1172              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1172              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1173                      ceilingEntityFullyQualifiedClassname,                                                         </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1174                      entities,                                                                                     </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1175                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1175                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectivðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1176                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1177                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1178                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1179                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1180                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1181                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1182                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1183                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1184                      );                                                                                            </span>
<span  style="">1185                                                                                                                    </span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1186              return mergedProperties;                                                                              </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1187          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style="">1188              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1189          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190      }                                                                                                             </span>
<span  style="">1191                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1192      @Override                                                                                                     </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1193      public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1193      public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServicðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1194          Entity[] payload;                                                                                         </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1195          int totalRecords;                                                                                         </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1196          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1197          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1197          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1198          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1198          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span  style="">1199                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1200          try {                                                                                                     </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1201              if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                                        </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1202                  FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                          </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1203                  sortCriteria.setSortAscending(foreignKey.getSortAscending());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204              }                                                                                                     </span>
<span  style="">1205                                                                                                                    </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1206              Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1207 -                                                                                                                  </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1208 +            if (useTranslationSearch) {                                                                           </span>
<span class="-4893882968490565148" onmouseenter="enter('-4893882968490565148');" onmouseout="out('-4893882968490565148');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1209 +                addTranslationSearchIfNeeded(cto, mergedProperties);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1210 +            }                                                                                                     </span>
<span class="-6342955113620354561" onmouseenter="enter('-6342955113620354561');" onmouseout="out('-6342955113620354561');" style="">1211              List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage</span>
<span class="-8965082019915054990" onmouseenter="enter('-8965082019915054990');" onmouseout="out('-8965082019915054990');" style="">1212                      .getFetchTypeFullyQualifiedClassname(), mergedProperties);                                    </span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1213              List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);            </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1214              if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                                  </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1215                  standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216              }                                                                                                     </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1217              if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                          </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1218                  standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1219              }                                                                                                     </span>
<span  style="">1220                                                                                                                    </span>
<span class="-1243671803049331237" onmouseenter="enter('-1243671803049331237');" onmouseout="out('-1243671803049331237');" style="">1221              FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto,                                 </span>
<span class="4292734980783020060" onmouseenter="enter('4292734980783020060');" onmouseout="out('4292734980783020060');" style="">1222                      persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);            </span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1223              List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                                      </span>
<span  style="">1224                                                                                                                    </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1225              List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);               </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1226              if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                                  </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1227                  countFilterMappings.addAll(cto.getAdditionalFilterMappings());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228              }                                                                                                     </span>
<span class="-3999242298419802693" onmouseenter="enter('-3999242298419802693');" onmouseout="out('-3999242298419802693');" style="">1229              FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto,                            </span>
<span class="-3552477247406350113" onmouseenter="enter('-3552477247406350113');" onmouseout="out('-3552477247406350113');" style="">1230                      persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);               </span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1231              totalRecords = getTotalRecords(countFetchRequest);                                                    </span>
<span  style="">1232                                                                                                                    </span>
<span class="-5158650912512765537" onmouseenter="enter('-5158650912512765537');" onmouseout="out('-5158650912512765537');" style="">1233              FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto,   </span>
<span class="6467880611752491014" onmouseenter="enter('6467880611752491014');" onmouseout="out('6467880611752491014');" style="">1234                      persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);         </span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1235              payload = getRecords(fetchExtractionRequest);                                                         </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1236          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style="">1237              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1238          }                                                                                                         </span>
<span  style="">1239                                                                                                                    </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1240          return new DynamicResultSet(null, payload, totalRecords);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1241 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1242 +                                                                                                                  </span>
<span class="-6037376119596627025" onmouseenter="enter('-6037376119596627025');" onmouseout="out('-6037376119596627025');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1243 +    private void addTranslationSearchIfNeeded(CriteriaTransferObject cto, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1243 +    private void addTranslationSearchIfNeeded(CriteriaTransferObject cto, Map&lt;String, FieldMetadata&gt; mergedPropertðŸ”µ</abbr></span>
<span class="-2846648248046819015" onmouseenter="enter('-2846648248046819015');" onmouseout="out('-2846648248046819015');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1244 +        Map&lt;String, FilterAndSortCriteria&gt; criteriaMap = cto.getCriteriaMap();                                    </span>
<span class="811702704133342292" onmouseenter="enter('811702704133342292');" onmouseout="out('811702704133342292');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1245 +        FilterAndSortCriteria fsc = criteriaMap.get(&quot;translationLocale&quot;);                                         </span>
<span class="8797373901407974682" onmouseenter="enter('8797373901407974682');" onmouseout="out('8797373901407974682');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1246 +        List&lt;String&gt; filterValues = new ArrayList&lt;&gt;();                                                            </span>
<span class="7732194668261263043" onmouseenter="enter('7732194668261263043');" onmouseout="out('7732194668261263043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1247 +        if (fsc != null) {                                                                                        </span>
<span class="2259588886243628801" onmouseenter="enter('2259588886243628801');" onmouseout="out('2259588886243628801');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1248 +            filterValues = fsc.getFilterValues();                                                                 </span>
<span class="2091742627616562528" onmouseenter="enter('2091742627616562528');" onmouseout="out('2091742627616562528');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1249 +            criteriaMap.remove(&quot;translationLocale&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1250 +        }                                                                                                         </span>
<span class="3485235865484365089" onmouseenter="enter('3485235865484365089');" onmouseout="out('3485235865484365089');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1251 +        //If locale is generic - than we use all locales of this language                                         </span>
<span class="-41588082364058856" onmouseenter="enter('-41588082364058856');" onmouseout="out('-41588082364058856');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1252 +        //For example, if locale = &quot;en&quot; than we use also &quot;en_GB&quot; and &quot;en_US&quot;                                      </span>
<span class="8329625728999317193" onmouseenter="enter('8329625728999317193');" onmouseout="out('8329625728999317193');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1253 +        if (filterValues.size() &gt; 0 &amp;&amp; filterValues.get(0).indexOf(&quot;_&quot;) &lt; 0) {                                    </span>
<span class="8492179051032337523" onmouseenter="enter('8492179051032337523');" onmouseout="out('8492179051032337523');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1254 +            String currentLocaleCode = filterValues.get(0);                                                       </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1255 +            List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();     </span>
<span class="-6592630843479972415" onmouseenter="enter('-6592630843479972415');" onmouseout="out('-6592630843479972415');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1256 +            for (org.broadleafcommerce.common.locale.domain.Locale locale : locales) {                            </span>
<span class="-7527245144390113265" onmouseenter="enter('-7527245144390113265');" onmouseout="out('-7527245144390113265');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1257 +                if (!locale.getLocaleCode().equals(currentLocaleCode) &amp;&amp; currentLocaleCode.equals(locale.getLocaleCode().substring(0,2))) {">1257 +                if (!locale.getLocaleCode().equals(currentLocaleCode) &amp;&amp; currentLocaleCode.equals(locale.getLocaleðŸ”µ</abbr></span>
<span class="-1114101031881938600" onmouseenter="enter('-1114101031881938600');" onmouseout="out('-1114101031881938600');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1258 +                    filterValues.add(locale.getLocaleCode());                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1259 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1260 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1261 +        }                                                                                                         </span>
<span class="7041175802579200053" onmouseenter="enter('7041175802579200053');" onmouseout="out('7041175802579200053');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1262 +        Iterator&lt;Entry&lt;String, FilterAndSortCriteria&gt;&gt; iterator = criteriaMap.entrySet().iterator();              </span>
<span class="977968488612897428" onmouseenter="enter('977968488612897428');" onmouseout="out('977968488612897428');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1263 +        while (iterator.hasNext()) {                                                                              </span>
<span class="-2018186862383960552" onmouseenter="enter('-2018186862383960552');" onmouseout="out('-2018186862383960552');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1264 +            Entry&lt;String, FilterAndSortCriteria&gt; next = iterator.next();                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1265 +                                                                                                                  </span>
<span class="1265738709115975150" onmouseenter="enter('1265738709115975150');" onmouseout="out('1265738709115975150');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1266 +            final String key = next.getKey();                                                                     </span>
<span class="-7678196324163664201" onmouseenter="enter('-7678196324163664201');" onmouseout="out('-7678196324163664201');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1267 +            FieldMetadata fieldMetadata = mergedProperties.get(key);                                              </span>
<span class="-1023901421219743812" onmouseenter="enter('-1023901421219743812');" onmouseout="out('-1023901421219743812');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1268 +            if (fieldMetadata != null &amp;&amp; fieldMetadata instanceof BasicFieldMetadata &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getTranslatable()!=null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getTranslatable()) {">1268 +            if (fieldMetadata != null &amp;&amp; fieldMetadata instanceof BasicFieldMetadata &amp;&amp; ((BasicFieldMetadata) fielðŸ”µ</abbr></span>
<span class="4880585623334776575" onmouseenter="enter('4880585623334776575');" onmouseout="out('4880585623334776575');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1269 +                BasicFieldMetadata basicFieldMetadata = ((BasicFieldMetadata) fieldMetadata);                     </span>
<span class="-388570270073866047" onmouseenter="enter('-388570270073866047');" onmouseout="out('-388570270073866047');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1270 +                if (next.getValue().getFilterValues().size() &gt; 0) {                                               </span>
<span class="713070525122680609" onmouseenter="enter('713070525122680609');" onmouseout="out('713070525122680609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1271 +                    final String value = next.getValue().getFilterValues().get(0);                                </span>
<span class="3317822052141256197" onmouseenter="enter('3317822052141256197');" onmouseout="out('3317822052141256197');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1272 +                    final String targetClass = basicFieldMetadata.getTargetClass();                               </span>
<span class="-7313378335001093503" onmouseenter="enter('-7313378335001093503');" onmouseout="out('-7313378335001093503');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1273 +                    final String fieldName = basicFieldMetadata.getFieldName();                                   </span>
<span class="-850715722857507285" onmouseenter="enter('-850715722857507285');" onmouseout="out('-850715722857507285');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1274 +                    final String friendlyType = getTranslationFriendlyType(targetClass);                          </span>
<span class="895212293547782698" onmouseenter="enter('895212293547782698');" onmouseout="out('895212293547782698');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1275 +                    final List&lt;String&gt; localeValues = filterValues;                                               </span>
<span class="5947868462885005542" onmouseenter="enter('5947868462885005542');" onmouseout="out('5947868462885005542');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1276 +                    if (friendlyType != null) {                                                                   </span>
<span class="-6215380074365660212" onmouseenter="enter('-6215380074365660212');" onmouseout="out('-6215380074365660212');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1277 +                        iterator.remove();                                                                        </span>
<span class="947198310670736489" onmouseenter="enter('947198310670736489');" onmouseout="out('947198310670736489');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1278 +                        cto.getAdditionalFilterMappings().add(new FilterMapping()                                 </span>
<span class="2888003341970826788" onmouseenter="enter('2888003341970826788');" onmouseout="out('2888003341970826788');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1279 +                                .withDirectFilterValues(new EmptyFilterValues())                                  </span>
<span class="-178271358118690506" onmouseenter="enter('-178271358118690506');" onmouseout="out('-178271358118690506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1280 +                                .withRestriction(                                                                 </span>
<span class="-7975261834482695502" onmouseenter="enter('-7975261834482695502');" onmouseout="out('-7975261834482695502');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1281 +                                        new Restriction().withPredicateProvider(new PredicateProvider() {         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1282 +                                            @Override                                                             </span>
<span class="-6543887403560352788" onmouseenter="enter('-6543887403560352788');" onmouseout="out('-6543887403560352788');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1283 +                                            public Predicate buildPredicate(CriteriaBuilder builder,              </span>
<span class="-7125560532692692259" onmouseenter="enter('-7125560532692692259');" onmouseout="out('-7125560532692692259');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1284 +                                                                            FieldPathBuilder fieldPathBuilder,    </span>
<span class="7512372620032911912" onmouseenter="enter('7512372620032911912');" onmouseout="out('7512372620032911912');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1285 +                                                                            From root,                            </span>
<span class="-6496567708295007325" onmouseenter="enter('-6496567708295007325');" onmouseout="out('-6496567708295007325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1286 +                                                                            String ceilingEntity,                 </span>
<span class="-1158993663019459187" onmouseenter="enter('-1158993663019459187');" onmouseout="out('-1158993663019459187');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1287 +                                                                            String fullPropertyName,              </span>
<span class="-5850263724287795849" onmouseenter="enter('-5850263724287795849');" onmouseout="out('-5850263724287795849');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1288 +                                                                            Path explicitPath,                    </span>
<span class="-5946251977876316007" onmouseenter="enter('-5946251977876316007');" onmouseout="out('-5946251977876316007');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1289 +                                                                            List directValues) {                  </span>
<span class="-4398445738002779234" onmouseenter="enter('-4398445738002779234');" onmouseout="out('-4398445738002779234');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1290 +                                                Subquery subquery =                                               </span>
<span class="4320200709227808343" onmouseenter="enter('4320200709227808343');" onmouseout="out('4320200709227808343');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1291 +                                                        fieldPathBuilder.getCriteria().subquery(Long.class);      </span>
<span class="-3003233056197271068" onmouseenter="enter('-3003233056197271068');" onmouseout="out('-3003233056197271068');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1292 +                                                Root transRoot = subquery.from(TranslationImpl.class);            </span>
<span class="-1828106112834311571" onmouseenter="enter('-1828106112834311571');" onmouseout="out('-1828106112834311571');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1293 +                                                subquery.select(builder.count(transRoot.get(&quot;id&quot;)));              </span>
<span class="-7827410329384074180" onmouseenter="enter('-7827410329384074180');" onmouseout="out('-7827410329384074180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1294 +                                                Predicate type =                                                  </span>
<span class="-7641385465441036986" onmouseenter="enter('-7641385465441036986');" onmouseout="out('-7641385465441036986');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1295 +                                                        builder.equal(transRoot.get(&quot;entityType&quot;), friendlyType); </span>
<span class="-8318529626652277752" onmouseenter="enter('-8318529626652277752');" onmouseout="out('-8318529626652277752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1296 +                                                Predicate name =                                                  </span>
<span class="-738855264844117982" onmouseenter="enter('-738855264844117982');" onmouseout="out('-738855264844117982');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1297 +                                                        builder.equal(transRoot.get(&quot;fieldName&quot;), fieldName);     </span>
<span class="-8365644117166289056" onmouseenter="enter('-8365644117166289056');" onmouseout="out('-8365644117166289056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1298 +                                                String[] split = key.split(&quot;\\.&quot;);                                </span>
<span class="2052011196962138618" onmouseenter="enter('2052011196962138618');" onmouseout="out('2052011196962138618');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1299 +                                                Path x = null;                                                    </span>
<span class="-6625156218225986664" onmouseenter="enter('-6625156218225986664');" onmouseout="out('-6625156218225986664');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1300 +                                                for (int i = 0; i &lt; split.length; i++) {                          </span>
<span class="718039065179720471" onmouseenter="enter('718039065179720471');" onmouseout="out('718039065179720471');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1301 +                                                    if (x == null) {                                              </span>
<span class="-9002262719383855885" onmouseenter="enter('-9002262719383855885');" onmouseout="out('-9002262719383855885');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1302 +                                                        x = root.get(split[i]);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1303 +                                                    } else {                                                      </span>
<span class="6538684614966612209" onmouseenter="enter('6538684614966612209');" onmouseout="out('6538684614966612209');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1304 +                                                        x = x.get(split[i]);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1305 +                                                    }                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1306 +                                                }                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1307 +                                                                                                                  </span>
<span class="2609703429332764186" onmouseenter="enter('2609703429332764186');" onmouseout="out('2609703429332764186');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1308 +                                                String likeValue = &quot;%&quot; + value + &quot;%&quot;;                             </span>
<span class="-4483755678606832428" onmouseenter="enter('-4483755678606832428');" onmouseout="out('-4483755678606832428');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1309 +                                                Predicate transValue =                                            </span>
<span class="1835078746369173226" onmouseenter="enter('1835078746369173226');" onmouseout="out('1835078746369173226');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1310 +                                                        builder.like(transRoot.get(&quot;translatedValue&quot;), likeValue);</span>
<span class="1363159350076321828" onmouseenter="enter('1363159350076321828');" onmouseout="out('1363159350076321828');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1311 +                                                Predicate localeValue =                                           </span>
<span class="6936594261820918527" onmouseenter="enter('6936594261820918527');" onmouseout="out('6936594261820918527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1312 +                                                        builder.isTrue(transRoot.get(&quot;localeCode&quot;).in(localeValues));">1312 +                                                        builder.isTrue(transRoot.get(&quot;localeCode&quot;).in(localeValuesðŸ”µ</abbr></span>
<span class="7877531404660919575" onmouseenter="enter('7877531404660919575');" onmouseout="out('7877531404660919575');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1313 +                                                Path y = split.length &gt; 1 ? root.get(split[0]).get(&quot;id&quot;) : root.get(&quot;id&quot;);">1313 +                                                Path y = split.length &gt; 1 ? root.get(split[0]).get(&quot;id&quot;) : root.geðŸ”µ</abbr></span>
<span class="3537025732073223017" onmouseenter="enter('3537025732073223017');" onmouseout="out('3537025732073223017');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1314 +                                                Predicate entityId = builder.equal(transRoot.get(&quot;entityId&quot;),     </span>
<span class="6748376930371571444" onmouseenter="enter('6748376930371571444');" onmouseout="out('6748376930371571444');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1315 +                                                        y);                                                       </span>
<span class="-251672589130318843" onmouseenter="enter('-251672589130318843');" onmouseout="out('-251672589130318843');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1316 +                                                if (localeValues.size() &gt; 0) {                                    </span>
<span class="-6685004596412549337" onmouseenter="enter('-6685004596412549337');" onmouseout="out('-6685004596412549337');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1317 +                                                    subquery.where(builder.and(type, entityId, transValue, name, localeValue));">1317 +                                                    subquery.where(builder.and(type, entityId, transValue, name, lðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1318 +                                                } else {                                                          </span>
<span class="7320091577548075010" onmouseenter="enter('7320091577548075010');" onmouseout="out('7320091577548075010');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1319 +                                                    subquery.where(builder.and(type, entityId, transValue, name));</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1320 +                                                }                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1321 +                                                                                                                  </span>
<span class="-8479552588770286801" onmouseenter="enter('-8479552588770286801');" onmouseout="out('-8479552588770286801');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1322 +                                                Predicate like = builder.like(x,                                  </span>
<span class="2624583196561559460" onmouseenter="enter('2624583196561559460');" onmouseout="out('2624583196561559460');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1323 +                                                        likeValue);                                               </span>
<span class="-3685673007027368665" onmouseenter="enter('-3685673007027368665');" onmouseout="out('-3685673007027368665');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1324 +                                                Predicate predicate = builder.or(like, builder.greaterThan(subquery, 0));">1324 +                                                Predicate predicate = builder.or(like, builder.greaterThan(subquerðŸ”µ</abbr></span>
<span class="-7893760688546432215" onmouseenter="enter('-7893760688546432215');" onmouseout="out('-7893760688546432215');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1325 +                                                return predicate;                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1326 +                                            }                                                                     </span>
<span class="-2540327120317221694" onmouseenter="enter('-2540327120317221694');" onmouseout="out('-2540327120317221694');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1327 +                                        })));                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1328 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1329 +                }                                                                                                 </span>
<span class="-6340274589575485740" onmouseenter="enter('-6340274589575485740');" onmouseout="out('-6340274589575485740');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1330 +                System.out.println(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1331 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1332 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1333 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1334 +                                                                                                                  </span>
<span class="490380134896946780" onmouseenter="enter('490380134896946780');" onmouseout="out('490380134896946780');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1335 +    private String getTranslationFriendlyType(String targetClass) {                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1336 +                                                                                                                  </span>
<span class="6841703832389938731" onmouseenter="enter('6841703832389938731');" onmouseout="out('6841703832389938731');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1337 +        TranslatedEntity instance = TranslatedEntity.getInstance(targetClass);                                    </span>
<span class="-2802766618581615140" onmouseenter="enter('-2802766618581615140');" onmouseout="out('-2802766618581615140');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1338 +        if (instance == null) {                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1339 +            try {                                                                                                 </span>
<span class="-7525038970859272648" onmouseenter="enter('-7525038970859272648');" onmouseout="out('-7525038970859272648');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1340 +                Class&lt;?&gt;[] interfaces = Class.forName(targetClass).getInterfaces();                               </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1341 +                int i = 0;                                                                                        </span>
<span class="-6186732733724103268" onmouseenter="enter('-6186732733724103268');" onmouseout="out('-6186732733724103268');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1342 +                while (instance == null &amp;&amp; i &lt; interfaces.length) {                                               </span>
<span class="-2054172541787751148" onmouseenter="enter('-2054172541787751148');" onmouseout="out('-2054172541787751148');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1343 +                    instance = TranslatedEntity.getInstance(interfaces[i].getName());                             </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1344 +                    i++;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1345 +                }                                                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1346 +            } catch (ClassNotFoundException e) {                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1347 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1348 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1349 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1350 +                                                                                                                  </span>
<span class="-7268340201557725928" onmouseenter="enter('-7268340201557725928');" onmouseout="out('-7268340201557725928');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1351 +        return instance == null ? null : instance.getFriendlyType();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352      }                                                                                                             </span>
<span  style="">1353                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1354      @Override                                                                                                     </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1355      public Integer getTotalRecords(FetchRequest fetchRequest) {                                                   </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1356          return fetchWrapper.getTotalRecords(fetchRequest);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357      }                                                                                                             </span>
<span  style="">1358                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1359      @Override                                                                                                     </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1360      public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1361          try {                                                                                                     </span>
<span class="2992791529598050608" onmouseenter="enter('2992791529598050608');" onmouseout="out('2992791529598050608');" style="">1362              return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(),       </span>
<span class="9038213180647386393" onmouseenter="enter('9038213180647386393');" onmouseout="out('9038213180647386393');" style="">1363                      ceilingEntity, filterMappings).getSingleResult()).intValue();                                 </span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1364          } catch (CriteriaConversionException e) {                                                                 </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1365              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1365              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntityðŸ”µ</abbr></span>
<span class="3717478470762679000" onmouseenter="enter('3717478470762679000');" onmouseout="out('3717478470762679000');" style=""><abbr title="1366              return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult()).intValue();">1366              return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368      }                                                                                                             </span>
<span  style="">1369                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1370      @Override                                                                                                     </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style="">1371      public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {  </span>
<span class="378343015895903420" onmouseenter="enter('378343015895903420');" onmouseout="out('378343015895903420');" style="">1372          return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(),                     </span>
<span class="-8797211071846459738" onmouseenter="enter('-8797211071846459738');" onmouseout="out('-8797211071846459738');" style="">1373                  ceilingEntity, filterMappings, maxField).getSingleResult();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1374      }                                                                                                             </span>
<span  style="">1375                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1376      @Override                                                                                                     </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1377      public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                                   </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1378          return fetchWrapper.getPersistentRecords(fetchRequest);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379      }                                                                                                             </span>
<span  style="">1380                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1381      @Override                                                                                                     </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1382      public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1382      public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, IntegðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1383          try {                                                                                                     </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1384              return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1384              return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filtðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1385          } catch (CriteriaConversionException e) {                                                                 </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1386              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1386              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntityðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1387              return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1387              return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getReðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389      }                                                                                                             </span>
<span  style="">1390                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1391      @Override                                                                                                     </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1392      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1392      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1393          return validate(entity, populatedInstance, mergedProperties, true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1394      }                                                                                                             </span>
<span  style="">1395                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1396      @Override                                                                                                     </span>
<span class="-2540520329201552550" onmouseenter="enter('-2540520329201552550');" onmouseout="out('-2540520329201552550');" style=""><abbr title="1397      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties,">1397      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperðŸ”µ</abbr></span>
<span class="-646875273047375380" onmouseenter="enter('-646875273047375380');" onmouseout="out('-646875273047375380');" style="">1398              boolean validateUnsubmittedProperties) {                                                              </span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1399          entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1399          entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedPropðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1400          return !entity.isValidationFailure();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401      }                                                                                                             </span>
<span  style="">1402                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1403      @Override                                                                                                     </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1404      public void setPersistenceManager(PersistenceManager persistenceManager) {                                    </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1405          this.persistenceManager = persistenceManager;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406      }                                                                                                             </span>
<span  style="">1407                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1408      @Override                                                                                                     </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1409      public PersistenceModule getCompatibleModule(OperationType operationType) {                                   </span>
<span class="-6680721005895887682" onmouseenter="enter('-6680721005895887682');" onmouseout="out('-6680721005895887682');" style="">1410          return ((InspectHelper) persistenceManager).getCompatibleModule(operationType);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411      }                                                                                                             </span>
<span  style="">1412                                                                                                                    </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1413      public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                                        </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1414          return defaultFieldPersistenceProvider;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415      }                                                                                                             </span>
<span  style="">1416                                                                                                                    </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style="">1417      public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {    </span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1418          this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419      }                                                                                                             </span>
<span  style="">1420                                                                                                                    </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1421      public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                                        </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1422          return fieldPersistenceProviders;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423      }                                                                                                             </span>
<span  style="">1424                                                                                                                    </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1425      public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) {          </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1426          this.fieldPersistenceProviders = fieldPersistenceProviders;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1427      }                                                                                                             </span>
<span  style="">1428                                                                                                                    </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1429      public CriteriaTranslator getCriteriaTranslator() {                                                           </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1430          return criteriaTranslator;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431      }                                                                                                             </span>
<span  style="">1432                                                                                                                    </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1433      public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                                    </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1434          this.criteriaTranslator = criteriaTranslator;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435      }                                                                                                             </span>
<span  style="">1436                                                                                                                    </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1437      public EntityValidatorService getEntityValidatorService() {                                                   </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1438          return entityValidatorService;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439      }                                                                                                             </span>
<span  style="">1440                                                                                                                    </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1441      public void setEntityValidatorService(EntityValidatorService entityValidatorService) {                        </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1442          this.entityValidatorService = entityValidatorService;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443      }                                                                                                             </span>
<span  style="">1444                                                                                                                    </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1445      public RestrictionFactory getRestrictionFactory() {                                                           </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1446          return restrictionFactory;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447      }                                                                                                             </span>
<span  style="">1448                                                                                                                    </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1449      public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                                    </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1450          this.restrictionFactory = restrictionFactory;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451      }                                                                                                             </span>
<span  style="">1452                                                                                                                    </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1453      public PersistenceManager getPersistenceManager() {                                                           </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1454          return persistenceManager;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455      }                                                                                                             </span>
<span  style="">1456                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1457      /**                                                                                                           </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1458       * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1458       * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable objðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1459       * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1459       * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA crðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1460       * which seems to alleviate the problem.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1461       *                                                                                                            </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1462       * @param embeddedCollectionPath the path to the collection field itself                                      </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1463       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1464       * @param collectionClass the type of the collection members                                                  </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1465       * @return the builder capable of generating an appropriate HQL query                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1466       */                                                                                                           </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1467      protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1467      protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; fðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1468          String specialPath = embeddedCollectionPath.getTargetProperty();                                          </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1469          String[] pieces = specialPath.split(&quot;\\.&quot;);                                                               </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1470          if (pieces.length != 3) {                                                                                 </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1471              throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1471              throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472          }                                                                                                         </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1473          String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                               </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1474          TypedQueryBuilder builder;                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1475          try {                                                                                                     </span>
<span class="-8552982106091258322" onmouseenter="enter('-8552982106091258322');" onmouseout="out('-8552982106091258322');" style="">1476              builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;)                      </span>
<span class="7429624725018559493" onmouseenter="enter('7429624725018559493');" onmouseout="out('7429624725018559493');" style="">1477                      .addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1478          } catch (Exception e) {                                                                                   </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1479              throw ExceptionHelper.refineException(e);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480          }                                                                                                         </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1481          for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {                  </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1482              builder = builder.addRestriction(restriction);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483          }                                                                                                         </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style="">1484          for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {     </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1485              builder = builder.addRestriction(restriction);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486          }                                                                                                         </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1487          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1488              if (mapping.getSortDirection() != null) {                                                             </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1489                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1489                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetPðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1490                  if (StringUtils.isEmpty(mappingProperty)) {                                                       </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1491                      mappingProperty = mapping.getFullPropertyName();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492                  }                                                                                                 </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1493                  builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1493                  builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDINGðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1495          }                                                                                                         </span>
<span  style="">1496                                                                                                                    </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1497          return builder;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498      }                                                                                                             </span>
<span  style="">1499                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1500      /**                                                                                                           </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1501       * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1501       * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collectiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1502       *                                                                                                            </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1503       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1503       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteriaðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1504       * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1504       * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1505       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1506       * @return the list of restrictions on the root entity                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1507       */                                                                                                           </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1508      protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1508      protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1509          String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1509          String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1510          List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                                        </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1511          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="5670151306593626605" onmouseenter="enter('5670151306593626605');" onmouseout="out('5670151306593626605');" style="">1512              checkProperty: {                                                                                      </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1513                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1513                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetPðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1514                  if (StringUtils.isEmpty(mappingProperty)) {                                                       </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1515                      mappingProperty = mapping.getFullPropertyName();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516                  }                                                                                                 </span>
<span class="-8226569942575396694" onmouseenter="enter('-8226569942575396694');" onmouseout="out('-8226569942575396694');" style=""><abbr title="1517                  if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(mappingProperty)) {">1517                  if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(maðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style="">1518                      PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();        </span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1519                      if (predicateProvider != null) {                                                              </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1520                          FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();      </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1521                          if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {         </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1522                              Object val = converter.convert(mapping.getFilterValues().get(0));                     </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1523                              if (predicateProvider instanceof LikePredicateProvider) {                             </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1524                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1524                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, valðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1525                                  break checkProperty;                                                              </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1526                              } else if (predicateProvider instanceof EqPredicateProvider) {                        </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style="">1527                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));</span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1528                                  break checkProperty;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1529                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1530                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1531                      }                                                                                             </span>
<span class="-6733273180612799079" onmouseenter="enter('-6733273180612799079');" onmouseout="out('-6733273180612799079');" style=""><abbr title="1532                      LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;,">1532                      LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional propertðŸ”µ</abbr></span>
<span class="-8181613750620164347" onmouseenter="enter('-8181613750620164347');" onmouseout="out('-8181613750620164347');" style="">1533                              StringUtil.sanitize(expression),                                                      </span>
<span class="-5255115290358802775" onmouseenter="enter('-5255115290358802775');" onmouseout="out('-5255115290358802775');" style="">1534                              StringUtil.sanitize(mappingProperty)));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1537          }                                                                                                         </span>
<span  style="">1538                                                                                                                    </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1539          return restrictions;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1540      }                                                                                                             </span>
<span  style="">1541                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1542      /**                                                                                                           </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1543       * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1543       * Generate EQUALS restrictions for any filter property specified on the entity member of the collection fieldðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1544       *                                                                                                            </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1545       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1545       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteriaðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1546       * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1546       * @param specialExpression the String representation of the path for the collection field in the @Embeddable ðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1547       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1548       * @return the list of restrictions on the collection in the @Embeddable object                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1549       */                                                                                                           </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1550      protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1550      protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMapðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1551          List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                                        </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1552          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="-7768046259105737972" onmouseenter="enter('-7768046259105737972');" onmouseout="out('-7768046259105737972');" style=""><abbr title="1553              if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1553              if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.geðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1554                  FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();              </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1555                  if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {                 </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1556                      Object val = converter.convert(mapping.getFilterValues().get(0));                             </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1557                      String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1557                      String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().ðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1558                      restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1561          }                                                                                                         </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1562          return restrictions;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1563      }                                                                                                             </span>
<span  style="">1564                                                                                                                    </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1565      protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {         </span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1566          //Remove the entity from ORM management - no further attempts to persist                                  </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style="">1567          if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {        </span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1568              getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569          }                                                                                                         </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1570          //Remove the id field value, if it&#x27;s set                                                                  </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1571          String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1571          String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClasðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1572          Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                              </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1573          if (idField == null) {                                                                                    </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1574              throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1574              throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getNameðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575          }                                                                                                         </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1576          idField.setAccessible(true);                                                                              </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1577          if (idField.get(instance) != null) {                                                                      </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1578              idField.set(instance, null);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580      }                                                                                                             </span>
<span  style="">1581                                                                                                                    </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style="">1582      protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {     </span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1583          Class&lt;?&gt; returnType = null;                                                                               </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1584          Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1584          Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName(ðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1585          java.lang.reflect.Type type = field.getGenericType();                                                     </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1586          if (type instanceof ParameterizedType) {                                                                  </span>
<span class="705860026972665445" onmouseenter="enter('705860026972665445');" onmouseout="out('705860026972665445');" style="">1587              ParameterizedType pType = (ParameterizedType) type;                                                   </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1588              Class&lt;?&gt; clazz;                                                                                       </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1589              if (pType.getActualTypeArguments().length &lt; 2) {                                                      </span>
<span class="4541832948460311824" onmouseenter="enter('4541832948460311824');" onmouseout="out('4541832948460311824');" style="">1590                  clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[0];                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1591              } else {                                                                                              </span>
<span class="-5335821615199731853" onmouseenter="enter('-5335821615199731853');" onmouseout="out('-5335821615199731853');" style="">1592                  clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[1];                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593              }                                                                                                     </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1594              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1594              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1595              if (!ArrayUtils.isEmpty(entities)) {                                                                  </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1596                  returnType = entities[entities.length - 1];                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598          }                                                                                                         </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1599          return returnType;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            