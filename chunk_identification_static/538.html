<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>538</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    538
                    <a href="537.html">prev</a>
                    <a href="539.html">next</a>
                    <a href="538_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Evernote/android-job_a58cd1f6c2e2ab776bf851c701b6cc3d33d96dcf_library/src/main/java/com/evernote/android/job/gcm/JobProxyGcm.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;a58cd1f6c2e2ab776bf851c701b6cc3d33d96dcf:library/src/main/java/com/evernote/android/job/gcm/JobProxyGcm.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;a58cd1f6c2e2ab776bf851c701b6cc3d33d96dcf^1:library/src/main/java/com/evernote/android/job/gcm/JobProxyGcm.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;a58cd1f6c2e2ab776bf851c701b6cc3d33d96dcf^2:library/src/main/java/com/evernote/android/job/gcm/JobProxyGcm.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;11c4cb3107b99624b96104be6a20436b3e98d000:library/src/main/java/com/evernote/android/job/gcm/JobProxyGcm.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj], [s]], subset: [[bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2  * Copyright 2007-present Evernote Corporation.                                                          </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3  * All rights reserved.                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4  *                                                                                                       </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5  * Redistribution and use in source and binary forms, with or without modification,                      </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6  * are permitted provided that the following conditions are met:                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8  * 1. Redistributions of source code must retain the above copyright notice, this                        </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9  *    list of conditions and the following disclaimer.                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10  *                                                                                                       </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11  * 2. Redistributions in binary form must reproduce the above copyright notice,                          </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12  *    this list of conditions and the following disclaimer in the documentation                          </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13  *    and/or other materials provided with the distribution.                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14  *                                                                                                       </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                       </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                         </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                    </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18  * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                       </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19  * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                        </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20  * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                         </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                       </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22  * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                       </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23  * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                             </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25  */                                                                                                      </span>
<span class="-5682958189068249715" onmouseenter="enter('-5682958189068249715');" onmouseout="out('-5682958189068249715');" style="">  26 package com.evernote.android.job.gcm;                                                                    </span>
<span  style="">  27                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28 import android.content.Context;                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  29 import android.support.annotation.NonNull;                                                               </span>
<span  style="">  30                                                                                                          </span>
<span class="-5245147800812157155" onmouseenter="enter('-5245147800812157155');" onmouseout="out('-5245147800812157155');" style="">  31 import com.evernote.android.job.util.JobCat;                                                             </span>
<span class="2610792870634489402" onmouseenter="enter('2610792870634489402');" onmouseout="out('2610792870634489402');" style="">  32 import com.google.android.gms.gcm.GcmNetworkManager;                                                     </span>
<span class="-7752222080443615886" onmouseenter="enter('-7752222080443615886');" onmouseout="out('-7752222080443615886');" style="">  33 import com.google.android.gms.gcm.OneoffTask;                                                            </span>
<span class="-1685873620783984700" onmouseenter="enter('-1685873620783984700');" onmouseout="out('-1685873620783984700');" style="">  34 import com.google.android.gms.gcm.PeriodicTask;                                                          </span>
<span class="-3437068619897170006" onmouseenter="enter('-3437068619897170006');" onmouseout="out('-3437068619897170006');" style="">  35 import com.google.android.gms.gcm.Task;                                                                  </span>
<span class="-2501401432587011508" onmouseenter="enter('-2501401432587011508');" onmouseout="out('-2501401432587011508');" style="">  36 import com.evernote.android.job.JobProxy;                                                                </span>
<span class="-7790986164132737290" onmouseenter="enter('-7790986164132737290');" onmouseout="out('-7790986164132737290');" style="">  37 import com.evernote.android.job.JobRequest;                                                              </span>
<span class="2270421051523495577" onmouseenter="enter('2270421051523495577');" onmouseout="out('2270421051523495577');" style="">  38 import com.evernote.android.job.util.JobUtil;                                                            </span>
<span  style="">  39                                                                                                          </span>
<span class="4887698622156748971" onmouseenter="enter('4887698622156748971');" onmouseout="out('4887698622156748971');" style="">  40 import net.vrallev.android.cat.CatLog;                                                                   </span>
<span  style="">  41                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  42 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  43  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  44  */                                                                                                      </span>
<span class="-6119035943248084841" onmouseenter="enter('-6119035943248084841');" onmouseout="out('-6119035943248084841');" style="">  45 public class JobProxyGcm implements JobProxy {                                                           </span>
<span  style="">  46                                                                                                          </span>
<span class="-9070326540423963424" onmouseenter="enter('-9070326540423963424');" onmouseout="out('-9070326540423963424');" style="">  47     private static final CatLog CAT = new JobCat(&quot;JobProxyGcm&quot;);                                         </span>
<span  style="">  48                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">  49     /*                                                                                                   </span>
<span class="-1506400248560817253" onmouseenter="enter('-1506400248560817253');" onmouseout="out('-1506400248560817253');" style="">  50      * Requires charging doesn&#x27;t work reliable. Like the documentation says, the job doesn&#x27;t run if      </span>
<span class="5575172958968287294" onmouseenter="enter('5575172958968287294');" onmouseout="out('5575172958968287294');" style="">  51      * not plugged in. However, the job never runs until you schedule a new one although the device is   </span>
<span class="-3604798368442683209" onmouseenter="enter('-3604798368442683209');" onmouseout="out('-3604798368442683209');" style="">  52      * already plugged in again.                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  53      */                                                                                                  </span>
<span  style="">  54                                                                                                          </span>
<span class="6906034020175711500" onmouseenter="enter('6906034020175711500');" onmouseout="out('6906034020175711500');" style="">  55     private final GcmNetworkManager mGcmNetworkManager;                                                  </span>
<span  style="">  56                                                                                                          </span>
<span class="-8282591505358157454" onmouseenter="enter('-8282591505358157454');" onmouseout="out('-8282591505358157454');" style="">  57     public JobProxyGcm(Context context) {                                                                </span>
<span class="-2150563629627861533" onmouseenter="enter('-2150563629627861533');" onmouseout="out('-2150563629627861533');" style="">  58         mGcmNetworkManager = GcmNetworkManager.getInstance(context);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59     }                                                                                                    </span>
<span  style="">  60                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  61     @Override                                                                                            </span>
<span class="1153127991076017133" onmouseenter="enter('1153127991076017133');" onmouseout="out('1153127991076017133');" style="">  62     public void plantOneOff(JobRequest request) {                                                        </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  63 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="1091648150933153784" onmouseenter="enter('1091648150933153784');" onmouseout="out('1091648150933153784');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  64         long startMs = Common.getStartMs(request);                                                       </span>
<span class="-1047499596251801473" onmouseenter="enter('-1047499596251801473');" onmouseout="out('-1047499596251801473');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  65         long endMs = Common.getEndMs(request);                                                           </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  66                                                                                                          </span>
<span class="-8483436900156296563" onmouseenter="enter('-8483436900156296563');" onmouseout="out('-8483436900156296563');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  67         OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request)                              </span>
<span class="-8138052627515582483" onmouseenter="enter('-8138052627515582483');" onmouseout="out('-8138052627515582483');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  68                 .setExecutionWindow(startMs / 1_000, endMs / 1_000)                                      </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  69 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-78443860292162945" onmouseenter="enter('-78443860292162945');" onmouseout="out('-78443860292162945');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70         OneoffTask task = new OneoffTask.Builder()                                                       </span>
<span class="-2958311635085639514" onmouseenter="enter('-2958311635085639514');" onmouseout="out('-2958311635085639514');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71                 .setTag(createTag(request))                                                              </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72                 .setService(PlatformGcmService.class)                                                    </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73                 .setUpdateCurrent(true)                                                                  </span>
<span class="9146423022664500063" onmouseenter="enter('9146423022664500063');" onmouseout="out('9146423022664500063');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74                 .setExecutionWindow(Common.getStartMs(request) / 1_000, Common.getEndMs(request) / 1_000)</span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75                 .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                   </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76                 .setPersisted(request.isPersisted())                                                     </span>
<span class="8424930648150565139" onmouseenter="enter('8424930648150565139');" onmouseout="out('8424930648150565139');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77                 .setRequiresCharging(request.requiresCharging())                                         </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78                 .build();                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80         mGcmNetworkManager.schedule(task);                                                               </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  81 =======                                                                                                  </span>
<span class="-3955760732866864919" onmouseenter="enter('-3955760732866864919');" onmouseout="out('-3955760732866864919');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  82         long startSeconds = Common.getStartMs(request) / 1_000;                                          </span>
<span class="-6069085433622717228" onmouseenter="enter('-6069085433622717228');" onmouseout="out('-6069085433622717228');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  83         long endSeconds = Math.max(Common.getEndMs(request) / 1_000, startSeconds + 1);                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84                                                                                                          </span>
<span class="-78443860292162945" onmouseenter="enter('-78443860292162945');" onmouseout="out('-78443860292162945');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85         OneoffTask task = new OneoffTask.Builder()                                                       </span>
<span class="-2958311635085639514" onmouseenter="enter('-2958311635085639514');" onmouseout="out('-2958311635085639514');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  86                 .setTag(createTag(request))                                                              </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  87                 .setService(PlatformGcmService.class)                                                    </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  88                 .setUpdateCurrent(true)                                                                  </span>
<span class="-1161919699575439104" onmouseenter="enter('-1161919699575439104');" onmouseout="out('-1161919699575439104');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  89                 .setExecutionWindow(startSeconds, endSeconds)                                            </span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  90                 .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                   </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  91                 .setPersisted(request.isPersisted())                                                     </span>
<span class="8424930648150565139" onmouseenter="enter('8424930648150565139');" onmouseout="out('8424930648150565139');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  92                 .setRequiresCharging(request.requiresCharging())                                         </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  93 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">  94                 .build();                                                                                </span>
<span  style="">  95                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  96         mGcmNetworkManager.schedule(task);                                                               </span>
<span  style="">  97                                                                                                          </span>
<span class="8764472676409949433" onmouseenter="enter('8764472676409949433');" onmouseout="out('8764472676409949433');" style=""><abbr title="  98         CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request, JobUtil.timeToString(startMs), JobUtil.timeToString(endMs));">  98         CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request, JobUtil.timeToString(startMs), JobUt🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 101     @Override                                                                                            </span>
<span class="6779937733055571850" onmouseenter="enter('6779937733055571850');" onmouseout="out('6779937733055571850');" style=""> 102     public void plantPeriodic(JobRequest request) {                                                      </span>
<span class="509539607905081639" onmouseenter="enter('509539607905081639');" onmouseout="out('509539607905081639');" style=""> 103         PeriodicTask task = prepareBuilder(new PeriodicTask.Builder(), request)                          </span>
<span class="-5592338440157378709" onmouseenter="enter('-5592338440157378709');" onmouseout="out('-5592338440157378709');" style=""> 104                 .setPeriod(request.getIntervalMs() / 1_000)                                              </span>
<span class="3382904860851274073" onmouseenter="enter('3382904860851274073');" onmouseout="out('3382904860851274073');" style=""> 105                 .setFlex(request.getFlexMs() / 1_000)                                                    </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 106                 .build();                                                                                </span>
<span  style=""> 107                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style=""> 108         mGcmNetworkManager.schedule(task);                                                               </span>
<span  style=""> 109                                                                                                          </span>
<span class="-4810033906053247857" onmouseenter="enter('-4810033906053247857');" onmouseout="out('-4810033906053247857');" style=""><abbr title=" 110         CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s, flex %s&quot;, request, JobUtil.timeToString(request.getIntervalMs()),"> 110         CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s, flex %s&quot;, request, JobUtil.timeToString(request.g🔵</abbr></span>
<span class="-7441385486773924310" onmouseenter="enter('-7441385486773924310');" onmouseout="out('-7441385486773924310');" style=""> 111                 JobUtil.timeToString(request.getFlexMs()));                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112     }                                                                                                    </span>
<span  style=""> 113                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 114     @Override                                                                                            </span>
<span class="467066045427666857" onmouseenter="enter('467066045427666857');" onmouseout="out('467066045427666857');" style=""> 115     public void plantPeriodicFlexSupport(JobRequest request) {                                           </span>
<span class="4160015042231681181" onmouseenter="enter('4160015042231681181');" onmouseout="out('4160015042231681181');" style=""> 116         CAT.w(&quot;plantPeriodicFlexSupport called although flex is supported&quot;);                             </span>
<span  style=""> 117                                                                                                          </span>
<span class="6364453110630299930" onmouseenter="enter('6364453110630299930');" onmouseout="out('6364453110630299930');" style=""> 118         long startMs = Common.getStartMsSupportFlex(request);                                            </span>
<span class="-8506679842292509336" onmouseenter="enter('-8506679842292509336');" onmouseout="out('-8506679842292509336');" style=""> 119         long endMs = Common.getEndMsSupportFlex(request);                                                </span>
<span  style=""> 120                                                                                                          </span>
<span class="-8483436900156296563" onmouseenter="enter('-8483436900156296563');" onmouseout="out('-8483436900156296563');" style=""> 121         OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request)                              </span>
<span class="-8138052627515582483" onmouseenter="enter('-8138052627515582483');" onmouseout="out('-8138052627515582483');" style=""> 122                 .setExecutionWindow(startMs / 1_000, endMs / 1_000)                                      </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 123                 .build();                                                                                </span>
<span  style=""> 124                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style=""> 125         mGcmNetworkManager.schedule(task);                                                               </span>
<span  style=""> 126                                                                                                          </span>
<span class="-140310556109695852" onmouseenter="enter('-140310556109695852');" onmouseout="out('-140310556109695852');" style=""><abbr title=" 127         CAT.d(&quot;Scheduled periodic (flex support), %s, start %s, end %s, flex %s&quot;, request, JobUtil.timeToString(startMs),"> 127         CAT.d(&quot;Scheduled periodic (flex support), %s, start %s, end %s, flex %s&quot;, request, JobUtil.timeTo🔵</abbr></span>
<span class="-5041897706656715567" onmouseenter="enter('-5041897706656715567');" onmouseout="out('-5041897706656715567');" style=""> 128                 JobUtil.timeToString(endMs), JobUtil.timeToString(request.getFlexMs()));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129     }                                                                                                    </span>
<span  style=""> 130                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131     @Override                                                                                            </span>
<span class="8351212016063186756" onmouseenter="enter('8351212016063186756');" onmouseout="out('8351212016063186756');" style=""> 132     public void cancel(int jobId) {                                                                      </span>
<span class="975413776133834230" onmouseenter="enter('975413776133834230');" onmouseout="out('975413776133834230');" style=""> 133         mGcmNetworkManager.cancelTask(createTag(jobId), PlatformGcmService.class);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134     }                                                                                                    </span>
<span  style=""> 135                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 136     @Override                                                                                            </span>
<span class="-5725680292100329305" onmouseenter="enter('-5725680292100329305');" onmouseout="out('-5725680292100329305');" style=""> 137     public boolean isPlatformJobScheduled(JobRequest request) {                                          </span>
<span class="-1076637069792494743" onmouseenter="enter('-1076637069792494743');" onmouseout="out('-1076637069792494743');" style=""> 138         // there is no option to check whether a task is scheduled, assume it is                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 139         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140     }                                                                                                    </span>
<span  style=""> 141                                                                                                          </span>
<span class="7534275103015095509" onmouseenter="enter('7534275103015095509');" onmouseout="out('7534275103015095509');" style=""> 142     protected &lt;T extends Task.Builder&gt; T prepareBuilder(T builder, JobRequest request) {                 </span>
<span class="232340519661816193" onmouseenter="enter('232340519661816193');" onmouseout="out('232340519661816193');" style=""> 143         builder.setTag(createTag(request))                                                               </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style=""> 144                 .setService(PlatformGcmService.class)                                                    </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style=""> 145                 .setUpdateCurrent(true)                                                                  </span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style=""> 146                 .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                   </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style=""> 147                 .setPersisted(request.isPersisted())                                                     </span>
<span class="-996785392611189841" onmouseenter="enter('-996785392611189841');" onmouseout="out('-996785392611189841');" style=""> 148                 .setRequiresCharging(request.requiresCharging());                                        </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style=""> 149         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="-8239276103809431358" onmouseenter="enter('-8239276103809431358');" onmouseout="out('-8239276103809431358');" style=""> 152     protected String createTag(JobRequest request) {                                                     </span>
<span class="-6975613568163061219" onmouseenter="enter('-6975613568163061219');" onmouseout="out('-6975613568163061219');" style=""> 153         return createTag(request.getJobId());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154     }                                                                                                    </span>
<span  style=""> 155                                                                                                          </span>
<span class="-4742551516237906259" onmouseenter="enter('-4742551516237906259');" onmouseout="out('-4742551516237906259');" style=""> 156     protected String createTag(int jobId) {                                                              </span>
<span class="-4693579970924184163" onmouseenter="enter('-4693579970924184163');" onmouseout="out('-4693579970924184163');" style=""> 157         return String.valueOf(jobId);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158     }                                                                                                    </span>
<span  style=""> 159                                                                                                          </span>
<span class="-7049120374837409354" onmouseenter="enter('-7049120374837409354');" onmouseout="out('-7049120374837409354');" style=""> 160     protected int convertNetworkType(@NonNull JobRequest.NetworkType networkType) {                      </span>
<span class="6345274419817368279" onmouseenter="enter('6345274419817368279');" onmouseout="out('6345274419817368279');" style=""> 161         switch (networkType) {                                                                           </span>
<span class="5441294856378657565" onmouseenter="enter('5441294856378657565');" onmouseout="out('5441294856378657565');" style=""> 162             case ANY:                                                                                    </span>
<span class="2606657379259846207" onmouseenter="enter('2606657379259846207');" onmouseout="out('2606657379259846207');" style=""> 163                 return Task.NETWORK_STATE_ANY;                                                           </span>
<span class="3743721618231795347" onmouseenter="enter('3743721618231795347');" onmouseout="out('3743721618231795347');" style=""> 164             case CONNECTED:                                                                              </span>
<span class="-8000940176381003426" onmouseenter="enter('-8000940176381003426');" onmouseout="out('-8000940176381003426');" style=""> 165                 return Task.NETWORK_STATE_CONNECTED;                                                     </span>
<span class="7421479660330843233" onmouseenter="enter('7421479660330843233');" onmouseout="out('7421479660330843233');" style=""> 166             case UNMETERED:                                                                              </span>
<span class="-2427466575685847390" onmouseenter="enter('-2427466575685847390');" onmouseout="out('-2427466575685847390');" style=""> 167                 return Task.NETWORK_STATE_UNMETERED;                                                     </span>
<span class="6783567091425289266" onmouseenter="enter('6783567091425289266');" onmouseout="out('6783567091425289266');" style=""> 168             case NOT_ROAMING:                                                                            </span>
<span class="4460432967058427781" onmouseenter="enter('4460432967058427781');" onmouseout="out('4460432967058427781');" style=""> 169                 return Task.NETWORK_STATE_UNMETERED; // use as fallback, NOT_ROAMING not supported       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 170             default:                                                                                     </span>
<span class="3630837704546175647" onmouseenter="enter('3630837704546175647');" onmouseout="out('3630837704546175647');" style=""> 171                 throw new IllegalStateException(&quot;not implemented&quot;);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2  * Copyright 2007-present Evernote Corporation.                                                          </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3  * All rights reserved.                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4  *                                                                                                       </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5  * Redistribution and use in source and binary forms, with or without modification,                      </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6  * are permitted provided that the following conditions are met:                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8  * 1. Redistributions of source code must retain the above copyright notice, this                        </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9  *    list of conditions and the following disclaimer.                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10  *                                                                                                       </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11  * 2. Redistributions in binary form must reproduce the above copyright notice,                          </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12  *    this list of conditions and the following disclaimer in the documentation                          </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13  *    and/or other materials provided with the distribution.                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14  *                                                                                                       </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                       </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                         </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                    </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18  * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                       </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19  * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                        </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20  * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                         </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                       </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22  * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                       </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23  * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                             </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25  */                                                                                                      </span>
<span class="-5682958189068249715" onmouseenter="enter('-5682958189068249715');" onmouseout="out('-5682958189068249715');" style="">  26 package com.evernote.android.job.gcm;                                                                    </span>
<span  style="">  27                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28 import android.content.Context;                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  29 import android.support.annotation.NonNull;                                                               </span>
<span  style="">  30                                                                                                          </span>
<span class="-5245147800812157155" onmouseenter="enter('-5245147800812157155');" onmouseout="out('-5245147800812157155');" style="">  31 import com.evernote.android.job.util.JobCat;                                                             </span>
<span class="2610792870634489402" onmouseenter="enter('2610792870634489402');" onmouseout="out('2610792870634489402');" style="">  32 import com.google.android.gms.gcm.GcmNetworkManager;                                                     </span>
<span class="-7752222080443615886" onmouseenter="enter('-7752222080443615886');" onmouseout="out('-7752222080443615886');" style="">  33 import com.google.android.gms.gcm.OneoffTask;                                                            </span>
<span class="-1685873620783984700" onmouseenter="enter('-1685873620783984700');" onmouseout="out('-1685873620783984700');" style="">  34 import com.google.android.gms.gcm.PeriodicTask;                                                          </span>
<span class="-3437068619897170006" onmouseenter="enter('-3437068619897170006');" onmouseout="out('-3437068619897170006');" style="">  35 import com.google.android.gms.gcm.Task;                                                                  </span>
<span class="-2501401432587011508" onmouseenter="enter('-2501401432587011508');" onmouseout="out('-2501401432587011508');" style="">  36 import com.evernote.android.job.JobProxy;                                                                </span>
<span class="-7790986164132737290" onmouseenter="enter('-7790986164132737290');" onmouseout="out('-7790986164132737290');" style="">  37 import com.evernote.android.job.JobRequest;                                                              </span>
<span class="2270421051523495577" onmouseenter="enter('2270421051523495577');" onmouseout="out('2270421051523495577');" style="">  38 import com.evernote.android.job.util.JobUtil;                                                            </span>
<span  style="">  39                                                                                                          </span>
<span class="4887698622156748971" onmouseenter="enter('4887698622156748971');" onmouseout="out('4887698622156748971');" style="">  40 import net.vrallev.android.cat.CatLog;                                                                   </span>
<span  style="">  41                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  42 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  43  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  44  */                                                                                                      </span>
<span class="-6119035943248084841" onmouseenter="enter('-6119035943248084841');" onmouseout="out('-6119035943248084841');" style="">  45 public class JobProxyGcm implements JobProxy {                                                           </span>
<span  style="">  46                                                                                                          </span>
<span class="-9070326540423963424" onmouseenter="enter('-9070326540423963424');" onmouseout="out('-9070326540423963424');" style="">  47     private static final CatLog CAT = new JobCat(&quot;JobProxyGcm&quot;);                                         </span>
<span  style="">  48                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">  49     /*                                                                                                   </span>
<span class="-1506400248560817253" onmouseenter="enter('-1506400248560817253');" onmouseout="out('-1506400248560817253');" style="">  50      * Requires charging doesn&#x27;t work reliable. Like the documentation says, the job doesn&#x27;t run if      </span>
<span class="5575172958968287294" onmouseenter="enter('5575172958968287294');" onmouseout="out('5575172958968287294');" style="">  51      * not plugged in. However, the job never runs until you schedule a new one although the device is   </span>
<span class="-3604798368442683209" onmouseenter="enter('-3604798368442683209');" onmouseout="out('-3604798368442683209');" style="">  52      * already plugged in again.                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  53      */                                                                                                  </span>
<span  style="">  54                                                                                                          </span>
<span class="6906034020175711500" onmouseenter="enter('6906034020175711500');" onmouseout="out('6906034020175711500');" style="">  55     private final GcmNetworkManager mGcmNetworkManager;                                                  </span>
<span  style="">  56                                                                                                          </span>
<span class="-8282591505358157454" onmouseenter="enter('-8282591505358157454');" onmouseout="out('-8282591505358157454');" style="">  57     public JobProxyGcm(Context context) {                                                                </span>
<span class="-2150563629627861533" onmouseenter="enter('-2150563629627861533');" onmouseout="out('-2150563629627861533');" style="">  58         mGcmNetworkManager = GcmNetworkManager.getInstance(context);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59     }                                                                                                    </span>
<span  style="">  60                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  61     @Override                                                                                            </span>
<span class="1153127991076017133" onmouseenter="enter('1153127991076017133');" onmouseout="out('1153127991076017133');" style="">  62     public void plantOneOff(JobRequest request) {                                                        </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  63 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="1091648150933153784" onmouseenter="enter('1091648150933153784');" onmouseout="out('1091648150933153784');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  64         long startMs = Common.getStartMs(request);                                                       </span>
<span class="-1047499596251801473" onmouseenter="enter('-1047499596251801473');" onmouseout="out('-1047499596251801473');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  65         long endMs = Common.getEndMs(request);                                                           </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  66                                                                                                          </span>
<span class="-8483436900156296563" onmouseenter="enter('-8483436900156296563');" onmouseout="out('-8483436900156296563');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  67         OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request)                              </span>
<span class="-8138052627515582483" onmouseenter="enter('-8138052627515582483');" onmouseout="out('-8138052627515582483');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  68                 .setExecutionWindow(startMs / 1_000, endMs / 1_000)                                      </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  69 ||||||| BASE                                                                                             </span>
<span class="-78443860292162945" onmouseenter="enter('-78443860292162945');" onmouseout="out('-78443860292162945');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70         OneoffTask task = new OneoffTask.Builder()                                                       </span>
<span class="-2958311635085639514" onmouseenter="enter('-2958311635085639514');" onmouseout="out('-2958311635085639514');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71                 .setTag(createTag(request))                                                              </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72                 .setService(PlatformGcmService.class)                                                    </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73                 .setUpdateCurrent(true)                                                                  </span>
<span class="9146423022664500063" onmouseenter="enter('9146423022664500063');" onmouseout="out('9146423022664500063');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74                 .setExecutionWindow(Common.getStartMs(request) / 1_000, Common.getEndMs(request) / 1_000)</span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75                 .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                   </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76                 .setPersisted(request.isPersisted())                                                     </span>
<span class="8424930648150565139" onmouseenter="enter('8424930648150565139');" onmouseout="out('8424930648150565139');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77                 .setRequiresCharging(request.requiresCharging())                                         </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78                 .build();                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80         mGcmNetworkManager.schedule(task);                                                               </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  81 =======                                                                                                  </span>
<span class="-3955760732866864919" onmouseenter="enter('-3955760732866864919');" onmouseout="out('-3955760732866864919');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  82         long startSeconds = Common.getStartMs(request) / 1_000;                                          </span>
<span class="-6069085433622717228" onmouseenter="enter('-6069085433622717228');" onmouseout="out('-6069085433622717228');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  83         long endSeconds = Math.max(Common.getEndMs(request) / 1_000, startSeconds + 1);                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84                                                                                                          </span>
<span class="-78443860292162945" onmouseenter="enter('-78443860292162945');" onmouseout="out('-78443860292162945');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85         OneoffTask task = new OneoffTask.Builder()                                                       </span>
<span class="-2958311635085639514" onmouseenter="enter('-2958311635085639514');" onmouseout="out('-2958311635085639514');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  86                 .setTag(createTag(request))                                                              </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  87                 .setService(PlatformGcmService.class)                                                    </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  88                 .setUpdateCurrent(true)                                                                  </span>
<span class="-1161919699575439104" onmouseenter="enter('-1161919699575439104');" onmouseout="out('-1161919699575439104');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  89                 .setExecutionWindow(startSeconds, endSeconds)                                            </span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  90                 .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                   </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  91                 .setPersisted(request.isPersisted())                                                     </span>
<span class="8424930648150565139" onmouseenter="enter('8424930648150565139');" onmouseout="out('8424930648150565139');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  92                 .setRequiresCharging(request.requiresCharging())                                         </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  93 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">  94                 .build();                                                                                </span>
<span  style="">  95                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  96         mGcmNetworkManager.schedule(task);                                                               </span>
<span  style="">  97                                                                                                          </span>
<span class="8764472676409949433" onmouseenter="enter('8764472676409949433');" onmouseout="out('8764472676409949433');" style=""><abbr title="  98         CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request, JobUtil.timeToString(startMs), JobUtil.timeToString(endMs));">  98         CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request, JobUtil.timeToString(startMs), JobUt🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 101     @Override                                                                                            </span>
<span class="6779937733055571850" onmouseenter="enter('6779937733055571850');" onmouseout="out('6779937733055571850');" style=""> 102     public void plantPeriodic(JobRequest request) {                                                      </span>
<span class="509539607905081639" onmouseenter="enter('509539607905081639');" onmouseout="out('509539607905081639');" style=""> 103         PeriodicTask task = prepareBuilder(new PeriodicTask.Builder(), request)                          </span>
<span class="-5592338440157378709" onmouseenter="enter('-5592338440157378709');" onmouseout="out('-5592338440157378709');" style=""> 104                 .setPeriod(request.getIntervalMs() / 1_000)                                              </span>
<span class="3382904860851274073" onmouseenter="enter('3382904860851274073');" onmouseout="out('3382904860851274073');" style=""> 105                 .setFlex(request.getFlexMs() / 1_000)                                                    </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 106                 .build();                                                                                </span>
<span  style=""> 107                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style=""> 108         mGcmNetworkManager.schedule(task);                                                               </span>
<span  style=""> 109                                                                                                          </span>
<span class="-4810033906053247857" onmouseenter="enter('-4810033906053247857');" onmouseout="out('-4810033906053247857');" style=""><abbr title=" 110         CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s, flex %s&quot;, request, JobUtil.timeToString(request.getIntervalMs()),"> 110         CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s, flex %s&quot;, request, JobUtil.timeToString(request.g🔵</abbr></span>
<span class="-7441385486773924310" onmouseenter="enter('-7441385486773924310');" onmouseout="out('-7441385486773924310');" style=""> 111                 JobUtil.timeToString(request.getFlexMs()));                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112     }                                                                                                    </span>
<span  style=""> 113                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 114     @Override                                                                                            </span>
<span class="467066045427666857" onmouseenter="enter('467066045427666857');" onmouseout="out('467066045427666857');" style=""> 115     public void plantPeriodicFlexSupport(JobRequest request) {                                           </span>
<span class="4160015042231681181" onmouseenter="enter('4160015042231681181');" onmouseout="out('4160015042231681181');" style=""> 116         CAT.w(&quot;plantPeriodicFlexSupport called although flex is supported&quot;);                             </span>
<span  style=""> 117                                                                                                          </span>
<span class="6364453110630299930" onmouseenter="enter('6364453110630299930');" onmouseout="out('6364453110630299930');" style=""> 118         long startMs = Common.getStartMsSupportFlex(request);                                            </span>
<span class="-8506679842292509336" onmouseenter="enter('-8506679842292509336');" onmouseout="out('-8506679842292509336');" style=""> 119         long endMs = Common.getEndMsSupportFlex(request);                                                </span>
<span  style=""> 120                                                                                                          </span>
<span class="-8483436900156296563" onmouseenter="enter('-8483436900156296563');" onmouseout="out('-8483436900156296563');" style=""> 121         OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request)                              </span>
<span class="-8138052627515582483" onmouseenter="enter('-8138052627515582483');" onmouseout="out('-8138052627515582483');" style=""> 122                 .setExecutionWindow(startMs / 1_000, endMs / 1_000)                                      </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 123                 .build();                                                                                </span>
<span  style=""> 124                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style=""> 125         mGcmNetworkManager.schedule(task);                                                               </span>
<span  style=""> 126                                                                                                          </span>
<span class="-140310556109695852" onmouseenter="enter('-140310556109695852');" onmouseout="out('-140310556109695852');" style=""><abbr title=" 127         CAT.d(&quot;Scheduled periodic (flex support), %s, start %s, end %s, flex %s&quot;, request, JobUtil.timeToString(startMs),"> 127         CAT.d(&quot;Scheduled periodic (flex support), %s, start %s, end %s, flex %s&quot;, request, JobUtil.timeTo🔵</abbr></span>
<span class="-5041897706656715567" onmouseenter="enter('-5041897706656715567');" onmouseout="out('-5041897706656715567');" style=""> 128                 JobUtil.timeToString(endMs), JobUtil.timeToString(request.getFlexMs()));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129     }                                                                                                    </span>
<span  style=""> 130                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131     @Override                                                                                            </span>
<span class="8351212016063186756" onmouseenter="enter('8351212016063186756');" onmouseout="out('8351212016063186756');" style=""> 132     public void cancel(int jobId) {                                                                      </span>
<span class="975413776133834230" onmouseenter="enter('975413776133834230');" onmouseout="out('975413776133834230');" style=""> 133         mGcmNetworkManager.cancelTask(createTag(jobId), PlatformGcmService.class);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134     }                                                                                                    </span>
<span  style=""> 135                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 136     @Override                                                                                            </span>
<span class="-5725680292100329305" onmouseenter="enter('-5725680292100329305');" onmouseout="out('-5725680292100329305');" style=""> 137     public boolean isPlatformJobScheduled(JobRequest request) {                                          </span>
<span class="-1076637069792494743" onmouseenter="enter('-1076637069792494743');" onmouseout="out('-1076637069792494743');" style=""> 138         // there is no option to check whether a task is scheduled, assume it is                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 139         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140     }                                                                                                    </span>
<span  style=""> 141                                                                                                          </span>
<span class="7534275103015095509" onmouseenter="enter('7534275103015095509');" onmouseout="out('7534275103015095509');" style=""> 142     protected &lt;T extends Task.Builder&gt; T prepareBuilder(T builder, JobRequest request) {                 </span>
<span class="232340519661816193" onmouseenter="enter('232340519661816193');" onmouseout="out('232340519661816193');" style=""> 143         builder.setTag(createTag(request))                                                               </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style=""> 144                 .setService(PlatformGcmService.class)                                                    </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style=""> 145                 .setUpdateCurrent(true)                                                                  </span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style=""> 146                 .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                   </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style=""> 147                 .setPersisted(request.isPersisted())                                                     </span>
<span class="-996785392611189841" onmouseenter="enter('-996785392611189841');" onmouseout="out('-996785392611189841');" style=""> 148                 .setRequiresCharging(request.requiresCharging());                                        </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style=""> 149         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="-8239276103809431358" onmouseenter="enter('-8239276103809431358');" onmouseout="out('-8239276103809431358');" style=""> 152     protected String createTag(JobRequest request) {                                                     </span>
<span class="-6975613568163061219" onmouseenter="enter('-6975613568163061219');" onmouseout="out('-6975613568163061219');" style=""> 153         return createTag(request.getJobId());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154     }                                                                                                    </span>
<span  style=""> 155                                                                                                          </span>
<span class="-4742551516237906259" onmouseenter="enter('-4742551516237906259');" onmouseout="out('-4742551516237906259');" style=""> 156     protected String createTag(int jobId) {                                                              </span>
<span class="-4693579970924184163" onmouseenter="enter('-4693579970924184163');" onmouseout="out('-4693579970924184163');" style=""> 157         return String.valueOf(jobId);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158     }                                                                                                    </span>
<span  style=""> 159                                                                                                          </span>
<span class="-7049120374837409354" onmouseenter="enter('-7049120374837409354');" onmouseout="out('-7049120374837409354');" style=""> 160     protected int convertNetworkType(@NonNull JobRequest.NetworkType networkType) {                      </span>
<span class="6345274419817368279" onmouseenter="enter('6345274419817368279');" onmouseout="out('6345274419817368279');" style=""> 161         switch (networkType) {                                                                           </span>
<span class="5441294856378657565" onmouseenter="enter('5441294856378657565');" onmouseout="out('5441294856378657565');" style=""> 162             case ANY:                                                                                    </span>
<span class="2606657379259846207" onmouseenter="enter('2606657379259846207');" onmouseout="out('2606657379259846207');" style=""> 163                 return Task.NETWORK_STATE_ANY;                                                           </span>
<span class="3743721618231795347" onmouseenter="enter('3743721618231795347');" onmouseout="out('3743721618231795347');" style=""> 164             case CONNECTED:                                                                              </span>
<span class="-8000940176381003426" onmouseenter="enter('-8000940176381003426');" onmouseout="out('-8000940176381003426');" style=""> 165                 return Task.NETWORK_STATE_CONNECTED;                                                     </span>
<span class="7421479660330843233" onmouseenter="enter('7421479660330843233');" onmouseout="out('7421479660330843233');" style=""> 166             case UNMETERED:                                                                              </span>
<span class="-2427466575685847390" onmouseenter="enter('-2427466575685847390');" onmouseout="out('-2427466575685847390');" style=""> 167                 return Task.NETWORK_STATE_UNMETERED;                                                     </span>
<span class="6783567091425289266" onmouseenter="enter('6783567091425289266');" onmouseout="out('6783567091425289266');" style=""> 168             case NOT_ROAMING:                                                                            </span>
<span class="4460432967058427781" onmouseenter="enter('4460432967058427781');" onmouseout="out('4460432967058427781');" style=""> 169                 return Task.NETWORK_STATE_UNMETERED; // use as fallback, NOT_ROAMING not supported       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 170             default:                                                                                     </span>
<span class="3630837704546175647" onmouseenter="enter('3630837704546175647');" onmouseout="out('3630837704546175647');" style=""> 171                 throw new IllegalStateException(&quot;not implemented&quot;);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2  * Copyright 2007-present Evernote Corporation.                                                          </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3  * All rights reserved.                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4  *                                                                                                       </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5  * Redistribution and use in source and binary forms, with or without modification,                      </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6  * are permitted provided that the following conditions are met:                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8  * 1. Redistributions of source code must retain the above copyright notice, this                        </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9  *    list of conditions and the following disclaimer.                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10  *                                                                                                       </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11  * 2. Redistributions in binary form must reproduce the above copyright notice,                          </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12  *    this list of conditions and the following disclaimer in the documentation                          </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13  *    and/or other materials provided with the distribution.                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14  *                                                                                                       </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                       </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                         </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                    </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18  * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                       </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19  * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                        </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20  * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                         </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                       </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22  * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                       </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23  * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                             </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25  */                                                                                                      </span>
<span class="-5682958189068249715" onmouseenter="enter('-5682958189068249715');" onmouseout="out('-5682958189068249715');" style="">  26 package com.evernote.android.job.gcm;                                                                    </span>
<span  style="">  27                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28 import android.content.Context;                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  29 import android.support.annotation.NonNull;                                                               </span>
<span class="-2501401432587011508" onmouseenter="enter('-2501401432587011508');" onmouseout="out('-2501401432587011508');" style="">  30 import com.evernote.android.job.JobProxy;                                                                </span>
<span class="-7790986164132737290" onmouseenter="enter('-7790986164132737290');" onmouseout="out('-7790986164132737290');" style="">  31 import com.evernote.android.job.JobRequest;                                                              </span>
<span class="-5245147800812157155" onmouseenter="enter('-5245147800812157155');" onmouseout="out('-5245147800812157155');" style="">  32 import com.evernote.android.job.util.JobCat;                                                             </span>
<span class="2270421051523495577" onmouseenter="enter('2270421051523495577');" onmouseout="out('2270421051523495577');" style="">  33 import com.evernote.android.job.util.JobUtil;                                                            </span>
<span class="2610792870634489402" onmouseenter="enter('2610792870634489402');" onmouseout="out('2610792870634489402');" style="">  34 import com.google.android.gms.gcm.GcmNetworkManager;                                                     </span>
<span class="-7752222080443615886" onmouseenter="enter('-7752222080443615886');" onmouseout="out('-7752222080443615886');" style="">  35 import com.google.android.gms.gcm.OneoffTask;                                                            </span>
<span class="-1685873620783984700" onmouseenter="enter('-1685873620783984700');" onmouseout="out('-1685873620783984700');" style="">  36 import com.google.android.gms.gcm.PeriodicTask;                                                          </span>
<span class="-3437068619897170006" onmouseenter="enter('-3437068619897170006');" onmouseout="out('-3437068619897170006');" style="">  37 import com.google.android.gms.gcm.Task;                                                                  </span>
<span class="4887698622156748971" onmouseenter="enter('4887698622156748971');" onmouseout="out('4887698622156748971');" style="">  38 import net.vrallev.android.cat.CatLog;                                                                   </span>
<span  style="">  39                                                                                                          </span>
<span  style="">  40                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  41 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  42  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  43  */                                                                                                      </span>
<span class="-6119035943248084841" onmouseenter="enter('-6119035943248084841');" onmouseout="out('-6119035943248084841');" style="">  44 public class JobProxyGcm implements JobProxy {                                                           </span>
<span class="-9070326540423963424" onmouseenter="enter('-9070326540423963424');" onmouseout="out('-9070326540423963424');" style="">  45     private static final CatLog CAT = new JobCat(&quot;JobProxyGcm&quot;);                                         </span>
<span  style="">  46                                                                                                          </span>
<span class="-1367068319987100712" onmouseenter="enter('-1367068319987100712');" onmouseout="out('-1367068319987100712');" style="">  47     /* Requires charging doesn&#x27;t work reliable. Like the documentation says, the job doesn&#x27;t run if      </span>
<span class="8962034626431950077" onmouseenter="enter('8962034626431950077');" onmouseout="out('8962034626431950077');" style="">  48     not plugged in. However, the job never runs until you schedule a new one although the device is      </span>
<span class="3638616766469331364" onmouseenter="enter('3638616766469331364');" onmouseout="out('3638616766469331364');" style="">  49     already plugged in again.                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  50      */                                                                                                  </span>
<span class="6906034020175711500" onmouseenter="enter('6906034020175711500');" onmouseout="out('6906034020175711500');" style="">  51     private final GcmNetworkManager mGcmNetworkManager;                                                  </span>
<span  style="">  52                                                                                                          </span>
<span class="-8282591505358157454" onmouseenter="enter('-8282591505358157454');" onmouseout="out('-8282591505358157454');" style="">  53     public JobProxyGcm(Context context) {                                                                </span>
<span class="-2150563629627861533" onmouseenter="enter('-2150563629627861533');" onmouseout="out('-2150563629627861533');" style="">  54         mGcmNetworkManager = GcmNetworkManager.getInstance(context);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55     }                                                                                                    </span>
<span  style="">  56                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  57     @Override                                                                                            </span>
<span class="1153127991076017133" onmouseenter="enter('1153127991076017133');" onmouseout="out('1153127991076017133');" style="">  58     public void plantOneOff(JobRequest request) {                                                        </span>
<span  style="">  59                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style="">  60 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="1091648150933153784" onmouseenter="enter('1091648150933153784');" onmouseout="out('1091648150933153784');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  61         long startMs = Common.getStartMs(request);                                                       </span>
<span class="-1047499596251801473" onmouseenter="enter('-1047499596251801473');" onmouseout="out('-1047499596251801473');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  62         long endMs = Common.getEndMs(request);                                                           </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  63 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  64 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">  64 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  65 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  66                                                                                                          </span>
<span class="-3955760732866864919" onmouseenter="enter('-3955760732866864919');" onmouseout="out('-3955760732866864919');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  67         long startSeconds = Common.getStartMs(request) / 1_000;                                          </span>
<span class="-6069085433622717228" onmouseenter="enter('-6069085433622717228');" onmouseout="out('-6069085433622717228');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  68         long endSeconds = Math.max(Common.getEndMs(request) / 1_000, startSeconds + 1);                  </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style="">  69 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style="">  70                                                                                                          </span>
<span class="6892887459803872834" onmouseenter="enter('6892887459803872834');" onmouseout="out('6892887459803872834');" style=""><abbr title="  71         OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request).setExecutionWindow(startSeconds, endSeconds).build();">  71         OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request).setExecutionWindow(startSecon🔵</abbr></span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  72         mGcmNetworkManager.schedule(task);                                                               </span>
<span class="8764472676409949433" onmouseenter="enter('8764472676409949433');" onmouseout="out('8764472676409949433');" style=""><abbr title="  73         CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request, JobUtil.timeToString(startMs), JobUtil.timeToString(endMs));">  73         CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request, JobUtil.timeToString(startMs), JobUt🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74     }                                                                                                    </span>
<span  style="">  75                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  76     @Override                                                                                            </span>
<span class="6779937733055571850" onmouseenter="enter('6779937733055571850');" onmouseout="out('6779937733055571850');" style="">  77     public void plantPeriodic(JobRequest request) {                                                      </span>
<span class="8031316561515833751" onmouseenter="enter('8031316561515833751');" onmouseout="out('8031316561515833751');" style=""><abbr title="  78         PeriodicTask task = prepareBuilder(new PeriodicTask.Builder(), request).setPeriod(request.getIntervalMs() / 1000).setFlex(request.getFlexMs() / 1000).build();">  78         PeriodicTask task = prepareBuilder(new PeriodicTask.Builder(), request).setPeriod(request.getInte🔵</abbr></span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  79         mGcmNetworkManager.schedule(task);                                                               </span>
<span class="4814148920702399026" onmouseenter="enter('4814148920702399026');" onmouseout="out('4814148920702399026');" style=""><abbr title="  80         CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s, flex %s&quot;, request, JobUtil.timeToString(request.getIntervalMs()), JobUtil.timeToString(request.getFlexMs()));">  80         CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s, flex %s&quot;, request, JobUtil.timeToString(request.g🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81     }                                                                                                    </span>
<span  style="">  82                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  83     @Override                                                                                            </span>
<span class="467066045427666857" onmouseenter="enter('467066045427666857');" onmouseout="out('467066045427666857');" style="">  84     public void plantPeriodicFlexSupport(JobRequest request) {                                           </span>
<span class="4160015042231681181" onmouseenter="enter('4160015042231681181');" onmouseout="out('4160015042231681181');" style="">  85         CAT.w(&quot;plantPeriodicFlexSupport called although flex is supported&quot;);                             </span>
<span  style="">  86                                                                                                          </span>
<span class="6364453110630299930" onmouseenter="enter('6364453110630299930');" onmouseout="out('6364453110630299930');" style="">  87         long startMs = Common.getStartMsSupportFlex(request);                                            </span>
<span class="-8506679842292509336" onmouseenter="enter('-8506679842292509336');" onmouseout="out('-8506679842292509336');" style="">  88         long endMs = Common.getEndMsSupportFlex(request);                                                </span>
<span  style="">  89                                                                                                          </span>
<span class="-8483436900156296563" onmouseenter="enter('-8483436900156296563');" onmouseout="out('-8483436900156296563');" style="">  90         OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request)                              </span>
<span class="-8138052627515582483" onmouseenter="enter('-8138052627515582483');" onmouseout="out('-8138052627515582483');" style="">  91                 .setExecutionWindow(startMs / 1_000, endMs / 1_000)                                      </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">  92                 .build();                                                                                </span>
<span  style="">  93                                                                                                          </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  94         mGcmNetworkManager.schedule(task);                                                               </span>
<span  style="">  95                                                                                                          </span>
<span class="-140310556109695852" onmouseenter="enter('-140310556109695852');" onmouseout="out('-140310556109695852');" style=""><abbr title="  96         CAT.d(&quot;Scheduled periodic (flex support), %s, start %s, end %s, flex %s&quot;, request, JobUtil.timeToString(startMs),">  96         CAT.d(&quot;Scheduled periodic (flex support), %s, start %s, end %s, flex %s&quot;, request, JobUtil.timeTo🔵</abbr></span>
<span class="-5041897706656715567" onmouseenter="enter('-5041897706656715567');" onmouseout="out('-5041897706656715567');" style="">  97                 JobUtil.timeToString(endMs), JobUtil.timeToString(request.getFlexMs()));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98     }                                                                                                    </span>
<span  style="">  99                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100     @Override                                                                                            </span>
<span class="8351212016063186756" onmouseenter="enter('8351212016063186756');" onmouseout="out('8351212016063186756');" style=""> 101     public void cancel(int jobId) {                                                                      </span>
<span class="975413776133834230" onmouseenter="enter('975413776133834230');" onmouseout="out('975413776133834230');" style=""> 102         mGcmNetworkManager.cancelTask(createTag(jobId), PlatformGcmService.class);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103     }                                                                                                    </span>
<span  style=""> 104                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 105     @Override                                                                                            </span>
<span class="-5725680292100329305" onmouseenter="enter('-5725680292100329305');" onmouseout="out('-5725680292100329305');" style=""> 106     public boolean isPlatformJobScheduled(JobRequest request) {                                          </span>
<span class="-1076637069792494743" onmouseenter="enter('-1076637069792494743');" onmouseout="out('-1076637069792494743');" style=""> 107         // there is no option to check whether a task is scheduled, assume it is                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 108         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109     }                                                                                                    </span>
<span  style=""> 110                                                                                                          </span>
<span class="7534275103015095509" onmouseenter="enter('7534275103015095509');" onmouseout="out('7534275103015095509');" style=""> 111     protected &lt;T extends Task.Builder&gt; T prepareBuilder(T builder, JobRequest request) {                 </span>
<span class="-5165291634367679425" onmouseenter="enter('-5165291634367679425');" onmouseout="out('-5165291634367679425');" style=""><abbr title=" 112         builder.setTag(createTag(request)).setService(PlatformGcmService.class).setUpdateCurrent(true).setRequiredNetwork(convertNetworkType(request.requiredNetworkType())).setPersisted(request.isPersisted()).setRequiresCharging(request.requiresCharging());"> 112         builder.setTag(createTag(request)).setService(PlatformGcmService.class).setUpdateCurrent(true).se🔵</abbr></span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style=""> 113         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114     }                                                                                                    </span>
<span  style=""> 115                                                                                                          </span>
<span class="-8239276103809431358" onmouseenter="enter('-8239276103809431358');" onmouseout="out('-8239276103809431358');" style=""> 116     protected String createTag(JobRequest request) {                                                     </span>
<span class="-6975613568163061219" onmouseenter="enter('-6975613568163061219');" onmouseout="out('-6975613568163061219');" style=""> 117         return createTag(request.getJobId());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118     }                                                                                                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="-4742551516237906259" onmouseenter="enter('-4742551516237906259');" onmouseout="out('-4742551516237906259');" style=""> 120     protected String createTag(int jobId) {                                                              </span>
<span class="-4693579970924184163" onmouseenter="enter('-4693579970924184163');" onmouseout="out('-4693579970924184163');" style=""> 121         return String.valueOf(jobId);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122     }                                                                                                    </span>
<span  style=""> 123                                                                                                          </span>
<span class="2488108357367957903" onmouseenter="enter('2488108357367957903');" onmouseout="out('2488108357367957903');" style=""> 124     protected int convertNetworkType(@NonNull                                                            </span>
<span class="6316029906896247607" onmouseenter="enter('6316029906896247607');" onmouseout="out('6316029906896247607');" style=""> 125     JobRequest.NetworkType networkType) {                                                                </span>
<span class="6345274419817368279" onmouseenter="enter('6345274419817368279');" onmouseout="out('6345274419817368279');" style=""> 126         switch (networkType) {                                                                           </span>
<span class="6005611161780977455" onmouseenter="enter('6005611161780977455');" onmouseout="out('6005611161780977455');" style=""> 127             case ANY :                                                                                   </span>
<span class="2606657379259846207" onmouseenter="enter('2606657379259846207');" onmouseout="out('2606657379259846207');" style=""> 128                 return Task.NETWORK_STATE_ANY;                                                           </span>
<span class="2041259714581710326" onmouseenter="enter('2041259714581710326');" onmouseout="out('2041259714581710326');" style=""> 129             case CONNECTED :                                                                             </span>
<span class="-8000940176381003426" onmouseenter="enter('-8000940176381003426');" onmouseout="out('-8000940176381003426');" style=""> 130                 return Task.NETWORK_STATE_CONNECTED;                                                     </span>
<span class="7337803173700427337" onmouseenter="enter('7337803173700427337');" onmouseout="out('7337803173700427337');" style=""> 131             case UNMETERED :                                                                             </span>
<span class="-2427466575685847390" onmouseenter="enter('-2427466575685847390');" onmouseout="out('-2427466575685847390');" style=""> 132                 return Task.NETWORK_STATE_UNMETERED;                                                     </span>
<span class="-2968219273103522995" onmouseenter="enter('-2968219273103522995');" onmouseout="out('-2968219273103522995');" style=""> 133             case NOT_ROAMING :                                                                           </span>
<span class="1271793242527149926" onmouseenter="enter('1271793242527149926');" onmouseout="out('1271793242527149926');" style=""> 134                 return Task.NETWORK_STATE_UNMETERED;// use as fallback, NOT_ROAMING not supported        </span>
<span  style=""> 135                                                                                                          </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style=""> 136             default :                                                                                    </span>
<span class="3630837704546175647" onmouseenter="enter('3630837704546175647');" onmouseout="out('3630837704546175647');" style=""> 137                 throw new IllegalStateException(&quot;not implemented&quot;);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140 }                                                                                                        </span>
































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2   * Copyright 2007-present Evernote Corporation.                                                                   </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3   * All rights reserved.                                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4   *                                                                                                                </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5   * Redistribution and use in source and binary forms, with or without modification,                               </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6   * are permitted provided that the following conditions are met:                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8   * 1. Redistributions of source code must retain the above copyright notice, this                                 </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9   *    list of conditions and the following disclaimer.                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10   *                                                                                                                </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11   * 2. Redistributions in binary form must reproduce the above copyright notice,                                   </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12   *    this list of conditions and the following disclaimer in the documentation                                   </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13   *    and/or other materials provided with the distribution.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14   *                                                                                                                </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                                </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                                  </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                             </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18   * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                                </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19   * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                                 </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20   * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                                  </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21   * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                                </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                                </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23   * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                                      </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24   * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25   */                                                                                                               </span>
<span class="-5682958189068249715" onmouseenter="enter('-5682958189068249715');" onmouseout="out('-5682958189068249715');" style="">  26  package com.evernote.android.job.gcm;                                                                             </span>
<span  style="">  27                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28  import android.content.Context;                                                                                   </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  29  import android.support.annotation.NonNull;                                                                        </span>
<span  style="">  30                                                                                                                    </span>
<span class="-5245147800812157155" onmouseenter="enter('-5245147800812157155');" onmouseout="out('-5245147800812157155');" style="">  31  import com.evernote.android.job.util.JobCat;                                                                      </span>
<span class="2610792870634489402" onmouseenter="enter('2610792870634489402');" onmouseout="out('2610792870634489402');" style="">  32  import com.google.android.gms.gcm.GcmNetworkManager;                                                              </span>
<span class="-7752222080443615886" onmouseenter="enter('-7752222080443615886');" onmouseout="out('-7752222080443615886');" style="">  33  import com.google.android.gms.gcm.OneoffTask;                                                                     </span>
<span class="-1685873620783984700" onmouseenter="enter('-1685873620783984700');" onmouseout="out('-1685873620783984700');" style="">  34  import com.google.android.gms.gcm.PeriodicTask;                                                                   </span>
<span class="-3437068619897170006" onmouseenter="enter('-3437068619897170006');" onmouseout="out('-3437068619897170006');" style="">  35  import com.google.android.gms.gcm.Task;                                                                           </span>
<span class="-2501401432587011508" onmouseenter="enter('-2501401432587011508');" onmouseout="out('-2501401432587011508');" style="">  36  import com.evernote.android.job.JobProxy;                                                                         </span>
<span class="-7790986164132737290" onmouseenter="enter('-7790986164132737290');" onmouseout="out('-7790986164132737290');" style="">  37  import com.evernote.android.job.JobRequest;                                                                       </span>
<span class="2270421051523495577" onmouseenter="enter('2270421051523495577');" onmouseout="out('2270421051523495577');" style="">  38  import com.evernote.android.job.util.JobUtil;                                                                     </span>
<span  style="">  39                                                                                                                    </span>
<span class="4887698622156748971" onmouseenter="enter('4887698622156748971');" onmouseout="out('4887698622156748971');" style="">  40  import net.vrallev.android.cat.CatLog;                                                                            </span>
<span  style="">  41                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  42  /**                                                                                                               </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  43   * @author rwondratschek                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  44   */                                                                                                               </span>
<span class="-6119035943248084841" onmouseenter="enter('-6119035943248084841');" onmouseout="out('-6119035943248084841');" style="">  45  public class JobProxyGcm implements JobProxy {                                                                    </span>
<span  style="">  46                                                                                                                    </span>
<span class="-9070326540423963424" onmouseenter="enter('-9070326540423963424');" onmouseout="out('-9070326540423963424');" style="">  47      private static final CatLog CAT = new JobCat(&quot;JobProxyGcm&quot;);                                                  </span>
<span  style="">  48                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">  49      /*                                                                                                            </span>
<span class="-1506400248560817253" onmouseenter="enter('-1506400248560817253');" onmouseout="out('-1506400248560817253');" style="">  50       * Requires charging doesn&#x27;t work reliable. Like the documentation says, the job doesn&#x27;t run if               </span>
<span class="5575172958968287294" onmouseenter="enter('5575172958968287294');" onmouseout="out('5575172958968287294');" style="">  51       * not plugged in. However, the job never runs until you schedule a new one although the device is            </span>
<span class="-3604798368442683209" onmouseenter="enter('-3604798368442683209');" onmouseout="out('-3604798368442683209');" style="">  52       * already plugged in again.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  53       */                                                                                                           </span>
<span  style="">  54                                                                                                                    </span>
<span class="6906034020175711500" onmouseenter="enter('6906034020175711500');" onmouseout="out('6906034020175711500');" style="">  55      private final GcmNetworkManager mGcmNetworkManager;                                                           </span>
<span  style="">  56                                                                                                                    </span>
<span class="-8282591505358157454" onmouseenter="enter('-8282591505358157454');" onmouseout="out('-8282591505358157454');" style="">  57      public JobProxyGcm(Context context) {                                                                         </span>
<span class="-2150563629627861533" onmouseenter="enter('-2150563629627861533');" onmouseout="out('-2150563629627861533');" style="">  58          mGcmNetworkManager = GcmNetworkManager.getInstance(context);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59      }                                                                                                             </span>
<span  style="">  60                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  61      @Override                                                                                                     </span>
<span class="1153127991076017133" onmouseenter="enter('1153127991076017133');" onmouseout="out('1153127991076017133');" style="">  62      public void plantOneOff(JobRequest request) {                                                                 </span>



<span class="-78443860292162945" onmouseenter="enter('-78443860292162945');" onmouseout="out('-78443860292162945');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  63 -        OneoffTask task = new OneoffTask.Builder()                                                                </span>
<span class="-2958311635085639514" onmouseenter="enter('-2958311635085639514');" onmouseout="out('-2958311635085639514');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  64 -                .setTag(createTag(request))                                                                       </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  65 -                .setService(PlatformGcmService.class)                                                             </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  66 -                .setUpdateCurrent(true)                                                                           </span>
<span class="9146423022664500063" onmouseenter="enter('9146423022664500063');" onmouseout="out('9146423022664500063');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  67 -                .setExecutionWindow(Common.getStartMs(request) / 1_000, Common.getEndMs(request) / 1_000)         </span>

<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -                .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                            </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  69 -                .setPersisted(request.isPersisted())                                                              </span>
<span class="8424930648150565139" onmouseenter="enter('8424930648150565139');" onmouseout="out('8424930648150565139');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  70 -                .setRequiresCharging(request.requiresCharging())                                                  </span>
<span class="1091648150933153784" onmouseenter="enter('1091648150933153784');" onmouseout="out('1091648150933153784');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +        long startMs = Common.getStartMs(request);                                                                </span>
<span class="-1047499596251801473" onmouseenter="enter('-1047499596251801473');" onmouseout="out('-1047499596251801473');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +        long endMs = Common.getEndMs(request);                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  73 +                                                                                                                  </span>
<span class="-8483436900156296563" onmouseenter="enter('-8483436900156296563');" onmouseout="out('-8483436900156296563');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +        OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request)                                       </span>
<span class="-8138052627515582483" onmouseenter="enter('-8138052627515582483');" onmouseout="out('-8138052627515582483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  75 +                .setExecutionWindow(startMs / 1_000, endMs / 1_000)                                               </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">  76                  .build();                                                                                         </span>
<span  style="">  77                                                                                                                    </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  78          mGcmNetworkManager.schedule(task);                                                                        </span>
<span  style="">  79                                                                                                                    </span>
<span class="-5747044720041629047" onmouseenter="enter('-5747044720041629047');" onmouseout="out('-5747044720041629047');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  80 -        CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request,                                              </span>
<span class="96878668305446933" onmouseenter="enter('96878668305446933');" onmouseout="out('96878668305446933');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  81 -                JobUtil.timeToString(Common.getStartMs(request)), JobUtil.timeToString(Common.getEndMs(request)));</span>
<span class="8764472676409949433" onmouseenter="enter('8764472676409949433');" onmouseout="out('8764472676409949433');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  82 +        CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request, JobUtil.timeToString(startMs), JobUtil.timeToString(endMs));">  82 +        CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request, JobUtil.timeToString(startMs), JobUtil.timeTo🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83      }                                                                                                             </span>
<span  style="">  84                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  85      @Override                                                                                                     </span>
<span class="6779937733055571850" onmouseenter="enter('6779937733055571850');" onmouseout="out('6779937733055571850');" style="">  86      public void plantPeriodic(JobRequest request) {                                                               </span>
<span class="4010147360721818729" onmouseenter="enter('4010147360721818729');" onmouseout="out('4010147360721818729');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  87 -        PeriodicTask task = new PeriodicTask.Builder()                                                            </span>
<span class="-2958311635085639514" onmouseenter="enter('-2958311635085639514');" onmouseout="out('-2958311635085639514');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  88 -                .setTag(createTag(request))                                                                       </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  89 -                .setService(PlatformGcmService.class)                                                             </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  90 -                .setUpdateCurrent(true)                                                                           </span>
<span class="509539607905081639" onmouseenter="enter('509539607905081639');" onmouseout="out('509539607905081639');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  91 +        PeriodicTask task = prepareBuilder(new PeriodicTask.Builder(), request)                                   </span>
<span class="-5592338440157378709" onmouseenter="enter('-5592338440157378709');" onmouseout="out('-5592338440157378709');" style="">  92                  .setPeriod(request.getIntervalMs() / 1_000)                                                       </span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  93 -                .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                            </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  94 -                .setPersisted(request.isPersisted())                                                              </span>
<span class="8424930648150565139" onmouseenter="enter('8424930648150565139');" onmouseout="out('8424930648150565139');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  95 -                .setRequiresCharging(request.requiresCharging())                                                  </span>
<span class="3382904860851274073" onmouseenter="enter('3382904860851274073');" onmouseout="out('3382904860851274073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  96 +                .setFlex(request.getFlexMs() / 1_000)                                                             </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">  97                  .build();                                                                                         </span>
<span  style="">  98                                                                                                                    </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  99          mGcmNetworkManager.schedule(task);                                                                        </span>
<span  style=""> 100                                                                                                                    </span>
<span class="-2623178324693146396" onmouseenter="enter('-2623178324693146396');" onmouseout="out('-2623178324693146396');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 101 -        CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s&quot;, request, JobUtil.timeToString(request.getIntervalMs())); </span>
<span class="-4810033906053247857" onmouseenter="enter('-4810033906053247857');" onmouseout="out('-4810033906053247857');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 102 +        CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s, flex %s&quot;, request, JobUtil.timeToString(request.getIntervalMs()),"> 102 +        CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s, flex %s&quot;, request, JobUtil.timeToString(request.getInterva🔵</abbr></span>
<span class="-7441385486773924310" onmouseenter="enter('-7441385486773924310');" onmouseout="out('-7441385486773924310');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 103 +                JobUtil.timeToString(request.getFlexMs()));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 104 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 105 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 106 +    @Override                                                                                                     </span>
<span class="467066045427666857" onmouseenter="enter('467066045427666857');" onmouseout="out('467066045427666857');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 107 +    public void plantPeriodicFlexSupport(JobRequest request) {                                                    </span>
<span class="4160015042231681181" onmouseenter="enter('4160015042231681181');" onmouseout="out('4160015042231681181');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 108 +        CAT.w(&quot;plantPeriodicFlexSupport called although flex is supported&quot;);                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 109 +                                                                                                                  </span>
<span class="6364453110630299930" onmouseenter="enter('6364453110630299930');" onmouseout="out('6364453110630299930');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 110 +        long startMs = Common.getStartMsSupportFlex(request);                                                     </span>
<span class="-8506679842292509336" onmouseenter="enter('-8506679842292509336');" onmouseout="out('-8506679842292509336');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +        long endMs = Common.getEndMsSupportFlex(request);                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 112 +                                                                                                                  </span>
<span class="-8483436900156296563" onmouseenter="enter('-8483436900156296563');" onmouseout="out('-8483436900156296563');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 113 +        OneoffTask task = prepareBuilder(new OneoffTask.Builder(), request)                                       </span>
<span class="-8138052627515582483" onmouseenter="enter('-8138052627515582483');" onmouseout="out('-8138052627515582483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 114 +                .setExecutionWindow(startMs / 1_000, endMs / 1_000)                                               </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 115 +                .build();                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +                                                                                                                  </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +        mGcmNetworkManager.schedule(task);                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +                                                                                                                  </span>
<span class="-140310556109695852" onmouseenter="enter('-140310556109695852');" onmouseout="out('-140310556109695852');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 119 +        CAT.d(&quot;Scheduled periodic (flex support), %s, start %s, end %s, flex %s&quot;, request, JobUtil.timeToString(startMs),"> 119 +        CAT.d(&quot;Scheduled periodic (flex support), %s, start %s, end %s, flex %s&quot;, request, JobUtil.timeToString(st🔵</abbr></span>
<span class="-5041897706656715567" onmouseenter="enter('-5041897706656715567');" onmouseout="out('-5041897706656715567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +                JobUtil.timeToString(endMs), JobUtil.timeToString(request.getFlexMs()));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121      }                                                                                                             </span>
<span  style=""> 122                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 123      @Override                                                                                                     </span>
<span class="8351212016063186756" onmouseenter="enter('8351212016063186756');" onmouseout="out('8351212016063186756');" style=""> 124      public void cancel(int jobId) {                                                                               </span>
<span class="975413776133834230" onmouseenter="enter('975413776133834230');" onmouseout="out('975413776133834230');" style=""> 125          mGcmNetworkManager.cancelTask(createTag(jobId), PlatformGcmService.class);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126      }                                                                                                             </span>
<span  style=""> 127                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 128      @Override                                                                                                     </span>
<span class="-5725680292100329305" onmouseenter="enter('-5725680292100329305');" onmouseout="out('-5725680292100329305');" style=""> 129      public boolean isPlatformJobScheduled(JobRequest request) {                                                   </span>
<span class="-1076637069792494743" onmouseenter="enter('-1076637069792494743');" onmouseout="out('-1076637069792494743');" style=""> 130          // there is no option to check whether a task is scheduled, assume it is                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 131          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +                                                                                                                  </span>
<span class="7534275103015095509" onmouseenter="enter('7534275103015095509');" onmouseout="out('7534275103015095509');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +    protected &lt;T extends Task.Builder&gt; T prepareBuilder(T builder, JobRequest request) {                          </span>
<span class="232340519661816193" onmouseenter="enter('232340519661816193');" onmouseout="out('232340519661816193');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +        builder.setTag(createTag(request))                                                                        </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +                .setService(PlatformGcmService.class)                                                             </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 137 +                .setUpdateCurrent(true)                                                                           </span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 138 +                .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                            </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 139 +                .setPersisted(request.isPersisted())                                                              </span>
<span class="-996785392611189841" onmouseenter="enter('-996785392611189841');" onmouseout="out('-996785392611189841');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 140 +                .setRequiresCharging(request.requiresCharging());                                                 </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 141 +        return builder;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142      }                                                                                                             </span>
<span  style=""> 143                                                                                                                    </span>
<span class="-8239276103809431358" onmouseenter="enter('-8239276103809431358');" onmouseout="out('-8239276103809431358');" style=""> 144      protected String createTag(JobRequest request) {                                                              </span>
<span class="-6975613568163061219" onmouseenter="enter('-6975613568163061219');" onmouseout="out('-6975613568163061219');" style=""> 145          return createTag(request.getJobId());                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146      }                                                                                                             </span>
<span  style=""> 147                                                                                                                    </span>
<span class="-4742551516237906259" onmouseenter="enter('-4742551516237906259');" onmouseout="out('-4742551516237906259');" style=""> 148      protected String createTag(int jobId) {                                                                       </span>
<span class="-4693579970924184163" onmouseenter="enter('-4693579970924184163');" onmouseout="out('-4693579970924184163');" style=""> 149          return String.valueOf(jobId);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150      }                                                                                                             </span>
<span  style=""> 151                                                                                                                    </span>
<span class="-7049120374837409354" onmouseenter="enter('-7049120374837409354');" onmouseout="out('-7049120374837409354');" style=""> 152      protected int convertNetworkType(@NonNull JobRequest.NetworkType networkType) {                               </span>
<span class="6345274419817368279" onmouseenter="enter('6345274419817368279');" onmouseout="out('6345274419817368279');" style=""> 153          switch (networkType) {                                                                                    </span>
<span class="5441294856378657565" onmouseenter="enter('5441294856378657565');" onmouseout="out('5441294856378657565');" style=""> 154              case ANY:                                                                                             </span>
<span class="2606657379259846207" onmouseenter="enter('2606657379259846207');" onmouseout="out('2606657379259846207');" style=""> 155                  return Task.NETWORK_STATE_ANY;                                                                    </span>
<span class="3743721618231795347" onmouseenter="enter('3743721618231795347');" onmouseout="out('3743721618231795347');" style=""> 156              case CONNECTED:                                                                                       </span>
<span class="-8000940176381003426" onmouseenter="enter('-8000940176381003426');" onmouseout="out('-8000940176381003426');" style=""> 157                  return Task.NETWORK_STATE_CONNECTED;                                                              </span>
<span class="7421479660330843233" onmouseenter="enter('7421479660330843233');" onmouseout="out('7421479660330843233');" style=""> 158              case UNMETERED:                                                                                       </span>
<span class="-2427466575685847390" onmouseenter="enter('-2427466575685847390');" onmouseout="out('-2427466575685847390');" style=""> 159                  return Task.NETWORK_STATE_UNMETERED;                                                              </span>
<span class="6783567091425289266" onmouseenter="enter('6783567091425289266');" onmouseout="out('6783567091425289266');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +            case NOT_ROAMING:                                                                                     </span>
<span class="4460432967058427781" onmouseenter="enter('4460432967058427781');" onmouseout="out('4460432967058427781');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 161 +                return Task.NETWORK_STATE_UNMETERED; // use as fallback, NOT_ROAMING not supported                </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 162              default:                                                                                              </span>
<span class="3630837704546175647" onmouseenter="enter('3630837704546175647');" onmouseout="out('3630837704546175647');" style=""> 163                  throw new IllegalStateException(&quot;not implemented&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2   * Copyright 2007-present Evernote Corporation.                                                                   </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3   * All rights reserved.                                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4   *                                                                                                                </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5   * Redistribution and use in source and binary forms, with or without modification,                               </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6   * are permitted provided that the following conditions are met:                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8   * 1. Redistributions of source code must retain the above copyright notice, this                                 </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9   *    list of conditions and the following disclaimer.                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10   *                                                                                                                </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11   * 2. Redistributions in binary form must reproduce the above copyright notice,                                   </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12   *    this list of conditions and the following disclaimer in the documentation                                   </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13   *    and/or other materials provided with the distribution.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14   *                                                                                                                </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                                </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                                  </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                             </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18   * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                                </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19   * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                                 </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20   * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                                  </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21   * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                                </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                                </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23   * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                                      </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24   * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25   */                                                                                                               </span>
<span class="-5682958189068249715" onmouseenter="enter('-5682958189068249715');" onmouseout="out('-5682958189068249715');" style="">  26  package com.evernote.android.job.gcm;                                                                             </span>
<span  style="">  27                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28  import android.content.Context;                                                                                   </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  29  import android.support.annotation.NonNull;                                                                        </span>
<span  style="">  30                                                                                                                    </span>
<span class="-5245147800812157155" onmouseenter="enter('-5245147800812157155');" onmouseout="out('-5245147800812157155');" style="">  31  import com.evernote.android.job.util.JobCat;                                                                      </span>
<span class="2610792870634489402" onmouseenter="enter('2610792870634489402');" onmouseout="out('2610792870634489402');" style="">  32  import com.google.android.gms.gcm.GcmNetworkManager;                                                              </span>
<span class="-7752222080443615886" onmouseenter="enter('-7752222080443615886');" onmouseout="out('-7752222080443615886');" style="">  33  import com.google.android.gms.gcm.OneoffTask;                                                                     </span>
<span class="-1685873620783984700" onmouseenter="enter('-1685873620783984700');" onmouseout="out('-1685873620783984700');" style="">  34  import com.google.android.gms.gcm.PeriodicTask;                                                                   </span>
<span class="-3437068619897170006" onmouseenter="enter('-3437068619897170006');" onmouseout="out('-3437068619897170006');" style="">  35  import com.google.android.gms.gcm.Task;                                                                           </span>
<span class="-2501401432587011508" onmouseenter="enter('-2501401432587011508');" onmouseout="out('-2501401432587011508');" style="">  36  import com.evernote.android.job.JobProxy;                                                                         </span>
<span class="-7790986164132737290" onmouseenter="enter('-7790986164132737290');" onmouseout="out('-7790986164132737290');" style="">  37  import com.evernote.android.job.JobRequest;                                                                       </span>
<span class="2270421051523495577" onmouseenter="enter('2270421051523495577');" onmouseout="out('2270421051523495577');" style="">  38  import com.evernote.android.job.util.JobUtil;                                                                     </span>
<span  style="">  39                                                                                                                    </span>
<span class="4887698622156748971" onmouseenter="enter('4887698622156748971');" onmouseout="out('4887698622156748971');" style="">  40  import net.vrallev.android.cat.CatLog;                                                                            </span>
<span  style="">  41                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  42  /**                                                                                                               </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  43   * @author rwondratschek                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  44   */                                                                                                               </span>
<span class="-6119035943248084841" onmouseenter="enter('-6119035943248084841');" onmouseout="out('-6119035943248084841');" style="">  45  public class JobProxyGcm implements JobProxy {                                                                    </span>
<span  style="">  46                                                                                                                    </span>
<span class="-9070326540423963424" onmouseenter="enter('-9070326540423963424');" onmouseout="out('-9070326540423963424');" style="">  47      private static final CatLog CAT = new JobCat(&quot;JobProxyGcm&quot;);                                                  </span>
<span  style="">  48                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">  49      /*                                                                                                            </span>
<span class="-1506400248560817253" onmouseenter="enter('-1506400248560817253');" onmouseout="out('-1506400248560817253');" style="">  50       * Requires charging doesn&#x27;t work reliable. Like the documentation says, the job doesn&#x27;t run if               </span>
<span class="5575172958968287294" onmouseenter="enter('5575172958968287294');" onmouseout="out('5575172958968287294');" style="">  51       * not plugged in. However, the job never runs until you schedule a new one although the device is            </span>
<span class="-3604798368442683209" onmouseenter="enter('-3604798368442683209');" onmouseout="out('-3604798368442683209');" style="">  52       * already plugged in again.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  53       */                                                                                                           </span>
<span  style="">  54                                                                                                                    </span>
<span class="6906034020175711500" onmouseenter="enter('6906034020175711500');" onmouseout="out('6906034020175711500');" style="">  55      private final GcmNetworkManager mGcmNetworkManager;                                                           </span>
<span  style="">  56                                                                                                                    </span>
<span class="-8282591505358157454" onmouseenter="enter('-8282591505358157454');" onmouseout="out('-8282591505358157454');" style="">  57      public JobProxyGcm(Context context) {                                                                         </span>
<span class="-2150563629627861533" onmouseenter="enter('-2150563629627861533');" onmouseout="out('-2150563629627861533');" style="">  58          mGcmNetworkManager = GcmNetworkManager.getInstance(context);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59      }                                                                                                             </span>
<span  style="">  60                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  61      @Override                                                                                                     </span>
<span class="1153127991076017133" onmouseenter="enter('1153127991076017133');" onmouseout="out('1153127991076017133');" style="">  62      public void plantOneOff(JobRequest request) {                                                                 </span>
<span class="-3955760732866864919" onmouseenter="enter('-3955760732866864919');" onmouseout="out('-3955760732866864919');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +        long startSeconds = Common.getStartMs(request) / 1_000;                                                   </span>
<span class="-6069085433622717228" onmouseenter="enter('-6069085433622717228');" onmouseout="out('-6069085433622717228');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +        long endSeconds = Math.max(Common.getEndMs(request) / 1_000, startSeconds + 1);                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +                                                                                                                  </span>
<span class="-78443860292162945" onmouseenter="enter('-78443860292162945');" onmouseout="out('-78443860292162945');" style="">  66          OneoffTask task = new OneoffTask.Builder()                                                                </span>
<span class="-2958311635085639514" onmouseenter="enter('-2958311635085639514');" onmouseout="out('-2958311635085639514');" style="">  67                  .setTag(createTag(request))                                                                       </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="">  68                  .setService(PlatformGcmService.class)                                                             </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="">  69                  .setUpdateCurrent(true)                                                                           </span>
<span class="9146423022664500063" onmouseenter="enter('9146423022664500063');" onmouseout="out('9146423022664500063');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  70 -                .setExecutionWindow(Common.getStartMs(request) / 1_000, Common.getEndMs(request) / 1_000)         </span>
<span class="-1161919699575439104" onmouseenter="enter('-1161919699575439104');" onmouseout="out('-1161919699575439104');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +                .setExecutionWindow(startSeconds, endSeconds)                                                     </span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="">  72                  .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                            </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="">  73                  .setPersisted(request.isPersisted())                                                              </span>
<span class="8424930648150565139" onmouseenter="enter('8424930648150565139');" onmouseout="out('8424930648150565139');" style="">  74                  .setRequiresCharging(request.requiresCharging())                                                  </span>





<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">  75                  .build();                                                                                         </span>
<span  style="">  76                                                                                                                    </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  77          mGcmNetworkManager.schedule(task);                                                                        </span>
<span  style="">  78                                                                                                                    </span>
<span class="-5747044720041629047" onmouseenter="enter('-5747044720041629047');" onmouseout="out('-5747044720041629047');" style="">  79          CAT.d(&quot;Scheduled OneoffTask, %s, start %s, end %s&quot;, request,                                              </span>
<span class="96878668305446933" onmouseenter="enter('96878668305446933');" onmouseout="out('96878668305446933');" style="">  80                  JobUtil.timeToString(Common.getStartMs(request)), JobUtil.timeToString(Common.getEndMs(request)));</span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81      }                                                                                                             </span>
<span  style="">  82                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  83      @Override                                                                                                     </span>
<span class="6779937733055571850" onmouseenter="enter('6779937733055571850');" onmouseout="out('6779937733055571850');" style="">  84      public void plantPeriodic(JobRequest request) {                                                               </span>
<span class="4010147360721818729" onmouseenter="enter('4010147360721818729');" onmouseout="out('4010147360721818729');" style="">  85          PeriodicTask task = new PeriodicTask.Builder()                                                            </span>
<span class="-2958311635085639514" onmouseenter="enter('-2958311635085639514');" onmouseout="out('-2958311635085639514');" style="">  86                  .setTag(createTag(request))                                                                       </span>
<span class="2666388844893997706" onmouseenter="enter('2666388844893997706');" onmouseout="out('2666388844893997706');" style="">  87                  .setService(PlatformGcmService.class)                                                             </span>
<span class="831818372070292129" onmouseenter="enter('831818372070292129');" onmouseout="out('831818372070292129');" style="">  88                  .setUpdateCurrent(true)                                                                           </span>

<span class="-5592338440157378709" onmouseenter="enter('-5592338440157378709');" onmouseout="out('-5592338440157378709');" style="">  89                  .setPeriod(request.getIntervalMs() / 1_000)                                                       </span>
<span class="6565701217703495001" onmouseenter="enter('6565701217703495001');" onmouseout="out('6565701217703495001');" style="">  90                  .setRequiredNetwork(convertNetworkType(request.requiredNetworkType()))                            </span>
<span class="5231970087584727532" onmouseenter="enter('5231970087584727532');" onmouseout="out('5231970087584727532');" style="">  91                  .setPersisted(request.isPersisted())                                                              </span>
<span class="8424930648150565139" onmouseenter="enter('8424930648150565139');" onmouseout="out('8424930648150565139');" style="">  92                  .setRequiresCharging(request.requiresCharging())                                                  </span>

<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">  93                  .build();                                                                                         </span>
<span  style="">  94                                                                                                                    </span>
<span class="-8447063735180844540" onmouseenter="enter('-8447063735180844540');" onmouseout="out('-8447063735180844540');" style="">  95          mGcmNetworkManager.schedule(task);                                                                        </span>
<span  style="">  96                                                                                                                    </span>
<span class="-2623178324693146396" onmouseenter="enter('-2623178324693146396');" onmouseout="out('-2623178324693146396');" style="">  97          CAT.d(&quot;Scheduled PeriodicTask, %s, interval %s&quot;, request, JobUtil.timeToString(request.getIntervalMs())); </span>



















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98      }                                                                                                             </span>
<span  style="">  99                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100      @Override                                                                                                     </span>
<span class="8351212016063186756" onmouseenter="enter('8351212016063186756');" onmouseout="out('8351212016063186756');" style=""> 101      public void cancel(int jobId) {                                                                               </span>
<span class="975413776133834230" onmouseenter="enter('975413776133834230');" onmouseout="out('975413776133834230');" style=""> 102          mGcmNetworkManager.cancelTask(createTag(jobId), PlatformGcmService.class);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103      }                                                                                                             </span>
<span  style=""> 104                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 105      @Override                                                                                                     </span>
<span class="-5725680292100329305" onmouseenter="enter('-5725680292100329305');" onmouseout="out('-5725680292100329305');" style=""> 106      public boolean isPlatformJobScheduled(JobRequest request) {                                                   </span>
<span class="-1076637069792494743" onmouseenter="enter('-1076637069792494743');" onmouseout="out('-1076637069792494743');" style=""> 107          // there is no option to check whether a task is scheduled, assume it is                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 108          return true;                                                                                              </span>










<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109      }                                                                                                             </span>
<span  style=""> 110                                                                                                                    </span>
<span class="-8239276103809431358" onmouseenter="enter('-8239276103809431358');" onmouseout="out('-8239276103809431358');" style=""> 111      protected String createTag(JobRequest request) {                                                              </span>
<span class="-6975613568163061219" onmouseenter="enter('-6975613568163061219');" onmouseout="out('-6975613568163061219');" style=""> 112          return createTag(request.getJobId());                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113      }                                                                                                             </span>
<span  style=""> 114                                                                                                                    </span>
<span class="-4742551516237906259" onmouseenter="enter('-4742551516237906259');" onmouseout="out('-4742551516237906259');" style=""> 115      protected String createTag(int jobId) {                                                                       </span>
<span class="-4693579970924184163" onmouseenter="enter('-4693579970924184163');" onmouseout="out('-4693579970924184163');" style=""> 116          return String.valueOf(jobId);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117      }                                                                                                             </span>
<span  style=""> 118                                                                                                                    </span>
<span class="-7049120374837409354" onmouseenter="enter('-7049120374837409354');" onmouseout="out('-7049120374837409354');" style=""> 119      protected int convertNetworkType(@NonNull JobRequest.NetworkType networkType) {                               </span>
<span class="6345274419817368279" onmouseenter="enter('6345274419817368279');" onmouseout="out('6345274419817368279');" style=""> 120          switch (networkType) {                                                                                    </span>
<span class="5441294856378657565" onmouseenter="enter('5441294856378657565');" onmouseout="out('5441294856378657565');" style=""> 121              case ANY:                                                                                             </span>
<span class="2606657379259846207" onmouseenter="enter('2606657379259846207');" onmouseout="out('2606657379259846207');" style=""> 122                  return Task.NETWORK_STATE_ANY;                                                                    </span>
<span class="3743721618231795347" onmouseenter="enter('3743721618231795347');" onmouseout="out('3743721618231795347');" style=""> 123              case CONNECTED:                                                                                       </span>
<span class="-8000940176381003426" onmouseenter="enter('-8000940176381003426');" onmouseout="out('-8000940176381003426');" style=""> 124                  return Task.NETWORK_STATE_CONNECTED;                                                              </span>
<span class="7421479660330843233" onmouseenter="enter('7421479660330843233');" onmouseout="out('7421479660330843233');" style=""> 125              case UNMETERED:                                                                                       </span>
<span class="-2427466575685847390" onmouseenter="enter('-2427466575685847390');" onmouseout="out('-2427466575685847390');" style=""> 126                  return Task.NETWORK_STATE_UNMETERED;                                                              </span>


<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 127              default:                                                                                              </span>
<span class="3630837704546175647" onmouseenter="enter('3630837704546175647');" onmouseout="out('3630837704546175647');" style=""> 128                  throw new IllegalStateException(&quot;not implemented&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            