<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>218</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    218
                    <a href="217.html">prev</a>
                    <a href="219.html">next</a>
                    <a href="218_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_d0d1497e996c0cad318f85c45cd5046de4e2c6f9_Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;d0d1497e996c0cad318f85c45cd5046de4e2c6f9:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;d0d1497e996c0cad318f85c45cd5046de4e2c6f9^1:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;d0d1497e996c0cad318f85c45cd5046de4e2c6f9^2:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;11c2f60a601c737a58eee19c40a47e5c73be2873:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1440843073414233844" onmouseenter="enter('-1440843073414233844');" onmouseout="out('-1440843073414233844');" style="">   4 import android.app.Dialog;                                                                               </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   5 import android.app.Fragment;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   6 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   7 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   8 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   9 import android.content.Intent;                                                                           </span>
<span class="-840652079464298178" onmouseenter="enter('-840652079464298178');" onmouseout="out('-840652079464298178');" style="">  10 import android.content.res.TypedArray;                                                                   </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  11 import android.database.Cursor;                                                                          </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  12 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  13 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  14 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  15 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  16 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  17 import android.text.Editable;                                                                            </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  18 import android.text.SpannableString;                                                                     </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  19 import android.text.Spanned;                                                                             </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  20 import android.text.TextUtils;                                                                           </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  21 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  22 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  23 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  24 import android.text.util.Linkify;                                                                        </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  25 import android.view.ActionMode;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  26 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  27 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  28 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  29 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  30 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  31 import android.view.ViewGroup;                                                                           </span>
<span class="8570405338525080773" onmouseenter="enter('8570405338525080773');" onmouseout="out('8570405338525080773');" style="">  32 import android.view.Window;                                                                              </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="">  33 import android.view.WindowManager;                                                                       </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  34 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1133222559545955472" onmouseenter="enter('1133222559545955472');" onmouseout="out('1133222559545955472');" style="">  35 import android.widget.Button;                                                                            </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37 import android.widget.LinearLayout;                                                                      </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  38 import android.widget.MultiAutoCompleteTextView.Tokenizer;                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  39 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  40 import android.widget.Toast;                                                                             </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  41 import android.widget.ToggleButton;                                                                      </span>
<span  style="">  42                                                                                                          </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  43 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  44 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  45 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="7629762131910067592" onmouseenter="enter('7629762131910067592');" onmouseout="out('7629762131910067592');" style="">  46 import com.automattic.simplenote.utils.SimplenoteEditText;                                               </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  47 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  48 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  49 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  50 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="">  51 import com.automattic.simplenote.utils.Typefaces;                                                        </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  52 import com.google.analytics.tracking.android.EasyTracker;                                                </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  53 import com.google.analytics.tracking.android.Tracker;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  54 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  55 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  56 import com.simperium.client.Query;                                                                       </span>
<span  style="">  57                                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  58 import java.util.Calendar;                                                                               </span>
<span  style="">  59                                                                                                          </span>
<span class="7280890691619564888" onmouseenter="enter('7280890691619564888');" onmouseout="out('7280890691619564888');" style=""><abbr title="  60 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListener, View.OnFocusChangeListener, SimplenoteEditText.OnSelectionChangedListener {">  60 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddeðŸ”µ</abbr></span>
<span  style="">  61                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  62     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  63     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  64     static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  65     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style="">  66                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  67     private Note mNote;                                                                                  </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  68     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style="">  69                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  70     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  71     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  72     private ToggleButton mPinButton;                                                                     </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  73     private Handler mAutoSaveHandler;                                                                    </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  74     private LinearLayout mPlaceholderView;                                                               </span>
<span class="6490526833736257609" onmouseenter="enter('6490526833736257609');" onmouseout="out('6490526833736257609');" style="">  75     private Dialog mPublishDialog;                                                                       </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  76     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="275494556225166536" onmouseenter="enter('275494556225166536');" onmouseout="out('275494556225166536');" style="">  77     private boolean mIsNewNote, mIsLoadingNote;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style="">  78     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style="">  79     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style="">  80     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style="">  81     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style="">  82     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-2809999858206249165" onmouseenter="enter('-2809999858206249165');" onmouseout="out('-2809999858206249165');" style="">  83     private int mEmailIconResId, mWebIconResId, mMapIconResId, mCallIconResId;                           </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style="">  84     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style="">  85     private String mMatchOffsets;                                                                        </span>
<span  style="">  86                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  87     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  88      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  89      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  90      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  91     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92     }                                                                                                    </span>
<span  style="">  93                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  94     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  95     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  96         super.onCreate(savedInstanceState);                                                              </span>
<span  style="">  97                                                                                                          </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">  98         if (getActivity() != null) {                                                                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  99             Simplenote currentApp = (Simplenote) getActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 100             mNotesBucket = currentApp.getNotesBucket();                                                  </span>
<span  style=""> 101                                                                                                          </span>
<span class="6390134422937918444" onmouseenter="enter('6390134422937918444');" onmouseout="out('6390134422937918444');" style=""><abbr title=" 102             TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionBarIconWeb, R.attr.actionBarIconMap, R.attr.actionBarIconCall});"> 102             TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.atðŸ”µ</abbr></span>
<span class="-368005650607593546" onmouseenter="enter('-368005650607593546');" onmouseout="out('-368005650607593546');" style=""> 103             if (a != null) {                                                                             </span>
<span class="156477903530707073" onmouseenter="enter('156477903530707073');" onmouseout="out('156477903530707073');" style=""> 104                 mEmailIconResId = a.getResourceId(0, 0);                                                 </span>
<span class="2237960387607406884" onmouseenter="enter('2237960387607406884');" onmouseout="out('2237960387607406884');" style=""> 105                 mWebIconResId = a.getResourceId(1, 0);                                                   </span>
<span class="-2587404817224189880" onmouseenter="enter('-2587404817224189880');" onmouseout="out('-2587404817224189880');" style=""> 106                 mMapIconResId = a.getResourceId(2, 0);                                                   </span>
<span class="7397862531502718567" onmouseenter="enter('7397862531502718567');" onmouseout="out('7397862531502718567');" style=""> 107                 mCallIconResId = a.getResourceId(3, 0);                                                  </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style=""> 108                 a.recycle();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110         }                                                                                                </span>
<span  style=""> 111                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 112         mAutoSaveHandler = new Handler();                                                                </span>
<span  style=""> 113                                                                                                          </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 114         mMatchHighlighter = new TextHighlighter(getActivity(),                                           </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 115                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 115                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="3992270686517948303" onmouseenter="enter('3992270686517948303');" onmouseout="out('3992270686517948303');" style=""> 116         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0){                              </span>
<span  style=""> 117                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 118             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 119             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 120                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 121                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 122                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123             }                                                                                            </span>
<span  style=""> 124                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 125             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 126             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 127                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 128                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129             }                                                                                            </span>
<span  style=""> 130                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 132             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 133                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134             }                                                                                            </span>
<span  style=""> 135                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 136             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 137             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 138                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 139                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 140                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 141                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 142                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 143                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 144                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 145                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 146                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 147                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 147                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.forðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 148                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 150         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151     }                                                                                                    </span>
<span  style=""> 152                                                                                                          </span>
<span  style=""> 153                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 155     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 156         setHasOptionsMenu(true);                                                                         </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 157         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 158         mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));              </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 159         if (getActivity() != null) {                                                                     </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style=""><abbr title=" 160             mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));"> 160             mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161         }                                                                                                </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 162         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 163         mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                 </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 164         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style=""> 165         mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));</span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 166         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span  style=""> 167                                                                                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 168         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style=""> 169                                                                                                          </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style=""> 170         mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                               </span>
<span class="-6233419192957625397" onmouseenter="enter('-6233419192957625397');" onmouseout="out('-6233419192957625397');" style=""> 171         mPinButton.setOnClickListener(new View.OnClickListener() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 172             @Override                                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 173             public void onClick(View v) {                                                                </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style=""> 174                 if (mPinButton.isChecked()) {                                                            </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style=""> 175                     // Friendly message to the user as to what this button does.                         </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style=""> 176                     Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 179         });                                                                                              </span>
<span  style=""> 180                                                                                                          </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 181         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="8670904764944796201" onmouseenter="enter('8670904764944796201');" onmouseout="out('8670904764944796201');" style=""><abbr title=" 182         if ((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)"> 182         if ((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) getActivity()).isLargeScreenLandðŸ”µ</abbr></span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 183             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span  style=""> 184                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 185         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style=""> 186                                                                                                          </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 187         // Load note if we were passed a note Id                                                         </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 188         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 189         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 190             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 191             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 192                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193             }                                                                                            </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 194             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 195             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196         }                                                                                                </span>
<span  style=""> 197                                                                                                          </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 198 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199 	}                                                                                                       </span>
<span  style=""> 200                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 201     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 202     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 203         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 204         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 205         mNotesBucket.addListener(this);                                                                  </span>
<span  style=""> 206                                                                                                          </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 207         mTagView.setOnTagAddedListener(this);                                                            </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 208 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 209                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 210         Bundle arguments = getArguments();                                                               </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 211                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 212         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 213             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="526740986280926199" onmouseenter="enter('526740986280926199');" onmouseout="out('526740986280926199');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 214             if (arguments.containsKey(ARG_MATCH_OFFSETS))                                                </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 215                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 216             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 217             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 218         }                                                                                                </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 219 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 220                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 221             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 222             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 223         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 224                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 225     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 226                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 227     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 228     public void onPause() {                                                                              </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 229         mNotesBucket.removeListener(this);                                                               </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 230 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 231 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232     }                                                                                                    </span>
<span  style=""> 233                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 234     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 235     public void onPause() {                                                                              </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 236         mNotesBucket.removeListener(this);                                                               </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 237         // Hide soft keyboard if it is showing...                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 238         if (getActivity() != null) {                                                                     </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 239             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 239             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 240             if (inputMethodManager != null) {                                                            </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 241                 inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243         }                                                                                                </span>
<span  style=""> 244                                                                                                          </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 245         // Delete the note if it is new and has empty fields                                             </span>
<span class="-2219905285758853631" onmouseenter="enter('-2219905285758853631');" onmouseout="out('-2219905285758853631');" style=""> 246         if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty()) {                                              </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 247             mNote.delete();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 248         } else {                                                                                         </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 249             saveNote();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250         }                                                                                                </span>
<span  style=""> 251                                                                                                          </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 252         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 253                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 254         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 255             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span  style=""> 257                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 258         mHighlighter.stop();                                                                             </span>
<span  style=""> 259                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 260         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261     }                                                                                                    </span>
<span  style=""> 262                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263     @Override                                                                                            </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style=""> 264     public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                  </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 265         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 266                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 267         if (mNote != null) {                                                                             </span>
<span class="5214019728761898324" onmouseenter="enter('5214019728761898324');" onmouseout="out('5214019728761898324');" style=""> 268             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_published_note);               </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 269             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 270                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 271             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 272             if (mNote.isDeleted())                                                                       </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 273                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 274             else                                                                                         </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 275                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276         }                                                                                                </span>
<span  style=""> 277                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 278         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279     }                                                                                                    </span>
<span  style=""> 280                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 281     @Override                                                                                            </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style=""> 282     public boolean onOptionsItemSelected(MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 283         switch (item.getItemId()) {                                                                      </span>
<span class="2851142166727911529" onmouseenter="enter('2851142166727911529');" onmouseout="out('2851142166727911529');" style=""> 284             case R.id.menu_view_published_note:                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 285                 if (mNote != null) {                                                                     </span>
<span class="2186681076883129445" onmouseenter="enter('2186681076883129445');" onmouseout="out('2186681076883129445');" style=""> 286                     showNotePublishDialog();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 288                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 289             case R.id.menu_share:                                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 290                 if (mNote != null) {                                                                     </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 291                     Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                 </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 292                     shareIntent.setType(&quot;text/plain&quot;);                                                   </span>
<span class="2565640458837084796" onmouseenter="enter('2565640458837084796');" onmouseout="out('2565640458837084796');" style=""> 293                     shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mNote.getContent());         </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 294                     startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 294                     startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.shaðŸ”µ</abbr></span>
<span class="-291628727976592463" onmouseenter="enter('-291628727976592463');" onmouseout="out('-291628727976592463');" style=""><abbr title=" 295                     EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;shared_note&quot;, &quot;action_bar_share_button&quot;, null);"> 295                     EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;shared_note&quot;, &quot;action_bar_share_button&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 297                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 298             case R.id.menu_delete:                                                                       </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 299                 if (mNote != null) {                                                                     </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style=""> 300                     mNote.setDeleted(!mNote.isDeleted());                                                </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 301                     mNote.setModificationDate(Calendar.getInstance());                                   </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 302                     mNote.save();                                                                        </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style=""> 303                     Intent resultIntent = new Intent();                                                  </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 304                     if (mNote.isDeleted())                                                               </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style=""> 305                         resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());      </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style=""> 306                     getActivity().setResult(Activity.RESULT_OK, resultIntent);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307                 }                                                                                        </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 308                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 309                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 310             case android.R.id.home:                                                                      </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 311                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 312                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 313             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 314                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316     }                                                                                                    </span>
<span  style=""> 317                                                                                                          </span>
<span class="-6798341237622548838" onmouseenter="enter('-6798341237622548838');" onmouseout="out('-6798341237622548838');" style=""> 318     private void showNotePublishDialog() {                                                               </span>
<span class="-1293040003772175228" onmouseenter="enter('-1293040003772175228');" onmouseout="out('-1293040003772175228');" style=""> 319         if (mPublishDialog == null) {                                                                    </span>
<span class="-6935058658438695871" onmouseenter="enter('-6935058658438695871');" onmouseout="out('-6935058658438695871');" style=""> 320             mPublishDialog = new Dialog(getActivity(), R.style.SimplenotePublishDialog);                 </span>
<span class="84367104298890978" onmouseenter="enter('84367104298890978');" onmouseout="out('84367104298890978');" style=""> 321             mPublishDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);                                </span>
<span class="-8693338580555501068" onmouseenter="enter('-8693338580555501068');" onmouseout="out('-8693338580555501068');" style=""> 322             mPublishDialog.setContentView(R.layout.publish_settings);                                    </span>
<span  style=""> 323                                                                                                          </span>
<span class="-8841152936066762125" onmouseenter="enter('-8841152936066762125');" onmouseout="out('-8841152936066762125');" style=""><abbr title=" 324             mPublishDialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);"> 324             mPublishDialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LðŸ”µ</abbr></span>
<span  style=""> 325                                                                                                          </span>
<span class="2615697251940277419" onmouseenter="enter('2615697251940277419');" onmouseout="out('2615697251940277419');" style=""> 326             Button publishButton = (Button)mPublishDialog.findViewById(R.id.publish_note_button);        </span>
<span class="8546992701790587956" onmouseenter="enter('8546992701790587956');" onmouseout="out('8546992701790587956');" style=""> 327             TextView publishTextView = (TextView)mPublishDialog.findViewById(R.id.publish_url_textview); </span>
<span  style=""> 328                                                                                                          </span>
<span class="-7759606836018483289" onmouseenter="enter('-7759606836018483289');" onmouseout="out('-7759606836018483289');" style=""> 329             publishButton.setOnClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 330                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 331                 public void onClick(View v) {                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 332                     if (mNote != null) {                                                                 </span>
<span class="1314484573565824514" onmouseenter="enter('1314484573565824514');" onmouseout="out('1314484573565824514');" style=""> 333                         Button button = (Button) v;                                                      </span>
<span class="5563864695602119989" onmouseenter="enter('5563864695602119989');" onmouseout="out('5563864695602119989');" style=""> 334                         boolean newPublishedStatus = !mNote.isPublished();                               </span>
<span class="-3191807331109519265" onmouseenter="enter('-3191807331109519265');" onmouseout="out('-3191807331109519265');" style=""> 335                         mNote.setPublished(newPublishedStatus);                                          </span>
<span class="-6701970919306036436" onmouseenter="enter('-6701970919306036436');" onmouseout="out('-6701970919306036436');" style=""> 336                         if (newPublishedStatus) {                                                        </span>
<span class="3827010637140387680" onmouseenter="enter('3827010637140387680');" onmouseout="out('3827010637140387680');" style=""> 337                             button.setText(&quot;Publishing...&quot;);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 338                         } else {                                                                         </span>
<span class="5904425248947527288" onmouseenter="enter('5904425248947527288');" onmouseout="out('5904425248947527288');" style=""> 339                             button.setText(&quot;Publish&quot;);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340                         }                                                                                </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 341                         mNote.save();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 344             });                                                                                          </span>
<span  style=""> 345                                                                                                          </span>
<span class="4045844893437359317" onmouseenter="enter('4045844893437359317');" onmouseout="out('4045844893437359317');" style=""> 346             publishTextView.setOnClickListener(new View.OnClickListener() {                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 347                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 348                 public void onClick(View v) {                                                            </span>
<span class="1552014347051890626" onmouseenter="enter('1552014347051890626');" onmouseout="out('1552014347051890626');" style=""> 349                     TextView textView = (TextView) v;                                                    </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 350                     ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 350                     ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(ContextðŸ”µ</abbr></span>
<span class="5839586414586808613" onmouseenter="enter('5839586414586808613');" onmouseout="out('5839586414586808613');" style=""><abbr title=" 351                     ClipData clip = ClipData.newPlainText(getString(R.string.app_name),textView.getText());"> 351                     ClipData clip = ClipData.newPlainText(getString(R.string.app_name),textView.getText()ðŸ”µ</abbr></span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 352                     clipboard.setPrimaryClip(clip);                                                      </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title=" 353                     Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 353                     Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).shðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 355             });                                                                                          </span>
<span class="47925618930998082" onmouseenter="enter('47925618930998082');" onmouseout="out('47925618930998082');" style=""> 356         } else if (mPublishDialog.isShowing()) {                                                         </span>
<span class="-3990443050467684017" onmouseenter="enter('-3990443050467684017');" onmouseout="out('-3990443050467684017');" style=""> 357             mPublishDialog.dismiss();                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 358             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359         }                                                                                                </span>
<span  style=""> 360                                                                                                          </span>
<span class="970005468838694125" onmouseenter="enter('970005468838694125');" onmouseout="out('970005468838694125');" style=""> 361         updatePublishDialogContent();                                                                    </span>
<span  style=""> 362                                                                                                          </span>
<span class="-3313589573951955195" onmouseenter="enter('-3313589573951955195');" onmouseout="out('-3313589573951955195');" style=""> 363         mPublishDialog.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364     }                                                                                                    </span>
<span  style=""> 365                                                                                                          </span>
<span class="2778692559269198329" onmouseenter="enter('2778692559269198329');" onmouseout="out('2778692559269198329');" style=""> 366     public void updatePublishDialogContent() {                                                           </span>
<span class="-8988333594594696749" onmouseenter="enter('-8988333594594696749');" onmouseout="out('-8988333594594696749');" style=""> 367         if (mPublishDialog == null || mNote == null)                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 368             return;                                                                                      </span>
<span class="2615697251940277419" onmouseenter="enter('2615697251940277419');" onmouseout="out('2615697251940277419');" style=""> 369         Button publishButton = (Button)mPublishDialog.findViewById(R.id.publish_note_button);            </span>
<span class="8546992701790587956" onmouseenter="enter('8546992701790587956');" onmouseout="out('8546992701790587956');" style=""> 370         TextView publishTextView = (TextView)mPublishDialog.findViewById(R.id.publish_url_textview);     </span>
<span  style=""> 371                                                                                                          </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style=""> 372         if (mNote.isPublished()) {                                                                       </span>
<span class="5460167267665796132" onmouseenter="enter('5460167267665796132');" onmouseout="out('5460167267665796132');" style=""> 373             publishButton.setText(&quot;Published&quot;);                                                          </span>
<span class="7499054267928598822" onmouseenter="enter('7499054267928598822');" onmouseout="out('7499054267928598822');" style=""> 374             publishTextView.setTextColor(getResources().getColor(R.color.white));                        </span>
<span class="-2988513566372186325" onmouseenter="enter('-2988513566372186325');" onmouseout="out('-2988513566372186325');" style=""> 375             publishTextView.setText(mNote.getPublishedUrl());                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 376         } else {                                                                                         </span>
<span class="3946830685104663344" onmouseenter="enter('3946830685104663344');" onmouseout="out('3946830685104663344');" style=""> 377             publishButton.setText(&quot;Publish note&quot;);                                                       </span>
<span class="-3553959048380701857" onmouseenter="enter('-3553959048380701857');" onmouseout="out('-3553959048380701857');" style=""> 378             publishTextView.setTextColor(getResources().getColor(R.color.light_gray));                   </span>
<span class="-5437542377379175369" onmouseenter="enter('-5437542377379175369');" onmouseout="out('-5437542377379175369');" style=""> 379             publishTextView.setText(&quot;Note not published&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380         }                                                                                                </span>
<span  style=""> 381                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382     }                                                                                                    </span>
<span  style=""> 383                                                                                                          </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 384     private boolean noteIsEmpty() {                                                                      </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 385         return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386     }                                                                                                    </span>
<span  style=""> 387                                                                                                          </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 388     public void setNote(String noteID){                                                                  </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 389         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390     }                                                                                                    </span>
<span  style=""> 391                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 392     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 393         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 394             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span  style=""> 395                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 396         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 397                                                                                                          </span>
<span class="2077738191995360697" onmouseenter="enter('2077738191995360697');" onmouseout="out('2077738191995360697');" style=""> 398         if (matchOffsets != null)                                                                        </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 399             mMatchOffsets = matchOffsets;                                                                </span>
<span  style=""> 400                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 401         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 402         if (mNote != null) {                                                                             </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 403             if (mIsNewNote &amp;&amp; noteIsEmpty())                                                             </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 404                 mNote.delete();                                                                          </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 405             else if (mNote != null)                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 406                 saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407         }                                                                                                </span>
<span  style=""> 408                                                                                                          </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 409         new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410     }                                                                                                    </span>
<span  style=""> 411                                                                                                          </span>
<span class="-3433185850424102984" onmouseenter="enter('-3433185850424102984');" onmouseout="out('-3433185850424102984');" style=""> 412     public void updateNote(Note updatedNote) {                                                           </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 413         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 414         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 415         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416     }                                                                                                    </span>
<span  style=""> 417                                                                                                          </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 418     public void refreshContent(boolean isNoteUpdate) {                                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 419         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 420             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 421                                                                                                          </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 422             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 422             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span  style=""> 423                                                                                                          </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 424             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 425                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 426             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 427                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 428                 mNote.save();                                                                            </span>
<span  style=""> 429                                                                                                          </span>
<span class="-5094013145931261947" onmouseenter="enter('-5094013145931261947');" onmouseout="out('-5094013145931261947');" style=""><abbr title=" 430                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) {"> 430                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 431                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433             }                                                                                            </span>
<span  style=""> 434                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 435             afterTextChanged(mContentEditText.getText());                                                </span>
<span  style=""> 436                                                                                                          </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 437             mPinButton.setChecked(mNote.isPinned());                                                     </span>
<span  style=""> 438                                                                                                          </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 439             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441     }                                                                                                    </span>
<span  style=""> 442                                                                                                          </span>
<span class="-5496131723873966197" onmouseenter="enter('-5496131723873966197');" onmouseout="out('-5496131723873966197');" style=""> 443     public void updateTagList() {                                                                        </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 444         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 445         if (activity == null) return;                                                                    </span>
<span  style=""> 446                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 447         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 448         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449     }                                                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 451     int newCursorLocation(String newText, String oldText, int cursorLocation) {                          </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 452         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 453         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 454         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 455         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 456         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 457         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 458         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 459         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 460                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 461         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 462                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 463         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 464                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 465         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 466         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 467             return newText.length();                                                                     </span>
<span  style=""> 468                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 469         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 470         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 471                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 472         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 473             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 473             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 474             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 474             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 475         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 476             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477         }                                                                                                </span>
<span  style=""> 478                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 479         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 480         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 481             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 482                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 483         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 484         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485     }                                                                                                    </span>
<span  style=""> 486                                                                                                          </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 487     private Runnable autoSaveRunnable = new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 488         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 489         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 490             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 492     };                                                                                                   </span>
<span  style=""> 493                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 494     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 495     public void onTagsChanged(String tagString) {                                                        </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 496         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 497             return;                                                                                      </span>
<span class="-9151826850815990618" onmouseenter="enter('-9151826850815990618');" onmouseout="out('-9151826850815990618');" style=""><abbr title=" 498         if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length())"> 498         if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagStrðŸ”µ</abbr></span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 499             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);          </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 500         else                                                                                             </span>
<span class="8421196898283215417" onmouseenter="enter('8421196898283215417');" onmouseout="out('8421196898283215417');" style=""> 501             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;removed_tag&quot;, &quot;tag_removed_from_note&quot;, null);    </span>
<span  style=""> 502                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 503         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 504         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 505         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 506         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507     }                                                                                                    </span>
<span  style=""> 508                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 509     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 510     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 511         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512     }                                                                                                    </span>
<span  style=""> 513                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 514     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 515     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 516         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 517         // Remove any existing size spans                                                                </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 518         RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 519         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 520             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 522         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 523         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 524             return;                                                                                      </span>
<span class="3283000540261653525" onmouseenter="enter('3283000540261653525');" onmouseout="out('3283000540261653525');" style=""><abbr title=" 525         editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 525         editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526     }                                                                                                    </span>
<span  style=""> 527                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 528     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 529     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span  style=""> 530                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 531         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 532         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 533             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 534             mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535         }                                                                                                </span>
<span  style=""> 536                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 537         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 538         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 539             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 540             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542     }                                                                                                    </span>
<span  style=""> 543                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 544     private void saveAndSyncNote() {                                                                     </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 545         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 546             return;                                                                                      </span>
<span  style=""> 547                                                                                                          </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 548         new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549     }                                                                                                    </span>
<span  style=""> 550                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 551     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 552         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 553             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 554             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 555             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 556             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 557                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 558         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 559             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 560                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562     }                                                                                                    </span>
<span  style=""> 563                                                                                                          </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 564     public void setIsNewNote(boolean isNewNote) {                                                        </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 565         this.mIsNewNote = isNewNote;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566     }                                                                                                    </span>
<span  style=""> 567                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 568     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 569     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 570         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 571             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 572             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 573                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576     }                                                                                                    </span>
<span  style=""> 577                                                                                                          </span>
<span class="-6849832043716883515" onmouseenter="enter('-6849832043716883515');" onmouseout="out('-6849832043716883515');" style=""> 578     public Note getNote() {                                                                              </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 579         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580     }                                                                                                    </span>
<span  style=""> 581                                                                                                          </span>
<span class="5855058962481175207" onmouseenter="enter('5855058962481175207');" onmouseout="out('5855058962481175207');" style=""> 582     public String getNoteContentString() {                                                               </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 583         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 584             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 585         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 586             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588     }                                                                                                    </span>
<span  style=""> 589                                                                                                          </span>
<span class="2486113532203564324" onmouseenter="enter('2486113532203564324');" onmouseout="out('2486113532203564324');" style=""> 590     public String getNoteTagsString() {                                                                  </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 591         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 592             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 593         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 594             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596     }                                                                                                    </span>
<span  style=""> 597                                                                                                          </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 598     // Use spaces in tag autocompletion list                                                             </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 599     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 599     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-tðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 600     public class SpaceTokenizer implements Tokenizer {                                                   </span>
<span  style=""> 601                                                                                                          </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 602         public int findTokenStart(CharSequence text, int cursor) {                                       </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 603             int i = cursor;                                                                              </span>
<span  style=""> 604                                                                                                          </span>
<span class="885050749614268129" onmouseenter="enter('885050749614268129');" onmouseout="out('885050749614268129');" style=""> 605             while (i &gt; 0 &amp;&amp; text.charAt(i - 1) != &#x27; &#x27;) {                                                 </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 606                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607             }                                                                                            </span>
<span class="9056743128114431706" onmouseenter="enter('9056743128114431706');" onmouseout="out('9056743128114431706');" style=""> 608             while (i &lt; cursor &amp;&amp; text.charAt(i) == &#x27; &#x27;) {                                                </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 609                 i++;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610             }                                                                                            </span>
<span  style=""> 611                                                                                                          </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 612             return i;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613         }                                                                                                </span>
<span  style=""> 614                                                                                                          </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 615         public int findTokenEnd(CharSequence text, int cursor) {                                         </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 616             int i = cursor;                                                                              </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 617             int len = text.length();                                                                     </span>
<span  style=""> 618                                                                                                          </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 619             while (i &lt; len) {                                                                            </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 620                 if (text.charAt(i) == &#x27; &#x27;) {                                                             </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 621                     return i;                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 622                 } else {                                                                                 </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 623                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625             }                                                                                            </span>
<span  style=""> 626                                                                                                          </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 627             return len;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628         }                                                                                                </span>
<span  style=""> 629                                                                                                          </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 630         public CharSequence terminateToken(CharSequence text) {                                          </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 631             int i = text.length();                                                                       </span>
<span  style=""> 632                                                                                                          </span>
<span class="-2645617250828763966" onmouseenter="enter('-2645617250828763966');" onmouseout="out('-2645617250828763966');" style=""> 633             while (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                 </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 634                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635             }                                                                                            </span>
<span  style=""> 636                                                                                                          </span>
<span class="-6208188263403401654" onmouseenter="enter('-6208188263403401654');" onmouseout="out('-6208188263403401654');" style=""> 637             if (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                    </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 638                 return text;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 639             } else {                                                                                     </span>
<span class="-8407561526953236331" onmouseenter="enter('-8407561526953236331');" onmouseout="out('-8407561526953236331');" style=""> 640                 if (text instanceof Spanned) {                                                           </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 641                     SpannableString sp = new SpannableString(text + &quot; &quot;);                                </span>
<span class="4069757121373026619" onmouseenter="enter('4069757121373026619');" onmouseout="out('4069757121373026619');" style=""> 642                     TextUtils.copySpansFrom((Spanned) text, 0, text.length(),                            </span>
<span class="-4923471023181178896" onmouseenter="enter('-4923471023181178896');" onmouseout="out('-4923471023181178896');" style=""> 643                             Object.class, sp, 0);                                                        </span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 644                     return sp;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 645                 } else {                                                                                 </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 646                     return text + &quot; &quot;;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 652     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 653                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 654         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 655         protected void onPreExecute() {                                                                  </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 656             mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                         </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 657             mIsLoadingNote = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658         }                                                                                                </span>
<span  style=""> 659                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 660         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 661         protected Void doInBackground(String... args) {                                                  </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 662             if (getActivity() == null) {                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 663                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664             }                                                                                            </span>
<span  style=""> 665                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 666             String noteID = args[0];                                                                     </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 667             Simplenote application = (Simplenote) getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 668             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 669             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 670                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 671                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 672                 if (getActivity() instanceof NotesActivity) {                                            </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style=""> 673                     ((NotesActivity) getActivity()).setCurrentNote(mNote);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 675             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 676                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 678             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679         }                                                                                                </span>
<span  style=""> 680                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 681         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 682         protected void onPostExecute(Void nada) {                                                        </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style=""> 683             if (getActivity() == null || getActivity().isFinishing())                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 684                 return;                                                                                  </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 685             refreshContent(false);                                                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 686             if (mMatchOffsets != null) {                                                                 </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 687                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 687                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 688                 mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689             }                                                                                            </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 690             mContentEditText.addTextChangedListener(NoteEditorFragment.this);                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 691             if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                         </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 692                 // Show soft keyboard                                                                    </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 693                 mContentEditText.requestFocus();                                                         </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 694                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 695                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 696                     public void run() {                                                                  </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 697                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 697                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSysðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 698                         if (inputMethodManager != null)                                                  </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 699                             inputMethodManager.showSoftInput(mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 701                 }, 100);                                                                                 </span>
<span  style=""> 702                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703             }                                                                                            </span>
<span  style=""> 704                                                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 705             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span  style=""> 706                                                                                                          </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 707             mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 708         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709     }                                                                                                    </span>
<span  style=""> 710                                                                                                          </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 711     private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                     </span>
<span  style=""> 712                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 713         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 714         protected Void doInBackground(Void... args) {                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 715             saveNote();                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 716             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717         }                                                                                                </span>
<span  style=""> 718                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 719         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 720         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style=""> 721             if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                 </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style=""> 722                 // Update links                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 723                 SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726     }                                                                                                    </span>
<span  style=""> 727                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style=""> 728     private void saveNote() {                                                                            </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 729         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 730             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731         }                                                                                                </span>
<span  style=""> 732                                                                                                          </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style=""> 733         String content = getNoteContentString();                                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 734         String tagString = getNoteTagsString();                                                          </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 735         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                       </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 736             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 737             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 738             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 739             // Send pinned event to google analytics if changed                                          </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 740             mNote.setPinned(mPinButton.isChecked());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 741             mNote.save();                                                                                </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 742             if (getActivity() != null) {                                                                 </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 743                 Tracker tracker = EasyTracker.getTracker();                                              </span>
<span class="7411383674080963289" onmouseenter="enter('7411383674080963289');" onmouseout="out('7411383674080963289');" style=""> 744                 if (mNote.isPinned() != mPinButton.isChecked())                                          </span>
<span class="1805524535551115774" onmouseenter="enter('1805524535551115774');" onmouseout="out('1805524535551115774');" style=""><abbr title=" 745                     tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 745                     tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;,ðŸ”µ</abbr></span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 746                 tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 748         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749     }                                                                                                    </span>
<span  style=""> 750                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 751     // Contextual action bar for dealing with links                                                      </span>
<span class="-23103958784499667" onmouseenter="enter('-23103958784499667');" onmouseout="out('-23103958784499667');" style=""> 752     private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                        </span>
<span  style=""> 753                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 754         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 755         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 756         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 757             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 758             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-5537764272582475285" onmouseenter="enter('-5537764272582475285');" onmouseout="out('-5537764272582475285');" style=""> 759             if (inflater != null){                                                                       </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 760                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 761                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 762                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style=""> 763                 if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 764                     mode.setTitleOptionalHint(false);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 767             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768         }                                                                                                </span>
<span  style=""> 769                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 770         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 771         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 772         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 773         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 774             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775         }                                                                                                </span>
<span  style=""> 776                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 777         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 778         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 779         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 780             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 781                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 782                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 783                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 784                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 785                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 786                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 787                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 788                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 789                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 791                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 793                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 794                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 795                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 796                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 796                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(ConðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style=""> 797                         ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);   </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 798                         clipboard.setPrimaryClip(clip);                                                  </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title=" 799                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 799                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 800                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 802                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 803                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 804                     if (mLinkText != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 805                         try {                                                                            </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 806                             Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);         </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 807                             shareIntent.setType(&quot;text/plain&quot;);                                           </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style=""> 808                             shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);          </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 809                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 809                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.stðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 810                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 811                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812                         }                                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 813                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 815                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 816                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 817                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819         }                                                                                                </span>
<span  style=""> 820                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 821         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 822         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 823         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 824             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 826     };                                                                                                   </span>
<span  style=""> 827                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style=""> 828     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style=""> 829     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 830     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style=""> 831     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style=""> 832         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style=""> 833             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style=""> 834             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 835                 return;                                                                                  </span>
<span  style=""> 836                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style=""> 837             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style=""> 838             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style=""> 839                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style=""> 840                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title=" 841                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();"> 841                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 842                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 843                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 844                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 845                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846                 }                                                                                        </span>
<span  style=""> 847                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style=""> 848                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 849                 if (getActivity() != null) {                                                             </span>
<span class="-7828194884341615795" onmouseenter="enter('-7828194884341615795');" onmouseout="out('-7828194884341615795');" style=""> 850                     mActionMode = getActivity().startActionMode(mActionModeCallback);                    </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 851                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 852                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853                     }                                                                                    </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 854                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 856             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 857                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 858                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 860         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 861             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 862             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 864     }                                                                                                    </span>
<span  style=""> 865                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style=""> 866     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style=""> 867         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style=""> 868             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="4608769072092705594" onmouseenter="enter('4608769072092705594');" onmouseout="out('4608769072092705594');" style=""> 869                 mViewLinkMenuItem.setIcon(mCallIconResId);                                               </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style=""> 870                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style=""> 871             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="112818067677115399" onmouseenter="enter('112818067677115399');" onmouseout="out('112818067677115399');" style=""> 872                 mViewLinkMenuItem.setIcon(mEmailIconResId);                                              </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style=""> 873                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style=""> 874             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-5464734295170160558" onmouseenter="enter('-5464734295170160558');" onmouseout="out('-5464734295170160558');" style=""> 875                 mViewLinkMenuItem.setIcon(mMapIconResId);                                                </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style=""> 876                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 877             } else {                                                                                     </span>
<span class="-4632312324298999235" onmouseenter="enter('-4632312324298999235');" onmouseout="out('-4632312324298999235');" style=""> 878                 mViewLinkMenuItem.setIcon(mWebIconResId);                                                </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style=""> 879                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 882     }                                                                                                    </span>
<span  style=""> 883                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 884     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style=""> 885     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style=""> 886                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887     }                                                                                                    </span>
<span  style=""> 888                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 889     @Override                                                                                            </span>
<span class="-391573795721253888" onmouseenter="enter('-391573795721253888');" onmouseout="out('-391573795721253888');" style=""> 890     public void onChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {      </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style=""> 891         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style=""> 892             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 893                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style=""> 894                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 895                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 896                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 897                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 898                             public void run() {                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style=""> 899                                 updateNote(updatedNote);                                                 </span>
<span class="970005468838694125" onmouseenter="enter('970005468838694125');" onmouseout="out('970005468838694125');" style=""> 900                                 updatePublishDialogContent();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 902                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 904                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 905                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 907             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909     }                                                                                                    </span>
<span  style=""> 910                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 911     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style=""> 912     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style=""> 913         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 914     }                                                                                                    </span>
<span  style=""> 915                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 916     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 917     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style=""> 918         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style=""> 919         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 920             return;                                                                                      </span>
<span  style=""> 921                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style=""> 922         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style=""> 923         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 924             return;                                                                                      </span>
<span  style=""> 925                                                                                                          </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style=""> 926         note.setContent(getNoteContentString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1440843073414233844" onmouseenter="enter('-1440843073414233844');" onmouseout="out('-1440843073414233844');" style="">   4 import android.app.Dialog;                                                                               </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   5 import android.app.Fragment;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   6 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   7 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   8 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   9 import android.content.Intent;                                                                           </span>
<span class="-840652079464298178" onmouseenter="enter('-840652079464298178');" onmouseout="out('-840652079464298178');" style="">  10 import android.content.res.TypedArray;                                                                   </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  11 import android.database.Cursor;                                                                          </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  12 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  13 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  14 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  15 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  16 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  17 import android.text.Editable;                                                                            </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  18 import android.text.SpannableString;                                                                     </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  19 import android.text.Spanned;                                                                             </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  20 import android.text.TextUtils;                                                                           </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  21 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  22 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  23 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  24 import android.text.util.Linkify;                                                                        </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  25 import android.view.ActionMode;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  26 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  27 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  28 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  29 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  30 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  31 import android.view.ViewGroup;                                                                           </span>
<span class="8570405338525080773" onmouseenter="enter('8570405338525080773');" onmouseout="out('8570405338525080773');" style="">  32 import android.view.Window;                                                                              </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="">  33 import android.view.WindowManager;                                                                       </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  34 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1133222559545955472" onmouseenter="enter('1133222559545955472');" onmouseout="out('1133222559545955472');" style="">  35 import android.widget.Button;                                                                            </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37 import android.widget.LinearLayout;                                                                      </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  38 import android.widget.MultiAutoCompleteTextView.Tokenizer;                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  39 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  40 import android.widget.Toast;                                                                             </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  41 import android.widget.ToggleButton;                                                                      </span>
<span  style="">  42                                                                                                          </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  43 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  44 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  45 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="7629762131910067592" onmouseenter="enter('7629762131910067592');" onmouseout="out('7629762131910067592');" style="">  46 import com.automattic.simplenote.utils.SimplenoteEditText;                                               </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  47 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  48 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  49 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  50 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="">  51 import com.automattic.simplenote.utils.Typefaces;                                                        </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  52 import com.google.analytics.tracking.android.EasyTracker;                                                </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  53 import com.google.analytics.tracking.android.Tracker;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  54 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  55 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  56 import com.simperium.client.Query;                                                                       </span>
<span  style="">  57                                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  58 import java.util.Calendar;                                                                               </span>
<span  style="">  59                                                                                                          </span>
<span class="7280890691619564888" onmouseenter="enter('7280890691619564888');" onmouseout="out('7280890691619564888');" style=""><abbr title="  60 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListener, View.OnFocusChangeListener, SimplenoteEditText.OnSelectionChangedListener {">  60 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddeðŸ”µ</abbr></span>
<span  style="">  61                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  62     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  63     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  64     static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  65     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style="">  66                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  67     private Note mNote;                                                                                  </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  68     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style="">  69                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  70     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  71     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  72     private ToggleButton mPinButton;                                                                     </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  73     private Handler mAutoSaveHandler;                                                                    </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  74     private LinearLayout mPlaceholderView;                                                               </span>
<span class="6490526833736257609" onmouseenter="enter('6490526833736257609');" onmouseout="out('6490526833736257609');" style="">  75     private Dialog mPublishDialog;                                                                       </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  76     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="275494556225166536" onmouseenter="enter('275494556225166536');" onmouseout="out('275494556225166536');" style="">  77     private boolean mIsNewNote, mIsLoadingNote;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style="">  78     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style="">  79     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style="">  80     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style="">  81     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style="">  82     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-2809999858206249165" onmouseenter="enter('-2809999858206249165');" onmouseout="out('-2809999858206249165');" style="">  83     private int mEmailIconResId, mWebIconResId, mMapIconResId, mCallIconResId;                           </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style="">  84     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style="">  85     private String mMatchOffsets;                                                                        </span>
<span  style="">  86                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  87     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  88      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  89      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  90      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  91     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92     }                                                                                                    </span>
<span  style="">  93                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  94     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  95     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  96         super.onCreate(savedInstanceState);                                                              </span>
<span  style="">  97                                                                                                          </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">  98         if (getActivity() != null) {                                                                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  99             Simplenote currentApp = (Simplenote) getActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 100             mNotesBucket = currentApp.getNotesBucket();                                                  </span>
<span  style=""> 101                                                                                                          </span>
<span class="6390134422937918444" onmouseenter="enter('6390134422937918444');" onmouseout="out('6390134422937918444');" style=""><abbr title=" 102             TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionBarIconWeb, R.attr.actionBarIconMap, R.attr.actionBarIconCall});"> 102             TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.atðŸ”µ</abbr></span>
<span class="-368005650607593546" onmouseenter="enter('-368005650607593546');" onmouseout="out('-368005650607593546');" style=""> 103             if (a != null) {                                                                             </span>
<span class="156477903530707073" onmouseenter="enter('156477903530707073');" onmouseout="out('156477903530707073');" style=""> 104                 mEmailIconResId = a.getResourceId(0, 0);                                                 </span>
<span class="2237960387607406884" onmouseenter="enter('2237960387607406884');" onmouseout="out('2237960387607406884');" style=""> 105                 mWebIconResId = a.getResourceId(1, 0);                                                   </span>
<span class="-2587404817224189880" onmouseenter="enter('-2587404817224189880');" onmouseout="out('-2587404817224189880');" style=""> 106                 mMapIconResId = a.getResourceId(2, 0);                                                   </span>
<span class="7397862531502718567" onmouseenter="enter('7397862531502718567');" onmouseout="out('7397862531502718567');" style=""> 107                 mCallIconResId = a.getResourceId(3, 0);                                                  </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style=""> 108                 a.recycle();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110         }                                                                                                </span>
<span  style=""> 111                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 112         mAutoSaveHandler = new Handler();                                                                </span>
<span  style=""> 113                                                                                                          </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 114         mMatchHighlighter = new TextHighlighter(getActivity(),                                           </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 115                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 115                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="3992270686517948303" onmouseenter="enter('3992270686517948303');" onmouseout="out('3992270686517948303');" style=""> 116         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0){                              </span>
<span  style=""> 117                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 118             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 119             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 120                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 121                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 122                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123             }                                                                                            </span>
<span  style=""> 124                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 125             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 126             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 127                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 128                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129             }                                                                                            </span>
<span  style=""> 130                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 132             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 133                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134             }                                                                                            </span>
<span  style=""> 135                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 136             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 137             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 138                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 139                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 140                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 141                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 142                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 143                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 144                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 145                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 146                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 147                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 147                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.forðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 148                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 150         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151     }                                                                                                    </span>
<span  style=""> 152                                                                                                          </span>
<span  style=""> 153                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 155     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 156         setHasOptionsMenu(true);                                                                         </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 157         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 158         mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));              </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 159         if (getActivity() != null) {                                                                     </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style=""><abbr title=" 160             mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));"> 160             mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161         }                                                                                                </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 162         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 163         mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                 </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 164         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style=""> 165         mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));</span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 166         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span  style=""> 167                                                                                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 168         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style=""> 169                                                                                                          </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style=""> 170         mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                               </span>
<span class="-6233419192957625397" onmouseenter="enter('-6233419192957625397');" onmouseout="out('-6233419192957625397');" style=""> 171         mPinButton.setOnClickListener(new View.OnClickListener() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 172             @Override                                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 173             public void onClick(View v) {                                                                </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style=""> 174                 if (mPinButton.isChecked()) {                                                            </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style=""> 175                     // Friendly message to the user as to what this button does.                         </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style=""> 176                     Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 179         });                                                                                              </span>
<span  style=""> 180                                                                                                          </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 181         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="8670904764944796201" onmouseenter="enter('8670904764944796201');" onmouseout="out('8670904764944796201');" style=""><abbr title=" 182         if ((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)"> 182         if ((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) getActivity()).isLargeScreenLandðŸ”µ</abbr></span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 183             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span  style=""> 184                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 185         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style=""> 186                                                                                                          </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 187         // Load note if we were passed a note Id                                                         </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 188         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 189         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 190             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 191             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 192                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193             }                                                                                            </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 194             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 195             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196         }                                                                                                </span>
<span  style=""> 197                                                                                                          </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 198 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199 	}                                                                                                       </span>
<span  style=""> 200                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 201     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 202     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 203         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 204         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 205         mNotesBucket.addListener(this);                                                                  </span>
<span  style=""> 206                                                                                                          </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 207         mTagView.setOnTagAddedListener(this);                                                            </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 208 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 209                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 210         Bundle arguments = getArguments();                                                               </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 211                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 212         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 213             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="526740986280926199" onmouseenter="enter('526740986280926199');" onmouseout="out('526740986280926199');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 214             if (arguments.containsKey(ARG_MATCH_OFFSETS))                                                </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 215                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 216             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 217             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 218         }                                                                                                </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 219 ||||||| BASE                                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 220                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 221         Bundle arguments = getArguments();                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 222                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 223         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 224             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="526740986280926199" onmouseenter="enter('526740986280926199');" onmouseout="out('526740986280926199');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 225             if (arguments.containsKey(ARG_MATCH_OFFSETS))                                                </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 226                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 227             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 228             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 229         }                                                                                                </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 230 =======                                                                                                  </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 231 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232     }                                                                                                    </span>
<span  style=""> 233                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 234     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 235     public void onPause() {                                                                              </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 236         mNotesBucket.removeListener(this);                                                               </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 237         // Hide soft keyboard if it is showing...                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 238         if (getActivity() != null) {                                                                     </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 239             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 239             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 240             if (inputMethodManager != null) {                                                            </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 241                 inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243         }                                                                                                </span>
<span  style=""> 244                                                                                                          </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 245         // Delete the note if it is new and has empty fields                                             </span>
<span class="-2219905285758853631" onmouseenter="enter('-2219905285758853631');" onmouseout="out('-2219905285758853631');" style=""> 246         if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty()) {                                              </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 247             mNote.delete();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 248         } else {                                                                                         </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 249             saveNote();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250         }                                                                                                </span>
<span  style=""> 251                                                                                                          </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 252         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 253                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 254         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 255             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span  style=""> 257                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 258         mHighlighter.stop();                                                                             </span>
<span  style=""> 259                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 260         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261     }                                                                                                    </span>
<span  style=""> 262                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263     @Override                                                                                            </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style=""> 264     public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                  </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 265         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 266                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 267         if (mNote != null) {                                                                             </span>
<span class="5214019728761898324" onmouseenter="enter('5214019728761898324');" onmouseout="out('5214019728761898324');" style=""> 268             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_published_note);               </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 269             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 270                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 271             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 272             if (mNote.isDeleted())                                                                       </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 273                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 274             else                                                                                         </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 275                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276         }                                                                                                </span>
<span  style=""> 277                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 278         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279     }                                                                                                    </span>
<span  style=""> 280                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 281     @Override                                                                                            </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style=""> 282     public boolean onOptionsItemSelected(MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 283         switch (item.getItemId()) {                                                                      </span>
<span class="2851142166727911529" onmouseenter="enter('2851142166727911529');" onmouseout="out('2851142166727911529');" style=""> 284             case R.id.menu_view_published_note:                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 285                 if (mNote != null) {                                                                     </span>
<span class="2186681076883129445" onmouseenter="enter('2186681076883129445');" onmouseout="out('2186681076883129445');" style=""> 286                     showNotePublishDialog();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 288                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 289             case R.id.menu_share:                                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 290                 if (mNote != null) {                                                                     </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 291                     Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                 </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 292                     shareIntent.setType(&quot;text/plain&quot;);                                                   </span>
<span class="2565640458837084796" onmouseenter="enter('2565640458837084796');" onmouseout="out('2565640458837084796');" style=""> 293                     shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mNote.getContent());         </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 294                     startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 294                     startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.shaðŸ”µ</abbr></span>
<span class="-291628727976592463" onmouseenter="enter('-291628727976592463');" onmouseout="out('-291628727976592463');" style=""><abbr title=" 295                     EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;shared_note&quot;, &quot;action_bar_share_button&quot;, null);"> 295                     EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;shared_note&quot;, &quot;action_bar_share_button&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 297                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 298             case R.id.menu_delete:                                                                       </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 299                 if (mNote != null) {                                                                     </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style=""> 300                     mNote.setDeleted(!mNote.isDeleted());                                                </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 301                     mNote.setModificationDate(Calendar.getInstance());                                   </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 302                     mNote.save();                                                                        </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style=""> 303                     Intent resultIntent = new Intent();                                                  </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 304                     if (mNote.isDeleted())                                                               </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style=""> 305                         resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());      </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style=""> 306                     getActivity().setResult(Activity.RESULT_OK, resultIntent);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307                 }                                                                                        </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 308                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 309                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 310             case android.R.id.home:                                                                      </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 311                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 312                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 313             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 314                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316     }                                                                                                    </span>
<span  style=""> 317                                                                                                          </span>
<span class="-6798341237622548838" onmouseenter="enter('-6798341237622548838');" onmouseout="out('-6798341237622548838');" style=""> 318     private void showNotePublishDialog() {                                                               </span>
<span class="-1293040003772175228" onmouseenter="enter('-1293040003772175228');" onmouseout="out('-1293040003772175228');" style=""> 319         if (mPublishDialog == null) {                                                                    </span>
<span class="-6935058658438695871" onmouseenter="enter('-6935058658438695871');" onmouseout="out('-6935058658438695871');" style=""> 320             mPublishDialog = new Dialog(getActivity(), R.style.SimplenotePublishDialog);                 </span>
<span class="84367104298890978" onmouseenter="enter('84367104298890978');" onmouseout="out('84367104298890978');" style=""> 321             mPublishDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);                                </span>
<span class="-8693338580555501068" onmouseenter="enter('-8693338580555501068');" onmouseout="out('-8693338580555501068');" style=""> 322             mPublishDialog.setContentView(R.layout.publish_settings);                                    </span>
<span  style=""> 323                                                                                                          </span>
<span class="-8841152936066762125" onmouseenter="enter('-8841152936066762125');" onmouseout="out('-8841152936066762125');" style=""><abbr title=" 324             mPublishDialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);"> 324             mPublishDialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LðŸ”µ</abbr></span>
<span  style=""> 325                                                                                                          </span>
<span class="2615697251940277419" onmouseenter="enter('2615697251940277419');" onmouseout="out('2615697251940277419');" style=""> 326             Button publishButton = (Button)mPublishDialog.findViewById(R.id.publish_note_button);        </span>
<span class="8546992701790587956" onmouseenter="enter('8546992701790587956');" onmouseout="out('8546992701790587956');" style=""> 327             TextView publishTextView = (TextView)mPublishDialog.findViewById(R.id.publish_url_textview); </span>
<span  style=""> 328                                                                                                          </span>
<span class="-7759606836018483289" onmouseenter="enter('-7759606836018483289');" onmouseout="out('-7759606836018483289');" style=""> 329             publishButton.setOnClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 330                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 331                 public void onClick(View v) {                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 332                     if (mNote != null) {                                                                 </span>
<span class="1314484573565824514" onmouseenter="enter('1314484573565824514');" onmouseout="out('1314484573565824514');" style=""> 333                         Button button = (Button) v;                                                      </span>
<span class="5563864695602119989" onmouseenter="enter('5563864695602119989');" onmouseout="out('5563864695602119989');" style=""> 334                         boolean newPublishedStatus = !mNote.isPublished();                               </span>
<span class="-3191807331109519265" onmouseenter="enter('-3191807331109519265');" onmouseout="out('-3191807331109519265');" style=""> 335                         mNote.setPublished(newPublishedStatus);                                          </span>
<span class="-6701970919306036436" onmouseenter="enter('-6701970919306036436');" onmouseout="out('-6701970919306036436');" style=""> 336                         if (newPublishedStatus) {                                                        </span>
<span class="3827010637140387680" onmouseenter="enter('3827010637140387680');" onmouseout="out('3827010637140387680');" style=""> 337                             button.setText(&quot;Publishing...&quot;);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 338                         } else {                                                                         </span>
<span class="5904425248947527288" onmouseenter="enter('5904425248947527288');" onmouseout="out('5904425248947527288');" style=""> 339                             button.setText(&quot;Publish&quot;);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340                         }                                                                                </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 341                         mNote.save();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 344             });                                                                                          </span>
<span  style=""> 345                                                                                                          </span>
<span class="4045844893437359317" onmouseenter="enter('4045844893437359317');" onmouseout="out('4045844893437359317');" style=""> 346             publishTextView.setOnClickListener(new View.OnClickListener() {                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 347                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 348                 public void onClick(View v) {                                                            </span>
<span class="1552014347051890626" onmouseenter="enter('1552014347051890626');" onmouseout="out('1552014347051890626');" style=""> 349                     TextView textView = (TextView) v;                                                    </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 350                     ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 350                     ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(ContextðŸ”µ</abbr></span>
<span class="5839586414586808613" onmouseenter="enter('5839586414586808613');" onmouseout="out('5839586414586808613');" style=""><abbr title=" 351                     ClipData clip = ClipData.newPlainText(getString(R.string.app_name),textView.getText());"> 351                     ClipData clip = ClipData.newPlainText(getString(R.string.app_name),textView.getText()ðŸ”µ</abbr></span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 352                     clipboard.setPrimaryClip(clip);                                                      </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title=" 353                     Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 353                     Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).shðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 355             });                                                                                          </span>
<span class="47925618930998082" onmouseenter="enter('47925618930998082');" onmouseout="out('47925618930998082');" style=""> 356         } else if (mPublishDialog.isShowing()) {                                                         </span>
<span class="-3990443050467684017" onmouseenter="enter('-3990443050467684017');" onmouseout="out('-3990443050467684017');" style=""> 357             mPublishDialog.dismiss();                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 358             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359         }                                                                                                </span>
<span  style=""> 360                                                                                                          </span>
<span class="970005468838694125" onmouseenter="enter('970005468838694125');" onmouseout="out('970005468838694125');" style=""> 361         updatePublishDialogContent();                                                                    </span>
<span  style=""> 362                                                                                                          </span>
<span class="-3313589573951955195" onmouseenter="enter('-3313589573951955195');" onmouseout="out('-3313589573951955195');" style=""> 363         mPublishDialog.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364     }                                                                                                    </span>
<span  style=""> 365                                                                                                          </span>
<span class="2778692559269198329" onmouseenter="enter('2778692559269198329');" onmouseout="out('2778692559269198329');" style=""> 366     public void updatePublishDialogContent() {                                                           </span>
<span class="-8988333594594696749" onmouseenter="enter('-8988333594594696749');" onmouseout="out('-8988333594594696749');" style=""> 367         if (mPublishDialog == null || mNote == null)                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 368             return;                                                                                      </span>
<span class="2615697251940277419" onmouseenter="enter('2615697251940277419');" onmouseout="out('2615697251940277419');" style=""> 369         Button publishButton = (Button)mPublishDialog.findViewById(R.id.publish_note_button);            </span>
<span class="8546992701790587956" onmouseenter="enter('8546992701790587956');" onmouseout="out('8546992701790587956');" style=""> 370         TextView publishTextView = (TextView)mPublishDialog.findViewById(R.id.publish_url_textview);     </span>
<span  style=""> 371                                                                                                          </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style=""> 372         if (mNote.isPublished()) {                                                                       </span>
<span class="5460167267665796132" onmouseenter="enter('5460167267665796132');" onmouseout="out('5460167267665796132');" style=""> 373             publishButton.setText(&quot;Published&quot;);                                                          </span>
<span class="7499054267928598822" onmouseenter="enter('7499054267928598822');" onmouseout="out('7499054267928598822');" style=""> 374             publishTextView.setTextColor(getResources().getColor(R.color.white));                        </span>
<span class="-2988513566372186325" onmouseenter="enter('-2988513566372186325');" onmouseout="out('-2988513566372186325');" style=""> 375             publishTextView.setText(mNote.getPublishedUrl());                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 376         } else {                                                                                         </span>
<span class="3946830685104663344" onmouseenter="enter('3946830685104663344');" onmouseout="out('3946830685104663344');" style=""> 377             publishButton.setText(&quot;Publish note&quot;);                                                       </span>
<span class="-3553959048380701857" onmouseenter="enter('-3553959048380701857');" onmouseout="out('-3553959048380701857');" style=""> 378             publishTextView.setTextColor(getResources().getColor(R.color.light_gray));                   </span>
<span class="-5437542377379175369" onmouseenter="enter('-5437542377379175369');" onmouseout="out('-5437542377379175369');" style=""> 379             publishTextView.setText(&quot;Note not published&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380         }                                                                                                </span>
<span  style=""> 381                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382     }                                                                                                    </span>
<span  style=""> 383                                                                                                          </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 384     private boolean noteIsEmpty() {                                                                      </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 385         return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386     }                                                                                                    </span>
<span  style=""> 387                                                                                                          </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 388     public void setNote(String noteID){                                                                  </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 389         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390     }                                                                                                    </span>
<span  style=""> 391                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 392     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 393         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 394             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span  style=""> 395                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 396         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 397                                                                                                          </span>
<span class="2077738191995360697" onmouseenter="enter('2077738191995360697');" onmouseout="out('2077738191995360697');" style=""> 398         if (matchOffsets != null)                                                                        </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 399             mMatchOffsets = matchOffsets;                                                                </span>
<span  style=""> 400                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 401         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 402         if (mNote != null) {                                                                             </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 403             if (mIsNewNote &amp;&amp; noteIsEmpty())                                                             </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 404                 mNote.delete();                                                                          </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 405             else if (mNote != null)                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 406                 saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407         }                                                                                                </span>
<span  style=""> 408                                                                                                          </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 409         new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410     }                                                                                                    </span>
<span  style=""> 411                                                                                                          </span>
<span class="-3433185850424102984" onmouseenter="enter('-3433185850424102984');" onmouseout="out('-3433185850424102984');" style=""> 412     public void updateNote(Note updatedNote) {                                                           </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 413         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 414         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 415         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416     }                                                                                                    </span>
<span  style=""> 417                                                                                                          </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 418     public void refreshContent(boolean isNoteUpdate) {                                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 419         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 420             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 421                                                                                                          </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 422             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 422             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span  style=""> 423                                                                                                          </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 424             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 425                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 426             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 427                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 428                 mNote.save();                                                                            </span>
<span  style=""> 429                                                                                                          </span>
<span class="-5094013145931261947" onmouseenter="enter('-5094013145931261947');" onmouseout="out('-5094013145931261947');" style=""><abbr title=" 430                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) {"> 430                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 431                 mContentEditText.setSelection(cursorPosition);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433             }                                                                                            </span>
<span  style=""> 434                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 435             afterTextChanged(mContentEditText.getText());                                                </span>
<span  style=""> 436                                                                                                          </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 437             mPinButton.setChecked(mNote.isPinned());                                                     </span>
<span  style=""> 438                                                                                                          </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 439             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441     }                                                                                                    </span>
<span  style=""> 442                                                                                                          </span>
<span class="-5496131723873966197" onmouseenter="enter('-5496131723873966197');" onmouseout="out('-5496131723873966197');" style=""> 443     public void updateTagList() {                                                                        </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 444         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 445         if (activity == null) return;                                                                    </span>
<span  style=""> 446                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 447         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 448         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449     }                                                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 451     int newCursorLocation(String newText, String oldText, int cursorLocation) {                          </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 452         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 453         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 454         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 455         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 456         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 457         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 458         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 459         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 460                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 461         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 462                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 463         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 464                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 465         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 466         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 467             return newText.length();                                                                     </span>
<span  style=""> 468                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 469         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 470         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 471                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 472         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 473             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 473             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 474             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 474             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 475         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 476             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477         }                                                                                                </span>
<span  style=""> 478                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 479         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 480         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 481             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 482                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 483         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 484         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485     }                                                                                                    </span>
<span  style=""> 486                                                                                                          </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 487     private Runnable autoSaveRunnable = new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 488         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 489         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 490             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 492     };                                                                                                   </span>
<span  style=""> 493                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 494     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 495     public void onTagsChanged(String tagString) {                                                        </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 496         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 497             return;                                                                                      </span>
<span class="-9151826850815990618" onmouseenter="enter('-9151826850815990618');" onmouseout="out('-9151826850815990618');" style=""><abbr title=" 498         if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length())"> 498         if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagStrðŸ”µ</abbr></span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 499             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);          </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 500         else                                                                                             </span>
<span class="8421196898283215417" onmouseenter="enter('8421196898283215417');" onmouseout="out('8421196898283215417');" style=""> 501             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;removed_tag&quot;, &quot;tag_removed_from_note&quot;, null);    </span>
<span  style=""> 502                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 503         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 504         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 505         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 506         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507     }                                                                                                    </span>
<span  style=""> 508                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 509     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 510     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 511         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512     }                                                                                                    </span>
<span  style=""> 513                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 514     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 515     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 516         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 517         // Remove any existing size spans                                                                </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 518         RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 519         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 520             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 522         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 523         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 524             return;                                                                                      </span>
<span class="3283000540261653525" onmouseenter="enter('3283000540261653525');" onmouseout="out('3283000540261653525');" style=""><abbr title=" 525         editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 525         editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526     }                                                                                                    </span>
<span  style=""> 527                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 528     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 529     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span  style=""> 530                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 531         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 532         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 533             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 534             mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535         }                                                                                                </span>
<span  style=""> 536                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 537         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 538         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 539             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 540             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542     }                                                                                                    </span>
<span  style=""> 543                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 544     private void saveAndSyncNote() {                                                                     </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 545         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 546             return;                                                                                      </span>
<span  style=""> 547                                                                                                          </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 548         new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549     }                                                                                                    </span>
<span  style=""> 550                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 551     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 552         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 553             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 554             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 555             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 556             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 557                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 558         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 559             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 560                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562     }                                                                                                    </span>
<span  style=""> 563                                                                                                          </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 564     public void setIsNewNote(boolean isNewNote) {                                                        </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 565         this.mIsNewNote = isNewNote;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566     }                                                                                                    </span>
<span  style=""> 567                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 568     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 569     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 570         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 571             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 572             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 573                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576     }                                                                                                    </span>
<span  style=""> 577                                                                                                          </span>
<span class="-6849832043716883515" onmouseenter="enter('-6849832043716883515');" onmouseout="out('-6849832043716883515');" style=""> 578     public Note getNote() {                                                                              </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 579         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580     }                                                                                                    </span>
<span  style=""> 581                                                                                                          </span>
<span class="5855058962481175207" onmouseenter="enter('5855058962481175207');" onmouseout="out('5855058962481175207');" style=""> 582     public String getNoteContentString() {                                                               </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 583         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 584             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 585         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 586             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588     }                                                                                                    </span>
<span  style=""> 589                                                                                                          </span>
<span class="2486113532203564324" onmouseenter="enter('2486113532203564324');" onmouseout="out('2486113532203564324');" style=""> 590     public String getNoteTagsString() {                                                                  </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 591         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 592             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 593         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 594             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596     }                                                                                                    </span>
<span  style=""> 597                                                                                                          </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 598     // Use spaces in tag autocompletion list                                                             </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 599     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 599     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-tðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 600     public class SpaceTokenizer implements Tokenizer {                                                   </span>
<span  style=""> 601                                                                                                          </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 602         public int findTokenStart(CharSequence text, int cursor) {                                       </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 603             int i = cursor;                                                                              </span>
<span  style=""> 604                                                                                                          </span>
<span class="885050749614268129" onmouseenter="enter('885050749614268129');" onmouseout="out('885050749614268129');" style=""> 605             while (i &gt; 0 &amp;&amp; text.charAt(i - 1) != &#x27; &#x27;) {                                                 </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 606                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607             }                                                                                            </span>
<span class="9056743128114431706" onmouseenter="enter('9056743128114431706');" onmouseout="out('9056743128114431706');" style=""> 608             while (i &lt; cursor &amp;&amp; text.charAt(i) == &#x27; &#x27;) {                                                </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 609                 i++;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610             }                                                                                            </span>
<span  style=""> 611                                                                                                          </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 612             return i;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613         }                                                                                                </span>
<span  style=""> 614                                                                                                          </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 615         public int findTokenEnd(CharSequence text, int cursor) {                                         </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 616             int i = cursor;                                                                              </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 617             int len = text.length();                                                                     </span>
<span  style=""> 618                                                                                                          </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 619             while (i &lt; len) {                                                                            </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 620                 if (text.charAt(i) == &#x27; &#x27;) {                                                             </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 621                     return i;                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 622                 } else {                                                                                 </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 623                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625             }                                                                                            </span>
<span  style=""> 626                                                                                                          </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 627             return len;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628         }                                                                                                </span>
<span  style=""> 629                                                                                                          </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 630         public CharSequence terminateToken(CharSequence text) {                                          </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 631             int i = text.length();                                                                       </span>
<span  style=""> 632                                                                                                          </span>
<span class="-2645617250828763966" onmouseenter="enter('-2645617250828763966');" onmouseout="out('-2645617250828763966');" style=""> 633             while (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                 </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 634                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635             }                                                                                            </span>
<span  style=""> 636                                                                                                          </span>
<span class="-6208188263403401654" onmouseenter="enter('-6208188263403401654');" onmouseout="out('-6208188263403401654');" style=""> 637             if (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                    </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 638                 return text;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 639             } else {                                                                                     </span>
<span class="-8407561526953236331" onmouseenter="enter('-8407561526953236331');" onmouseout="out('-8407561526953236331');" style=""> 640                 if (text instanceof Spanned) {                                                           </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 641                     SpannableString sp = new SpannableString(text + &quot; &quot;);                                </span>
<span class="4069757121373026619" onmouseenter="enter('4069757121373026619');" onmouseout="out('4069757121373026619');" style=""> 642                     TextUtils.copySpansFrom((Spanned) text, 0, text.length(),                            </span>
<span class="-4923471023181178896" onmouseenter="enter('-4923471023181178896');" onmouseout="out('-4923471023181178896');" style=""> 643                             Object.class, sp, 0);                                                        </span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 644                     return sp;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 645                 } else {                                                                                 </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 646                     return text + &quot; &quot;;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 652     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 653                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 654         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 655         protected void onPreExecute() {                                                                  </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 656             mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                         </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 657             mIsLoadingNote = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658         }                                                                                                </span>
<span  style=""> 659                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 660         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 661         protected Void doInBackground(String... args) {                                                  </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 662             if (getActivity() == null) {                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 663                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664             }                                                                                            </span>
<span  style=""> 665                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 666             String noteID = args[0];                                                                     </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 667             Simplenote application = (Simplenote) getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 668             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 669             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 670                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 671                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 672                 if (getActivity() instanceof NotesActivity) {                                            </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style=""> 673                     ((NotesActivity) getActivity()).setCurrentNote(mNote);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 675             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 676                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 678             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679         }                                                                                                </span>
<span  style=""> 680                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 681         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 682         protected void onPostExecute(Void nada) {                                                        </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style=""> 683             if (getActivity() == null || getActivity().isFinishing())                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 684                 return;                                                                                  </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 685             refreshContent(false);                                                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 686             if (mMatchOffsets != null) {                                                                 </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 687                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 687                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 688                 mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689             }                                                                                            </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 690             mContentEditText.addTextChangedListener(NoteEditorFragment.this);                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 691             if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                         </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 692                 // Show soft keyboard                                                                    </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 693                 mContentEditText.requestFocus();                                                         </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 694                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 695                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 696                     public void run() {                                                                  </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 697                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 697                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSysðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 698                         if (inputMethodManager != null)                                                  </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 699                             inputMethodManager.showSoftInput(mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 701                 }, 100);                                                                                 </span>
<span  style=""> 702                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703             }                                                                                            </span>
<span  style=""> 704                                                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 705             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span  style=""> 706                                                                                                          </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 707             mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 708         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709     }                                                                                                    </span>
<span  style=""> 710                                                                                                          </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 711     private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                     </span>
<span  style=""> 712                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 713         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 714         protected Void doInBackground(Void... args) {                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 715             saveNote();                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 716             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717         }                                                                                                </span>
<span  style=""> 718                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 719         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 720         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style=""> 721             if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                 </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style=""> 722                 // Update links                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 723                 SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726     }                                                                                                    </span>
<span  style=""> 727                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style=""> 728     private void saveNote() {                                                                            </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 729         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 730             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731         }                                                                                                </span>
<span  style=""> 732                                                                                                          </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style=""> 733         String content = getNoteContentString();                                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 734         String tagString = getNoteTagsString();                                                          </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 735         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                       </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 736             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 737             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 738             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 739             // Send pinned event to google analytics if changed                                          </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 740             mNote.setPinned(mPinButton.isChecked());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 741             mNote.save();                                                                                </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 742             if (getActivity() != null) {                                                                 </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 743                 Tracker tracker = EasyTracker.getTracker();                                              </span>
<span class="7411383674080963289" onmouseenter="enter('7411383674080963289');" onmouseout="out('7411383674080963289');" style=""> 744                 if (mNote.isPinned() != mPinButton.isChecked())                                          </span>
<span class="1805524535551115774" onmouseenter="enter('1805524535551115774');" onmouseout="out('1805524535551115774');" style=""><abbr title=" 745                     tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 745                     tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;,ðŸ”µ</abbr></span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 746                 tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 748         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749     }                                                                                                    </span>
<span  style=""> 750                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 751     // Contextual action bar for dealing with links                                                      </span>
<span class="-23103958784499667" onmouseenter="enter('-23103958784499667');" onmouseout="out('-23103958784499667');" style=""> 752     private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                        </span>
<span  style=""> 753                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 754         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 755         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 756         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 757             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 758             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-5537764272582475285" onmouseenter="enter('-5537764272582475285');" onmouseout="out('-5537764272582475285');" style=""> 759             if (inflater != null){                                                                       </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 760                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 761                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 762                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style=""> 763                 if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 764                     mode.setTitleOptionalHint(false);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 767             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768         }                                                                                                </span>
<span  style=""> 769                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 770         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 771         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 772         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 773         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 774             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775         }                                                                                                </span>
<span  style=""> 776                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 777         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 778         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 779         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 780             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 781                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 782                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 783                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 784                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 785                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 786                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 787                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 788                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 789                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 791                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 793                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 794                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 795                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 796                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 796                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(ConðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style=""> 797                         ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);   </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 798                         clipboard.setPrimaryClip(clip);                                                  </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title=" 799                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 799                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 800                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 802                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 803                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 804                     if (mLinkText != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 805                         try {                                                                            </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 806                             Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);         </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 807                             shareIntent.setType(&quot;text/plain&quot;);                                           </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style=""> 808                             shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);          </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 809                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 809                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.stðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 810                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 811                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812                         }                                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 813                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 815                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 816                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 817                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819         }                                                                                                </span>
<span  style=""> 820                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 821         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 822         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 823         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 824             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 826     };                                                                                                   </span>
<span  style=""> 827                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style=""> 828     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style=""> 829     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 830     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style=""> 831     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style=""> 832         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style=""> 833             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style=""> 834             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 835                 return;                                                                                  </span>
<span  style=""> 836                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style=""> 837             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style=""> 838             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style=""> 839                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style=""> 840                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title=" 841                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();"> 841                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 842                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 843                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 844                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 845                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846                 }                                                                                        </span>
<span  style=""> 847                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style=""> 848                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 849                 if (getActivity() != null) {                                                             </span>
<span class="-7828194884341615795" onmouseenter="enter('-7828194884341615795');" onmouseout="out('-7828194884341615795');" style=""> 850                     mActionMode = getActivity().startActionMode(mActionModeCallback);                    </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 851                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 852                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853                     }                                                                                    </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 854                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 856             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 857                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 858                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 860         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 861             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 862             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 864     }                                                                                                    </span>
<span  style=""> 865                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style=""> 866     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style=""> 867         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style=""> 868             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="4608769072092705594" onmouseenter="enter('4608769072092705594');" onmouseout="out('4608769072092705594');" style=""> 869                 mViewLinkMenuItem.setIcon(mCallIconResId);                                               </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style=""> 870                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style=""> 871             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="112818067677115399" onmouseenter="enter('112818067677115399');" onmouseout="out('112818067677115399');" style=""> 872                 mViewLinkMenuItem.setIcon(mEmailIconResId);                                              </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style=""> 873                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style=""> 874             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-5464734295170160558" onmouseenter="enter('-5464734295170160558');" onmouseout="out('-5464734295170160558');" style=""> 875                 mViewLinkMenuItem.setIcon(mMapIconResId);                                                </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style=""> 876                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 877             } else {                                                                                     </span>
<span class="-4632312324298999235" onmouseenter="enter('-4632312324298999235');" onmouseout="out('-4632312324298999235');" style=""> 878                 mViewLinkMenuItem.setIcon(mWebIconResId);                                                </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style=""> 879                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 882     }                                                                                                    </span>
<span  style=""> 883                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 884     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style=""> 885     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style=""> 886                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887     }                                                                                                    </span>
<span  style=""> 888                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 889     @Override                                                                                            </span>
<span class="-391573795721253888" onmouseenter="enter('-391573795721253888');" onmouseout="out('-391573795721253888');" style=""> 890     public void onChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {      </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style=""> 891         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style=""> 892             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 893                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style=""> 894                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 895                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 896                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 897                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 898                             public void run() {                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style=""> 899                                 updateNote(updatedNote);                                                 </span>
<span class="970005468838694125" onmouseenter="enter('970005468838694125');" onmouseout="out('970005468838694125');" style=""> 900                                 updatePublishDialogContent();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 902                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 904                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 905                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 907             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909     }                                                                                                    </span>
<span  style=""> 910                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 911     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style=""> 912     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style=""> 913         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 914     }                                                                                                    </span>
<span  style=""> 915                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 916     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 917     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style=""> 918         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style=""> 919         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 920             return;                                                                                      </span>
<span  style=""> 921                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style=""> 922         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style=""> 923         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 924             return;                                                                                      </span>
<span  style=""> 925                                                                                                          </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style=""> 926         note.setContent(getNoteContentString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1440843073414233844" onmouseenter="enter('-1440843073414233844');" onmouseout="out('-1440843073414233844');" style="">   4 import android.app.Dialog;                                                                               </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   5 import android.app.Fragment;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   6 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   7 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   8 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   9 import android.content.Intent;                                                                           </span>
<span class="-840652079464298178" onmouseenter="enter('-840652079464298178');" onmouseout="out('-840652079464298178');" style="">  10 import android.content.res.TypedArray;                                                                   </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  11 import android.database.Cursor;                                                                          </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  12 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  13 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  14 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  15 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  16 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  17 import android.text.Editable;                                                                            </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  18 import android.text.SpannableString;                                                                     </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  19 import android.text.Spanned;                                                                             </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  20 import android.text.TextUtils;                                                                           </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  21 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  22 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  23 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  24 import android.text.util.Linkify;                                                                        </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  25 import android.view.ActionMode;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  26 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  27 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  28 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  29 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  30 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  31 import android.view.ViewGroup;                                                                           </span>
<span class="8570405338525080773" onmouseenter="enter('8570405338525080773');" onmouseout="out('8570405338525080773');" style="">  32 import android.view.Window;                                                                              </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="">  33 import android.view.WindowManager;                                                                       </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  34 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1133222559545955472" onmouseenter="enter('1133222559545955472');" onmouseout="out('1133222559545955472');" style="">  35 import android.widget.Button;                                                                            </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37 import android.widget.LinearLayout;                                                                      </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  38 import android.widget.MultiAutoCompleteTextView.Tokenizer;                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  39 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  40 import android.widget.Toast;                                                                             </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  41 import android.widget.ToggleButton;                                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  42 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  43 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  44 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="7629762131910067592" onmouseenter="enter('7629762131910067592');" onmouseout="out('7629762131910067592');" style="">  45 import com.automattic.simplenote.utils.SimplenoteEditText;                                               </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  46 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  47 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  48 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  49 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="">  50 import com.automattic.simplenote.utils.Typefaces;                                                        </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  51 import com.google.analytics.tracking.android.EasyTracker;                                                </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  52 import com.google.analytics.tracking.android.Tracker;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  53 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  54 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  55 import com.simperium.client.Query;                                                                       </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  56 import java.util.Calendar;                                                                               </span>
<span  style="">  57                                                                                                          </span>
<span  style="">  58                                                                                                          </span>
<span class="2103530198636224534" onmouseenter="enter('2103530198636224534');" onmouseout="out('2103530198636224534');" style=""><abbr title="  59 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAddedListener , View.OnFocusChangeListener , SimplenoteEditText.OnSelectionChangedListener {">  59 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAdðŸ”µ</abbr></span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  60     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  61                                                                                                          </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  62     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span  style="">  63                                                                                                          </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  64     static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span  style="">  65                                                                                                          </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  66     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style="">  67                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  68     private Note mNote;                                                                                  </span>
<span  style="">  69                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  70     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style="">  71                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  72     private SimplenoteEditText mContentEditText;                                                         </span>
<span  style="">  73                                                                                                          </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  74     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span  style="">  75                                                                                                          </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  76     private ToggleButton mPinButton;                                                                     </span>
<span  style="">  77                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  78     private Handler mAutoSaveHandler;                                                                    </span>
<span  style="">  79                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  80     private LinearLayout mPlaceholderView;                                                               </span>
<span  style="">  81                                                                                                          </span>
<span class="6490526833736257609" onmouseenter="enter('6490526833736257609');" onmouseout="out('6490526833736257609');" style="">  82     private Dialog mPublishDialog;                                                                       </span>
<span  style="">  83                                                                                                          </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  84     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span  style="">  85                                                                                                          </span>
<span class="-5063638822987784427" onmouseenter="enter('-5063638822987784427');" onmouseout="out('-5063638822987784427');" style="">  86     private boolean mIsNewNote;                                                                          </span>
<span  style="">  87                                                                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style="">  88     private boolean mIsLoadingNote;                                                                      </span>
<span  style="">  89                                                                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style="">  90     private ActionMode mActionMode;                                                                      </span>
<span  style="">  91                                                                                                          </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style="">  92     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span  style="">  93                                                                                                          </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style="">  94     private String mLinkUrl;                                                                             </span>
<span  style="">  95                                                                                                          </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style="">  96     private String mLinkText;                                                                            </span>
<span  style="">  97                                                                                                          </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style="">  98     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span  style="">  99                                                                                                          </span>
<span class="-1854523128072080027" onmouseenter="enter('-1854523128072080027');" onmouseout="out('-1854523128072080027');" style=""> 100     private int mEmailIconResId;                                                                         </span>
<span  style=""> 101                                                                                                          </span>
<span class="-2945997385631216974" onmouseenter="enter('-2945997385631216974');" onmouseout="out('-2945997385631216974');" style=""> 102     private int mWebIconResId;                                                                           </span>
<span  style=""> 103                                                                                                          </span>
<span class="-6818745133087132397" onmouseenter="enter('-6818745133087132397');" onmouseout="out('-6818745133087132397');" style=""> 104     private int mMapIconResId;                                                                           </span>
<span  style=""> 105                                                                                                          </span>
<span class="-5534304236570932887" onmouseenter="enter('-5534304236570932887');" onmouseout="out('-5534304236570932887');" style=""> 106     private int mCallIconResId;                                                                          </span>
<span  style=""> 107                                                                                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 108     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span  style=""> 109                                                                                                          </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 110     private String mMatchOffsets;                                                                        </span>
<span  style=""> 111                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 112     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 113      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 114      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 115      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 116     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117     }                                                                                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 119     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 120     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 121         super.onCreate(savedInstanceState);                                                              </span>
<span  style=""> 122                                                                                                          </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 123         if (getActivity() != null) {                                                                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 124             Simplenote currentApp = (Simplenote) getActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 125             mNotesBucket = currentApp.getNotesBucket();                                                  </span>
<span  style=""> 126                                                                                                          </span>
<span class="6390134422937918444" onmouseenter="enter('6390134422937918444');" onmouseout="out('6390134422937918444');" style=""><abbr title=" 127             TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionBarIconWeb, R.attr.actionBarIconMap, R.attr.actionBarIconCall});"> 127             TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.atðŸ”µ</abbr></span>
<span class="-368005650607593546" onmouseenter="enter('-368005650607593546');" onmouseout="out('-368005650607593546');" style=""> 128             if (a != null) {                                                                             </span>
<span class="156477903530707073" onmouseenter="enter('156477903530707073');" onmouseout="out('156477903530707073');" style=""> 129                 mEmailIconResId = a.getResourceId(0, 0);                                                 </span>
<span class="2237960387607406884" onmouseenter="enter('2237960387607406884');" onmouseout="out('2237960387607406884');" style=""> 130                 mWebIconResId = a.getResourceId(1, 0);                                                   </span>
<span class="-2587404817224189880" onmouseenter="enter('-2587404817224189880');" onmouseout="out('-2587404817224189880');" style=""> 131                 mMapIconResId = a.getResourceId(2, 0);                                                   </span>
<span class="7397862531502718567" onmouseenter="enter('7397862531502718567');" onmouseout="out('7397862531502718567');" style=""> 132                 mCallIconResId = a.getResourceId(3, 0);                                                  </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style=""> 133                 a.recycle();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135         }                                                                                                </span>
<span  style=""> 136                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 137         mAutoSaveHandler = new Handler();                                                                </span>
<span  style=""> 138                                                                                                          </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 139         mMatchHighlighter = new TextHighlighter(getActivity(),                                           </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 140                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 140                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="3992270686517948303" onmouseenter="enter('3992270686517948303');" onmouseout="out('3992270686517948303');" style=""> 141         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0){                              </span>
<span  style=""> 142                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 144             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 145                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 146                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 147                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148             }                                                                                            </span>
<span  style=""> 149                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 150             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 151             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 152                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 153                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154             }                                                                                            </span>
<span  style=""> 155                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 156             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 157             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 158                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159             }                                                                                            </span>
<span  style=""> 160                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 161             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 162             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 163                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 164                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 165                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 166                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 167                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 168                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 169                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 170                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 171                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 172                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 172                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.forðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 173                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 175         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176     }                                                                                                    </span>
<span  style=""> 177                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 178     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 179     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 180         setHasOptionsMenu(true);                                                                         </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 181         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="-1364901824274913901" onmouseenter="enter('-1364901824274913901');" onmouseout="out('-1364901824274913901');" style=""> 182         mContentEditText = ((SimplenoteEditText) (rootView.findViewById(R.id.note_content)));            </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 183         if (getActivity() != null) {                                                                     </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style=""><abbr title=" 184             mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));"> 184             mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185         }                                                                                                </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 186         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="4545655727599787961" onmouseenter="enter('4545655727599787961');" onmouseout="out('4545655727599787961');" style=""> 187         mTagView = ((TagsMultiAutoCompleteTextView) (rootView.findViewById(R.id.tag_view)));             </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 188         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style=""> 189         mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));</span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 190         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 191         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="1577312702828315360" onmouseenter="enter('1577312702828315360');" onmouseout="out('1577312702828315360');" style=""> 192         mPinButton = ((ToggleButton) (rootView.findViewById(R.id.pinButton)));                           </span>
<span class="-6233419192957625397" onmouseenter="enter('-6233419192957625397');" onmouseout="out('-6233419192957625397');" style=""> 193         mPinButton.setOnClickListener(new View.OnClickListener() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 194             @Override                                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 195             public void onClick(View v) {                                                                </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style=""> 196                 if (mPinButton.isChecked()) {                                                            </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style=""> 197                     // Friendly message to the user as to what this button does.                         </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style=""> 198                     Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 201         });                                                                                              </span>
<span class="8859941692086049893" onmouseenter="enter('8859941692086049893');" onmouseout="out('8859941692086049893');" style=""> 202         mPlaceholderView = ((LinearLayout) (rootView.findViewById(R.id.placeholder)));                   </span>
<span class="721933567475076710" onmouseenter="enter('721933567475076710');" onmouseout="out('721933567475076710');" style=""><abbr title=" 203         if (((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) (getActivity())).isLargeScreenLandscape()) &amp;&amp; (mNote == null)) {"> 203         if (((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) (getActivity())).isLargeScreenLðŸ”µ</abbr></span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 204             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205         }                                                                                                </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 206         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 207         // Load note if we were passed a note Id                                                         </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 208         Bundle arguments = getArguments();                                                               </span>
<span class="4011393863908935220" onmouseenter="enter('4011393863908935220');" onmouseout="out('4011393863908935220');" style=""> 209         if ((arguments != null) &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                 </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 210             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 211             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 212                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213             }                                                                                            </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 214             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 215             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216         }                                                                                                </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 217         return rootView;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218     }                                                                                                    </span>
<span  style=""> 219                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 220     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 221     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 222         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 223         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 224         mNotesBucket.addListener(this);                                                                  </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 225         mTagView.setOnTagAddedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226     }                                                                                                    </span>
<span  style=""> 227                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 228     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 229     public void onPause() {                                                                              </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 230         mNotesBucket.removeListener(this);                                                               </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 231         // Hide soft keyboard if it is showing...                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 232         if (getActivity() != null) {                                                                     </span>
<span class="-3252807025427255436" onmouseenter="enter('-3252807025427255436');" onmouseout="out('-3252807025427255436');" style=""><abbr title=" 233             InputMethodManager inputMethodManager = ((InputMethodManager) (getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)));"> 233             InputMethodManager inputMethodManager = ((InputMethodManager) (getActivity().getSystemServiceðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 234             if (inputMethodManager != null) {                                                            </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 235                 inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 238         // Delete the note if it is new and has empty fields                                             </span>
<span class="-5314156126021161690" onmouseenter="enter('-5314156126021161690');" onmouseout="out('-5314156126021161690');" style=""> 239         if (((mNote != null) &amp;&amp; mIsNewNote) &amp;&amp; noteIsEmpty()) {                                          </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 240             mNote.delete();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 241         } else {                                                                                         </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 242             saveNote();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243         }                                                                                                </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 244         mTagView.setOnTagAddedListener(null);                                                            </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 245         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 246             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247         }                                                                                                </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 248         mHighlighter.stop();                                                                             </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 249         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250     }                                                                                                    </span>
<span  style=""> 251                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 252     @Override                                                                                            </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style=""> 253     public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                  </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 254         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 255                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 256         if (mNote != null) {                                                                             </span>
<span class="5214019728761898324" onmouseenter="enter('5214019728761898324');" onmouseout="out('5214019728761898324');" style=""> 257             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_published_note);               </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 258             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 259                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 260             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 261             if (mNote.isDeleted())                                                                       </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 262                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 263             else                                                                                         </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 264                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265         }                                                                                                </span>
<span  style=""> 266                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 267         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268     }                                                                                                    </span>
<span  style=""> 269                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 270     @Override                                                                                            </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style=""> 271     public boolean onOptionsItemSelected(MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 272         switch (item.getItemId()) {                                                                      </span>
<span class="2851142166727911529" onmouseenter="enter('2851142166727911529');" onmouseout="out('2851142166727911529');" style=""> 273             case R.id.menu_view_published_note:                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 274                 if (mNote != null) {                                                                     </span>
<span class="2186681076883129445" onmouseenter="enter('2186681076883129445');" onmouseout="out('2186681076883129445');" style=""> 275                     showNotePublishDialog();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 277                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 278             case R.id.menu_share:                                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 279                 if (mNote != null) {                                                                     </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 280                     Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                 </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 281                     shareIntent.setType(&quot;text/plain&quot;);                                                   </span>
<span class="2565640458837084796" onmouseenter="enter('2565640458837084796');" onmouseout="out('2565640458837084796');" style=""> 282                     shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mNote.getContent());         </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 283                     startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 283                     startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.shaðŸ”µ</abbr></span>
<span class="-291628727976592463" onmouseenter="enter('-291628727976592463');" onmouseout="out('-291628727976592463');" style=""><abbr title=" 284                     EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;shared_note&quot;, &quot;action_bar_share_button&quot;, null);"> 284                     EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;shared_note&quot;, &quot;action_bar_share_button&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 286                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 287             case R.id.menu_delete:                                                                       </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 288                 if (mNote != null) {                                                                     </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style=""> 289                     mNote.setDeleted(!mNote.isDeleted());                                                </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 290                     mNote.setModificationDate(Calendar.getInstance());                                   </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 291                     mNote.save();                                                                        </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style=""> 292                     Intent resultIntent = new Intent();                                                  </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 293                     if (mNote.isDeleted())                                                               </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style=""> 294                         resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());      </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style=""> 295                     getActivity().setResult(Activity.RESULT_OK, resultIntent);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296                 }                                                                                        </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 297                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 298                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 299             case android.R.id.home:                                                                      </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 300                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 301                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 302             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 303                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305     }                                                                                                    </span>
<span  style=""> 306                                                                                                          </span>
<span class="-6798341237622548838" onmouseenter="enter('-6798341237622548838');" onmouseout="out('-6798341237622548838');" style=""> 307     private void showNotePublishDialog() {                                                               </span>
<span class="-1293040003772175228" onmouseenter="enter('-1293040003772175228');" onmouseout="out('-1293040003772175228');" style=""> 308         if (mPublishDialog == null) {                                                                    </span>
<span class="-6935058658438695871" onmouseenter="enter('-6935058658438695871');" onmouseout="out('-6935058658438695871');" style=""> 309             mPublishDialog = new Dialog(getActivity(), R.style.SimplenotePublishDialog);                 </span>
<span class="84367104298890978" onmouseenter="enter('84367104298890978');" onmouseout="out('84367104298890978');" style=""> 310             mPublishDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);                                </span>
<span class="-8693338580555501068" onmouseenter="enter('-8693338580555501068');" onmouseout="out('-8693338580555501068');" style=""> 311             mPublishDialog.setContentView(R.layout.publish_settings);                                    </span>
<span  style=""> 312                                                                                                          </span>
<span class="-8841152936066762125" onmouseenter="enter('-8841152936066762125');" onmouseout="out('-8841152936066762125');" style=""><abbr title=" 313             mPublishDialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);"> 313             mPublishDialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LðŸ”µ</abbr></span>
<span  style=""> 314                                                                                                          </span>
<span class="2615697251940277419" onmouseenter="enter('2615697251940277419');" onmouseout="out('2615697251940277419');" style=""> 315             Button publishButton = (Button)mPublishDialog.findViewById(R.id.publish_note_button);        </span>
<span class="8546992701790587956" onmouseenter="enter('8546992701790587956');" onmouseout="out('8546992701790587956');" style=""> 316             TextView publishTextView = (TextView)mPublishDialog.findViewById(R.id.publish_url_textview); </span>
<span  style=""> 317                                                                                                          </span>
<span class="-7759606836018483289" onmouseenter="enter('-7759606836018483289');" onmouseout="out('-7759606836018483289');" style=""> 318             publishButton.setOnClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 319                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 320                 public void onClick(View v) {                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 321                     if (mNote != null) {                                                                 </span>
<span class="1314484573565824514" onmouseenter="enter('1314484573565824514');" onmouseout="out('1314484573565824514');" style=""> 322                         Button button = (Button) v;                                                      </span>
<span class="5563864695602119989" onmouseenter="enter('5563864695602119989');" onmouseout="out('5563864695602119989');" style=""> 323                         boolean newPublishedStatus = !mNote.isPublished();                               </span>
<span class="-3191807331109519265" onmouseenter="enter('-3191807331109519265');" onmouseout="out('-3191807331109519265');" style=""> 324                         mNote.setPublished(newPublishedStatus);                                          </span>
<span class="-6701970919306036436" onmouseenter="enter('-6701970919306036436');" onmouseout="out('-6701970919306036436');" style=""> 325                         if (newPublishedStatus) {                                                        </span>
<span class="3827010637140387680" onmouseenter="enter('3827010637140387680');" onmouseout="out('3827010637140387680');" style=""> 326                             button.setText(&quot;Publishing...&quot;);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 327                         } else {                                                                         </span>
<span class="5904425248947527288" onmouseenter="enter('5904425248947527288');" onmouseout="out('5904425248947527288');" style=""> 328                             button.setText(&quot;Publish&quot;);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329                         }                                                                                </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 330                         mNote.save();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 333             });                                                                                          </span>
<span  style=""> 334                                                                                                          </span>
<span class="4045844893437359317" onmouseenter="enter('4045844893437359317');" onmouseout="out('4045844893437359317');" style=""> 335             publishTextView.setOnClickListener(new View.OnClickListener() {                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 336                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 337                 public void onClick(View v) {                                                            </span>
<span class="1552014347051890626" onmouseenter="enter('1552014347051890626');" onmouseout="out('1552014347051890626');" style=""> 338                     TextView textView = (TextView) v;                                                    </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 339                     ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 339                     ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(ContextðŸ”µ</abbr></span>
<span class="5839586414586808613" onmouseenter="enter('5839586414586808613');" onmouseout="out('5839586414586808613');" style=""><abbr title=" 340                     ClipData clip = ClipData.newPlainText(getString(R.string.app_name),textView.getText());"> 340                     ClipData clip = ClipData.newPlainText(getString(R.string.app_name),textView.getText()ðŸ”µ</abbr></span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 341                     clipboard.setPrimaryClip(clip);                                                      </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title=" 342                     Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 342                     Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).shðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 344             });                                                                                          </span>
<span class="47925618930998082" onmouseenter="enter('47925618930998082');" onmouseout="out('47925618930998082');" style=""> 345         } else if (mPublishDialog.isShowing()) {                                                         </span>
<span class="-3990443050467684017" onmouseenter="enter('-3990443050467684017');" onmouseout="out('-3990443050467684017');" style=""> 346             mPublishDialog.dismiss();                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 347             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348         }                                                                                                </span>
<span  style=""> 349                                                                                                          </span>
<span class="970005468838694125" onmouseenter="enter('970005468838694125');" onmouseout="out('970005468838694125');" style=""> 350         updatePublishDialogContent();                                                                    </span>
<span  style=""> 351                                                                                                          </span>
<span class="-3313589573951955195" onmouseenter="enter('-3313589573951955195');" onmouseout="out('-3313589573951955195');" style=""> 352         mPublishDialog.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353     }                                                                                                    </span>
<span  style=""> 354                                                                                                          </span>
<span class="2778692559269198329" onmouseenter="enter('2778692559269198329');" onmouseout="out('2778692559269198329');" style=""> 355     public void updatePublishDialogContent() {                                                           </span>
<span class="-8988333594594696749" onmouseenter="enter('-8988333594594696749');" onmouseout="out('-8988333594594696749');" style=""> 356         if (mPublishDialog == null || mNote == null)                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 357             return;                                                                                      </span>
<span class="2615697251940277419" onmouseenter="enter('2615697251940277419');" onmouseout="out('2615697251940277419');" style=""> 358         Button publishButton = (Button)mPublishDialog.findViewById(R.id.publish_note_button);            </span>
<span class="8546992701790587956" onmouseenter="enter('8546992701790587956');" onmouseout="out('8546992701790587956');" style=""> 359         TextView publishTextView = (TextView)mPublishDialog.findViewById(R.id.publish_url_textview);     </span>
<span  style=""> 360                                                                                                          </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style=""> 361         if (mNote.isPublished()) {                                                                       </span>
<span class="5460167267665796132" onmouseenter="enter('5460167267665796132');" onmouseout="out('5460167267665796132');" style=""> 362             publishButton.setText(&quot;Published&quot;);                                                          </span>
<span class="7499054267928598822" onmouseenter="enter('7499054267928598822');" onmouseout="out('7499054267928598822');" style=""> 363             publishTextView.setTextColor(getResources().getColor(R.color.white));                        </span>
<span class="-2988513566372186325" onmouseenter="enter('-2988513566372186325');" onmouseout="out('-2988513566372186325');" style=""> 364             publishTextView.setText(mNote.getPublishedUrl());                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 365         } else {                                                                                         </span>
<span class="3946830685104663344" onmouseenter="enter('3946830685104663344');" onmouseout="out('3946830685104663344');" style=""> 366             publishButton.setText(&quot;Publish note&quot;);                                                       </span>
<span class="-3553959048380701857" onmouseenter="enter('-3553959048380701857');" onmouseout="out('-3553959048380701857');" style=""> 367             publishTextView.setTextColor(getResources().getColor(R.color.light_gray));                   </span>
<span class="-5437542377379175369" onmouseenter="enter('-5437542377379175369');" onmouseout="out('-5437542377379175369');" style=""> 368             publishTextView.setText(&quot;Note not published&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369         }                                                                                                </span>
<span  style=""> 370                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371     }                                                                                                    </span>
<span  style=""> 372                                                                                                          </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 373     private boolean noteIsEmpty() {                                                                      </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 374         return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375     }                                                                                                    </span>
<span  style=""> 376                                                                                                          </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 377     public void setNote(String noteID){                                                                  </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 378         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379     }                                                                                                    </span>
<span  style=""> 380                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 381     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 382         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 383             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span  style=""> 384                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 385         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 386                                                                                                          </span>
<span class="2077738191995360697" onmouseenter="enter('2077738191995360697');" onmouseout="out('2077738191995360697');" style=""> 387         if (matchOffsets != null)                                                                        </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 388             mMatchOffsets = matchOffsets;                                                                </span>
<span  style=""> 389                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 390         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 391         if (mNote != null) {                                                                             </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 392             if (mIsNewNote &amp;&amp; noteIsEmpty())                                                             </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 393                 mNote.delete();                                                                          </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 394             else if (mNote != null)                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 395                 saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396         }                                                                                                </span>
<span  style=""> 397                                                                                                          </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 398         new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399     }                                                                                                    </span>
<span  style=""> 400                                                                                                          </span>
<span class="-3433185850424102984" onmouseenter="enter('-3433185850424102984');" onmouseout="out('-3433185850424102984');" style=""> 401     public void updateNote(Note updatedNote) {                                                           </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 402         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 403         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 404         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405     }                                                                                                    </span>
<span  style=""> 406                                                                                                          </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 407     public void refreshContent(boolean isNoteUpdate) {                                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 408         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 409             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 410             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 410             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 411             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 412             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 413                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 414                 mNote.save();                                                                            </span>
<span class="-6924998961603698485" onmouseenter="enter('-6924998961603698485');" onmouseout="out('-6924998961603698485');" style=""><abbr title=" 415                 if (mContentEditText.hasFocus() &amp;&amp; (cursorPosition != mContentEditText.getSelectionEnd())) {"> 415                 if (mContentEditText.hasFocus() &amp;&amp; (cursorPosition != mContentEditText.getSelectionEnd())ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 416                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418             }                                                                                            </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 419             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 420             mPinButton.setChecked(mNote.isPinned());                                                     </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 421             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423     }                                                                                                    </span>
<span  style=""> 424                                                                                                          </span>
<span class="-5496131723873966197" onmouseenter="enter('-5496131723873966197');" onmouseout="out('-5496131723873966197');" style=""> 425     public void updateTagList() {                                                                        </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 426         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 427         if (activity == null) return;                                                                    </span>
<span  style=""> 428                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 429         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 430         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431     }                                                                                                    </span>
<span  style=""> 432                                                                                                          </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 433     int newCursorLocation(String newText, String oldText, int cursorLocation) {                          </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 434         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 435         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 436         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 437         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 438         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 439         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 440         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 441         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 442                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 443         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 444                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 445         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 446                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 447         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 448         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 449             return newText.length();                                                                     </span>
<span  style=""> 450                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 451         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 452         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 453                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 454         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 455             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 455             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 456             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 456             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 457         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 458             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459         }                                                                                                </span>
<span  style=""> 460                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 461         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 462         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 463             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 464                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 465         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 466         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467     }                                                                                                    </span>
<span  style=""> 468                                                                                                          </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 469     private Runnable autoSaveRunnable = new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 470         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 471         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 472             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 474     };                                                                                                   </span>
<span  style=""> 475                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 476     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 477     public void onTagsChanged(String tagString) {                                                        </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 478         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 479             return;                                                                                      </span>
<span class="-9151826850815990618" onmouseenter="enter('-9151826850815990618');" onmouseout="out('-9151826850815990618');" style=""><abbr title=" 480         if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length())"> 480         if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagStrðŸ”µ</abbr></span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 481             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);          </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 482         else                                                                                             </span>
<span class="8421196898283215417" onmouseenter="enter('8421196898283215417');" onmouseout="out('8421196898283215417');" style=""> 483             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;removed_tag&quot;, &quot;tag_removed_from_note&quot;, null);    </span>
<span  style=""> 484                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 485         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 486         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 487         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 488         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489     }                                                                                                    </span>
<span  style=""> 490                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 491     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 492     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 493         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494     }                                                                                                    </span>
<span  style=""> 495                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 496     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 497     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 498         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 499         // Remove any existing size spans                                                                </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 500         RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 501         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 502             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 504         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 505         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 506             return;                                                                                      </span>
<span class="3283000540261653525" onmouseenter="enter('3283000540261653525');" onmouseout="out('3283000540261653525');" style=""><abbr title=" 507         editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 507         editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508     }                                                                                                    </span>
<span  style=""> 509                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 510     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 511     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span  style=""> 512                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 513         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 514         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 515             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 516             mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517         }                                                                                                </span>
<span  style=""> 518                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 519         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 520         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 521             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 522             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524     }                                                                                                    </span>
<span  style=""> 525                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 526     private void saveAndSyncNote() {                                                                     </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 527         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 528             return;                                                                                      </span>
<span  style=""> 529                                                                                                          </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 530         new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531     }                                                                                                    </span>
<span  style=""> 532                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 533     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 534         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 535             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 536             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 537             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 538             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 539                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 540         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 541             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 542                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544     }                                                                                                    </span>
<span  style=""> 545                                                                                                          </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 546     public void setIsNewNote(boolean isNewNote) {                                                        </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 547         this.mIsNewNote = isNewNote;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548     }                                                                                                    </span>
<span  style=""> 549                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 550     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 551     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 552         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 553             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 554             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 555                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558     }                                                                                                    </span>
<span  style=""> 559                                                                                                          </span>
<span class="-6849832043716883515" onmouseenter="enter('-6849832043716883515');" onmouseout="out('-6849832043716883515');" style=""> 560     public Note getNote() {                                                                              </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 561         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562     }                                                                                                    </span>
<span  style=""> 563                                                                                                          </span>
<span class="5855058962481175207" onmouseenter="enter('5855058962481175207');" onmouseout="out('5855058962481175207');" style=""> 564     public String getNoteContentString() {                                                               </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 565         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 566             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 567         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 568             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570     }                                                                                                    </span>
<span  style=""> 571                                                                                                          </span>
<span class="2486113532203564324" onmouseenter="enter('2486113532203564324');" onmouseout="out('2486113532203564324');" style=""> 572     public String getNoteTagsString() {                                                                  </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 573         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 574             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 575         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 576             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578     }                                                                                                    </span>
<span  style=""> 579                                                                                                          </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 580     // Use spaces in tag autocompletion list                                                             </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 581     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 581     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-tðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 582     public class SpaceTokenizer implements Tokenizer {                                                   </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 583         public int findTokenStart(CharSequence text, int cursor) {                                       </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 584             int i = cursor;                                                                              </span>
<span class="5934463837521260685" onmouseenter="enter('5934463837521260685');" onmouseout="out('5934463837521260685');" style=""> 585             while ((i &gt; 0) &amp;&amp; (text.charAt(i - 1) != &#x27; &#x27;)) {                                             </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 586                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587             }                                                                                            </span>
<span class="-5358973501792243566" onmouseenter="enter('-5358973501792243566');" onmouseout="out('-5358973501792243566');" style=""> 588             while ((i &lt; cursor) &amp;&amp; (text.charAt(i) == &#x27; &#x27;)) {                                            </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 589                 i++;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590             }                                                                                            </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 591             return i;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592         }                                                                                                </span>
<span  style=""> 593                                                                                                          </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 594         public int findTokenEnd(CharSequence text, int cursor) {                                         </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 595             int i = cursor;                                                                              </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 596             int len = text.length();                                                                     </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 597             while (i &lt; len) {                                                                            </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 598                 if (text.charAt(i) == &#x27; &#x27;) {                                                             </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 599                     return i;                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 600                 } else {                                                                                 </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 601                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603             }                                                                                            </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 604             return len;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605         }                                                                                                </span>
<span  style=""> 606                                                                                                          </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 607         public CharSequence terminateToken(CharSequence text) {                                          </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 608             int i = text.length();                                                                       </span>
<span class="-1978436364843687679" onmouseenter="enter('-1978436364843687679');" onmouseout="out('-1978436364843687679');" style=""> 609             while ((i &gt; 0) &amp;&amp; (text.charAt(i - 1) == &#x27; &#x27;)) {                                             </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 610                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611             }                                                                                            </span>
<span class="4515862521225198503" onmouseenter="enter('4515862521225198503');" onmouseout="out('4515862521225198503');" style=""> 612             if ((i &gt; 0) &amp;&amp; (text.charAt(i - 1) == &#x27; &#x27;)) {                                                </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 613                 return text;                                                                             </span>
<span class="6635265685313620656" onmouseenter="enter('6635265685313620656');" onmouseout="out('6635265685313620656');" style=""> 614             } else if (text instanceof Spanned) {                                                        </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 615                 SpannableString sp = new SpannableString(text + &quot; &quot;);                                    </span>
<span class="-825398783849661023" onmouseenter="enter('-825398783849661023');" onmouseout="out('-825398783849661023');" style=""><abbr title=" 616                 TextUtils.copySpansFrom(((Spanned) (text)), 0, text.length(), java.lang.Object.class, sp, 0);"> 616                 TextUtils.copySpansFrom(((Spanned) (text)), 0, text.length(), java.lang.Object.class, sp,ðŸ”µ</abbr></span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 617                 return sp;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 618             } else {                                                                                     </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 619                 return text + &quot; &quot;;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622     }                                                                                                    </span>
<span  style=""> 623                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 624     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 625         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 626         protected void onPreExecute() {                                                                  </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 627             mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                         </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 628             mIsLoadingNote = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629         }                                                                                                </span>
<span  style=""> 630                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 631         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 632         protected Void doInBackground(String... args) {                                                  </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 633             if (getActivity() == null) {                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 634                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635             }                                                                                            </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 636             String noteID = args[0];                                                                     </span>
<span class="1018174203056851079" onmouseenter="enter('1018174203056851079');" onmouseout="out('1018174203056851079');" style=""> 637             Simplenote application = ((Simplenote) (getActivity().getApplication()));                    </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 638             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 639             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 640                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 641                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 642                 if (getActivity() instanceof NotesActivity) {                                            </span>
<span class="638470757036078587" onmouseenter="enter('638470757036078587');" onmouseout="out('638470757036078587');" style=""> 643                     ((NotesActivity) (getActivity())).setCurrentNote(mNote);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 645             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 646                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 648             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649         }                                                                                                </span>
<span  style=""> 650                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 651         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 652         protected void onPostExecute(Void nada) {                                                        </span>
<span class="8040630259399683176" onmouseenter="enter('8040630259399683176');" onmouseout="out('8040630259399683176');" style=""> 653             if ((getActivity() == null) || getActivity().isFinishing()) {                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 654                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655             }                                                                                            </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 656             refreshContent(false);                                                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 657             if (mMatchOffsets != null) {                                                                 </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 658                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 658                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 659                 mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660             }                                                                                            </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 661             mContentEditText.addTextChangedListener(NoteEditorFragment.this);                            </span>
<span class="-1157968862395621221" onmouseenter="enter('-1157968862395621221');" onmouseout="out('-1157968862395621221');" style=""> 662             if ((mNote != null) &amp;&amp; mNote.getContent().isEmpty()) {                                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 663                 // Show soft keyboard                                                                    </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 664                 mContentEditText.requestFocus();                                                         </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 665                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 666                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 667                     public void run() {                                                                  </span>
<span class="-3252807025427255436" onmouseenter="enter('-3252807025427255436');" onmouseout="out('-3252807025427255436');" style=""><abbr title=" 668                         InputMethodManager inputMethodManager = ((InputMethodManager) (getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)));"> 668                         InputMethodManager inputMethodManager = ((InputMethodManager) (getActivity().getSðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 669                         if (inputMethodManager != null) {                                                </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 670                             inputMethodManager.showSoftInput(mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 673                 }, 100);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674             }                                                                                            </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 675             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 676             mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678     }                                                                                                    </span>
<span  style=""> 679                                                                                                          </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 680     private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 681         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 682         protected Void doInBackground(Void... args) {                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 683             saveNote();                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 684             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685         }                                                                                                </span>
<span  style=""> 686                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 687         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 688         protected void onPostExecute(Void nada) {                                                        </span>
<span class="8985972584985571946" onmouseenter="enter('8985972584985571946');" onmouseout="out('8985972584985571946');" style=""> 689             if ((getActivity() != null) &amp;&amp; (!getActivity().isFinishing())) {                             </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style=""> 690                 // Update links                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 691                 SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694     }                                                                                                    </span>
<span  style=""> 695                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style=""> 696     private void saveNote() {                                                                            </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 697         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 698             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699         }                                                                                                </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style=""> 700         String content = getNoteContentString();                                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 701         String tagString = getNoteTagsString();                                                          </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 702         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                       </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 703             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 704             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 705             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 706             // Send pinned event to google analytics if changed                                          </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 707             mNote.setPinned(mPinButton.isChecked());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 708             mNote.save();                                                                                </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 709             if (getActivity() != null) {                                                                 </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 710                 Tracker tracker = EasyTracker.getTracker();                                              </span>
<span class="9119823558701234173" onmouseenter="enter('9119823558701234173');" onmouseout="out('9119823558701234173');" style=""> 711                 if (mNote.isPinned() != mPinButton.isChecked()) {                                        </span>
<span class="-3847688300875000686" onmouseenter="enter('-3847688300875000686');" onmouseout="out('-3847688300875000686');" style=""><abbr title=" 712                     tracker.sendEvent(&quot;note&quot;, mPinButton.isChecked() ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 712                     tracker.sendEvent(&quot;note&quot;, mPinButton.isChecked() ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713                 }                                                                                        </span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 714                 tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717     }                                                                                                    </span>
<span  style=""> 718                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 719     // Contextual action bar for dealing with links                                                      </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 720     // Contextual action bar for dealing with links                                                      </span>
<span class="-23103958784499667" onmouseenter="enter('-23103958784499667');" onmouseout="out('-23103958784499667');" style=""> 721     private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                        </span>
<span  style=""> 722                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 723         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 724         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 725         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 726             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 727             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-5537764272582475285" onmouseenter="enter('-5537764272582475285');" onmouseout="out('-5537764272582475285');" style=""> 728             if (inflater != null){                                                                       </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 729                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 730                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 731                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style=""> 732                 if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 733                     mode.setTitleOptionalHint(false);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 736             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737         }                                                                                                </span>
<span  style=""> 738                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 739         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 740         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 741         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 742         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 743             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744         }                                                                                                </span>
<span  style=""> 745                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 746         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 747         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 748         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 749             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 750                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 751                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 752                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 753                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 754                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 755                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 756                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 757                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 758                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 759                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 760                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 762                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 763                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 764                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 765                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 765                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(ConðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style=""> 766                         ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);   </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 767                         clipboard.setPrimaryClip(clip);                                                  </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title=" 768                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 768                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 769                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 771                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 772                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 773                     if (mLinkText != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 774                         try {                                                                            </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 775                             Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);         </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 776                             shareIntent.setType(&quot;text/plain&quot;);                                           </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style=""> 777                             shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);          </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 778                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 778                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.stðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 779                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 780                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781                         }                                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 782                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 784                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 785                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 786                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788         }                                                                                                </span>
<span  style=""> 789                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 790         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 791         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 792         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 793             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 795     };                                                                                                   </span>
<span  style=""> 796                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style=""> 797     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style=""> 798     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 799     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style=""> 800     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style=""> 801         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style=""> 802             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style=""> 803             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 804                 return;                                                                                  </span>
<span  style=""> 805                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style=""> 806             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style=""> 807             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style=""> 808                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style=""> 809                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title=" 810                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();"> 810                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 811                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 812                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 813                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 814                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815                 }                                                                                        </span>
<span  style=""> 816                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style=""> 817                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 818                 if (getActivity() != null) {                                                             </span>
<span class="-7828194884341615795" onmouseenter="enter('-7828194884341615795');" onmouseout="out('-7828194884341615795');" style=""> 819                     mActionMode = getActivity().startActionMode(mActionModeCallback);                    </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 820                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 821                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 822                     }                                                                                    </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 823                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 825             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 826                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 827                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 829         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 830             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 831             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833     }                                                                                                    </span>
<span  style=""> 834                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style=""> 835     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style=""> 836         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style=""> 837             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="4608769072092705594" onmouseenter="enter('4608769072092705594');" onmouseout="out('4608769072092705594');" style=""> 838                 mViewLinkMenuItem.setIcon(mCallIconResId);                                               </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style=""> 839                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style=""> 840             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="112818067677115399" onmouseenter="enter('112818067677115399');" onmouseout="out('112818067677115399');" style=""> 841                 mViewLinkMenuItem.setIcon(mEmailIconResId);                                              </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style=""> 842                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style=""> 843             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-5464734295170160558" onmouseenter="enter('-5464734295170160558');" onmouseout="out('-5464734295170160558');" style=""> 844                 mViewLinkMenuItem.setIcon(mMapIconResId);                                                </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style=""> 845                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 846             } else {                                                                                     </span>
<span class="-4632312324298999235" onmouseenter="enter('-4632312324298999235');" onmouseout="out('-4632312324298999235');" style=""> 847                 mViewLinkMenuItem.setIcon(mWebIconResId);                                                </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style=""> 848                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 849             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 850         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851     }                                                                                                    </span>
<span  style=""> 852                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 853     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style=""> 854     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style=""> 855                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 856     }                                                                                                    </span>
<span  style=""> 857                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 858     @Override                                                                                            </span>
<span class="-391573795721253888" onmouseenter="enter('-391573795721253888');" onmouseout="out('-391573795721253888');" style=""> 859     public void onChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {      </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style=""> 860         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="6009154871566676955" onmouseenter="enter('6009154871566676955');" onmouseout="out('6009154871566676955');" style=""> 861             if ((getNote() != null) &amp;&amp; getNote().getSimperiumKey().equals(key)) {                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 862                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style=""> 863                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 864                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 865                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 866                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 867                             public void run() {                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style=""> 868                                 updateNote(updatedNote);                                                 </span>
<span class="970005468838694125" onmouseenter="enter('970005468838694125');" onmouseout="out('970005468838694125');" style=""> 869                                 updatePublishDialogContent();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 871                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 872                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 873                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 874                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 877         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878     }                                                                                                    </span>
<span  style=""> 879                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 880     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style=""> 881     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style=""> 882         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883     }                                                                                                    </span>
<span  style=""> 884                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 885     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 886     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style=""> 887         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style=""> 888         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 889             return;                                                                                      </span>
<span  style=""> 890                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style=""> 891         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style=""> 892         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 893             return;                                                                                      </span>
<span  style=""> 894                                                                                                          </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style=""> 895         note.setContent(getNoteContentString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897 }                                                                                                        </span>





























</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="-1440843073414233844" onmouseenter="enter('-1440843073414233844');" onmouseout="out('-1440843073414233844');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   4 +import android.app.Dialog;                                                                                        </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   5  import android.app.Fragment;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   6  import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   7  import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   8  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   9  import android.content.Intent;                                                                                    </span>
<span class="-840652079464298178" onmouseenter="enter('-840652079464298178');" onmouseout="out('-840652079464298178');" style="">  10  import android.content.res.TypedArray;                                                                            </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  11  import android.database.Cursor;                                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  12  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  13  import android.os.AsyncTask;                                                                                      </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  14  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  15  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  16  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  17  import android.text.Editable;                                                                                     </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  18  import android.text.SpannableString;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  19  import android.text.Spanned;                                                                                      </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  20  import android.text.TextUtils;                                                                                    </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  21  import android.text.TextWatcher;                                                                                  </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  22  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  23  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  24  import android.text.util.Linkify;                                                                                 </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  25  import android.view.ActionMode;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  26  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  27  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  28  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  29  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  30  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  31  import android.view.ViewGroup;                                                                                    </span>
<span class="8570405338525080773" onmouseenter="enter('8570405338525080773');" onmouseout="out('8570405338525080773');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +import android.view.Window;                                                                                       </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import android.view.WindowManager;                                                                                </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  34  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="1133222559545955472" onmouseenter="enter('1133222559545955472');" onmouseout="out('1133222559545955472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import android.widget.Button;                                                                                     </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37  import android.widget.LinearLayout;                                                                               </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  38  import android.widget.MultiAutoCompleteTextView.Tokenizer;                                                        </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  39  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  40  import android.widget.Toast;                                                                                      </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  41  import android.widget.ToggleButton;                                                                               </span>
<span  style="">  42                                                                                                                    </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  43  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  44  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  45  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="7629762131910067592" onmouseenter="enter('7629762131910067592');" onmouseout="out('7629762131910067592');" style="">  46  import com.automattic.simplenote.utils.SimplenoteEditText;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  47  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  48  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  49  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  50  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="">  51  import com.automattic.simplenote.utils.Typefaces;                                                                 </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  52  import com.google.analytics.tracking.android.EasyTracker;                                                         </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  53  import com.google.analytics.tracking.android.Tracker;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  54  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  55  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  56  import com.simperium.client.Query;                                                                                </span>
<span  style="">  57                                                                                                                    </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  58  import java.util.Calendar;                                                                                        </span>
<span  style="">  59                                                                                                                    </span>
<span class="7280890691619564888" onmouseenter="enter('7280890691619564888');" onmouseout="out('7280890691619564888');" style=""><abbr title="  60  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListener, View.OnFocusChangeListener, SimplenoteEditText.OnSelectionChangedListener {">  60  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListenerðŸ”µ</abbr></span>
<span  style="">  61                                                                                                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  62      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  63      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  64      static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  65      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span  style="">  66                                                                                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  67      private Note mNote;                                                                                           </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  68      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span  style="">  69                                                                                                                    </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  70      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  71      private TagsMultiAutoCompleteTextView mTagView;                                                               </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  72      private ToggleButton mPinButton;                                                                              </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  73      private Handler mAutoSaveHandler;                                                                             </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  74      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="6490526833736257609" onmouseenter="enter('6490526833736257609');" onmouseout="out('6490526833736257609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  75 +    private Dialog mPublishDialog;                                                                                </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  76      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="275494556225166536" onmouseenter="enter('275494556225166536');" onmouseout="out('275494556225166536');" style="">  77      private boolean mIsNewNote, mIsLoadingNote;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style="">  78      private ActionMode mActionMode;                                                                               </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style="">  79      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style="">  80      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style="">  81      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style="">  82      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-2809999858206249165" onmouseenter="enter('-2809999858206249165');" onmouseout="out('-2809999858206249165');" style="">  83      private int mEmailIconResId, mWebIconResId, mMapIconResId, mCallIconResId;                                    </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style="">  84      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style="">  85      private String mMatchOffsets;                                                                                 </span>
<span  style="">  86                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  87      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  88       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  89       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  90       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  91      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92      }                                                                                                             </span>
<span  style="">  93                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  94      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  95      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  96          super.onCreate(savedInstanceState);                                                                       </span>
<span  style="">  97                                                                                                                    </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">  98          if (getActivity() != null) {                                                                              </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  99              Simplenote currentApp = (Simplenote) getActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 100              mNotesBucket = currentApp.getNotesBucket();                                                           </span>
<span  style=""> 101                                                                                                                    </span>
<span class="6390134422937918444" onmouseenter="enter('6390134422937918444');" onmouseout="out('6390134422937918444');" style=""><abbr title=" 102              TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionBarIconWeb, R.attr.actionBarIconMap, R.attr.actionBarIconCall});"> 102              TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionðŸ”µ</abbr></span>
<span class="-368005650607593546" onmouseenter="enter('-368005650607593546');" onmouseout="out('-368005650607593546');" style=""> 103              if (a != null) {                                                                                      </span>
<span class="156477903530707073" onmouseenter="enter('156477903530707073');" onmouseout="out('156477903530707073');" style=""> 104                  mEmailIconResId = a.getResourceId(0, 0);                                                          </span>
<span class="2237960387607406884" onmouseenter="enter('2237960387607406884');" onmouseout="out('2237960387607406884');" style=""> 105                  mWebIconResId = a.getResourceId(1, 0);                                                            </span>
<span class="-2587404817224189880" onmouseenter="enter('-2587404817224189880');" onmouseout="out('-2587404817224189880');" style=""> 106                  mMapIconResId = a.getResourceId(2, 0);                                                            </span>
<span class="7397862531502718567" onmouseenter="enter('7397862531502718567');" onmouseout="out('7397862531502718567');" style=""> 107                  mCallIconResId = a.getResourceId(3, 0);                                                           </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style=""> 108                  a.recycle();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110          }                                                                                                         </span>
<span  style=""> 111                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 112          mAutoSaveHandler = new Handler();                                                                         </span>
<span  style=""> 113                                                                                                                    </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 114          mMatchHighlighter = new TextHighlighter(getActivity(),                                                    </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 115                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="3992270686517948303" onmouseenter="enter('3992270686517948303');" onmouseout="out('3992270686517948303');" style=""> 116          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0){                                       </span>
<span  style=""> 117                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 118              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 119              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 120                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 121                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 122                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123              }                                                                                                     </span>
<span  style=""> 124                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 125              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 126              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 127                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 128                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129              }                                                                                                     </span>
<span  style=""> 130                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131              @Override                                                                                             </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 132              public CharSequence convertToString(Cursor cursor){                                                   </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 133                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134              }                                                                                                     </span>
<span  style=""> 135                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 136              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 137              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 138                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 139                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 140                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 141                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 142                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 143                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 144                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 145                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 146                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 147                  if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 147                  if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%ðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 148                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 150          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151      }                                                                                                             </span>
<span  style=""> 152                                                                                                                    </span>
<span  style=""> 153                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154      @Override                                                                                                     </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 155      public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {           </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 156 +        setHasOptionsMenu(true);                                                                                  </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 157          View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                        </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 158          mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));                       </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 159          if (getActivity() != null) {                                                                              </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style=""><abbr title=" 160              mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));"> 160              mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATHðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161          }                                                                                                         </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 162          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 163          mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                          </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 164          mTagView.setTokenizer(new SpaceTokenizer());                                                              </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style=""> 165          mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));         </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 166          mTagView.setOnFocusChangeListener(this);                                                                  </span>
<span  style=""> 167                                                                                                                    </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 168          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span  style=""> 169                                                                                                                    </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style=""> 170          mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                                        </span>
<span class="-6233419192957625397" onmouseenter="enter('-6233419192957625397');" onmouseout="out('-6233419192957625397');" style=""> 171          mPinButton.setOnClickListener(new View.OnClickListener() {                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 172              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 173              public void onClick(View v) {                                                                         </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style=""> 174                  if (mPinButton.isChecked()) {                                                                     </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style=""> 175                      // Friendly message to the user as to what this button does.                                  </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style=""> 176                      Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 179          });                                                                                                       </span>
<span  style=""> 180                                                                                                                    </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 181          mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                                </span>
<span class="8670904764944796201" onmouseenter="enter('8670904764944796201');" onmouseout="out('8670904764944796201');" style=""><abbr title=" 182          if ((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)"> 182          if ((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;ðŸ”µ</abbr></span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 183              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span  style=""> 184                                                                                                                    </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 185          mTagView.setAdapter(mAutocompleteAdapter);                                                                </span>












<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 186  		return rootView;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187  	}                                                                                                                </span>
<span  style=""> 188                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 189      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 190      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 191          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 192          mNotesBucket.start();                                                                                     </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 193          mNotesBucket.addListener(this);                                                                           </span>
<span  style=""> 194                                                                                                                    </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 195          mTagView.setOnTagAddedListener(this);                                                                     </span>
<span  style=""> 196                                                                                                                    </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 197          Bundle arguments = getArguments();                                                                        </span>
<span  style=""> 198                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 199          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 200              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="526740986280926199" onmouseenter="enter('526740986280926199');" onmouseout="out('526740986280926199');" style=""> 201              if (arguments.containsKey(ARG_MATCH_OFFSETS))                                                         </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 202                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 203              new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                            </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 204              setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205          }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 206 -                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207      }                                                                                                             </span>
<span  style=""> 208                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 209      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 210      public void onPause() {                                                                                       </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 211          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 212          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 213          if (getActivity() != null) {                                                                              </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 214              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 214              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 215              if (inputMethodManager != null)                                                                       </span>

<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 216                  inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217          }                                                                                                         </span>



<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 218          // Delete the note if it is new and has empty fields                                                      </span>
<span class="7263350987785388811" onmouseenter="enter('7263350987785388811');" onmouseout="out('7263350987785388811');" style=""> 219          if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty())                                                         </span>

<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 220              mNote.delete();                                                                                       </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 221          else                                                                                                      </span>

<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 222              saveNote();                                                                                           </span>

<span  style=""> 223                                                                                                                    </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 224          mTagView.setOnTagAddedListener(null);                                                                     </span>
<span  style=""> 225                                                                                                                    </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 226          if (mAutoSaveHandler != null)                                                                             </span>

<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 227              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>

<span  style=""> 228                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 229          mHighlighter.stop();                                                                                      </span>
<span  style=""> 230                                                                                                                    </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 231          super.onPause();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 232 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 233 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +    @Override                                                                                                     </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 235 +    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                           </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 236 +        inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 237 +                                                                                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 238 +        if (mNote != null) {                                                                                      </span>
<span class="5214019728761898324" onmouseenter="enter('5214019728761898324');" onmouseout="out('5214019728761898324');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 239 +            MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_published_note);                        </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 240 +            viewPublishedNoteItem.setVisible(true);                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 241 +                                                                                                                  </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 242 +            MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);                     </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 243 +            if (mNote.isDeleted())                                                                                </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 244 +                trashItem.setTitle(R.string.undelete);                                                            </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 245 +            else                                                                                                  </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 246 +                trashItem.setTitle(R.string.delete);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 247 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 248 +                                                                                                                  </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 249 +        super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 250 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 251 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 252 +    @Override                                                                                                     </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 253 +    public boolean onOptionsItemSelected(MenuItem item) {                                                         </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 254 +        switch (item.getItemId()) {                                                                               </span>
<span class="2851142166727911529" onmouseenter="enter('2851142166727911529');" onmouseout="out('2851142166727911529');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 255 +            case R.id.menu_view_published_note:                                                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 256 +                if (mNote != null) {                                                                              </span>
<span class="2186681076883129445" onmouseenter="enter('2186681076883129445');" onmouseout="out('2186681076883129445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 257 +                    showNotePublishDialog();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 258 +                }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 259 +                return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 260 +            case R.id.menu_share:                                                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 261 +                if (mNote != null) {                                                                              </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 262 +                    Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                          </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 263 +                    shareIntent.setType(&quot;text/plain&quot;);                                                            </span>
<span class="2565640458837084796" onmouseenter="enter('2565640458837084796');" onmouseout="out('2565640458837084796');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 264 +                    shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mNote.getContent());                  </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 265 +                    startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 265 +                    startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note))ðŸ”µ</abbr></span>
<span class="-291628727976592463" onmouseenter="enter('-291628727976592463');" onmouseout="out('-291628727976592463');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +                    EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;shared_note&quot;, &quot;action_bar_share_button&quot;, null);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +                }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +                return true;                                                                                      </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 269 +            case R.id.menu_delete:                                                                                </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 270 +                if (mNote != null) {                                                                              </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 271 +                    mNote.setDeleted(!mNote.isDeleted());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 272 +                    mNote.setModificationDate(Calendar.getInstance());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 273 +                    mNote.save();                                                                                 </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 274 +                    Intent resultIntent = new Intent();                                                           </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 275 +                    if (mNote.isDeleted())                                                                        </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 276 +                        resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());               </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 277 +                    getActivity().setResult(Activity.RESULT_OK, resultIntent);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 278 +                }                                                                                                 </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 279 +                getActivity().finish();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 280 +                return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 281 +            case android.R.id.home:                                                                               </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 282 +                getActivity().finish();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 283 +                return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 284 +            default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 285 +                return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 286 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 287 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 288 +                                                                                                                  </span>
<span class="-6798341237622548838" onmouseenter="enter('-6798341237622548838');" onmouseout="out('-6798341237622548838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 289 +    private void showNotePublishDialog() {                                                                        </span>
<span class="-1293040003772175228" onmouseenter="enter('-1293040003772175228');" onmouseout="out('-1293040003772175228');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 290 +        if (mPublishDialog == null) {                                                                             </span>
<span class="-6935058658438695871" onmouseenter="enter('-6935058658438695871');" onmouseout="out('-6935058658438695871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 291 +            mPublishDialog = new Dialog(getActivity(), R.style.SimplenotePublishDialog);                          </span>
<span class="84367104298890978" onmouseenter="enter('84367104298890978');" onmouseout="out('84367104298890978');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 292 +            mPublishDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);                                         </span>
<span class="-8693338580555501068" onmouseenter="enter('-8693338580555501068');" onmouseout="out('-8693338580555501068');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 293 +            mPublishDialog.setContentView(R.layout.publish_settings);                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 294 +                                                                                                                  </span>
<span class="-8841152936066762125" onmouseenter="enter('-8841152936066762125');" onmouseout="out('-8841152936066762125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 295 +            mPublishDialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);"> 295 +            mPublishDialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParaðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 296 +                                                                                                                  </span>
<span class="2615697251940277419" onmouseenter="enter('2615697251940277419');" onmouseout="out('2615697251940277419');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 297 +            Button publishButton = (Button)mPublishDialog.findViewById(R.id.publish_note_button);                 </span>
<span class="8546992701790587956" onmouseenter="enter('8546992701790587956');" onmouseout="out('8546992701790587956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 298 +            TextView publishTextView = (TextView)mPublishDialog.findViewById(R.id.publish_url_textview);          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 299 +                                                                                                                  </span>
<span class="-7759606836018483289" onmouseenter="enter('-7759606836018483289');" onmouseout="out('-7759606836018483289');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 300 +            publishButton.setOnClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 301 +                @Override                                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 302 +                public void onClick(View v) {                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 303 +                    if (mNote != null) {                                                                          </span>
<span class="1314484573565824514" onmouseenter="enter('1314484573565824514');" onmouseout="out('1314484573565824514');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 304 +                        Button button = (Button) v;                                                               </span>
<span class="5563864695602119989" onmouseenter="enter('5563864695602119989');" onmouseout="out('5563864695602119989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 305 +                        boolean newPublishedStatus = !mNote.isPublished();                                        </span>
<span class="-3191807331109519265" onmouseenter="enter('-3191807331109519265');" onmouseout="out('-3191807331109519265');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 306 +                        mNote.setPublished(newPublishedStatus);                                                   </span>
<span class="-6701970919306036436" onmouseenter="enter('-6701970919306036436');" onmouseout="out('-6701970919306036436');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 307 +                        if (newPublishedStatus) {                                                                 </span>
<span class="3827010637140387680" onmouseenter="enter('3827010637140387680');" onmouseout="out('3827010637140387680');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 308 +                            button.setText(&quot;Publishing...&quot;);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 309 +                        } else {                                                                                  </span>
<span class="5904425248947527288" onmouseenter="enter('5904425248947527288');" onmouseout="out('5904425248947527288');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 310 +                            button.setText(&quot;Publish&quot;);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 311 +                        }                                                                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 312 +                        mNote.save();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 313 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 314 +                }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 315 +            });                                                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 316 +                                                                                                                  </span>
<span class="4045844893437359317" onmouseenter="enter('4045844893437359317');" onmouseout="out('4045844893437359317');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 317 +            publishTextView.setOnClickListener(new View.OnClickListener() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 318 +                @Override                                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 319 +                public void onClick(View v) {                                                                     </span>
<span class="1552014347051890626" onmouseenter="enter('1552014347051890626');" onmouseout="out('1552014347051890626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 320 +                    TextView textView = (TextView) v;                                                             </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 321 +                    ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 321 +                    ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARðŸ”µ</abbr></span>
<span class="5839586414586808613" onmouseenter="enter('5839586414586808613');" onmouseout="out('5839586414586808613');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 322 +                    ClipData clip = ClipData.newPlainText(getString(R.string.app_name),textView.getText());       </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 323 +                    clipboard.setPrimaryClip(clip);                                                               </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 324 +                    Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +                }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 326 +            });                                                                                                   </span>
<span class="47925618930998082" onmouseenter="enter('47925618930998082');" onmouseout="out('47925618930998082');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 327 +        } else if (mPublishDialog.isShowing()) {                                                                  </span>
<span class="-3990443050467684017" onmouseenter="enter('-3990443050467684017');" onmouseout="out('-3990443050467684017');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 328 +            mPublishDialog.dismiss();                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 329 +            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 330 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 331 +                                                                                                                  </span>
<span class="970005468838694125" onmouseenter="enter('970005468838694125');" onmouseout="out('970005468838694125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 332 +        updatePublishDialogContent();                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 333 +                                                                                                                  </span>
<span class="-3313589573951955195" onmouseenter="enter('-3313589573951955195');" onmouseout="out('-3313589573951955195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 334 +        mPublishDialog.show();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 335 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 336 +                                                                                                                  </span>
<span class="2778692559269198329" onmouseenter="enter('2778692559269198329');" onmouseout="out('2778692559269198329');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 337 +    public void updatePublishDialogContent() {                                                                    </span>
<span class="-8988333594594696749" onmouseenter="enter('-8988333594594696749');" onmouseout="out('-8988333594594696749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 338 +        if (mPublishDialog == null || mNote == null)                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 339 +            return;                                                                                               </span>
<span class="2615697251940277419" onmouseenter="enter('2615697251940277419');" onmouseout="out('2615697251940277419');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 340 +        Button publishButton = (Button)mPublishDialog.findViewById(R.id.publish_note_button);                     </span>
<span class="8546992701790587956" onmouseenter="enter('8546992701790587956');" onmouseout="out('8546992701790587956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 341 +        TextView publishTextView = (TextView)mPublishDialog.findViewById(R.id.publish_url_textview);              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 342 +                                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 343 +        if (mNote.isPublished()) {                                                                                </span>
<span class="5460167267665796132" onmouseenter="enter('5460167267665796132');" onmouseout="out('5460167267665796132');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 344 +            publishButton.setText(&quot;Published&quot;);                                                                   </span>
<span class="7499054267928598822" onmouseenter="enter('7499054267928598822');" onmouseout="out('7499054267928598822');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 345 +            publishTextView.setTextColor(getResources().getColor(R.color.white));                                 </span>
<span class="-2988513566372186325" onmouseenter="enter('-2988513566372186325');" onmouseout="out('-2988513566372186325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 346 +            publishTextView.setText(mNote.getPublishedUrl());                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 347 +        } else {                                                                                                  </span>
<span class="3946830685104663344" onmouseenter="enter('3946830685104663344');" onmouseout="out('3946830685104663344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 348 +            publishButton.setText(&quot;Publish note&quot;);                                                                </span>
<span class="-3553959048380701857" onmouseenter="enter('-3553959048380701857');" onmouseout="out('-3553959048380701857');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 349 +            publishTextView.setTextColor(getResources().getColor(R.color.light_gray));                            </span>
<span class="-5437542377379175369" onmouseenter="enter('-5437542377379175369');" onmouseout="out('-5437542377379175369');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 350 +            publishTextView.setText(&quot;Note not published&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 351 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 352 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353      }                                                                                                             </span>
<span  style=""> 354                                                                                                                    </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 355      private boolean noteIsEmpty() {                                                                               </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 356          return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357      }                                                                                                             </span>
<span  style=""> 358                                                                                                                    </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 359      public void setNote(String noteID){                                                                           </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 360          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361      }                                                                                                             </span>
<span  style=""> 362                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 363      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 364          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 365              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span  style=""> 366                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 367          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 368                                                                                                                    </span>
<span class="2077738191995360697" onmouseenter="enter('2077738191995360697');" onmouseout="out('2077738191995360697');" style=""> 369          if (matchOffsets != null)                                                                                 </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 370              mMatchOffsets = matchOffsets;                                                                         </span>
<span  style=""> 371                                                                                                                    </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 372          // If we have a note already (on a tablet in landscape), save the note.                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 373          if (mNote != null) {                                                                                      </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 374              if (mIsNewNote &amp;&amp; noteIsEmpty())                                                                      </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 375                  mNote.delete();                                                                                   </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 376              else if (mNote != null)                                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 377                  saveNote();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378          }                                                                                                         </span>
<span  style=""> 379                                                                                                                    </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 380          new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381      }                                                                                                             </span>
<span  style=""> 382                                                                                                                    </span>
<span class="-3433185850424102984" onmouseenter="enter('-3433185850424102984');" onmouseout="out('-3433185850424102984');" style=""> 383      public void updateNote(Note updatedNote) {                                                                    </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 384          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 385          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 386          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387      }                                                                                                             </span>
<span  style=""> 388                                                                                                                    </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 389      public void refreshContent(boolean isNoteUpdate) {                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 390          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 391              // Restore the cursor position if possible.                                                           </span>
<span  style=""> 392                                                                                                                    </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 393              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 393              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span  style=""> 394                                                                                                                    </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 395              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 396                                                                                                                    </span>
<span class="2384177704135095384" onmouseenter="enter('2384177704135095384');" onmouseout="out('2384177704135095384');" style=""><abbr title=" 397              if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd())"> 397              if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd(ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 398                  mContentEditText.setSelection(cursorPosition);                                                    </span>








<span  style=""> 399                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 400              afterTextChanged(mContentEditText.getText());                                                         </span>
<span  style=""> 401                                                                                                                    </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 402              mPinButton.setChecked(mNote.isPinned());                                                              </span>
<span  style=""> 403                                                                                                                    </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 404              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406      }                                                                                                             </span>
<span  style=""> 407                                                                                                                    </span>
<span class="-5496131723873966197" onmouseenter="enter('-5496131723873966197');" onmouseout="out('-5496131723873966197');" style=""> 408      public void updateTagList() {                                                                                 </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 409          Activity activity = getActivity();                                                                        </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 410          if (activity == null) return;                                                                             </span>
<span  style=""> 411                                                                                                                    </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 412          // Populate this note&#x27;s tags in the tagView                                                               </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 413          mTagView.setChips(mNote.getTagString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414      }                                                                                                             </span>
<span  style=""> 415                                                                                                                    </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 416      int newCursorLocation(String newText, String oldText, int cursorLocation) {                                   </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 417          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 418          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 419          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 420          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 421          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 422          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 423          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 424          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 425                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 426          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 427                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 428          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 429                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 430          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 431          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 432              return newText.length();                                                                              </span>
<span  style=""> 433                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 434          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 435          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 436                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 437          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 438              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 438              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 439              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 439              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 440          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 441              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442          }                                                                                                         </span>
<span  style=""> 443                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 444          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 445          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 446              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 447                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 448          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 449          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450      }                                                                                                             </span>
<span  style=""> 451                                                                                                                    </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 452      private Runnable autoSaveRunnable = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 453          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 454          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 455              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 457      };                                                                                                            </span>
<span  style=""> 458                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 459      @Override                                                                                                     </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 460      public void onTagsChanged(String tagString) {                                                                 </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 461          if (mNote == null)                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 462              return;                                                                                               </span>
<span class="-9151826850815990618" onmouseenter="enter('-9151826850815990618');" onmouseout="out('-9151826850815990618');" style=""><abbr title=" 463          if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length())"> 463          if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().lenðŸ”µ</abbr></span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 464              EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 465          else                                                                                                      </span>
<span class="8421196898283215417" onmouseenter="enter('8421196898283215417');" onmouseout="out('8421196898283215417');" style=""> 466              EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;removed_tag&quot;, &quot;tag_removed_from_note&quot;, null);             </span>
<span  style=""> 467                                                                                                                    </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 468          mNote.setTagString(tagString);                                                                            </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 469          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 470          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 471          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472      }                                                                                                             </span>
<span  style=""> 473                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 474      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 475      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 476          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477      }                                                                                                             </span>
<span  style=""> 478                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 479      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 480      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 481          // Set the note title to be a larger size                                                                 </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 482          // Remove any existing size spans                                                                         </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 483          RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);               </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 484          for (RelativeSizeSpan span : spans) {                                                                     </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 485              editable.removeSpan(span);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486          }                                                                                                         </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 487          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 488          if (newLinePosition == 0)                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 489              return;                                                                                               </span>
<span class="3283000540261653525" onmouseenter="enter('3283000540261653525');" onmouseout="out('3283000540261653525');" style=""><abbr title=" 490          editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 490          editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.lengtðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491      }                                                                                                             </span>
<span  style=""> 492                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 493      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 494      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span  style=""> 495                                                                                                                    </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 496          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 497          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 498              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 499              mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500          }                                                                                                         </span>
<span  style=""> 501                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 502          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 503          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 504              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 505              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507      }                                                                                                             </span>
<span  style=""> 508                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 509      private void saveAndSyncNote() {                                                                              </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 510          if (mNote == null)                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 511              return;                                                                                               </span>
<span  style=""> 512                                                                                                                    </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 513          new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514      }                                                                                                             </span>
<span  style=""> 515                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 516      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 517          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 518              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 519              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 520              mTagView.setText(&quot;&quot;);                                                                                 </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 521              if (mPlaceholderView != null)                                                                         </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 522                  mPlaceholderView.setVisibility(View.VISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 523          } else {                                                                                                  </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 524              if (mPlaceholderView != null)                                                                         </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 525                  mPlaceholderView.setVisibility(View.GONE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527      }                                                                                                             </span>
<span  style=""> 528                                                                                                                    </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 529      public void setIsNewNote(boolean isNewNote) {                                                                 </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 530          this.mIsNewNote = isNewNote;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531      }                                                                                                             </span>
<span  style=""> 532                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 533      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 534      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 535          if (!hasFocus) {                                                                                          </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 536              String tagString = getNoteTagsString().trim();                                                        </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 537              if (tagString.length() &gt; 0) {                                                                         </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 538                  mTagView.setChips(tagString);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541      }                                                                                                             </span>
<span  style=""> 542                                                                                                                    </span>
<span class="-6849832043716883515" onmouseenter="enter('-6849832043716883515');" onmouseout="out('-6849832043716883515');" style=""> 543      public Note getNote() {                                                                                       </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 544          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545      }                                                                                                             </span>
<span  style=""> 546                                                                                                                    </span>
<span class="5855058962481175207" onmouseenter="enter('5855058962481175207');" onmouseout="out('5855058962481175207');" style=""> 547      public String getNoteContentString() {                                                                        </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 548          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 549              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 550          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 551              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553      }                                                                                                             </span>
<span  style=""> 554                                                                                                                    </span>
<span class="2486113532203564324" onmouseenter="enter('2486113532203564324');" onmouseout="out('2486113532203564324');" style=""> 555      public String getNoteTagsString() {                                                                           </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 556          if (mTagView == null || mTagView.getText() == null) {                                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 557              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 558          } else {                                                                                                  </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 559              return mTagView.getText().toString();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561      }                                                                                                             </span>
<span  style=""> 562                                                                                                                    </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 563      // Use spaces in tag autocompletion list                                                                      </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 564      // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 564      // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiaðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 565      public class SpaceTokenizer implements Tokenizer {                                                            </span>
<span  style=""> 566                                                                                                                    </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 567          public int findTokenStart(CharSequence text, int cursor) {                                                </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 568              int i = cursor;                                                                                       </span>
<span  style=""> 569                                                                                                                    </span>
<span class="885050749614268129" onmouseenter="enter('885050749614268129');" onmouseout="out('885050749614268129');" style=""> 570              while (i &gt; 0 &amp;&amp; text.charAt(i - 1) != &#x27; &#x27;) {                                                          </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 571                  i--;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572              }                                                                                                     </span>
<span class="9056743128114431706" onmouseenter="enter('9056743128114431706');" onmouseout="out('9056743128114431706');" style=""> 573              while (i &lt; cursor &amp;&amp; text.charAt(i) == &#x27; &#x27;) {                                                         </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 574                  i++;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575              }                                                                                                     </span>
<span  style=""> 576                                                                                                                    </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 577              return i;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578          }                                                                                                         </span>
<span  style=""> 579                                                                                                                    </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 580          public int findTokenEnd(CharSequence text, int cursor) {                                                  </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 581              int i = cursor;                                                                                       </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 582              int len = text.length();                                                                              </span>
<span  style=""> 583                                                                                                                    </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 584              while (i &lt; len) {                                                                                     </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 585                  if (text.charAt(i) == &#x27; &#x27;) {                                                                      </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 586                      return i;                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 587                  } else {                                                                                          </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 588                      i++;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590              }                                                                                                     </span>
<span  style=""> 591                                                                                                                    </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 592              return len;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593          }                                                                                                         </span>
<span  style=""> 594                                                                                                                    </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 595          public CharSequence terminateToken(CharSequence text) {                                                   </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 596              int i = text.length();                                                                                </span>
<span  style=""> 597                                                                                                                    </span>
<span class="-2645617250828763966" onmouseenter="enter('-2645617250828763966');" onmouseout="out('-2645617250828763966');" style=""> 598              while (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                          </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 599                  i--;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600              }                                                                                                     </span>
<span  style=""> 601                                                                                                                    </span>
<span class="-6208188263403401654" onmouseenter="enter('-6208188263403401654');" onmouseout="out('-6208188263403401654');" style=""> 602              if (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                             </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 603                  return text;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 604              } else {                                                                                              </span>
<span class="-8407561526953236331" onmouseenter="enter('-8407561526953236331');" onmouseout="out('-8407561526953236331');" style=""> 605                  if (text instanceof Spanned) {                                                                    </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 606                      SpannableString sp = new SpannableString(text + &quot; &quot;);                                         </span>
<span class="4069757121373026619" onmouseenter="enter('4069757121373026619');" onmouseout="out('4069757121373026619');" style=""> 607                      TextUtils.copySpansFrom((Spanned) text, 0, text.length(),                                     </span>
<span class="-4923471023181178896" onmouseenter="enter('-4923471023181178896');" onmouseout="out('-4923471023181178896');" style=""> 608                              Object.class, sp, 0);                                                                 </span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 609                      return sp;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 610                  } else {                                                                                          </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 611                      return text + &quot; &quot;;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615      }                                                                                                             </span>
<span  style=""> 616                                                                                                                    </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 617      private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                            </span>
<span  style=""> 618                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 619          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 620          protected void onPreExecute() {                                                                           </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 621              mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                                  </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 622              mIsLoadingNote = true;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623          }                                                                                                         </span>
<span  style=""> 624                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 625          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 626          protected Void doInBackground(String... args) {                                                           </span>



<span  style=""> 627                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 628              String noteID = args[0];                                                                              </span>
<span class="-4819314506084115698" onmouseenter="enter('-4819314506084115698');" onmouseout="out('-4819314506084115698');" style=""> 629              if (getActivity() == null)                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 630                  return null;                                                                                      </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 631              Simplenote application = (Simplenote) getActivity().getApplication();                                 </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 632              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 633              try {                                                                                                 </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 634                  mNote = notesBucket.get(noteID);                                                                  </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 635                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 636                  if (getActivity() instanceof NotesActivity) {                                                     </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style=""> 637                      ((NotesActivity) getActivity()).setCurrentNote(mNote);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 639              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 640                  // TODO: Handle a missing note                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 642              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643          }                                                                                                         </span>
<span  style=""> 644                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 645          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 646          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style=""> 647              if (getActivity() == null || getActivity().isFinishing())                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 648                  return;                                                                                           </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 649              refreshContent(true);                                                                                 </span>

<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 650              if (mMatchOffsets != null) {                                                                          </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 651                  int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 651                  int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 652                  mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653              }                                                                                                     </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 654              mContentEditText.addTextChangedListener(NoteEditorFragment.this);                                     </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 655              if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                                  </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 656                  // Show soft keyboard                                                                             </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 657                  mContentEditText.requestFocus();                                                                  </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 658                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 659                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 660                      public void run() {                                                                           </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 661                          InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 661                          InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServicðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 662                          if (inputMethodManager != null)                                                           </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 663                              inputMethodManager.showSoftInput(mContentEditText, 0);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 665                  }, 100);                                                                                          </span>
<span  style=""> 666                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667              }                                                                                                     </span>
<span  style=""> 668                                                                                                                    </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 669              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span  style=""> 670                                                                                                                    </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 671              mIsLoadingNote = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673      }                                                                                                             </span>
<span  style=""> 674                                                                                                                    </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 675      private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                              </span>
<span  style=""> 676                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 677          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 678          protected Void doInBackground(Void... args) {                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 679              saveNote();                                                                                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 680              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681          }                                                                                                         </span>
<span  style=""> 682                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 683          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 684          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style=""> 685              if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                          </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style=""> 686                  // Update links                                                                                   </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 687                  SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690      }                                                                                                             </span>
<span  style=""> 691                                                                                                                    </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style=""> 692      private void saveNote() {                                                                                     </span>




<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style=""> 693          String content = getNoteContentString();                                                                  </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 694          String tagString = getNoteTagsString();                                                                   </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 695          if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                                </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 696              mNote.setContent(content);                                                                            </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 697              mNote.setTagString(tagString);                                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 698              mNote.setModificationDate(Calendar.getInstance());                                                    </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 699              // Send pinned event to google analytics if changed                                                   </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 700              mNote.setPinned(mPinButton.isChecked());                                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 701              mNote.save();                                                                                         </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 702              if (getActivity() != null) {                                                                          </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 703                  Tracker tracker = EasyTracker.getTracker();                                                       </span>
<span class="7411383674080963289" onmouseenter="enter('7411383674080963289');" onmouseout="out('7411383674080963289');" style=""> 704                  if (mNote.isPinned() != mPinButton.isChecked())                                                   </span>
<span class="1805524535551115774" onmouseenter="enter('1805524535551115774');" onmouseout="out('1805524535551115774');" style=""><abbr title=" 705                      tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 705                      tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_butðŸ”µ</abbr></span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 706                  tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 708          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709      }                                                                                                             </span>
<span  style=""> 710                                                                                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 711      // Contextual action bar for dealing with links                                                               </span>
<span class="-23103958784499667" onmouseenter="enter('-23103958784499667');" onmouseout="out('-23103958784499667');" style=""> 712      private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                                 </span>
<span  style=""> 713                                                                                                                    </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 714          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 715          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 716          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 717              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 718              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span class="-5537764272582475285" onmouseenter="enter('-5537764272582475285');" onmouseout="out('-5537764272582475285');" style=""> 719              if (inflater != null){                                                                                </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 720                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 721                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 722                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style=""> 723                  if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                         </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 724                      mode.setTitleOptionalHint(false);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726              }                                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 727              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728          }                                                                                                         </span>
<span  style=""> 729                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 730          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 731          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 732          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 733          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 734              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735          }                                                                                                         </span>
<span  style=""> 736                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 737          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 738          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 739          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 740              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 741                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 742                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 743                          try {                                                                                     </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 744                              Uri uri = Uri.parse(mLinkUrl);                                                        </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 745                              Intent i = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 746                              i.setData(uri);                                                                       </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 747                              startActivity(i);                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 748                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 749                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750                          }                                                                                         </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 751                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 753                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 754                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 755                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 756                          ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 756                          ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style=""> 757                          ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);            </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 758                          clipboard.setPrimaryClip(clip);                                                           </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 759                          Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();</span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 760                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 762                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 763                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 764                      if (mLinkText != null) {                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 765                          try {                                                                                     </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 766                              Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                  </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 767                              shareIntent.setType(&quot;text/plain&quot;);                                                    </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style=""> 768                              shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);                   </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 769                              startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 769                              startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.sharðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 770                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 771                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772                          }                                                                                         </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 773                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 775                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 776                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 777                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779          }                                                                                                         </span>
<span  style=""> 780                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 781          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 782          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 783          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 784              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 786      };                                                                                                            </span>
<span  style=""> 787                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style=""> 788      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style=""> 789      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 790      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style=""> 791      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style=""> 792          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style=""> 793              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style=""> 794              if (noteContent == null)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 795                  return;                                                                                           </span>
<span  style=""> 796                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style=""> 797              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style=""> 798              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style=""> 799                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style=""> 800                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title=" 801                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();"> 801                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 802                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 803                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 804                      setLinkMenuItem();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 805                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806                  }                                                                                                 </span>
<span  style=""> 807                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style=""> 808                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 809                  if (getActivity() != null) {                                                                      </span>
<span class="-7828194884341615795" onmouseenter="enter('-7828194884341615795');" onmouseout="out('-7828194884341615795');" style=""> 810                      mActionMode = getActivity().startActionMode(mActionModeCallback);                             </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 811                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 812                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 813                      }                                                                                             </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 814                      setLinkMenuItem();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 816              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 817                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 818                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 820          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 821              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 822              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824      }                                                                                                             </span>
<span  style=""> 825                                                                                                                    </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style=""> 826      private void setLinkMenuItem() {                                                                              </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style=""> 827          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style=""> 828              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="4608769072092705594" onmouseenter="enter('4608769072092705594');" onmouseout="out('4608769072092705594');" style=""> 829                  mViewLinkMenuItem.setIcon(mCallIconResId);                                                        </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style=""> 830                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style=""> 831              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="112818067677115399" onmouseenter="enter('112818067677115399');" onmouseout="out('112818067677115399');" style=""> 832                  mViewLinkMenuItem.setIcon(mEmailIconResId);                                                       </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style=""> 833                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style=""> 834              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-5464734295170160558" onmouseenter="enter('-5464734295170160558');" onmouseout="out('-5464734295170160558');" style=""> 835                  mViewLinkMenuItem.setIcon(mMapIconResId);                                                         </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style=""> 836                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 837              } else {                                                                                              </span>
<span class="-4632312324298999235" onmouseenter="enter('-4632312324298999235');" onmouseout="out('-4632312324298999235');" style=""> 838                  mViewLinkMenuItem.setIcon(mWebIconResId);                                                         </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style=""> 839                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 841          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842      }                                                                                                             </span>
<span  style=""> 843                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 844      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style=""> 845      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style=""> 846                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847      }                                                                                                             </span>
<span  style=""> 848                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 849      @Override                                                                                                     </span>
<span class="-391573795721253888" onmouseenter="enter('-391573795721253888');" onmouseout="out('-391573795721253888');" style=""> 850      public void onChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {               </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style=""> 851          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style=""> 852              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 853                  try {                                                                                             </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style=""> 854                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 855                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 856                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 857                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 858                              public void run() {                                                                   </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style=""> 859                                  updateNote(updatedNote);                                                          </span>
<span class="970005468838694125" onmouseenter="enter('970005468838694125');" onmouseout="out('970005468838694125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 860 +                                updatePublishDialogContent();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 862                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 864                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 865                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869      }                                                                                                             </span>
<span  style=""> 870                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 871      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style=""> 872      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style=""> 873          // noop                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 874      }                                                                                                             </span>
<span  style=""> 875                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 876      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 877      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style=""> 878          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style=""> 879          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 880              return;                                                                                               </span>
<span  style=""> 881                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style=""> 882          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style=""> 883          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 884              return;                                                                                               </span>
<span  style=""> 885                                                                                                                    </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style=""> 886          note.setContent(getNoteContentString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>

<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4  import android.app.Fragment;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   5  import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   6  import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   7  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   8  import android.content.Intent;                                                                                    </span>
<span class="-840652079464298178" onmouseenter="enter('-840652079464298178');" onmouseout="out('-840652079464298178');" style="">   9  import android.content.res.TypedArray;                                                                            </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  10  import android.database.Cursor;                                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  11  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  12  import android.os.AsyncTask;                                                                                      </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  13  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  14  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  15  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  16  import android.text.Editable;                                                                                     </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  17  import android.text.SpannableString;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  18  import android.text.Spanned;                                                                                      </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  19  import android.text.TextUtils;                                                                                    </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  20  import android.text.TextWatcher;                                                                                  </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  21  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  22  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  23  import android.text.util.Linkify;                                                                                 </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  24  import android.view.ActionMode;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  25  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  26  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  27  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  28  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  29  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  30  import android.view.ViewGroup;                                                                                    </span>


<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31  import android.view.inputmethod.InputMethodManager;                                                               </span>

<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  32  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  33  import android.widget.LinearLayout;                                                                               </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  34  import android.widget.MultiAutoCompleteTextView.Tokenizer;                                                        </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  35  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  36  import android.widget.Toast;                                                                                      </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  37  import android.widget.ToggleButton;                                                                               </span>
<span  style="">  38                                                                                                                    </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  39  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  40  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  41  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="7629762131910067592" onmouseenter="enter('7629762131910067592');" onmouseout="out('7629762131910067592');" style="">  42  import com.automattic.simplenote.utils.SimplenoteEditText;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  43  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  44  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  45  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  46  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="">  47  import com.automattic.simplenote.utils.Typefaces;                                                                 </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  48  import com.google.analytics.tracking.android.EasyTracker;                                                         </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  49  import com.google.analytics.tracking.android.Tracker;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  50  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  51  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  52  import com.simperium.client.Query;                                                                                </span>
<span  style="">  53                                                                                                                    </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  54  import java.util.Calendar;                                                                                        </span>
<span  style="">  55                                                                                                                    </span>
<span class="7280890691619564888" onmouseenter="enter('7280890691619564888');" onmouseout="out('7280890691619564888');" style=""><abbr title="  56  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListener, View.OnFocusChangeListener, SimplenoteEditText.OnSelectionChangedListener {">  56  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListenerðŸ”µ</abbr></span>
<span  style="">  57                                                                                                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  58      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  59      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  60      static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  61      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span  style="">  62                                                                                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  63      private Note mNote;                                                                                           </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  64      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span  style="">  65                                                                                                                    </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  66      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  67      private TagsMultiAutoCompleteTextView mTagView;                                                               </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  68      private ToggleButton mPinButton;                                                                              </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  69      private Handler mAutoSaveHandler;                                                                             </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  70      private LinearLayout mPlaceholderView;                                                                        </span>

<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  71      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="275494556225166536" onmouseenter="enter('275494556225166536');" onmouseout="out('275494556225166536');" style="">  72      private boolean mIsNewNote, mIsLoadingNote;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style="">  73      private ActionMode mActionMode;                                                                               </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style="">  74      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style="">  75      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style="">  76      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style="">  77      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-2809999858206249165" onmouseenter="enter('-2809999858206249165');" onmouseout="out('-2809999858206249165');" style="">  78      private int mEmailIconResId, mWebIconResId, mMapIconResId, mCallIconResId;                                    </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style="">  79      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style="">  80      private String mMatchOffsets;                                                                                 </span>
<span  style="">  81                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  82      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  83       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  84       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  85       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  86      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87      }                                                                                                             </span>
<span  style="">  88                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  89      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  90      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  91          super.onCreate(savedInstanceState);                                                                       </span>
<span  style="">  92                                                                                                                    </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">  93          if (getActivity() != null) {                                                                              </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  94              Simplenote currentApp = (Simplenote) getActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style="">  95              mNotesBucket = currentApp.getNotesBucket();                                                           </span>
<span  style="">  96                                                                                                                    </span>
<span class="6390134422937918444" onmouseenter="enter('6390134422937918444');" onmouseout="out('6390134422937918444');" style=""><abbr title="  97              TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionBarIconWeb, R.attr.actionBarIconMap, R.attr.actionBarIconCall});">  97              TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionðŸ”µ</abbr></span>
<span class="-368005650607593546" onmouseenter="enter('-368005650607593546');" onmouseout="out('-368005650607593546');" style="">  98              if (a != null) {                                                                                      </span>
<span class="156477903530707073" onmouseenter="enter('156477903530707073');" onmouseout="out('156477903530707073');" style="">  99                  mEmailIconResId = a.getResourceId(0, 0);                                                          </span>
<span class="2237960387607406884" onmouseenter="enter('2237960387607406884');" onmouseout="out('2237960387607406884');" style=""> 100                  mWebIconResId = a.getResourceId(1, 0);                                                            </span>
<span class="-2587404817224189880" onmouseenter="enter('-2587404817224189880');" onmouseout="out('-2587404817224189880');" style=""> 101                  mMapIconResId = a.getResourceId(2, 0);                                                            </span>
<span class="7397862531502718567" onmouseenter="enter('7397862531502718567');" onmouseout="out('7397862531502718567');" style=""> 102                  mCallIconResId = a.getResourceId(3, 0);                                                           </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style=""> 103                  a.recycle();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105          }                                                                                                         </span>
<span  style=""> 106                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 107          mAutoSaveHandler = new Handler();                                                                         </span>
<span  style=""> 108                                                                                                                    </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 109          mMatchHighlighter = new TextHighlighter(getActivity(),                                                    </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 110                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="3992270686517948303" onmouseenter="enter('3992270686517948303');" onmouseout="out('3992270686517948303');" style=""> 111          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0){                                       </span>
<span  style=""> 112                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 114              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 115                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 116                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 117                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118              }                                                                                                     </span>
<span  style=""> 119                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 120              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 121              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 122                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 123                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124              }                                                                                                     </span>
<span  style=""> 125                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 126              @Override                                                                                             </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 127              public CharSequence convertToString(Cursor cursor){                                                   </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 128                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129              }                                                                                                     </span>
<span  style=""> 130                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 132              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 133                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 134                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 135                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 136                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 137                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 138                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 139                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 140                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 141                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 142                  if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 142                  if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%ðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 143                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 145          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146      }                                                                                                             </span>
<span  style=""> 147                                                                                                                    </span>
<span  style=""> 148                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 149      @Override                                                                                                     </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 150      public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {           </span>

<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 151          View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                        </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 152          mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));                       </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 153          if (getActivity() != null) {                                                                              </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style=""><abbr title=" 154              mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));"> 154              mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATHðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155          }                                                                                                         </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 156          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 157          mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                          </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 158          mTagView.setTokenizer(new SpaceTokenizer());                                                              </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style=""> 159          mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));         </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 160          mTagView.setOnFocusChangeListener(this);                                                                  </span>
<span  style=""> 161                                                                                                                    </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 162          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span  style=""> 163                                                                                                                    </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style=""> 164          mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                                        </span>
<span class="-6233419192957625397" onmouseenter="enter('-6233419192957625397');" onmouseout="out('-6233419192957625397');" style=""> 165          mPinButton.setOnClickListener(new View.OnClickListener() {                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 166              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 167              public void onClick(View v) {                                                                         </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style=""> 168                  if (mPinButton.isChecked()) {                                                                     </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style=""> 169                      // Friendly message to the user as to what this button does.                                  </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style=""> 170                      Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 173          });                                                                                                       </span>
<span  style=""> 174                                                                                                                    </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 175          mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                                </span>
<span class="8670904764944796201" onmouseenter="enter('8670904764944796201');" onmouseout="out('8670904764944796201');" style=""><abbr title=" 176          if ((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)"> 176          if ((getActivity() instanceof NotesActivity) &amp;&amp; ((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;ðŸ”µ</abbr></span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 177              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span  style=""> 178                                                                                                                    </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 179          mTagView.setAdapter(mAutocompleteAdapter);                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 180 +                                                                                                                  </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 181 +        // Load note if we were passed a note Id                                                                  </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 182 +        Bundle arguments = getArguments();                                                                        </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 183 +        if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 184 +            String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +            if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 186 +                mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 187 +            }                                                                                                     </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 188 +            new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                            </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +            setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 190 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 191 +                                                                                                                  </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 192  		return rootView;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193  	}                                                                                                                </span>
<span  style=""> 194                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 195      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 196      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 197          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 198          mNotesBucket.start();                                                                                     </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 199          mNotesBucket.addListener(this);                                                                           </span>
<span  style=""> 200                                                                                                                    </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 201          mTagView.setOnTagAddedListener(this);                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 202 -                                                                                                                  </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 203 -        Bundle arguments = getArguments();                                                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 204 -                                                                                                                  </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 205 -        if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 206 -            String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="526740986280926199" onmouseenter="enter('526740986280926199');" onmouseout="out('526740986280926199');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 207 -            if (arguments.containsKey(ARG_MATCH_OFFSETS))                                                         </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 208 -                mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 209 -            new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                            </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 210 -            setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 211 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 212 -                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213      }                                                                                                             </span>
<span  style=""> 214                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 215      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 216      public void onPause() {                                                                                       </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 217          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 218          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 219          if (getActivity() != null) {                                                                              </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 220              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 220              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 221 -            if (inputMethodManager != null)                                                                       </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 222 +            if (inputMethodManager != null) {                                                                     </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 223                  inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 224 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 225 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 226 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +                                                                                                                  </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 228          // Delete the note if it is new and has empty fields                                                      </span>
<span class="7263350987785388811" onmouseenter="enter('7263350987785388811');" onmouseout="out('7263350987785388811');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 229 -        if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty())                                                         </span>
<span class="-2219905285758853631" onmouseenter="enter('-2219905285758853631');" onmouseout="out('-2219905285758853631');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 230 +        if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty()) {                                                       </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 231              mNote.delete();                                                                                       </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 232 -        else                                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 233 +        } else {                                                                                                  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 234              saveNote();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 235 +        }                                                                                                         </span>
<span  style=""> 236                                                                                                                    </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 237          mTagView.setOnTagAddedListener(null);                                                                     </span>
<span  style=""> 238                                                                                                                    </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 239 -        if (mAutoSaveHandler != null)                                                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 240 +        if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 241              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 242 +        }                                                                                                         </span>
<span  style=""> 243                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 244          mHighlighter.stop();                                                                                      </span>
<span  style=""> 245                                                                                                                    </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 246          super.onPause();                                                                                          </span>

























































































































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247      }                                                                                                             </span>
<span  style=""> 248                                                                                                                    </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 249      private boolean noteIsEmpty() {                                                                               </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 250          return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251      }                                                                                                             </span>
<span  style=""> 252                                                                                                                    </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 253      public void setNote(String noteID){                                                                           </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 254          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255      }                                                                                                             </span>
<span  style=""> 256                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 257      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 258          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 259              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span  style=""> 260                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 261          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 262                                                                                                                    </span>
<span class="2077738191995360697" onmouseenter="enter('2077738191995360697');" onmouseout="out('2077738191995360697');" style=""> 263          if (matchOffsets != null)                                                                                 </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 264              mMatchOffsets = matchOffsets;                                                                         </span>
<span  style=""> 265                                                                                                                    </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 266          // If we have a note already (on a tablet in landscape), save the note.                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 267          if (mNote != null) {                                                                                      </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 268              if (mIsNewNote &amp;&amp; noteIsEmpty())                                                                      </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 269                  mNote.delete();                                                                                   </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 270              else if (mNote != null)                                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 271                  saveNote();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272          }                                                                                                         </span>
<span  style=""> 273                                                                                                                    </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 274          new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275      }                                                                                                             </span>
<span  style=""> 276                                                                                                                    </span>
<span class="-3433185850424102984" onmouseenter="enter('-3433185850424102984');" onmouseout="out('-3433185850424102984');" style=""> 277      public void updateNote(Note updatedNote) {                                                                    </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 278          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 279          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 280          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281      }                                                                                                             </span>
<span  style=""> 282                                                                                                                    </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 283      public void refreshContent(boolean isNoteUpdate) {                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 284          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 285              // Restore the cursor position if possible.                                                           </span>
<span  style=""> 286                                                                                                                    </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 287              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 287              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span  style=""> 288                                                                                                                    </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 289              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 290                                                                                                                    </span>
<span class="2384177704135095384" onmouseenter="enter('2384177704135095384');" onmouseout="out('2384177704135095384');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 291 -            if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd())"> 291 -            if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd(ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 292 -                mContentEditText.setSelection(cursorPosition);                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 293 +            if (isNoteUpdate) {                                                                                   </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 294 +                // Save the note so any local changes get synced                                                  </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 295 +                mNote.save();                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 296 +                                                                                                                  </span>
<span class="-5094013145931261947" onmouseenter="enter('-5094013145931261947');" onmouseout="out('-5094013145931261947');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 297 +                if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) {        </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 298 +                    mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 299 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 300 +            }                                                                                                     </span>
<span  style=""> 301                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 302              afterTextChanged(mContentEditText.getText());                                                         </span>
<span  style=""> 303                                                                                                                    </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 304              mPinButton.setChecked(mNote.isPinned());                                                              </span>
<span  style=""> 305                                                                                                                    </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 306              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308      }                                                                                                             </span>
<span  style=""> 309                                                                                                                    </span>
<span class="-5496131723873966197" onmouseenter="enter('-5496131723873966197');" onmouseout="out('-5496131723873966197');" style=""> 310      public void updateTagList() {                                                                                 </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 311          Activity activity = getActivity();                                                                        </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 312          if (activity == null) return;                                                                             </span>
<span  style=""> 313                                                                                                                    </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 314          // Populate this note&#x27;s tags in the tagView                                                               </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 315          mTagView.setChips(mNote.getTagString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316      }                                                                                                             </span>
<span  style=""> 317                                                                                                                    </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 318      int newCursorLocation(String newText, String oldText, int cursorLocation) {                                   </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 319          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 320          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 321          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 322          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 323          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 324          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 325          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 326          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 327                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 328          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 329                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 330          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 331                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 332          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 333          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 334              return newText.length();                                                                              </span>
<span  style=""> 335                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 336          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 337          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 338                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 339          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 340              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 340              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 341              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 341              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 342          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 343              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344          }                                                                                                         </span>
<span  style=""> 345                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 346          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 347          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 348              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 349                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 350          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 351          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352      }                                                                                                             </span>
<span  style=""> 353                                                                                                                    </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 354      private Runnable autoSaveRunnable = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 355          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 356          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 357              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 359      };                                                                                                            </span>
<span  style=""> 360                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 361      @Override                                                                                                     </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 362      public void onTagsChanged(String tagString) {                                                                 </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 363          if (mNote == null)                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 364              return;                                                                                               </span>
<span class="-9151826850815990618" onmouseenter="enter('-9151826850815990618');" onmouseout="out('-9151826850815990618');" style=""><abbr title=" 365          if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length())"> 365          if (getActivity() != null &amp;&amp; mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().lenðŸ”µ</abbr></span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 366              EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 367          else                                                                                                      </span>
<span class="8421196898283215417" onmouseenter="enter('8421196898283215417');" onmouseout="out('8421196898283215417');" style=""> 368              EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;removed_tag&quot;, &quot;tag_removed_from_note&quot;, null);             </span>
<span  style=""> 369                                                                                                                    </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 370          mNote.setTagString(tagString);                                                                            </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 371          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 372          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 373          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374      }                                                                                                             </span>
<span  style=""> 375                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 376      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 377      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 378          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379      }                                                                                                             </span>
<span  style=""> 380                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 381      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 382      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 383          // Set the note title to be a larger size                                                                 </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 384          // Remove any existing size spans                                                                         </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 385          RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);               </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 386          for (RelativeSizeSpan span : spans) {                                                                     </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 387              editable.removeSpan(span);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388          }                                                                                                         </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 389          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 390          if (newLinePosition == 0)                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 391              return;                                                                                               </span>
<span class="3283000540261653525" onmouseenter="enter('3283000540261653525');" onmouseout="out('3283000540261653525');" style=""><abbr title=" 392          editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 392          editable.setSpan(new RelativeSizeSpan(1.222f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.lengtðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393      }                                                                                                             </span>
<span  style=""> 394                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 395      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 396      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span  style=""> 397                                                                                                                    </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 398          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 399          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 400              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 401              mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402          }                                                                                                         </span>
<span  style=""> 403                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 404          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 405          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 406              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 407              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409      }                                                                                                             </span>
<span  style=""> 410                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 411      private void saveAndSyncNote() {                                                                              </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 412          if (mNote == null)                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 413              return;                                                                                               </span>
<span  style=""> 414                                                                                                                    </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 415          new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416      }                                                                                                             </span>
<span  style=""> 417                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 418      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 419          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 420              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 421              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 422              mTagView.setText(&quot;&quot;);                                                                                 </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 423              if (mPlaceholderView != null)                                                                         </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 424                  mPlaceholderView.setVisibility(View.VISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 425          } else {                                                                                                  </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 426              if (mPlaceholderView != null)                                                                         </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 427                  mPlaceholderView.setVisibility(View.GONE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429      }                                                                                                             </span>
<span  style=""> 430                                                                                                                    </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 431      public void setIsNewNote(boolean isNewNote) {                                                                 </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 432          this.mIsNewNote = isNewNote;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433      }                                                                                                             </span>
<span  style=""> 434                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 435      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 436      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 437          if (!hasFocus) {                                                                                          </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 438              String tagString = getNoteTagsString().trim();                                                        </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 439              if (tagString.length() &gt; 0) {                                                                         </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 440                  mTagView.setChips(tagString);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443      }                                                                                                             </span>
<span  style=""> 444                                                                                                                    </span>
<span class="-6849832043716883515" onmouseenter="enter('-6849832043716883515');" onmouseout="out('-6849832043716883515');" style=""> 445      public Note getNote() {                                                                                       </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 446          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447      }                                                                                                             </span>
<span  style=""> 448                                                                                                                    </span>
<span class="5855058962481175207" onmouseenter="enter('5855058962481175207');" onmouseout="out('5855058962481175207');" style=""> 449      public String getNoteContentString() {                                                                        </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 450          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 451              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 452          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 453              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455      }                                                                                                             </span>
<span  style=""> 456                                                                                                                    </span>
<span class="2486113532203564324" onmouseenter="enter('2486113532203564324');" onmouseout="out('2486113532203564324');" style=""> 457      public String getNoteTagsString() {                                                                           </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 458          if (mTagView == null || mTagView.getText() == null) {                                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 459              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 460          } else {                                                                                                  </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 461              return mTagView.getText().toString();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463      }                                                                                                             </span>
<span  style=""> 464                                                                                                                    </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 465      // Use spaces in tag autocompletion list                                                                      </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 466      // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 466      // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiaðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 467      public class SpaceTokenizer implements Tokenizer {                                                            </span>
<span  style=""> 468                                                                                                                    </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 469          public int findTokenStart(CharSequence text, int cursor) {                                                </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 470              int i = cursor;                                                                                       </span>
<span  style=""> 471                                                                                                                    </span>
<span class="885050749614268129" onmouseenter="enter('885050749614268129');" onmouseout="out('885050749614268129');" style=""> 472              while (i &gt; 0 &amp;&amp; text.charAt(i - 1) != &#x27; &#x27;) {                                                          </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 473                  i--;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474              }                                                                                                     </span>
<span class="9056743128114431706" onmouseenter="enter('9056743128114431706');" onmouseout="out('9056743128114431706');" style=""> 475              while (i &lt; cursor &amp;&amp; text.charAt(i) == &#x27; &#x27;) {                                                         </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 476                  i++;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477              }                                                                                                     </span>
<span  style=""> 478                                                                                                                    </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 479              return i;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480          }                                                                                                         </span>
<span  style=""> 481                                                                                                                    </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 482          public int findTokenEnd(CharSequence text, int cursor) {                                                  </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 483              int i = cursor;                                                                                       </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 484              int len = text.length();                                                                              </span>
<span  style=""> 485                                                                                                                    </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 486              while (i &lt; len) {                                                                                     </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 487                  if (text.charAt(i) == &#x27; &#x27;) {                                                                      </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 488                      return i;                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 489                  } else {                                                                                          </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 490                      i++;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492              }                                                                                                     </span>
<span  style=""> 493                                                                                                                    </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 494              return len;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495          }                                                                                                         </span>
<span  style=""> 496                                                                                                                    </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 497          public CharSequence terminateToken(CharSequence text) {                                                   </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 498              int i = text.length();                                                                                </span>
<span  style=""> 499                                                                                                                    </span>
<span class="-2645617250828763966" onmouseenter="enter('-2645617250828763966');" onmouseout="out('-2645617250828763966');" style=""> 500              while (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                          </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 501                  i--;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502              }                                                                                                     </span>
<span  style=""> 503                                                                                                                    </span>
<span class="-6208188263403401654" onmouseenter="enter('-6208188263403401654');" onmouseout="out('-6208188263403401654');" style=""> 504              if (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                             </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 505                  return text;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 506              } else {                                                                                              </span>
<span class="-8407561526953236331" onmouseenter="enter('-8407561526953236331');" onmouseout="out('-8407561526953236331');" style=""> 507                  if (text instanceof Spanned) {                                                                    </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 508                      SpannableString sp = new SpannableString(text + &quot; &quot;);                                         </span>
<span class="4069757121373026619" onmouseenter="enter('4069757121373026619');" onmouseout="out('4069757121373026619');" style=""> 509                      TextUtils.copySpansFrom((Spanned) text, 0, text.length(),                                     </span>
<span class="-4923471023181178896" onmouseenter="enter('-4923471023181178896');" onmouseout="out('-4923471023181178896');" style=""> 510                              Object.class, sp, 0);                                                                 </span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 511                      return sp;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 512                  } else {                                                                                          </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 513                      return text + &quot; &quot;;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517      }                                                                                                             </span>
<span  style=""> 518                                                                                                                    </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 519      private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                            </span>
<span  style=""> 520                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 521          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 522          protected void onPreExecute() {                                                                           </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 523              mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                                  </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 524              mIsLoadingNote = true;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525          }                                                                                                         </span>
<span  style=""> 526                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 527          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 528          protected Void doInBackground(String... args) {                                                           </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 529 +            if (getActivity() == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 530 +                return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 531 +            }                                                                                                     </span>
<span  style=""> 532                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 533              String noteID = args[0];                                                                              </span>
<span class="-4819314506084115698" onmouseenter="enter('-4819314506084115698');" onmouseout="out('-4819314506084115698');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 534 -            if (getActivity() == null)                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 535 -                return null;                                                                                      </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 536              Simplenote application = (Simplenote) getActivity().getApplication();                                 </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 537              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 538              try {                                                                                                 </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 539                  mNote = notesBucket.get(noteID);                                                                  </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 540                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 541                  if (getActivity() instanceof NotesActivity) {                                                     </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style=""> 542                      ((NotesActivity) getActivity()).setCurrentNote(mNote);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 544              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 545                  // TODO: Handle a missing note                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 547              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548          }                                                                                                         </span>
<span  style=""> 549                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 550          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 551          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style=""> 552              if (getActivity() == null || getActivity().isFinishing())                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 553                  return;                                                                                           </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 554 -            refreshContent(true);                                                                                 </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 555 +            refreshContent(false);                                                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 556              if (mMatchOffsets != null) {                                                                          </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 557                  int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 557                  int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 558                  mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559              }                                                                                                     </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 560              mContentEditText.addTextChangedListener(NoteEditorFragment.this);                                     </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 561              if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                                  </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 562                  // Show soft keyboard                                                                             </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 563                  mContentEditText.requestFocus();                                                                  </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 564                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 565                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 566                      public void run() {                                                                           </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 567                          InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 567                          InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServicðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 568                          if (inputMethodManager != null)                                                           </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 569                              inputMethodManager.showSoftInput(mContentEditText, 0);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 571                  }, 100);                                                                                          </span>
<span  style=""> 572                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573              }                                                                                                     </span>
<span  style=""> 574                                                                                                                    </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 575              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span  style=""> 576                                                                                                                    </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 577              mIsLoadingNote = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579      }                                                                                                             </span>
<span  style=""> 580                                                                                                                    </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 581      private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                              </span>
<span  style=""> 582                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 583          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 584          protected Void doInBackground(Void... args) {                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 585              saveNote();                                                                                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 586              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587          }                                                                                                         </span>
<span  style=""> 588                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 589          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 590          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style=""> 591              if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                          </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style=""> 592                  // Update links                                                                                   </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 593                  SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596      }                                                                                                             </span>
<span  style=""> 597                                                                                                                    </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style=""> 598      private void saveNote() {                                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 599 +        if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 600 +            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 601 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 602 +                                                                                                                  </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style=""> 603          String content = getNoteContentString();                                                                  </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 604          String tagString = getNoteTagsString();                                                                   </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 605          if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                                </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 606              mNote.setContent(content);                                                                            </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 607              mNote.setTagString(tagString);                                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 608              mNote.setModificationDate(Calendar.getInstance());                                                    </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 609              // Send pinned event to google analytics if changed                                                   </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 610              mNote.setPinned(mPinButton.isChecked());                                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 611              mNote.save();                                                                                         </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 612              if (getActivity() != null) {                                                                          </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 613                  Tracker tracker = EasyTracker.getTracker();                                                       </span>
<span class="7411383674080963289" onmouseenter="enter('7411383674080963289');" onmouseout="out('7411383674080963289');" style=""> 614                  if (mNote.isPinned() != mPinButton.isChecked())                                                   </span>
<span class="1805524535551115774" onmouseenter="enter('1805524535551115774');" onmouseout="out('1805524535551115774');" style=""><abbr title=" 615                      tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 615                      tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_butðŸ”µ</abbr></span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 616                  tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619      }                                                                                                             </span>
<span  style=""> 620                                                                                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 621      // Contextual action bar for dealing with links                                                               </span>
<span class="-23103958784499667" onmouseenter="enter('-23103958784499667');" onmouseout="out('-23103958784499667');" style=""> 622      private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                                 </span>
<span  style=""> 623                                                                                                                    </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 624          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 625          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 626          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 627              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 628              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span class="-5537764272582475285" onmouseenter="enter('-5537764272582475285');" onmouseout="out('-5537764272582475285');" style=""> 629              if (inflater != null){                                                                                </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 630                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 631                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 632                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style=""> 633                  if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                         </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 634                      mode.setTitleOptionalHint(false);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636              }                                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 637              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638          }                                                                                                         </span>
<span  style=""> 639                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 640          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 641          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 642          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 643          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 644              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645          }                                                                                                         </span>
<span  style=""> 646                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 647          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 648          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 649          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 650              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 651                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 652                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 653                          try {                                                                                     </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 654                              Uri uri = Uri.parse(mLinkUrl);                                                        </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 655                              Intent i = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 656                              i.setData(uri);                                                                       </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 657                              startActivity(i);                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 658                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 659                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660                          }                                                                                         </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 661                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 663                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 664                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 665                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 666                          ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 666                          ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style=""> 667                          ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);            </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 668                          clipboard.setPrimaryClip(clip);                                                           </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 669                          Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();</span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 670                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 672                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 673                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 674                      if (mLinkText != null) {                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 675                          try {                                                                                     </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 676                              Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                  </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 677                              shareIntent.setType(&quot;text/plain&quot;);                                                    </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style=""> 678                              shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);                   </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 679                              startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 679                              startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.sharðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 680                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 681                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682                          }                                                                                         </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 683                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 685                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 686                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 687                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689          }                                                                                                         </span>
<span  style=""> 690                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 691          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 692          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 693          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 694              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 696      };                                                                                                            </span>
<span  style=""> 697                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style=""> 698      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style=""> 699      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 700      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style=""> 701      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style=""> 702          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style=""> 703              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style=""> 704              if (noteContent == null)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 705                  return;                                                                                           </span>
<span  style=""> 706                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style=""> 707              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style=""> 708              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style=""> 709                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style=""> 710                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title=" 711                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();"> 711                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 712                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 713                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 714                      setLinkMenuItem();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 715                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716                  }                                                                                                 </span>
<span  style=""> 717                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style=""> 718                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 719                  if (getActivity() != null) {                                                                      </span>
<span class="-7828194884341615795" onmouseenter="enter('-7828194884341615795');" onmouseout="out('-7828194884341615795');" style=""> 720                      mActionMode = getActivity().startActionMode(mActionModeCallback);                             </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 721                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style=""> 722                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723                      }                                                                                             </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style=""> 724                      setLinkMenuItem();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 726              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 727                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 728                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style=""> 730          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style=""> 731              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 732              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734      }                                                                                                             </span>
<span  style=""> 735                                                                                                                    </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style=""> 736      private void setLinkMenuItem() {                                                                              </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style=""> 737          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style=""> 738              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="4608769072092705594" onmouseenter="enter('4608769072092705594');" onmouseout="out('4608769072092705594');" style=""> 739                  mViewLinkMenuItem.setIcon(mCallIconResId);                                                        </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style=""> 740                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style=""> 741              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="112818067677115399" onmouseenter="enter('112818067677115399');" onmouseout="out('112818067677115399');" style=""> 742                  mViewLinkMenuItem.setIcon(mEmailIconResId);                                                       </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style=""> 743                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style=""> 744              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-5464734295170160558" onmouseenter="enter('-5464734295170160558');" onmouseout="out('-5464734295170160558');" style=""> 745                  mViewLinkMenuItem.setIcon(mMapIconResId);                                                         </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style=""> 746                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 747              } else {                                                                                              </span>
<span class="-4632312324298999235" onmouseenter="enter('-4632312324298999235');" onmouseout="out('-4632312324298999235');" style=""> 748                  mViewLinkMenuItem.setIcon(mWebIconResId);                                                         </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style=""> 749                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752      }                                                                                                             </span>
<span  style=""> 753                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 754      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style=""> 755      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style=""> 756                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757      }                                                                                                             </span>
<span  style=""> 758                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 759      @Override                                                                                                     </span>
<span class="-391573795721253888" onmouseenter="enter('-391573795721253888');" onmouseout="out('-391573795721253888');" style=""> 760      public void onChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {               </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style=""> 761          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style=""> 762              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 763                  try {                                                                                             </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style=""> 764                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 765                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 766                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 767                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 768                              public void run() {                                                                   </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style=""> 769                                  updateNote(updatedNote);                                                          </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 771                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 773                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 774                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778      }                                                                                                             </span>
<span  style=""> 779                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 780      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style=""> 781      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style=""> 782          // noop                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783      }                                                                                                             </span>
<span  style=""> 784                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 785      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 786      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style=""> 787          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style=""> 788          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 789              return;                                                                                               </span>
<span  style=""> 790                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style=""> 791          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style=""> 792          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 793              return;                                                                                               </span>
<span  style=""> 794                                                                                                                    </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style=""> 795          note.setContent(getNoteContentString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            