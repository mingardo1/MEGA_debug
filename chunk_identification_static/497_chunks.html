<!DOCTYPE html>
<html lang="en">
          <head>
            <meta charset="utf-8">
            <title>497 chunks</title>
                <style>
                    #top {
                        height: 48vh;
                        overflow-y: auto;
                    }
                    #bottom {
                        height: 48vh;
                        overflow-y: auto;
                    }
                </style>
          </head>
          <body>
            <pre>[[{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false) &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(FIRST_RUN_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;LauncherAppState.getLauncherProvider().wasNewDbCreated();\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;    public static void &#x27;
                         &#x27;synchonouslyMarkFirstRunClingDismissed(Context ctx) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;        SharedPreferences prefs = &#x27;
                         &#x27;ctx.getSharedPreferences(\n&#x27;
                         &#x27;                &#x27;
                         &#x27;LauncherAppState.getSharedPreferencesKey(), &#x27;
                         &#x27;Context.MODE_PRIVATE);\n&#x27;
                         &#x27;        SharedPreferences.Editor editor = &#x27;
                         &#x27;prefs.edit();\n&#x27;
                         &#x27;        &#x27;
                         &#x27;editor.putBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;true);\n&#x27;
                         &#x27;        editor.commit();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;    public void removeFirstRunAndMigrationClings() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        removeCling(R.id.first_run_cling);\n&#x27;
                           &#x27;        removeCling(R.id.migration_cling);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the first run cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showMigrationCling, and only runs if this &#x27;
                           &#x27;Launcher\n&#x27;
                           &#x27;     * package was preinstalled or there is no db &#x27;
                           &#x27;to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showFirstRunCling() {\n&#x27;
                           &#x27;        if (!skipCustomClingIfNoAccounts()) {\n&#x27;
                           &#x27;            SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &quot;            // If we&#x27;re not using the default &quot;
                           &#x27;workspace layout, replace workspace cling\n&#x27;
                           &#x27;            // with a custom workspace cling &#x27;
                           &#x27;(usually specified in an overlay)\n&#x27;
                           &#x27;            // For now, only do this on tablets\n&#x27;
                           &#x27;            if (!DISABLE_CUSTOM_CLINGS) {\n&#x27;
                           &#x27;                if &#x27;
                           &#x27;(sharedPrefs.getInt(LauncherProvider.DEFAULT_WORKSPACE_RESOURCE_ID, &#x27;
                           &#x27;0) != 0 &amp;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;mLauncher.getResources().getBoolean(R.bool.config_useCustomClings)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                    // Use a custom cling\n&#x27;
                           &#x27;                    View cling = &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;                    ViewGroup clingParent = &#x27;
                           &#x27;(ViewGroup) cling.getParent();\n&#x27;
                           &#x27;                    int clingIndex = &#x27;
                           &#x27;clingParent.indexOfChild(cling);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.removeViewAt(clingIndex);\n&#x27;
                           &#x27;                    View customCling = &#x27;
                           &#x27;mInflater.inflate(R.layout.custom_workspace_cling,\n&#x27;
                           &#x27;                            clingParent, false);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.addView(customCling, clingIndex);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;customCling.setId(R.id.workspace_cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                String sbHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunClingSearchBarHint();\n&#x27;
                           &#x27;                String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;                if (!sbHintStr.isEmpty()) {\n&#x27;
                           &#x27;                    TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;                    sbHint.setText(sbHintStr);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, false);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            initCling(R.id.first_run_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeFirstRunAndMigrationClings();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the migration cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showFirstRunCling, and only runs if this Launcher\n&#x27;
                           &#x27;     * package was not preinstalled and there &#x27;
                           &#x27;exists a db to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.hideWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        Cling c = initCling(R.id.migration_cling, &#x27;
                           &#x27;0, false, true);\n&#x27;
                           &#x27;        c.bringScrimToFront();\n&#x27;
                           &#x27;        c.bringToFront();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showMigrationWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (areClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY, false)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.migration_workspace_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.updateMigrationWorkspaceBubblePosition();\n&#x27;
                           &#x27;            c.bringScrimToFront();\n&#x27;
                           &#x27;            c.bringToFront();\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            &#x27;
                           &#x27;removeCling(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (areClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.workspace_cling, 0, false, true);\n&#x27;
                           &#x27;            c.updateWorkspaceBubblePosition();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            // Set the focused hotseat app if &#x27;
                           &#x27;there is one\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.setFocusedHotseatApp(mLauncher.getFirstRunFocusedHotseatAppDrawableId(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppRank(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppComponentName(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleTitle(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleDescription());\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;    public Cling showFoldersCling() {\n&#x27;
                           &#x27;        SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (areClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(FOLDER_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling cling = &#x27;
                           &#x27;initCling(R.id.folder_cling, R.id.cling_scrim,\n&#x27;
                           &#x27;                    true, true);\n&#x27;
                           &#x27;            Folder openFolder = &#x27;
                           &#x27;mLauncher.getWorkspace().getOpenFolder();\n&#x27;
                           &#x27;            if (openFolder != null) {\n&#x27;
                           &#x27;                Rect openFolderRect = new Rect();\n&#x27;
                           &#x27;                &#x27;
                           &#x27;openFolder.getHitRect(openFolderRect);\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setOpenFolderRect(openFolderRect);\n&#x27;
                           &#x27;                openFolder.bringToFront();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            return cling;\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.folder_cling);\n&#x27;
                           &#x27;            return null;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Removes the cling outright from the &#x27;
                           &#x27;DragLayer */\n&#x27;
                           &#x27;    private void removeCling(int id) {\n&#x27;
                           &#x27;        final View cling = &#x27;
                           &#x27;mLauncher.findViewById(id);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            final ViewGroup parent = (ViewGroup) &#x27;
                           &#x27;cling.getParent();\n&#x27;
                           &#x27;            parent.post(new Runnable() {\n&#x27;
                           &#x27;                @Override\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    parent.removeView(cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            });\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Hides the specified Cling */\n&#x27;
                           &#x27;    private void dismissCling(final Cling cling, &#x27;
                           &#x27;final Runnable postAnimationCb,\n&#x27;
                           &#x27;                              final String flag, &#x27;
                           &#x27;int duration, boolean restoreNavBarVisibilty) {\n&#x27;
                           &#x27;        // To catch cases where siblings of &#x27;
                           &#x27;top-level views are made invisible, just check &#x27;
                           &#x27;whether\n&#x27;
                           &#x27;        // the cling is directly set to GONE &#x27;
                           &#x27;before dismissing it.\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;!= View.GONE) {\n&#x27;
                           &#x27;            final Runnable cleanUpClingCb = new &#x27;
                           &#x27;Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    cling.cleanup();\n&#x27;
                           &#x27;                    SharedPreferences.Editor &#x27;
                           &#x27;editor = mLauncher.getSharedPrefs().edit();\n&#x27;
                           &#x27;                    editor.putBoolean(flag, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;                    editor.apply();\n&#x27;
                           &#x27;                    if (postAnimationCb != null) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                        postAnimationCb.run();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;            if (duration &lt;= 0) {\n&#x27;
                           &#x27;                cleanUpClingCb.run();\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                cling.hide(duration, &#x27;
                           &#x27;cleanUpClingCb);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            if (restoreNavBarVisibilty) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setSystemUiVisibility(cling.getSystemUiVisibility() &#x27;
                           &#x27;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;~View.SYSTEM_UI_FLAG_LOW_PROFILE);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFirstRunCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        Runnable cb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                // Show the workspace cling next\n&#x27;
                           &#x27;                showWorkspaceCling();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;FIRST_RUN_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, false);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade out the search bar for the &#x27;
                           &#x27;workspace cling coming up\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().hideSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.showWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_cling);\n&#x27;
                           &#x27;                Runnable cb = new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        // Show the migration &#x27;
                           &#x27;workspace cling next\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;showMigrationWorkspaceCling();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                };\n&#x27;
                           &#x27;                dismissCling(cling, cb, &#x27;
                           &#x27;MIGRATION_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                        DISMISS_CLING_DURATION, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissAnyWorkspaceCling(Cling &#x27;
                           &#x27;cling, String key, View v) {\n&#x27;
                           &#x27;        Runnable cb = null;\n&#x27;
                           &#x27;        if (v == null) {\n&#x27;
                           &#x27;            cb = new Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getWorkspace().enterOverviewMode();\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        dismissCling(cling, cb, key, &#x27;
                           &#x27;DISMISS_CLING_DURATION, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade in the search bar\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().showSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissMigrationClingCopyApps(View &#x27;
                           &#x27;v) {\n&#x27;
                           &#x27;        // Copy the shortcuts from the old &#x27;
                           &#x27;database\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE\n&#x27;
                           &#x27;                        | &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_MIGRATE_SHORTCUTS);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Set the flag to skip the folder cling\n&#x27;
                           &#x27;        String spKey = &#x27;
                           &#x27;LauncherAppState.getSharedPreferencesKey();\n&#x27;
                           &#x27;        SharedPreferences sp = &#x27;
                           &#x27;mLauncher.getSharedPreferences(spKey, &#x27;
                           &#x27;Context.MODE_PRIVATE);\n&#x27;
                           &#x27;        SharedPreferences.Editor editor = &#x27;
                           &#x27;sp.edit();\n&#x27;
                           &#x27;        &#x27;
                           &#x27;editor.putBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;        editor.apply();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationClingUseDefault(View v) {\n&#x27;
                           &#x27;        // Clear the workspace\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFolderCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        dismissCling(cling, null, &#x27;
                           &#x27;FOLDER_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}}],
 [{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false) &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(FIRST_RUN_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;LauncherAppState.getLauncherProvider().wasNewDbCreated();\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;    public static void &#x27;
                         &#x27;synchonouslyMarkFirstRunClingDismissed(Context ctx) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;        SharedPreferences prefs = &#x27;
                         &#x27;ctx.getSharedPreferences(\n&#x27;
                         &#x27;                &#x27;
                         &#x27;LauncherAppState.getSharedPreferencesKey(), &#x27;
                         &#x27;Context.MODE_PRIVATE);\n&#x27;
                         &#x27;        SharedPreferences.Editor editor = &#x27;
                         &#x27;prefs.edit();\n&#x27;
                         &#x27;        &#x27;
                         &#x27;editor.putBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;true);\n&#x27;
                         &#x27;        editor.commit();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;    public void removeFirstRunAndMigrationClings() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        removeCling(R.id.first_run_cling);\n&#x27;
                           &#x27;        removeCling(R.id.migration_cling);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the first run cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showMigrationCling, and only runs if this &#x27;
                           &#x27;Launcher\n&#x27;
                           &#x27;     * package was preinstalled or there is no db &#x27;
                           &#x27;to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showFirstRunCling() {\n&#x27;
                           &#x27;        if (!skipCustomClingIfNoAccounts()) {\n&#x27;
                           &#x27;            SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &quot;            // If we&#x27;re not using the default &quot;
                           &#x27;workspace layout, replace workspace cling\n&#x27;
                           &#x27;            // with a custom workspace cling &#x27;
                           &#x27;(usually specified in an overlay)\n&#x27;
                           &#x27;            // For now, only do this on tablets\n&#x27;
                           &#x27;            if (!DISABLE_CUSTOM_CLINGS) {\n&#x27;
                           &#x27;                if &#x27;
                           &#x27;(sharedPrefs.getInt(LauncherProvider.DEFAULT_WORKSPACE_RESOURCE_ID, &#x27;
                           &#x27;0) != 0 &amp;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;mLauncher.getResources().getBoolean(R.bool.config_useCustomClings)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                    // Use a custom cling\n&#x27;
                           &#x27;                    View cling = &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;                    ViewGroup clingParent = &#x27;
                           &#x27;(ViewGroup) cling.getParent();\n&#x27;
                           &#x27;                    int clingIndex = &#x27;
                           &#x27;clingParent.indexOfChild(cling);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.removeViewAt(clingIndex);\n&#x27;
                           &#x27;                    View customCling = &#x27;
                           &#x27;mInflater.inflate(R.layout.custom_workspace_cling,\n&#x27;
                           &#x27;                            clingParent, false);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.addView(customCling, clingIndex);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;customCling.setId(R.id.workspace_cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                String sbHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunClingSearchBarHint();\n&#x27;
                           &#x27;                String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;                if (!sbHintStr.isEmpty()) {\n&#x27;
                           &#x27;                    TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;                    sbHint.setText(sbHintStr);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, false);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            initCling(R.id.first_run_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeFirstRunAndMigrationClings();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the migration cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showFirstRunCling, and only runs if this Launcher\n&#x27;
                           &#x27;     * package was not preinstalled and there &#x27;
                           &#x27;exists a db to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.hideWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        Cling c = initCling(R.id.migration_cling, &#x27;
                           &#x27;0, false, true);\n&#x27;
                           &#x27;        c.bringScrimToFront();\n&#x27;
                           &#x27;        c.bringToFront();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showMigrationWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (areClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY, false)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.migration_workspace_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.updateMigrationWorkspaceBubblePosition();\n&#x27;
                           &#x27;            c.bringScrimToFront();\n&#x27;
                           &#x27;            c.bringToFront();\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            &#x27;
                           &#x27;removeCling(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (areClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.workspace_cling, 0, false, true);\n&#x27;
                           &#x27;            c.updateWorkspaceBubblePosition();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            // Set the focused hotseat app if &#x27;
                           &#x27;there is one\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.setFocusedHotseatApp(mLauncher.getFirstRunFocusedHotseatAppDrawableId(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppRank(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppComponentName(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleTitle(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleDescription());\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;    public Cling showFoldersCling() {\n&#x27;
                           &#x27;        SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (areClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(FOLDER_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling cling = &#x27;
                           &#x27;initCling(R.id.folder_cling, R.id.cling_scrim,\n&#x27;
                           &#x27;                    true, true);\n&#x27;
                           &#x27;            Folder openFolder = &#x27;
                           &#x27;mLauncher.getWorkspace().getOpenFolder();\n&#x27;
                           &#x27;            if (openFolder != null) {\n&#x27;
                           &#x27;                Rect openFolderRect = new Rect();\n&#x27;
                           &#x27;                &#x27;
                           &#x27;openFolder.getHitRect(openFolderRect);\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setOpenFolderRect(openFolderRect);\n&#x27;
                           &#x27;                openFolder.bringToFront();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            return cling;\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.folder_cling);\n&#x27;
                           &#x27;            return null;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Removes the cling outright from the &#x27;
                           &#x27;DragLayer */\n&#x27;
                           &#x27;    private void removeCling(int id) {\n&#x27;
                           &#x27;        final View cling = &#x27;
                           &#x27;mLauncher.findViewById(id);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            final ViewGroup parent = (ViewGroup) &#x27;
                           &#x27;cling.getParent();\n&#x27;
                           &#x27;            parent.post(new Runnable() {\n&#x27;
                           &#x27;                @Override\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    parent.removeView(cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            });\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Hides the specified Cling */\n&#x27;
                           &#x27;    private void dismissCling(final Cling cling, &#x27;
                           &#x27;final Runnable postAnimationCb,\n&#x27;
                           &#x27;                              final String flag, &#x27;
                           &#x27;int duration, boolean restoreNavBarVisibilty) {\n&#x27;
                           &#x27;        // To catch cases where siblings of &#x27;
                           &#x27;top-level views are made invisible, just check &#x27;
                           &#x27;whether\n&#x27;
                           &#x27;        // the cling is directly set to GONE &#x27;
                           &#x27;before dismissing it.\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;!= View.GONE) {\n&#x27;
                           &#x27;            final Runnable cleanUpClingCb = new &#x27;
                           &#x27;Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    cling.cleanup();\n&#x27;
                           &#x27;                    SharedPreferences.Editor &#x27;
                           &#x27;editor = mLauncher.getSharedPrefs().edit();\n&#x27;
                           &#x27;                    editor.putBoolean(flag, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;                    editor.apply();\n&#x27;
                           &#x27;                    if (postAnimationCb != null) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                        postAnimationCb.run();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;            if (duration &lt;= 0) {\n&#x27;
                           &#x27;                cleanUpClingCb.run();\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                cling.hide(duration, &#x27;
                           &#x27;cleanUpClingCb);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            if (restoreNavBarVisibilty) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setSystemUiVisibility(cling.getSystemUiVisibility() &#x27;
                           &#x27;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;~View.SYSTEM_UI_FLAG_LOW_PROFILE);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFirstRunCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        Runnable cb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                // Show the workspace cling next\n&#x27;
                           &#x27;                showWorkspaceCling();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;FIRST_RUN_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, false);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade out the search bar for the &#x27;
                           &#x27;workspace cling coming up\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().hideSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.showWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_cling);\n&#x27;
                           &#x27;                Runnable cb = new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        // Show the migration &#x27;
                           &#x27;workspace cling next\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;showMigrationWorkspaceCling();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                };\n&#x27;
                           &#x27;                dismissCling(cling, cb, &#x27;
                           &#x27;MIGRATION_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                        DISMISS_CLING_DURATION, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissAnyWorkspaceCling(Cling &#x27;
                           &#x27;cling, String key, View v) {\n&#x27;
                           &#x27;        Runnable cb = null;\n&#x27;
                           &#x27;        if (v == null) {\n&#x27;
                           &#x27;            cb = new Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getWorkspace().enterOverviewMode();\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        dismissCling(cling, cb, key, &#x27;
                           &#x27;DISMISS_CLING_DURATION, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade in the search bar\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().showSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissMigrationClingCopyApps(View &#x27;
                           &#x27;v) {\n&#x27;
                           &#x27;        // Copy the shortcuts from the old &#x27;
                           &#x27;database\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE\n&#x27;
                           &#x27;                        | &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_MIGRATE_SHORTCUTS);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Set the flag to skip the folder cling\n&#x27;
                           &#x27;        String spKey = &#x27;
                           &#x27;LauncherAppState.getSharedPreferencesKey();\n&#x27;
                           &#x27;        SharedPreferences sp = &#x27;
                           &#x27;mLauncher.getSharedPreferences(spKey, &#x27;
                           &#x27;Context.MODE_PRIVATE);\n&#x27;
                           &#x27;        SharedPreferences.Editor editor = &#x27;
                           &#x27;sp.edit();\n&#x27;
                           &#x27;        &#x27;
                           &#x27;editor.putBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;        editor.apply();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationClingUseDefault(View v) {\n&#x27;
                           &#x27;        // Clear the workspace\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFolderCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        dismissCling(cling, null, &#x27;
                           &#x27;FOLDER_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}}]]</pre>
          </body>
        </html>
        